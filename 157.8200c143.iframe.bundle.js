/*! For license information please see 157.8200c143.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkplatform_ui=self.webpackChunkplatform_ui||[]).push([[157],{"./node_modules/ag-grid-community/dist/ag-grid-community.cjs.js":(__unused_webpack_module,exports,__webpack_require__)=>{function makeNull(value){return null==value||""===value?null:value}function exists(value,allowEmptyString){return void 0===allowEmptyString&&(allowEmptyString=!1),null!=value&&(""!==value||allowEmptyString)}function missing(value){return!exists(value)}function missingOrEmpty(value){return null==value||0===value.length}function toStringOrNull(value){return null!=value&&"function"==typeof value.toString?value.toString():null}function attrToNumber(value){if(void 0!==value){if(null===value||""===value)return null;if("number"==typeof value)return isNaN(value)?void 0:value;var valueParsed=parseInt(value,10);return isNaN(valueParsed)?void 0:valueParsed}}function attrToBoolean(value){if(void 0!==value)return null!==value&&""!==value&&("boolean"==typeof value?value:/true/i.test(value))}function defaultComparator(valueA,valueB,accentedCompare){void 0===accentedCompare&&(accentedCompare=!1);var valueAMissing=null==valueA,valueBMissing=null==valueB;if(valueA&&valueA.toNumber&&(valueA=valueA.toNumber()),valueB&&valueB.toNumber&&(valueB=valueB.toNumber()),valueAMissing&&valueBMissing)return 0;if(valueAMissing)return-1;if(valueBMissing)return 1;function doQuickCompare(a,b){return a>b?1:a<b?-1:0}if("string"!=typeof valueA)return doQuickCompare(valueA,valueB);if(!accentedCompare)return doQuickCompare(valueA,valueB);try{return valueA.localeCompare(valueB)}catch(e){return doQuickCompare(valueA,valueB)}}function values(object){if(object instanceof Set||object instanceof Map){var arr_1=[];return object.forEach((function(value){return arr_1.push(value)})),arr_1}return Object.values(object)}Object.defineProperty(exports,"__esModule",{value:!0});var GenericUtils=Object.freeze({makeNull,exists,missing,missingOrEmpty,toStringOrNull,attrToNumber,attrToBoolean,attrToString:function attrToString(value){if(null!=value&&""!==value)return value},referenceCompare:function referenceCompare(left,right){return null==left&&null==right||(null!=left||null==right)&&((null==left||null!=right)&&left===right)},jsonEquals:function jsonEquals(val1,val2){return(val1?JSON.stringify(val1):null)===(val2?JSON.stringify(val2):null)},defaultComparator,values}),ColumnKeyCreator=function(){function ColumnKeyCreator(){this.existingKeys={}}return ColumnKeyCreator.prototype.addExistingKeys=function(keys){for(var i=0;i<keys.length;i++)this.existingKeys[keys[i]]=!0},ColumnKeyCreator.prototype.getUniqueKey=function(colId,colField){colId=toStringOrNull(colId);for(var count=0;;){var idToTry=void 0;if(colId?(idToTry=colId,0!==count&&(idToTry+="_"+count)):colField?(idToTry=colField,0!==count&&(idToTry+="_"+count)):idToTry=""+count,!this.existingKeys[idToTry])return this.existingKeys[idToTry]=!0,idToTry;count++}},ColumnKeyCreator}();function iterateObject(object,callback){null!=object&&(Array.isArray(object)?object.forEach((function(value,index){return callback(""+index,value)})):Object.keys(object).forEach((function(key){return callback(key,object[key])})))}function cloneObject(object){for(var copy={},keys=Object.keys(object),i=0;i<keys.length;i++){var key=keys[i],value=object[key];copy[key]=value}return copy}function deepCloneDefinition(object,keysToSkip){if(object){var obj=object,res={};return Object.keys(obj).forEach((function(key){if(!(keysToSkip&&keysToSkip.indexOf(key)>=0)){var value=obj[key],sourceIsSimpleObject=isNonNullObject(value)&&value.constructor===Object;res[key]=sourceIsSimpleObject?deepCloneDefinition(value):value}})),res}}function getProperty(object,key){return object[key]}function setProperty(object,key,value){object[key]=value}function copyPropertyIfPresent(source,target,property,transform){var value=getProperty(source,property);void 0!==value&&setProperty(target,property,transform?transform(value):value)}function getAllKeysInObjects(objects){var allValues={};return objects.filter((function(obj){return null!=obj})).forEach((function(obj){Object.keys(obj).forEach((function(key){return allValues[key]=null}))})),Object.keys(allValues)}function getAllValuesInObject(obj){if(!obj)return[];var anyObject=Object;if("function"==typeof anyObject.values)return anyObject.values(obj);var ret=[];for(var key in obj)obj.hasOwnProperty(key)&&obj.propertyIsEnumerable(key)&&ret.push(obj[key]);return ret}function mergeDeep(dest,source,copyUndefined,makeCopyOfSimpleObjects){void 0===copyUndefined&&(copyUndefined=!0),void 0===makeCopyOfSimpleObjects&&(makeCopyOfSimpleObjects=!1),exists(source)&&iterateObject(source,(function(key,sourceValue){var destValue=dest[key];if(destValue!==sourceValue){if(makeCopyOfSimpleObjects)if(null==destValue&&null!=sourceValue)"object"==typeof sourceValue&&sourceValue.constructor===Object&&(destValue={},dest[key]=destValue);isNonNullObject(sourceValue)&&isNonNullObject(destValue)&&!Array.isArray(destValue)?mergeDeep(destValue,sourceValue,copyUndefined,makeCopyOfSimpleObjects):(copyUndefined||void 0!==sourceValue)&&(dest[key]=sourceValue)}}))}function getValueUsingField(data,field,fieldContainsDots){if(field&&data){if(!fieldContainsDots)return data[field];for(var fields=field.split("."),currentObject=data,i=0;i<fields.length;i++){if(null==currentObject)return;currentObject=currentObject[fields[i]]}return currentObject}}function removeAllReferences(obj,objectName){Object.keys(obj).forEach((function(key){"object"==typeof obj[key]&&(obj[key]=void 0)}));var proto=Object.getPrototypeOf(obj),properties={};Object.keys(proto).forEach((function(key){if("function"==typeof proto[key]){properties[key]={value:function(){console.warn("AG Grid: "+objectName+" function "+key+"() cannot be called as the grid has been destroyed.\n                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't\n                     be keeping the API reference, your application has a memory leak! Remove the API reference\n                     when the grid is destroyed.")},writable:!0}}})),Object.defineProperties(obj,properties)}function isNonNullObject(value){return"object"==typeof value&&null!==value}var ObjectUtils=Object.freeze({iterateObject,cloneObject,deepCloneObject:function deepCloneObject(object){return JSON.parse(JSON.stringify(object))},deepCloneDefinition,getProperty,setProperty,copyPropertiesIfPresent:function copyPropertiesIfPresent(source,target){for(var properties=[],_i=2;_i<arguments.length;_i++)properties[_i-2]=arguments[_i];properties.forEach((function(p){return copyPropertyIfPresent(source,target,p)}))},copyPropertyIfPresent,getAllKeysInObjects,getAllValuesInObject,mergeDeep,missingOrEmptyObject:function missingOrEmptyObject(value){return missing(value)||0===Object.keys(value).length},get:function get(source,expression,defaultValue){if(null==source)return defaultValue;for(var keys=expression.split("."),objectToRead=source;keys.length>1;)if(null==(objectToRead=objectToRead[keys.shift()]))return defaultValue;var value=objectToRead[keys[0]];return null!=value?value:defaultValue},set:function set(target,expression,value){if(null!=target){for(var keys=expression.split("."),objectToUpdate=target;keys.length>1;)if(null==(objectToUpdate=objectToUpdate[keys.shift()]))return;objectToUpdate[keys[0]]=value}},deepFreeze:function deepFreeze(object){return Object.freeze(object),values(object).forEach((function(v){(isNonNullObject(v)||"function"==typeof v)&&deepFreeze(v)})),object},getValueUsingField,removeAllReferences,isNonNullObject}),FUNCTION_STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,FUNCTION_ARGUMENT_NAMES=/([^\s,]+)/g,doOnceFlags={};function doOnce(func,key){doOnceFlags[key]||(func(),doOnceFlags[key]=!0)}function getFunctionName(funcConstructor){if(funcConstructor.name)return funcConstructor.name;var matches=/function\s+([^\(]+)/.exec(funcConstructor.toString());return matches&&2===matches.length?matches[1].trim():null}function isFunction(val){return!!(val&&val.constructor&&val.call&&val.apply)}function executeInAWhile(funcs){executeAfter(funcs,400)}var executeNextVMTurnFuncs=[],executeNextVMTurnPending=!1;function executeNextVMTurn(func){executeNextVMTurnFuncs.push(func),executeNextVMTurnPending||(executeNextVMTurnPending=!0,window.setTimeout((function(){var funcsCopy=executeNextVMTurnFuncs.slice();executeNextVMTurnFuncs.length=0,executeNextVMTurnPending=!1,funcsCopy.forEach((function(func){return func()}))}),0))}function executeAfter(funcs,milliseconds){void 0===milliseconds&&(milliseconds=0),funcs.length>0&&window.setTimeout((function(){return funcs.forEach((function(func){return func()}))}),milliseconds)}function debounce(func,wait,immediate){var timeout;return void 0===immediate&&(immediate=!1),function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var context=this,callNow=immediate&&!timeout;window.clearTimeout(timeout),timeout=window.setTimeout((function(){timeout=null,immediate||func.apply(context,args)}),wait),callNow&&func.apply(context,args)}}function throttle(func,wait){var previousCall=0;return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var currentCall=(new Date).getTime();currentCall-previousCall<wait||(previousCall=currentCall,func.apply(this,args))}}function waitUntil(condition,callback,timeout,timeoutMessage){void 0===timeout&&(timeout=100);var timeStamp=(new Date).getTime(),interval=null,executed=!1,internalCallback=function(){var reachedTimeout=(new Date).getTime()-timeStamp>timeout;(condition()||reachedTimeout)&&(callback(),executed=!0,null!=interval&&(window.clearInterval(interval),interval=null),reachedTimeout&&timeoutMessage&&console.warn(timeoutMessage))};internalCallback(),executed||(interval=window.setInterval(internalCallback,10))}function callIfPresent(func){func&&func()}var FunctionUtils=Object.freeze({doOnce,getFunctionName,getFunctionParameters:function getFunctionParameters(func){var fnStr=func.toString().replace(FUNCTION_STRIP_COMMENTS,"");return fnStr.slice(fnStr.indexOf("(")+1,fnStr.indexOf(")")).match(FUNCTION_ARGUMENT_NAMES)||[]},isFunction,executeInAWhile,executeNextVMTurn,executeAfter,debounce,throttle,waitUntil,compose:function compose(){for(var fns=[],_i=0;_i<arguments.length;_i++)fns[_i]=arguments[_i];return function(arg){return fns.reduce((function(composed,f){return f(composed)}),arg)}},callIfPresent}),Context=function(){function Context(params,logger){if(this.beanWrappers={},this.destroyed=!1,params&&params.beanClasses){this.contextParams=params,this.logger=logger,this.logger.log(">> creating ag-Application Context"),this.createBeans();var beanInstances=this.getBeanInstances();this.wireBeans(beanInstances),this.logger.log(">> ag-Application Context ready - component is alive")}}return Context.prototype.getBeanInstances=function(){return values(this.beanWrappers).map((function(beanEntry){return beanEntry.beanInstance}))},Context.prototype.createBean=function(bean,afterPreCreateCallback){if(!bean)throw Error("Can't wire to bean since it is null");return this.wireBeans([bean],afterPreCreateCallback),bean},Context.prototype.wireBeans=function(beanInstances,afterPreCreateCallback){this.autoWireBeans(beanInstances),this.methodWireBeans(beanInstances),this.callLifeCycleMethods(beanInstances,"preConstructMethods"),exists(afterPreCreateCallback)&&beanInstances.forEach(afterPreCreateCallback),this.callLifeCycleMethods(beanInstances,"postConstructMethods")},Context.prototype.createBeans=function(){var _this=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),iterateObject(this.beanWrappers,(function(key,beanEntry){var constructorParamsMeta;beanEntry.bean.__agBeanMetaData&&beanEntry.bean.__agBeanMetaData.autowireMethods&&beanEntry.bean.__agBeanMetaData.autowireMethods.agConstructor&&(constructorParamsMeta=beanEntry.bean.__agBeanMetaData.autowireMethods.agConstructor);var constructorParams=_this.getBeansForParameters(constructorParamsMeta,beanEntry.bean.name),newInstance=function applyToConstructor(constructor,argArray){var args=[null].concat(argArray);return new(constructor.bind.apply(constructor,args))}(beanEntry.bean,constructorParams);beanEntry.beanInstance=newInstance}));var createdBeanNames=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: "+createdBeanNames)},Context.prototype.createBeanWrapper=function(BeanClass){var metaData=BeanClass.__agBeanMetaData;if(!metaData){var beanName=void 0;return beanName=BeanClass.prototype.constructor?getFunctionName(BeanClass.prototype.constructor):""+BeanClass,void console.error("Context item "+beanName+" is not a bean")}var beanEntry={bean:BeanClass,beanInstance:null,beanName:metaData.beanName};this.beanWrappers[metaData.beanName]=beanEntry},Context.prototype.autoWireBeans=function(beanInstances){var _this=this;beanInstances.forEach((function(beanInstance){_this.forEachMetaDataInHierarchy(beanInstance,(function(metaData,beanName){var attributes=metaData.agClassAttributes;attributes&&attributes.forEach((function(attribute){var otherBean=_this.lookupBeanInstance(beanName,attribute.beanName,attribute.optional);beanInstance[attribute.attributeName]=otherBean}))}))}))},Context.prototype.methodWireBeans=function(beanInstances){var _this=this;beanInstances.forEach((function(beanInstance){_this.forEachMetaDataInHierarchy(beanInstance,(function(metaData,beanName){iterateObject(metaData.autowireMethods,(function(methodName,wireParams){if("agConstructor"!==methodName){var initParams=_this.getBeansForParameters(wireParams,beanName);beanInstance[methodName].apply(beanInstance,initParams)}}))}))}))},Context.prototype.forEachMetaDataInHierarchy=function(beanInstance,callback){for(var prototype=Object.getPrototypeOf(beanInstance);null!=prototype;){var constructor=prototype.constructor;if(constructor.hasOwnProperty("__agBeanMetaData"))callback(constructor.__agBeanMetaData,this.getBeanName(constructor));prototype=Object.getPrototypeOf(prototype)}},Context.prototype.getBeanName=function(constructor){if(constructor.__agBeanMetaData&&constructor.__agBeanMetaData.beanName)return constructor.__agBeanMetaData.beanName;var constructorString=constructor.toString();return constructorString.substring(9,constructorString.indexOf("("))},Context.prototype.getBeansForParameters=function(parameters,beanName){var _this=this,beansList=[];return parameters&&iterateObject(parameters,(function(paramIndex,otherBeanName){var otherBean=_this.lookupBeanInstance(beanName,otherBeanName);beansList[Number(paramIndex)]=otherBean})),beansList},Context.prototype.lookupBeanInstance=function(wiringBean,beanName,optional){if(void 0===optional&&(optional=!1),"context"===beanName)return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(beanName))return this.contextParams.providedBeanInstances[beanName];var beanEntry=this.beanWrappers[beanName];return beanEntry?beanEntry.beanInstance:(optional||console.error("AG Grid: unable to find bean reference "+beanName+" while initialising "+wiringBean),null)},Context.prototype.callLifeCycleMethods=function(beanInstances,lifeCycleMethod){var _this=this;beanInstances.forEach((function(beanInstance){return _this.callLifeCycleMethodsOnBean(beanInstance,lifeCycleMethod)}))},Context.prototype.callLifeCycleMethodsOnBean=function(beanInstance,lifeCycleMethod,methodToIgnore){var allMethods={};this.forEachMetaDataInHierarchy(beanInstance,(function(metaData){var methods=metaData[lifeCycleMethod];methods&&methods.forEach((function(methodName){methodName!=methodToIgnore&&(allMethods[methodName]=!0)}))})),Object.keys(allMethods).forEach((function(methodName){return beanInstance[methodName]()}))},Context.prototype.getBean=function(name){return this.lookupBeanInstance("getBean",name,!0)},Context.prototype.destroy=function(){if(!this.destroyed){this.logger.log(">> Shutting down ag-Application Context");var beanInstances=this.getBeanInstances();this.destroyBeans(beanInstances),this.contextParams.providedBeanInstances=null,this.destroyed=!0,this.logger.log(">> ag-Application Context shut down - component is dead")}},Context.prototype.destroyBean=function(bean){bean&&this.destroyBeans([bean])},Context.prototype.destroyBeans=function(beans){var _this=this;return beans?(beans.forEach((function(bean){_this.callLifeCycleMethodsOnBean(bean,"preDestroyMethods","destroy");var beanAny=bean;"function"==typeof beanAny.destroy&&beanAny.destroy()})),[]):[]},Context}();function PreConstruct(target,methodName,descriptor){var props=getOrCreateProps(target.constructor);props.preConstructMethods||(props.preConstructMethods=[]),props.preConstructMethods.push(methodName)}function PostConstruct(target,methodName,descriptor){var props=getOrCreateProps(target.constructor);props.postConstructMethods||(props.postConstructMethods=[]),props.postConstructMethods.push(methodName)}function PreDestroy(target,methodName,descriptor){var props=getOrCreateProps(target.constructor);props.preDestroyMethods||(props.preDestroyMethods=[]),props.preDestroyMethods.push(methodName)}function Bean(beanName){return function(classConstructor){getOrCreateProps(classConstructor).beanName=beanName}}function Autowired(name){return function(target,propertyKey,descriptor){autowiredFunc(target,name,!1,target,propertyKey,null)}}function Optional(name){return function(target,propertyKey,descriptor){autowiredFunc(target,name,!0,target,propertyKey,null)}}function autowiredFunc(target,name,optional,classPrototype,methodOrAttributeName,index){if(null!==name)if("number"!=typeof index){var props=getOrCreateProps(target.constructor);props.agClassAttributes||(props.agClassAttributes=[]),props.agClassAttributes.push({attributeName:methodOrAttributeName,beanName:name,optional})}else console.error("AG Grid: Autowired should be on an attribute");else console.error("AG Grid: Autowired name should not be null")}function Qualifier(name){return function(classPrototype,methodOrAttributeName,index){var props,constructor="function"==typeof classPrototype?classPrototype:classPrototype.constructor;if("number"==typeof index){var methodName=void 0;methodOrAttributeName?(props=getOrCreateProps(constructor),methodName=methodOrAttributeName):(props=getOrCreateProps(constructor),methodName="agConstructor"),props.autowireMethods||(props.autowireMethods={}),props.autowireMethods[methodName]||(props.autowireMethods[methodName]={}),props.autowireMethods[methodName][index]=name}}}function getOrCreateProps(target){return target.hasOwnProperty("__agBeanMetaData")||(target.__agBeanMetaData={}),target.__agBeanMetaData}var ModuleNames,__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},EventService=function(){function EventService(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return EventService.prototype.setBeans=function(loggerFactory,gridOptionsWrapper,frameworkOverrides,globalEventListener){if(void 0===globalEventListener&&(globalEventListener=null),this.frameworkOverrides=frameworkOverrides,globalEventListener){var async=gridOptionsWrapper.useAsyncEvents();this.addGlobalListener(globalEventListener,async)}},EventService.prototype.getListeners=function(eventType,async,autoCreateListenerCollection){var listenerMap=async?this.allAsyncListeners:this.allSyncListeners,listeners=listenerMap.get(eventType);return!listeners&&autoCreateListenerCollection&&(listeners=new Set,listenerMap.set(eventType,listeners)),listeners},EventService.prototype.noRegisteredListenersExist=function(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size},EventService.prototype.addEventListener=function(eventType,listener,async){void 0===async&&(async=!1),this.getListeners(eventType,async,!0).add(listener)},EventService.prototype.removeEventListener=function(eventType,listener,async){void 0===async&&(async=!1);var listeners=this.getListeners(eventType,async,!1);listeners&&(listeners.delete(listener),0===listeners.size&&(async?this.allAsyncListeners:this.allSyncListeners).delete(eventType))},EventService.prototype.addGlobalListener=function(listener,async){void 0===async&&(async=!1),(async?this.globalAsyncListeners:this.globalSyncListeners).add(listener)},EventService.prototype.removeGlobalListener=function(listener,async){void 0===async&&(async=!1),(async?this.globalAsyncListeners:this.globalSyncListeners).delete(listener)},EventService.prototype.dispatchEvent=function(event){this.dispatchToListeners(event,!0),this.dispatchToListeners(event,!1),this.firedEvents[event.type]=!0},EventService.prototype.dispatchEventOnce=function(event){this.firedEvents[event.type]||this.dispatchEvent(event)},EventService.prototype.dispatchToListeners=function(event,async){var _this=this,eventType=event.type,listeners=this.getListeners(eventType,async,!1);listeners&&function(listeners){listeners.forEach((function(listener){async?_this.dispatchAsync((function(){return listener(event)})):listener(event)}))}(listeners),(async?this.globalAsyncListeners:this.globalSyncListeners).forEach((function(listener){async?_this.dispatchAsync((function(){return _this.frameworkOverrides.dispatchEvent(eventType,(function(){return listener(eventType,event)}),!0)})):_this.frameworkOverrides.dispatchEvent(eventType,(function(){return listener(eventType,event)}),!0)}))},EventService.prototype.dispatchAsync=function(func){this.asyncFunctionsQueue.push(func),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},EventService.prototype.flushAsyncQueue=function(){this.scheduled=!1;var queueCopy=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],queueCopy.forEach((function(func){return func()}))},__decorate([__param(0,Qualifier("loggerFactory")),__param(1,Qualifier("gridOptionsWrapper")),__param(2,Qualifier("frameworkOverrides")),__param(3,Qualifier("globalEventListener"))],EventService.prototype,"setBeans",null),EventService=__decorate([Bean("eventService")],EventService)}(),Constants=function(){function Constants(){}return Constants.ROW_BUFFER_SIZE=10,Constants.LAYOUT_INTERVAL=500,Constants.BATCH_WAIT_MILLIS=50,Constants.EXPORT_TYPE_DRAG_COPY="dragCopy",Constants.EXPORT_TYPE_CLIPBOARD="clipboard",Constants.EXPORT_TYPE_EXCEL="excel",Constants.EXPORT_TYPE_CSV="csv",Constants.ROW_MODEL_TYPE_INFINITE="infinite",Constants.ROW_MODEL_TYPE_VIEWPORT="viewport",Constants.ROW_MODEL_TYPE_CLIENT_SIDE="clientSide",Constants.ROW_MODEL_TYPE_SERVER_SIDE="serverSide",Constants.ALWAYS="always",Constants.ONLY_WHEN_GROUPING="onlyWhenGrouping",Constants.PINNED_TOP="top",Constants.PINNED_BOTTOM="bottom",Constants.DOM_LAYOUT_NORMAL="normal",Constants.DOM_LAYOUT_PRINT="print",Constants.DOM_LAYOUT_AUTO_HEIGHT="autoHeight",Constants.GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",Constants.SOURCE_PASTE="paste",Constants.PINNED_RIGHT="right",Constants.PINNED_LEFT="left",Constants.SORT_ASC="asc",Constants.SORT_DESC="desc",Constants.INPUT_SELECTOR="input, select, button, textarea",Constants.FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea",Constants.FOCUSABLE_EXCLUDE=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled, .ag-disabled *",Constants}();(ModuleNames=exports.ModuleNames||(exports.ModuleNames={})).CommunityCoreModule="@ag-grid-community/core",ModuleNames.CommunityAllModules="@ag-grid-community/all",ModuleNames.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",ModuleNames.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",ModuleNames.CsvExportModule="@ag-grid-community/csv-export",ModuleNames.EnterpriseCoreModule="@ag-grid-enterprise/core",ModuleNames.EnterpriseAllModules="@ag-grid-enterprise/all",ModuleNames.RowGroupingModule="@ag-grid-enterprise/row-grouping",ModuleNames.ColumnToolPanelModule="@ag-grid-enterprise/column-tool-panel",ModuleNames.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",ModuleNames.MenuModule="@ag-grid-enterprise/menu",ModuleNames.SetFilterModule="@ag-grid-enterprise/set-filter",ModuleNames.MultiFilterModule="@ag-grid-enterprise/multi-filter",ModuleNames.StatusBarModule="@ag-grid-enterprise/status-bar",ModuleNames.SideBarModule="@ag-grid-enterprise/side-bar",ModuleNames.RangeSelectionModule="@ag-grid-enterprise/range-selection",ModuleNames.MasterDetailModule="@ag-grid-enterprise/master-detail",ModuleNames.RichSelectModule="@ag-grid-enterprise/rich-select",ModuleNames.GridChartsModule="@ag-grid-enterprise/charts",ModuleNames.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",ModuleNames.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",ModuleNames.ExcelExportModule="@ag-grid-enterprise/excel-export",ModuleNames.ClipboardModule="@ag-grid-enterprise/clipboard",ModuleNames.SparklinesModule="@ag-grid-enterprise/sparklines",ModuleNames.AngularModule="@ag-grid-community/angular",ModuleNames.ReactModule="@ag-grid-community/react",ModuleNames.VueModule="@ag-grid-community/vue",ModuleNames.PolymerModule="@ag-grid-community/polymer";var ModuleRegistry=function(){function ModuleRegistry(){}return ModuleRegistry.register=function(module,moduleBased){void 0===moduleBased&&(moduleBased=!0),ModuleRegistry.modulesMap[module.moduleName]=module,void 0===ModuleRegistry.moduleBased?ModuleRegistry.moduleBased=moduleBased:ModuleRegistry.moduleBased!==moduleBased&&doOnce((function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")}),"ModulePackageCheck")},ModuleRegistry.registerModules=function(modules,moduleBased){void 0===moduleBased&&(moduleBased=!0),modules&&modules.forEach((function(module){return ModuleRegistry.register(module,moduleBased)}))},ModuleRegistry.assertRegistered=function(moduleName,reason){if(this.isRegistered(moduleName))return!0;var warningMessage,warningKey=reason+moduleName;return warningMessage=ModuleRegistry.moduleBased?"AG Grid: unable to use "+reason+" as module "+moduleName+" is not present. Please see: https://www.ag-grid.com/javascript-grid/modules/":"AG Grid: unable to use "+reason+" as package 'ag-grid-enterprise' is not present. Please see: https://www.ag-grid.com/javascript-grid/packages/",doOnce((function(){console.warn(warningMessage)}),warningKey),!1},ModuleRegistry.isRegistered=function(moduleName){return!!ModuleRegistry.modulesMap[moduleName]},ModuleRegistry.getRegisteredModules=function(){return values(ModuleRegistry.modulesMap)},ModuleRegistry.isPackageBased=function(){return!ModuleRegistry.moduleBased},ModuleRegistry.modulesMap={},ModuleRegistry}(),__decorate$1=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},instanceIdSequence=0,Column=function(){function Column(colDef,userProvidedColDef,colId,primary){this.instanceId=instanceIdSequence++,this.moving=!1,this.menuVisible=!1,this.filterActive=!1,this.eventService=new EventService,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=colDef,this.userProvidedColDef=userProvidedColDef,this.colId=colId,this.primary=primary,this.setState(colDef)}return Column.prototype.getInstanceId=function(){return this.instanceId},Column.prototype.setState=function(colDef){void 0!==colDef.sort?colDef.sort!==Constants.SORT_ASC&&colDef.sort!==Constants.SORT_DESC||(this.sort=colDef.sort):colDef.initialSort!==Constants.SORT_ASC&&colDef.initialSort!==Constants.SORT_DESC||(this.sort=colDef.initialSort);var sortIndex=attrToNumber(colDef.sortIndex),initialSortIndex=attrToNumber(colDef.initialSortIndex);void 0!==sortIndex?null!==sortIndex&&(this.sortIndex=sortIndex):null!==initialSortIndex&&(this.sortIndex=initialSortIndex);var hide=attrToBoolean(colDef.hide),initialHide=attrToBoolean(colDef.initialHide);this.visible=void 0!==hide?!hide:!initialHide,void 0!==colDef.pinned?this.setPinned(colDef.pinned):this.setPinned(colDef.initialPinned);var flex=attrToNumber(colDef.flex),initialFlex=attrToNumber(colDef.initialFlex);void 0!==flex?this.flex=flex:void 0!==initialFlex&&(this.flex=initialFlex)},Column.prototype.setColDef=function(colDef,userProvidedColDef){this.colDef=colDef,this.userProvidedColDef=userProvidedColDef,this.initMinAndMaxWidths(),this.initDotNotation()},Column.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},Column.prototype.setParent=function(parent){this.parent=parent},Column.prototype.getParent=function(){return this.parent},Column.prototype.setOriginalParent=function(originalParent){this.originalParent=originalParent},Column.prototype.getOriginalParent=function(){return this.originalParent},Column.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.validate()},Column.prototype.initDotNotation=function(){var suppressDotNotation=this.gridOptionsWrapper.isSuppressFieldDotNotation();this.fieldContainsDots=exists(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!suppressDotNotation,this.tooltipFieldContainsDots=exists(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!suppressDotNotation},Column.prototype.initMinAndMaxWidths=function(){var colDef=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(colDef),this.maxWidth=this.columnUtils.calculateColMaxWidth(colDef)},Column.prototype.resetActualWidth=function(source){void 0===source&&(source="api");var initialWidth=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(initialWidth,source,!0)},Column.prototype.isEmptyGroup=function(){return!1},Column.prototype.isRowGroupDisplayed=function(colId){if(missing(this.colDef)||missing(this.colDef.showRowGroup))return!1;var showingAllGroups=!0===this.colDef.showRowGroup,showingThisGroup=this.colDef.showRowGroup===colId;return showingAllGroups||showingThisGroup},Column.prototype.isPrimary=function(){return this.primary},Column.prototype.isFilterAllowed=function(){return!!this.colDef.filter||!!this.colDef.filterFramework},Column.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},Column.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},Column.prototype.validate=function(){var colDefAny=this.colDef;function warnOnce(msg,key,obj){doOnce((function(){obj?console.warn(msg,obj):doOnce((function(){return console.warn(msg)}),key)}),key)}if(this.gridOptionsWrapper.isRowModelDefault()&&!ModuleRegistry.isRegistered(exports.ModuleNames.RowGroupingModule)){["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"].forEach((function(item){exists(colDefAny[item])&&(ModuleRegistry.isPackageBased()?warnOnce("AG Grid: "+item+" is only valid in ag-grid-enterprise, your column definition should not have "+item,"ColumnRowGroupingMissing"+item):warnOnce("AG Grid: "+item+" is only valid with AG Grid Enterprise Module "+exports.ModuleNames.RowGroupingModule+" - your column definition should not have "+item,"ColumnRowGroupingMissing"+item))}))}if(ModuleRegistry.isRegistered(exports.ModuleNames.RichSelectModule)||"agRichSelect"===this.colDef.cellEditor&&(ModuleRegistry.isPackageBased()?warnOnce("AG Grid: "+this.colDef.cellEditor+" can only be used with ag-grid-enterprise","ColumnRichSelectMissing"):warnOnce("AG Grid: "+this.colDef.cellEditor+" can only be used with AG Grid Enterprise Module "+exports.ModuleNames.RichSelectModule,"ColumnRichSelectMissing")),this.gridOptionsWrapper.isTreeData()){["rowGroup","rowGroupIndex","pivot","pivotIndex"].forEach((function(item){exists(colDefAny[item])&&warnOnce("AG Grid: "+item+" is not possible when doing tree data, your column definition should not have "+item,"TreeDataCannotRowGroup")}))}exists(this.colDef.width)&&"number"!=typeof this.colDef.width&&warnOnce("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck_asdfawef"),colDefAny.pinnedRowCellRenderer&&warnOnce("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),colDefAny.pinnedRowCellRendererParams&&warnOnce("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),colDefAny.pinnedRowCellRendererFramework&&warnOnce("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),colDefAny.pinnedRowValueGetter&&warnOnce("AG Grid: pinnedRowCellRenderer is deprecated, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue.","colDef.pinnedRowCellRenderer-deprecated")},Column.prototype.addEventListener=function(eventType,listener){this.eventService.addEventListener(eventType,listener)},Column.prototype.removeEventListener=function(eventType,listener){this.eventService.removeEventListener(eventType,listener)},Column.prototype.createColumnFunctionCallbackParams=function(rowNode){return{node:rowNode,data:rowNode.data,column:this,colDef:this.colDef,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()}},Column.prototype.isSuppressNavigable=function(rowNode){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){var params=this.createColumnFunctionCallbackParams(rowNode);return(0,this.colDef.suppressNavigable)(params)}return!1},Column.prototype.isCellEditable=function(rowNode){return!(rowNode.group&&!this.gridOptionsWrapper.isEnableGroupEdit())&&this.isColumnFunc(rowNode,this.colDef.editable)},Column.prototype.isSuppressFillHandle=function(){return!!attrToBoolean(this.colDef.suppressFillHandle)},Column.prototype.isAutoHeight=function(){return!!attrToBoolean(this.colDef.autoHeight)},Column.prototype.isRowDrag=function(rowNode){return this.isColumnFunc(rowNode,this.colDef.rowDrag)},Column.prototype.isDndSource=function(rowNode){return this.isColumnFunc(rowNode,this.colDef.dndSource)},Column.prototype.isCellCheckboxSelection=function(rowNode){return this.isColumnFunc(rowNode,this.colDef.checkboxSelection)},Column.prototype.isSuppressPaste=function(rowNode){return this.isColumnFunc(rowNode,this.colDef?this.colDef.suppressPaste:null)},Column.prototype.isResizable=function(){return!!attrToBoolean(this.colDef.resizable)},Column.prototype.isColumnFunc=function(rowNode,value){return"boolean"==typeof value?value:"function"==typeof value&&value(this.createColumnFunctionCallbackParams(rowNode))},Column.prototype.setMoving=function(moving,source){void 0===source&&(source="api"),this.moving=moving,this.eventService.dispatchEvent(this.createColumnEvent(Column.EVENT_MOVING_CHANGED,source))},Column.prototype.createColumnEvent=function(type,source){return{api:this.gridApi,columnApi:this.columnApi,type,column:this,columns:[this],source}},Column.prototype.isMoving=function(){return this.moving},Column.prototype.getSort=function(){return this.sort},Column.prototype.setSort=function(sort,source){void 0===source&&(source="api"),this.sort!==sort&&(this.sort=sort,this.eventService.dispatchEvent(this.createColumnEvent(Column.EVENT_SORT_CHANGED,source)))},Column.prototype.setMenuVisible=function(visible,source){void 0===source&&(source="api"),this.menuVisible!==visible&&(this.menuVisible=visible,this.eventService.dispatchEvent(this.createColumnEvent(Column.EVENT_MENU_VISIBLE_CHANGED,source)))},Column.prototype.isMenuVisible=function(){return this.menuVisible},Column.prototype.isSortAscending=function(){return this.sort===Constants.SORT_ASC},Column.prototype.isSortDescending=function(){return this.sort===Constants.SORT_DESC},Column.prototype.isSortNone=function(){return missing(this.sort)},Column.prototype.isSorting=function(){return exists(this.sort)},Column.prototype.getSortIndex=function(){return this.sortIndex},Column.prototype.setSortIndex=function(sortOrder){this.sortIndex=sortOrder},Column.prototype.setAggFunc=function(aggFunc){this.aggFunc=aggFunc},Column.prototype.getAggFunc=function(){return this.aggFunc},Column.prototype.getLeft=function(){return this.left},Column.prototype.getOldLeft=function(){return this.oldLeft},Column.prototype.getRight=function(){return this.left+this.actualWidth},Column.prototype.setLeft=function(left,source){void 0===source&&(source="api"),this.oldLeft=this.left,this.left!==left&&(this.left=left,this.eventService.dispatchEvent(this.createColumnEvent(Column.EVENT_LEFT_CHANGED,source)))},Column.prototype.isFilterActive=function(){return this.filterActive},Column.prototype.setFilterActive=function(active,source,additionalEventAttributes){void 0===source&&(source="api"),this.filterActive!==active&&(this.filterActive=active,this.eventService.dispatchEvent(this.createColumnEvent(Column.EVENT_FILTER_ACTIVE_CHANGED,source)));var filterChangedEvent=this.createColumnEvent(Column.EVENT_FILTER_CHANGED,source);additionalEventAttributes&&mergeDeep(filterChangedEvent,additionalEventAttributes),this.eventService.dispatchEvent(filterChangedEvent)},Column.prototype.setPinned=function(pinned){!0===pinned||pinned===Constants.PINNED_LEFT?this.pinned=Constants.PINNED_LEFT:pinned===Constants.PINNED_RIGHT?this.pinned=Constants.PINNED_RIGHT:this.pinned=null},Column.prototype.setFirstRightPinned=function(firstRightPinned,source){void 0===source&&(source="api"),this.firstRightPinned!==firstRightPinned&&(this.firstRightPinned=firstRightPinned,this.eventService.dispatchEvent(this.createColumnEvent(Column.EVENT_FIRST_RIGHT_PINNED_CHANGED,source)))},Column.prototype.setLastLeftPinned=function(lastLeftPinned,source){void 0===source&&(source="api"),this.lastLeftPinned!==lastLeftPinned&&(this.lastLeftPinned=lastLeftPinned,this.eventService.dispatchEvent(this.createColumnEvent(Column.EVENT_LAST_LEFT_PINNED_CHANGED,source)))},Column.prototype.isFirstRightPinned=function(){return this.firstRightPinned},Column.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},Column.prototype.isPinned=function(){return this.pinned===Constants.PINNED_LEFT||this.pinned===Constants.PINNED_RIGHT},Column.prototype.isPinnedLeft=function(){return this.pinned===Constants.PINNED_LEFT},Column.prototype.isPinnedRight=function(){return this.pinned===Constants.PINNED_RIGHT},Column.prototype.getPinned=function(){return this.pinned},Column.prototype.setVisible=function(visible,source){void 0===source&&(source="api");var newValue=!0===visible;this.visible!==newValue&&(this.visible=newValue,this.eventService.dispatchEvent(this.createColumnEvent(Column.EVENT_VISIBLE_CHANGED,source)))},Column.prototype.isVisible=function(){return this.visible},Column.prototype.getColDef=function(){return this.colDef},Column.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},Column.prototype.getColId=function(){return this.colId},Column.prototype.getId=function(){return this.getColId()},Column.prototype.getUniqueId=function(){return this.getId()},Column.prototype.getDefinition=function(){return this.colDef},Column.prototype.getActualWidth=function(){return this.actualWidth},Column.prototype.createBaseColDefParams=function(rowNode){return{node:rowNode,data:rowNode.data,colDef:this.colDef,column:this,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}},Column.prototype.getColSpan=function(rowNode){if(missing(this.colDef.colSpan))return 1;var params=this.createBaseColDefParams(rowNode),colSpan=this.colDef.colSpan(params);return Math.max(colSpan,1)},Column.prototype.getRowSpan=function(rowNode){if(missing(this.colDef.rowSpan))return 1;var params=this.createBaseColDefParams(rowNode),rowSpan=this.colDef.rowSpan(params);return Math.max(rowSpan,1)},Column.prototype.setActualWidth=function(actualWidth,source,silent){void 0===source&&(source="api"),void 0===silent&&(silent=!1),null!=this.minWidth&&(actualWidth=Math.max(actualWidth,this.minWidth)),null!=this.maxWidth&&(actualWidth=Math.min(actualWidth,this.maxWidth)),this.actualWidth!==actualWidth&&(this.actualWidth=actualWidth,this.flex&&"flex"!==source&&"gridInitializing"!==source&&(this.flex=null),silent||this.fireColumnWidthChangedEvent(source))},Column.prototype.fireColumnWidthChangedEvent=function(source){this.eventService.dispatchEvent(this.createColumnEvent(Column.EVENT_WIDTH_CHANGED,source))},Column.prototype.isGreaterThanMax=function(width){return null!=this.maxWidth&&width>this.maxWidth},Column.prototype.getMinWidth=function(){return this.minWidth},Column.prototype.getMaxWidth=function(){return this.maxWidth},Column.prototype.getFlex=function(){return this.flex||0},Column.prototype.setFlex=function(flex){this.flex!==flex&&(this.flex=flex)},Column.prototype.setMinimum=function(source){void 0===source&&(source="api"),exists(this.minWidth)&&this.setActualWidth(this.minWidth,source)},Column.prototype.setRowGroupActive=function(rowGroup,source){void 0===source&&(source="api"),this.rowGroupActive!==rowGroup&&(this.rowGroupActive=rowGroup,this.eventService.dispatchEvent(this.createColumnEvent(Column.EVENT_ROW_GROUP_CHANGED,source)))},Column.prototype.isRowGroupActive=function(){return this.rowGroupActive},Column.prototype.setPivotActive=function(pivot,source){void 0===source&&(source="api"),this.pivotActive!==pivot&&(this.pivotActive=pivot,this.eventService.dispatchEvent(this.createColumnEvent(Column.EVENT_PIVOT_CHANGED,source)))},Column.prototype.isPivotActive=function(){return this.pivotActive},Column.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},Column.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},Column.prototype.setValueActive=function(value,source){void 0===source&&(source="api"),this.aggregationActive!==value&&(this.aggregationActive=value,this.eventService.dispatchEvent(this.createColumnEvent(Column.EVENT_VALUE_CHANGED,source)))},Column.prototype.isValueActive=function(){return this.aggregationActive},Column.prototype.isAllowPivot=function(){return!0===this.colDef.enablePivot},Column.prototype.isAllowValue=function(){return!0===this.colDef.enableValue},Column.prototype.isAllowRowGroup=function(){return!0===this.colDef.enableRowGroup},Column.prototype.getMenuTabs=function(defaultValues){var menuTabs=this.getColDef().menuTabs;return null==menuTabs&&(menuTabs=defaultValues),menuTabs},Column.prototype.isLockPosition=function(){return console.warn("AG Grid: since v21, col.isLockPosition() should not be used, please use col.getColDef().lockPosition instead."),!!this.colDef&&!!this.colDef.lockPosition},Column.prototype.isLockVisible=function(){return console.warn("AG Grid: since v21, col.isLockVisible() should not be used, please use col.getColDef().lockVisible instead."),!!this.colDef&&!!this.colDef.lockVisible},Column.prototype.isLockPinned=function(){return console.warn("AG Grid: since v21, col.isLockPinned() should not be used, please use col.getColDef().lockPinned instead."),!!this.colDef&&!!this.colDef.lockPinned},Column.EVENT_MOVING_CHANGED="movingChanged",Column.EVENT_LEFT_CHANGED="leftChanged",Column.EVENT_WIDTH_CHANGED="widthChanged",Column.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",Column.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",Column.EVENT_VISIBLE_CHANGED="visibleChanged",Column.EVENT_FILTER_CHANGED="filterChanged",Column.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",Column.EVENT_SORT_CHANGED="sortChanged",Column.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",Column.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",Column.EVENT_PIVOT_CHANGED="columnPivotChanged",Column.EVENT_VALUE_CHANGED="columnValueChanged",__decorate$1([Autowired("gridOptionsWrapper")],Column.prototype,"gridOptionsWrapper",void 0),__decorate$1([Autowired("columnUtils")],Column.prototype,"columnUtils",void 0),__decorate$1([Autowired("columnApi")],Column.prototype,"columnApi",void 0),__decorate$1([Autowired("gridApi")],Column.prototype,"gridApi",void 0),__decorate$1([Autowired("context")],Column.prototype,"context",void 0),__decorate$1([PostConstruct],Column.prototype,"initialise",null),Column}();function firstExistingValue(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];for(var i=0;i<values.length;i++){var value=values[i];if(exists(value))return value}return null}function last(arr){if(arr&&arr.length)return arr[arr.length-1]}function areEqual(a,b,comparator){return null==a&&null==b||null!=a&&null!=b&&a.length===b.length&&a.every((function(value,index){return comparator?comparator(value,b[index]):b[index]===value}))}function sortNumerically(array){return array.sort((function(a,b){return a-b}))}function removeFromArray(array,object){var index=array.indexOf(object);index>=0&&array.splice(index,1)}function removeAllFromArray(array,toRemove){toRemove.forEach((function(item){return removeFromArray(array,item)}))}function insertIntoArray(array,object,toIndex){array.splice(toIndex,0,object)}function moveInArray(array,objectsToMove,toIndex){removeAllFromArray(array,objectsToMove),objectsToMove.slice().reverse().forEach((function(obj){return insertIntoArray(array,obj,toIndex)}))}function includes(array,value){return array.indexOf(value)>-1}function pushAll(target,source){null!=source&&null!=target&&source.forEach((function(value){return target.push(value)}))}var ArrayUtils=Object.freeze({firstExistingValue,existsAndNotEmpty:function existsAndNotEmpty(value){return null!=value&&value.length>0},last,areEqual,compareArrays:function compareArrays(array1,array2){return areEqual(array1,array2)},shallowCompare:function shallowCompare(arr1,arr2){return areEqual(arr1,arr2)},sortNumerically,removeRepeatsFromArray:function removeRepeatsFromArray(array,object){if(array)for(var index=array.length-2;index>=0;index--){var thisOneMatches=array[index]===object,nextOneMatches=array[index+1]===object;thisOneMatches&&nextOneMatches&&array.splice(index+1,1)}},removeFromArray,removeAllFromArray,insertIntoArray,insertArrayIntoArray:function insertArrayIntoArray(dest,src,toIndex){if(null!=dest&&null!=src)for(var i=src.length-1;i>=0;i--){insertIntoArray(dest,src[i],toIndex)}},moveInArray,includes,flatten:function flatten(arrayOfArrays){return[].concat.apply([],arrayOfArrays)},pushAll,toStrings:function toStrings(array){return array.map(toStringOrNull)},forEachReverse:function forEachReverse(list,action){if(null!=list)for(var i=list.length-1;i>=0;i--)action(list[i],i)}}),__decorate$2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnGroup=function(){function ColumnGroup(providedColumnGroup,groupId,instanceId,pinned){this.displayedChildren=[],this.localEventService=new EventService,this.groupId=groupId,this.instanceId=instanceId,this.providedColumnGroup=providedColumnGroup,this.pinned=pinned}return ColumnGroup.createUniqueId=function(groupId,instanceId){return groupId+"_"+instanceId},ColumnGroup.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},ColumnGroup.prototype.getParent=function(){return this.parent},ColumnGroup.prototype.setParent=function(parent){this.parent=parent},ColumnGroup.prototype.getUniqueId=function(){return ColumnGroup.createUniqueId(this.groupId,this.instanceId)},ColumnGroup.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},ColumnGroup.prototype.isMoving=function(){var allLeafColumns=this.getProvidedColumnGroup().getLeafColumns();return!(!allLeafColumns||0===allLeafColumns.length)&&allLeafColumns.every((function(col){return col.isMoving()}))},ColumnGroup.prototype.checkLeft=function(){if(this.displayedChildren.forEach((function(child){child instanceof ColumnGroup&&child.checkLeft()})),this.displayedChildren.length>0)if(this.gridOptionsWrapper.isEnableRtl()){var lastChildLeft=last(this.displayedChildren).getLeft();this.setLeft(lastChildLeft)}else{var firstChildLeft=this.displayedChildren[0].getLeft();this.setLeft(firstChildLeft)}else this.setLeft(null)},ColumnGroup.prototype.getLeft=function(){return this.left},ColumnGroup.prototype.getOldLeft=function(){return this.oldLeft},ColumnGroup.prototype.setLeft=function(left){this.oldLeft=left,this.left!==left&&(this.left=left,this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup.EVENT_LEFT_CHANGED)))},ColumnGroup.prototype.getPinned=function(){return this.pinned},ColumnGroup.prototype.createAgEvent=function(type){return{type}},ColumnGroup.prototype.addEventListener=function(eventType,listener){this.localEventService.addEventListener(eventType,listener)},ColumnGroup.prototype.removeEventListener=function(eventType,listener){this.localEventService.removeEventListener(eventType,listener)},ColumnGroup.prototype.getGroupId=function(){return this.groupId},ColumnGroup.prototype.getInstanceId=function(){return this.instanceId},ColumnGroup.prototype.isChildInThisGroupDeepSearch=function(wantedChild){var result=!1;return this.children.forEach((function(foundChild){wantedChild===foundChild&&(result=!0),foundChild instanceof ColumnGroup&&foundChild.isChildInThisGroupDeepSearch(wantedChild)&&(result=!0)})),result},ColumnGroup.prototype.getActualWidth=function(){var groupActualWidth=0;return this.displayedChildren&&this.displayedChildren.forEach((function(child){groupActualWidth+=child.getActualWidth()})),groupActualWidth},ColumnGroup.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var result=!1;return this.displayedChildren.forEach((function(child){child.isResizable()&&(result=!0)})),result},ColumnGroup.prototype.getMinWidth=function(){var result=0;return this.displayedChildren.forEach((function(groupChild){result+=groupChild.getMinWidth()||0})),result},ColumnGroup.prototype.addChild=function(child){this.children||(this.children=[]),this.children.push(child)},ColumnGroup.prototype.getDisplayedChildren=function(){return this.displayedChildren},ColumnGroup.prototype.getLeafColumns=function(){var result=[];return this.addLeafColumns(result),result},ColumnGroup.prototype.getDisplayedLeafColumns=function(){var result=[];return this.addDisplayedLeafColumns(result),result},ColumnGroup.prototype.getDefinition=function(){return this.providedColumnGroup.getColGroupDef()},ColumnGroup.prototype.getColGroupDef=function(){return this.providedColumnGroup.getColGroupDef()},ColumnGroup.prototype.isPadding=function(){return this.providedColumnGroup.isPadding()},ColumnGroup.prototype.isExpandable=function(){return this.providedColumnGroup.isExpandable()},ColumnGroup.prototype.isExpanded=function(){return this.providedColumnGroup.isExpanded()},ColumnGroup.prototype.setExpanded=function(expanded){this.providedColumnGroup.setExpanded(expanded)},ColumnGroup.prototype.addDisplayedLeafColumns=function(leafColumns){this.displayedChildren.forEach((function(child){child instanceof Column?leafColumns.push(child):child instanceof ColumnGroup&&child.addDisplayedLeafColumns(leafColumns)}))},ColumnGroup.prototype.addLeafColumns=function(leafColumns){this.children.forEach((function(child){child instanceof Column?leafColumns.push(child):child instanceof ColumnGroup&&child.addLeafColumns(leafColumns)}))},ColumnGroup.prototype.getChildren=function(){return this.children},ColumnGroup.prototype.getColumnGroupShow=function(){return this.providedColumnGroup.getColumnGroupShow()},ColumnGroup.prototype.getProvidedColumnGroup=function(){return this.providedColumnGroup},ColumnGroup.prototype.getOriginalColumnGroup=function(){return console.warn("AG Grid: columnGroup.getOriginalColumnGroup() is deprecated due to a method rename, use columnGroup.getProvidedColumnGroup() instead"),this.getProvidedColumnGroup()},ColumnGroup.prototype.getPaddingLevel=function(){var parent=this.getParent();return this.isPadding()&&parent&&parent.isPadding()?1+parent.getPaddingLevel():0},ColumnGroup.prototype.calculateDisplayedColumns=function(){var _this=this;this.displayedChildren=[];for(var parentWithExpansion=this;null!=parentWithExpansion&&parentWithExpansion.isPadding();)parentWithExpansion=parentWithExpansion.getParent();if(!(!!parentWithExpansion&&parentWithExpansion.providedColumnGroup.isExpandable()))return this.displayedChildren=this.children,void this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED));this.children.forEach((function(child){if(!(child instanceof ColumnGroup&&(!child.displayedChildren||!child.displayedChildren.length)))switch(child.getColumnGroupShow()){case ColumnGroup.HEADER_GROUP_SHOW_OPEN:parentWithExpansion.providedColumnGroup.isExpanded()&&_this.displayedChildren.push(child);break;case ColumnGroup.HEADER_GROUP_SHOW_CLOSED:parentWithExpansion.providedColumnGroup.isExpanded()||_this.displayedChildren.push(child);break;default:_this.displayedChildren.push(child)}})),this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED))},ColumnGroup.HEADER_GROUP_SHOW_OPEN="open",ColumnGroup.HEADER_GROUP_SHOW_CLOSED="closed",ColumnGroup.EVENT_LEFT_CHANGED="leftChanged",ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",__decorate$2([Autowired("gridOptionsWrapper")],ColumnGroup.prototype,"gridOptionsWrapper",void 0),ColumnGroup}(),ProvidedColumnGroup=function(){function ProvidedColumnGroup(colGroupDef,groupId,padding,level){this.localEventService=new EventService,this.expandable=!1,this.colGroupDef=colGroupDef,this.groupId=groupId,this.expanded=!!colGroupDef&&!!colGroupDef.openByDefault,this.padding=padding,this.level=level}return ProvidedColumnGroup.prototype.setOriginalParent=function(originalParent){this.originalParent=originalParent},ProvidedColumnGroup.prototype.getOriginalParent=function(){return this.originalParent},ProvidedColumnGroup.prototype.getLevel=function(){return this.level},ProvidedColumnGroup.prototype.isVisible=function(){return!!this.children&&this.children.some((function(child){return child.isVisible()}))},ProvidedColumnGroup.prototype.isPadding=function(){return this.padding},ProvidedColumnGroup.prototype.setExpanded=function(expanded){this.expanded=void 0!==expanded&&expanded;var event={type:ProvidedColumnGroup.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(event)},ProvidedColumnGroup.prototype.isExpandable=function(){return this.expandable},ProvidedColumnGroup.prototype.isExpanded=function(){return this.expanded},ProvidedColumnGroup.prototype.getGroupId=function(){return this.groupId},ProvidedColumnGroup.prototype.getId=function(){return this.getGroupId()},ProvidedColumnGroup.prototype.setChildren=function(children){this.children=children},ProvidedColumnGroup.prototype.getChildren=function(){return this.children},ProvidedColumnGroup.prototype.getColGroupDef=function(){return this.colGroupDef},ProvidedColumnGroup.prototype.getLeafColumns=function(){var result=[];return this.addLeafColumns(result),result},ProvidedColumnGroup.prototype.addLeafColumns=function(leafColumns){this.children&&this.children.forEach((function(child){child instanceof Column?leafColumns.push(child):child instanceof ProvidedColumnGroup&&child.addLeafColumns(leafColumns)}))},ProvidedColumnGroup.prototype.getColumnGroupShow=function(){var colGroupDef=this.colGroupDef;if(colGroupDef)return colGroupDef.columnGroupShow},ProvidedColumnGroup.prototype.setupExpandable=function(){var _this=this;this.setExpandable(),this.getLeafColumns().forEach((function(col){return col.addEventListener(Column.EVENT_VISIBLE_CHANGED,_this.onColumnVisibilityChanged.bind(_this))}))},ProvidedColumnGroup.prototype.setExpandable=function(){if(!this.isPadding()){for(var atLeastOneShowingWhenOpen=!1,atLeastOneShowingWhenClosed=!1,atLeastOneChangeable=!1,children=this.findChildrenRemovingPadding(),i=0,j=children.length;i<j;i++){var abstractColumn=children[i];if(abstractColumn.isVisible()){var headerGroupShow=abstractColumn.getColumnGroupShow();headerGroupShow===ColumnGroup.HEADER_GROUP_SHOW_OPEN?(atLeastOneShowingWhenOpen=!0,atLeastOneChangeable=!0):headerGroupShow===ColumnGroup.HEADER_GROUP_SHOW_CLOSED?(atLeastOneShowingWhenClosed=!0,atLeastOneChangeable=!0):(atLeastOneShowingWhenOpen=!0,atLeastOneShowingWhenClosed=!0)}}var expandable=atLeastOneShowingWhenOpen&&atLeastOneShowingWhenClosed&&atLeastOneChangeable;if(this.expandable!==expandable){this.expandable=expandable;var event_1={type:ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(event_1)}}},ProvidedColumnGroup.prototype.findChildrenRemovingPadding=function(){var res=[],process=function(items){items.forEach((function(item){item instanceof ProvidedColumnGroup&&item.isPadding()?process(item.children):res.push(item)}))};return process(this.children),res},ProvidedColumnGroup.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},ProvidedColumnGroup.prototype.addEventListener=function(eventType,listener){this.localEventService.addEventListener(eventType,listener)},ProvidedColumnGroup.prototype.removeEventListener=function(eventType,listener){this.localEventService.removeEventListener(eventType,listener)},ProvidedColumnGroup.EVENT_EXPANDED_CHANGED="expandedChanged",ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED="expandableChanged",ProvidedColumnGroup}(),DefaultColumnTypes={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},PASSIVE_EVENTS=["touchstart","touchend","touchmove","touchcancel"],supports={};function stopPropagationForAgGrid(event){event.__ag_Grid_Stop_Propagation=!0}function isStopPropagationForAgGrid(event){return!0===event.__ag_Grid_Stop_Propagation}var tags,isEventSupported=(tags={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},function(eventName){if("boolean"==typeof supports[eventName])return supports[eventName];var el=document.createElement(tags[eventName]||"div");return supports[eventName="on"+eventName]=eventName in el});function getCtrlForEvent(gridOptionsWrapper,event,type){for(var sourceElement=event.target;sourceElement;){var renderedComp=gridOptionsWrapper.getDomData(sourceElement,type);if(renderedComp)return renderedComp;sourceElement=sourceElement.parentElement}return null}function isElementInEventPath(element,event){return!(!event||!element)&&getEventPath(event).indexOf(element)>=0}function createEventPath(event){for(var res=[],pointer=event.target;pointer;)res.push(pointer),pointer=pointer.parentElement;return res}function getEventPath(event){var eventNoType=event;return eventNoType.path?eventNoType.path:eventNoType.composedPath?eventNoType.composedPath():eventNoType.__agGridEventPath?eventNoType.__agGridEventPath:createEventPath(event)}function addSafePassiveEventListener(frameworkOverrides,eElement,event,listener){var options=includes(PASSIVE_EVENTS,event)?{passive:!0}:void 0;frameworkOverrides&&frameworkOverrides.addEventListener&&frameworkOverrides.addEventListener(eElement,event,listener,options)}var extendStatics,EventUtils=Object.freeze({stopPropagationForAgGrid,isStopPropagationForAgGrid,isEventSupported,getCtrlForEvent,addChangeListener:function addChangeListener(element,listener){element.addEventListener("changed",listener),element.addEventListener("paste",listener),element.addEventListener("input",listener)},isElementInEventPath,createEventPath,addAgGridEventPath:function addAgGridEventPath(event){event.__agGridEventPath=getEventPath(event)},getEventPath,addSafePassiveEventListener}),__decorate$3=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},BeanStub=function(){function BeanStub(){var _this=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.isAlive=function(){return!_this.destroyed}}return BeanStub.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},BeanStub.prototype.getContext=function(){return this.context},BeanStub.prototype.destroy=function(){this.destroyFunctions.forEach((function(func){return func()})),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:BeanStub.EVENT_DESTROYED})},BeanStub.prototype.addEventListener=function(eventType,listener){this.localEventService||(this.localEventService=new EventService),this.localEventService.addEventListener(eventType,listener)},BeanStub.prototype.removeEventListener=function(eventType,listener){this.localEventService&&this.localEventService.removeEventListener(eventType,listener)},BeanStub.prototype.dispatchEventAsync=function(event){var _this=this;window.setTimeout((function(){return _this.dispatchEvent(event)}),0)},BeanStub.prototype.dispatchEvent=function(event){this.localEventService&&this.localEventService.dispatchEvent(event)},BeanStub.prototype.addManagedListener=function(object,event,listener){var _this=this;if(!this.destroyed){object instanceof HTMLElement?addSafePassiveEventListener(this.getFrameworkOverrides(),object,event,listener):object.addEventListener(event,listener);var destroyFunc=function(){return object.removeEventListener(event,listener),_this.destroyFunctions=_this.destroyFunctions.filter((function(fn){return fn!==destroyFunc})),null};return this.destroyFunctions.push(destroyFunc),destroyFunc}},BeanStub.prototype.addDestroyFunc=function(func){this.isAlive()?this.destroyFunctions.push(func):func()},BeanStub.prototype.createManagedBean=function(bean,context){var res=this.createBean(bean,context);return this.addDestroyFunc(this.destroyBean.bind(this,bean,context)),res},BeanStub.prototype.createBean=function(bean,context,afterPreCreateCallback){return(context||this.getContext()).createBean(bean,afterPreCreateCallback)},BeanStub.prototype.destroyBean=function(bean,context){return(context||this.getContext()).destroyBean(bean)},BeanStub.prototype.destroyBeans=function(beans,context){var _this=this;return beans&&beans.forEach((function(bean){return _this.destroyBean(bean,context)})),[]},BeanStub.EVENT_DESTROYED="destroyed",__decorate$3([Autowired("frameworkOverrides")],BeanStub.prototype,"frameworkOverrides",void 0),__decorate$3([Autowired("context")],BeanStub.prototype,"context",void 0),__decorate$3([Autowired("eventService")],BeanStub.prototype,"eventService",void 0),__decorate$3([Autowired("gridOptionsWrapper")],BeanStub.prototype,"gridOptionsWrapper",void 0),__decorate$3([PreDestroy],BeanStub.prototype,"destroy",null),BeanStub}(),__extends=(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__decorate$4=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$1=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},ColumnFactory=function(_super){function ColumnFactory(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ColumnFactory,_super),ColumnFactory.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("ColumnFactory")},ColumnFactory.prototype.createColumnTree=function(defs,primaryColumns,existingTree){var columnKeyCreator=new ColumnKeyCreator,_a=this.extractExistingTreeData(existingTree),existingCols=_a.existingCols,existingGroups=_a.existingGroups,existingColKeys=_a.existingColKeys;columnKeyCreator.addExistingKeys(existingColKeys);var unbalancedTree=this.recursivelyCreateColumns(defs,0,primaryColumns,existingCols,columnKeyCreator,existingGroups),treeDept=this.findMaxDept(unbalancedTree,0);this.logger.log("Number of levels for grouped columns is "+treeDept);var columnTree=this.balanceColumnTree(unbalancedTree,0,treeDept,columnKeyCreator);return this.columnUtils.depthFirstOriginalTreeSearch(null,columnTree,(function(child,parent){child instanceof ProvidedColumnGroup&&child.setupExpandable(),child.setOriginalParent(parent)})),{columnTree,treeDept}},ColumnFactory.prototype.extractExistingTreeData=function(existingTree){var existingCols=[],existingGroups=[],existingColKeys=[];return existingTree&&this.columnUtils.depthFirstOriginalTreeSearch(null,existingTree,(function(item){if(item instanceof ProvidedColumnGroup){var group=item;existingGroups.push(group)}else{var col=item;existingColKeys.push(col.getId()),existingCols.push(col)}})),{existingCols,existingGroups,existingColKeys}},ColumnFactory.prototype.createForAutoGroups=function(autoGroupCols,gridBalancedTree){var _this=this;return autoGroupCols.map((function(col){return _this.createAutoGroupTreeItem(gridBalancedTree,col)}))},ColumnFactory.prototype.createAutoGroupTreeItem=function(balancedColumnTree,column){for(var nextChild=column,i=this.findDepth(balancedColumnTree)-1;i>=0;i--){var autoGroup=new ProvidedColumnGroup(null,"FAKE_PATH_"+column.getId()+"}_"+i,!0,i);this.context.createBean(autoGroup),autoGroup.setChildren([nextChild]),nextChild.setOriginalParent(autoGroup),nextChild=autoGroup}return nextChild},ColumnFactory.prototype.findDepth=function(balancedColumnTree){for(var dept=0,pointer=balancedColumnTree;pointer&&pointer[0]&&pointer[0]instanceof ProvidedColumnGroup;)dept++,pointer=pointer[0].getChildren();return dept},ColumnFactory.prototype.balanceColumnTree=function(unbalancedTree,currentDept,columnDept,columnKeyCreator){for(var result=[],i=0;i<unbalancedTree.length;i++){var child=unbalancedTree[i];if(child instanceof ProvidedColumnGroup){var originalGroup=child,newChildren=this.balanceColumnTree(originalGroup.getChildren(),currentDept+1,columnDept,columnKeyCreator);originalGroup.setChildren(newChildren),result.push(originalGroup)}else{for(var firstPaddedGroup=void 0,currentPaddedGroup=void 0,j=columnDept-1;j>=currentDept;j--){var newColId=columnKeyCreator.getUniqueKey(null,null),colGroupDefMerged=this.createMergedColGroupDef(null),paddedGroup=new ProvidedColumnGroup(colGroupDefMerged,newColId,!0,currentDept);this.context.createBean(paddedGroup),currentPaddedGroup&&currentPaddedGroup.setChildren([paddedGroup]),currentPaddedGroup=paddedGroup,firstPaddedGroup||(firstPaddedGroup=currentPaddedGroup)}if(firstPaddedGroup&&currentPaddedGroup){if(result.push(firstPaddedGroup),unbalancedTree.some((function(leaf){return leaf instanceof ProvidedColumnGroup}))){currentPaddedGroup.setChildren([child]);continue}currentPaddedGroup.setChildren(unbalancedTree);break}result.push(child)}}return result},ColumnFactory.prototype.findMaxDept=function(treeChildren,dept){for(var maxDeptThisLevel=dept,i=0;i<treeChildren.length;i++){var abstractColumn=treeChildren[i];if(abstractColumn instanceof ProvidedColumnGroup){var originalGroup=abstractColumn,newDept=this.findMaxDept(originalGroup.getChildren(),dept+1);maxDeptThisLevel<newDept&&(maxDeptThisLevel=newDept)}}return maxDeptThisLevel},ColumnFactory.prototype.recursivelyCreateColumns=function(defs,level,primaryColumns,existingColsCopy,columnKeyCreator,existingGroups){var _this=this;return(defs||[]).map((function(def){return _this.isColumnGroup(def)?_this.createColumnGroup(primaryColumns,def,level,existingColsCopy,columnKeyCreator,existingGroups):_this.createColumn(primaryColumns,def,existingColsCopy,columnKeyCreator)}))},ColumnFactory.prototype.createColumnGroup=function(primaryColumns,colGroupDef,level,existingColumns,columnKeyCreator,existingGroups){var colGroupDefMerged=this.createMergedColGroupDef(colGroupDef),groupId=columnKeyCreator.getUniqueKey(colGroupDefMerged.groupId||null,null),providedGroup=new ProvidedColumnGroup(colGroupDefMerged,groupId,!1,level);this.context.createBean(providedGroup);var existingGroup=this.findExistingGroup(colGroupDef,existingGroups);existingGroup&&removeFromArray(existingGroups,existingGroup),existingGroup&&existingGroup.isExpanded()&&providedGroup.setExpanded(!0);var children=this.recursivelyCreateColumns(colGroupDefMerged.children,level+1,primaryColumns,existingColumns,columnKeyCreator,existingGroups);return providedGroup.setChildren(children),providedGroup},ColumnFactory.prototype.createMergedColGroupDef=function(colGroupDef){var colGroupDefMerged={};return Object.assign(colGroupDefMerged,this.gridOptionsWrapper.getDefaultColGroupDef()),Object.assign(colGroupDefMerged,colGroupDef),this.checkForDeprecatedItems(colGroupDefMerged),colGroupDefMerged},ColumnFactory.prototype.createColumn=function(primaryColumns,colDef,existingColsCopy,columnKeyCreator){var colDefMerged=this.mergeColDefs(colDef);this.checkForDeprecatedItems(colDefMerged);var column=this.findExistingColumn(colDef,existingColsCopy);if(existingColsCopy&&column&&removeFromArray(existingColsCopy,column),column)column.setColDef(colDefMerged,colDef),this.applyColumnState(column,colDefMerged);else{var colId=columnKeyCreator.getUniqueKey(colDefMerged.colId,colDefMerged.field);column=new Column(colDefMerged,colDef,colId,primaryColumns),this.context.createBean(column)}return column},ColumnFactory.prototype.applyColumnState=function(column,colDef){var flex=attrToNumber(colDef.flex);if(void 0!==flex&&column.setFlex(flex),column.getFlex()<=0){var width=attrToNumber(colDef.width);if(null!=width)column.setActualWidth(width);else{var widthBeforeUpdate=column.getActualWidth();column.setActualWidth(widthBeforeUpdate)}}void 0!==colDef.sort&&(colDef.sort==Constants.SORT_ASC||colDef.sort==Constants.SORT_DESC?column.setSort(colDef.sort):column.setSort(void 0));var sortIndex=attrToNumber(colDef.sortIndex);void 0!==sortIndex&&column.setSortIndex(sortIndex);var hide=attrToBoolean(colDef.hide);void 0!==hide&&column.setVisible(!hide),void 0!==colDef.pinned&&column.setPinned(colDef.pinned)},ColumnFactory.prototype.findExistingColumn=function(newColDef,existingColsCopy){return(existingColsCopy||[]).find((function(existingCol){var existingColDef=existingCol.getUserProvidedColDef();if(!existingColDef)return!1;var newHasId=null!=newColDef.colId,newHasField=null!=newColDef.field;return newHasId?existingCol.getId()===newColDef.colId:newHasField?existingColDef.field===newColDef.field:existingColDef===newColDef}))},ColumnFactory.prototype.findExistingGroup=function(newGroupDef,existingGroups){return existingGroups.find((function(existingGroup){return!!existingGroup.getColGroupDef()&&(!(null==newGroupDef.groupId)&&existingGroup.getId()===newGroupDef.groupId)}))},ColumnFactory.prototype.mergeColDefs=function(colDef){var colDefMerged={},defaultColDef=this.gridOptionsWrapper.getDefaultColDef();mergeDeep(colDefMerged,defaultColDef,!1,!0);var columnType=colDef.type;return columnType||(columnType=defaultColDef&&defaultColDef.type),columnType&&this.assignColumnTypes(columnType,colDefMerged),mergeDeep(colDefMerged,colDef,!1,!0),colDefMerged},ColumnFactory.prototype.assignColumnTypes=function(type,colDefMerged){var typeKeys=[];if(type instanceof Array){type.some((function(a){return"string"!=typeof a}))?console.warn("AG Grid: if colDef.type is supplied an array it should be of type 'string[]'"):typeKeys=type}else{if("string"!=typeof type)return void console.warn("AG Grid: colDef.type should be of type 'string' | 'string[]'");typeKeys=type.split(",")}var allColumnTypes=Object.assign({},DefaultColumnTypes);iterateObject(this.gridOptionsWrapper.getColumnTypes()||{},(function(key,value){key in allColumnTypes?console.warn("AG Grid: the column type '"+key+"' is a default column type and cannot be overridden."):allColumnTypes[key]=value})),typeKeys.forEach((function(t){var typeColDef=allColumnTypes[t.trim()];typeColDef?mergeDeep(colDefMerged,typeColDef,!1,!0):console.warn("AG Grid: colDef.type '"+t+"' does not correspond to defined gridOptions.columnTypes")}))},ColumnFactory.prototype.checkForDeprecatedItems=function(colDef){if(colDef){var colDefNoType=colDef;void 0!==colDefNoType.group&&console.warn("AG Grid: colDef.group is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==colDefNoType.headerGroup&&console.warn("AG Grid: colDef.headerGroup is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==colDefNoType.headerGroupShow&&console.warn("AG Grid: colDef.headerGroupShow is invalid, should be columnGroupShow, please check documentation on how to do grouping as it changed in version 3"),void 0!==colDefNoType.suppressRowGroup&&console.warn("AG Grid: colDef.suppressRowGroup is deprecated, please use colDef.type instead"),void 0!==colDefNoType.suppressAggregation&&console.warn("AG Grid: colDef.suppressAggregation is deprecated, please use colDef.type instead"),(colDefNoType.suppressRowGroup||colDefNoType.suppressAggregation)&&console.warn("AG Grid: colDef.suppressAggregation and colDef.suppressRowGroup are deprecated, use allowRowGroup, allowPivot and allowValue instead"),colDefNoType.displayName&&(console.warn("AG Grid: Found displayName "+colDefNoType.displayName+", please use headerName instead, displayName is deprecated."),colDefNoType.headerName=colDefNoType.displayName)}},ColumnFactory.prototype.isColumnGroup=function(abstractColDef){return void 0!==abstractColDef.children},__decorate$4([Autowired("columnUtils")],ColumnFactory.prototype,"columnUtils",void 0),__decorate$4([__param$1(0,Qualifier("loggerFactory"))],ColumnFactory.prototype,"setBeans",null),ColumnFactory=__decorate$4([Bean("columnFactory")],ColumnFactory)}(BeanStub),Events=function(){function Events(){}return Events.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",Events.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",Events.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",Events.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",Events.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",Events.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",Events.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",Events.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",Events.EVENT_COLUMN_MOVED="columnMoved",Events.EVENT_COLUMN_VISIBLE="columnVisible",Events.EVENT_COLUMN_PINNED="columnPinned",Events.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",Events.EVENT_COLUMN_RESIZED="columnResized",Events.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",Events.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",Events.EVENT_ROW_GROUP_OPENED="rowGroupOpened",Events.EVENT_ROW_DATA_CHANGED="rowDataChanged",Events.EVENT_ROW_DATA_UPDATED="rowDataUpdated",Events.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",Events.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",Events.EVENT_CHART_CREATED="chartCreated",Events.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",Events.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",Events.EVENT_CHART_DESTROYED="chartDestroyed",Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",Events.EVENT_MODEL_UPDATED="modelUpdated",Events.EVENT_PASTE_START="pasteStart",Events.EVENT_PASTE_END="pasteEnd",Events.EVENT_FILL_START="fillStart",Events.EVENT_FILL_END="fillEnd",Events.EVENT_CELL_CLICKED="cellClicked",Events.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",Events.EVENT_CELL_MOUSE_DOWN="cellMouseDown",Events.EVENT_CELL_CONTEXT_MENU="cellContextMenu",Events.EVENT_CELL_VALUE_CHANGED="cellValueChanged",Events.EVENT_CELL_EDIT_REQUEST="cellEditRequest",Events.EVENT_ROW_VALUE_CHANGED="rowValueChanged",Events.EVENT_CELL_FOCUSED="cellFocused",Events.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",Events.EVENT_ROW_SELECTED="rowSelected",Events.EVENT_SELECTION_CHANGED="selectionChanged",Events.EVENT_CELL_KEY_DOWN="cellKeyDown",Events.EVENT_CELL_KEY_PRESS="cellKeyPress",Events.EVENT_CELL_MOUSE_OVER="cellMouseOver",Events.EVENT_CELL_MOUSE_OUT="cellMouseOut",Events.EVENT_FILTER_CHANGED="filterChanged",Events.EVENT_FILTER_MODIFIED="filterModified",Events.EVENT_FILTER_OPENED="filterOpened",Events.EVENT_SORT_CHANGED="sortChanged",Events.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",Events.EVENT_ROW_CLICKED="rowClicked",Events.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",Events.EVENT_GRID_READY="gridReady",Events.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",Events.EVENT_VIEWPORT_CHANGED="viewportChanged",Events.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",Events.EVENT_FIRST_DATA_RENDERED="firstDataRendered",Events.EVENT_DRAG_STARTED="dragStarted",Events.EVENT_DRAG_STOPPED="dragStopped",Events.EVENT_CHECKBOX_CHANGED="checkboxChanged",Events.EVENT_ROW_EDITING_STARTED="rowEditingStarted",Events.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",Events.EVENT_CELL_EDITING_STARTED="cellEditingStarted",Events.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",Events.EVENT_BODY_SCROLL="bodyScroll",Events.EVENT_BODY_SCROLL_END="bodyScrollEnd",Events.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",Events.EVENT_PAGINATION_CHANGED="paginationChanged",Events.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",Events.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",Events.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",Events.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",Events.EVENT_FLASH_CELLS="flashCells",Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",Events.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",Events.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",Events.EVENT_ROW_DRAG_ENTER="rowDragEnter",Events.EVENT_ROW_DRAG_MOVE="rowDragMove",Events.EVENT_ROW_DRAG_LEAVE="rowDragLeave",Events.EVENT_ROW_DRAG_END="rowDragEnd",Events.EVENT_POPUP_TO_FRONT="popupToFront",Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",Events.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",Events.EVENT_KEYBOARD_FOCUS="keyboardFocus",Events.EVENT_MOUSE_FOCUS="mouseFocus",Events.EVENT_STORE_UPDATED="storeUpdated",Events}(),GroupInstanceIdCreator=function(){function GroupInstanceIdCreator(){this.existingIds={}}return GroupInstanceIdCreator.prototype.getInstanceIdForKey=function(key){var result,lastResult=this.existingIds[key];return result="number"!=typeof lastResult?0:lastResult+1,this.existingIds[key]=result,result},GroupInstanceIdCreator}(),reUnescapedHtml=/[&<>"']/g,HTML_ESCAPES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function camelCaseToHyphen(str){return null==str?null:str.replace(/([A-Z])/g,(function(g){return"-"+g[0].toLowerCase()}))}function hyphenToCamelCase(str){return null==str?null:str.replace(/-([a-z])/g,(function(g){return g[1].toUpperCase()}))}function capitalise(str){return str[0].toUpperCase()+str.substr(1).toLowerCase()}function escapeString(toEscape){return null==toEscape?null:toEscape.toString().toString().replace(reUnescapedHtml,(function(chr){return HTML_ESCAPES[chr]}))}function camelCaseToHumanText(camelCase){if(!camelCase||null==camelCase)return null;return camelCase.replace(/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g,"$1$4 $2$3$5").replace("."," ").split(" ").map((function(word){return word.substring(0,1).toUpperCase()+(word.length>1?word.substring(1,word.length):"")})).join(" ")}var StringUtils=Object.freeze({utf8_encode:function utf8_encode(s){var stringFromCharCode=String.fromCharCode;function createByte(point,shift){return stringFromCharCode(point>>shift&63|128)}function encodeCodePoint(point){if(point>=0&&point<=31&&10!==point)return"_x"+point.toString(16).toUpperCase().padStart(4,"0")+"_";if(!(4294967168&point))return stringFromCharCode(point);var symbol="";return 4294965248&point?4294901760&point?4292870144&point||(symbol=stringFromCharCode(point>>18&7|240),symbol+=createByte(point,12),symbol+=createByte(point,6)):(!function checkScalarValue(point){if(point>=55296&&point<=57343)throw Error("Lone surrogate U+"+point.toString(16).toUpperCase()+" is not a scalar value")}(point),symbol=stringFromCharCode(point>>12&15|224),symbol+=createByte(point,6)):symbol=stringFromCharCode(point>>6&31|192),symbol+=stringFromCharCode(63&point|128)}for(var codePoints=function ucs2decode(string){var output=[];if(!string)return[];for(var value,extra,len=string.length,counter=0;counter<len;)(value=string.charCodeAt(counter++))>=55296&&value<=56319&&counter<len?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}(s),length=codePoints.length,index=-1,byteString="";++index<length;)byteString+=encodeCodePoint(codePoints[index]);return byteString},camelCaseToHyphen,hyphenToCamelCase,capitalise,escapeString,camelCaseToHumanText});function convertToMap(arr){var map=new Map;return arr.forEach((function(pair){return map.set(pair[0],pair[1])})),map}var MapUtils=Object.freeze({convertToMap,mapById:function mapById(arr,callback){var map=new Map;return arr.forEach((function(item){return map.set(callback(item),item)})),map},keys:function keys(map){var arr=[];return map.forEach((function(_,key){return arr.push(key)})),arr}}),__extends$1=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$5=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$2=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},ColumnModel=function(_super){function ColumnModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.primaryHeaderRowCount=0,_this.secondaryHeaderRowCount=0,_this.gridHeaderRowCount=0,_this.displayedColumnsLeft=[],_this.displayedColumnsRight=[],_this.displayedColumnsCenter=[],_this.displayedColumns=[],_this.displayedColumnsAndGroupsMap={},_this.viewportColumns=[],_this.viewportColumnsCenter=[],_this.autoHeightActiveAtLeastOnce=!1,_this.rowGroupColumns=[],_this.valueColumns=[],_this.pivotColumns=[],_this.ready=!1,_this.autoGroupsNeedBuilding=!1,_this.forceRecreateAutoGroups=!1,_this.pivotMode=!1,_this.bodyWidth=0,_this.leftWidth=0,_this.rightWidth=0,_this.bodyWidthDirty=!0,_this.colDefVersion=0,_this.flexColsCalculatedAtLestOnce=!1,_this}return __extends$1(ColumnModel,_super),ColumnModel.prototype.init=function(){var _this=this;this.suppressColumnVirtualisation=this.gridOptionsWrapper.isSuppressColumnVirtualisation();var pivotMode=this.gridOptionsWrapper.isPivotMode();this.isPivotSettingAllowed(pivotMode)&&(this.pivotMode=pivotMode),this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.addManagedListener(this.gridOptionsWrapper,"autoGroupColumnDef",(function(){return _this.onAutoGroupColumnDefChanged()})),this.addManagedListener(this.gridOptionsWrapper,"defaultColDef",(function(){return _this.onDefaultColDefChanged()}))},ColumnModel.prototype.onAutoGroupColumnDefChanged=function(){this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged")},ColumnModel.prototype.onDefaultColDefChanged=function(){this.colDefVersion++,this.forceRecreateAutoGroups=!0,this.createColumnsFromColumnDefs(!0)},ColumnModel.prototype.getColDefVersion=function(){return this.colDefVersion},ColumnModel.prototype.setColumnDefs=function(columnDefs,source){void 0===source&&(source="api");var colsPreviouslyExisted=!!this.columnDefs;this.colDefVersion++,this.columnDefs=columnDefs,this.createColumnsFromColumnDefs(colsPreviouslyExisted,source)},ColumnModel.prototype.createColumnsFromColumnDefs=function(colsPreviouslyExisted,source){var _this=this;void 0===source&&(source="api");var raiseEventsFunc=colsPreviouslyExisted?this.compareColumnStatesAndRaiseEvents(source):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var oldPrimaryColumns=this.primaryColumns,oldPrimaryTree=this.primaryColumnTree,balancedTreeResult=this.columnFactory.createColumnTree(this.columnDefs,!0,oldPrimaryTree);this.primaryColumnTree=balancedTreeResult.columnTree,this.primaryHeaderRowCount=balancedTreeResult.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach((function(col){return _this.primaryColumnsMap[col.getId()]=col})),this.extractRowGroupColumns(source,oldPrimaryColumns),this.extractPivotColumns(source,oldPrimaryColumns),this.extractValueColumns(source,oldPrimaryColumns),this.ready=!0;var gridColsNotProcessed=void 0===this.gridColsArePrimary;(this.gridColsArePrimary||gridColsNotProcessed)&&(this.updateGridColumns(),colsPreviouslyExisted&&!this.gridOptionsWrapper.isMaintainColumnOrder()&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(source),this.checkViewportColumns()),this.dispatchEverythingChanged(source),raiseEventsFunc&&raiseEventsFunc(),this.dispatchNewColumnsLoaded()},ColumnModel.prototype.dispatchNewColumnsLoaded=function(){var newColumnsLoadedEvent={type:Events.EVENT_NEW_COLUMNS_LOADED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(newColumnsLoadedEvent)},ColumnModel.prototype.dispatchEverythingChanged=function(source){void 0===source&&(source="api");var eventEverythingChanged={type:Events.EVENT_COLUMN_EVERYTHING_CHANGED,api:this.gridApi,columnApi:this.columnApi,source};this.eventService.dispatchEvent(eventEverythingChanged)},ColumnModel.prototype.orderGridColumnsLikePrimary=function(){var _this=this,primaryColumns=this.primaryColumns;primaryColumns&&this.gridColumns.sort((function(colA,colB){var primaryIndexA=primaryColumns.indexOf(colA),primaryIndexB=primaryColumns.indexOf(colB),indexAPresent=primaryIndexA>=0,indexBPresent=primaryIndexB>=0;return indexAPresent&&indexBPresent?primaryIndexA-primaryIndexB:indexAPresent?1:indexBPresent?-1:_this.gridColumns.indexOf(colA)-_this.gridColumns.indexOf(colB)}))},ColumnModel.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},ColumnModel.prototype.setViewport=function(){this.gridOptionsWrapper.isEnableRtl()?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},ColumnModel.prototype.getDisplayedColumnsStartingAt=function(column){for(var currentColumn=column,columns=[];null!=currentColumn;)columns.push(currentColumn),currentColumn=this.getDisplayedColAfter(currentColumn);return columns},ColumnModel.prototype.checkViewportColumns=function(){if(null!=this.displayedColumnsCenter){var hashBefore=this.viewportColumns.map((function(column){return column.getId()})).join("#");if(this.extractViewport(),hashBefore!==this.viewportColumns.map((function(column){return column.getId()})).join("#")){var event_1={type:Events.EVENT_VIRTUAL_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event_1)}}},ColumnModel.prototype.setViewportPosition=function(scrollWidth,scrollPosition){(scrollWidth!==this.scrollWidth||scrollPosition!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=scrollWidth,this.scrollPosition=scrollPosition,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns())},ColumnModel.prototype.isPivotMode=function(){return this.pivotMode},ColumnModel.prototype.isPivotSettingAllowed=function(pivot){return!pivot||!this.gridOptionsWrapper.isTreeData()||(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1)},ColumnModel.prototype.setPivotMode=function(pivotMode,source){if(void 0===source&&(source="api"),pivotMode!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)){this.pivotMode=pivotMode,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(source);var event={type:Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event)}},ColumnModel.prototype.getSecondaryPivotColumn=function(pivotKeys,valueColKey){if(missing(this.secondaryColumns))return null;var valueColumnToFind=this.getPrimaryColumn(valueColKey),foundColumn=null;return this.secondaryColumns.forEach((function(column){var thisPivotKeys=column.getColDef().pivotKeys,pivotValueColumn=column.getColDef().pivotValueColumn;areEqual(thisPivotKeys,pivotKeys)&&pivotValueColumn===valueColumnToFind&&(foundColumn=column)})),foundColumn},ColumnModel.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("columnModel")},ColumnModel.prototype.setFirstRightAndLastLeftPinned=function(source){var lastLeft,firstRight;this.gridOptionsWrapper.isEnableRtl()?(lastLeft=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,firstRight=this.displayedColumnsRight?last(this.displayedColumnsRight):null):(lastLeft=this.displayedColumnsLeft?last(this.displayedColumnsLeft):null,firstRight=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach((function(column){column.setLastLeftPinned(column===lastLeft,source),column.setFirstRightPinned(column===firstRight,source)}))},ColumnModel.prototype.autoSizeColumns=function(params){var _this=this,columns=params.columns,skipHeader=params.skipHeader,skipHeaderGroups=params.skipHeaderGroups,stopAtGroup=params.stopAtGroup,_a=params.source,source=void 0===_a?"api":_a;this.animationFrameService.flushAllFrames();for(var columnsAutosized=[],changesThisTimeAround=-1,shouldSkipHeader=null!=skipHeader?skipHeader:this.gridOptionsWrapper.isSkipHeaderOnAutoSize(),shouldSkipHeaderGroups=null!=skipHeaderGroups?skipHeaderGroups:shouldSkipHeader;0!==changesThisTimeAround;)changesThisTimeAround=0,this.actionOnGridColumns(columns,(function(column){if(columnsAutosized.indexOf(column)>=0)return!1;var preferredWidth=_this.autoWidthCalculator.getPreferredWidthForColumn(column,shouldSkipHeader);if(preferredWidth>0){var newWidth=_this.normaliseColumnWidth(column,preferredWidth);column.setActualWidth(newWidth,source),columnsAutosized.push(column),changesThisTimeAround++}return!0}),source);shouldSkipHeaderGroups||this.autoSizeColumnGroupsByColumns(columns,stopAtGroup),this.fireColumnResizedEvent(columnsAutosized,!0,"autosizeColumns")},ColumnModel.prototype.fireColumnResizedEvent=function(columns,finished,source,flexColumns){if(void 0===flexColumns&&(flexColumns=null),columns&&columns.length){var event_2={type:Events.EVENT_COLUMN_RESIZED,columns,column:1===columns.length?columns[0]:null,flexColumns,finished,api:this.gridApi,columnApi:this.columnApi,source};this.eventService.dispatchEvent(event_2)}},ColumnModel.prototype.autoSizeColumn=function(key,skipHeader,source){void 0===source&&(source="api"),key&&this.autoSizeColumns({columns:[key],skipHeader,skipHeaderGroups:!0,source})},ColumnModel.prototype.autoSizeColumnGroupsByColumns=function(keys,stopAtGroup){var e_1,_a,e_2,_b,headerGroupCtrl,columnGroups=new Set;this.getGridColumns(keys).forEach((function(col){for(var parent=col.getParent();parent&&parent!=stopAtGroup;)parent.isPadding()||columnGroups.add(parent),parent=parent.getParent()}));try{for(var columnGroups_1=__values(columnGroups),columnGroups_1_1=columnGroups_1.next();!columnGroups_1_1.done;columnGroups_1_1=columnGroups_1.next()){var columnGroup=columnGroups_1_1.value;try{for(var _c=(e_2=void 0,__values(this.ctrlsService.getHeaderRowContainerCtrls())),_d=_c.next();!_d.done;_d=_c.next()){if(headerGroupCtrl=_d.value.getHeaderCtrlForColumn(columnGroup))break}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_d&&!_d.done&&(_b=_c.return)&&_b.call(_c)}finally{if(e_2)throw e_2.error}}headerGroupCtrl&&headerGroupCtrl.resizeLeafColumnsToFit()}}catch(e_1_1){e_1={error:e_1_1}}finally{try{columnGroups_1_1&&!columnGroups_1_1.done&&(_a=columnGroups_1.return)&&_a.call(columnGroups_1)}finally{if(e_1)throw e_1.error}}return[]},ColumnModel.prototype.autoSizeAllColumns=function(skipHeader,source){void 0===source&&(source="api");var allDisplayedColumns=this.getAllDisplayedColumns();this.autoSizeColumns({columns:allDisplayedColumns,skipHeader,source})},ColumnModel.prototype.getColumnsFromTree=function(rootColumns){var result=[],recursiveFindColumns=function(childColumns){for(var i=0;i<childColumns.length;i++){var child=childColumns[i];child instanceof Column?result.push(child):child instanceof ProvidedColumnGroup&&recursiveFindColumns(child.getChildren())}};return recursiveFindColumns(rootColumns),result},ColumnModel.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},ColumnModel.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},ColumnModel.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},ColumnModel.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},ColumnModel.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},ColumnModel.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},ColumnModel.prototype.isColumnDisplayed=function(column){return this.getAllDisplayedColumns().indexOf(column)>=0},ColumnModel.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},ColumnModel.prototype.getViewportColumns=function(){return this.viewportColumns},ColumnModel.prototype.getDisplayedLeftColumnsForRow=function(rowNode){return this.colSpanActive?this.getDisplayedColumnsForRow(rowNode,this.displayedColumnsLeft):this.displayedColumnsLeft},ColumnModel.prototype.getDisplayedRightColumnsForRow=function(rowNode){return this.colSpanActive?this.getDisplayedColumnsForRow(rowNode,this.displayedColumnsRight):this.displayedColumnsRight},ColumnModel.prototype.getDisplayedColumnsForRow=function(rowNode,displayedColumns,filterCallback,emptySpaceBeforeColumn){for(var out_i_1,result=[],lastConsideredCol=null,_loop_1=function(i){var filterPasses,col=displayedColumns[i],maxAllowedColSpan=displayedColumns.length-i,colSpan=Math.min(col.getColSpan(rowNode),maxAllowedColSpan),columnsToCheckFilter=[col];if(colSpan>1){for(var colsToRemove=colSpan-1,j=1;j<=colsToRemove;j++)columnsToCheckFilter.push(displayedColumns[i+j]);i+=colsToRemove}if(filterCallback?(filterPasses=!1,columnsToCheckFilter.forEach((function(colForFilter){filterCallback(colForFilter)&&(filterPasses=!0)}))):filterPasses=!0,filterPasses){if(0===result.length&&lastConsideredCol)!!emptySpaceBeforeColumn&&emptySpaceBeforeColumn(col)&&result.push(lastConsideredCol);result.push(col)}lastConsideredCol=col,out_i_1=i},i=0;i<displayedColumns.length;i++)_loop_1(i),i=out_i_1;return result},ColumnModel.prototype.getViewportCenterColumnsForRow=function(rowNode){var _this=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var filterCallback=this.suppressColumnVirtualisation?null:this.isColumnInViewport.bind(this);return this.getDisplayedColumnsForRow(rowNode,this.displayedColumnsCenter,filterCallback,(function(col){var left=col.getLeft();return exists(left)&&left>_this.viewportLeft}))},ColumnModel.prototype.getAriaColumnIndex=function(col){return this.getAllGridColumns().indexOf(col)+1},ColumnModel.prototype.isColumnInViewport=function(col){if(col.isAutoHeight())return!0;var columnLeft=col.getLeft()||0,columnRight=columnLeft+col.getActualWidth(),leftBounds=this.viewportLeft-200,rightBounds=this.viewportRight+200;return!(columnLeft<leftBounds&&columnRight<leftBounds)&&!(columnLeft>rightBounds&&columnRight>rightBounds)},ColumnModel.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},ColumnModel.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},ColumnModel.prototype.updatePrimaryColumnList=function(keys,masterList,actionIsAdd,columnCallback,eventType,source){var _this=this;if(void 0===source&&(source="api"),keys&&!missingOrEmpty(keys)){var atLeastOne=!1;if(keys.forEach((function(key){var columnToAdd=_this.getPrimaryColumn(key);if(columnToAdd){if(actionIsAdd){if(masterList.indexOf(columnToAdd)>=0)return;masterList.push(columnToAdd)}else{if(masterList.indexOf(columnToAdd)<0)return;removeFromArray(masterList,columnToAdd)}columnCallback(columnToAdd),atLeastOne=!0}})),atLeastOne){this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(source);var event={type:eventType,columns:masterList,column:1===masterList.length?masterList[0]:null,api:this.gridApi,columnApi:this.columnApi,source};this.eventService.dispatchEvent(event)}}},ColumnModel.prototype.setRowGroupColumns=function(colKeys,source){void 0===source&&(source="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(colKeys,this.rowGroupColumns,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.setRowGroupActive.bind(this),source)},ColumnModel.prototype.setRowGroupActive=function(active,column,source){active!==column.isRowGroupActive()&&(column.setRowGroupActive(active,source),active||this.gridOptionsWrapper.isSuppressMakeColumnVisibleAfterUnGroup()||column.setVisible(!0,source))},ColumnModel.prototype.addRowGroupColumn=function(key,source){void 0===source&&(source="api"),key&&this.addRowGroupColumns([key],source)},ColumnModel.prototype.addRowGroupColumns=function(keys,source){void 0===source&&(source="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(keys,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),Events.EVENT_COLUMN_ROW_GROUP_CHANGED,source)},ColumnModel.prototype.removeRowGroupColumns=function(keys,source){void 0===source&&(source="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(keys,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),Events.EVENT_COLUMN_ROW_GROUP_CHANGED,source)},ColumnModel.prototype.removeRowGroupColumn=function(key,source){void 0===source&&(source="api"),key&&this.removeRowGroupColumns([key],source)},ColumnModel.prototype.addPivotColumns=function(keys,source){void 0===source&&(source="api"),this.updatePrimaryColumnList(keys,this.pivotColumns,!0,(function(column){return column.setPivotActive(!0,source)}),Events.EVENT_COLUMN_PIVOT_CHANGED,source)},ColumnModel.prototype.setPivotColumns=function(colKeys,source){void 0===source&&(source="api"),this.setPrimaryColumnList(colKeys,this.pivotColumns,Events.EVENT_COLUMN_PIVOT_CHANGED,(function(added,column){column.setPivotActive(added,source)}),source)},ColumnModel.prototype.addPivotColumn=function(key,source){void 0===source&&(source="api"),this.addPivotColumns([key],source)},ColumnModel.prototype.removePivotColumns=function(keys,source){void 0===source&&(source="api"),this.updatePrimaryColumnList(keys,this.pivotColumns,!1,(function(column){return column.setPivotActive(!1,source)}),Events.EVENT_COLUMN_PIVOT_CHANGED,source)},ColumnModel.prototype.removePivotColumn=function(key,source){void 0===source&&(source="api"),this.removePivotColumns([key],source)},ColumnModel.prototype.setPrimaryColumnList=function(colKeys,masterList,eventName,columnCallback,source){var _this=this;masterList.length=0,exists(colKeys)&&colKeys.forEach((function(key){var column=_this.getPrimaryColumn(key);column&&masterList.push(column)})),(this.primaryColumns||[]).forEach((function(column){var added=masterList.indexOf(column)>=0;columnCallback(added,column)})),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(source),this.fireColumnEvent(eventName,masterList,source)},ColumnModel.prototype.setValueColumns=function(colKeys,source){void 0===source&&(source="api"),this.setPrimaryColumnList(colKeys,this.valueColumns,Events.EVENT_COLUMN_VALUE_CHANGED,this.setValueActive.bind(this),source)},ColumnModel.prototype.setValueActive=function(active,column,source){if(active!==column.isValueActive()&&(column.setValueActive(active,source),active&&!column.getAggFunc())){var initialAggFunc=this.aggFuncService.getDefaultAggFunc(column);column.setAggFunc(initialAggFunc)}},ColumnModel.prototype.addValueColumns=function(keys,source){void 0===source&&(source="api"),this.updatePrimaryColumnList(keys,this.valueColumns,!0,this.setValueActive.bind(this,!0),Events.EVENT_COLUMN_VALUE_CHANGED,source)},ColumnModel.prototype.addValueColumn=function(colKey,source){void 0===source&&(source="api"),colKey&&this.addValueColumns([colKey],source)},ColumnModel.prototype.removeValueColumn=function(colKey,source){void 0===source&&(source="api"),this.removeValueColumns([colKey],source)},ColumnModel.prototype.removeValueColumns=function(keys,source){void 0===source&&(source="api"),this.updatePrimaryColumnList(keys,this.valueColumns,!1,this.setValueActive.bind(this,!1),Events.EVENT_COLUMN_VALUE_CHANGED,source)},ColumnModel.prototype.normaliseColumnWidth=function(column,newWidth){var minWidth=column.getMinWidth();exists(minWidth)&&newWidth<minWidth&&(newWidth=minWidth);var maxWidth=column.getMaxWidth();return exists(maxWidth)&&column.isGreaterThanMax(newWidth)&&(newWidth=maxWidth),newWidth},ColumnModel.prototype.getPrimaryOrGridColumn=function(key){return this.getPrimaryColumn(key)||this.getGridColumn(key)},ColumnModel.prototype.setColumnWidths=function(columnWidths,shiftKey,finished,source){var _this=this;void 0===source&&(source="api");var sets=[];columnWidths.forEach((function(columnWidth){var col=_this.getPrimaryOrGridColumn(columnWidth.key);if(col&&(sets.push({width:columnWidth.newWidth,ratios:[1],columns:[col]}),"shift"===_this.gridOptionsWrapper.getColResizeDefault()&&(shiftKey=!shiftKey),shiftKey)){var otherCol=_this.getDisplayedColAfter(col);if(!otherCol)return;var widthDiff=col.getActualWidth()-columnWidth.newWidth,otherColWidth=otherCol.getActualWidth()+widthDiff;sets.push({width:otherColWidth,ratios:[1],columns:[otherCol]})}})),0!==sets.length&&this.resizeColumnSets({resizeSets:sets,finished,source})},ColumnModel.prototype.checkMinAndMaxWidthsForSet=function(columnResizeSet){var columns=columnResizeSet.columns,width=columnResizeSet.width,minWidthAccumulated=0,maxWidthAccumulated=0,maxWidthActive=!0;return columns.forEach((function(col){var minWidth=col.getMinWidth();minWidthAccumulated+=minWidth||0;var maxWidth=col.getMaxWidth();exists(maxWidth)&&maxWidth>0?maxWidthAccumulated+=maxWidth:maxWidthActive=!1})),width>=minWidthAccumulated&&(!maxWidthActive||width<=maxWidthAccumulated)},ColumnModel.prototype.resizeColumnSets=function(params){var _this=this,resizeSets=params.resizeSets,finished=params.finished,source=params.source;if(!resizeSets||resizeSets.every((function(columnResizeSet){return _this.checkMinAndMaxWidthsForSet(columnResizeSet)}))){var changedCols=[],allResizedCols=[];resizeSets.forEach((function(set){var width=set.width,columns=set.columns,ratios=set.ratios,newWidths={},finishedCols={};columns.forEach((function(col){return allResizedCols.push(col)}));for(var finishedColsGrew=!0,loopCount=0,_loop_2=function(){if(++loopCount>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";finishedColsGrew=!1;var subsetCols=[],subsetRatioTotal=0,pixelsToDistribute=width;columns.forEach((function(col,index){if(finishedCols[col.getId()])pixelsToDistribute-=newWidths[col.getId()];else{subsetCols.push(col);var ratioThisCol=ratios[index];subsetRatioTotal+=ratioThisCol}}));var ratioScale=1/subsetRatioTotal;subsetCols.forEach((function(col,index){var colNewWidth;index===subsetCols.length-1?colNewWidth=pixelsToDistribute:(colNewWidth=Math.round(ratios[index]*width*ratioScale),pixelsToDistribute-=colNewWidth);var minWidth=col.getMinWidth(),maxWidth=col.getMaxWidth();exists(minWidth)&&colNewWidth<minWidth?(colNewWidth=minWidth,finishedCols[col.getId()]=!0,finishedColsGrew=!0):exists(maxWidth)&&maxWidth>0&&colNewWidth>maxWidth&&(colNewWidth=maxWidth,finishedCols[col.getId()]=!0,finishedColsGrew=!0),newWidths[col.getId()]=colNewWidth}))};finishedColsGrew;){if("break"===_loop_2())break}columns.forEach((function(col){var newWidth=newWidths[col.getId()];col.getActualWidth()!==newWidth&&(col.setActualWidth(newWidth,source),changedCols.push(col))}))}));var atLeastOneColChanged=changedCols.length>0,flexedCols=[];atLeastOneColChanged&&(flexedCols=this.refreshFlexedColumns({resizingCols:allResizedCols,skipSetLeft:!0}),this.setLeftValues(source),this.updateBodyWidths(),this.checkViewportColumns());var colsForEvent=allResizedCols.concat(flexedCols);(atLeastOneColChanged||finished)&&this.fireColumnResizedEvent(colsForEvent,finished,source,flexedCols)}else if(finished){var columns=resizeSets&&resizeSets.length>0?resizeSets[0].columns:null;this.fireColumnResizedEvent(columns,finished,source)}},ColumnModel.prototype.setColumnAggFunc=function(key,aggFunc,source){if(void 0===source&&(source="api"),key){var column=this.getPrimaryColumn(key);column&&(column.setAggFunc(aggFunc),this.fireColumnEvent(Events.EVENT_COLUMN_VALUE_CHANGED,[column],source))}},ColumnModel.prototype.fireColumnEvent=function(type,columns,source){var event={type,columns,column:columns&&1==columns.length?columns[0]:null,api:this.gridApi,columnApi:this.columnApi,source};this.eventService.dispatchEvent(event)},ColumnModel.prototype.moveRowGroupColumn=function(fromIndex,toIndex,source){void 0===source&&(source="api");var column=this.rowGroupColumns[fromIndex];this.rowGroupColumns.splice(fromIndex,1),this.rowGroupColumns.splice(toIndex,0,column);var event={type:Events.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:this.rowGroupColumns,column:1===this.rowGroupColumns.length?this.rowGroupColumns[0]:null,api:this.gridApi,columnApi:this.columnApi,source};this.eventService.dispatchEvent(event)},ColumnModel.prototype.moveColumns=function(columnsToMoveKeys,toIndex,source){if(void 0===source&&(source="api"),this.columnAnimationService.start(),toIndex>this.gridColumns.length-columnsToMoveKeys.length)return console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+toIndex),void console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");var columnsToMove=this.getGridColumns(columnsToMoveKeys);if(!!this.doesMovePassRules(columnsToMove,toIndex)){moveInArray(this.gridColumns,columnsToMove,toIndex),this.updateDisplayedColumns(source);var event={type:Events.EVENT_COLUMN_MOVED,columns:columnsToMove,column:1===columnsToMove.length?columnsToMove[0]:null,toIndex,api:this.gridApi,columnApi:this.columnApi,source};this.eventService.dispatchEvent(event),this.columnAnimationService.finish()}},ColumnModel.prototype.doesMovePassRules=function(columnsToMove,toIndex){var proposedColumnOrder=this.gridColumns.slice();return moveInArray(proposedColumnOrder,columnsToMove,toIndex),!!this.doesMovePassMarryChildren(proposedColumnOrder)&&!!this.doesMovePassLockedPositions(proposedColumnOrder)},ColumnModel.prototype.sortColumnsLikeGridColumns=function(cols){var _this=this;!cols||cols.length<=1||(cols.filter((function(c){return _this.gridColumns.indexOf(c)<0})).length>0||cols.sort((function(a,b){return _this.gridColumns.indexOf(a)-_this.gridColumns.indexOf(b)})))},ColumnModel.prototype.doesMovePassLockedPositions=function(proposedColumnOrder){var lastPlacement=0,rulePassed=!0;return proposedColumnOrder.forEach((function(col){var position,placement=(position=col.getColDef().lockPosition)?!0===position||"left"===position?0:2:1;placement<lastPlacement&&(rulePassed=!1),lastPlacement=placement})),rulePassed},ColumnModel.prototype.doesMovePassMarryChildren=function(allColumnsCopy){var rulePassed=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,(function(child){if(child instanceof ProvidedColumnGroup){var columnGroup=child,colGroupDef=columnGroup.getColGroupDef();if(colGroupDef&&colGroupDef.marryChildren){var newIndexes=[];columnGroup.getLeafColumns().forEach((function(col){var newColIndex=allColumnsCopy.indexOf(col);newIndexes.push(newColIndex)})),Math.max.apply(Math,newIndexes)-Math.min.apply(Math,newIndexes)>columnGroup.getLeafColumns().length-1&&(rulePassed=!1)}}})),rulePassed},ColumnModel.prototype.moveColumn=function(key,toIndex,source){void 0===source&&(source="api"),this.moveColumns([key],toIndex,source)},ColumnModel.prototype.moveColumnByIndex=function(fromIndex,toIndex,source){void 0===source&&(source="api");var column=this.gridColumns[fromIndex];this.moveColumn(column,toIndex,source)},ColumnModel.prototype.getColumnDefs=function(){var _this=this;if(this.primaryColumns){var cols=this.primaryColumns.slice();return this.gridColsArePrimary?cols.sort((function(a,b){return _this.gridColumns.indexOf(a)-_this.gridColumns.indexOf(b)})):this.lastPrimaryOrder&&cols.sort((function(a,b){return _this.lastPrimaryOrder.indexOf(a)-_this.lastPrimaryOrder.indexOf(b)})),this.columnDefFactory.buildColumnDefs(cols,this.rowGroupColumns,this.pivotColumns)}},ColumnModel.prototype.getBodyContainerWidth=function(){return this.bodyWidth},ColumnModel.prototype.getContainerWidth=function(pinned){switch(pinned){case Constants.PINNED_LEFT:return this.leftWidth;case Constants.PINNED_RIGHT:return this.rightWidth;default:return this.bodyWidth}},ColumnModel.prototype.updateBodyWidths=function(){var newBodyWidth=this.getWidthOfColsInList(this.displayedColumnsCenter),newLeftWidth=this.getWidthOfColsInList(this.displayedColumnsLeft),newRightWidth=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==newBodyWidth,this.bodyWidth!==newBodyWidth||this.leftWidth!==newLeftWidth||this.rightWidth!==newRightWidth){this.bodyWidth=newBodyWidth,this.leftWidth=newLeftWidth,this.rightWidth=newRightWidth;var event_3={type:Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event_3)}},ColumnModel.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},ColumnModel.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},ColumnModel.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},ColumnModel.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},ColumnModel.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},ColumnModel.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},ColumnModel.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},ColumnModel.prototype.getDisplayedColumns=function(type){switch(type){case Constants.PINNED_LEFT:return this.getDisplayedLeftColumns();case Constants.PINNED_RIGHT:return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},ColumnModel.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns.slice():null},ColumnModel.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns.slice():null},ColumnModel.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},ColumnModel.prototype.getAllGridColumns=function(){return this.gridColumns},ColumnModel.prototype.isEmpty=function(){return missingOrEmpty(this.gridColumns)},ColumnModel.prototype.isRowGroupEmpty=function(){return missingOrEmpty(this.rowGroupColumns)},ColumnModel.prototype.setColumnVisible=function(key,visible,source){void 0===source&&(source="api"),this.setColumnsVisible([key],visible,source)},ColumnModel.prototype.setColumnsVisible=function(keys,visible,source){var _this=this;void 0===visible&&(visible=!1),void 0===source&&(source="api"),this.columnAnimationService.start(),this.actionOnGridColumns(keys,(function(column){return column.isVisible()!==visible&&(column.setVisible(visible,source),!0)}),source,(function(){return{type:Events.EVENT_COLUMN_VISIBLE,visible,column:null,columns:null,api:_this.gridApi,columnApi:_this.columnApi,source}})),this.columnAnimationService.finish()},ColumnModel.prototype.setColumnPinned=function(key,pinned,source){void 0===source&&(source="api"),key&&this.setColumnsPinned([key],pinned,source)},ColumnModel.prototype.setColumnsPinned=function(keys,pinned,source){var actualPinned,_this=this;(void 0===source&&(source="api"),"print"!==this.gridOptionsWrapper.getDomLayout())?(this.columnAnimationService.start(),actualPinned=!0===pinned||pinned===Constants.PINNED_LEFT?Constants.PINNED_LEFT:pinned===Constants.PINNED_RIGHT?Constants.PINNED_RIGHT:null,this.actionOnGridColumns(keys,(function(col){return col.getPinned()!==actualPinned&&(col.setPinned(actualPinned),!0)}),source,(function(){return{type:Events.EVENT_COLUMN_PINNED,pinned:actualPinned,column:null,columns:null,api:_this.gridApi,columnApi:_this.columnApi,source}})),this.columnAnimationService.finish()):console.warn("Changing the column pinning status is not allowed with domLayout='print'")},ColumnModel.prototype.actionOnGridColumns=function(keys,action,source,createEvent){var _this=this;if(!missingOrEmpty(keys)){var updatedColumns=[];if(keys.forEach((function(key){var column=_this.getGridColumn(key);column&&(!1!==action(column)&&updatedColumns.push(column))})),updatedColumns.length&&(this.updateDisplayedColumns(source),exists(createEvent)&&createEvent)){var event_4=createEvent();event_4.columns=updatedColumns,event_4.column=1===updatedColumns.length?updatedColumns[0]:null,this.eventService.dispatchEvent(event_4)}}},ColumnModel.prototype.getDisplayedColBefore=function(col){var allDisplayedColumns=this.getAllDisplayedColumns(),oldIndex=allDisplayedColumns.indexOf(col);return oldIndex>0?allDisplayedColumns[oldIndex-1]:null},ColumnModel.prototype.getDisplayedColAfter=function(col){var allDisplayedColumns=this.getAllDisplayedColumns(),oldIndex=allDisplayedColumns.indexOf(col);return oldIndex<allDisplayedColumns.length-1?allDisplayedColumns[oldIndex+1]:null},ColumnModel.prototype.getDisplayedGroupAfter=function(columnGroup){return this.getDisplayedGroupAtDirection(columnGroup,"After")},ColumnModel.prototype.getDisplayedGroupBefore=function(columnGroup){return this.getDisplayedGroupAtDirection(columnGroup,"Before")},ColumnModel.prototype.getDisplayedGroupAtDirection=function(columnGroup,direction){for(var requiredLevel=columnGroup.getProvidedColumnGroup().getLevel()+columnGroup.getPaddingLevel(),colGroupLeafColumns=columnGroup.getDisplayedLeafColumns(),col="After"===direction?last(colGroupLeafColumns):colGroupLeafColumns[0],getDisplayColMethod="getDisplayedCol"+direction;;){var column=this[getDisplayColMethod](col);if(!column)return null;var groupPointer=this.getColumnGroupAtLevel(column,requiredLevel);if(groupPointer!==columnGroup)return groupPointer}},ColumnModel.prototype.getColumnGroupAtLevel=function(column,level){for(var groupPointer=column.getParent();;){if(groupPointer.getProvidedColumnGroup().getLevel()+groupPointer.getPaddingLevel()<=level)break;groupPointer=groupPointer.getParent()}return groupPointer},ColumnModel.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},ColumnModel.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},ColumnModel.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var _a;return(_a=[]).concat.apply(_a,__spread([this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[]]))},ColumnModel.prototype.getPrimaryAndAutoGroupCols=function(){var _a;return(_a=[]).concat.apply(_a,__spread([this.primaryColumns||[],this.groupAutoColumns||[]]))},ColumnModel.prototype.getPrimaryAndSecondaryColumns=function(){var _a;return(_a=[]).concat.apply(_a,__spread([this.primaryColumns||[],this.secondaryColumns||[]]))},ColumnModel.prototype.createStateItemFromColumn=function(column){var rowGroupIndex=column.isRowGroupActive()?this.rowGroupColumns.indexOf(column):null,pivotIndex=column.isPivotActive()?this.pivotColumns.indexOf(column):null,aggFunc=column.isValueActive()?column.getAggFunc():null,sort=null!=column.getSort()?column.getSort():null,sortIndex=null!=column.getSortIndex()?column.getSortIndex():null,flex=null!=column.getFlex()&&column.getFlex()>0?column.getFlex():null;return{colId:column.getColId(),width:column.getActualWidth(),hide:!column.isVisible(),pinned:column.getPinned(),sort,sortIndex,aggFunc,rowGroup:column.isRowGroupActive(),rowGroupIndex,pivot:column.isPivotActive(),pivotIndex,flex}},ColumnModel.prototype.getColumnState=function(){if(missing(this.primaryColumns)||!this.isAlive())return[];var res=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(res),res},ColumnModel.prototype.orderColumnStateList=function(columnStateList){var colIdToGridIndexMap=convertToMap(this.gridColumns.map((function(col,index){return[col.getColId(),index]})));columnStateList.sort((function(itemA,itemB){return(colIdToGridIndexMap.has(itemA.colId)?colIdToGridIndexMap.get(itemA.colId):-1)-(colIdToGridIndexMap.has(itemB.colId)?colIdToGridIndexMap.get(itemB.colId):-1)}))},ColumnModel.prototype.resetColumnState=function(source){void 0===source&&(source="api");var primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),columnStates=[],letRowGroupIndex=1e3,letPivotIndex=1e3,colsToProcess=[];this.groupAutoColumns&&(colsToProcess=colsToProcess.concat(this.groupAutoColumns)),primaryColumns&&(colsToProcess=colsToProcess.concat(primaryColumns)),colsToProcess.forEach((function(column){var getValueOrNull=function(a,b){return null!=a?a:null!=b?b:null},colDef=column.getColDef(),sort=getValueOrNull(colDef.sort,colDef.initialSort),sortIndex=getValueOrNull(colDef.sortIndex,colDef.initialSortIndex),hide=getValueOrNull(colDef.hide,colDef.initialHide),pinned=getValueOrNull(colDef.pinned,colDef.initialPinned),width=getValueOrNull(colDef.width,colDef.initialWidth),flex=getValueOrNull(colDef.flex,colDef.initialFlex),rowGroupIndex=getValueOrNull(colDef.rowGroupIndex,colDef.initialRowGroupIndex),rowGroup=getValueOrNull(colDef.rowGroup,colDef.initialRowGroup);null!=rowGroupIndex||null!=rowGroup&&0!=rowGroup||(rowGroupIndex=null,rowGroup=null);var pivotIndex=getValueOrNull(colDef.pivotIndex,colDef.initialPivotIndex),pivot=getValueOrNull(colDef.pivot,colDef.initialPivot);null!=pivotIndex||null!=pivot&&0!=pivot||(pivotIndex=null,pivot=null);var aggFunc=getValueOrNull(colDef.aggFunc,colDef.initialAggFunc),stateItem={colId:column.getColId(),sort,sortIndex,hide,pinned,width,flex,rowGroup,rowGroupIndex,pivot,pivotIndex,aggFunc};missing(rowGroupIndex)&&rowGroup&&(stateItem.rowGroupIndex=letRowGroupIndex++),missing(pivotIndex)&&pivot&&(stateItem.pivotIndex=letPivotIndex++),columnStates.push(stateItem)})),this.applyColumnState({state:columnStates,applyOrder:!0},source)},ColumnModel.prototype.applyColumnState=function(params,source){var _this=this;if(void 0===source&&(source="api"),missingOrEmpty(this.primaryColumns))return!1;if(params&&params.state&&!params.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;var applyStates=function(states,existingColumns,getById){var raiseEventsFunc=_this.compareColumnStatesAndRaiseEvents(source);_this.autoGroupsNeedBuilding=!0;var columnsWithNoState=existingColumns.slice(),rowGroupIndexes={},pivotIndexes={},autoGroupColumnStates=[],unmatchedAndAutoStates=[],unmatchedCount=0,previousRowGroupCols=_this.rowGroupColumns.slice(),previousPivotCols=_this.pivotColumns.slice();states.forEach((function(state){var colId=state.colId||"";if(colId.startsWith(Constants.GROUP_AUTO_COLUMN_ID))return autoGroupColumnStates.push(state),void unmatchedAndAutoStates.push(state);var column=getById(colId);column?(_this.syncColumnWithStateItem(column,state,params.defaultState,rowGroupIndexes,pivotIndexes,!1,source),removeFromArray(columnsWithNoState,column)):(unmatchedAndAutoStates.push(state),unmatchedCount+=1)}));var applyDefaultsFunc=function(col){return _this.syncColumnWithStateItem(col,null,params.defaultState,rowGroupIndexes,pivotIndexes,!1,source)};columnsWithNoState.forEach(applyDefaultsFunc);var comparator=function(indexes,oldList,colA,colB){var indexA=indexes[colA.getId()],indexB=indexes[colB.getId()],aHasIndex=null!=indexA,bHasIndex=null!=indexB;if(aHasIndex&&bHasIndex)return indexA-indexB;if(aHasIndex)return-1;if(bHasIndex)return 1;var oldIndexA=oldList.indexOf(colA),oldIndexB=oldList.indexOf(colB),aHasOldIndex=oldIndexA>=0;return aHasOldIndex&&oldIndexB>=0?oldIndexA-oldIndexB:aHasOldIndex?-1:1};_this.rowGroupColumns.sort(comparator.bind(_this,rowGroupIndexes,previousRowGroupCols)),_this.pivotColumns.sort(comparator.bind(_this,pivotIndexes,previousPivotCols)),_this.updateGridColumns();var autoGroupColsCopy=_this.groupAutoColumns?_this.groupAutoColumns.slice():[];return autoGroupColumnStates.forEach((function(stateItem){var autoCol=_this.getAutoColumn(stateItem.colId);removeFromArray(autoGroupColsCopy,autoCol),_this.syncColumnWithStateItem(autoCol,stateItem,params.defaultState,null,null,!0,source)})),autoGroupColsCopy.forEach(applyDefaultsFunc),_this.applyOrderAfterApplyState(params),_this.updateDisplayedColumns(source),_this.dispatchEverythingChanged(source),raiseEventsFunc(),{unmatchedAndAutoStates,unmatchedCount}};this.columnAnimationService.start();var _a=applyStates(params.state||[],this.primaryColumns||[],(function(id){return _this.getPrimaryColumn(id)})),unmatchedAndAutoStates=_a.unmatchedAndAutoStates,unmatchedCount=_a.unmatchedCount;return(unmatchedAndAutoStates.length>0||exists(params.defaultState))&&(unmatchedCount=applyStates(unmatchedAndAutoStates,this.secondaryColumns||[],(function(id){return _this.getSecondaryColumn(id)})).unmatchedCount),this.columnAnimationService.finish(),0===unmatchedCount},ColumnModel.prototype.applyOrderAfterApplyState=function(params){var _this=this;if(params.applyOrder&&params.state){var newOrder=[],processedColIds={};params.state.forEach((function(item){if(item.colId&&!processedColIds[item.colId]){var col=_this.gridColumnsMap[item.colId];col&&(newOrder.push(col),processedColIds[item.colId]=!0)}}));var autoGroupInsertIndex=0;this.gridColumns.forEach((function(col){var colId=col.getColId();null!=processedColIds[colId]||(colId.startsWith(Constants.GROUP_AUTO_COLUMN_ID)?insertIntoArray(newOrder,col,autoGroupInsertIndex++):newOrder.push(col))})),newOrder=this.placeLockedColumns(newOrder),this.doesMovePassMarryChildren(newOrder)?this.gridColumns=newOrder:console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.")}},ColumnModel.prototype.compareColumnStatesAndRaiseEvents=function(source){var _this=this,startState={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},columnStateBefore=this.getColumnState(),columnStateBeforeMap={};return columnStateBefore.forEach((function(col){columnStateBeforeMap[col.colId]=col})),function(){if(!_this.gridOptionsWrapper.isSuppressColumnStateEvents()){var colsForState=_this.getPrimaryAndSecondaryAndAutoColumns(),raiseWhenListsDifferent=function(eventType,colsBefore,colsAfter,idMapper){if(!areEqual(colsBefore.map(idMapper),colsAfter.map(idMapper))){var event={type:eventType,columns:colsAfter,column:1===colsAfter.length?colsAfter[0]:null,api:_this.gridApi,columnApi:_this.columnApi,source};_this.eventService.dispatchEvent(event)}},getChangedColumns=function(changedPredicate){var changedColumns=[];return colsForState.forEach((function(column){var colStateBefore=columnStateBeforeMap[column.getColId()];colStateBefore&&changedPredicate(colStateBefore,column)&&changedColumns.push(column)})),changedColumns},columnIdMapper=function(c){return c.getColId()};raiseWhenListsDifferent(Events.EVENT_COLUMN_ROW_GROUP_CHANGED,startState.rowGroupColumns,_this.rowGroupColumns,columnIdMapper),raiseWhenListsDifferent(Events.EVENT_COLUMN_PIVOT_CHANGED,startState.pivotColumns,_this.pivotColumns,columnIdMapper);getChangedColumns((function(cs,c){var oldActive=null!=cs.aggFunc,activeChanged=oldActive!=c.isValueActive(),aggFuncChanged=oldActive&&cs.aggFunc!=c.getAggFunc();return activeChanged||aggFuncChanged})).length>0&&_this.fireColumnEvent(Events.EVENT_COLUMN_VALUE_CHANGED,_this.valueColumns,source);_this.fireColumnResizedEvent(getChangedColumns((function(cs,c){return cs.width!=c.getActualWidth()})),!0,source);_this.raiseColumnPinnedEvent(getChangedColumns((function(cs,c){return cs.pinned!=c.getPinned()})),source);_this.raiseColumnVisibleEvent(getChangedColumns((function(cs,c){return cs.hide==c.isVisible()})),source);getChangedColumns((function(cs,c){return cs.sort!=c.getSort()||cs.sortIndex!=c.getSortIndex()})).length>0&&_this.sortController.dispatchSortChangedEvents(source),_this.raiseColumnMovedEvent(columnStateBefore,source)}}},ColumnModel.prototype.raiseColumnPinnedEvent=function(changedColumns,source){if(changedColumns.length){var column=1===changedColumns.length?changedColumns[0]:null,pinned=this.getCommonValue(changedColumns,(function(col){return col.getPinned()})),event={type:Events.EVENT_COLUMN_PINNED,pinned:null!=pinned?pinned:null,columns:changedColumns,column,api:this.gridApi,columnApi:this.columnApi,source};this.eventService.dispatchEvent(event)}},ColumnModel.prototype.getCommonValue=function(cols,valueGetter){if(cols&&0!=cols.length){for(var firstValue=valueGetter(cols[0]),i=1;i<cols.length;i++)if(firstValue!==valueGetter(cols[i]))return;return firstValue}},ColumnModel.prototype.raiseColumnVisibleEvent=function(changedColumns,source){if(changedColumns.length){var column=1===changedColumns.length?changedColumns[0]:null,visible=this.getCommonValue(changedColumns,(function(col){return col.isVisible()})),event={type:Events.EVENT_COLUMN_VISIBLE,visible,columns:changedColumns,column,api:this.gridApi,columnApi:this.columnApi,source};this.eventService.dispatchEvent(event)}},ColumnModel.prototype.raiseColumnMovedEvent=function(colStateBefore,source){var _this=this,colStateAfter=this.getColumnState(),colStateAfterMapped={};colStateAfter.forEach((function(s){return colStateAfterMapped[s.colId]=s}));var colsIntersectIds={};colStateBefore.forEach((function(s){colStateAfterMapped[s.colId]&&(colsIntersectIds[s.colId]=!0)}));var beforeFiltered=colStateBefore.filter((function(c){return colsIntersectIds[c.colId]})),afterFiltered=colStateAfter.filter((function(c){return colsIntersectIds[c.colId]})),movedColumns=[];if(afterFiltered.forEach((function(csAfter,index){var csBefore=beforeFiltered&&beforeFiltered[index];if(csBefore&&csBefore.colId!==csAfter.colId){var gridCol=_this.getGridColumn(csBefore.colId);gridCol&&movedColumns.push(gridCol)}})),movedColumns.length){var event={type:Events.EVENT_COLUMN_MOVED,columns:movedColumns,column:null,api:this.gridApi,columnApi:this.columnApi,source};this.eventService.dispatchEvent(event)}},ColumnModel.prototype.syncColumnWithStateItem=function(column,stateItem,defaultState,rowGroupIndexes,pivotIndexes,autoCol,source){if(column){var getValue=function(key1,key2){var obj={value1:void 0,value2:void 0},calculated=!1;return stateItem&&(void 0!==stateItem[key1]&&(obj.value1=stateItem[key1],calculated=!0),exists(key2)&&void 0!==stateItem[key2]&&(obj.value2=stateItem[key2],calculated=!0)),!calculated&&defaultState&&(void 0!==defaultState[key1]&&(obj.value1=defaultState[key1]),exists(key2)&&void 0!==defaultState[key2]&&(obj.value2=defaultState[key2])),obj},hide=getValue("hide").value1;void 0!==hide&&column.setVisible(!hide,source);var pinned=getValue("pinned").value1;void 0!==pinned&&column.setPinned(pinned);var minColWidth=this.columnUtils.calculateColMinWidth(column.getColDef()),flex=getValue("flex").value1;if(void 0!==flex&&column.setFlex(flex),column.getFlex()<=0){var width=getValue("width").value1;null!=width&&null!=minColWidth&&width>=minColWidth&&column.setActualWidth(width,source)}var sort=getValue("sort").value1;void 0!==sort&&(sort===Constants.SORT_DESC||sort===Constants.SORT_ASC?column.setSort(sort,source):column.setSort(void 0,source));var sortIndex=getValue("sortIndex").value1;if(void 0!==sortIndex&&column.setSortIndex(sortIndex),!autoCol&&column.isPrimary()){var aggFunc=getValue("aggFunc").value1;void 0!==aggFunc&&("string"==typeof aggFunc?(column.setAggFunc(aggFunc),column.isValueActive()||(column.setValueActive(!0,source),this.valueColumns.push(column))):(exists(aggFunc)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),column.isValueActive()&&(column.setValueActive(!1,source),removeFromArray(this.valueColumns,column))));var _a=getValue("rowGroup","rowGroupIndex"),rowGroup=_a.value1,rowGroupIndex=_a.value2;void 0===rowGroup&&void 0===rowGroupIndex||("number"==typeof rowGroupIndex||rowGroup?(column.isRowGroupActive()||(column.setRowGroupActive(!0,source),this.rowGroupColumns.push(column)),rowGroupIndexes&&"number"==typeof rowGroupIndex&&(rowGroupIndexes[column.getId()]=rowGroupIndex)):column.isRowGroupActive()&&(column.setRowGroupActive(!1,source),removeFromArray(this.rowGroupColumns,column)));var _b=getValue("pivot","pivotIndex"),pivot=_b.value1,pivotIndex=_b.value2;void 0===pivot&&void 0===pivotIndex||("number"==typeof pivotIndex||pivot?(column.isPivotActive()||(column.setPivotActive(!0,source),this.pivotColumns.push(column)),pivotIndexes&&"number"==typeof pivotIndex&&(pivotIndexes[column.getId()]=pivotIndex)):column.isPivotActive()&&(column.setPivotActive(!1,source),removeFromArray(this.pivotColumns,column)))}}},ColumnModel.prototype.getGridColumns=function(keys){return this.getColumns(keys,this.getGridColumn.bind(this))},ColumnModel.prototype.getColumns=function(keys,columnLookupCallback){var foundColumns=[];return keys&&keys.forEach((function(key){var column=columnLookupCallback(key);column&&foundColumns.push(column)})),foundColumns},ColumnModel.prototype.getColumnWithValidation=function(key){if(null==key)return null;var column=this.getGridColumn(key);return column||console.warn("AG Grid: could not find column "+key),column},ColumnModel.prototype.getPrimaryColumn=function(key){return this.primaryColumns?this.getColumn(key,this.primaryColumns,this.primaryColumnsMap):null},ColumnModel.prototype.getGridColumn=function(key){return this.getColumn(key,this.gridColumns,this.gridColumnsMap)},ColumnModel.prototype.getSecondaryColumn=function(key){return this.secondaryColumns?this.getColumn(key,this.secondaryColumns,this.secondaryColumnsMap):null},ColumnModel.prototype.getColumn=function(key,columnList,columnMap){if(!key)return null;if("string"==typeof key&&columnMap[key])return columnMap[key];for(var i=0;i<columnList.length;i++)if(this.columnsMatch(columnList[i],key))return columnList[i];return this.getAutoColumn(key)},ColumnModel.prototype.getAutoColumn=function(key){var _this=this;return this.groupAutoColumns&&exists(this.groupAutoColumns)&&!missing(this.groupAutoColumns)&&this.groupAutoColumns.find((function(groupCol){return _this.columnsMatch(groupCol,key)}))||null},ColumnModel.prototype.columnsMatch=function(column,key){var columnMatches=column===key,colDefMatches=column.getColDef()===key,idMatches=column.getColId()==key;return columnMatches||colDefMatches||idMatches},ColumnModel.prototype.getDisplayNameForColumn=function(column,location,includeAggFunc){if(void 0===includeAggFunc&&(includeAggFunc=!1),!column)return null;var headerName=this.getHeaderName(column.getColDef(),column,null,null,location);return includeAggFunc?this.wrapHeaderNameWithAggFunc(column,headerName):headerName},ColumnModel.prototype.getDisplayNameForProvidedColumnGroup=function(columnGroup,providedColumnGroup,location){var colGroupDef=providedColumnGroup?providedColumnGroup.getColGroupDef():null;return colGroupDef?this.getHeaderName(colGroupDef,null,columnGroup,providedColumnGroup,location):null},ColumnModel.prototype.getDisplayNameForColumnGroup=function(columnGroup,location){return this.getDisplayNameForProvidedColumnGroup(columnGroup,columnGroup.getProvidedColumnGroup(),location)},ColumnModel.prototype.getHeaderName=function(colDef,column,columnGroup,providedColumnGroup,location){var headerValueGetter=colDef.headerValueGetter;if(headerValueGetter){var params={colDef,column,columnGroup,providedColumnGroup,location,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};return"function"==typeof headerValueGetter?headerValueGetter(params):"string"==typeof headerValueGetter?this.expressionService.evaluate(headerValueGetter,params):(console.warn("ag-grid: headerValueGetter must be a function or a string"),"")}return null!=colDef.headerName?colDef.headerName:colDef.field?camelCaseToHumanText(colDef.field):""},ColumnModel.prototype.wrapHeaderNameWithAggFunc=function(column,headerName){if(this.gridOptionsWrapper.isSuppressAggFuncInHeader())return headerName;var aggFuncFound,pivotValueColumn=column.getColDef().pivotValueColumn,aggFunc=null;if(exists(pivotValueColumn)){var isCollapsedHeaderEnabled=this.gridOptionsWrapper.isRemovePivotHeaderRowWhenSingleValueColumn()&&1===this.valueColumns.length,isTotalColumn=void 0!==column.getColDef().pivotTotalColumnIds;if(isCollapsedHeaderEnabled&&!isTotalColumn)return headerName;aggFunc=pivotValueColumn?pivotValueColumn.getAggFunc():null,aggFuncFound=!0}else{var measureActive=column.isValueActive(),aggregationPresent=this.pivotMode||!this.isRowGroupEmpty();measureActive&&aggregationPresent?(aggFunc=column.getAggFunc(),aggFuncFound=!0):aggFuncFound=!1}if(aggFuncFound){var aggFuncString="string"==typeof aggFunc?aggFunc:"func";return this.gridOptionsWrapper.getLocaleTextFunc()(aggFuncString,aggFuncString)+"("+headerName+")"}return headerName},ColumnModel.prototype.getColumnGroup=function(colId,instanceId){if(!colId)return null;if(colId instanceof ColumnGroup)return colId;var allColumnGroups=this.getAllDisplayedTrees(),checkInstanceId="number"==typeof instanceId,result=null;return this.columnUtils.depthFirstAllColumnTreeSearch(allColumnGroups,(function(child){if(child instanceof ColumnGroup){var columnGroup=child;(checkInstanceId?colId===columnGroup.getGroupId()&&instanceId===columnGroup.getInstanceId():colId===columnGroup.getGroupId())&&(result=columnGroup)}})),result},ColumnModel.prototype.isReady=function(){return this.ready},ColumnModel.prototype.extractValueColumns=function(source,oldPrimaryColumns){this.valueColumns=this.extractColumns(oldPrimaryColumns,this.valueColumns,(function(col,flag){return col.setValueActive(flag,source)}),(function(){}),(function(){}),(function(colDef){var aggFunc=colDef.aggFunc;return null===aggFunc||""===aggFunc?null:void 0!==aggFunc?!!aggFunc:void 0}),(function(colDef){return null!=colDef.initialAggFunc&&""!=colDef.initialAggFunc})),this.valueColumns.forEach((function(col){var colDef=col.getColDef();null!=colDef.aggFunc&&""!=colDef.aggFunc?col.setAggFunc(colDef.aggFunc):col.getAggFunc()||col.setAggFunc(colDef.initialAggFunc)}))},ColumnModel.prototype.extractRowGroupColumns=function(source,oldPrimaryColumns){this.rowGroupColumns=this.extractColumns(oldPrimaryColumns,this.rowGroupColumns,(function(col,flag){return col.setRowGroupActive(flag,source)}),(function(colDef){return colDef.rowGroupIndex}),(function(colDef){return colDef.initialRowGroupIndex}),(function(colDef){return colDef.rowGroup}),(function(colDef){return colDef.initialRowGroup}))},ColumnModel.prototype.extractColumns=function(oldPrimaryColumns,previousCols,setFlagFunc,getIndexFunc,getInitialIndexFunc,getValueFunc,getInitialValueFunc){void 0===oldPrimaryColumns&&(oldPrimaryColumns=[]),void 0===previousCols&&(previousCols=[]);var colsWithIndex=[],colsWithValue=[];(this.primaryColumns||[]).forEach((function(col){var colIsNew=oldPrimaryColumns.indexOf(col)<0,colDef=col.getColDef(),value=attrToBoolean(getValueFunc(colDef)),initialValue=attrToBoolean(getInitialValueFunc(colDef)),index=attrToNumber(getIndexFunc(colDef)),initialIndex=attrToNumber(getInitialIndexFunc(colDef));(void 0!==value?value:void 0!==index?null!==index&&index>=0:colIsNew?void 0!==initialValue?initialValue:!!(void 0!==initialIndex)&&(null!=initialIndex&&initialIndex>=0):previousCols.indexOf(col)>=0)&&((colIsNew?null!=index||null!=initialIndex:null!=index)?colsWithIndex.push(col):colsWithValue.push(col))}));var getIndexForCol=function(col){var index=getIndexFunc(col.getColDef()),defaultIndex=getInitialIndexFunc(col.getColDef());return null!=index?index:defaultIndex};colsWithIndex.sort((function(colA,colB){var indexA=getIndexForCol(colA),indexB=getIndexForCol(colB);return indexA===indexB?0:indexA<indexB?-1:1}));var res=[].concat(colsWithIndex);return previousCols.forEach((function(col){colsWithValue.indexOf(col)>=0&&res.push(col)})),colsWithValue.forEach((function(col){res.indexOf(col)<0&&res.push(col)})),previousCols.forEach((function(col){res.indexOf(col)<0&&setFlagFunc(col,!1)})),res.forEach((function(col){previousCols.indexOf(col)<0&&setFlagFunc(col,!0)})),res},ColumnModel.prototype.extractPivotColumns=function(source,oldPrimaryColumns){this.pivotColumns=this.extractColumns(oldPrimaryColumns,this.pivotColumns,(function(col,flag){return col.setPivotActive(flag,source)}),(function(colDef){return colDef.pivotIndex}),(function(colDef){return colDef.initialPivotIndex}),(function(colDef){return colDef.pivot}),(function(colDef){return colDef.initialPivot}))},ColumnModel.prototype.resetColumnGroupState=function(source){void 0===source&&(source="api");var stateItems=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,(function(child){if(child instanceof ProvidedColumnGroup){var colGroupDef=child.getColGroupDef(),groupState={groupId:child.getGroupId(),open:colGroupDef?colGroupDef.openByDefault:void 0};stateItems.push(groupState)}})),this.setColumnGroupState(stateItems,source)},ColumnModel.prototype.getColumnGroupState=function(){var columnGroupState=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,(function(node){node instanceof ProvidedColumnGroup&&columnGroupState.push({groupId:node.getGroupId(),open:node.isExpanded()})})),columnGroupState},ColumnModel.prototype.setColumnGroupState=function(stateItems,source){var _this=this;void 0===source&&(source="api"),this.columnAnimationService.start();var impactedGroups=[];stateItems.forEach((function(stateItem){var groupKey=stateItem.groupId,newValue=stateItem.open,providedColumnGroup=_this.getProvidedColumnGroup(groupKey);providedColumnGroup&&providedColumnGroup.isExpanded()!==newValue&&(_this.logger.log("columnGroupOpened("+providedColumnGroup.getGroupId()+","+newValue+")"),providedColumnGroup.setExpanded(newValue),impactedGroups.push(providedColumnGroup))})),this.updateGroupsAndDisplayedColumns(source),this.setFirstRightAndLastLeftPinned(source),impactedGroups.forEach((function(providedColumnGroup){var event={type:Events.EVENT_COLUMN_GROUP_OPENED,columnGroup:providedColumnGroup,api:_this.gridApi,columnApi:_this.columnApi};_this.eventService.dispatchEvent(event)})),this.columnAnimationService.finish()},ColumnModel.prototype.setColumnGroupOpened=function(key,newValue,source){var keyAsString;void 0===source&&(source="api"),keyAsString=key instanceof ProvidedColumnGroup?key.getId():key||"",this.setColumnGroupState([{groupId:keyAsString,open:newValue}],source)},ColumnModel.prototype.getProvidedColumnGroup=function(key){"string"!=typeof key&&console.error("AG Grid: group key must be a string");var res=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,(function(node){node instanceof ProvidedColumnGroup&&node.getId()===key&&(res=node)})),res},ColumnModel.prototype.calculateColumnsForDisplay=function(){var _this=this;return this.pivotMode&&missing(this.secondaryColumns)?this.gridColumns.filter((function(column){var isAutoGroupCol=_this.groupAutoColumns&&includes(_this.groupAutoColumns,column),isValueCol=_this.valueColumns&&includes(_this.valueColumns,column);return isAutoGroupCol||isValueCol})):this.gridColumns.filter((function(column){return _this.groupAutoColumns&&includes(_this.groupAutoColumns,column)||column.isVisible()}))},ColumnModel.prototype.checkColSpanActiveInCols=function(columns){var result=!1;return columns.forEach((function(col){exists(col.getColDef().colSpan)&&(result=!0)})),result},ColumnModel.prototype.calculateColumnsForGroupDisplay=function(){var _this=this;this.groupDisplayColumns=[];var checkFunc=function(col){var colDef=col.getColDef();colDef&&exists(colDef.showRowGroup)&&_this.groupDisplayColumns.push(col)};this.gridColumns.forEach(checkFunc),this.groupAutoColumns&&this.groupAutoColumns.forEach(checkFunc)},ColumnModel.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},ColumnModel.prototype.updateDisplayedColumns=function(source){var columnsForDisplay=this.calculateColumnsForDisplay();this.buildDisplayedTrees(columnsForDisplay),this.calculateColumnsForGroupDisplay(),this.updateGroupsAndDisplayedColumns(source),this.setFirstRightAndLastLeftPinned(source)},ColumnModel.prototype.isSecondaryColumnsPresent=function(){return exists(this.secondaryColumns)},ColumnModel.prototype.setSecondaryColumns=function(colDefs,source){var _this=this;void 0===source&&(source="api");var newColsPresent=colDefs&&colDefs.length>0;if(newColsPresent||!missing(this.secondaryColumns)){if(newColsPresent){this.processSecondaryColumnDefinitions(colDefs);var balancedTreeResult=this.columnFactory.createColumnTree(colDefs,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0);this.secondaryBalancedTree=balancedTreeResult.columnTree,this.secondaryHeaderRowCount=balancedTreeResult.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach((function(col){return _this.secondaryColumnsMap[col.getId()]=col})),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(source)}},ColumnModel.prototype.processSecondaryColumnDefinitions=function(colDefs){var columnCallback=this.gridOptionsWrapper.getProcessSecondaryColDefFunc(),groupCallback=this.gridOptionsWrapper.getProcessSecondaryColGroupDefFunc();if(columnCallback||groupCallback){var searchForColDefs=function(colDefs2){colDefs2.forEach((function(abstractColDef){if(exists(abstractColDef.children)){var colGroupDef=abstractColDef;groupCallback&&groupCallback(colGroupDef),searchForColDefs(colGroupDef.children)}else{columnCallback&&columnCallback(abstractColDef)}}))};colDefs&&searchForColDefs(colDefs)}},ColumnModel.prototype.updateGridColumns=function(){var _this=this;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.secondaryColumns&&this.secondaryBalancedTree){var hasSameColumns=this.secondaryColumns.every((function(col){return void 0!==_this.gridColumnsMap[col.getColId()]}));this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,hasSameColumns&&this.orderGridColsLike(this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,this.orderGridColsLike(this.lastPrimaryOrder));this.addAutoGroupToGridColumns(),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.setupQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach((function(col){return _this.gridColumnsMap[col.getId()]=col})),this.setAutoHeightActive();var event={type:Events.EVENT_GRID_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event)},ColumnModel.prototype.setAutoHeightActive=function(){if(this.autoHeightActive=this.gridColumns.filter((function(col){return col.isAutoHeight()})).length>0,this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;var rowModelType=this.rowModel.getType();if(!(rowModelType===Constants.ROW_MODEL_TYPE_CLIENT_SIDE||rowModelType===Constants.ROW_MODEL_TYPE_SERVER_SIDE)){doOnce((function(){return console.warn("AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.")}),"autoHeightActive.wrongRowModel")}}},ColumnModel.prototype.orderGridColsLike=function(colsOrder){if(!missing(colsOrder)){var lastOrderMapped=convertToMap(colsOrder.map((function(col,index){return[col,index]}))),noColsFound=!0;if(this.gridColumns.forEach((function(col){lastOrderMapped.has(col)&&(noColsFound=!1)})),!noColsFound){var gridColsMap=convertToMap(this.gridColumns.map((function(col){return[col,!0]}))),oldColsOrdered=colsOrder.filter((function(col){return gridColsMap.has(col)})),oldColsMap=convertToMap(oldColsOrdered.map((function(col){return[col,!0]}))),newColsOrdered=this.gridColumns.filter((function(col){return!oldColsMap.has(col)})),newGridColumns=oldColsOrdered.slice();newColsOrdered.forEach((function(newCol){var parent=newCol.getOriginalParent();if(parent){for(var siblings=[];!siblings.length&&parent;){parent.getLeafColumns().forEach((function(leafCol){var presentInNewGriColumns=newGridColumns.indexOf(leafCol)>=0,noYetInSiblings=siblings.indexOf(leafCol)<0;presentInNewGriColumns&&noYetInSiblings&&siblings.push(leafCol)})),parent=parent.getOriginalParent()}if(siblings.length){var indexes=siblings.map((function(col){return newGridColumns.indexOf(col)})),lastIndex=Math.max.apply(Math,__spread(indexes));insertIntoArray(newGridColumns,newCol,lastIndex+1)}else newGridColumns.push(newCol)}else newGridColumns.push(newCol)})),this.gridColumns=newGridColumns}}},ColumnModel.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},ColumnModel.prototype.setupQuickFilterColumns=function(){this.groupAutoColumns?this.columnsForQuickFilter=(this.primaryColumns||[]).concat(this.groupAutoColumns):this.primaryColumns&&(this.columnsForQuickFilter=this.primaryColumns)},ColumnModel.prototype.placeLockedColumns=function(cols){var left=[],normal=[],right=[];return cols.forEach((function(col){var position=col.getColDef().lockPosition;"right"===position?right.push(col):"left"===position||!0===position?left.push(col):normal.push(col)})),__spread(left,normal,right)},ColumnModel.prototype.addAutoGroupToGridColumns=function(){if(this.createGroupAutoColumnsIfNeeded(),!missing(this.groupAutoColumns)){this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var autoColBalancedTree=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.gridBalancedTree=autoColBalancedTree.concat(this.gridBalancedTree)}},ColumnModel.prototype.clearDisplayedAndViewportColumns=function(){this.displayedTreeLeft=[],this.displayedTreeRight=[],this.displayedTreeCentre=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[]},ColumnModel.prototype.updateGroupsAndDisplayedColumns=function(source){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(source),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();var event={type:Events.EVENT_DISPLAYED_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event)},ColumnModel.prototype.deriveDisplayedColumns=function(source){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(source),this.displayedAutoHeightCols=this.displayedColumns.filter((function(col){return col.isAutoHeight()}))},ColumnModel.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},ColumnModel.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},ColumnModel.prototype.joinDisplayedColumns=function(){this.gridOptionsWrapper.isEnableRtl()?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},ColumnModel.prototype.setLeftValues=function(source){this.setLeftValuesOfColumns(source),this.setLeftValuesOfGroups()},ColumnModel.prototype.setLeftValuesOfColumns=function(source){var _this=this;if(this.primaryColumns){var allColumns=this.primaryColumns.slice(0),doingRtl=this.gridOptionsWrapper.isEnableRtl();[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach((function(columns){if(doingRtl){var left_1=_this.getWidthOfColsInList(columns);columns.forEach((function(column){left_1-=column.getActualWidth(),column.setLeft(left_1,source)}))}else{var left_2=0;columns.forEach((function(column){column.setLeft(left_2,source),left_2+=column.getActualWidth()}))}removeAllFromArray(allColumns,columns)})),allColumns.forEach((function(column){column.setLeft(null,source)}))}},ColumnModel.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach((function(columns){columns.forEach((function(column){column instanceof ColumnGroup&&column.checkLeft()}))}))},ColumnModel.prototype.derivedDisplayedColumnsFromDisplayedTree=function(tree,columns){columns.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(tree,(function(child){child instanceof Column&&columns.push(child)}))},ColumnModel.prototype.extractViewportColumns=function(){this.suppressColumnVirtualisation?this.viewportColumnsCenter=this.displayedColumnsCenter:this.viewportColumnsCenter=this.filterOutColumnsWithinViewport(),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},ColumnModel.prototype.getVirtualHeaderGroupRow=function(type,dept){var result;switch(type){case Constants.PINNED_LEFT:result=this.viewportRowLeft[dept];break;case Constants.PINNED_RIGHT:result=this.viewportRowRight[dept];break;default:result=this.viewportRowCenter[dept]}return missing(result)&&(result=[]),result},ColumnModel.prototype.extractViewportRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var virtualColIds={};this.viewportColumns.forEach((function(col){return virtualColIds[col.getId()]=!0}));var testGroup=function(children,result,dept){for(var returnValue=!1,i=0;i<children.length;i++){var child=children[i],addThisItem=!1;if(child instanceof Column)addThisItem=!0===virtualColIds[child.getId()];else{var displayedChildren=child.getDisplayedChildren();displayedChildren&&(addThisItem=testGroup(displayedChildren,result,dept+1))}addThisItem&&(returnValue=!0,result[dept]||(result[dept]=[]),result[dept].push(child))}return returnValue};testGroup(this.displayedTreeLeft,this.viewportRowLeft,0),testGroup(this.displayedTreeRight,this.viewportRowRight,0),testGroup(this.displayedTreeCentre,this.viewportRowCenter,0)},ColumnModel.prototype.extractViewport=function(){this.extractViewportColumns(),this.extractViewportRows()},ColumnModel.prototype.filterOutColumnsWithinViewport=function(){return this.displayedColumnsCenter.filter(this.isColumnInViewport.bind(this))},ColumnModel.prototype.refreshFlexedColumns=function(params){var _this=this;void 0===params&&(params={});var source=params.source?params.source:"flex";if(null!=params.viewportWidth&&(this.flexViewportWidth=params.viewportWidth),!this.flexViewportWidth)return[];var flexAfterDisplayIndex=-1;params.resizingCols&&params.resizingCols.forEach((function(col){var indexOfCol=_this.displayedColumnsCenter.indexOf(col);flexAfterDisplayIndex<indexOfCol&&(flexAfterDisplayIndex=indexOfCol)}));var isColFlex=function(col){var afterResizingCols=_this.displayedColumnsCenter.indexOf(col)>flexAfterDisplayIndex;return col.getFlex()&&afterResizingCols},knownWidthColumns=this.displayedColumnsCenter.filter((function(col){return!isColFlex(col)})),flexingColumns=this.displayedColumnsCenter.filter((function(col){return isColFlex(col)})),changedColumns=[];if(!flexingColumns.length)return[];var spaceForFlexingColumns,flexingColumnSizes=[];outer:for(;;){var totalFlex=flexingColumns.reduce((function(count,col){return count+col.getFlex()}),0);spaceForFlexingColumns=this.flexViewportWidth-this.getWidthOfColsInList(knownWidthColumns);for(var i=0;i<flexingColumns.length;i++){var col=flexingColumns[i],widthByFlexRule=spaceForFlexingColumns*col.getFlex()/totalFlex,constrainedWidth=0,minWidth=col.getMinWidth(),maxWidth=col.getMaxWidth();if(exists(minWidth)&&widthByFlexRule<minWidth?constrainedWidth=minWidth:exists(maxWidth)&&widthByFlexRule>maxWidth&&(constrainedWidth=maxWidth),constrainedWidth){col.setActualWidth(constrainedWidth,source),removeFromArray(flexingColumns,col),changedColumns.push(col),knownWidthColumns.push(col);continue outer}flexingColumnSizes[i]=Math.round(widthByFlexRule)}break}var remainingSpace=spaceForFlexingColumns;return flexingColumns.forEach((function(col,i){col.setActualWidth(Math.min(flexingColumnSizes[i],remainingSpace),source),changedColumns.push(col),remainingSpace-=flexingColumnSizes[i]})),params.skipSetLeft||this.setLeftValues(source),params.updateBodyWidths&&this.updateBodyWidths(),params.fireResizedEvent&&this.fireColumnResizedEvent(changedColumns,!0,source,flexingColumns),this.flexColsCalculatedAtLestOnce||(this.gridOptionsWrapper.isRowModelDefault()&&this.rowModel.resetRowHeights(),this.flexColsCalculatedAtLestOnce=!0),flexingColumns},ColumnModel.prototype.sizeColumnsToFit=function(gridWidth,source,silent){void 0===source&&(source="sizeColumnsToFit");var allDisplayedColumns=this.getAllDisplayedColumns();if(!(gridWidth<=0)&&allDisplayedColumns.length){var colsToSpread=[],colsToNotSpread=[];allDisplayedColumns.forEach((function(column){!0===column.getColDef().suppressSizeToFit?colsToNotSpread.push(column):colsToSpread.push(column)}));var colsToFireEventFor=colsToSpread.slice(0),finishedResizing=!1,moveToNotSpread=function(column){removeFromArray(colsToSpread,column),colsToNotSpread.push(column)};for(colsToSpread.forEach((function(column){return column.resetActualWidth(source)}));!finishedResizing;){finishedResizing=!0;var availablePixels=gridWidth-this.getWidthOfColsInList(colsToNotSpread);if(availablePixels<=0)colsToSpread.forEach((function(column){column.setMinimum(source)}));else for(var scale=availablePixels/this.getWidthOfColsInList(colsToSpread),pixelsForLastCol=availablePixels,i=colsToSpread.length-1;i>=0;i--){var column=colsToSpread[i],minWidth=column.getMinWidth(),maxWidth=column.getMaxWidth(),newWidth=Math.round(column.getActualWidth()*scale);exists(minWidth)&&newWidth<minWidth?(newWidth=minWidth,moveToNotSpread(column),finishedResizing=!1):exists(maxWidth)&&column.isGreaterThanMax(newWidth)?(newWidth=maxWidth,moveToNotSpread(column),finishedResizing=!1):0===i&&(newWidth=pixelsForLastCol),column.setActualWidth(newWidth,source,!0),pixelsForLastCol-=newWidth}}colsToFireEventFor.forEach((function(col){col.fireColumnWidthChangedEvent(source)})),this.setLeftValues(source),this.updateBodyWidths(),silent||this.fireColumnResizedEvent(colsToFireEventFor,!0,source)}},ColumnModel.prototype.buildDisplayedTrees=function(visibleColumns){var leftVisibleColumns=[],rightVisibleColumns=[],centerVisibleColumns=[];visibleColumns.forEach((function(column){switch(column.getPinned()){case"left":leftVisibleColumns.push(column);break;case"right":rightVisibleColumns.push(column);break;default:centerVisibleColumns.push(column)}}));var groupInstanceIdCreator=new GroupInstanceIdCreator;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(leftVisibleColumns,this.gridBalancedTree,groupInstanceIdCreator,Constants.PINNED_LEFT,this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(rightVisibleColumns,this.gridBalancedTree,groupInstanceIdCreator,Constants.PINNED_RIGHT,this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(centerVisibleColumns,this.gridBalancedTree,groupInstanceIdCreator,null,this.displayedTreeCentre),this.updateDisplayedMap()},ColumnModel.prototype.updateDisplayedMap=function(){var _this=this;this.displayedColumnsAndGroupsMap={};var func=function(child){_this.displayedColumnsAndGroupsMap[child.getUniqueId()]=child};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,func),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,func),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,func)},ColumnModel.prototype.isDisplayed=function(item){return this.displayedColumnsAndGroupsMap[item.getUniqueId()]===item},ColumnModel.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var allColumnGroups=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(allColumnGroups,(function(child){child instanceof ColumnGroup&&child.calculateDisplayedColumns()}))},ColumnModel.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},ColumnModel.prototype.createGroupAutoColumnsIfNeeded=function(){if(this.autoGroupsNeedBuilding){this.autoGroupsNeedBuilding=!1;var groupFullWidthRow=this.gridOptionsWrapper.isGroupUseEntireRow(this.pivotMode),suppressAutoColumn=this.pivotMode?this.gridOptionsWrapper.isPivotSuppressAutoColumn():this.gridOptionsWrapper.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.usingTreeData)&&!suppressAutoColumn&&!groupFullWidthRow){var existingCols=this.groupAutoColumns||[],newAutoGroupCols=this.autoGroupColService.createAutoGroupColumns(existingCols,this.rowGroupColumns);(!this.autoColsEqual(newAutoGroupCols,this.groupAutoColumns)||this.forceRecreateAutoGroups)&&(this.groupAutoColumns=newAutoGroupCols)}else this.groupAutoColumns=null}},ColumnModel.prototype.autoColsEqual=function(colsA,colsB){return areEqual(colsA,colsB,(function(a,b){return a.getColId()===b.getColId()}))},ColumnModel.prototype.getWidthOfColsInList=function(columnList){return columnList.reduce((function(width,col){return width+col.getActualWidth()}),0)},ColumnModel.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},ColumnModel.prototype.hasFloatingFilters=function(){return!!this.gridColumns&&this.gridColumns.some((function(col){return col.getColDef().floatingFilter}))},ColumnModel.prototype.getFirstDisplayedColumn=function(){var isRtl=this.gridOptionsWrapper.isEnableRtl(),queryOrder=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];isRtl&&queryOrder.reverse();for(var i=0;i<queryOrder.length;i++){var container=this[queryOrder[i]]();if(container.length)return isRtl?last(container):container[0]}return null},__decorate$5([Autowired("expressionService")],ColumnModel.prototype,"expressionService",void 0),__decorate$5([Autowired("columnFactory")],ColumnModel.prototype,"columnFactory",void 0),__decorate$5([Autowired("displayedGroupCreator")],ColumnModel.prototype,"displayedGroupCreator",void 0),__decorate$5([Autowired("ctrlsService")],ColumnModel.prototype,"ctrlsService",void 0),__decorate$5([Autowired("autoWidthCalculator")],ColumnModel.prototype,"autoWidthCalculator",void 0),__decorate$5([Autowired("columnUtils")],ColumnModel.prototype,"columnUtils",void 0),__decorate$5([Autowired("columnAnimationService")],ColumnModel.prototype,"columnAnimationService",void 0),__decorate$5([Autowired("autoGroupColService")],ColumnModel.prototype,"autoGroupColService",void 0),__decorate$5([Optional("aggFuncService")],ColumnModel.prototype,"aggFuncService",void 0),__decorate$5([Optional("valueCache")],ColumnModel.prototype,"valueCache",void 0),__decorate$5([Optional("animationFrameService")],ColumnModel.prototype,"animationFrameService",void 0),__decorate$5([Autowired("rowModel")],ColumnModel.prototype,"rowModel",void 0),__decorate$5([Autowired("columnApi")],ColumnModel.prototype,"columnApi",void 0),__decorate$5([Autowired("gridApi")],ColumnModel.prototype,"gridApi",void 0),__decorate$5([Autowired("sortController")],ColumnModel.prototype,"sortController",void 0),__decorate$5([Autowired("columnDefFactory")],ColumnModel.prototype,"columnDefFactory",void 0),__decorate$5([PostConstruct],ColumnModel.prototype,"init",null),__decorate$5([__param$2(0,Qualifier("loggerFactory"))],ColumnModel.prototype,"setBeans",null),ColumnModel=__decorate$5([Bean("columnModel")],ColumnModel)}(BeanStub),__extends$2=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$6=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnUtils=function(_super){function ColumnUtils(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2(ColumnUtils,_super),ColumnUtils.prototype.calculateColMinWidth=function(colDef){return null!=colDef.minWidth?colDef.minWidth:this.gridOptionsWrapper.getMinColWidth()},ColumnUtils.prototype.calculateColMaxWidth=function(colDef){return null!=colDef.maxWidth?colDef.maxWidth:this.gridOptionsWrapper.getMaxColWidth()||Number.MAX_SAFE_INTEGER},ColumnUtils.prototype.calculateColInitialWidth=function(colDef){var width,minColWidth=this.calculateColMinWidth(colDef),maxColWidth=this.calculateColMaxWidth(colDef),colDefWidth=attrToNumber(colDef.width),colDefInitialWidth=attrToNumber(colDef.initialWidth);return width=null!=colDefWidth?colDefWidth:null!=colDefInitialWidth?colDefInitialWidth:this.gridOptionsWrapper.getColWidth(),Math.max(Math.min(width,maxColWidth),minColWidth)},ColumnUtils.prototype.getOriginalPathForColumn=function(column,originalBalancedTree){var result=[],found=!1,recursePath=function(balancedColumnTree,dept){for(var i=0;i<balancedColumnTree.length;i++){if(found)return;var node=balancedColumnTree[i];if(node instanceof ProvidedColumnGroup)recursePath(node.getChildren(),dept+1),result[dept]=node;else node===column&&(found=!0)}};return recursePath(originalBalancedTree,0),found?result:null},ColumnUtils.prototype.depthFirstOriginalTreeSearch=function(parent,tree,callback){var _this=this;tree&&tree.forEach((function(child){child instanceof ProvidedColumnGroup&&_this.depthFirstOriginalTreeSearch(child,child.getChildren(),callback),callback(child,parent)}))},ColumnUtils.prototype.depthFirstAllColumnTreeSearch=function(tree,callback){var _this=this;tree&&tree.forEach((function(child){child instanceof ColumnGroup&&_this.depthFirstAllColumnTreeSearch(child.getChildren(),callback),callback(child)}))},ColumnUtils.prototype.depthFirstDisplayedColumnTreeSearch=function(tree,callback){var _this=this;tree&&tree.forEach((function(child){child instanceof ColumnGroup&&_this.depthFirstDisplayedColumnTreeSearch(child.getDisplayedChildren(),callback),callback(child)}))},ColumnUtils=__decorate$6([Bean("columnUtils")],ColumnUtils)}(BeanStub),__extends$3=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$7=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DisplayedGroupCreator=function(_super){function DisplayedGroupCreator(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$3(DisplayedGroupCreator,_super),DisplayedGroupCreator.prototype.createDisplayedGroups=function(sortedVisibleColumns,balancedColumnTree,groupInstanceIdCreator,pinned,oldDisplayedGroups){var previousRealPath,previousOriginalPath,_this=this,result=[],oldColumnsMapped=this.mapOldGroupsById(oldDisplayedGroups);return sortedVisibleColumns.forEach((function(currentColumn){for(var currentOriginalPath=_this.getOriginalPathForColumn(balancedColumnTree,currentColumn),currentRealPath=[],firstColumn=!previousOriginalPath,i=0;i<currentOriginalPath.length;i++)if(firstColumn||currentOriginalPath[i]!==previousOriginalPath[i]){var newGroup=_this.createColumnGroup(currentOriginalPath[i],groupInstanceIdCreator,oldColumnsMapped,pinned);currentRealPath[i]=newGroup,0==i?result.push(newGroup):currentRealPath[i-1].addChild(newGroup)}else currentRealPath[i]=previousRealPath[i];0===currentRealPath.length?result.push(currentColumn):last(currentRealPath).addChild(currentColumn);previousRealPath=currentRealPath,previousOriginalPath=currentOriginalPath})),this.setupParentsIntoColumns(result,null),result},DisplayedGroupCreator.prototype.createColumnGroup=function(providedGroup,groupInstanceIdCreator,oldColumnsMapped,pinned){var groupId=providedGroup.getGroupId(),instanceId=groupInstanceIdCreator.getInstanceIdForKey(groupId),columnGroup=oldColumnsMapped[ColumnGroup.createUniqueId(groupId,instanceId)];return columnGroup&&columnGroup.getProvidedColumnGroup()!==providedGroup&&(columnGroup=null),exists(columnGroup)?columnGroup.reset():(columnGroup=new ColumnGroup(providedGroup,groupId,instanceId,pinned),this.context.createBean(columnGroup)),columnGroup},DisplayedGroupCreator.prototype.mapOldGroupsById=function(displayedGroups){var result={},recursive=function(columnsOrGroups){columnsOrGroups.forEach((function(columnOrGroup){if(columnOrGroup instanceof ColumnGroup){var columnGroup=columnOrGroup;result[columnOrGroup.getUniqueId()]=columnGroup,recursive(columnGroup.getChildren())}}))};return displayedGroups&&recursive(displayedGroups),result},DisplayedGroupCreator.prototype.setupParentsIntoColumns=function(columnsOrGroups,parent){var _this=this;columnsOrGroups.forEach((function(columnsOrGroup){if(columnsOrGroup.setParent(parent),columnsOrGroup instanceof ColumnGroup){var columnGroup=columnsOrGroup;_this.setupParentsIntoColumns(columnGroup.getChildren(),columnGroup)}}))},DisplayedGroupCreator.prototype.getOriginalPathForColumn=function(balancedColumnTree,column){var result=[],found=!1,recursePath=function(columnTree,dept){for(var i=0;i<columnTree.length;i++){if(found)return;var node=columnTree[i];node instanceof ProvidedColumnGroup?(recursePath(node.getChildren(),dept+1),result[dept]=node):node===column&&(found=!0)}};return recursePath(balancedColumnTree,0),found?result:(console.warn("AG Grid: could not get path"),null)},DisplayedGroupCreator=__decorate$7([Bean("displayedGroupCreator")],DisplayedGroupCreator)}(BeanStub),__read$1=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$1=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$1(arguments[i]));return ar},PropertyKeys=function(){function PropertyKeys(){}return PropertyKeys.STRING_PROPERTIES=["sortingOrder","rowClass","rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType"],PropertyKeys.OBJECT_PROPERTIES=["components","frameworkComponents","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultExportParams","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","colResizeDefault","statusBar","sideBar","chartThemeOverrides","customChartThemes"],PropertyKeys.ARRAY_PROPERTIES=["alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes"],PropertyKeys.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","colWidth","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","minColWidth","maxColWidth","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","scrollbarWidth","batchUpdateWaitMillis","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"],PropertyKeys.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellSelection","suppressCellFocus","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","angularCompileRows","angularCompileFilters","groupSuppressAutoColumn","groupSelectsChildren","groupIncludeFooter","groupIncludeTotalFooter","groupUseEntireRow","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","deprecatedEmbedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupMultiAutoColumn","pagination","stopEditingWhenGridLosesFocus","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","deltaRowDataMode","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDownAfterEdit","enterMovesDown","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressEnterpriseResetOnNewColumns","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","serverSideSortingAlwaysResets","suppressSetColumnStateEvents","suppressColumnStateEvents","enableCharts","deltaColumnMode","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","immutableData","immutableColumns","pivotSuppressAutoColumn","suppressExpandablePivotGroups","applyColumnDefOrder","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","reactUi","suppressReactUi","readOnlyEdit","suppressRowVirtualisation","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges"],PropertyKeys.FUNCTION_PROPERTIES=["localeTextFunc","getLocaleText","groupRowInnerRenderer","groupRowInnerRendererFramework","groupRowRenderer","groupRowRendererFramework","isExternalFilterPresent","getRowHeight","doesExternalFilterPass","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","groupRowAggNodes","getGroupRowAgg","getRowNodeId","isFullWidthCell","isFullWidthRow","fullWidthCellRenderer","fullWidthCellRendererFramework","processSecondaryColDef","processSecondaryColGroupDef","getBusinessKeyForNode","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","loadingCellRenderer","loadingCellRendererFramework","loadingOverlayComponent","loadingOverlayComponentFramework","noRowsOverlayComponent","noRowsOverlayComponentFramework","detailCellRenderer","detailCellRendererFramework","isRowMaster","isRowSelectable","postSort","postSortRows","processHeaderForClipboard","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","suppressKeyboardEvent","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","defaultGroupSortComparator","defaultGroupOrderComparator","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","groupAggFiltering"],PropertyKeys.ALL_PROPERTIES=__spread$1(PropertyKeys.ARRAY_PROPERTIES,PropertyKeys.OBJECT_PROPERTIES,PropertyKeys.STRING_PROPERTIES,PropertyKeys.NUMBER_PROPERTIES,PropertyKeys.FUNCTION_PROPERTIES,PropertyKeys.BOOLEAN_PROPERTIES),PropertyKeys.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],PropertyKeys}(),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},__read$2=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$2=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$2(arguments[i]));return ar},ComponentUtil=function(){function ComponentUtil(){}return ComponentUtil.getEventCallbacks=function(){return ComponentUtil.EVENT_CALLBACKS||(ComponentUtil.EVENT_CALLBACKS=ComponentUtil.EVENTS.map((function(event){return ComponentUtil.getCallbackForEvent(event)}))),ComponentUtil.EVENT_CALLBACKS},ComponentUtil.copyAttributesToGridOptions=function(gridOptions,component,skipEventDeprecationCheck){"object"!=typeof gridOptions&&(gridOptions={});var pGridOptions=gridOptions,keyExists=function(key){return void 0!==component[key]};return keyExists("groupAggFiltering")&&"function"!=typeof component.groupAggFiltering&&(pGridOptions.groupAggFiltering=ComponentUtil.toBoolean(component.groupAggFiltering),delete component.groupAggFiltering),__spread$2(ComponentUtil.ARRAY_PROPERTIES,ComponentUtil.STRING_PROPERTIES,ComponentUtil.OBJECT_PROPERTIES,ComponentUtil.FUNCTION_PROPERTIES,ComponentUtil.getEventCallbacks()).filter(keyExists).forEach((function(key){return pGridOptions[key]=component[key]})),ComponentUtil.BOOLEAN_PROPERTIES.filter(keyExists).forEach((function(key){return pGridOptions[key]=ComponentUtil.toBoolean(component[key])})),ComponentUtil.NUMBER_PROPERTIES.filter(keyExists).forEach((function(key){return pGridOptions[key]=ComponentUtil.toNumber(component[key])})),gridOptions},ComponentUtil.getCallbackForEvent=function(eventName){return!eventName||eventName.length<2?eventName:"on"+eventName[0].toUpperCase()+eventName.substr(1)},ComponentUtil.processOnChange=function(changes,gridOptions,api,columnApi){if(changes){var changesToApply=__assign({},changes),pGridOptions=gridOptions,keyExists=function(key){return changesToApply[key]};keyExists("groupAggFiltering")&&("function"==typeof changesToApply.groupAggFiltering?pGridOptions.groupAggFiltering=changesToApply.groupAggFiltering:pGridOptions.groupAggFiltering=ComponentUtil.toBoolean(changesToApply.groupAggFiltering),delete changesToApply.groupAggFiltering),changesToApply.rowClass&&(api.setRowClass(changesToApply.rowClass.currentValue),delete changesToApply.rowClass),__spread$2(ComponentUtil.ARRAY_PROPERTIES,ComponentUtil.OBJECT_PROPERTIES,ComponentUtil.STRING_PROPERTIES,ComponentUtil.getEventCallbacks()).filter(keyExists).forEach((function(key){return pGridOptions[key]=changesToApply[key].currentValue})),ComponentUtil.BOOLEAN_PROPERTIES.filter(keyExists).forEach((function(key){return pGridOptions[key]=ComponentUtil.toBoolean(changesToApply[key].currentValue)})),ComponentUtil.NUMBER_PROPERTIES.filter(keyExists).forEach((function(key){return pGridOptions[key]=ComponentUtil.toNumber(changesToApply[key].currentValue)})),changesToApply.enableCellTextSelection&&(api.setEnableCellTextSelection(ComponentUtil.toBoolean(changesToApply.enableCellTextSelection.currentValue)),delete changesToApply.enableCellTextSelection),changesToApply.quickFilterText&&(api.setQuickFilter(changesToApply.quickFilterText.currentValue),delete changesToApply.quickFilterText),changesToApply.autoGroupColumnDef&&(api.setAutoGroupColumnDef(changesToApply.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete changesToApply.autoGroupColumnDef),changesToApply.columnDefs&&(api.setColumnDefs(changesToApply.columnDefs.currentValue,"gridOptionsChanged"),delete changesToApply.columnDefs),changesToApply.defaultColDef&&(api.setDefaultColDef(changesToApply.defaultColDef.currentValue,"gridOptionsChanged"),delete changesToApply.defaultColDef),changesToApply.paginationPageSize&&(api.paginationSetPageSize(ComponentUtil.toNumber(changesToApply.paginationPageSize.currentValue)),delete changesToApply.paginationPageSize),changesToApply.pivotMode&&(columnApi.setPivotMode(ComponentUtil.toBoolean(changesToApply.pivotMode.currentValue)),delete changesToApply.pivotMode),changesToApply.groupRemoveSingleChildren&&(api.setGroupRemoveSingleChildren(ComponentUtil.toBoolean(changesToApply.groupRemoveSingleChildren.currentValue)),delete changesToApply.groupRemoveSingleChildren),changesToApply.suppressRowDrag&&(api.setSuppressRowDrag(ComponentUtil.toBoolean(changesToApply.suppressRowDrag.currentValue)),delete changesToApply.suppressRowDrag),changesToApply.suppressMoveWhenRowDragging&&(api.setSuppressMoveWhenRowDragging(ComponentUtil.toBoolean(changesToApply.suppressMoveWhenRowDragging.currentValue)),delete changesToApply.suppressMoveWhenRowDragging),changesToApply.suppressRowClickSelection&&(api.setSuppressRowClickSelection(ComponentUtil.toBoolean(changesToApply.suppressRowClickSelection.currentValue)),delete changesToApply.suppressRowClickSelection),changesToApply.suppressClipboardPaste&&(api.setSuppressClipboardPaste(ComponentUtil.toBoolean(changesToApply.suppressClipboardPaste.currentValue)),delete changesToApply.suppressClipboardPaste),changesToApply.headerHeight&&(api.setHeaderHeight(ComponentUtil.toNumber(changesToApply.headerHeight.currentValue)),delete changesToApply.headerHeight);var dynamicApi=api;Object.keys(changesToApply).forEach((function(property){var setterName="set"+property.charAt(0).toUpperCase()+property.substring(1);dynamicApi[setterName]&&dynamicApi[setterName](changes[property].currentValue)}));var event={type:Events.EVENT_COMPONENT_STATE_CHANGED,api:gridOptions.api,columnApi:gridOptions.columnApi};iterateObject(changes,(function(key,value){event[key]=value})),api.dispatchEvent(event)}},ComponentUtil.toBoolean=function(value){return"boolean"==typeof value?value:"string"==typeof value&&("TRUE"===value.toUpperCase()||""==value)},ComponentUtil.toNumber=function(value){return"number"==typeof value?value:"string"==typeof value?Number(value):void 0},ComponentUtil.EVENTS=[],ComponentUtil.PUBLIC_EVENTS=[],ComponentUtil.EXCLUDED_INTERNAL_EVENTS=[],ComponentUtil.STRING_PROPERTIES=PropertyKeys.STRING_PROPERTIES,ComponentUtil.OBJECT_PROPERTIES=PropertyKeys.OBJECT_PROPERTIES,ComponentUtil.ARRAY_PROPERTIES=PropertyKeys.ARRAY_PROPERTIES,ComponentUtil.NUMBER_PROPERTIES=PropertyKeys.NUMBER_PROPERTIES,ComponentUtil.BOOLEAN_PROPERTIES=PropertyKeys.BOOLEAN_PROPERTIES,ComponentUtil.FUNCTION_PROPERTIES=PropertyKeys.FUNCTION_PROPERTIES,ComponentUtil.ALL_PROPERTIES=PropertyKeys.ALL_PROPERTIES,ComponentUtil}();ComponentUtil.EVENTS=values(Events),ComponentUtil.EXCLUDED_INTERNAL_EVENTS=[Events.EVENT_SCROLLBAR_WIDTH_CHANGED,Events.EVENT_CHECKBOX_CHANGED,Events.EVENT_HEIGHT_SCALE_CHANGED,Events.EVENT_BODY_HEIGHT_CHANGED,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,Events.EVENT_SCROLL_VISIBILITY_CHANGED,Events.EVENT_COLUMN_HOVER_CHANGED,Events.EVENT_FLASH_CELLS,Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,Events.EVENT_DISPLAYED_ROWS_CHANGED,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,Events.EVENT_POPUP_TO_FRONT,Events.EVENT_KEYBOARD_FOCUS,Events.EVENT_MOUSE_FOCUS,Events.EVENT_STORE_UPDATED,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END,Events.EVENT_FILL_START,Events.EVENT_FILL_END,Events.EVENT_FULL_WIDTH_ROW_FOCUSED],ComponentUtil.PUBLIC_EVENTS=ComponentUtil.EVENTS.filter((function(e){return!includes(ComponentUtil.EXCLUDED_INTERNAL_EVENTS,e)}));var __extends$4=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$8=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgStackComponentsRegistry=function(_super){function AgStackComponentsRegistry(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.componentsMappedByName={},_this}return __extends$4(AgStackComponentsRegistry,_super),AgStackComponentsRegistry.prototype.setupComponents=function(components){var _this=this;components&&components.forEach((function(componentMeta){return _this.addComponent(componentMeta)}))},AgStackComponentsRegistry.prototype.addComponent=function(componentMeta){var classUpperCase=componentMeta.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[classUpperCase]=componentMeta.componentClass},AgStackComponentsRegistry.prototype.getComponentClass=function(htmlTag){return this.componentsMappedByName[htmlTag]},AgStackComponentsRegistry=__decorate$8([Bean("agStackComponentsRegistry")],AgStackComponentsRegistry)}(BeanStub),__read$3=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$3=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$3(arguments[i]));return ar},ColDefUtil=function(){function ColDefUtil(){}return ColDefUtil.STRING_PROPERTIES=["headerName","columnGroupShow","headerClass","toolPanelClass","headerValueGetter","pivotKeys","groupId","colId","sort","initialSort","field","type","tooltipComponent","tooltipField","headerTooltip","cellClass","showRowGroup","filter","initialAggFunc","defaultAggFunc","aggFunc","pinned","initialPinned","chartDataType","cellEditorPopupPosition"],ColDefUtil.OBJECT_PROPERTIES=["headerGroupComponent","headerGroupComponentFramework","headerGroupComponentParams","cellStyle","cellRenderer","cellRendererParams","cellRendererFramework","cellEditor","cellEditorFramework","cellEditorParams","pinnedRowCellRendererFramework","pinnedRowCellRendererParams","filterFramework","filterParams","pivotValueColumn","headerComponent","headerComponentFramework","headerComponentParams","floatingFilterComponent","floatingFilterComponentParams","floatingFilterComponentFramework","floatingFilterFramework","tooltipComponent","tooltipComponentParams","tooltipComponentFramework","refData","columnsMenuParams"],ColDefUtil.ARRAY_PROPERTIES=["children","sortingOrder","allowedAggFuncs","menuTabs","pivotTotalColumnIds","cellClassRules","icons"],ColDefUtil.NUMBER_PROPERTIES=["sortedAt","sortIndex","initialSortIndex","flex","initialFlex","width","initialWidth","minWidth","maxWidth","rowGroupIndex","initialRowGroupIndex","pivotIndex","initialPivotIndex"],ColDefUtil.BOOLEAN_PROPERTIES=["suppressCellFlash","suppressColumnsToolPanel","suppressFiltersToolPanel","openByDefault","marryChildren","hide","initialHide","rowGroup","initialRowGroup","pivot","initialPivot","checkboxSelection","headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","suppressMenu","suppressMovable","lockPosition","lockVisible","lockPinned","unSortIcon","suppressSizeToFit","suppressAutoSize","enableRowGroup","enablePivot","enableValue","editable","suppressPaste","suppressNavigable","enableCellChangeFlash","rowDrag","dndSource","autoHeight","wrapText","sortable","resizable","singleClickEdit","floatingFilter","cellEditorPopup","suppressFillHandle"],ColDefUtil.FUNCTION_PROPERTIES=["dndSourceOnRowDrag","valueGetter","valueSetter","filterValueGetter","keyCreator","pinnedRowCellRenderer","valueFormatter","pinnedRowValueFormatter","valueParser","comparator","equals","pivotComparator","suppressKeyboardEvent","suppressHeaderKeyboardEvent","colSpan","rowSpan","getQuickFilterText","newValueHandler","onCellValueChanged","onCellClicked","onCellDoubleClicked","onCellContextMenu","rowDragText","tooltipValueGetter","tooltipComponent","tooltipComponentFramework","cellRendererSelector","cellEditorSelector"],ColDefUtil.ALL_PROPERTIES=__spread$3(ColDefUtil.ARRAY_PROPERTIES,ColDefUtil.OBJECT_PROPERTIES,ColDefUtil.STRING_PROPERTIES,ColDefUtil.NUMBER_PROPERTIES,ColDefUtil.FUNCTION_PROPERTIES,ColDefUtil.BOOLEAN_PROPERTIES),ColDefUtil.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],ColDefUtil}(),__read$4=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},Color=function(){function Color(r,g,b,a){void 0===a&&(a=1),this.r=Math.min(1,Math.max(0,r||0)),this.g=Math.min(1,Math.max(0,g||0)),this.b=Math.min(1,Math.max(0,b||0)),this.a=Math.min(1,Math.max(0,a||0))}return Color.fromString=function(str){if(str.indexOf("#")>=0)return Color.fromHexString(str);var hex=Color.nameToHex[str];if(hex)return Color.fromHexString(hex);if(str.indexOf("rgb")>=0)return Color.fromRgbaString(str);throw new Error("Invalid color string: '"+str+"'")},Color.parseHex=function(input){var parts;switch((input=input.replace(/ /g,"").slice(1)).length){case 6:case 8:parts=[];for(var i=0;i<input.length;i+=2)parts.push(parseInt(""+input[i]+input[i+1],16));break;case 3:case 4:parts=input.split("").map((function(p){return parseInt(p,16)})).map((function(p){return p+16*p}))}if(parts.length>=3&&parts.every((function(p){return p>=0})))return 3===parts.length&&parts.push(255),parts},Color.fromHexString=function(str){var values=Color.parseHex(str);if(values){var _a=__read$4(values,4);return new Color(_a[0]/255,_a[1]/255,_a[2]/255,_a[3]/255)}throw new Error("Malformed hexadecimal color string: '"+str+"'")},Color.stringToRgba=function(str){for(var _a=__read$4([NaN,NaN],2),po=_a[0],pc=_a[1],i=0;i<str.length;i++){var c=str[i];if(po||"("!==c){if(")"===c){pc=i;break}}else po=i}var contents=po&&pc&&str.substring(po+1,pc);if(contents){var parts=contents.split(","),rgba=[];for(i=0;i<parts.length;i++){var part=parts[i],value=parseFloat(part);if(isNaN(value))return;part.indexOf("%")>=0?(value=Math.max(0,Math.min(100,value)),value/=100):3===i?value=Math.max(0,Math.min(1,value)):(value=Math.max(0,Math.min(255,value)),value/=255),rgba.push(value)}return rgba}},Color.fromRgbaString=function(str){var rgba=Color.stringToRgba(str);if(rgba){if(3===rgba.length)return new Color(rgba[0],rgba[1],rgba[2]);if(4===rgba.length)return new Color(rgba[0],rgba[1],rgba[2],rgba[3])}throw new Error("Malformed rgb/rgba color string: '"+str+"'")},Color.fromArray=function(arr){if(4===arr.length)return new Color(arr[0],arr[1],arr[2],arr[3]);if(3===arr.length)return new Color(arr[0],arr[1],arr[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},Color.fromHSB=function(h,s,b,alpha){void 0===alpha&&(alpha=1);var rgb=Color.HSBtoRGB(h,s,b);return new Color(rgb[0],rgb[1],rgb[2],alpha)},Color.padHex=function(str){return 1===str.length?"0"+str:str},Color.prototype.toHexString=function(){var hex="#"+Color.padHex(Math.round(255*this.r).toString(16))+Color.padHex(Math.round(255*this.g).toString(16))+Color.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(hex+=Color.padHex(Math.round(255*this.a).toString(16))),hex},Color.prototype.toRgbaString=function(fractionDigits){void 0===fractionDigits&&(fractionDigits=3);var components=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],k=Math.pow(10,fractionDigits);return 1!==this.a?(components.push(Math.round(this.a*k)/k),"rgba("+components.join(", ")+")"):"rgb("+components.join(", ")+")"},Color.prototype.toString=function(){return 1===this.a?this.toHexString():this.toRgbaString()},Color.prototype.toHSB=function(){return Color.RGBtoHSB(this.r,this.g,this.b)},Color.RGBtoHSB=function(r,g,b){var min=Math.min(r,g,b),max=Math.max(r,g,b),H=NaN;if(min!==max){var delta=max-min,rc=(max-r)/delta,gc=(max-g)/delta,bc=(max-b)/delta;H=r===max?bc-gc:g===max?2+rc-bc:4+gc-rc,(H/=6)<0&&(H+=1)}return[360*H,0!==max?(max-min)/max:0,max]},Color.HSBtoRGB=function(H,S,B){isNaN(H)&&(H=0),H=(H%360+360)%360/360;var r=0,g=0,b=0;if(0===S)r=g=b=B;else{var h=6*(H-Math.floor(H)),f=h-Math.floor(h),p=B*(1-S),q=B*(1-S*f),t=B*(1-S*(1-f));switch(h|0){case 0:r=B,g=t,b=p;break;case 1:r=q,g=B,b=p;break;case 2:r=p,g=B,b=t;break;case 3:r=p,g=q,b=B;break;case 4:r=t,g=p,b=B;break;case 5:r=B,g=p,b=q}}return[r,g,b]},Color.prototype.derive=function(hueShift,saturationFactor,brightnessFactor,opacityFactor){var hsb=Color.RGBtoHSB(this.r,this.g,this.b),b=hsb[2];0==b&&brightnessFactor>1&&(b=.05);var h=((hsb[0]+hueShift)%360+360)%360,s=Math.max(Math.min(hsb[1]*saturationFactor,1),0);b=Math.max(Math.min(b*brightnessFactor,1),0);var a=Math.max(Math.min(this.a*opacityFactor,1),0),rgba=Color.HSBtoRGB(h,s,b);return rgba.push(a),Color.fromArray(rgba)},Color.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},Color.prototype.darker=function(){return this.derive(0,1,.7,1)},Color.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),Color}();function stringToArray(strData,delimiter){void 0===delimiter&&(delimiter=",");var data=[],isNewline=function(char){return"\r"===char||"\n"===char},insideQuotedField=!1;if(""===strData)return[[""]];for(var out_row_1,out_column_1,out_position_1,_loop_1=function(row,column,position){var previousChar=strData[position-1],currentChar=strData[position],nextChar=strData[position+1],ensureDataExists=function(){data[row]||(data[row]=[]),data[row][column]||(data[row][column]="")};if(ensureDataExists(),'"'===currentChar){if(insideQuotedField)return'"'===nextChar?(data[row][column]+='"',position++):insideQuotedField=!1,out_row_1=row,out_column_1=column,out_position_1=position,"continue";if(void 0===previousChar||previousChar===delimiter||isNewline(previousChar))return insideQuotedField=!0,out_row_1=row,out_column_1=column,out_position_1=position,"continue"}if(!insideQuotedField){if(currentChar===delimiter)return column++,ensureDataExists(),out_row_1=row,out_column_1=column,out_position_1=position,"continue";if(isNewline(currentChar))return column=0,row++,ensureDataExists(),"\r"===currentChar&&"\n"===nextChar&&position++,out_row_1=row,out_column_1=column,out_position_1=position,"continue"}data[row][column]+=currentChar,out_row_1=row,out_column_1=column,out_position_1=position},row=0,column=0,position=0;position<strData.length;position++)_loop_1(row,column,position),row=out_row_1,column=out_column_1,position=out_position_1;return data}var isSafari,isIE,isEdge,isChrome,isFirefox,isIOS,invisibleScrollbar,browserScrollbarWidth,CsvUtils=Object.freeze({stringToArray}),__values$1=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};function isBrowserEdge(){return void 0===isEdge&&(isEdge=!function isBrowserIE(){return void 0===isIE&&(isIE=!!document.documentMode),isIE}()&&!!window.StyleMedia),isEdge}function isBrowserSafari(){return void 0===isSafari&&(isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),isSafari}function isBrowserChrome(){if(void 0===isChrome){var win=window;isChrome=!!win.chrome&&(!!win.chrome.webstore||!!win.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return isChrome}function isBrowserFirefox(){if(void 0===isFirefox){var win=window;isFirefox=void 0!==win.InstallTrigger}return isFirefox}function isIOSUserAgent(){return void 0===isIOS&&(isIOS=(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream),isIOS}function getTabIndex(el){if(!el)return null;var numberTabIndex=el.tabIndex,tabIndex=el.getAttribute("tabIndex");return-1!==numberTabIndex||null!==tabIndex&&(""!==tabIndex||isBrowserFirefox())?numberTabIndex.toString():null}function getMaxDivHeight(){if(!document.body)return-1;var res=1e6,testUpTo=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,div=document.createElement("div");for(document.body.appendChild(div);;){var test=2*res;if(div.style.height=test+"px",test>testUpTo||div.clientHeight!==test)break;res=test}return document.body.removeChild(div),res}function getScrollbarWidth(){return null==browserScrollbarWidth&&initScrollbarWidthAndVisibility(),browserScrollbarWidth}function initScrollbarWidthAndVisibility(){var body=document.body,div=document.createElement("div");div.style.width=div.style.height="100px",div.style.opacity="0",div.style.overflow="scroll",div.style.msOverflowStyle="scrollbar",div.style.position="absolute",body.appendChild(div);var width=div.offsetWidth-div.clientWidth;0===width&&0===div.clientWidth&&(width=null),div.parentNode&&div.parentNode.removeChild(div),null!=width&&(browserScrollbarWidth=width,invisibleScrollbar=0===width)}function isInvisibleScrollbar(){return null==invisibleScrollbar&&initScrollbarWidthAndVisibility(),invisibleScrollbar}function getBodyWidth(){return document.body?document.body.clientWidth:window.innerHeight?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:-1}function getBodyHeight(){return document.body?document.body.clientHeight:window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:-1}var rtlNegativeScroll,BrowserUtils=Object.freeze({isBrowserEdge,isBrowserSafari,isBrowserChrome,isBrowserFirefox,isIOSUserAgent,getTabIndex,getMaxDivHeight,getScrollbarWidth,isInvisibleScrollbar,hasOverflowScrolling:function hasOverflowScrolling(){var e_1,_a,prefixes=["webkit","moz","o","ms"],div=document.createElement("div"),found=!1;document.getElementsByTagName("body")[0].appendChild(div),div.setAttribute("style",prefixes.map((function(prefix){return"-"+prefix+"-overflow-scrolling: touch"})).concat("overflow-scrolling: touch").join(";"));var computedStyle=window.getComputedStyle(div);if("touch"===computedStyle.overflowScrolling&&(found=!0),!found)try{for(var prefixes_1=__values$1(prefixes),prefixes_1_1=prefixes_1.next();!prefixes_1_1.done;prefixes_1_1=prefixes_1.next())if("touch"===computedStyle[prefixes_1_1.value+"OverflowScrolling"]){found=!0;break}}catch(e_1_1){e_1={error:e_1_1}}finally{try{prefixes_1_1&&!prefixes_1_1.done&&(_a=prefixes_1.return)&&_a.call(prefixes_1)}finally{if(e_1)throw e_1.error}}return div.parentNode&&div.parentNode.removeChild(div),found},getBodyWidth,getBodyHeight});function isFocusableFormField(element){var matches=Element.prototype.matches||Element.prototype.msMatchesSelector,isFocusable=matches.call(element,Constants.INPUT_SELECTOR),isNotFocusable=matches.call(element,Constants.FOCUSABLE_EXCLUDE),isElementVisible=isVisible(element);return isFocusable&&!isNotFocusable&&isElementVisible}function setDisplayed(element,displayed){element.classList.toggle("ag-hidden",!displayed)}function setVisible(element,visible){element.classList.toggle("ag-invisible",!visible)}function setDisabled(element,disabled){var addOrRemoveDisabledAttribute=disabled?function(e){return e.setAttribute("disabled","")}:function(e){return e.removeAttribute("disabled")};addOrRemoveDisabledAttribute(element),nodeListForEach(element.querySelectorAll("input"),(function(input){return addOrRemoveDisabledAttribute(input)}))}function isElementChildOfClass(element,cls,maxNest){for(var counter=0;element;){if(element.classList.contains(cls))return!0;if(element=element.parentElement,maxNest&&++counter>maxNest)break}return!1}function getElementSize(el){var _a=window.getComputedStyle(el),height=_a.height,width=_a.width,paddingTop=_a.paddingTop,paddingRight=_a.paddingRight,paddingBottom=_a.paddingBottom,paddingLeft=_a.paddingLeft,marginTop=_a.marginTop,marginRight=_a.marginRight,marginBottom=_a.marginBottom,marginLeft=_a.marginLeft,boxSizing=_a.boxSizing;return{height:parseFloat(height),width:parseFloat(width),paddingTop:parseFloat(paddingTop),paddingRight:parseFloat(paddingRight),paddingBottom:parseFloat(paddingBottom),paddingLeft:parseFloat(paddingLeft),marginTop:parseFloat(marginTop),marginRight:parseFloat(marginRight),marginBottom:parseFloat(marginBottom),marginLeft:parseFloat(marginLeft),boxSizing}}function getInnerHeight(el){var size=getElementSize(el);return"border-box"===size.boxSizing?size.height-size.paddingTop-size.paddingBottom:size.height}function getInnerWidth(el){var size=getElementSize(el);return"border-box"===size.boxSizing?size.width-size.paddingLeft-size.paddingRight:size.width}function getAbsoluteHeight(el){var size=getElementSize(el),marginRight=size.marginBottom+size.marginTop;return Math.ceil(el.offsetHeight+marginRight)}function getAbsoluteWidth(el){var size=getElementSize(el),marginWidth=size.marginLeft+size.marginRight;return Math.ceil(el.offsetWidth+marginWidth)}function isRtlNegativeScroll(){if("boolean"==typeof rtlNegativeScroll)return rtlNegativeScroll;var template=document.createElement("div");return template.style.direction="rtl",template.style.width="1px",template.style.height="1px",template.style.position="fixed",template.style.top="0px",template.style.overflow="hidden",template.dir="rtl",template.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(template),template.scrollLeft=1,rtlNegativeScroll=0===Math.floor(template.scrollLeft),document.body.removeChild(template),rtlNegativeScroll}function getScrollLeft(element,rtl){var scrollLeft=element.scrollLeft;return rtl&&(scrollLeft=Math.abs(scrollLeft),isBrowserChrome()&&!isRtlNegativeScroll()&&(scrollLeft=element.scrollWidth-element.clientWidth-scrollLeft)),scrollLeft}function setScrollLeft(element,value,rtl){rtl&&(isRtlNegativeScroll()?value*=-1:(isBrowserSafari()||isBrowserChrome())&&(value=element.scrollWidth-element.clientWidth-value)),element.scrollLeft=value}function clearElement(el){for(;el&&el.firstChild;)el.removeChild(el.firstChild)}function removeFromParent(node){node&&node.parentNode&&node.parentNode.removeChild(node)}function isVisible(element){return null!==element.offsetParent}function loadTemplate(template){if(null!==DOMParser)return(new DOMParser).parseFromString(template,"text/html").body.firstChild;var tempDiv=document.createElement("div");return tempDiv.innerHTML=(template||"").trim(),tempDiv.firstChild}function offsetHeight(element){return element&&element.clientHeight?element.clientHeight:0}function offsetWidth(element){return element&&element.clientWidth?element.clientWidth:0}function ensureDomOrder(eContainer,eChild,eChildBefore){eChildBefore&&eChildBefore.nextSibling===eChild||(eChildBefore?eChildBefore.nextSibling?eContainer.insertBefore(eChild,eChildBefore.nextSibling):eContainer.appendChild(eChild):eContainer.firstChild&&eContainer.firstChild!==eChild&&eContainer.insertAdjacentElement("afterbegin",eChild))}function setDomChildOrder(eContainer,orderedChildren){for(var i=0;i<orderedChildren.length;i++){var correctCellAtIndex=orderedChildren[i],actualCellAtIndex=eContainer.children[i];actualCellAtIndex!==correctCellAtIndex&&eContainer.insertBefore(correctCellAtIndex,actualCellAtIndex)}}function insertWithDomOrder(eContainer,eToInsert,eChildBefore){eChildBefore?eChildBefore.insertAdjacentElement("afterend",eToInsert):eContainer.firstChild?eContainer.insertAdjacentElement("afterbegin",eToInsert):eContainer.appendChild(eToInsert)}function addStylesToElement(eElement,styles){styles&&Object.keys(styles).forEach((function(key){var keyCamelCase=hyphenToCamelCase(key);keyCamelCase&&(eElement.style[keyCamelCase]=styles[key])}))}function isHorizontalScrollShowing(element){return element.clientWidth<element.scrollWidth}function isVerticalScrollShowing(element){return element.clientHeight<element.scrollHeight}function setElementWidth(element,width){"flex"===width?(element.style.removeProperty("width"),element.style.removeProperty("minWidth"),element.style.removeProperty("maxWidth"),element.style.flex="1 1 auto"):setFixedWidth(element,width)}function setFixedWidth(element,width){width=formatSize(width),element.style.width=width.toString(),element.style.maxWidth=width.toString(),element.style.minWidth=width.toString()}function setFixedHeight(element,height){height=formatSize(height),element.style.height=height.toString(),element.style.maxHeight=height.toString(),element.style.minHeight=height.toString()}function formatSize(size){return"number"==typeof size?size+"px":size}function isNode(o){return"function"==typeof Node?o instanceof Node:o&&"object"==typeof o&&"number"==typeof o.nodeType&&"string"==typeof o.nodeName}function isElement(o){return"function"==typeof HTMLElement?o instanceof HTMLElement:o&&isNonNullObject(o)&&1===o.nodeType&&"string"==typeof o.nodeName}function isNodeOrElement(o){return isNode(o)||isElement(o)}function copyNodeList(nodeList){if(null==nodeList)return[];var result=[];return nodeListForEach(nodeList,(function(node){return result.push(node)})),result}function iterateNamedNodeMap(map,callback){if(map)for(var i=0;i<map.length;i++){var attr=map[i];callback(attr.name,attr.value)}}function addOrRemoveAttribute(element,name,value){null==value?element.removeAttribute(name):element.setAttribute(name,value.toString())}function nodeListForEach(nodeList,action){if(null!=nodeList)for(var i=0;i<nodeList.length;i++)action(nodeList[i])}var DomUtils=Object.freeze({radioCssClass:function radioCssClass(element,elementClass,otherElementClass){for(var parent=element.parentElement,sibling=parent&&parent.firstChild;sibling;)elementClass&&sibling.classList.toggle(elementClass,sibling===element),otherElementClass&&sibling.classList.toggle(otherElementClass,sibling!==element),sibling=sibling.nextSibling},isFocusableFormField,setDisplayed,setVisible,setDisabled,isElementChildOfClass,getElementSize,getInnerHeight,getInnerWidth,getAbsoluteHeight,getAbsoluteWidth,isRtlNegativeScroll,getScrollLeft,setScrollLeft,clearElement,removeElement:function removeElement(parent,cssSelector){removeFromParent(parent.querySelector(cssSelector))},removeFromParent,isVisible,loadTemplate,appendHtml:function appendHtml(eContainer,htmlTemplate){eContainer.lastChild?eContainer.insertAdjacentHTML("afterbegin",htmlTemplate):eContainer.innerHTML=htmlTemplate},getElementAttribute:function getElementAttribute(element,attributeName){return element.attributes&&element.attributes[attributeName]?element.attributes[attributeName].value:null},offsetHeight,offsetWidth,ensureDomOrder,setDomChildOrder,insertWithDomOrder,prependDC:function prependDC(parent,documentFragment){exists(parent.firstChild)?parent.insertBefore(documentFragment,parent.firstChild):parent.appendChild(documentFragment)},addStylesToElement,isHorizontalScrollShowing,isVerticalScrollShowing,setElementWidth,setFixedWidth,setElementHeight:function setElementHeight(element,height){"flex"===height?(element.style.removeProperty("height"),element.style.removeProperty("minHeight"),element.style.removeProperty("maxHeight"),element.style.flex="1 1 auto"):setFixedHeight(element,height)},setFixedHeight,formatSize,isNode,isElement,isNodeOrElement,copyNodeList,iterateNamedNodeMap,setCheckboxState:function setCheckboxState(eCheckbox,state){"boolean"==typeof state?(eCheckbox.checked=state,eCheckbox.indeterminate=!1):eCheckbox.indeterminate=!0},addOrRemoveAttribute,nodeListForEach});var GeneralUtils=Object.freeze({getNameOfClass:function getNameOfClass(theClass){var funcAsString=theClass.toString(),results=/function (.{1,})\(/.exec(funcAsString);return results&&results.length>1?results[1]:""},findLineByLeastSquares:function findLineByLeastSquares(values){var len=values.length,maxDecimals=0;if(len<=1)return values;for(var i=0;i<values.length;i++){var value=values[i],splitExponent=value.toString().split("e-");splitExponent.length>1?maxDecimals=Math.max(maxDecimals,parseInt(splitExponent[1],10)):Math.floor(value)!==value&&(maxDecimals=Math.max(maxDecimals,value.toString().split(".")[1].length))}for(var sum_x=0,sum_y=0,sum_xy=0,sum_xx=0,y=0,x=0;x<len;x++)sum_x+=x,sum_y+=y=values[x],sum_xx+=x*x,sum_xy+=x*y;var m=(len*sum_xy-sum_x*sum_y)/(len*sum_xx-sum_x*sum_x),b=sum_y/len-m*sum_x/len,result=[];for(x=0;x<=len;x++)result.push(parseFloat((x*m+b).toFixed(maxDecimals)));return result},cssStyleObjectToMarkup:function cssStyleObjectToMarkup(stylesToUse){if(!stylesToUse)return"";var resParts=[];return iterateObject(stylesToUse,(function(styleKey,styleValue){var styleKeyDashed=camelCaseToHyphen(styleKey);resParts.push(styleKeyDashed+": "+styleValue+";")})),resParts.join(" ")},message:function message(msg){var eMessage=document.createElement("div"),eBox=document.querySelector("#__ag__message");if(eMessage.innerHTML=msg,!eBox){eBox=loadTemplate('<div id="__ag__message" style="display: inline-block; position: absolute; top: 0px; left: 0px; color: white; background-color: black; z-index: 20; padding: 2px; border: 1px solid darkred; height: 200px; overflow-y: auto;"></div>'),document.body&&document.body.appendChild(eBox)}eBox.insertBefore(eMessage,eBox.children[0])},bindCellRendererToHtmlElement:function bindCellRendererToHtmlElement(cellRendererPromise,eTarget){cellRendererPromise.then((function(cellRenderer){var gui=cellRenderer.getGui();null!=gui&&("object"==typeof gui?eTarget.appendChild(gui):eTarget.innerHTML=gui)}))}});function setAriaAttribute(element,attribute,value){element.setAttribute(ariaAttributeName(attribute),value.toString())}function removeAriaAttribute(element,attribute){element.removeAttribute(ariaAttributeName(attribute))}function ariaAttributeName(attribute){return"aria-"+attribute}function setAriaRole(element,role){role?element.setAttribute("role",role):element.removeAttribute("role")}function getAriaSortState(column){return column.isSortAscending()?"ascending":column.isSortDescending()?"descending":"none"}function getAriaLevel(element){return parseInt(element.getAttribute("aria-level"),10)}function getAriaPosInSet(element){return parseInt(element.getAttribute("aria-posinset"),10)}function setAriaLabel(element,label){label?setAriaAttribute(element,"label",label):removeAriaAttribute(element,"label")}function setAriaLabelledBy(element,labelledBy){var key="labelledby";labelledBy?setAriaAttribute(element,key,labelledBy):removeAriaAttribute(element,key)}function setAriaDescription(element,description){var key="description";description?setAriaAttribute(element,key,description):removeAriaAttribute(element,key)}function setAriaDescribedBy(element,describedby){var key="describedby";describedby?setAriaAttribute(element,key,describedby):removeAriaAttribute(element,key)}function setAriaLevel(element,level){setAriaAttribute(element,"level",level)}function setAriaDisabled(element,disabled){setAriaAttribute(element,"disabled",disabled)}function setAriaExpanded(element,expanded){setAriaAttribute(element,"expanded",expanded)}function removeAriaExpanded(element){removeAriaAttribute(element,"expanded")}function setAriaSetSize(element,setsize){setAriaAttribute(element,"setsize",setsize)}function setAriaPosInSet(element,position){setAriaAttribute(element,"posinset",position)}function setAriaMultiSelectable(element,multiSelectable){setAriaAttribute(element,"multiselectable",multiSelectable)}function setAriaRowCount(element,rowCount){setAriaAttribute(element,"rowcount",rowCount)}function setAriaRowIndex(element,rowIndex){setAriaAttribute(element,"rowindex",rowIndex)}function setAriaColCount(element,colCount){setAriaAttribute(element,"colcount",colCount)}function setAriaColIndex(element,colIndex){setAriaAttribute(element,"colindex",colIndex)}function setAriaColSpan(element,colSpan){setAriaAttribute(element,"colspan",colSpan)}function setAriaSort(element,sort){setAriaAttribute(element,"sort",sort)}function removeAriaSort(element){removeAriaAttribute(element,"sort")}function setAriaSelected(element,selected){selected?setAriaAttribute(element,"selected",selected):removeAriaAttribute(element,"selected")}function setAriaChecked(element,checked){setAriaAttribute(element,"checked",void 0===checked?"mixed":checked)}var AriaUtils=Object.freeze({setAriaRole,getAriaSortState,getAriaLevel,getAriaPosInSet,getAriaDescribedBy:function getAriaDescribedBy(element){return element.getAttribute("aria-describedby")||""},setAriaLabel,setAriaLabelledBy,setAriaDescription,setAriaDescribedBy,setAriaLevel,setAriaDisabled,setAriaExpanded,removeAriaExpanded,setAriaSetSize,setAriaPosInSet,setAriaMultiSelectable,setAriaRowCount,setAriaRowIndex,setAriaColCount,setAriaColIndex,setAriaColSpan,setAriaSort,removeAriaSort,setAriaSelected,setAriaChecked});function padStartWidthZeros(value,totalStringSize){return value.toString().padStart(totalStringSize,"0")}function createArrayOfNumbers(first,last){for(var result=[],i=first;i<=last;i++)result.push(i);return result}function isNumeric(value){return""!==value&&!isNaN(parseFloat(value))&&isFinite(value)}function formatNumberCommas(value,thousandSeparator,decimalSeparator){return"number"!=typeof value?"":value.toString().replace(".",decimalSeparator).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+thousandSeparator)}var NumberUtils=Object.freeze({padStartWidthZeros,createArrayOfNumbers,isNumeric,cleanNumber:function cleanNumber(value){return"string"==typeof value&&(value=parseInt(value,10)),"number"==typeof value?Math.floor(value):null},decToHex:function decToHex(number,bytes){for(var hex="",i=0;i<bytes;i++)hex+=String.fromCharCode(255&number),number>>>=8;return hex},formatNumberTwoDecimalPlacesAndCommas:function formatNumberTwoDecimalPlacesAndCommas(value,thousandSeparator,decimalSeparator){return"number"!=typeof value?"":formatNumberCommas(Math.round(100*value)/100,thousandSeparator,decimalSeparator)},formatNumberCommas,sum:function sum(values){return null==values?null:values.reduce((function(total,value){return total+value}),0)}}),__read$5=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};function serialiseDate(date,includeTime,separator){if(void 0===includeTime&&(includeTime=!0),void 0===separator&&(separator="-"),!date)return null;var serialised=[date.getFullYear(),date.getMonth()+1,date.getDate()].map((function(part){return padStartWidthZeros(part,2)})).join(separator);return includeTime&&(serialised+=" "+[date.getHours(),date.getMinutes(),date.getSeconds()].map((function(part){return padStartWidthZeros(part,2)})).join(":")),serialised}function parseDateTimeFromString(value){if(!value)return null;var _a=__read$5(value.split(" "),2),dateStr=_a[0],timeStr=_a[1];if(!dateStr)return null;var fields=dateStr.split("-").map((function(f){return parseInt(f,10)}));if(3!==fields.filter((function(f){return!isNaN(f)})).length)return null;var _b=__read$5(fields,3),year=_b[0],month=_b[1],day=_b[2],date=new Date(year,month-1,day);if(date.getFullYear()!==year||date.getMonth()!==month-1||date.getDate()!==day)return null;if(!timeStr||"00:00:00"===timeStr)return date;var _c=__read$5(timeStr.split(":").map((function(part){return parseInt(part,10)})),3),hours=_c[0],minutes=_c[1],seconds=_c[2];return hours>=0&&hours<24&&date.setHours(hours),minutes>=0&&minutes<60&&date.setMinutes(minutes),seconds>=0&&seconds<60&&date.setSeconds(seconds),date}var DateUtils=Object.freeze({serialiseDate,parseDateTimeFromString});function fuzzyCheckStrings(inputValues,validValues,allSuggestions){var fuzzyMatches={},invalidInputs=inputValues.filter((function(inputValue){return!validValues.some((function(validValue){return validValue===inputValue}))}));return invalidInputs.length>0&&invalidInputs.forEach((function(invalidInput){return fuzzyMatches[invalidInput]=fuzzySuggestions(invalidInput,allSuggestions)})),fuzzyMatches}function fuzzySuggestions(inputValue,allSuggestions,hideIrrelevant,weighted){var search=weighted?string_weighted_distances:string_distances,thisSuggestions=allSuggestions.map((function(text){return{value:text,relevance:search(inputValue.toLowerCase(),text.toLocaleLowerCase())}}));return thisSuggestions.sort((function(a,b){return b.relevance-a.relevance})),hideIrrelevant&&(thisSuggestions=thisSuggestions.filter((function(suggestion){return 0!==suggestion.relevance}))),thisSuggestions.map((function(suggestion){return suggestion.value}))}function get_bigrams(from){var i,j,ref,s=from.toLowerCase(),v=new Array(s.length-1);for(i=j=0,ref=v.length;j<=ref;i=j+=1)v[i]=s.slice(i,i+2);return v}function string_distances(str1,str2){if(0===str1.length&&0===str2.length)return 0;var j,len,pairs1=get_bigrams(str1),pairs2=get_bigrams(str2),union=pairs1.length+pairs2.length,hit_count=0;for(j=0,len=pairs1.length;j<len;j++){var len1,x=pairs1[j],k=void 0;for(k=0,len1=pairs2.length;k<len1;k++){x===pairs2[k]&&hit_count++}}return hit_count>0?2*hit_count/union:0}function string_weighted_distances(str1,str2){for(var a=str1.replace(/\s/g,""),b=str2.replace(/\s/g,""),weight=0,lastIndex=0,i=0;i<a.length;i++){var idx=b.indexOf(a[i],lastIndex);-1!==idx&&(weight+=100-100*(lastIndex=idx)/1e4*100)}return weight}var FuzzyMatchUtils=Object.freeze({fuzzyCheckStrings,fuzzySuggestions,get_bigrams,string_distances,string_weighted_distances}),iconNameClassMap={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"};function createIcon(iconName,gridOptionsWrapper,column){var iconContents=createIconNoSpan(iconName,gridOptionsWrapper,column);if(iconContents&&iconContents.className.indexOf("ag-icon")>-1)return iconContents;var eResult=document.createElement("span");return eResult.appendChild(iconContents),eResult}function createIconNoSpan(iconName,gridOptionsWrapper,column,forceCreate){var userProvidedIcon=null,icons=column&&column.getColDef().icons;if(icons&&(userProvidedIcon=icons[iconName]),gridOptionsWrapper&&!userProvidedIcon){var optionsIcons=gridOptionsWrapper.getIcons();optionsIcons&&(userProvidedIcon=optionsIcons[iconName])}if(!userProvidedIcon){var span=document.createElement("span"),cssClass=iconNameClassMap[iconName];return cssClass||(forceCreate?cssClass=iconName:(console.warn("AG Grid: Did not find icon "+iconName),cssClass="")),span.setAttribute("class","ag-icon ag-icon-"+cssClass),span.setAttribute("unselectable","on"),setAriaRole(span,"presentation"),span}var rendererResult=void 0;if("function"==typeof userProvidedIcon)rendererResult=userProvidedIcon();else{if("string"!=typeof userProvidedIcon)throw new Error("icon from grid options needs to be a string or a function");rendererResult=userProvidedIcon}return"string"==typeof rendererResult?loadTemplate(rendererResult):isNodeOrElement(rendererResult)?rendererResult:void console.warn("AG Grid: iconRenderer should return back a string or a dom object")}var IconUtils=Object.freeze({iconNameClassMap,createIcon,createIconNoSpan}),NUMPAD_DEL_NUMLOCK_ON_KEY="Del",NUMPAD_DEL_NUMLOCK_ON_CHARCODE=46;function isEventFromPrintableCharacter(event){if(event.altKey||event.ctrlKey||event.metaKey)return!1;var printableCharacter=1===event.key.length,numpadDelWithNumlockOnForEdgeOrIe=function isNumpadDelWithNumLockOnForEdge(event){return isBrowserEdge()&&event.key===NUMPAD_DEL_NUMLOCK_ON_KEY&&event.charCode===NUMPAD_DEL_NUMLOCK_ON_CHARCODE}(event);return printableCharacter||numpadDelWithNumlockOnForEdgeOrIe}function isUserSuppressingKeyboardEvent(gridOptionsWrapper,keyboardEvent,rowNode,column,editing){var gridOptionsFunc=gridOptionsWrapper.getSuppressKeyboardEventFunc(),colDefFunc=column?column.getColDef().suppressKeyboardEvent:void 0;if(!gridOptionsFunc&&!colDefFunc)return!1;var params={event:keyboardEvent,editing,column,api:gridOptionsWrapper.getApi(),node:rowNode,data:rowNode.data,colDef:column.getColDef(),context:gridOptionsWrapper.getContext(),columnApi:gridOptionsWrapper.getColumnApi()};if(colDefFunc&&colDefFunc(params))return!0;return!!gridOptionsFunc&&gridOptionsFunc(params)}function isUserSuppressingHeaderKeyboardEvent(gridOptionsWrapper,keyboardEvent,headerRowIndex,column){var colDef=column.getDefinition(),colDefFunc=colDef&&colDef.suppressHeaderKeyboardEvent;return!!exists(colDefFunc)&&!!colDefFunc({api:gridOptionsWrapper.getApi(),columnApi:gridOptionsWrapper.getColumnApi(),context:gridOptionsWrapper.getContext(),colDef,column,headerRowIndex,event:keyboardEvent})}var KeyboardUtils=Object.freeze({isEventFromPrintableCharacter,isUserSuppressingKeyboardEvent,isUserSuppressingHeaderKeyboardEvent});function areEventsNear(e1,e2,pixelCount){if(0===pixelCount)return!1;var diffX=Math.abs(e1.clientX-e2.clientX),diffY=Math.abs(e1.clientY-e2.clientY);return Math.max(diffX,diffY)<=pixelCount}var MouseUtils=Object.freeze({areEventsNear});var RowNodeUtils=Object.freeze({sortRowNodesByOrder:function sortRowNodesByOrder(rowNodes,rowNodeOrder){if(rowNodes){for(var comparator=function(nodeA,nodeB){var positionA=rowNodeOrder[nodeA.id],positionB=rowNodeOrder[nodeB.id],aHasIndex=void 0!==positionA,bHasIndex=void 0!==positionB;return aHasIndex&&bHasIndex?positionA-positionB:!aHasIndex&&!bHasIndex?nodeA.__objectId-nodeB.__objectId:aHasIndex?1:-1},atLeastOneOutOfOrder=!1,i=0;i<rowNodes.length-1;i++)if(comparator(rowNodes[i],rowNodes[i+1])>0){atLeastOneOutOfOrder=!0;break}atLeastOneOutOfOrder&&rowNodes.sort(comparator)}},traverseNodesWithKey:function traverseNodesWithKey(nodes,callback){var keyParts=[];!function recursiveSearchNodes(currentNodes){if(!currentNodes)return;currentNodes.forEach((function(node){if(node.group||node.hasChildren()){keyParts.push(node.key);var key=keyParts.join("|");callback(node,key),recursiveSearchNodes(node.childrenAfterGroup),keyParts.pop()}}))}(nodes)}});function convertToSet(list){var set=new Set;return list.forEach((function(x){return set.add(x)})),set}var AgPromiseStatus,SetUtils=Object.freeze({convertToSet}),__assign$1=function(){return __assign$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$1.apply(this,arguments)},_=__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1(__assign$1({},GeneralUtils),AriaUtils),ArrayUtils),BrowserUtils),CsvUtils),DateUtils),DomUtils),EventUtils),FunctionUtils),FuzzyMatchUtils),GenericUtils),IconUtils),KeyboardUtils),MapUtils),MouseUtils),NumberUtils),ObjectUtils),RowNodeUtils),SetUtils),StringUtils),NumberSequence=function(){function NumberSequence(initValue,step){void 0===initValue&&(initValue=0),void 0===step&&(step=1),this.nextValue=initValue,this.step=step}return NumberSequence.prototype.next=function(){var valToReturn=this.nextValue;return this.nextValue+=this.step,valToReturn},NumberSequence.prototype.peek=function(){return this.nextValue},NumberSequence.prototype.skip=function(count){this.nextValue+=count},NumberSequence}();(AgPromiseStatus=exports.AgPromiseStatus||(exports.AgPromiseStatus={}))[AgPromiseStatus.IN_PROGRESS=0]="IN_PROGRESS",AgPromiseStatus[AgPromiseStatus.RESOLVED=1]="RESOLVED";var TooltipStates,AgPromise=function(){function AgPromise(callback){var _this=this;this.status=exports.AgPromiseStatus.IN_PROGRESS,this.resolution=null,this.waiters=[],callback((function(value){return _this.onDone(value)}),(function(params){return _this.onReject(params)}))}return AgPromise.all=function(promises){return new AgPromise((function(resolve){var remainingToResolve=promises.length,combinedValues=new Array(remainingToResolve);promises.forEach((function(promise,index){promise.then((function(value){combinedValues[index]=value,0===--remainingToResolve&&resolve(combinedValues)}))}))}))},AgPromise.resolve=function(value){return void 0===value&&(value=null),new AgPromise((function(resolve){return resolve(value)}))},AgPromise.prototype.then=function(func){var _this=this;return new AgPromise((function(resolve){_this.status===exports.AgPromiseStatus.RESOLVED?resolve(func(_this.resolution)):_this.waiters.push((function(value){return resolve(func(value))}))}))},AgPromise.prototype.resolveNow=function(ifNotResolvedValue,ifResolved){return this.status===exports.AgPromiseStatus.RESOLVED?ifResolved(this.resolution):ifNotResolvedValue},AgPromise.prototype.onDone=function(value){this.status=exports.AgPromiseStatus.RESOLVED,this.resolution=value,this.waiters.forEach((function(waiter){return waiter(value)}))},AgPromise.prototype.onReject=function(params){console.warn("TBI")},AgPromise}(),Timer=function(){function Timer(){this.timestamp=(new Date).getTime()}return Timer.prototype.print=function(msg){var duration=(new Date).getTime()-this.timestamp;console.info(msg+" = "+duration),this.timestamp=(new Date).getTime()},Timer}(),__extends$5=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$2=function(){return __assign$2=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$2.apply(this,arguments)},__decorate$9=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(TooltipStates){TooltipStates[TooltipStates.NOTHING=0]="NOTHING",TooltipStates[TooltipStates.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",TooltipStates[TooltipStates.SHOWING=2]="SHOWING"}(TooltipStates||(TooltipStates={}));var CustomTooltipFeature=function(_super){function CustomTooltipFeature(parentComp){var _this=_super.call(this)||this;return _this.DEFAULT_SHOW_TOOLTIP_DELAY=2e3,_this.DEFAULT_HIDE_TOOLTIP_DELAY=1e4,_this.SHOW_QUICK_TOOLTIP_DIFF=1e3,_this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,_this.state=TooltipStates.NOTHING,_this.tooltipInstanceCount=0,_this.tooltipMouseTrack=!1,_this.parentComp=parentComp,_this}return __extends$5(CustomTooltipFeature,_super),CustomTooltipFeature.prototype.postConstruct=function(){this.tooltipShowDelay=this.gridOptionsWrapper.getTooltipDelay("show")||this.DEFAULT_SHOW_TOOLTIP_DELAY,this.tooltipHideDelay=this.gridOptionsWrapper.getTooltipDelay("hide")||this.DEFAULT_HIDE_TOOLTIP_DELAY,this.tooltipMouseTrack=this.gridOptionsWrapper.isTooltipMouseTrack();var el=this.parentComp.getGui();this.addManagedListener(el,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(el,"mouseleave",this.onMouseLeave.bind(this)),this.addManagedListener(el,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(el,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(el,"keydown",this.onKeyDown.bind(this))},CustomTooltipFeature.prototype.destroy=function(){this.setToDoNothing(),_super.prototype.destroy.call(this)},CustomTooltipFeature.prototype.onMouseEnter=function(e){if(!isIOSUserAgent()&&this.state==TooltipStates.NOTHING){var delay=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay;this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),delay),this.lastMouseEvent=e,this.state=TooltipStates.WAITING_TO_SHOW}},CustomTooltipFeature.prototype.onMouseLeave=function(){this.setToDoNothing()},CustomTooltipFeature.prototype.onKeyDown=function(){this.setToDoNothing()},CustomTooltipFeature.prototype.setToDoNothing=function(){this.state===TooltipStates.SHOWING&&this.hideTooltip(),this.clearTimeouts(),this.state=TooltipStates.NOTHING},CustomTooltipFeature.prototype.onMouseMove=function(e){this.lastMouseEvent=e,this.tooltipMouseTrack&&this.state===TooltipStates.SHOWING&&this.tooltipComp&&this.positionTooltipUnderLastMouseEvent()},CustomTooltipFeature.prototype.onMouseDown=function(){this.setToDoNothing()},CustomTooltipFeature.prototype.hideTooltip=function(){this.tooltipComp&&(this.destroyTooltipComp(),CustomTooltipFeature.lastTooltipHideTime=(new Date).getTime()),this.state=TooltipStates.NOTHING},CustomTooltipFeature.prototype.destroyTooltipComp=function(){var _this=this;this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");var tooltipPopupDestroyFunc=this.tooltipPopupDestroyFunc,tooltipComp=this.tooltipComp;window.setTimeout((function(){tooltipPopupDestroyFunc(),_this.getContext().destroyBean(tooltipComp)}),this.FADE_OUT_TOOLTIP_TIMEOUT),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},CustomTooltipFeature.prototype.isLastTooltipHiddenRecently=function(){return(new Date).getTime()-CustomTooltipFeature.lastTooltipHideTime<this.SHOW_QUICK_TOOLTIP_DIFF},CustomTooltipFeature.prototype.showTooltip=function(){var params=__assign$2({},this.parentComp.getTooltipParams());if(exists(params.value)){this.state=TooltipStates.SHOWING,this.tooltipInstanceCount++;var callback=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(params).newAgStackInstance().then(callback)}else this.setToDoNothing()},CustomTooltipFeature.prototype.newTooltipComponentCallback=function(tooltipInstanceCopy,tooltipComp){if(this.state!==TooltipStates.SHOWING||this.tooltipInstanceCount!==tooltipInstanceCopy)this.getContext().destroyBean(tooltipComp);else{var eGui=tooltipComp.getGui();this.tooltipComp=tooltipComp,eGui.classList.contains("ag-tooltip")||eGui.classList.add("ag-tooltip-custom");var translate=this.gridOptionsWrapper.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({eChild:eGui,ariaLabel:translate("ariaLabelTooltip","Tooltip")});addPopupRes&&(this.tooltipPopupDestroyFunc=addPopupRes.hideFunc),this.positionTooltipUnderLastMouseEvent(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.tooltipHideDelay)}},CustomTooltipFeature.prototype.positionTooltipUnderLastMouseEvent=function(){this.popupService.positionPopupUnderMouseEvent({type:"tooltip",mouseEvent:this.lastMouseEvent,ePopup:this.tooltipComp.getGui(),nudgeY:18})},CustomTooltipFeature.prototype.clearTimeouts=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0),this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},__decorate$9([Autowired("popupService")],CustomTooltipFeature.prototype,"popupService",void 0),__decorate$9([Autowired("userComponentFactory")],CustomTooltipFeature.prototype,"userComponentFactory",void 0),__decorate$9([Autowired("columnApi")],CustomTooltipFeature.prototype,"columnApi",void 0),__decorate$9([Autowired("gridApi")],CustomTooltipFeature.prototype,"gridApi",void 0),__decorate$9([PostConstruct],CustomTooltipFeature.prototype,"postConstruct",null),CustomTooltipFeature}(BeanStub),__extends$6=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$a=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},compIdSequence=new NumberSequence,CssClassManager=function(){function CssClassManager(getGui){this.cssClassStates={},this.getGui=getGui}return CssClassManager.prototype.addCssClass=function(className){var _this=this,list=(className||"").split(" ");list.length>1?list.forEach((function(cls){return _this.addCssClass(cls)})):!0!==this.cssClassStates[className]&&className.length&&(this.getGui().classList.add(className),this.cssClassStates[className]=!0)},CssClassManager.prototype.removeCssClass=function(className){var _this=this,list=(className||"").split(" ");list.length>1?list.forEach((function(cls){return _this.removeCssClass(cls)})):!1!==this.cssClassStates[className]&&className.length&&(this.getGui().classList.remove(className),this.cssClassStates[className]=!1)},CssClassManager.prototype.containsCssClass=function(className){return this.getGui().classList.contains(className)},CssClassManager.prototype.addOrRemoveCssClass=function(className,addOrRemove){var _this=this,list=(className||"").split(" ");list.length>1?list.forEach((function(cls){return _this.addOrRemoveCssClass(cls,addOrRemove)})):this.cssClassStates[className]!==addOrRemove&&className.length&&(this.getGui().classList.toggle(className,addOrRemove),this.cssClassStates[className]=addOrRemove)},CssClassManager}(),Component=function(_super){function Component(template){var _this=_super.call(this)||this;return _this.displayed=!0,_this.visible=!0,_this.compId=compIdSequence.next(),_this.cssClassManager=new CssClassManager((function(){return _this.eGui})),template&&_this.setTemplate(template),_this}return __extends$6(Component,_super),Component.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsWrapper.isEnableBrowserTooltips()},Component.prototype.getCompId=function(){return this.compId},Component.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},Component.prototype.setTooltip=function(newTooltipText){var _this=this;this.tooltipText!=newTooltipText&&(this.tooltipText&&(_this.usingBrowserTooltips?_this.getGui().removeAttribute("title"):_this.tooltipFeature=_this.destroyBean(_this.tooltipFeature)),null!=newTooltipText&&(this.tooltipText=newTooltipText,this.tooltipText&&(_this.usingBrowserTooltips?_this.getGui().setAttribute("title",_this.tooltipText):_this.tooltipFeature=_this.createBean(new CustomTooltipFeature(_this)))))},Component.prototype.createChildComponentsFromTags=function(parentNode,paramsMap){var _this=this;copyNodeList(parentNode.childNodes).forEach((function(childNode){if(childNode instanceof HTMLElement){var childComp=_this.createComponentFromElement(childNode,(function(childComp){childComp.getGui()&&_this.copyAttributesFromNode(childNode,childComp.getGui())}),paramsMap);if(childComp){if(childComp.addItems&&childNode.children.length){_this.createChildComponentsFromTags(childNode,paramsMap);var items=Array.prototype.slice.call(childNode.children);childComp.addItems(items)}_this.swapComponentForNode(childComp,parentNode,childNode)}else childNode.childNodes&&_this.createChildComponentsFromTags(childNode,paramsMap)}}))},Component.prototype.createComponentFromElement=function(element,afterPreCreateCallback,paramsMap){var key=element.nodeName,componentParams=paramsMap?paramsMap[element.getAttribute("ref")]:void 0,ComponentClass=this.agStackComponentsRegistry.getComponentClass(key);if(ComponentClass){Component.elementGettingCreated=element;var newComponent=new ComponentClass(componentParams);return newComponent.setParentComponent(this),this.createBean(newComponent,null,afterPreCreateCallback),newComponent}return null},Component.prototype.copyAttributesFromNode=function(source,dest){iterateNamedNodeMap(source.attributes,(function(name,value){return dest.setAttribute(name,value)}))},Component.prototype.swapComponentForNode=function(newComponent,parentNode,childNode){var eComponent=newComponent.getGui();parentNode.replaceChild(eComponent,childNode),parentNode.insertBefore(document.createComment(childNode.nodeName),eComponent),this.addDestroyFunc(this.destroyBean.bind(this,newComponent)),this.swapInComponentForQuerySelectors(newComponent,childNode)},Component.prototype.swapInComponentForQuerySelectors=function(newComponent,childNode){var thisNoType=this;this.iterateOverQuerySelectors((function(querySelector){thisNoType[querySelector.attributeName]===childNode&&(thisNoType[querySelector.attributeName]=newComponent)}))},Component.prototype.iterateOverQuerySelectors=function(action){for(var thisPrototype=Object.getPrototypeOf(this);null!=thisPrototype;){var metaData=thisPrototype.__agComponentMetaData,currentProtoName=getFunctionName(thisPrototype.constructor);metaData&&metaData[currentProtoName]&&metaData[currentProtoName].querySelectors&&metaData[currentProtoName].querySelectors.forEach((function(querySelector){return action(querySelector)})),thisPrototype=Object.getPrototypeOf(thisPrototype)}},Component.prototype.setTemplate=function(template,paramsMap){var eGui=loadTemplate(template);this.setTemplateFromElement(eGui,paramsMap)},Component.prototype.setTemplateFromElement=function(element,paramsMap){this.eGui=element,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),paramsMap)},Component.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},Component.prototype.wireQuerySelectors=function(){var _this=this;if(this.eGui){var thisNoType=this;this.iterateOverQuerySelectors((function(querySelector){var setResult=function(result){return thisNoType[querySelector.attributeName]=result};if(querySelector.refSelector&&_this.eGui.getAttribute("ref")===querySelector.refSelector)setResult(_this.eGui);else{var resultOfQuery=_this.eGui.querySelector(querySelector.querySelector);resultOfQuery&&setResult(resultOfQuery.__agComponent||resultOfQuery)}}))}},Component.prototype.getGui=function(){return this.eGui},Component.prototype.getFocusableElement=function(){return this.eGui},Component.prototype.setParentComponent=function(component){this.parentComponent=component},Component.prototype.getParentComponent=function(){return this.parentComponent},Component.prototype.setGui=function(eGui){this.eGui=eGui},Component.prototype.queryForHtmlElement=function(cssSelector){return this.eGui.querySelector(cssSelector)},Component.prototype.queryForHtmlInputElement=function(cssSelector){return this.eGui.querySelector(cssSelector)},Component.prototype.appendChild=function(newChild,container){if(container||(container=this.eGui),null!=newChild)if(isNodeOrElement(newChild))container.appendChild(newChild);else{var childComponent=newChild;container.appendChild(childComponent.getGui()),this.addDestroyFunc(this.destroyBean.bind(this,childComponent))}},Component.prototype.isDisplayed=function(){return this.displayed},Component.prototype.setVisible=function(visible){visible!==this.visible&&(this.visible=visible,setVisible(this.eGui,visible))},Component.prototype.setDisplayed=function(displayed){if(displayed!==this.displayed){this.displayed=displayed,setDisplayed(this.eGui,displayed);var event_1={type:Component.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(event_1)}},Component.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),_super.prototype.destroy.call(this)},Component.prototype.addGuiEventListener=function(event,listener){var _this=this;this.eGui.addEventListener(event,listener),this.addDestroyFunc((function(){return _this.eGui.removeEventListener(event,listener)}))},Component.prototype.addCssClass=function(className){this.cssClassManager.addCssClass(className)},Component.prototype.removeCssClass=function(className){this.cssClassManager.removeCssClass(className)},Component.prototype.containsCssClass=function(className){return this.cssClassManager.containsCssClass(className)},Component.prototype.addOrRemoveCssClass=function(className,addOrRemove){this.cssClassManager.addOrRemoveCssClass(className,addOrRemove)},Component.prototype.getAttribute=function(key){var eGui=this.eGui;return eGui?eGui.getAttribute(key):null},Component.prototype.getRefElement=function(refName){return this.queryForHtmlElement('[ref="'+refName+'"]')},Component.EVENT_DISPLAYED_CHANGED="displayedChanged",__decorate$a([Autowired("agStackComponentsRegistry")],Component.prototype,"agStackComponentsRegistry",void 0),__decorate$a([PreConstruct],Component.prototype,"preConstructOnComponent",null),__decorate$a([PreConstruct],Component.prototype,"createChildComponentsPreConstruct",null),Component}(BeanStub);function RefSelector(ref){return querySelectorFunc.bind(this,"[ref="+ref+"]",ref)}function querySelectorFunc(selector,refSelector,classPrototype,methodOrAttributeName,index){null!==selector?"number"!=typeof index?function addToObjectProps(target,key,value){var props=function getOrCreateProps$1(target,instanceName){target.__agComponentMetaData||(target.__agComponentMetaData={});target.__agComponentMetaData[instanceName]||(target.__agComponentMetaData[instanceName]={});return target.__agComponentMetaData[instanceName]}(target,getFunctionName(target.constructor));props[key]||(props[key]=[]);props[key].push(value)}(classPrototype,"querySelectors",{attributeName:methodOrAttributeName,querySelector:selector,refSelector}):console.error("AG Grid: QuerySelector should be on an attribute"):console.error("AG Grid: QuerySelector selector should not be null")}var ConditionPosition,__extends$7=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$b=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ReadOnlyFloatingFilter=function(_super){function ReadOnlyFloatingFilter(){return _super.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this}return __extends$7(ReadOnlyFloatingFilter,_super),ReadOnlyFloatingFilter.prototype.destroy=function(){_super.prototype.destroy.call(this)},ReadOnlyFloatingFilter.prototype.init=function(params){this.params=params;var displayName=this.columnModel.getDisplayNameForColumn(params.column,"header",!0),translate=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(displayName+" "+translate("ariaFilterInput","Filter Input"))},ReadOnlyFloatingFilter.prototype.onParentModelChanged=function(parentModel){var _this=this;parentModel?this.params.parentFilterInstance((function(filterInstance){if(filterInstance.getModelAsString){var modelAsString=filterInstance.getModelAsString(parentModel);_this.eFloatingFilterText.setValue(modelAsString)}})):this.eFloatingFilterText.setValue("")},__decorate$b([RefSelector("eFloatingFilterText")],ReadOnlyFloatingFilter.prototype,"eFloatingFilterText",void 0),__decorate$b([Autowired("columnModel")],ReadOnlyFloatingFilter.prototype,"columnModel",void 0),ReadOnlyFloatingFilter}(Component),DateCompWrapper=function(){function DateCompWrapper(context,userComponentFactory,dateComponentParams,eParent){var _this=this;this.alive=!0,this.context=context,this.eParent=eParent,userComponentFactory.getDateCompDetails(dateComponentParams).newAgStackInstance().then((function(dateComp){_this.alive?(_this.dateComp=dateComp,dateComp&&(eParent.appendChild(dateComp.getGui()),dateComp.afterGuiAttached&&dateComp.afterGuiAttached(),_this.tempValue&&dateComp.setDate(_this.tempValue),null!=_this.disabled&&_this.setDateCompDisabled(_this.disabled))):context.destroyBean(dateComp)}))}return DateCompWrapper.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},DateCompWrapper.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},DateCompWrapper.prototype.setDate=function(value){this.dateComp?this.dateComp.setDate(value):this.tempValue=value},DateCompWrapper.prototype.setDisabled=function(disabled){this.dateComp?this.setDateCompDisabled(disabled):this.disabled=disabled},DateCompWrapper.prototype.setDisplayed=function(displayed){setDisplayed(this.eParent,displayed)},DateCompWrapper.prototype.setInputPlaceholder=function(placeholder){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(placeholder)},DateCompWrapper.prototype.setInputAriaLabel=function(label){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(label)},DateCompWrapper.prototype.afterGuiAttached=function(params){this.dateComp&&"function"==typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(params)},DateCompWrapper.prototype.setDateCompDisabled=function(disabled){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(disabled)},DateCompWrapper}(),__assign$3=function(){return __assign$3=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$3.apply(this,arguments)},OptionsFactory=function(){function OptionsFactory(){this.customFilterOptions={}}return OptionsFactory.prototype.init=function(params,defaultOptions){this.filterOptions=params.filterOptions||defaultOptions,this.mapCustomOptions(),this.selectDefaultItem(params),this.checkForDeprecatedParams()},OptionsFactory.prototype.checkForDeprecatedParams=function(){this.filterOptions.some((function(opt){return"string"!=typeof opt&&null!=opt.test}))&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, test() has been replaced with predicate()."),this.filterOptions.some((function(opt){return"string"!=typeof opt&&null!=opt.hideFilterInput}))&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, useOfHideFilterInput has been replaced with numberOfInputs.")},OptionsFactory.prototype.getFilterOptions=function(){return this.filterOptions},OptionsFactory.prototype.mapCustomOptions=function(){var _this=this;this.filterOptions&&this.filterOptions.forEach((function(filterOption){if("string"!=typeof filterOption){if([["displayKey"],["displayName"],["predicate","test"]].every((function(keys){return!!keys.some((function(key){return null!=filterOption[key]}))||(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '"+keys+"'"),!1)}))){var test=filterOption.test,mutatedFilterOptions=__assign$3({},filterOption);null!=test&&null==filterOption.predicate&&(mutatedFilterOptions.predicate=function(v,cv){return test(v[0],cv)},delete mutatedFilterOptions.test),mutatedFilterOptions.hideFilterInput&&null==mutatedFilterOptions.numberOfInputs&&(mutatedFilterOptions.numberOfInputs=0,delete mutatedFilterOptions.hideFilterInput),_this.customFilterOptions[filterOption.displayKey]=mutatedFilterOptions}else _this.filterOptions=_this.filterOptions.filter((function(v){return v===filterOption}))||[]}}))},OptionsFactory.prototype.selectDefaultItem=function(params){if(params.defaultOption)this.defaultOption=params.defaultOption;else if(this.filterOptions.length>=1){var firstFilterOption=this.filterOptions[0];"string"==typeof firstFilterOption?this.defaultOption=firstFilterOption:firstFilterOption.displayKey?this.defaultOption=firstFilterOption.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},OptionsFactory.prototype.getDefaultOption=function(){return this.defaultOption},OptionsFactory.prototype.getCustomOption=function(name){return this.customFilterOptions[name]},OptionsFactory}(),DEFAULT_FILTER_LOCALE_TEXT={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},KeyCode=function(){function KeyCode(){}return KeyCode.BACKSPACE="Backspace",KeyCode.TAB="Tab",KeyCode.ENTER="Enter",KeyCode.ESCAPE="Escape",KeyCode.SPACE=" ",KeyCode.LEFT="ArrowLeft",KeyCode.UP="ArrowUp",KeyCode.RIGHT="ArrowRight",KeyCode.DOWN="ArrowDown",KeyCode.DELETE="Delete",KeyCode.F2="F2",KeyCode.PAGE_UP="PageUp",KeyCode.PAGE_DOWN="PageDown",KeyCode.PAGE_HOME="Home",KeyCode.PAGE_END="End",KeyCode.A="KeyA",KeyCode.C="KeyC",KeyCode.V="KeyV",KeyCode.D="KeyD",KeyCode.Z="KeyZ",KeyCode.Y="KeyY",KeyCode}(),__extends$8=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$4=function(){return __assign$4=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$4.apply(this,arguments)},__decorate$c=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ManagedFocusFeature=function(_super){function ManagedFocusFeature(eFocusableElement,callbacks){void 0===callbacks&&(callbacks={});var _this=_super.call(this)||this;return _this.eFocusableElement=eFocusableElement,_this.callbacks=callbacks,_this.callbacks=__assign$4({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(e){if(!e.defaultPrevented){var nextRoot=_this.focusService.findNextFocusableElement(_this.eFocusableElement,!1,e.shiftKey);nextRoot&&(nextRoot.focus(),e.preventDefault())}}},callbacks),_this}return __extends$8(ManagedFocusFeature,_super),ManagedFocusFeature.prototype.postConstruct=function(){this.eFocusableElement.classList.add(ManagedFocusFeature.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},ManagedFocusFeature.prototype.addKeyDownListeners=function(eGui){var _this=this;this.addManagedListener(eGui,"keydown",(function(e){e.defaultPrevented||isStopPropagationForAgGrid(e)||(_this.callbacks.shouldStopEventPropagation(e)?stopPropagationForAgGrid(e):e.key===KeyCode.TAB?_this.callbacks.onTabKeyDown(e):_this.callbacks.handleKeyDown&&_this.callbacks.handleKeyDown(e))}))},ManagedFocusFeature.FOCUS_MANAGED_CLASS="ag-focus-managed",__decorate$c([Autowired("focusService")],ManagedFocusFeature.prototype,"focusService",void 0),__decorate$c([PostConstruct],ManagedFocusFeature.prototype,"postConstruct",null),ManagedFocusFeature}(BeanStub),__extends$9=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$d=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ProvidedFilter=function(_super){function ProvidedFilter(filterNameKey){var _this=_super.call(this)||this;return _this.filterNameKey=filterNameKey,_this.applyActive=!1,_this.hidePopup=null,_this.appliedModel=null,_this}return __extends$9(ProvidedFilter,_super),ProvidedFilter.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)}))},ProvidedFilter.prototype.handleKeyDown=function(e){},ProvidedFilter.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},ProvidedFilter.prototype.isFilterActive=function(){return!!this.appliedModel},ProvidedFilter.prototype.resetTemplate=function(paramsMap){var templateString='\n            <div class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'+this.getCssIdentifier()+'-body-wrapper">\n                    '+this.createBodyTemplate()+"\n                </div>\n            </div>";this.setTemplate(templateString,paramsMap)},ProvidedFilter.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},ProvidedFilter.prototype.init=function(params){var _this=this;this.setParams(params),this.resetUiToDefaults(!0).then((function(){_this.updateUiVisibility(),_this.setupOnBtApplyDebounce()}))},ProvidedFilter.prototype.setParams=function(params){this.providedFilterParams=params,this.applyActive=ProvidedFilter.isUseApplyButton(params),this.createButtonPanel()},ProvidedFilter.prototype.createButtonPanel=function(){var _this=this,buttons=this.providedFilterParams.buttons;if(!(!buttons||buttons.length<1||this.isReadOnly())){var eButtonsPanel=document.createElement("div");eButtonsPanel.classList.add("ag-filter-apply-panel");convertToSet(buttons).forEach((function(type){return function(type){var text,clickListener;switch(type){case"apply":text=_this.translate("applyFilter"),clickListener=function(e){return _this.onBtApply(!1,!1,e)};break;case"clear":text=_this.translate("clearFilter"),clickListener=function(){return _this.onBtClear()};break;case"reset":text=_this.translate("resetFilter"),clickListener=function(){return _this.onBtReset()};break;case"cancel":text=_this.translate("cancelFilter"),clickListener=function(e){_this.onBtCancel(e)};break;default:return void console.warn("AG Grid: Unknown button type specified")}var button=loadTemplate('<button\n                    type="button"\n                    ref="'+type+'FilterButton"\n                    class="ag-standard-button ag-filter-apply-panel-button"\n                >'+text+"\n                </button>");eButtonsPanel.appendChild(button),_this.addManagedListener(button,"click",clickListener)}(type)})),this.getGui().appendChild(eButtonsPanel)}},ProvidedFilter.prototype.getDefaultDebounceMs=function(){return 0},ProvidedFilter.prototype.setupOnBtApplyDebounce=function(){var debounceMs=ProvidedFilter.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs());this.onBtApplyDebounce=debounce(this.onBtApply.bind(this),debounceMs)},ProvidedFilter.prototype.getModel=function(){return this.appliedModel?this.appliedModel:null},ProvidedFilter.prototype.setModel=function(model){var _this=this;return(null!=model?this.setModelIntoUi(model):this.resetUiToDefaults()).then((function(){_this.updateUiVisibility(),_this.applyModel()}))},ProvidedFilter.prototype.onBtCancel=function(e){var _this=this,currentModel=this.getModel(),afterAppliedFunc=function(){_this.onUiChanged(!1,"prevent"),_this.providedFilterParams.closeOnApply&&_this.close(e)};null!=currentModel?this.setModelIntoUi(currentModel).then(afterAppliedFunc):this.resetUiToDefaults().then(afterAppliedFunc)},ProvidedFilter.prototype.onBtClear=function(){var _this=this;this.resetUiToDefaults().then((function(){return _this.onUiChanged()}))},ProvidedFilter.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},ProvidedFilter.prototype.applyModel=function(){var newModel=this.getModelFromUi();if(!this.isModelValid(newModel))return!1;var previousModel=this.appliedModel;return this.appliedModel=newModel,!this.areModelsEqual(previousModel,newModel)},ProvidedFilter.prototype.isModelValid=function(model){return!0},ProvidedFilter.prototype.onBtApply=function(afterFloatingFilter,afterDataChange,e){void 0===afterFloatingFilter&&(afterFloatingFilter=!1),void 0===afterDataChange&&(afterDataChange=!1),this.applyModel()&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter,afterDataChange}),this.providedFilterParams.closeOnApply&&this.applyActive&&!afterFloatingFilter&&!afterDataChange&&this.close(e)},ProvidedFilter.prototype.onNewRowsLoaded=function(){},ProvidedFilter.prototype.close=function(e){if(this.hidePopup){var params,keyboardEvent=e,key=keyboardEvent&&keyboardEvent.key;"Enter"!==key&&"Space"!==key||(params={keyboardEvent}),this.hidePopup(params),this.hidePopup=null}},ProvidedFilter.prototype.onUiChanged=function(fromFloatingFilter,apply){if(void 0===fromFloatingFilter&&(fromFloatingFilter=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly){var isValid=this.isModelValid(this.getModelFromUi());setDisabled(this.getRefElement("applyFilterButton"),!isValid)}fromFloatingFilter&&!apply||"immediately"===apply?this.onBtApply(fromFloatingFilter):(this.applyActive||apply)&&"debounce"!==apply||this.onBtApplyDebounce()},ProvidedFilter.prototype.afterGuiAttached=function(params){null!=params&&(this.hidePopup=params.hidePopup)},ProvidedFilter.getDebounceMs=function(params,debounceDefault){return ProvidedFilter.isUseApplyButton(params)?(null!=params.debounceMs&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):null!=params.debounceMs?params.debounceMs:debounceDefault},ProvidedFilter.isUseApplyButton=function(params){return!!params.buttons&&params.buttons.indexOf("apply")>=0},ProvidedFilter.prototype.destroy=function(){this.hidePopup=null,_super.prototype.destroy.call(this)},ProvidedFilter.prototype.translate=function(key){return this.gridOptionsWrapper.getLocaleTextFunc()(key,DEFAULT_FILTER_LOCALE_TEXT[key])},ProvidedFilter.prototype.getCellValue=function(rowNode){var _a=this.providedFilterParams,api=_a.api,colDef=_a.colDef,column=_a.column,columnApi=_a.columnApi,context=_a.context;return this.providedFilterParams.valueGetter({api,colDef,column,columnApi,context,data:rowNode.data,getValue:function(field){return rowNode.data[field]},node:rowNode})},__decorate$d([Autowired("rowModel")],ProvidedFilter.prototype,"rowModel",void 0),__decorate$d([Autowired("valueService")],ProvidedFilter.prototype,"valueService",void 0),__decorate$d([PostConstruct],ProvidedFilter.prototype,"postConstruct",null),ProvidedFilter}(Component),__extends$a=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$e=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgAbstractLabel=function(_super){function AgAbstractLabel(config,template){var _this=_super.call(this,template)||this;return _this.labelSeparator="",_this.labelAlignment="left",_this.label="",_this.config=config||{},_this}return __extends$a(AgAbstractLabel,_super),AgAbstractLabel.prototype.postConstruct=function(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");var _a=this.config,labelSeparator=_a.labelSeparator,label=_a.label,labelWidth=_a.labelWidth,labelAlignment=_a.labelAlignment;null!=labelSeparator&&this.setLabelSeparator(labelSeparator),null!=label&&this.setLabel(label),null!=labelWidth&&this.setLabelWidth(labelWidth),this.setLabelAlignment(labelAlignment||this.labelAlignment),this.refreshLabel()},AgAbstractLabel.prototype.refreshLabel=function(){clearElement(this.eLabel),"string"==typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(this.eLabel.classList.add("ag-hidden"),setAriaRole(this.eLabel,"presentation")):(this.eLabel.classList.remove("ag-hidden"),setAriaRole(this.eLabel,null))},AgAbstractLabel.prototype.setLabelSeparator=function(labelSeparator){return this.labelSeparator===labelSeparator||(this.labelSeparator=labelSeparator,null!=this.label&&this.refreshLabel()),this},AgAbstractLabel.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-"+this.getCompId()+"-label",this.eLabel.id},AgAbstractLabel.prototype.getLabel=function(){return this.label},AgAbstractLabel.prototype.setLabel=function(label){return this.label===label||(this.label=label,this.refreshLabel()),this},AgAbstractLabel.prototype.setLabelAlignment=function(alignment){var eGuiClassList=this.getGui().classList;return eGuiClassList.toggle("ag-label-align-left","left"===alignment),eGuiClassList.toggle("ag-label-align-right","right"===alignment),eGuiClassList.toggle("ag-label-align-top","top"===alignment),this},AgAbstractLabel.prototype.setLabelWidth=function(width){return null==this.label||setElementWidth(this.eLabel,width),this},__decorate$e([PostConstruct],AgAbstractLabel.prototype,"postConstruct",null),AgAbstractLabel}(Component),__extends$b=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgAbstractField=function(_super){function AgAbstractField(config,template,className){var _this=_super.call(this,config,template)||this;return _this.className=className,_this.disabled=!1,_this}return __extends$b(AgAbstractField,_super),AgAbstractField.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.className&&this.addCssClass(this.className)},AgAbstractField.prototype.onValueChange=function(callbackFn){var _this=this;return this.addManagedListener(this,AgAbstractField.EVENT_CHANGED,(function(){return callbackFn(_this.getValue())})),this},AgAbstractField.prototype.getWidth=function(){return this.getGui().clientWidth},AgAbstractField.prototype.setWidth=function(width){return setFixedWidth(this.getGui(),width),this},AgAbstractField.prototype.getPreviousValue=function(){return this.previousValue},AgAbstractField.prototype.getValue=function(){return this.value},AgAbstractField.prototype.setValue=function(value,silent){return this.value===value||(this.previousValue=this.value,this.value=value,silent||this.dispatchEvent({type:AgAbstractField.EVENT_CHANGED})),this},AgAbstractField.prototype.setDisabled=function(disabled){disabled=!!disabled;var element=this.getGui();return setDisabled(element,disabled),element.classList.toggle("ag-disabled",disabled),this.disabled=disabled,this},AgAbstractField.prototype.isDisabled=function(){return!!this.disabled},AgAbstractField.EVENT_CHANGED="valueChange",AgAbstractField}(AgAbstractLabel),__extends$c=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$f=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgPickerField=function(_super){function AgPickerField(config,className,pickerIcon,ariaRole){var _this=_super.call(this,config,'<div class="ag-picker-field" role="presentation">\n                <div ref="eLabel"></div>\n                <div ref="eWrapper"\n                    class="ag-wrapper ag-picker-field-wrapper"\n                    tabIndex="-1"\n                    aria-expanded="false"\n                    '+(ariaRole?'role="'+ariaRole+'"':"")+'\n                >\n                    <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',className)||this;return _this.pickerIcon=pickerIcon,_this.isPickerDisplayed=!1,_this.isDestroyingPicker=!1,_this.skipClick=!1,_this}return __extends$c(AgPickerField,_super),AgPickerField.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this);var displayId=this.getCompId()+"-display";this.eDisplayField.setAttribute("id",displayId),setAriaDescribedBy(this.eWrapper,displayId);var clickHandler=function(){_this.skipClick?_this.skipClick=!1:_this.isDisabled()||(_this.pickerComponent=_this.showPicker())},eGui=this.getGui();if(this.addManagedListener(eGui,"mousedown",(function(e){!_this.skipClick&&_this.pickerComponent&&_this.pickerComponent.isAlive()&&isVisible(_this.pickerComponent.getGui())&&eGui.contains(e.target)&&(_this.skipClick=!0)})),this.addManagedListener(eGui,"keydown",(function(e){switch(e.key){case KeyCode.UP:case KeyCode.DOWN:case KeyCode.ENTER:case KeyCode.SPACE:clickHandler();case KeyCode.ESCAPE:_this.isPickerDisplayed&&e.preventDefault()}})),this.addManagedListener(this.eWrapper,"click",clickHandler),this.addManagedListener(this.eLabel,"click",clickHandler),this.pickerIcon){var icon=createIconNoSpan(this.pickerIcon,this.gridOptionsWrapper);icon&&this.eIcon.appendChild(icon)}},AgPickerField.prototype.refreshLabel=function(){exists(this.getLabel())?setAriaLabelledBy(this.eWrapper,this.getLabelId()):this.eWrapper.removeAttribute("aria-labelledby"),_super.prototype.refreshLabel.call(this)},AgPickerField.prototype.setAriaLabel=function(label){return setAriaLabel(this.eWrapper,label),this},AgPickerField.prototype.setInputWidth=function(width){return setElementWidth(this.eWrapper,width),this},AgPickerField.prototype.getFocusableElement=function(){return this.eWrapper},__decorate$f([RefSelector("eLabel")],AgPickerField.prototype,"eLabel",void 0),__decorate$f([RefSelector("eWrapper")],AgPickerField.prototype,"eWrapper",void 0),__decorate$f([RefSelector("eDisplayField")],AgPickerField.prototype,"eDisplayField",void 0),__decorate$f([RefSelector("eIcon")],AgPickerField.prototype,"eIcon",void 0),AgPickerField}(AgAbstractField),__extends$d=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$g=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgList=function(_super){function AgList(cssIdentifier){void 0===cssIdentifier&&(cssIdentifier="default");var _this=_super.call(this,'<div class="ag-list ag-'+cssIdentifier+'-list" role="listbox"></div>')||this;return _this.cssIdentifier=cssIdentifier,_this.options=[],_this.itemEls=[],_this}return __extends$d(AgList,_super),AgList.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},AgList.prototype.handleKeyDown=function(e){var key=e.key;switch(key){case KeyCode.ENTER:if(this.highlightedEl){var pos=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(pos)}else this.setValue(this.getValue());break;case KeyCode.DOWN:case KeyCode.UP:var isDown=key===KeyCode.DOWN,itemToHighlight=void 0;if(e.preventDefault(),this.highlightedEl){var nextPos=this.itemEls.indexOf(this.highlightedEl)+(isDown?1:-1);nextPos=Math.min(Math.max(nextPos,0),this.itemEls.length-1),itemToHighlight=this.itemEls[nextPos]}else itemToHighlight=this.itemEls[isDown?0:this.itemEls.length-1];this.highlightItem(itemToHighlight)}},AgList.prototype.addOptions=function(listOptions){var _this=this;return listOptions.forEach((function(listOption){return _this.addOption(listOption)})),this},AgList.prototype.addOption=function(listOption){var value=listOption.value,sanitisedText=escapeString(listOption.text||value);return this.options.push({value,text:sanitisedText}),this.renderOption(value,sanitisedText),this.updateIndices(),this},AgList.prototype.updateIndices=function(){var options=this.getGui().querySelectorAll(".ag-list-item");options.forEach((function(option,idx){setAriaPosInSet(option,idx+1),setAriaSetSize(option,options.length)}))},AgList.prototype.renderOption=function(value,text){var _this=this,itemEl=document.createElement("div");setAriaRole(itemEl,"option"),itemEl.classList.add("ag-list-item","ag-"+this.cssIdentifier+"-list-item"),itemEl.innerHTML="<span>"+text+"</span>",itemEl.tabIndex=-1,this.itemEls.push(itemEl),this.addManagedListener(itemEl,"mouseover",(function(){return _this.highlightItem(itemEl)})),this.addManagedListener(itemEl,"mouseleave",(function(){return _this.clearHighlighted()})),this.addManagedListener(itemEl,"click",(function(){return _this.setValue(value)})),this.getGui().appendChild(itemEl)},AgList.prototype.setValue=function(value,silent){if(this.value===value)return this.fireItemSelected(),this;if(null==value)return this.reset(),this;var idx=this.options.findIndex((function(option){return option.value===value}));if(-1!==idx){var option=this.options[idx];this.value=option.value,this.displayValue=null!=option.text?option.text:option.value,this.highlightItem(this.itemEls[idx]),silent||this.fireChangeEvent()}return this},AgList.prototype.setValueByIndex=function(idx){return this.setValue(this.options[idx].value)},AgList.prototype.getValue=function(){return this.value},AgList.prototype.getDisplayValue=function(){return this.displayValue},AgList.prototype.refreshHighlighted=function(){var _this=this;this.clearHighlighted();var idx=this.options.findIndex((function(option){return option.value===_this.value}));-1!==idx&&this.highlightItem(this.itemEls[idx])},AgList.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},AgList.prototype.highlightItem=function(el){el.offsetParent&&(this.clearHighlighted(),this.highlightedEl=el,this.highlightedEl.classList.add(AgList.ACTIVE_CLASS),setAriaSelected(this.highlightedEl,!0),this.highlightedEl.focus())},AgList.prototype.clearHighlighted=function(){this.highlightedEl&&this.highlightedEl.offsetParent&&(this.highlightedEl.classList.remove(AgList.ACTIVE_CLASS),setAriaSelected(this.highlightedEl,!1),this.highlightedEl=null)},AgList.prototype.fireChangeEvent=function(){this.dispatchEvent({type:AgAbstractField.EVENT_CHANGED}),this.fireItemSelected()},AgList.prototype.fireItemSelected=function(){this.dispatchEvent({type:AgList.EVENT_ITEM_SELECTED})},AgList.EVENT_ITEM_SELECTED="selectedItem",AgList.ACTIVE_CLASS="ag-active-item",__decorate$g([PostConstruct],AgList.prototype,"init",null),AgList}(Component),__extends$e=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$h=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgSelect=function(_super){function AgSelect(config){return _super.call(this,config,"ag-select","smallDown","listbox")||this}return __extends$e(AgSelect,_super),AgSelect.prototype.init=function(){var _this=this;this.listComponent=this.createBean(new AgList("select")),this.listComponent.setParentComponent(this),this.eWrapper.tabIndex=0,this.listComponent.addManagedListener(this.listComponent,AgList.EVENT_ITEM_SELECTED,(function(){_this.hideList&&_this.hideList()})),this.listComponent.addManagedListener(this.listComponent,AgAbstractField.EVENT_CHANGED,(function(){_this.setValue(_this.listComponent.getValue(),!1,!0),_this.hideList&&_this.hideList()}))},AgSelect.prototype.showPicker=function(){var _this=this,listGui=this.listComponent.getGui(),eDocument=this.gridOptionsWrapper.getDocument(),destroyMouseWheelFunc=this.addManagedListener(eDocument.body,"wheel",(function(e){!listGui.contains(e.target)&&_this.hideList&&_this.hideList()})),destroyFocusOutFunc=this.addManagedListener(listGui,"focusout",(function(e){!listGui.contains(e.relatedTarget)&&_this.hideList&&_this.hideList()})),translate=this.gridOptionsWrapper.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal:!0,eChild:listGui,closeOnEsc:!0,closedCallback:function(){_this.hideList=null,_this.isPickerDisplayed=!1,destroyFocusOutFunc(),destroyMouseWheelFunc(),_this.isAlive()&&(setAriaExpanded(_this.eWrapper,!1),_this.getFocusableElement().focus())},ariaLabel:translate("ariaLabelSelectField","Select Field")});return addPopupRes&&(this.hideList=addPopupRes.hideFunc),this.isPickerDisplayed=!0,setElementWidth(listGui,getAbsoluteWidth(this.eWrapper)),setAriaExpanded(this.eWrapper,!0),listGui.style.maxHeight=getInnerHeight(this.popupService.getPopupParent())+"px",listGui.style.position="absolute",this.popupService.positionPopupUnderComponent({type:"ag-list",eventSource:this.eWrapper,ePopup:listGui,keepWithinBounds:!0}),this.listComponent.refreshHighlighted(),this.listComponent},AgSelect.prototype.addOptions=function(options){var _this=this;return options.forEach((function(option){return _this.addOption(option)})),this},AgSelect.prototype.addOption=function(option){return this.listComponent.addOption(option),this},AgSelect.prototype.setValue=function(value,silent,fromPicker){return this.value===value?this:(fromPicker||this.listComponent.setValue(value,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),_super.prototype.setValue.call(this,value,silent)))},AgSelect.prototype.destroy=function(){this.hideList&&this.hideList(),this.destroyBean(this.listComponent),_super.prototype.destroy.call(this)},__decorate$h([Autowired("popupService")],AgSelect.prototype,"popupService",void 0),__decorate$h([PostConstruct],AgSelect.prototype,"init",null),AgSelect}(AgPickerField),__extends$f=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$i=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgAbstractInputField=function(_super){function AgAbstractInputField(config,className,inputType,displayFieldTag){void 0===inputType&&(inputType="text"),void 0===displayFieldTag&&(displayFieldTag="input");var _this=_super.call(this,config,'\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'+displayFieldTag+' ref="eInput" class="ag-input-field-input"></'+displayFieldTag+">\n                </div>\n            </div>",className)||this;return _this.inputType=inputType,_this.displayFieldTag=displayFieldTag,_this}return __extends$f(AgAbstractInputField,_super),AgAbstractInputField.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.setInputType(),this.eLabel.classList.add(this.className+"-label"),this.eWrapper.classList.add(this.className+"-input-wrapper"),this.eInput.classList.add(this.className+"-input"),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-"+this.getCompId()+"-input";var _a=this.config,width=_a.width,value=_a.value;null!=width&&this.setWidth(width),null!=value&&this.setValue(value),this.addInputListeners()},AgAbstractInputField.prototype.refreshLabel=function(){exists(this.getLabel())?setAriaLabelledBy(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),_super.prototype.refreshLabel.call(this)},AgAbstractInputField.prototype.addInputListeners=function(){var _this=this;this.addManagedListener(this.eInput,"input",(function(e){return _this.setValue(e.target.value)}))},AgAbstractInputField.prototype.setInputType=function(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)},AgAbstractInputField.prototype.getInputElement=function(){return this.eInput},AgAbstractInputField.prototype.setInputWidth=function(width){return setElementWidth(this.eWrapper,width),this},AgAbstractInputField.prototype.setInputName=function(name){return this.getInputElement().setAttribute("name",name),this},AgAbstractInputField.prototype.getFocusableElement=function(){return this.eInput},AgAbstractInputField.prototype.setMaxLength=function(length){return this.eInput.maxLength=length,this},AgAbstractInputField.prototype.setInputPlaceholder=function(placeholder){return addOrRemoveAttribute(this.eInput,"placeholder",placeholder),this},AgAbstractInputField.prototype.setInputAriaLabel=function(label){return setAriaLabel(this.eInput,label),this},AgAbstractInputField.prototype.setDisabled=function(disabled){return setDisabled(this.eInput,disabled),_super.prototype.setDisabled.call(this,disabled)},__decorate$i([RefSelector("eLabel")],AgAbstractInputField.prototype,"eLabel",void 0),__decorate$i([RefSelector("eWrapper")],AgAbstractInputField.prototype,"eWrapper",void 0),__decorate$i([RefSelector("eInput")],AgAbstractInputField.prototype,"eInput",void 0),AgAbstractInputField}(AgAbstractField),__extends$g=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$j=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(ConditionPosition){ConditionPosition[ConditionPosition.One=0]="One",ConditionPosition[ConditionPosition.Two=1]="Two"}(ConditionPosition||(ConditionPosition={}));var RowHighlightPosition,SimpleFilter=function(_super){function SimpleFilter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$g(SimpleFilter,_super),SimpleFilter.prototype.getNumberOfInputs=function(type){var customOpts=this.optionsFactory.getCustomOption(type);if(customOpts){var numberOfInputs=customOpts.numberOfInputs;return null!=numberOfInputs?numberOfInputs:1}var zeroInputTypes=[SimpleFilter.EMPTY,SimpleFilter.NOT_BLANK,SimpleFilter.BLANK];return type&&zeroInputTypes.indexOf(type)>=0?0:type===SimpleFilter.IN_RANGE?2:1},SimpleFilter.prototype.onFloatingFilterChanged=function(type,value){this.setTypeFromFloatingFilter(type),this.setValueFromFloatingFilter(value),this.onUiChanged(!0)},SimpleFilter.prototype.setTypeFromFloatingFilter=function(type){this.eType1.setValue(type),this.eType2.setValue(this.optionsFactory.getDefaultOption()),(this.isDefaultOperator("AND")?this.eJoinOperatorAnd:this.eJoinOperatorOr).setValue(!0)},SimpleFilter.prototype.getModelFromUi=function(){return this.isConditionUiComplete(ConditionPosition.One)?this.isAllowTwoConditions()&&this.isConditionUiComplete(ConditionPosition.Two)?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:this.createCondition(ConditionPosition.One),condition2:this.createCondition(ConditionPosition.Two)}:this.createCondition(ConditionPosition.One):null},SimpleFilter.prototype.getConditionTypes=function(){return[this.eType1.getValue(),this.eType2.getValue()]},SimpleFilter.prototype.getJoinOperator=function(){return!0===this.eJoinOperatorOr.getValue()?"OR":"AND"},SimpleFilter.prototype.areModelsEqual=function(a,b){if(!a&&!b)return!0;if(!a&&b||a&&!b)return!1;var res,aIsSimple=!a.operator,bIsSimple=!b.operator;if(!aIsSimple&&bIsSimple||aIsSimple&&!bIsSimple)return!1;if(aIsSimple){var aSimple=a,bSimple=b;res=this.areSimpleModelsEqual(aSimple,bSimple)}else{var aCombined=a,bCombined=b;res=aCombined.operator===bCombined.operator&&this.areSimpleModelsEqual(aCombined.condition1,bCombined.condition1)&&this.areSimpleModelsEqual(aCombined.condition2,bCombined.condition2)}return res},SimpleFilter.prototype.setModelIntoUi=function(model){if(model.operator){var combinedModel=model,orChecked="OR"===combinedModel.operator;this.eJoinOperatorAnd.setValue(!orChecked),this.eJoinOperatorOr.setValue(orChecked),this.eType1.setValue(combinedModel.condition1.type),this.eType2.setValue(combinedModel.condition2.type),this.setConditionIntoUi(combinedModel.condition1,ConditionPosition.One),this.setConditionIntoUi(combinedModel.condition2,ConditionPosition.Two)}else{var simpleModel=model;this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND")),this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR")),this.eType1.setValue(simpleModel.type),this.eType2.setValue(this.optionsFactory.getDefaultOption()),this.setConditionIntoUi(simpleModel,ConditionPosition.One),this.setConditionIntoUi(null,ConditionPosition.Two)}return AgPromise.resolve()},SimpleFilter.prototype.doesFilterPass=function(params){var _this=this,model=this.getModel();if(null==model)return!0;var operator=model.operator,models=[];if(operator){var combinedModel=model;models.push(combinedModel.condition1,combinedModel.condition2)}else models.push(model);return models[operator&&"OR"===operator?"some":"every"]((function(m){return _this.individualConditionPasses(params,m)}))},SimpleFilter.prototype.setParams=function(params){_super.prototype.setParams.call(this,params),this.optionsFactory=new OptionsFactory,this.optionsFactory.init(params,this.getDefaultFilterOptions()),this.allowTwoConditions=!params.suppressAndOrCondition,this.alwaysShowBothConditions=!!params.alwaysShowBothConditions,this.defaultJoinOperator=this.getDefaultJoinOperator(params.defaultJoinOperator),this.putOptionsIntoDropdown(),this.addChangedListeners()},SimpleFilter.prototype.getDefaultJoinOperator=function(defaultJoinOperator){return includes(["AND","OR"],defaultJoinOperator)?defaultJoinOperator:"AND"},SimpleFilter.prototype.putOptionsIntoDropdown=function(){var _this=this,filterOptions=this.optionsFactory.getFilterOptions(),eTypes=[this.eType1,this.eType2];filterOptions.forEach((function(option){var listOption="string"==typeof option?_this.createBoilerplateListOption(option):_this.createCustomListOption(option);eTypes.forEach((function(eType){return eType.addOption(listOption)}))})),eTypes.forEach((function(eType){return eType.setDisabled(filterOptions.length<=1)}))},SimpleFilter.prototype.createBoilerplateListOption=function(option){return{value:option,text:this.translate(option)}},SimpleFilter.prototype.createCustomListOption=function(option){var displayKey=option.displayKey,customOption=this.optionsFactory.getCustomOption(option.displayKey);return{value:displayKey,text:customOption?this.gridOptionsWrapper.getLocaleTextFunc()(customOption.displayKey,customOption.displayName):this.translate(displayKey)}},SimpleFilter.prototype.isAllowTwoConditions=function(){return this.allowTwoConditions},SimpleFilter.prototype.createBodyTemplate=function(){return'\n            <ag-select class="ag-filter-select" ref="eOptions1"></ag-select>\n            '+this.createValueTemplate(ConditionPosition.One)+'\n            <div class="ag-filter-condition" ref="eJoinOperatorPanel">\n               <ag-radio-button ref="eJoinOperatorAnd" class="ag-filter-condition-operator ag-filter-condition-operator-and"></ag-radio-button>\n               <ag-radio-button ref="eJoinOperatorOr" class="ag-filter-condition-operator ag-filter-condition-operator-or"></ag-radio-button>\n            </div>\n            <ag-select class="ag-filter-select" ref="eOptions2"></ag-select>\n            '+this.createValueTemplate(ConditionPosition.Two)},SimpleFilter.prototype.getCssIdentifier=function(){return"simple-filter"},SimpleFilter.prototype.updateUiVisibility=function(){var _this=this,elementConditionGroups=[[this.eType1],[this.eType2,this.eJoinOperatorPanel,this.eJoinOperatorAnd,this.eJoinOperatorOr]],elementBodies=[this.eCondition1Body,this.eCondition2Body];elementConditionGroups.forEach((function(group,position){var visible=_this.isConditionVisible(position),disabled=_this.isConditionDisabled(position);group.forEach((function(element){element instanceof AgAbstractInputField||element instanceof AgSelect?(element.setDisabled(disabled),element.setDisplayed(visible)):(setDisabled(element,disabled),setDisplayed(element,visible))}))})),elementBodies.forEach((function(element,index){setDisplayed(element,_this.isConditionBodyVisible(index))})),this.forEachInput((function(element,index,position,numberOfInputs){_this.setElementDisplayed(element,index<numberOfInputs),_this.setElementDisabled(element,_this.isConditionDisabled(position))})),this.resetPlaceholder()},SimpleFilter.prototype.afterGuiAttached=function(params){if(_super.prototype.afterGuiAttached.call(this,params),this.resetPlaceholder(),!params||!params.suppressFocus&&!this.isReadOnly()){var firstInput=this.getInputs()[0][0];if(!firstInput)return;firstInput instanceof AgAbstractInputField&&firstInput.getInputElement().focus()}},SimpleFilter.prototype.resetPlaceholder=function(){var _this=this,globalTranslate=this.gridOptionsWrapper.getLocaleTextFunc();this.forEachInput((function(element,index,_,numberOfInputs){if(element instanceof AgAbstractInputField){var placeholder=0===index&&numberOfInputs>1?"inRangeStart":0===index?"filterOoo":"inRangeEnd",ariaLabel=0===index&&numberOfInputs>1?globalTranslate("ariaFilterFromValue","Filter from value"):0===index?globalTranslate("ariaFilterValue","Filter Value"):globalTranslate("ariaFilterToValue","Filter to Value");element.setInputPlaceholder(_this.translate(placeholder)),element.setInputAriaLabel(ariaLabel)}}))},SimpleFilter.prototype.setElementValue=function(element,value,silent){element instanceof AgAbstractInputField&&element.setValue(null!=value?String(value):null,silent)},SimpleFilter.prototype.setElementDisplayed=function(element,displayed){element instanceof Component&&setDisplayed(element.getGui(),displayed)},SimpleFilter.prototype.setElementDisabled=function(element,disabled){element instanceof Component&&setDisabled(element.getGui(),disabled)},SimpleFilter.prototype.attachElementOnChange=function(element,listener){element instanceof AgAbstractInputField&&element.onValueChange(listener)},SimpleFilter.prototype.forEachInput=function(cb){var _this=this,inputs=this.getInputs();this.getConditionTypes().forEach((function(type,position){for(var numberOfInputs=_this.getNumberOfInputs(type),index=0;index<inputs[position].length;index++){var input=inputs[position][index];null!=input&&cb(input,index,position,numberOfInputs)}}))},SimpleFilter.prototype.isConditionVisible=function(position){return 0===position||!!this.allowTwoConditions&&(this.isReadOnly()?this.isConditionUiComplete(position):!!this.alwaysShowBothConditions||this.isConditionUiComplete(position-1))},SimpleFilter.prototype.isConditionDisabled=function(position){return!!this.isReadOnly()||(!this.isConditionVisible(position)||0!==position&&!this.isConditionUiComplete(position-1))},SimpleFilter.prototype.isConditionBodyVisible=function(position){if(!this.isConditionVisible(position))return!1;var type=this.getConditionTypes()[position];return this.getNumberOfInputs(type)>0},SimpleFilter.prototype.isConditionUiComplete=function(position){return this.getConditionTypes()[position]!==SimpleFilter.EMPTY&&!this.getValues(position).some((function(v){return null==v}))},SimpleFilter.prototype.resetUiToDefaults=function(silent){var _this=this,filteringLabel=this.gridOptionsWrapper.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator"),uniqueGroupId="ag-simple-filter-and-or-"+this.getCompId(),defaultOption=this.optionsFactory.getDefaultOption();return this.eType1.setValue(defaultOption,silent).setAriaLabel(filteringLabel).setDisabled(this.isReadOnly()),this.eType2.setValue(this.optionsFactory.getDefaultOption(),silent).setAriaLabel(filteringLabel).setDisabled(this.isReadOnly()),this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND"),silent).setName(uniqueGroupId).setLabel(this.translate("andCondition")).setDisabled(this.isReadOnly()),this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR"),silent).setName(uniqueGroupId).setLabel(this.translate("orCondition")).setDisabled(this.isReadOnly()),this.forEachInput((function(element){_this.setElementValue(element,null,silent),_this.setElementDisabled(element,_this.isReadOnly())})),this.resetPlaceholder(),AgPromise.resolve()},SimpleFilter.prototype.setConditionIntoUi=function(model,position){var _this=this,values=this.mapValuesFromModel(model);this.forEachInput((function(element,index,elPosition,_){elPosition===position&&_this.setElementValue(element,null!=values[index]?values[index]:null)}))},SimpleFilter.prototype.setValueFromFloatingFilter=function(value){var _this=this;this.forEachInput((function(element,index,position,_){_this.setElementValue(element,0===index&&0===position?value:null)}))},SimpleFilter.prototype.isDefaultOperator=function(operator){return operator===this.defaultJoinOperator},SimpleFilter.prototype.addChangedListeners=function(){var _this=this;if(!this.isReadOnly()){var listener=function(){return _this.onUiChanged()};this.eType1.onValueChange(listener),this.eType2.onValueChange(listener),this.eJoinOperatorOr.onValueChange(listener),this.eJoinOperatorAnd.onValueChange(listener),this.forEachInput((function(element){_this.attachElementOnChange(element,listener)}))}},SimpleFilter.prototype.individualConditionPasses=function(params,filterModel){var cellValue=this.getCellValue(params.node),values=this.mapValuesFromModel(filterModel),customFilterOption=this.optionsFactory.getCustomOption(filterModel.type),customFilterResult=this.evaluateCustomFilter(customFilterOption,values,cellValue);return null!=customFilterResult?customFilterResult:null==cellValue?this.evaluateNullValue(filterModel.type):this.evaluateNonNullValue(values,cellValue,filterModel,params)},SimpleFilter.prototype.evaluateCustomFilter=function(customFilterOption,values,cellValue){if(null!=customFilterOption){var predicate=customFilterOption.predicate;return null==predicate||values.some((function(v){return null==v}))?void 0:predicate(values,cellValue)}},SimpleFilter.prototype.isBlank=function(cellValue){return null==cellValue||"string"==typeof cellValue&&0===cellValue.trim().length},SimpleFilter.EMPTY="empty",SimpleFilter.BLANK="blank",SimpleFilter.NOT_BLANK="notBlank",SimpleFilter.EQUALS="equals",SimpleFilter.NOT_EQUAL="notEqual",SimpleFilter.LESS_THAN="lessThan",SimpleFilter.LESS_THAN_OR_EQUAL="lessThanOrEqual",SimpleFilter.GREATER_THAN="greaterThan",SimpleFilter.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",SimpleFilter.IN_RANGE="inRange",SimpleFilter.CONTAINS="contains",SimpleFilter.NOT_CONTAINS="notContains",SimpleFilter.STARTS_WITH="startsWith",SimpleFilter.ENDS_WITH="endsWith",__decorate$j([RefSelector("eOptions1")],SimpleFilter.prototype,"eType1",void 0),__decorate$j([RefSelector("eOptions2")],SimpleFilter.prototype,"eType2",void 0),__decorate$j([RefSelector("eJoinOperatorPanel")],SimpleFilter.prototype,"eJoinOperatorPanel",void 0),__decorate$j([RefSelector("eJoinOperatorAnd")],SimpleFilter.prototype,"eJoinOperatorAnd",void 0),__decorate$j([RefSelector("eJoinOperatorOr")],SimpleFilter.prototype,"eJoinOperatorOr",void 0),__decorate$j([RefSelector("eCondition1Body")],SimpleFilter.prototype,"eCondition1Body",void 0),__decorate$j([RefSelector("eCondition2Body")],SimpleFilter.prototype,"eCondition2Body",void 0),SimpleFilter}(ProvidedFilter),__extends$h=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ScalarFilter=function(_super){function ScalarFilter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$h(ScalarFilter,_super),ScalarFilter.prototype.setParams=function(params){_super.prototype.setParams.call(this,params),this.scalarFilterParams=params},ScalarFilter.prototype.evaluateNullValue=function(filterType){switch(filterType){case ScalarFilter.EQUALS:case ScalarFilter.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case ScalarFilter.GREATER_THAN:case ScalarFilter.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case ScalarFilter.LESS_THAN:case ScalarFilter.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case ScalarFilter.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case ScalarFilter.BLANK:return!0;case ScalarFilter.NOT_BLANK:return!1}return!1},ScalarFilter.prototype.evaluateNonNullValue=function(values,cellValue,filterModel){var comparator=this.comparator(),compareResult=null!=values[0]?comparator(values[0],cellValue):0;switch(filterModel.type){case ScalarFilter.EQUALS:return 0===compareResult;case ScalarFilter.NOT_EQUAL:return 0!==compareResult;case ScalarFilter.GREATER_THAN:return compareResult>0;case ScalarFilter.GREATER_THAN_OR_EQUAL:return compareResult>=0;case ScalarFilter.LESS_THAN:return compareResult<0;case ScalarFilter.LESS_THAN_OR_EQUAL:return compareResult<=0;case ScalarFilter.IN_RANGE:var compareToResult=comparator(values[1],cellValue);return this.scalarFilterParams.inRangeInclusive?compareResult>=0&&compareToResult<=0:compareResult>0&&compareToResult<0;case ScalarFilter.BLANK:return this.isBlank(cellValue);case ScalarFilter.NOT_BLANK:return!this.isBlank(cellValue);default:return console.warn('AG Grid: Unexpected type of filter "'+filterModel.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},ScalarFilter}(SimpleFilter),__extends$i=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$5=function(){return __assign$5=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$5.apply(this,arguments)},__decorate$k=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DateFilter=function(_super){function DateFilter(){var _this=_super.call(this,"dateFilter")||this;return _this.minValidYear=1e3,_this.maxValidYear=Infinity,_this}return __extends$i(DateFilter,_super),DateFilter.prototype.afterGuiAttached=function(params){_super.prototype.afterGuiAttached.call(this,params),this.dateCondition1FromComp.afterGuiAttached(params)},DateFilter.prototype.mapValuesFromModel=function(filterModel){var _a=filterModel||{},dateFrom=_a.dateFrom,dateTo=_a.dateTo,type=_a.type;return[dateFrom&&parseDateTimeFromString(dateFrom)||null,dateTo&&parseDateTimeFromString(dateTo)||null].slice(0,this.getNumberOfInputs(type))},DateFilter.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},DateFilter.prototype.defaultComparator=function(filterDate,cellValue){return null==cellValue||cellValue<filterDate?-1:cellValue>filterDate?1:0},DateFilter.prototype.setParams=function(params){_super.prototype.setParams.call(this,params),this.dateFilterParams=params;var yearParser=function(param,fallback){if(null!=params[param]){if(!isNaN(params[param]))return null==params[param]?fallback:Number(params[param]);console.warn("AG Grid: DateFilter "+param+" is not a number")}return fallback};this.minValidYear=yearParser("minValidYear",1e3),this.maxValidYear=yearParser("maxValidYear",Infinity),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),this.createDateComponents()},DateFilter.prototype.createDateComponents=function(){var _this=this,createDateCompWrapper=function(element){return new DateCompWrapper(_this.getContext(),_this.userComponentFactory,{onDateChanged:function(){return _this.onUiChanged()},filterParams:_this.dateFilterParams},element)};this.dateCondition1FromComp=createDateCompWrapper(this.eCondition1PanelFrom),this.dateCondition1ToComp=createDateCompWrapper(this.eCondition1PanelTo),this.dateCondition2FromComp=createDateCompWrapper(this.eCondition2PanelFrom),this.dateCondition2ToComp=createDateCompWrapper(this.eCondition2PanelTo),this.addDestroyFunc((function(){_this.forEachInput((function(element){return element.destroy()}))}))},DateFilter.prototype.setElementValue=function(element,value,silent){element.setDate(value)},DateFilter.prototype.setElementDisplayed=function(element,displayed){element.setDisplayed(displayed)},DateFilter.prototype.setElementDisabled=function(element,disabled){element.setDisabled(disabled)},DateFilter.prototype.getDefaultFilterOptions=function(){return DateFilter.DEFAULT_FILTER_OPTIONS},DateFilter.prototype.createValueTemplate=function(position){var pos=position===ConditionPosition.One?"1":"2";return'\n            <div class="ag-filter-body" ref="eCondition'+pos+'Body">\n                <div class="ag-filter-from ag-filter-date-from" ref="eCondition'+pos+'PanelFrom"></div>\n                <div class="ag-filter-to ag-filter-date-to" ref="eCondition'+pos+'PanelTo"></div>\n            </div>'},DateFilter.prototype.isConditionUiComplete=function(position){var _this=this;if(!_super.prototype.isConditionUiComplete.call(this,position))return!1;var valid=!0;return this.forEachInput((function(element,index,elPosition,numberOfInputs){var value;elPosition!==position||!valid||index>=numberOfInputs||(valid=valid&&(null!=(value=element.getDate())&&value.getUTCFullYear()>=_this.minValidYear&&value.getUTCFullYear()<=_this.maxValidYear))})),valid},DateFilter.prototype.areSimpleModelsEqual=function(aSimple,bSimple){return aSimple.dateFrom===bSimple.dateFrom&&aSimple.dateTo===bSimple.dateTo&&aSimple.type===bSimple.type},DateFilter.prototype.getFilterType=function(){return"date"},DateFilter.prototype.createCondition=function(position){var type=this.getConditionTypes()[position],model={},values=this.getValues(position);return values.length>0&&(model.dateFrom=serialiseDate(values[0])),values.length>1&&(model.dateTo=serialiseDate(values[1])),__assign$5({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type},model)},DateFilter.prototype.resetPlaceholder=function(){var globalTranslate=this.gridOptionsWrapper.getLocaleTextFunc(),placeholder=this.translate("dateFormatOoo"),ariaLabel=globalTranslate("ariaFilterValue","Filter Value");this.forEachInput((function(element){element.setInputPlaceholder(placeholder),element.setInputAriaLabel(ariaLabel)}))},DateFilter.prototype.getInputs=function(){return[[this.dateCondition1FromComp,this.dateCondition1ToComp],[this.dateCondition2FromComp,this.dateCondition2ToComp]]},DateFilter.prototype.getValues=function(position){var result=[];return this.forEachInput((function(element,index,elPosition,numberOfInputs){position===elPosition&&index<numberOfInputs&&result.push(element.getDate())})),result},DateFilter.DEFAULT_FILTER_OPTIONS=[ScalarFilter.EQUALS,ScalarFilter.GREATER_THAN,ScalarFilter.LESS_THAN,ScalarFilter.NOT_EQUAL,ScalarFilter.IN_RANGE,ScalarFilter.BLANK,ScalarFilter.NOT_BLANK],__decorate$k([RefSelector("eCondition1PanelFrom")],DateFilter.prototype,"eCondition1PanelFrom",void 0),__decorate$k([RefSelector("eCondition1PanelTo")],DateFilter.prototype,"eCondition1PanelTo",void 0),__decorate$k([RefSelector("eCondition2PanelFrom")],DateFilter.prototype,"eCondition2PanelFrom",void 0),__decorate$k([RefSelector("eCondition2PanelTo")],DateFilter.prototype,"eCondition2PanelTo",void 0),__decorate$k([Autowired("userComponentFactory")],DateFilter.prototype,"userComponentFactory",void 0),DateFilter}(ScalarFilter),__extends$j=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),SimpleFloatingFilter=function(_super){function SimpleFloatingFilter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$j(SimpleFloatingFilter,_super),SimpleFloatingFilter.prototype.getDefaultDebounceMs=function(){return 0},SimpleFloatingFilter.prototype.destroy=function(){_super.prototype.destroy.call(this)},SimpleFloatingFilter.prototype.getTextFromModel=function(model){if(!model)return null;if(null!=model.operator){var combinedModel=model,_a=combinedModel||{},condition1=_a.condition1,condition2=_a.condition2,customOption1=this.optionsFactory.getCustomOption(condition1.type),customOption2=this.optionsFactory.getCustomOption(condition2.type);return[this.conditionToString(condition1,customOption1),combinedModel.operator,this.conditionToString(condition2,customOption2)].join(" ")}var condition=model,customOption=this.optionsFactory.getCustomOption(condition.type),_b=customOption||{},displayKey=_b.displayKey,displayName=_b.displayName,numberOfInputs=_b.numberOfInputs;return displayKey&&displayName&&0===numberOfInputs?(this.gridOptionsWrapper.getLocaleTextFunc()(displayKey,displayName),displayName):this.conditionToString(condition,customOption)},SimpleFloatingFilter.prototype.isEventFromFloatingFilter=function(event){return event&&event.afterFloatingFilter},SimpleFloatingFilter.prototype.getLastType=function(){return this.lastType},SimpleFloatingFilter.prototype.isReadOnly=function(){return this.readOnly},SimpleFloatingFilter.prototype.setLastTypeFromModel=function(model){if(model){var condition;if(model.operator)condition=model.condition1;else condition=model;this.lastType=condition.type}else this.lastType=this.optionsFactory.getDefaultOption()},SimpleFloatingFilter.prototype.canWeEditAfterModelFromParentFilter=function(model){if(!model)return this.isTypeEditable(this.lastType);if(model.operator)return!1;var simpleModel=model;return this.isTypeEditable(simpleModel.type)},SimpleFloatingFilter.prototype.init=function(params){this.optionsFactory=new OptionsFactory,this.optionsFactory.init(params.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!params.filterParams.readOnly;var editable=this.isTypeEditable(this.lastType);this.setEditable(editable)},SimpleFloatingFilter.prototype.doesFilterHaveSingleInput=function(filterType){var numberOfInputs=(this.optionsFactory.getCustomOption(filterType)||{}).numberOfInputs;return null==numberOfInputs||1==numberOfInputs},SimpleFloatingFilter.prototype.isTypeEditable=function(type){var uneditableTypes=[SimpleFilter.IN_RANGE,SimpleFilter.EMPTY,SimpleFilter.BLANK,SimpleFilter.NOT_BLANK];return!!type&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(type)&&uneditableTypes.indexOf(type)<0},SimpleFloatingFilter}(Component),__extends$k=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$l=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DateFloatingFilter=function(_super){function DateFloatingFilter(){return _super.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>')||this}return __extends$k(DateFloatingFilter,_super),DateFloatingFilter.prototype.getDefaultFilterOptions=function(){return DateFilter.DEFAULT_FILTER_OPTIONS},DateFloatingFilter.prototype.conditionToString=function(condition,options){var type=condition.type,numberOfInputs=(options||{}).numberOfInputs,isRange=type==SimpleFilter.IN_RANGE||2===numberOfInputs,dateFrom=parseDateTimeFromString(condition.dateFrom),dateTo=parseDateTimeFromString(condition.dateTo);return isRange?serialiseDate(dateFrom,!1)+"-"+serialiseDate(dateTo,!1):null!=dateFrom?""+serialiseDate(dateFrom,!1):""+type},DateFloatingFilter.prototype.init=function(params){_super.prototype.init.call(this,params),this.params=params,this.createDateComponent();var translate=this.gridOptionsWrapper.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(translate("ariaDateFilterInput","Date Filter Input"))},DateFloatingFilter.prototype.setEditable=function(editable){setDisplayed(this.eDateWrapper,editable),setDisplayed(this.eReadOnlyText.getGui(),!editable)},DateFloatingFilter.prototype.onParentModelChanged=function(model,event){if(!this.isEventFromFloatingFilter(event)){_super.prototype.setLastTypeFromModel.call(this,model);var allowEditing=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(model);if(this.setEditable(allowEditing),allowEditing){if(model){var dateModel=model;this.dateComp.setDate(parseDateTimeFromString(dateModel.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.getTextFromModel(model)),this.dateComp.setDate(null)}},DateFloatingFilter.prototype.onDateChanged=function(){var _this=this,filterValueText=serialiseDate(this.dateComp.getDate());this.params.parentFilterInstance((function(filterInstance){if(filterInstance){var date=parseDateTimeFromString(filterValueText);filterInstance.onFloatingFilterChanged(_this.getLastType()||null,date)}}))},DateFloatingFilter.prototype.createDateComponent=function(){var _this=this,debounceMs=ProvidedFilter.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),dateComponentParams={onDateChanged:debounce(this.onDateChanged.bind(this),debounceMs),filterParams:this.params.column.getColDef().filterParams};this.dateComp=new DateCompWrapper(this.getContext(),this.userComponentFactory,dateComponentParams,this.eDateWrapper),this.addDestroyFunc((function(){return _this.dateComp.destroy()}))},__decorate$l([Autowired("userComponentFactory")],DateFloatingFilter.prototype,"userComponentFactory",void 0),__decorate$l([RefSelector("eReadOnlyText")],DateFloatingFilter.prototype,"eReadOnlyText",void 0),__decorate$l([RefSelector("eDateWrapper")],DateFloatingFilter.prototype,"eDateWrapper",void 0),DateFloatingFilter}(SimpleFloatingFilter),__extends$l=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$m=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DefaultDateComponent=function(_super){function DefaultDateComponent(){return _super.call(this,'\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>')||this}return __extends$l(DefaultDateComponent,_super),DefaultDateComponent.prototype.destroy=function(){_super.prototype.destroy.call(this)},DefaultDateComponent.prototype.init=function(params){var _this=this,eDocument=this.gridOptionsWrapper.getDocument(),inputElement=this.eDateInput.getInputElement();this.shouldUseBrowserDatePicker(params)&&(inputElement.type="date"),this.addManagedListener(inputElement,"mousedown",(function(){_this.eDateInput.isDisabled()||inputElement.focus()})),this.addManagedListener(inputElement,"input",(function(e){e.target===eDocument.activeElement&&(_this.eDateInput.isDisabled()||params.onDateChanged())}));var _a=params.filterParams||{},minValidYear=_a.minValidYear,maxValidYear=_a.maxValidYear;minValidYear&&(inputElement.min=minValidYear+"-01-01"),maxValidYear&&(inputElement.max=maxValidYear+"-12-31")},DefaultDateComponent.prototype.getDate=function(){return parseDateTimeFromString(this.eDateInput.getValue())},DefaultDateComponent.prototype.setDate=function(date){this.eDateInput.setValue(serialiseDate(date,!1))},DefaultDateComponent.prototype.setInputPlaceholder=function(placeholder){this.eDateInput.setInputPlaceholder(placeholder)},DefaultDateComponent.prototype.setDisabled=function(disabled){this.eDateInput.setDisabled(disabled)},DefaultDateComponent.prototype.afterGuiAttached=function(params){params&&params.suppressFocus||this.eDateInput.getInputElement().focus()},DefaultDateComponent.prototype.shouldUseBrowserDatePicker=function(params){return params.filterParams&&null!=params.filterParams.browserDatePicker?params.filterParams.browserDatePicker:isBrowserChrome()||isBrowserFirefox()},__decorate$m([RefSelector("eDateInput")],DefaultDateComponent.prototype,"eDateInput",void 0),DefaultDateComponent}(Component),__extends$m=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$n=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},NumberFilter=function(_super){function NumberFilter(){return _super.call(this,"numberFilter")||this}return __extends$m(NumberFilter,_super),NumberFilter.prototype.mapValuesFromModel=function(filterModel){var _a=filterModel||{},filter=_a.filter,filterTo=_a.filterTo,type=_a.type;return[null==filter?null:filter,null==filterTo?null:filterTo].slice(0,this.getNumberOfInputs(type))},NumberFilter.prototype.getDefaultDebounceMs=function(){return 500},NumberFilter.prototype.comparator=function(){return function(left,right){return left===right?0:left<right?1:-1}},NumberFilter.prototype.setParams=function(params){this.numberFilterParams=params;var allowedCharPattern=this.getAllowedCharPattern();if(allowedCharPattern){var config={allowedCharPattern};this.resetTemplate({"eValue-index0-1":config,"eValue-index1-1":config,"eValue-index0-2":config,"eValue-index1-2":config})}_super.prototype.setParams.call(this,params)},NumberFilter.prototype.getDefaultFilterOptions=function(){return NumberFilter.DEFAULT_FILTER_OPTIONS},NumberFilter.prototype.createValueTemplate=function(position){var pos=position===ConditionPosition.One?"1":"2",agElementTag=this.getAllowedCharPattern()?"ag-input-text-field":"ag-input-number-field";return'\n            <div class="ag-filter-body" ref="eCondition'+pos+'Body" role="presentation">\n                <'+agElementTag+' class="ag-filter-from ag-filter-filter" ref="eValue-index0-'+pos+'"></'+agElementTag+">\n                <"+agElementTag+' class="ag-filter-to ag-filter-filter" ref="eValue-index1-'+pos+'"></'+agElementTag+">\n            </div>"},NumberFilter.prototype.getValues=function(position){var _this=this,result=[];return this.forEachInput((function(element,index,elPosition,numberOfInputs){position===elPosition&&index<numberOfInputs&&result.push(_this.stringToFloat(element.getValue()))})),result},NumberFilter.prototype.areSimpleModelsEqual=function(aSimple,bSimple){return aSimple.filter===bSimple.filter&&aSimple.filterTo===bSimple.filterTo&&aSimple.type===bSimple.type},NumberFilter.prototype.getFilterType=function(){return"number"},NumberFilter.prototype.stringToFloat=function(value){if("number"==typeof value)return value;var filterText=makeNull(value);return null!=filterText&&""===filterText.trim()&&(filterText=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(filterText):null==filterText||"-"===filterText.trim()?null:parseFloat(filterText)},NumberFilter.prototype.createCondition=function(position){var type=this.getConditionTypes()[position],model={filterType:this.getFilterType(),type},values=this.getValues(position);return values.length>0&&(model.filter=values[0]),values.length>1&&(model.filterTo=values[1]),model},NumberFilter.prototype.getInputs=function(){return[[this.eValueFrom1,this.eValueTo1],[this.eValueFrom2,this.eValueTo2]]},NumberFilter.prototype.getAllowedCharPattern=function(){var allowedCharPattern=(this.numberFilterParams||{}).allowedCharPattern;return allowedCharPattern||(isBrowserChrome()||isBrowserEdge()?null:"\\d\\-\\.")},NumberFilter.DEFAULT_FILTER_OPTIONS=[ScalarFilter.EQUALS,ScalarFilter.NOT_EQUAL,ScalarFilter.LESS_THAN,ScalarFilter.LESS_THAN_OR_EQUAL,ScalarFilter.GREATER_THAN,ScalarFilter.GREATER_THAN_OR_EQUAL,ScalarFilter.IN_RANGE,ScalarFilter.BLANK,ScalarFilter.NOT_BLANK],__decorate$n([RefSelector("eValue-index0-1")],NumberFilter.prototype,"eValueFrom1",void 0),__decorate$n([RefSelector("eValue-index1-1")],NumberFilter.prototype,"eValueTo1",void 0),__decorate$n([RefSelector("eValue-index0-2")],NumberFilter.prototype,"eValueFrom2",void 0),__decorate$n([RefSelector("eValue-index1-2")],NumberFilter.prototype,"eValueTo2",void 0),NumberFilter}(ScalarFilter),__extends$n=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$6=function(){return __assign$6=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$6.apply(this,arguments)},__decorate$o=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TextFilter=function(_super){function TextFilter(){return _super.call(this,"textFilter")||this}return __extends$n(TextFilter,_super),TextFilter.trimInput=function(value){var trimmedInput=value&&value.trim();return""===trimmedInput?value:trimmedInput},TextFilter.prototype.getDefaultDebounceMs=function(){return 500},TextFilter.prototype.setParams=function(params){_super.prototype.setParams.call(this,params),this.textFilterParams=params,this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?TextFilter.DEFAULT_FORMATTER:TextFilter.DEFAULT_LOWERCASE_FORMATTER)},TextFilter.prototype.getTextMatcher=function(){var legacyComparator=this.textFilterParams.textCustomComparator;return legacyComparator?(_.doOnce((function(){return console.warn("AG Grid - textCustomComparator is deprecated, use textMatcher instead.")}),"textCustomComparator.deprecated"),function(_a){var filterOption=_a.filterOption,value=_a.value,filterText=_a.filterText;return legacyComparator(filterOption,value,filterText)}):this.textFilterParams.textMatcher||TextFilter.DEFAULT_MATCHER},TextFilter.prototype.createCondition=function(position){var type=this.getConditionTypes()[position],model={filterType:this.getFilterType(),type},values=this.getValues(position);return values.length>0&&(model.filter=values[0]),values.length>1&&(model.filterTo=values[1]),model},TextFilter.prototype.getFilterType=function(){return"text"},TextFilter.prototype.areSimpleModelsEqual=function(aSimple,bSimple){return aSimple.filter===bSimple.filter&&aSimple.filterTo===bSimple.filterTo&&aSimple.type===bSimple.type},TextFilter.prototype.getInputs=function(){return[[this.eValueFrom1,this.eValueTo1],[this.eValueFrom2,this.eValueTo2]]},TextFilter.prototype.getValues=function(position){var _this=this,result=[];return this.forEachInput((function(element,index,elPosition,numberOfInputs){if(position===elPosition&&index<numberOfInputs){var value=makeNull(element.getValue()),cleanValue=(_this.textFilterParams.trimInput?TextFilter.trimInput(value):value)||null;result.push(cleanValue),element.setValue(cleanValue,!0)}})),result},TextFilter.prototype.getDefaultFilterOptions=function(){return TextFilter.DEFAULT_FILTER_OPTIONS},TextFilter.prototype.createValueTemplate=function(position){var pos=position===ConditionPosition.One?"1":"2";return'\n            <div class="ag-filter-body" ref="eCondition'+pos+'Body" role="presentation">\n                <ag-input-text-field class=".ag-filter-from ag-filter-filter" ref="eValue-index0-'+pos+'"></ag-input-text-field>\n                <ag-input-text-field class="ag-filter-to ag-filter-filter" ref="eValue-index1-'+pos+'"></ag-input-text-field>\n            </div>'},TextFilter.prototype.mapValuesFromModel=function(filterModel){var _a=filterModel||{},filter=_a.filter,filterTo=_a.filterTo,type=_a.type;return[filter||null,filterTo||null].slice(0,this.getNumberOfInputs(type))},TextFilter.prototype.evaluateNullValue=function(filterType){var filterTypesAllowNulls=[SimpleFilter.NOT_EQUAL,SimpleFilter.NOT_CONTAINS,SimpleFilter.BLANK];return!!filterType&&filterTypesAllowNulls.indexOf(filterType)>=0},TextFilter.prototype.evaluateNonNullValue=function(values,cellValue,filterModel,params){var _this=this,formattedValues=values.map((function(v){return _this.formatter(v)}))||[],cellValueFormatted=this.formatter(cellValue),_a=this.textFilterParams,api=_a.api,colDef=_a.colDef,column=_a.column,columnApi=_a.columnApi,context=_a.context,textFormatter=_a.textFormatter;if(filterModel.type===SimpleFilter.BLANK)return this.isBlank(cellValue);if(filterModel.type===SimpleFilter.NOT_BLANK)return!this.isBlank(cellValue);var matcherParams={api,colDef,column,columnApi,context,node:params.node,data:params.data,filterOption:filterModel.type,value:cellValueFormatted,textFormatter};return formattedValues.some((function(v){return _this.matcher(__assign$6(__assign$6({},matcherParams),{filterText:v}))}))},TextFilter.DEFAULT_FILTER_OPTIONS=[SimpleFilter.CONTAINS,SimpleFilter.NOT_CONTAINS,SimpleFilter.EQUALS,SimpleFilter.NOT_EQUAL,SimpleFilter.STARTS_WITH,SimpleFilter.ENDS_WITH,SimpleFilter.BLANK,SimpleFilter.NOT_BLANK],TextFilter.DEFAULT_FORMATTER=function(from){return from},TextFilter.DEFAULT_LOWERCASE_FORMATTER=function(from){return null==from?null:from.toString().toLowerCase()},TextFilter.DEFAULT_MATCHER=function(_a){var filterOption=_a.filterOption,value=_a.value,filterText=_a.filterText;if(null==filterText)return!1;switch(filterOption){case TextFilter.CONTAINS:return value.indexOf(filterText)>=0;case TextFilter.NOT_CONTAINS:return value.indexOf(filterText)<0;case TextFilter.EQUALS:return value===filterText;case TextFilter.NOT_EQUAL:return value!=filterText;case TextFilter.STARTS_WITH:return 0===value.indexOf(filterText);case TextFilter.ENDS_WITH:var index=value.lastIndexOf(filterText);return index>=0&&index===value.length-filterText.length;default:return!1}},__decorate$o([RefSelector("eValue-index0-1")],TextFilter.prototype,"eValueFrom1",void 0),__decorate$o([RefSelector("eValue-index1-1")],TextFilter.prototype,"eValueTo1",void 0),__decorate$o([RefSelector("eValue-index0-2")],TextFilter.prototype,"eValueFrom2",void 0),__decorate$o([RefSelector("eValue-index1-2")],TextFilter.prototype,"eValueTo2",void 0),TextFilter}(SimpleFilter),__extends$o=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$p=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TextInputFloatingFilter=function(_super){function TextInputFloatingFilter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$o(TextInputFloatingFilter,_super),TextInputFloatingFilter.prototype.postConstruct=function(){this.resetTemplate()},TextInputFloatingFilter.prototype.resetTemplate=function(paramsMap){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterInput"></ag-input-text-field>\n            </div>\n        ',paramsMap)},TextInputFloatingFilter.prototype.getDefaultDebounceMs=function(){return 500},TextInputFloatingFilter.prototype.onParentModelChanged=function(model,event){this.isEventFromFloatingFilter(event)||(this.setLastTypeFromModel(model),this.eFloatingFilterInput.setValue(this.getTextFromModel(model)),this.setEditable(this.canWeEditAfterModelFromParentFilter(model)))},TextInputFloatingFilter.prototype.init=function(params){_super.prototype.init.call(this,params),this.params=params,this.applyActive=ProvidedFilter.isUseApplyButton(this.params.filterParams);var allowedCharPattern=this.params.filterParams.allowedCharPattern;if(null!=allowedCharPattern&&this.resetTemplate({eFloatingFilterInput:{allowedCharPattern}}),!this.isReadOnly()){var debounceMs=ProvidedFilter.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),toDebounce=debounce(this.syncUpWithParentFilter.bind(this),debounceMs),filterGui=this.eFloatingFilterInput.getGui();this.addManagedListener(filterGui,"input",toDebounce),this.addManagedListener(filterGui,"keypress",toDebounce),this.addManagedListener(filterGui,"keydown",toDebounce)}var columnDef=params.column.getDefinition();(this.isReadOnly()||columnDef.filterParams&&columnDef.filterParams.filterOptions&&1===columnDef.filterParams.filterOptions.length&&"inRange"===columnDef.filterParams.filterOptions[0])&&this.eFloatingFilterInput.setDisabled(!0);var displayName=this.columnModel.getDisplayNameForColumn(params.column,"header",!0),translate=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterInput.setInputAriaLabel(displayName+" "+translate("ariaFilterInput","Filter Input"))},TextInputFloatingFilter.prototype.syncUpWithParentFilter=function(e){var _this=this,enterKeyPressed=e.key===KeyCode.ENTER;if(!this.applyActive||enterKeyPressed){var value=this.eFloatingFilterInput.getValue();this.params.filterParams.trimInput&&(value=TextFilter.trimInput(value),this.eFloatingFilterInput.setValue(value,!0)),this.params.parentFilterInstance((function(filterInstance){filterInstance&&filterInstance.onFloatingFilterChanged(_this.getLastType()||null,value||null)}))}},TextInputFloatingFilter.prototype.conditionToString=function(condition,options){var numberOfInputs=(options||{}).numberOfInputs;return condition.type==SimpleFilter.IN_RANGE||2===numberOfInputs?condition.filter+"-"+condition.filterTo:null!=condition.filter?""+condition.filter:""+condition.type},TextInputFloatingFilter.prototype.setEditable=function(editable){this.eFloatingFilterInput.setDisabled(!editable)},__decorate$p([Autowired("columnModel")],TextInputFloatingFilter.prototype,"columnModel",void 0),__decorate$p([RefSelector("eFloatingFilterInput")],TextInputFloatingFilter.prototype,"eFloatingFilterInput",void 0),__decorate$p([PostConstruct],TextInputFloatingFilter.prototype,"postConstruct",null),TextInputFloatingFilter}(SimpleFloatingFilter),__extends$p=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),NumberFloatingFilter=function(_super){function NumberFloatingFilter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$p(NumberFloatingFilter,_super),NumberFloatingFilter.prototype.getDefaultFilterOptions=function(){return NumberFilter.DEFAULT_FILTER_OPTIONS},NumberFloatingFilter}(TextInputFloatingFilter),__extends$q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TextFloatingFilter=function(_super){function TextFloatingFilter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$q(TextFloatingFilter,_super),TextFloatingFilter.prototype.getDefaultFilterOptions=function(){return TextFilter.DEFAULT_FILTER_OPTIONS},TextFloatingFilter}(TextInputFloatingFilter),TouchListener=function(){function TouchListener(eElement,preventMouseClick){var _this=this;void 0===preventMouseClick&&(preventMouseClick=!1),this.destroyFuncs=[],this.touching=!1,this.eventService=new EventService,this.eElement=eElement,this.preventMouseClick=preventMouseClick;var startListener=this.onTouchStart.bind(this),moveListener=this.onTouchMove.bind(this),endListener=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",startListener,{passive:!0}),this.eElement.addEventListener("touchmove",moveListener,{passive:!0}),this.eElement.addEventListener("touchend",endListener,{passive:!1}),this.destroyFuncs.push((function(){_this.eElement.removeEventListener("touchstart",startListener,{passive:!0}),_this.eElement.removeEventListener("touchmove",moveListener,{passive:!0}),_this.eElement.removeEventListener("touchend",endListener,{passive:!1})}))}return TouchListener.prototype.getActiveTouch=function(touchList){for(var i=0;i<touchList.length;i++){if(touchList[i].identifier===this.touchStart.identifier)return touchList[i]}return null},TouchListener.prototype.addEventListener=function(eventType,listener){this.eventService.addEventListener(eventType,listener)},TouchListener.prototype.removeEventListener=function(eventType,listener){this.eventService.removeEventListener(eventType,listener)},TouchListener.prototype.onTouchStart=function(touchEvent){var _this=this;if(!this.touching){this.touchStart=touchEvent.touches[0],this.touching=!0,this.moved=!1;var touchStartCopy=this.touchStart;window.setTimeout((function(){var touchesMatch=_this.touchStart===touchStartCopy;if(_this.touching&&touchesMatch&&!_this.moved){_this.moved=!0;var event_1={type:TouchListener.EVENT_LONG_TAP,touchStart:_this.touchStart,touchEvent};_this.eventService.dispatchEvent(event_1)}}),500)}},TouchListener.prototype.onTouchMove=function(touchEvent){if(this.touching){var touch=this.getActiveTouch(touchEvent.touches);if(touch)!areEventsNear(touch,this.touchStart,4)&&(this.moved=!0)}},TouchListener.prototype.onTouchEnd=function(touchEvent){if(this.touching){if(!this.moved){var event_2={type:TouchListener.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(event_2),this.checkForDoubleTap()}this.preventMouseClick&&touchEvent.preventDefault(),this.touching=!1}},TouchListener.prototype.checkForDoubleTap=function(){var now=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0)if(now-this.lastTapTime>TouchListener.DOUBLE_TAP_MILLIS){var event_3={type:TouchListener.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(event_3),this.lastTapTime=null}else this.lastTapTime=now;else this.lastTapTime=now},TouchListener.prototype.destroy=function(){this.destroyFuncs.forEach((function(func){return func()}))},TouchListener.EVENT_TAP="tap",TouchListener.EVENT_DOUBLE_TAP="doubleTap",TouchListener.EVENT_LONG_TAP="longTap",TouchListener.DOUBLE_TAP_MILLIS=500,TouchListener}(),__extends$r=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderComp=function(_super){function HeaderComp(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.lastMovingChanged=0,_this}return __extends$r(HeaderComp,_super),HeaderComp.prototype.destroy=function(){_super.prototype.destroy.call(this)},HeaderComp.prototype.refresh=function(params){return this.params=params,this.workOutTemplate()==this.currentTemplate&&(this.workOutShowMenu()==this.currentShowMenu&&(this.workOutSort()==this.currentSort&&(this.setDisplayName(params),!0)))},HeaderComp.prototype.workOutTemplate=function(){var template=firstExistingValue(this.params.template,HeaderComp.TEMPLATE);return template=template&&template.trim?template.trim():template},HeaderComp.prototype.init=function(params){this.params=params,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(params.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(params)},HeaderComp.prototype.setDisplayName=function(params){if(this.currentDisplayName!=params.displayName){this.currentDisplayName=params.displayName;var displayNameSanitised=escapeString(this.currentDisplayName);this.eText&&(this.eText.innerHTML=displayNameSanitised)}},HeaderComp.prototype.setupIcons=function(column){this.addInIcon("sortAscending",this.eSortAsc,column),this.addInIcon("sortDescending",this.eSortDesc,column),this.addInIcon("sortUnSort",this.eSortNone,column),this.addInIcon("menu",this.eMenu,column),this.addInIcon("filter",this.eFilter,column)},HeaderComp.prototype.addInIcon=function(iconName,eParent,column){if(null!=eParent){var eIcon=createIconNoSpan(iconName,this.gridOptionsWrapper,column);eIcon&&eParent.appendChild(eIcon)}},HeaderComp.prototype.setupTap=function(){var _this=this,options=this.gridOptionsWrapper;if(!options.isSuppressTouch()){var touchListener=new TouchListener(this.getGui(),!0),suppressMenuHide=options.isSuppressMenuHide(),tapMenuButton=suppressMenuHide&&exists(this.eMenu),menuTouchListener=tapMenuButton?new TouchListener(this.eMenu,!0):touchListener;if(this.params.enableMenu){var eventType=tapMenuButton?"EVENT_TAP":"EVENT_LONG_TAP";this.addManagedListener(menuTouchListener,TouchListener[eventType],(function(event){options.getApi().showColumnMenuAfterMouseClick(_this.params.column,event.touchStart)}))}if(this.params.enableSorting){this.addManagedListener(touchListener,TouchListener.EVENT_TAP,(function(event){var target=event.touchStart.target;suppressMenuHide&&_this.eMenu.contains(target)||_this.sortController.progressSort(_this.params.column,!1,"uiColumnSorted")}))}this.addDestroyFunc((function(){return touchListener.destroy()})),tapMenuButton&&this.addDestroyFunc((function(){return menuTouchListener.destroy()}))}},HeaderComp.prototype.workOutShowMenu=function(){var menuHides=!this.gridOptionsWrapper.isSuppressMenuHide(),onIpadAndMenuHides=isIOSUserAgent()&&menuHides;return this.params.enableMenu&&!onIpadAndMenuHides},HeaderComp.prototype.setMenu=function(){var _this=this;if(this.eMenu)if(this.currentShowMenu=this.workOutShowMenu(),this.currentShowMenu){var suppressMenuHide=this.gridOptionsWrapper.isSuppressMenuHide();this.addManagedListener(this.eMenu,"click",(function(){return _this.showMenu(_this.eMenu)})),this.eMenu.classList.toggle("ag-header-menu-always-show",suppressMenuHide)}else removeFromParent(this.eMenu)},HeaderComp.prototype.showMenu=function(eventSource){eventSource||(eventSource=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,eventSource,"columnMenu")},HeaderComp.prototype.removeSortIcons=function(){removeFromParent(this.eSortAsc),removeFromParent(this.eSortDesc),removeFromParent(this.eSortNone),removeFromParent(this.eSortOrder)},HeaderComp.prototype.workOutSort=function(){return this.params.enableSorting},HeaderComp.prototype.setupSort=function(){var _this=this;if(this.currentSort=this.params.enableSorting,this.currentSort){var sortUsingCtrl=this.gridOptionsWrapper.isMultiSortKeyCtrl();this.addManagedListener(this.params.column,Column.EVENT_MOVING_CHANGED,(function(){_this.lastMovingChanged=(new Date).getTime()})),this.eLabel&&this.addManagedListener(this.eLabel,"click",(function(event){var moving=_this.params.column.isMoving(),movedRecently=(new Date).getTime()-_this.lastMovingChanged<50;if(!(moving||movedRecently)){var multiSort=sortUsingCtrl?event.ctrlKey||event.metaKey:event.shiftKey;_this.params.progressSort(multiSort)}})),this.addManagedListener(this.params.column,Column.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.onSortChanged(),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.setMultiSortOrder.bind(this)),this.setMultiSortOrder()}else this.removeSortIcons()},HeaderComp.prototype.onSortChanged=function(){if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.eSortAsc&&this.eSortAsc.classList.toggle("ag-hidden",!this.params.column.isSortAscending()),this.eSortDesc&&this.eSortDesc.classList.toggle("ag-hidden",!this.params.column.isSortDescending()),this.eSortNone){var alwaysHideNoSort=!this.params.column.getColDef().unSortIcon&&!this.gridOptionsWrapper.isUnSortIcon();this.eSortNone.classList.toggle("ag-hidden",alwaysHideNoSort||!this.params.column.isSortNone())}},HeaderComp.prototype.setMultiSortOrder=function(){if(this.eSortOrder){var col=this.params.column,allColumnsWithSorting=this.sortController.getColumnsWithSortingOrdered(),indexThisCol=allColumnsWithSorting.indexOf(col),moreThanOneColSorting=allColumnsWithSorting.length>1,showIndex=col.isSorting()&&moreThanOneColSorting;setDisplayed(this.eSortOrder,showIndex),indexThisCol>=0?this.eSortOrder.innerHTML=(indexThisCol+1).toString():clearElement(this.eSortOrder)}},HeaderComp.prototype.setupFilterIcon=function(){this.eFilter&&(this.addManagedListener(this.params.column,Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},HeaderComp.prototype.onFilterChanged=function(){var filterPresent=this.params.column.isFilterActive();this.eFilter.classList.toggle("ag-hidden",!filterPresent)},HeaderComp.TEMPLATE='<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation">\n                <span ref="eText" class="ag-header-cell-text"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <span ref="eSortOrder" class="ag-header-icon ag-header-label-icon ag-sort-order" aria-hidden="true"></span>\n                <span ref="eSortAsc" class="ag-header-icon ag-header-label-icon ag-sort-ascending-icon" aria-hidden="true"></span>\n                <span ref="eSortDesc" class="ag-header-icon ag-header-label-icon ag-sort-descending-icon" aria-hidden="true"></span>\n                <span ref="eSortNone" class="ag-header-icon ag-header-label-icon ag-sort-none-icon" aria-hidden="true"></span>\n            </div>\n        </div>',__decorate$q([Autowired("sortController")],HeaderComp.prototype,"sortController",void 0),__decorate$q([Autowired("menuFactory")],HeaderComp.prototype,"menuFactory",void 0),__decorate$q([RefSelector("eFilter")],HeaderComp.prototype,"eFilter",void 0),__decorate$q([RefSelector("eSortAsc")],HeaderComp.prototype,"eSortAsc",void 0),__decorate$q([RefSelector("eSortDesc")],HeaderComp.prototype,"eSortDesc",void 0),__decorate$q([RefSelector("eSortNone")],HeaderComp.prototype,"eSortNone",void 0),__decorate$q([RefSelector("eSortOrder")],HeaderComp.prototype,"eSortOrder",void 0),__decorate$q([RefSelector("eMenu")],HeaderComp.prototype,"eMenu",void 0),__decorate$q([RefSelector("eLabel")],HeaderComp.prototype,"eLabel",void 0),__decorate$q([RefSelector("eText")],HeaderComp.prototype,"eText",void 0),HeaderComp}(Component),__extends$s=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$r=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderGroupComp=function(_super){function HeaderGroupComp(){return _super.call(this,HeaderGroupComp.TEMPLATE)||this}return __extends$s(HeaderGroupComp,_super),HeaderGroupComp.prototype.destroy=function(){_super.prototype.destroy.call(this)},HeaderGroupComp.prototype.init=function(params){this.params=params,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},HeaderGroupComp.prototype.checkWarnings=function(){if(this.params.template){doOnce((function(){return console.warn("AG Grid: A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}),"HeaderGroupComp.templateNotSupported")}},HeaderGroupComp.prototype.setupExpandIcons=function(){var _this=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var expandAction=function(event){if(!isStopPropagationForAgGrid(event)){var newExpandedValue=!_this.params.columnGroup.isExpanded();_this.columnModel.setColumnGroupOpened(_this.params.columnGroup.getProvidedColumnGroup(),newExpandedValue,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,expandAction),this.addTouchAndClickListeners(this.eOpenIcon,expandAction);var stopPropagationAction=function(event){stopPropagationForAgGrid(event)};this.addManagedListener(this.eCloseIcon,"dblclick",stopPropagationAction),this.addManagedListener(this.eOpenIcon,"dblclick",stopPropagationAction),this.addManagedListener(this.getGui(),"dblclick",expandAction),this.updateIconVisibility();var providedColumnGroup=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(providedColumnGroup,ProvidedColumnGroup.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(providedColumnGroup,ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},HeaderGroupComp.prototype.addTouchAndClickListeners=function(eElement,action){var touchListener=new TouchListener(eElement,!0);this.addManagedListener(touchListener,TouchListener.EVENT_TAP,action),this.addDestroyFunc((function(){return touchListener.destroy()})),this.addManagedListener(eElement,"click",action)},HeaderGroupComp.prototype.updateIconVisibility=function(){if(this.params.columnGroup.isExpandable()){var expanded=this.params.columnGroup.isExpanded();setDisplayed(this.eOpenIcon,expanded),setDisplayed(this.eCloseIcon,!expanded)}else setDisplayed(this.eOpenIcon,!1),setDisplayed(this.eCloseIcon,!1)},HeaderGroupComp.prototype.addInIcon=function(iconName,refName){var eIcon=createIconNoSpan(iconName,this.gridOptionsWrapper,null);eIcon&&this.getRefElement(refName).appendChild(eIcon)},HeaderGroupComp.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return setDisplayed(this.eOpenIcon,!1),void setDisplayed(this.eCloseIcon,!1)},HeaderGroupComp.prototype.setupLabel=function(){var displayName=this.params.displayName;if(exists(displayName)){var displayNameSanitised=escapeString(displayName);this.getRefElement("agLabel").innerHTML=displayNameSanitised}},HeaderGroupComp.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>',__decorate$r([Autowired("columnModel")],HeaderGroupComp.prototype,"columnModel",void 0),__decorate$r([RefSelector("agOpened")],HeaderGroupComp.prototype,"eOpenIcon",void 0),__decorate$r([RefSelector("agClosed")],HeaderGroupComp.prototype,"eCloseIcon",void 0),HeaderGroupComp}(Component),__extends$t=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),PopupComponent=function(_super){function PopupComponent(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$t(PopupComponent,_super),PopupComponent.prototype.isPopup=function(){return!0},PopupComponent.prototype.setParentComponent=function(container){container.addCssClass("ag-has-popup"),_super.prototype.setParentComponent.call(this,container)},PopupComponent.prototype.destroy=function(){var parentComp=this.parentComponent;parentComp&&parentComp.isAlive()&&parentComp.getGui().classList.remove("ag-has-popup"),_super.prototype.destroy.call(this)},PopupComponent}(Component),__extends$u=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$s=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},LargeTextCellEditor=function(_super){function LargeTextCellEditor(){return _super.call(this,LargeTextCellEditor.TEMPLATE)||this}return __extends$u(LargeTextCellEditor,_super),LargeTextCellEditor.prototype.init=function(params){this.params=params,this.focusAfterAttached=params.cellStartedEdit,this.eTextArea.setMaxLength(params.maxLength||200).setCols(params.cols||60).setRows(params.rows||10),exists(params.value)&&this.eTextArea.setValue(params.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this))},LargeTextCellEditor.prototype.onKeyDown=function(event){var key=event.key;(key===KeyCode.LEFT||key===KeyCode.UP||key===KeyCode.RIGHT||key===KeyCode.DOWN||event.shiftKey&&key===KeyCode.ENTER)&&event.stopPropagation()},LargeTextCellEditor.prototype.afterGuiAttached=function(){var translate=this.gridOptionsWrapper.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(translate("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},LargeTextCellEditor.prototype.getValue=function(){return this.params.parseValue(this.eTextArea.getValue())},LargeTextCellEditor.TEMPLATE='<div class="ag-large-text" tabindex="0">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',__decorate$s([RefSelector("eTextArea")],LargeTextCellEditor.prototype,"eTextArea",void 0),LargeTextCellEditor}(PopupComponent),__extends$v=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$t=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectCellEditor=function(_super){function SelectCellEditor(){var _this=_super.call(this,'<div class="ag-cell-edit-wrapper"><ag-select class="ag-cell-editor" ref="eSelect"></ag-select></div>')||this;return _this.startedByEnter=!1,_this}return __extends$v(SelectCellEditor,_super),SelectCellEditor.prototype.init=function(params){var _this=this;if(this.focusAfterAttached=params.cellStartedEdit,missing(params.values))console.warn("AG Grid: no values found for select cellEditor");else{this.startedByEnter=null!=params.eventKey&&params.eventKey===KeyCode.ENTER;var hasValue=!1;params.values.forEach((function(value){var option={value},valueFormatted=_this.valueFormatterService.formatValue(params.column,null,null,value),valueFormattedExits=null!=valueFormatted;option.text=valueFormattedExits?valueFormatted:value,_this.eSelect.addOption(option),hasValue=hasValue||params.value===value})),hasValue?this.eSelect.setValue(params.value,!0):params.values.length&&this.eSelect.setValue(params.values[0],!0),this.gridOptionsWrapper.isFullRowEdit()||this.eSelect.onValueChange((function(){return params.stopEditing()}))}},SelectCellEditor.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&this.eSelect.showPicker()},SelectCellEditor.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},SelectCellEditor.prototype.getValue=function(){return this.eSelect.getValue()},SelectCellEditor.prototype.isPopup=function(){return!1},__decorate$t([Autowired("valueFormatterService")],SelectCellEditor.prototype,"valueFormatterService",void 0),__decorate$t([RefSelector("eSelect")],SelectCellEditor.prototype,"eSelect",void 0),SelectCellEditor}(PopupComponent),__extends$w=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),PopupSelectCellEditor=function(_super){function PopupSelectCellEditor(){var _this=_super.call(this)||this;return doOnce((function(){return console.warn('AG Grid: The PopupSelectCellEditor (agPopupSelectCellEditor) is deprecated. Instead use {cellEditor: "agSelectCellEditor", cellEditorPopup: true} ')}),"PopupSelectCellEditor.deprecated"),_this}return __extends$w(PopupSelectCellEditor,_super),PopupSelectCellEditor.prototype.isPopup=function(){return!0},PopupSelectCellEditor}(SelectCellEditor),__extends$x=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$u=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TextCellEditor=function(_super){function TextCellEditor(){return _super.call(this,TextCellEditor.TEMPLATE)||this}return __extends$x(TextCellEditor,_super),TextCellEditor.prototype.init=function(params){this.params=params;var startValue,eInput=this.eInput;params.cellStartedEdit?(this.focusAfterAttached=!0,params.eventKey===KeyCode.BACKSPACE||params.eventKey===KeyCode.DELETE?startValue="":params.charPress?startValue=params.charPress:(startValue=this.getStartValue(params),params.eventKey!==KeyCode.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,startValue=this.getStartValue(params)),null!=startValue&&eInput.setValue(startValue,!0),this.addManagedListener(eInput.getGui(),"keydown",(function(event){var key=event.key;key!==KeyCode.PAGE_UP&&key!==KeyCode.PAGE_DOWN||event.preventDefault()}))},TextCellEditor.prototype.afterGuiAttached=function(){var translate=this.gridOptionsWrapper.getLocaleTextFunc(),eInput=this.eInput;if(eInput.setInputAriaLabel(translate("ariaInputEditor","Input Editor")),this.focusAfterAttached){isBrowserSafari()||eInput.getFocusableElement().focus();var inputEl=eInput.getInputElement();if(this.highlightAllOnFocus)inputEl.select();else{var value=eInput.getValue(),len=exists(value)&&value.length||0;len&&inputEl.setSelectionRange(len,len)}}},TextCellEditor.prototype.focusIn=function(){var eInput=this.eInput,focusEl=eInput.getFocusableElement(),inputEl=eInput.getInputElement();focusEl.focus(),inputEl.select()},TextCellEditor.prototype.getValue=function(){var eInput=this.eInput;return this.params.parseValue(eInput.getValue())},TextCellEditor.prototype.getStartValue=function(params){return params.useFormatter||params.column.getColDef().refData?params.formatValue(params.value):params.value},TextCellEditor.prototype.isPopup=function(){return!1},TextCellEditor.TEMPLATE='<div class="ag-cell-edit-wrapper"><ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field></div>',__decorate$u([RefSelector("eInput")],TextCellEditor.prototype,"eInput",void 0),TextCellEditor}(PopupComponent),__extends$y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),PopupTextCellEditor=function(_super){function PopupTextCellEditor(){var _this=_super.call(this)||this;return doOnce((function(){return console.warn('AG Grid: The PopupTextCellEditor (agPopupTextCellEditor) is deprecated. Instead use {cellEditor: "agTextCellEditor", cellEditorPopup: true} ')}),"PopupTextCellEditor.deprecated"),_this}return __extends$y(PopupTextCellEditor,_super),PopupTextCellEditor.prototype.isPopup=function(){return!0},PopupTextCellEditor}(TextCellEditor),__extends$z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$v=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AnimateShowChangeCellRenderer=function(_super){function AnimateShowChangeCellRenderer(){var _this=_super.call(this,AnimateShowChangeCellRenderer.TEMPLATE)||this;return _this.refreshCount=0,_this}return __extends$z(AnimateShowChangeCellRenderer,_super),AnimateShowChangeCellRenderer.prototype.init=function(params){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(params)},AnimateShowChangeCellRenderer.prototype.showDelta=function(params,delta){var absDelta=Math.abs(delta),valueFormatted=params.formatValue(absDelta),valueToUse=exists(valueFormatted)?valueFormatted:absDelta,deltaUp=delta>=0;this.eDelta.innerHTML=deltaUp?"↑"+valueToUse:"↓"+valueToUse,this.eDelta.classList.toggle("ag-value-change-delta-up",deltaUp),this.eDelta.classList.toggle("ag-value-change-delta-down",!deltaUp)},AnimateShowChangeCellRenderer.prototype.setTimerToRemoveDelta=function(){var _this=this;this.refreshCount++;var refreshCountCopy=this.refreshCount;window.setTimeout((function(){refreshCountCopy===_this.refreshCount&&_this.hideDeltaValue()}),2e3)},AnimateShowChangeCellRenderer.prototype.hideDeltaValue=function(){this.eValue.classList.remove("ag-value-change-value-highlight"),clearElement(this.eDelta)},AnimateShowChangeCellRenderer.prototype.refresh=function(params){var value=params.value;if(value===this.lastValue)return!1;if(exists(params.valueFormatted)?this.eValue.innerHTML=params.valueFormatted:exists(params.value)?this.eValue.innerHTML=value:clearElement(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering())return!1;if("number"==typeof value&&"number"==typeof this.lastValue){var delta=value-this.lastValue;this.showDelta(params,delta)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=value,!0},AnimateShowChangeCellRenderer.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',__decorate$v([Autowired("filterManager")],AnimateShowChangeCellRenderer.prototype,"filterManager",void 0),AnimateShowChangeCellRenderer}(Component),__extends$A=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$w=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AnimateSlideCellRenderer=function(_super){function AnimateSlideCellRenderer(){var _this=_super.call(this,AnimateSlideCellRenderer.TEMPLATE)||this;return _this.refreshCount=0,_this.eCurrent=_this.queryForHtmlElement(".ag-value-slide-current"),_this}return __extends$A(AnimateSlideCellRenderer,_super),AnimateSlideCellRenderer.prototype.init=function(params){this.refresh(params)},AnimateSlideCellRenderer.prototype.addSlideAnimation=function(){var _this=this;this.refreshCount++;var refreshCountCopy=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=loadTemplate('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout((function(){refreshCountCopy===_this.refreshCount&&_this.ePrevious.classList.add("ag-value-slide-out-end")}),50),window.setTimeout((function(){refreshCountCopy===_this.refreshCount&&(_this.getGui().removeChild(_this.ePrevious),_this.ePrevious=null)}),3e3)},AnimateSlideCellRenderer.prototype.refresh=function(params){var value=params.value;return missing(value)&&(value=""),value!==this.lastValue&&(!this.filterManager.isSuppressFlashingCellsBecauseFiltering()&&(this.addSlideAnimation(),this.lastValue=value,exists(params.valueFormatted)?this.eCurrent.innerHTML=params.valueFormatted:exists(params.value)?this.eCurrent.innerHTML=value:clearElement(this.eCurrent),!0))},AnimateSlideCellRenderer.TEMPLATE='<span>\n            <span class="ag-value-slide-current"></span>\n        </span>',__decorate$w([Autowired("filterManager")],AnimateSlideCellRenderer.prototype,"filterManager",void 0),AnimateSlideCellRenderer}(Component);(RowHighlightPosition=exports.RowHighlightPosition||(exports.RowHighlightPosition={}))[RowHighlightPosition.Above=0]="Above",RowHighlightPosition[RowHighlightPosition.Below=1]="Below";var DragSourceType,VerticalDirection,HorizontalDirection,RowNode=function(){function RowNode(beans){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=RowNode.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.selected=!1,this.onRowHeightChangedDebounced=debounce(this.onRowHeightChanged.bind(this),100),this.beans=beans}return RowNode.prototype.setData=function(data){this.setDataCommon(data,!1)},RowNode.prototype.updateData=function(data){this.setDataCommon(data,!0)},RowNode.prototype.setDataCommon=function(data,update){var oldData=this.data;this.data=data,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable();var event=this.createDataChangedEvent(data,oldData,update);this.dispatchLocalEvent(event)},RowNode.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},RowNode.prototype.createDataChangedEvent=function(newData,oldData,update){return{type:RowNode.EVENT_DATA_CHANGED,node:this,oldData,newData,update}},RowNode.prototype.createLocalRowEvent=function(type){return{type,node:this}},RowNode.prototype.getRowIndexString=function(){return this.rowPinned===Constants.PINNED_TOP?"t-"+this.rowIndex:this.rowPinned===Constants.PINNED_BOTTOM?"b-"+this.rowIndex:this.rowIndex.toString()},RowNode.prototype.createDaemonNode=function(){var oldNode=new RowNode(this.beans);return oldNode.id=this.id,oldNode.data=this.data,oldNode.daemon=!0,oldNode.selected=this.selected,oldNode.level=this.level,oldNode},RowNode.prototype.setDataAndId=function(data,id){var oldNode=exists(this.id)?this.createDaemonNode():null,oldData=this.data;this.data=data,this.updateDataOnDetailNode(),this.setId(id),this.beans.selectionService.syncInRowNode(this,oldNode),this.checkRowSelectable();var event=this.createDataChangedEvent(data,oldData,!1);this.dispatchLocalEvent(event)},RowNode.prototype.checkRowSelectable=function(){var isRowSelectableFunc=this.beans.gridOptionsWrapper.getIsRowSelectableFunc();this.setRowSelectable(!isRowSelectableFunc||isRowSelectableFunc(this))},RowNode.prototype.setRowSelectable=function(newVal){this.selectable!==newVal&&(this.selectable=newVal,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_SELECTABLE_CHANGED)))},RowNode.prototype.setId=function(id){var getRowIdFunc=this.beans.gridOptionsWrapper.getRowIdFunc();if(getRowIdFunc)if(this.data){var parentKeys=this.getGroupKeys(!0);this.id=getRowIdFunc({data:this.data,parentKeys:parentKeys.length>0?parentKeys:void 0,level:this.level}),null!==this.id&&"string"==typeof this.id&&this.id.startsWith(RowNode.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row IDs cannot start with "+RowNode.ID_PREFIX_ROW_GROUP+", this is a reserved prefix for AG Grid's row grouping feature."),null!==this.id&&"string"!=typeof this.id&&(this.id=""+this.id)}else this.id=void 0;else this.id=id},RowNode.prototype.getGroupKeys=function(excludeSelf){void 0===excludeSelf&&(excludeSelf=!1);var keys=[],pointer=this;for(excludeSelf&&(pointer=pointer.parent);pointer&&pointer.level>=0;)keys.push(pointer.key),pointer=pointer.parent;return keys.reverse(),keys},RowNode.prototype.isPixelInRange=function(pixel){return!(!exists(this.rowTop)||!exists(this.rowHeight))&&(pixel>=this.rowTop&&pixel<this.rowTop+this.rowHeight)},RowNode.prototype.setFirstChild=function(firstChild){this.firstChild!==firstChild&&(this.firstChild=firstChild,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_FIRST_CHILD_CHANGED)))},RowNode.prototype.setLastChild=function(lastChild){this.lastChild!==lastChild&&(this.lastChild=lastChild,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_LAST_CHILD_CHANGED)))},RowNode.prototype.setChildIndex=function(childIndex){this.childIndex!==childIndex&&(this.childIndex=childIndex,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_CHILD_INDEX_CHANGED)))},RowNode.prototype.setRowTop=function(rowTop){this.oldRowTop=this.rowTop,this.rowTop!==rowTop&&(this.rowTop=rowTop,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_TOP_CHANGED)),this.setDisplayed(null!==rowTop))},RowNode.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},RowNode.prototype.setDisplayed=function(displayed){this.displayed!==displayed&&(this.displayed=displayed,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_DISPLAYED_CHANGED)))},RowNode.prototype.setDragging=function(dragging){this.dragging!==dragging&&(this.dragging=dragging,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_DRAGGING_CHANGED)))},RowNode.prototype.setHighlighted=function(highlighted){highlighted!==this.highlighted&&(this.highlighted=highlighted,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_HIGHLIGHT_CHANGED)))},RowNode.prototype.setAllChildrenCount=function(allChildrenCount){this.allChildrenCount!==allChildrenCount&&(this.allChildrenCount=allChildrenCount,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},RowNode.prototype.setMaster=function(master){this.master!==master&&(this.master&&!master&&(this.expanded=!1),this.master=master,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_MASTER_CHANGED)))},RowNode.prototype.setGroup=function(group){this.group!==group&&(this.group&&!group&&(this.expanded=!1),this.group=group,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_GROUP_CHANGED)))},RowNode.prototype.setRowHeight=function(rowHeight,estimated){void 0===estimated&&(estimated=!1),this.rowHeight=rowHeight,this.rowHeightEstimated=estimated,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_HEIGHT_CHANGED))},RowNode.prototype.setRowAutoHeight=function(cellHeight,column){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[column.getId()]=cellHeight,null!=cellHeight&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=debounce(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},RowNode.prototype.checkAutoHeights=function(){var notAllPresent=!1,nonePresent=!0,newRowHeight=0,autoHeights=this.__autoHeights;null!=autoHeights&&(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach((function(col){var cellHeight=autoHeights[col.getId()];null!=cellHeight?(nonePresent=!1,cellHeight>newRowHeight&&(newRowHeight=cellHeight)):notAllPresent=!0})),notAllPresent||((nonePresent||newRowHeight<10)&&(newRowHeight=this.beans.gridOptionsWrapper.getRowHeightForNode(this).height),newRowHeight!=this.rowHeight&&(this.setRowHeight(newRowHeight),this.onRowHeightChangedDebounced())))},RowNode.prototype.onRowHeightChanged=function(){var rowModel=this.beans.rowModel;rowModel.onRowHeightChanged&&rowModel.onRowHeightChanged()},RowNode.prototype.setRowIndex=function(rowIndex){this.rowIndex!==rowIndex&&(this.rowIndex=rowIndex,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_ROW_INDEX_CHANGED)))},RowNode.prototype.setUiLevel=function(uiLevel){this.uiLevel!==uiLevel&&(this.uiLevel=uiLevel,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_UI_LEVEL_CHANGED)))},RowNode.prototype.setExpanded=function(expanded,e){if(this.expanded!==expanded){this.expanded=expanded,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_EXPANDED_CHANGED));var event=Object.assign({},this.createGlobalRowEvent(Events.EVENT_ROW_GROUP_OPENED),{expanded,event:e||null});this.beans.rowNodeEventThrottle.dispatchExpanded(event),this.beans.gridOptionsWrapper.isGroupIncludeFooter()&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},RowNode.prototype.createGlobalRowEvent=function(type){return{type,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi()}},RowNode.prototype.dispatchLocalEvent=function(event){this.eventService&&this.eventService.dispatchEvent(event)},RowNode.prototype.setDataValue=function(colKey,newValue,eventSource){var column=this.beans.columnModel.getPrimaryColumn(colKey),oldValue=this.beans.valueService.getValue(column,this),valueChanged=this.beans.valueService.setValue(this,column,newValue,eventSource);return this.dispatchCellChangedEvent(column,newValue,oldValue),valueChanged},RowNode.prototype.setGroupValue=function(colKey,newValue){var column=this.beans.columnModel.getGridColumn(colKey);missing(this.groupData)&&(this.groupData={});var columnId=column.getColId(),oldValue=this.groupData[columnId];oldValue!==newValue&&(this.groupData[columnId]=newValue,this.dispatchCellChangedEvent(column,newValue,oldValue))},RowNode.prototype.setAggData=function(newAggData){var _this=this,colIds=getAllKeysInObjects([this.aggData,newAggData]),oldAggData=this.aggData;this.aggData=newAggData,this.eventService&&colIds.forEach((function(colId){var column=_this.beans.columnModel.getGridColumn(colId),value=_this.aggData?_this.aggData[colId]:void 0,oldValue=oldAggData?oldAggData[colId]:void 0;_this.dispatchCellChangedEvent(column,value,oldValue)}))},RowNode.prototype.updateHasChildren=function(){var newValue=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;newValue!==this.__hasChildren&&(this.__hasChildren=!!newValue,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_HAS_CHILDREN_CHANGED)))},RowNode.prototype.hasChildren=function(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren},RowNode.prototype.isEmptyRowGroupNode=function(){return this.group&&missingOrEmpty(this.childrenAfterGroup)},RowNode.prototype.dispatchCellChangedEvent=function(column,newValue,oldValue){var cellChangedEvent={type:RowNode.EVENT_CELL_CHANGED,node:this,column,newValue,oldValue};this.dispatchLocalEvent(cellChangedEvent)},RowNode.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},RowNode.prototype.isExpandable=function(){return!!(this.hasChildren()&&!this.footer||this.master)},RowNode.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},RowNode.prototype.depthFirstSearch=function(callback){this.childrenAfterGroup&&this.childrenAfterGroup.forEach((function(child){return child.depthFirstSearch(callback)})),callback(this)},RowNode.prototype.calculateSelectedFromChildren=function(){var _a,newSelectedValue,atLeastOneSelected=!1,atLeastOneDeSelected=!1,atLeastOneMixed=!1;if(null===(_a=this.childrenAfterGroup)||void 0===_a?void 0:_a.length){for(var i=0;i<this.childrenAfterGroup.length;i++){var child=this.childrenAfterGroup[i];if(child.selectable)switch(child.isSelected()){case!0:atLeastOneSelected=!0;break;case!1:atLeastOneDeSelected=!0;break;default:atLeastOneMixed=!0}}newSelectedValue=atLeastOneMixed?void 0:!(!atLeastOneSelected||atLeastOneDeSelected)||!(!atLeastOneSelected&&atLeastOneDeSelected)&&void 0,this.selectThisNode(newSelectedValue)}},RowNode.prototype.setSelectedInitialValue=function(selected){this.selected=selected},RowNode.prototype.setSelected=function(newValue,clearSelection,suppressFinishActions){void 0===clearSelection&&(clearSelection=!1),void 0===suppressFinishActions&&(suppressFinishActions=!1),this.setSelectedParams({newValue,clearSelection,suppressFinishActions,rangeSelect:!1})},RowNode.prototype.isRowPinned=function(){return this.rowPinned===Constants.PINNED_TOP||this.rowPinned===Constants.PINNED_BOTTOM},RowNode.prototype.setSelectedParams=function(params){var _a,groupSelectsChildren=this.beans.gridOptionsWrapper.isGroupSelectsChildren(),newValue=!0===params.newValue,clearSelection=!0===params.clearSelection,suppressFinishActions=!0===params.suppressFinishActions,rangeSelect=!0===params.rangeSelect,groupSelectsFiltered=groupSelectsChildren&&!0===params.groupSelectsFiltered;if(void 0===this.id)return console.warn("AG Grid: cannot select node until id for node is known"),0;if(this.rowPinned)return console.warn("AG Grid: cannot select pinned rows"),0;if(this.footer)return this.sibling.setSelectedParams(params);if(rangeSelect&&this.beans.selectionService.getLastSelectedNode()){var newRowClicked=this.beans.selectionService.getLastSelectedNode()!==this,allowMultiSelect=this.beans.gridOptionsWrapper.isRowSelectionMulti();if(newRowClicked&&allowMultiSelect){var nodesChanged=this.doRowRangeSelection(params.newValue);return this.beans.selectionService.setLastSelectedNode(this),nodesChanged}}var updatedCount=0;groupSelectsFiltered&&this.group||this.selectThisNode(newValue)&&updatedCount++;if(groupSelectsChildren&&(null===(_a=this.childrenAfterGroup)||void 0===_a?void 0:_a.length)&&(updatedCount+=this.selectChildNodes(newValue,groupSelectsFiltered)),!suppressFinishActions){if(newValue&&(clearSelection||!this.beans.gridOptionsWrapper.isRowSelectionMulti())&&(updatedCount+=this.beans.selectionService.clearOtherNodes(this)),updatedCount>0){this.beans.selectionService.updateGroupsFromChildrenSelections();var event_1={type:Events.EVENT_SELECTION_CHANGED,api:this.beans.gridApi,columnApi:this.beans.columnApi};this.beans.eventService.dispatchEvent(event_1)}newValue&&this.beans.selectionService.setLastSelectedNode(this)}return updatedCount},RowNode.prototype.doRowRangeSelection=function(value){var _this=this;void 0===value&&(value=!0);var groupsSelectChildren=this.beans.gridOptionsWrapper.isGroupSelectsChildren(),lastSelectedNode=this.beans.selectionService.getLastSelectedNode(),nodesToSelect=this.beans.rowModel.getNodesInRangeForSelection(this,lastSelectedNode),updatedCount=0;nodesToSelect.forEach((function(rowNode){rowNode.group&&groupsSelectChildren||!1===value&&_this===rowNode||rowNode.selectThisNode(value)&&updatedCount++})),this.beans.selectionService.updateGroupsFromChildrenSelections();var event={type:Events.EVENT_SELECTION_CHANGED,api:this.beans.gridApi,columnApi:this.beans.columnApi};return this.beans.eventService.dispatchEvent(event),updatedCount},RowNode.prototype.isParentOfNode=function(potentialParent){for(var parentNode=this.parent;parentNode;){if(parentNode===potentialParent)return!0;parentNode=parentNode.parent}return!1},RowNode.prototype.selectThisNode=function(newValue){var selectionNotAllowed=!this.selectable&&newValue,selectionNotChanged=this.selected===newValue;if(selectionNotAllowed||selectionNotChanged)return!1;this.selected=newValue,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(RowNode.EVENT_ROW_SELECTED));var event=this.createGlobalRowEvent(Events.EVENT_ROW_SELECTED);return this.beans.eventService.dispatchEvent(event),!0},RowNode.prototype.selectChildNodes=function(newValue,groupSelectsFiltered){var children=groupSelectsFiltered?this.childrenAfterAggFilter:this.childrenAfterGroup;if(missing(children))return 0;for(var updatedCount=0,i=0;i<children.length;i++)updatedCount+=children[i].setSelectedParams({newValue,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered});return updatedCount},RowNode.prototype.addEventListener=function(eventType,listener){this.eventService||(this.eventService=new EventService),this.eventService.addEventListener(eventType,listener)},RowNode.prototype.removeEventListener=function(eventType,listener){this.eventService&&(this.eventService.removeEventListener(eventType,listener),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))},RowNode.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(RowNode.EVENT_MOUSE_ENTER))},RowNode.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(RowNode.EVENT_MOUSE_LEAVE))},RowNode.prototype.getFirstChildOfFirstChild=function(rowGroupColumn){for(var currentRowNode=this,isCandidate=!0,foundFirstChildPath=!1,nodeToSwapIn=null;isCandidate&&!foundFirstChildPath;){var parentRowNode=currentRowNode.parent;exists(parentRowNode)&&currentRowNode.firstChild?parentRowNode.rowGroupColumn===rowGroupColumn&&(foundFirstChildPath=!0,nodeToSwapIn=parentRowNode):isCandidate=!1,currentRowNode=parentRowNode}return foundFirstChildPath?nodeToSwapIn:null},RowNode.prototype.isFullWidthCell=function(){var isFullWidthCellFunc=this.beans.gridOptionsWrapper.getIsFullWidthCellFunc();return!!isFullWidthCellFunc&&isFullWidthCellFunc({rowNode:this})},RowNode.prototype.getRoute=function(){if(null!=this.key){for(var res=[],pointer=this;null!=pointer.key;)res.push(pointer.key),pointer=pointer.parent;return res.reverse()}},RowNode.ID_PREFIX_ROW_GROUP="row-group-",RowNode.ID_PREFIX_TOP_PINNED="t-",RowNode.ID_PREFIX_BOTTOM_PINNED="b-",RowNode.OBJECT_ID_SEQUENCE=0,RowNode.EVENT_ROW_SELECTED="rowSelected",RowNode.EVENT_DATA_CHANGED="dataChanged",RowNode.EVENT_CELL_CHANGED="cellChanged",RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",RowNode.EVENT_MASTER_CHANGED="masterChanged",RowNode.EVENT_GROUP_CHANGED="groupChanged",RowNode.EVENT_MOUSE_ENTER="mouseEnter",RowNode.EVENT_MOUSE_LEAVE="mouseLeave",RowNode.EVENT_HEIGHT_CHANGED="heightChanged",RowNode.EVENT_TOP_CHANGED="topChanged",RowNode.EVENT_DISPLAYED_CHANGED="displayedChanged",RowNode.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",RowNode.EVENT_LAST_CHILD_CHANGED="lastChildChanged",RowNode.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",RowNode.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",RowNode.EVENT_EXPANDED_CHANGED="expandedChanged",RowNode.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",RowNode.EVENT_SELECTABLE_CHANGED="selectableChanged",RowNode.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",RowNode.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",RowNode.EVENT_DRAGGING_CHANGED="draggingChanged",RowNode}(),__extends$B=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$x=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CheckboxSelectionComponent=function(_super){function CheckboxSelectionComponent(){return _super.call(this,'\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return __extends$B(CheckboxSelectionComponent,_super),CheckboxSelectionComponent.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0)},CheckboxSelectionComponent.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},CheckboxSelectionComponent.prototype.onDataChanged=function(){this.onSelectionChanged()},CheckboxSelectionComponent.prototype.onSelectableChanged=function(){this.showOrHideSelect()},CheckboxSelectionComponent.prototype.onSelectionChanged=function(){var translate=this.gridOptionsWrapper.getLocaleTextFunc(),state=this.rowNode.isSelected(),stateName=void 0===state?translate("ariaIndeterminate","indeterminate"):!0===state?translate("ariaChecked","checked"):translate("ariaUnchecked","unchecked"),ariaLabel=translate("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(state,!0),this.eCheckbox.setInputAriaLabel(ariaLabel+" ("+stateName+")")},CheckboxSelectionComponent.prototype.onCheckedClicked=function(event){var groupSelectsFiltered=this.gridOptionsWrapper.isGroupSelectsFiltered();return this.rowNode.setSelectedParams({newValue:!1,rangeSelect:event.shiftKey,groupSelectsFiltered})},CheckboxSelectionComponent.prototype.onUncheckedClicked=function(event){var groupSelectsFiltered=this.gridOptionsWrapper.isGroupSelectsFiltered();return this.rowNode.setSelectedParams({newValue:!0,rangeSelect:event.shiftKey,groupSelectsFiltered})},CheckboxSelectionComponent.prototype.init=function(params){var _this=this;if(this.rowNode=params.rowNode,this.column=params.column,this.onSelectionChanged(),this.addGuiEventListener("click",(function(event){return stopPropagationForAgGrid(event)})),this.addGuiEventListener("dblclick",(function(event){return stopPropagationForAgGrid(event)})),this.addManagedListener(this.eCheckbox.getInputElement(),"click",(function(event){var isSelected=_this.eCheckbox.getValue();void 0===_this.eCheckbox.getPreviousValue()||void 0===isSelected?0===_this.onUncheckedClicked(event||{})&&_this.onCheckedClicked(event):isSelected?_this.onCheckedClicked(event):_this.onUncheckedClicked(event||{})})),this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsWrapper.getIsRowSelectableFunc()||this.checkboxCallbackExists()){var showOrHideSelectListener=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,showOrHideSelectListener),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,showOrHideSelectListener),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,showOrHideSelectListener),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},CheckboxSelectionComponent.prototype.showOrHideSelect=function(){var selectable=this.rowNode.selectable;selectable&&this.checkboxCallbackExists()&&(selectable=this.column.isCellCheckboxSelection(this.rowNode)),this.setVisible(selectable)},CheckboxSelectionComponent.prototype.checkboxCallbackExists=function(){var colDef=this.column?this.column.getColDef():null;return!!colDef&&"function"==typeof colDef.checkboxSelection},__decorate$x([RefSelector("eCheckbox")],CheckboxSelectionComponent.prototype,"eCheckbox",void 0),__decorate$x([PostConstruct],CheckboxSelectionComponent.prototype,"postConstruct",null),CheckboxSelectionComponent}(Component),__extends$C=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__values$2=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};(DragSourceType=exports.DragSourceType||(exports.DragSourceType={}))[DragSourceType.ToolPanel=0]="ToolPanel",DragSourceType[DragSourceType.HeaderCell=1]="HeaderCell",DragSourceType[DragSourceType.RowDrag=2]="RowDrag",DragSourceType[DragSourceType.ChartPanel=3]="ChartPanel",(VerticalDirection=exports.VerticalDirection||(exports.VerticalDirection={}))[VerticalDirection.Up=0]="Up",VerticalDirection[VerticalDirection.Down=1]="Down",(HorizontalDirection=exports.HorizontalDirection||(exports.HorizontalDirection={}))[HorizontalDirection.Left=0]="Left",HorizontalDirection[HorizontalDirection.Right=1]="Right";var ExcelFactoryMode,DragAndDropService=function(_super){function DragAndDropService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.dragSourceAndParamsList=[],_this.dropTargets=[],_this}var DragAndDropService_1;return __extends$C(DragAndDropService,_super),DragAndDropService_1=DragAndDropService,DragAndDropService.prototype.init=function(){this.ePinnedIcon=createIcon("columnMovePin",this.gridOptionsWrapper,null),this.eHideIcon=createIcon("columnMoveHide",this.gridOptionsWrapper,null),this.eMoveIcon=createIcon("columnMoveMove",this.gridOptionsWrapper,null),this.eLeftIcon=createIcon("columnMoveLeft",this.gridOptionsWrapper,null),this.eRightIcon=createIcon("columnMoveRight",this.gridOptionsWrapper,null),this.eGroupIcon=createIcon("columnMoveGroup",this.gridOptionsWrapper,null),this.eAggregateIcon=createIcon("columnMoveValue",this.gridOptionsWrapper,null),this.ePivotIcon=createIcon("columnMovePivot",this.gridOptionsWrapper,null),this.eDropNotAllowedIcon=createIcon("dropNotAllowed",this.gridOptionsWrapper,null)},DragAndDropService.prototype.addDragSource=function(dragSource,allowTouch){void 0===allowTouch&&(allowTouch=!1);var params={eElement:dragSource.eElement,dragStartPixels:dragSource.dragStartPixels,onDragStart:this.onDragStart.bind(this,dragSource),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this)};this.dragSourceAndParamsList.push({params,dragSource}),this.dragService.addDragSource(params,allowTouch)},DragAndDropService.prototype.removeDragSource=function(dragSource){var sourceAndParams=this.dragSourceAndParamsList.find((function(item){return item.dragSource===dragSource}));sourceAndParams&&(this.dragService.removeDragSource(sourceAndParams.params),removeFromArray(this.dragSourceAndParamsList,sourceAndParams))},DragAndDropService.prototype.clearDragSourceParamsList=function(){var _this=this;this.dragSourceAndParamsList.forEach((function(sourceAndParams){return _this.dragService.removeDragSource(sourceAndParams.params)})),this.dragSourceAndParamsList.length=0},DragAndDropService.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},DragAndDropService.prototype.onDragStart=function(dragSource,mouseEvent){this.dragging=!0,this.dragSource=dragSource,this.eventLastTime=mouseEvent,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},DragAndDropService.prototype.onDragStop=function(mouseEvent){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var draggingEvent=this.createDropTargetEvent(this.lastDropTarget,mouseEvent,null,null,!1);this.lastDropTarget.onDragStop(draggingEvent)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},DragAndDropService.prototype.onDragging=function(mouseEvent,fromNudge){var _this=this,hDirection=this.getHorizontalDirection(mouseEvent),vDirection=this.getVerticalDirection(mouseEvent);this.eventLastTime=mouseEvent,this.positionGhost(mouseEvent);var validDropTargets=this.dropTargets.filter((function(target){return _this.isMouseOnDropTarget(mouseEvent,target)})),len=validDropTargets.length,dropTarget=null;if(len>0&&(dropTarget=1===len?validDropTargets[0]:validDropTargets.reduce((function(prevTarget,currTarget){if(!prevTarget)return currTarget;var prevContainer=prevTarget.getContainer(),currContainer=currTarget.getContainer();return prevContainer.contains(currContainer)?currTarget:prevTarget}))),dropTarget!==this.lastDropTarget)this.leaveLastTargetIfExists(mouseEvent,hDirection,vDirection,fromNudge),this.enterDragTargetIfExists(dropTarget,mouseEvent,hDirection,vDirection,fromNudge),this.lastDropTarget=dropTarget;else if(dropTarget&&dropTarget.onDragging){var draggingEvent=this.createDropTargetEvent(dropTarget,mouseEvent,hDirection,vDirection,fromNudge);dropTarget.onDragging(draggingEvent)}},DragAndDropService.prototype.enterDragTargetIfExists=function(dropTarget,mouseEvent,hDirection,vDirection,fromNudge){if(dropTarget){if(dropTarget.onDragEnter){var dragEnterEvent=this.createDropTargetEvent(dropTarget,mouseEvent,hDirection,vDirection,fromNudge);dropTarget.onDragEnter(dragEnterEvent)}this.setGhostIcon(dropTarget.getIconName?dropTarget.getIconName():null)}},DragAndDropService.prototype.leaveLastTargetIfExists=function(mouseEvent,hDirection,vDirection,fromNudge){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var dragLeaveEvent=this.createDropTargetEvent(this.lastDropTarget,mouseEvent,hDirection,vDirection,fromNudge);this.lastDropTarget.onDragLeave(dragLeaveEvent)}this.setGhostIcon(null)}},DragAndDropService.prototype.getAllContainersFromDropTarget=function(dropTarget){var secondaryContainers=dropTarget.getSecondaryContainers?dropTarget.getSecondaryContainers():null,containers=[[dropTarget.getContainer()]];return secondaryContainers?containers.concat(secondaryContainers):containers},DragAndDropService.prototype.allContainersIntersect=function(mouseEvent,containers){var e_1,_a;try{for(var containers_1=__values$2(containers),containers_1_1=containers_1.next();!containers_1_1.done;containers_1_1=containers_1.next()){var rect=containers_1_1.value.getBoundingClientRect();if(0===rect.width||0===rect.height)return!1;var horizontalFit=mouseEvent.clientX>=rect.left&&mouseEvent.clientX<rect.right,verticalFit=mouseEvent.clientY>=rect.top&&mouseEvent.clientY<rect.bottom;if(!horizontalFit||!verticalFit)return!1}}catch(e_1_1){e_1={error:e_1_1}}finally{try{containers_1_1&&!containers_1_1.done&&(_a=containers_1.return)&&_a.call(containers_1)}finally{if(e_1)throw e_1.error}}return!0},DragAndDropService.prototype.isMouseOnDropTarget=function(mouseEvent,dropTarget){var e_2,_a,allContainersFromDropTarget=this.getAllContainersFromDropTarget(dropTarget),mouseOverTarget=!1;try{for(var allContainersFromDropTarget_1=__values$2(allContainersFromDropTarget),allContainersFromDropTarget_1_1=allContainersFromDropTarget_1.next();!allContainersFromDropTarget_1_1.done;allContainersFromDropTarget_1_1=allContainersFromDropTarget_1.next()){var currentContainers=allContainersFromDropTarget_1_1.value;if(this.allContainersIntersect(mouseEvent,currentContainers)){mouseOverTarget=!0;break}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{allContainersFromDropTarget_1_1&&!allContainersFromDropTarget_1_1.done&&(_a=allContainersFromDropTarget_1.return)&&_a.call(allContainersFromDropTarget_1)}finally{if(e_2)throw e_2.error}}return!(dropTarget.targetContainsSource&&!dropTarget.getContainer().contains(this.dragSource.eElement))&&(mouseOverTarget&&dropTarget.isInterestedIn(this.dragSource.type,this.dragSource.eElement))},DragAndDropService.prototype.addDropTarget=function(dropTarget){this.dropTargets.push(dropTarget)},DragAndDropService.prototype.removeDropTarget=function(dropTarget){this.dropTargets=this.dropTargets.filter((function(target){return target.getContainer()!==dropTarget.getContainer()}))},DragAndDropService.prototype.hasExternalDropZones=function(){return this.dropTargets.some((function(zones){return zones.external}))},DragAndDropService.prototype.findExternalZone=function(params){return this.dropTargets.filter((function(target){return target.external})).find((function(zone){return zone.getContainer()===params.getContainer()}))||null},DragAndDropService.prototype.getHorizontalDirection=function(event){var clientX=this.eventLastTime&&this.eventLastTime.clientX,eClientX=event.clientX;return clientX===eClientX?null:clientX>eClientX?exports.HorizontalDirection.Left:exports.HorizontalDirection.Right},DragAndDropService.prototype.getVerticalDirection=function(event){var clientY=this.eventLastTime&&this.eventLastTime.clientY,eClientY=event.clientY;return clientY===eClientY?null:clientY>eClientY?exports.VerticalDirection.Up:exports.VerticalDirection.Down},DragAndDropService.prototype.createDropTargetEvent=function(dropTarget,event,hDirection,vDirection,fromNudge){var dropZoneTarget=dropTarget.getContainer(),rect=dropZoneTarget.getBoundingClientRect(),api=this.gridApi,columnApi=this.columnApi,dragItem=this.dragItem,dragSource=this.dragSource;return{event,x:event.clientX-rect.left,y:event.clientY-rect.top,vDirection,hDirection,dragSource,fromNudge,dragItem,api,columnApi,dropZoneTarget}},DragAndDropService.prototype.positionGhost=function(event){var ghost=this.eGhost;if(ghost){var ghostHeight=ghost.getBoundingClientRect().height,browserWidth=getBodyWidth()-2,browserHeight=getBodyHeight()-2,top=event.pageY-ghostHeight/2,left=event.pageX-10,eDocument=this.gridOptionsWrapper.getDocument(),win=eDocument.defaultView||window,windowScrollY=win.pageYOffset||eDocument.documentElement.scrollTop,windowScrollX=win.pageXOffset||eDocument.documentElement.scrollLeft;browserWidth>0&&left+ghost.clientWidth>browserWidth+windowScrollX&&(left=browserWidth+windowScrollX-ghost.clientWidth),left<0&&(left=0),browserHeight>0&&top+ghost.clientHeight>browserHeight+windowScrollY&&(top=browserHeight+windowScrollY-ghost.clientHeight),top<0&&(top=0),ghost.style.left=left+"px",ghost.style.top=top+"px"}},DragAndDropService.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},DragAndDropService.prototype.createGhost=function(){this.eGhost=loadTemplate(DragAndDropService_1.GHOST_TEMPLATE);var theme=this.environment.getTheme().theme;theme&&this.eGhost.classList.add(theme),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var eText=this.eGhost.querySelector(".ag-dnd-ghost-label"),dragItemName=this.dragSource.dragItemName;isFunction(dragItemName)&&(dragItemName=dragItemName()),eText.innerHTML=escapeString(dragItemName)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var eDocument=this.gridOptionsWrapper.getDocument(),targetEl=null;try{targetEl=eDocument.fullscreenElement}catch(e){}finally{targetEl||(targetEl=eDocument.querySelector("body"))}this.eGhostParent=targetEl,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},DragAndDropService.prototype.setGhostIcon=function(iconName,shake){void 0===shake&&(shake=!1),clearElement(this.eGhostIcon);var eIcon=null;switch(iconName||(iconName=this.dragSource.defaultIconName||DragAndDropService_1.ICON_NOT_ALLOWED),iconName){case DragAndDropService_1.ICON_PINNED:eIcon=this.ePinnedIcon;break;case DragAndDropService_1.ICON_MOVE:eIcon=this.eMoveIcon;break;case DragAndDropService_1.ICON_LEFT:eIcon=this.eLeftIcon;break;case DragAndDropService_1.ICON_RIGHT:eIcon=this.eRightIcon;break;case DragAndDropService_1.ICON_GROUP:eIcon=this.eGroupIcon;break;case DragAndDropService_1.ICON_AGGREGATE:eIcon=this.eAggregateIcon;break;case DragAndDropService_1.ICON_PIVOT:eIcon=this.ePivotIcon;break;case DragAndDropService_1.ICON_NOT_ALLOWED:eIcon=this.eDropNotAllowedIcon;break;case DragAndDropService_1.ICON_HIDE:eIcon=this.eHideIcon}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",shake),eIcon===this.eHideIcon&&this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()||eIcon&&this.eGhostIcon.appendChild(eIcon)},DragAndDropService.ICON_PINNED="pinned",DragAndDropService.ICON_MOVE="move",DragAndDropService.ICON_LEFT="left",DragAndDropService.ICON_RIGHT="right",DragAndDropService.ICON_GROUP="group",DragAndDropService.ICON_AGGREGATE="aggregate",DragAndDropService.ICON_PIVOT="pivot",DragAndDropService.ICON_NOT_ALLOWED="notAllowed",DragAndDropService.ICON_HIDE="hide",DragAndDropService.GHOST_TEMPLATE='<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>',__decorate$y([Autowired("dragService")],DragAndDropService.prototype,"dragService",void 0),__decorate$y([Autowired("environment")],DragAndDropService.prototype,"environment",void 0),__decorate$y([Autowired("columnApi")],DragAndDropService.prototype,"columnApi",void 0),__decorate$y([Autowired("gridApi")],DragAndDropService.prototype,"gridApi",void 0),__decorate$y([PostConstruct],DragAndDropService.prototype,"init",null),__decorate$y([PreDestroy],DragAndDropService.prototype,"clearDragSourceParamsList",null),DragAndDropService=DragAndDropService_1=__decorate$y([Bean("dragAndDropService")],DragAndDropService)}(BeanStub),__extends$D=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowDragComp=function(_super){function RowDragComp(cellValueFn,rowNode,column,customGui,dragStartPixels,suppressVisibilityChange){var _this=_super.call(this)||this;return _this.cellValueFn=cellValueFn,_this.rowNode=rowNode,_this.column=column,_this.customGui=customGui,_this.dragStartPixels=dragStartPixels,_this.suppressVisibilityChange=suppressVisibilityChange,_this.dragSource=null,_this}return __extends$D(RowDragComp,_super),RowDragComp.prototype.isCustomGui=function(){return null!=this.customGui},RowDragComp.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(createIconNoSpan("rowDrag",this.beans.gridOptionsWrapper,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var strategy=this.beans.gridOptionsWrapper.isRowDragManaged()?new ManagedVisibilityStrategy(this,this.beans,this.rowNode,this.column):new NonManagedVisibilityStrategy(this,this.beans,this.rowNode,this.column);this.createManagedBean(strategy,this.beans.context)}},RowDragComp.prototype.setDragElement=function(dragElement,dragStartPixels){this.setTemplateFromElement(dragElement),this.addDragSource(dragStartPixels)},RowDragComp.prototype.getSelectedCount=function(){if(!this.beans.gridOptionsWrapper.isRowDragMultiRow())return 1;var selection=this.beans.selectionService.getSelectedNodes();return-1!==selection.indexOf(this.rowNode)?selection.length:1},RowDragComp.prototype.checkCompatibility=function(){var managed=this.beans.gridOptionsWrapper.isRowDragManaged();this.beans.gridOptionsWrapper.isTreeData()&&managed&&doOnce((function(){return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true")}),"RowDragComp.managedAndTreeData")},RowDragComp.prototype.addDragSource=function(dragStartPixels){var _this=this;void 0===dragStartPixels&&(dragStartPixels=4),this.dragSource&&this.removeDragSource();var dragItem={rowNode:this.rowNode,columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()},rowDragText=this.column&&this.column.getColDef().rowDragText,translate=this.gridOptionsWrapper.getLocaleTextFunc();this.dragSource={type:exports.DragSourceType.RowDrag,eElement:this.getGui(),dragItemName:function(){var dragItemCount=_this.getSelectedCount();return rowDragText?rowDragText(dragItem,dragItemCount):1===dragItemCount?_this.cellValueFn():dragItemCount+" "+translate("rowDragRows","rows")},getDragItem:function(){return dragItem},dragStartPixels,dragSourceDomDataKey:this.beans.gridOptionsWrapper.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},RowDragComp.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},__decorate$z([Autowired("beans")],RowDragComp.prototype,"beans",void 0),__decorate$z([PostConstruct],RowDragComp.prototype,"postConstruct",null),__decorate$z([PreDestroy],RowDragComp.prototype,"removeDragSource",null),RowDragComp}(Component),VisibilityStrategy=function(_super){function VisibilityStrategy(parent,rowNode,column){var _this=_super.call(this)||this;return _this.parent=parent,_this.rowNode=rowNode,_this.column=column,_this}return __extends$D(VisibilityStrategy,_super),VisibilityStrategy.prototype.setDisplayedOrVisible=function(neverDisplayed){if(neverDisplayed)this.parent.setDisplayed(!1);else{var shown=!0,isShownSometimes=!1;this.column&&(shown=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),isShownSometimes=isFunction(this.column.getColDef().rowDrag)),isShownSometimes?(this.parent.setDisplayed(!0),this.parent.setVisible(shown)):(this.parent.setDisplayed(shown),this.parent.setVisible(!0))}},VisibilityStrategy}(BeanStub),NonManagedVisibilityStrategy=function(_super){function NonManagedVisibilityStrategy(parent,beans,rowNode,column){var _this=_super.call(this,parent,rowNode,column)||this;return _this.beans=beans,_this}return __extends$D(NonManagedVisibilityStrategy,_super),NonManagedVisibilityStrategy.prototype.postConstruct=function(){this.addManagedListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},NonManagedVisibilityStrategy.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},NonManagedVisibilityStrategy.prototype.workOutVisibility=function(){var neverDisplayed=this.beans.gridOptionsWrapper.isSuppressRowDrag();this.setDisplayedOrVisible(neverDisplayed)},__decorate$z([PostConstruct],NonManagedVisibilityStrategy.prototype,"postConstruct",null),NonManagedVisibilityStrategy}(VisibilityStrategy),ManagedVisibilityStrategy=function(_super){function ManagedVisibilityStrategy(parent,beans,rowNode,column){var _this=_super.call(this,parent,rowNode,column)||this;return _this.beans=beans,_this}return __extends$D(ManagedVisibilityStrategy,_super),ManagedVisibilityStrategy.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,Events.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},ManagedVisibilityStrategy.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},ManagedVisibilityStrategy.prototype.workOutVisibility=function(){var rowDragFeature=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),shouldPreventRowMove=rowDragFeature&&rowDragFeature.shouldPreventRowMove(),suppressRowDrag=this.beans.gridOptionsWrapper.isSuppressRowDrag(),hasExternalDropZones=this.beans.dragAndDropService.hasExternalDropZones(),neverDisplayed=shouldPreventRowMove&&!hasExternalDropZones||suppressRowDrag;this.setDisplayedOrVisible(neverDisplayed)},__decorate$z([PostConstruct],ManagedVisibilityStrategy.prototype,"postConstruct",null),ManagedVisibilityStrategy}(VisibilityStrategy),__extends$E=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$7=function(){return __assign$7=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$7.apply(this,arguments)},__decorate$A=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GroupCellRendererCtrl=function(_super){function GroupCellRendererCtrl(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$E(GroupCellRendererCtrl,_super),GroupCellRendererCtrl.prototype.init=function(comp,eGui,eCheckbox,eExpanded,eContracted,compClass,params){this.params=params,this.eGui=eGui,this.eCheckbox=eCheckbox,this.eExpanded=eExpanded,this.eContracted=eContracted,this.comp=comp,this.compClass=compClass;var topLevelFooter=this.isTopLevelFooter(),embeddedRowMismatch=this.isEmbeddedRowMismatch(),nullValue=null==params.value,skipCell=!1;if(this.gridOptionsWrapper.isGroupIncludeFooter()&&this.gridOptionsWrapper.isGroupHideOpenParents()){var node=params.node;if(node.footer)skipCell=(params.colDef&&params.colDef.showRowGroup)!==(node.rowGroupColumn&&node.rowGroupColumn.getColId())}this.cellIsBlank=!topLevelFooter&&(embeddedRowMismatch||nullValue||skipCell),this.cellIsBlank||(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded())},GroupCellRendererCtrl.prototype.destroy=function(){_super.prototype.destroy.call(this),this.expandListener=null},GroupCellRendererCtrl.prototype.refreshAriaExpanded=function(){var _a=this.params,node=_a.node,eParentOfValue=_a.eParentOfValue;if(this.expandListener&&(this.expandListener=this.expandListener()),this.isExpandable()){var listener=function(){setAriaExpanded(eParentOfValue,!!node.expanded)};this.expandListener=this.addManagedListener(node,RowNode.EVENT_EXPANDED_CHANGED,listener)||null,listener()}else removeAriaExpanded(eParentOfValue)},GroupCellRendererCtrl.prototype.isTopLevelFooter=function(){if(!this.gridOptionsWrapper.isGroupIncludeTotalFooter())return!1;if(null!=this.params.value||-1!=this.params.node.level)return!1;var colDef=this.params.colDef;if(null==colDef)return!0;if(!0===colDef.showRowGroup)return!0;var rowGroupCols=this.columnModel.getRowGroupColumns();return!rowGroupCols||0===rowGroupCols.length||rowGroupCols[0].getId()===colDef.showRowGroup},GroupCellRendererCtrl.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsWrapper.isEmbedFullWidthRows())return!1;var pinnedLeftCell=this.params.pinned===Constants.PINNED_LEFT,pinnedRightCell=this.params.pinned===Constants.PINNED_RIGHT,bodyCell=!pinnedLeftCell&&!pinnedRightCell;return this.gridOptionsWrapper.isEnableRtl()?this.columnModel.isPinningLeft()?!pinnedRightCell:!bodyCell:this.columnModel.isPinningLeft()?!pinnedLeftCell:!bodyCell},GroupCellRendererCtrl.prototype.findDisplayedGroupNode=function(){var column=this.params.column,rowNode=this.params.node;if(this.showingValueForOpenedParent)for(var pointer=rowNode.parent;null!=pointer;){if(pointer.rowGroupColumn&&column.isRowGroupDisplayed(pointer.rowGroupColumn.getId())){this.displayedGroupNode=pointer;break}pointer=pointer.parent}missing(this.displayedGroupNode)&&(this.displayedGroupNode=rowNode)},GroupCellRendererCtrl.prototype.setupShowingValueForOpenedParent=function(){var rowNode=this.params.node,column=this.params.column;if(this.gridOptionsWrapper.isGroupHideOpenParents())if(rowNode.groupData){if(null!=rowNode.rowGroupColumn){var keyOfGroupingColumn=rowNode.rowGroupColumn.getId();if(column.isRowGroupDisplayed(keyOfGroupingColumn))return void(this.showingValueForOpenedParent=!1)}var valPresent=null!=rowNode.groupData[column.getId()];this.showingValueForOpenedParent=valPresent}else this.showingValueForOpenedParent=!1;else this.showingValueForOpenedParent=!1},GroupCellRendererCtrl.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},GroupCellRendererCtrl.prototype.addGroupValue=function(){var paramsAdjusted=this.adjustParamsWithDetailsFromRelatedColumn(),innerCompDetails=this.getInnerCompDetails(paramsAdjusted),valueFormatted=paramsAdjusted.valueFormatted,value=paramsAdjusted.value,valueWhenNoRenderer=null!=valueFormatted?valueFormatted:value;this.comp.setInnerRenderer(innerCompDetails,valueWhenNoRenderer)},GroupCellRendererCtrl.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var relatedColumn=this.displayedGroupNode.rowGroupColumn,column=this.params.column;if(!relatedColumn)return this.params;if(null!=column&&!column.isRowGroupDisplayed(relatedColumn.getId()))return this.params;var params=this.params,_a=this.params,value=_a.value,node=_a.node,valueFormatted=this.valueFormatterService.formatValue(relatedColumn,node,value);return __assign$7(__assign$7({},params),{valueFormatted})},GroupCellRendererCtrl.prototype.addFooterValue=function(){var footerValueGetter=this.params.footerValueGetter,footerValue="";if(footerValueGetter){var paramsClone=cloneObject(this.params);paramsClone.value=this.params.value,"function"==typeof footerValueGetter?footerValue=footerValueGetter(paramsClone):"string"==typeof footerValueGetter?footerValue=this.expressionService.evaluate(footerValueGetter,paramsClone):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else footerValue="Total "+(null!=this.params.value?this.params.value:"");var innerCompDetails=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(innerCompDetails,footerValue)},GroupCellRendererCtrl.prototype.getInnerCompDetails=function(params){var _this=this;if(params.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptions.groupRowRendererParams,params);var innerCompDetails=this.userComponentFactory.getInnerRendererDetails(params,params),isGroupRowRenderer=function(details){return details&&details.componentClass==_this.compClass};if(innerCompDetails&&!isGroupRowRenderer(innerCompDetails))return innerCompDetails;var relatedColumn=this.displayedGroupNode.rowGroupColumn,relatedColDef=relatedColumn?relatedColumn.getColDef():void 0;if(relatedColDef){var relatedCompDetails=this.userComponentFactory.getCellRendererDetails(relatedColDef,params);if(relatedCompDetails&&!isGroupRowRenderer(relatedCompDetails))return relatedCompDetails;if(isGroupRowRenderer(relatedCompDetails)&&relatedColDef.cellRendererParams&&relatedColDef.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(relatedColDef.cellRendererParams,params)}},GroupCellRendererCtrl.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},GroupCellRendererCtrl.prototype.updateChildCount=function(){var allChildrenCount=this.displayedGroupNode.allChildrenCount,countString=this.isShowRowGroupForThisRow()&&null!=allChildrenCount&&allChildrenCount>=0?"("+allChildrenCount+")":"";this.comp.setChildCount(countString)},GroupCellRendererCtrl.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsWrapper.isTreeData())return!0;var rowGroupColumn=this.displayedGroupNode.rowGroupColumn;if(!rowGroupColumn)return!1;var column=this.params.column;return null==column||column.isRowGroupDisplayed(rowGroupColumn.getId())},GroupCellRendererCtrl.prototype.addExpandAndContract=function(){var params=this.params,eExpandedIcon=createIconNoSpan("groupExpanded",this.gridOptionsWrapper,null),eContractedIcon=createIconNoSpan("groupContracted",this.gridOptionsWrapper,null);eExpandedIcon&&this.eExpanded.appendChild(eExpandedIcon),eContractedIcon&&this.eContracted.appendChild(eContractedIcon);var eGroupCell=params.eGridCell;this.gridOptionsWrapper.isEnableGroupEdit()||!this.isExpandable()||params.suppressDoubleClickExpand||this.addManagedListener(eGroupCell,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(eGroupCell,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(params.node,RowNode.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var expandableChangedListener=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,expandableChangedListener),this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_MASTER_CHANGED,expandableChangedListener),this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_GROUP_CHANGED,expandableChangedListener),this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_HAS_CHILDREN_CHANGED,expandableChangedListener)},GroupCellRendererCtrl.prototype.onExpandClicked=function(mouseEvent){isStopPropagationForAgGrid(mouseEvent)||(stopPropagationForAgGrid(mouseEvent),this.onExpandOrContract(mouseEvent))},GroupCellRendererCtrl.prototype.onExpandOrContract=function(e){var rowNode=this.displayedGroupNode,nextExpandState=!rowNode.expanded;rowNode.setExpanded(nextExpandState,e)},GroupCellRendererCtrl.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var rowNode=this.displayedGroupNode,reducedLeafNode=this.columnModel.isPivotMode()&&rowNode.leafGroup;if(!(rowNode.isExpandable()&&!rowNode.footer&&!reducedLeafNode))return!1;var column=this.params.column;return null==column||"string"!=typeof column.getColDef().showRowGroup||this.isShowRowGroupForThisRow()},GroupCellRendererCtrl.prototype.showExpandAndContractIcons=function(){var params=this.params,displayedGroup=this.displayedGroupNode,columnModel=this.columnModel,node=params.node,isExpandable=this.isExpandable();if(isExpandable){var expanded=!!this.showingValueForOpenedParent||node.expanded;this.comp.setExpandedDisplayed(expanded),this.comp.setContractedDisplayed(!expanded)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var pivotMode=columnModel.isPivotMode(),pivotModeAndLeafGroup=pivotMode&&displayedGroup.leafGroup,addExpandableCss=isExpandable&&!pivotModeAndLeafGroup,isTotalFooterNode=node.footer&&-1===node.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",addExpandableCss),this.comp.addOrRemoveCssClass("ag-row-group",addExpandableCss),pivotMode?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",pivotModeAndLeafGroup):isTotalFooterNode||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!addExpandableCss)},GroupCellRendererCtrl.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()},GroupCellRendererCtrl.prototype.setupIndent=function(){var node=this.params.node;this.params.suppressPadding||(this.addManagedListener(node,RowNode.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},GroupCellRendererCtrl.prototype.setIndent=function(){if(!this.gridOptionsWrapper.isGroupHideOpenParents()){var params=this.params,rowNode=params.node,fullWithRow=!!params.colDef,treeData=this.gridOptionsWrapper.isTreeData(),paddingCount=!fullWithRow||treeData||!0===params.colDef.showRowGroup?rowNode.uiLevel:0;params.padding>=0&&doOnce((function(){return console.warn("AG Grid: cellRendererParams.padding no longer works, it was deprecated in since v14.2 and removed in v26, configuring padding for groupCellRenderer should be done with Sass variables and themes. Please see the AG Grid documentation page for Themes, in particular the property $row-group-indent-size.")}),"groupCellRenderer->doDeprecatedWay"),this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+paddingCount,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},GroupCellRendererCtrl.prototype.addFullWidthRowDraggerIfNeeded=function(){var _this=this;if(this.params.fullWidth&&this.params.rowDrag){var rowDragComp=new RowDragComp((function(){return _this.params.value}),this.params.node);this.createManagedBean(rowDragComp,this.context),this.eGui.insertAdjacentElement("afterbegin",rowDragComp.getGui())}},GroupCellRendererCtrl.prototype.isUserWantsSelected=function(){var paramsCheckbox=this.params.checkbox;return"function"==typeof paramsCheckbox?paramsCheckbox(this.params):!0===paramsCheckbox},GroupCellRendererCtrl.prototype.addCheckboxIfNeeded=function(){var _this=this,rowNode=this.displayedGroupNode,checkboxNeeded=this.isUserWantsSelected()&&!rowNode.footer&&!rowNode.rowPinned&&!rowNode.detail;if(checkboxNeeded){var cbSelectionComponent_1=new CheckboxSelectionComponent;this.getContext().createBean(cbSelectionComponent_1),cbSelectionComponent_1.init({rowNode,column:this.params.column}),this.eCheckbox.appendChild(cbSelectionComponent_1.getGui()),this.addDestroyFunc((function(){return _this.getContext().destroyBean(cbSelectionComponent_1)}))}this.comp.setCheckboxVisible(checkboxNeeded)},GroupCellRendererCtrl.prototype.onKeyDown=function(event){event.key!==KeyCode.ENTER||this.params.suppressEnterExpand||(this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(event))},GroupCellRendererCtrl.prototype.onCellDblClicked=function(mouseEvent){isStopPropagationForAgGrid(mouseEvent)||(isElementInEventPath(this.eExpanded,mouseEvent)||isElementInEventPath(this.eContracted,mouseEvent)||this.onExpandOrContract(mouseEvent))},__decorate$A([Autowired("expressionService")],GroupCellRendererCtrl.prototype,"expressionService",void 0),__decorate$A([Autowired("valueFormatterService")],GroupCellRendererCtrl.prototype,"valueFormatterService",void 0),__decorate$A([Autowired("columnModel")],GroupCellRendererCtrl.prototype,"columnModel",void 0),__decorate$A([Autowired("userComponentFactory")],GroupCellRendererCtrl.prototype,"userComponentFactory",void 0),__decorate$A([Autowired("gridOptions")],GroupCellRendererCtrl.prototype,"gridOptions",void 0),GroupCellRendererCtrl}(BeanStub),__extends$F=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$B=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GroupCellRenderer=function(_super){function GroupCellRenderer(){return _super.call(this,GroupCellRenderer.TEMPLATE)||this}return __extends$F(GroupCellRenderer,_super),GroupCellRenderer.prototype.init=function(params){var _this=this,compProxy={setInnerRenderer:function(compDetails,valueToDisplay){return _this.setRenderDetails(compDetails,valueToDisplay)},setChildCount:function(count){return _this.eChildCount.innerHTML=count},addOrRemoveCssClass:function(cssClass,value){return _this.addOrRemoveCssClass(cssClass,value)},setContractedDisplayed:function(expanded){return setDisplayed(_this.eContracted,expanded)},setExpandedDisplayed:function(expanded){return setDisplayed(_this.eExpanded,expanded)},setCheckboxVisible:function(visible){return _this.eCheckbox.classList.toggle("ag-invisible",!visible)}},ctrl=this.createManagedBean(new GroupCellRendererCtrl),fullWidth=!params.colDef,eGui=this.getGui();ctrl.init(compProxy,eGui,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,params),fullWidth&&setAriaRole(eGui,"gridcell")},GroupCellRenderer.prototype.setRenderDetails=function(compDetails,valueToDisplay){var _this=this;if(compDetails){var componentPromise=compDetails.newAgStackInstance();if(!componentPromise)return;componentPromise.then((function(comp){if(comp){var destroyComp=function(){return _this.context.destroyBean(comp)};_this.isAlive()?(_this.eValue.appendChild(comp.getGui()),_this.addDestroyFunc(destroyComp)):destroyComp()}}))}else this.eValue.innerText=valueToDisplay},GroupCellRenderer.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),_super.prototype.destroy.call(this)},GroupCellRenderer.prototype.refresh=function(){return!1},GroupCellRenderer.TEMPLATE='<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>',__decorate$B([RefSelector("eExpanded")],GroupCellRenderer.prototype,"eExpanded",void 0),__decorate$B([RefSelector("eContracted")],GroupCellRenderer.prototype,"eContracted",void 0),__decorate$B([RefSelector("eCheckbox")],GroupCellRenderer.prototype,"eCheckbox",void 0),__decorate$B([RefSelector("eValue")],GroupCellRenderer.prototype,"eValue",void 0),__decorate$B([RefSelector("eChildCount")],GroupCellRenderer.prototype,"eChildCount",void 0),GroupCellRenderer}(Component),__extends$G=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$C=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},LoadingCellRenderer=function(_super){function LoadingCellRenderer(){return _super.call(this,LoadingCellRenderer.TEMPLATE)||this}return __extends$G(LoadingCellRenderer,_super),LoadingCellRenderer.prototype.init=function(params){params.node.failedLoad?this.setupFailed():this.setupLoading()},LoadingCellRenderer.prototype.setupFailed=function(){this.eLoadingText.innerText="ERR"},LoadingCellRenderer.prototype.setupLoading=function(){var eLoadingIcon=createIconNoSpan("groupLoading",this.gridOptionsWrapper,null);eLoadingIcon&&this.eLoadingIcon.appendChild(eLoadingIcon);var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc();this.eLoadingText.innerText=localeTextFunc("loadingOoo","Loading")},LoadingCellRenderer.prototype.refresh=function(params){return!1},LoadingCellRenderer.prototype.destroy=function(){_super.prototype.destroy.call(this)},LoadingCellRenderer.TEMPLATE='<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',__decorate$C([RefSelector("eLoadingIcon")],LoadingCellRenderer.prototype,"eLoadingIcon",void 0),__decorate$C([RefSelector("eLoadingText")],LoadingCellRenderer.prototype,"eLoadingText",void 0),LoadingCellRenderer}(Component),__extends$H=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),LoadingOverlayComponent=function(_super){function LoadingOverlayComponent(){return _super.call(this)||this}return __extends$H(LoadingOverlayComponent,_super),LoadingOverlayComponent.prototype.destroy=function(){_super.prototype.destroy.call(this)},LoadingOverlayComponent.prototype.init=function(params){var template=this.gridOptionsWrapper.getOverlayLoadingTemplate()?this.gridOptionsWrapper.getOverlayLoadingTemplate():LoadingOverlayComponent.DEFAULT_LOADING_OVERLAY_TEMPLATE,localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),localisedTemplate=template.replace("[LOADING...]",localeTextFunc("loadingOoo","Loading..."));this.setTemplate(localisedTemplate)},LoadingOverlayComponent.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',LoadingOverlayComponent}(Component),__extends$I=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),NoRowsOverlayComponent=function(_super){function NoRowsOverlayComponent(){return _super.call(this)||this}return __extends$I(NoRowsOverlayComponent,_super),NoRowsOverlayComponent.prototype.destroy=function(){_super.prototype.destroy.call(this)},NoRowsOverlayComponent.prototype.init=function(params){var template=this.gridOptionsWrapper.getOverlayNoRowsTemplate()?this.gridOptionsWrapper.getOverlayNoRowsTemplate():NoRowsOverlayComponent.DEFAULT_NO_ROWS_TEMPLATE,localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),localisedTemplate=template.replace("[NO_ROWS_TO_SHOW]",localeTextFunc("noRowsToShow","No Rows To Show"));this.setTemplate(localisedTemplate)},NoRowsOverlayComponent.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',NoRowsOverlayComponent}(Component),__extends$J=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TooltipComponent=function(_super){function TooltipComponent(){return _super.call(this,'<div class="ag-tooltip"></div>')||this}return __extends$J(TooltipComponent,_super),TooltipComponent.prototype.init=function(params){var value=params.value;this.getGui().innerHTML=escapeString(value)},TooltipComponent}(PopupComponent),__extends$K=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$D=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},UserComponentRegistry=function(_super){function UserComponentRegistry(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.agGridDefaults={agDateInput:DefaultDateComponent,agColumnHeader:HeaderComp,agColumnGroupHeader:HeaderGroupComp,agTextColumnFloatingFilter:TextFloatingFilter,agNumberColumnFloatingFilter:NumberFloatingFilter,agDateColumnFloatingFilter:DateFloatingFilter,agReadOnlyFloatingFilter:ReadOnlyFloatingFilter,agAnimateShowChangeCellRenderer:AnimateShowChangeCellRenderer,agAnimateSlideCellRenderer:AnimateSlideCellRenderer,agGroupCellRenderer:GroupCellRenderer,agGroupRowRenderer:GroupCellRenderer,agLoadingCellRenderer:LoadingCellRenderer,agCellEditor:TextCellEditor,agTextCellEditor:TextCellEditor,agSelectCellEditor:SelectCellEditor,agPopupTextCellEditor:PopupTextCellEditor,agPopupSelectCellEditor:PopupSelectCellEditor,agLargeTextCellEditor:LargeTextCellEditor,agTextColumnFilter:TextFilter,agNumberColumnFilter:NumberFilter,agDateColumnFilter:DateFilter,agLoadingOverlay:LoadingOverlayComponent,agNoRowsOverlay:NoRowsOverlayComponent,agTooltipComponent:TooltipComponent},_this.agDeprecatedNames={set:{newComponentName:"agSetColumnFilter",propertyHolder:"filter"},text:{newComponentName:"agTextColumnFilter",propertyHolder:"filter"},number:{newComponentName:"agNumberColumnFilter",propertyHolder:"filter"},date:{newComponentName:"agDateColumnFilter",propertyHolder:"filter"},group:{newComponentName:"agGroupCellRenderer",propertyHolder:"cellRenderer"},animateShowChange:{newComponentName:"agAnimateShowChangeCellRenderer",propertyHolder:"cellRenderer"},animateSlide:{newComponentName:"agAnimateSlideCellRenderer",propertyHolder:"cellRenderer"},select:{newComponentName:"agSelectCellEditor",propertyHolder:"cellEditor"},largeText:{newComponentName:"agLargeTextCellEditor",propertyHolder:"cellEditor"},popupSelect:{newComponentName:"agPopupSelectCellEditor",propertyHolder:"cellEditor"},popupText:{newComponentName:"agPopupTextCellEditor",propertyHolder:"cellEditor"},richSelect:{newComponentName:"agRichSelectCellEditor",propertyHolder:"cellEditor"},headerComponent:{newComponentName:"agColumnHeader",propertyHolder:"headerComponent"}},_this.jsComps={},_this.fwComps={},_this}return __extends$K(UserComponentRegistry,_super),UserComponentRegistry.prototype.init=function(){var _this=this;null!=this.gridOptions.components&&iterateObject(this.gridOptions.components,(function(key,component){return _this.registerJsComponent(key,component)})),null!=this.gridOptions.frameworkComponents&&iterateObject(this.gridOptions.frameworkComponents,(function(key,component){return _this.registerFwComponent(key,component)}))},UserComponentRegistry.prototype.registerDefaultComponent=function(rawName,component){var name=this.translateIfDeprecated(rawName);this.agGridDefaults[name]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[name]=component},UserComponentRegistry.prototype.registerJsComponent=function(rawName,component){var name=this.translateIfDeprecated(rawName);this.fwComps[name]?console.error("Trying to register a component that you have already registered for frameworks: "+name):this.jsComps[name]=component},UserComponentRegistry.prototype.registerFwComponent=function(rawName,component){doOnce((function(){return console.warn("AG Grid: As of v27, registering components via grid property frameworkComponents is deprecated. Instead register both JavaScript AND Framework Components via the components property.")}),"UserComponentRegistry.frameworkComponentsDeprecated");var name=this.translateIfDeprecated(rawName);this.fwComps[name]=component},UserComponentRegistry.prototype.retrieve=function(rawName){var name=this.translateIfDeprecated(rawName),createResult=function(component,componentFromFramework){return{componentFromFramework,component}},registeredViaFrameworkComp=this.getFrameworkOverrides().frameworkComponent(name);if(null!=registeredViaFrameworkComp)return createResult(registeredViaFrameworkComp,!0);var frameworkComponent=this.fwComps[name];if(frameworkComponent)return createResult(frameworkComponent,!0);var jsComponent=this.jsComps[name];if(jsComponent)return createResult(jsComponent,this.getFrameworkOverrides().isFrameworkComponent(jsComponent));var defaultComponent=this.agGridDefaults[name];return defaultComponent?createResult(defaultComponent,!1):(Object.keys(this.agGridDefaults).indexOf(name)<0&&console.warn("AG Grid: Looking for component ["+name+"] but it wasn't found."),null)},UserComponentRegistry.prototype.translateIfDeprecated=function(raw){var deprecatedInfo=this.agDeprecatedNames[raw];return null!=deprecatedInfo?(doOnce((function(){console.warn("ag-grid. Since v15.0 component names have been renamed to be namespaced. You should rename "+deprecatedInfo.propertyHolder+":"+raw+" to "+deprecatedInfo.propertyHolder+":"+deprecatedInfo.newComponentName)}),"DEPRECATE_COMPONENT_"+raw),deprecatedInfo.newComponentName):raw},__decorate$D([Autowired("gridOptions")],UserComponentRegistry.prototype,"gridOptions",void 0),__decorate$D([Autowired("agComponentUtils")],UserComponentRegistry.prototype,"agComponentUtils",void 0),__decorate$D([PostConstruct],UserComponentRegistry.prototype,"init",null),UserComponentRegistry=__decorate$D([Bean("userComponentRegistry")],UserComponentRegistry)}(BeanStub),DateComponent={propertyName:"dateComponent",cellRenderer:!1},HeaderComponent={propertyName:"headerComponent",cellRenderer:!1},HeaderGroupComponent={propertyName:"headerGroupComponent",cellRenderer:!1},CellRendererComponent={propertyName:"cellRenderer",cellRenderer:!0},CellEditorComponent={propertyName:"cellEditor",cellRenderer:!1},InnerRendererComponent={propertyName:"innerRenderer",cellRenderer:!0},LoadingOverlayComponent$1={propertyName:"loadingOverlayComponent",cellRenderer:!1},NoRowsOverlayComponent$1={propertyName:"noRowsOverlayComponent",cellRenderer:!1},TooltipComponent$1={propertyName:"tooltipComponent",cellRenderer:!1},FilterComponent={propertyName:"filter",cellRenderer:!1},FloatingFilterComponent={propertyName:"floatingFilterComponent",cellRenderer:!1},ToolPanelComponent={propertyName:"toolPanel",cellRenderer:!1},StatusPanelComponent={propertyName:"statusPanel",cellRenderer:!1},FullWidth={propertyName:"fullWidthCellRenderer",cellRenderer:!0},FullWidthLoading={propertyName:"loadingCellRenderer",cellRenderer:!0},FullWidthGroup={propertyName:"groupRowRenderer",cellRenderer:!0},FullWidthDetail={propertyName:"detailCellRenderer",cellRenderer:!0},FloatingFilterMapper=function(){function FloatingFilterMapper(){}return FloatingFilterMapper.getFloatingFilterType=function(filterType){return this.filterToFloatingFilterMapping[filterType]},FloatingFilterMapper.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},FloatingFilterMapper}(),__extends$L=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$E=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},UserComponentFactory=function(_super){function UserComponentFactory(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$L(UserComponentFactory,_super),UserComponentFactory.prototype.getHeaderCompDetails=function(colDef,params){return this.getCompDetails(colDef,HeaderComponent,"agColumnHeader",params)},UserComponentFactory.prototype.getHeaderGroupCompDetails=function(params){var colGroupDef=params.columnGroup.getColGroupDef();return this.getCompDetails(colGroupDef,HeaderGroupComponent,"agColumnGroupHeader",params)},UserComponentFactory.prototype.getFullWidthCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidth,null,params,!0)},UserComponentFactory.prototype.getFullWidthLoadingCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidthLoading,"agLoadingCellRenderer",params,!0)},UserComponentFactory.prototype.getFullWidthGroupCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidthGroup,"agGroupRowRenderer",params,!0)},UserComponentFactory.prototype.getFullWidthDetailCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidthDetail,"agDetailCellRenderer",params,!0)},UserComponentFactory.prototype.getInnerRendererDetails=function(def,params){return this.getCompDetails(def,InnerRendererComponent,null,params)},UserComponentFactory.prototype.getFullWidthGroupRowInnerCellRenderer=function(def,params){return this.getCompDetails(def,InnerRendererComponent,null,params)},UserComponentFactory.prototype.getCellRendererDetails=function(def,params){return this.getCompDetails(def,CellRendererComponent,null,params)},UserComponentFactory.prototype.getCellEditorDetails=function(def,params){return this.getCompDetails(def,CellEditorComponent,"agCellEditor",params,!0)},UserComponentFactory.prototype.getFilterDetails=function(def,params,defaultFilter){return this.getCompDetails(def,FilterComponent,defaultFilter,params,!0)},UserComponentFactory.prototype.getDateCompDetails=function(params){return this.getCompDetails(this.gridOptions,DateComponent,"agDateInput",params,!0)},UserComponentFactory.prototype.getLoadingOverlayCompDetails=function(params){return this.getCompDetails(this.gridOptions,LoadingOverlayComponent$1,"agLoadingOverlay",params,!0)},UserComponentFactory.prototype.getNoRowsOverlayCompDetails=function(params){return this.getCompDetails(this.gridOptions,NoRowsOverlayComponent$1,"agNoRowsOverlay",params,!0)},UserComponentFactory.prototype.getTooltipCompDetails=function(params){return this.getCompDetails(params.colDef,TooltipComponent$1,"agTooltipComponent",params,!0)},UserComponentFactory.prototype.getSetFilterCellRendererDetails=function(def,params){return this.getCompDetails(def,CellRendererComponent,null,params)},UserComponentFactory.prototype.getFloatingFilterCompDetails=function(def,params,defaultFloatingFilter){return this.getCompDetails(def,FloatingFilterComponent,defaultFloatingFilter,params)},UserComponentFactory.prototype.getToolPanelCompDetails=function(toolPanelDef,params){return this.getCompDetails(toolPanelDef,ToolPanelComponent,null,params,!0)},UserComponentFactory.prototype.getStatusPanelCompDetails=function(def,params){return this.getCompDetails(def,StatusPanelComponent,null,params,!0)},UserComponentFactory.prototype.getCompDetails=function(defObject,type,defaultName,params,mandatory){var _this=this;void 0===mandatory&&(mandatory=!1);var propertyName=type.propertyName,cellRenderer=type.cellRenderer,_a=this.getCompKeys(defObject,type,params),compName=_a.compName,jsComp=_a.jsComp,fwComp=_a.fwComp,paramsFromSelector=_a.paramsFromSelector,popupFromSelector=_a.popupFromSelector,popupPositionFromSelector=_a.popupPositionFromSelector,lookupFromRegistry=function(key){var item=_this.userComponentRegistry.retrieve(key);item&&(jsComp=item.componentFromFramework?void 0:item.component,fwComp=item.componentFromFramework?item.component:void 0)};if(null!=compName&&lookupFromRegistry(compName),null==jsComp&&null==fwComp&&null!=defaultName&&lookupFromRegistry(defaultName),jsComp&&cellRenderer&&!this.agComponentUtils.doesImplementIComponent(jsComp)&&(jsComp=this.agComponentUtils.adaptFunction(propertyName,jsComp)),jsComp||fwComp){var paramsMerged=this.mergeParamsWithApplicationProvidedParams(defObject,type,params,paramsFromSelector),componentFromFramework=null==jsComp,componentClass=jsComp||fwComp;return{componentFromFramework,componentClass,params:paramsMerged,type,popupFromSelector,popupPositionFromSelector,newAgStackInstance:function(){return _this.newAgStackInstance(componentClass,componentFromFramework,paramsMerged,type)}}}mandatory&&console.error("Could not find component "+compName+", did you forget to configure this component?")},UserComponentFactory.prototype.getCompKeys=function(defObject,type,params){var compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector,_this=this,propertyName=type.propertyName;if(defObject){var defObjectAny=defObject,selectorFunc=defObjectAny[propertyName+"Selector"],selectorRes=selectorFunc?selectorFunc(params):null,assignComp=function(providedJsComp,providedFwComp){var xxxFrameworkDeprecatedWarn=function(){var warningMessage="AG Grid: As of v27, the property "+propertyName+"Framework is deprecated. The property "+propertyName+" can now be used for JavaScript AND Framework Components.";doOnce((function(){return console.warn(warningMessage)}),"UserComponentFactory."+propertyName+"FrameworkDeprecated")};if("string"==typeof providedJsComp)compName=providedJsComp;else if("string"==typeof providedFwComp)xxxFrameworkDeprecatedWarn(),compName=providedFwComp;else if(null!=providedJsComp&&!0!==providedJsComp){_this.getFrameworkOverrides().isFrameworkComponent(providedJsComp)?fwComp=providedJsComp:jsComp=providedJsComp}else null!=providedFwComp&&(xxxFrameworkDeprecatedWarn(),fwComp=providedFwComp)};if(selectorRes){if(null!=selectorRes.frameworkComponent){var warningMessage_1="AG Grid: As of v27, the return for "+propertyName+"Selector has attributes [component, params] only. The attribute frameworkComponent is deprecated. You should now return back Framework Components using the 'component' attribute and the grid works out if it's a framework component or not.";doOnce((function(){return console.warn(warningMessage_1)}),"UserComponentFactory."+propertyName+"FrameworkSelectorDeprecated"),assignComp(selectorRes.frameworkComponent,void 0)}else assignComp(selectorRes.component,void 0);paramsFromSelector=selectorRes.params,popupFromSelector=selectorRes.popup,popupPositionFromSelector=selectorRes.popupPosition}else assignComp(defObjectAny[propertyName],defObjectAny[propertyName+"Framework"])}return{compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector}},UserComponentFactory.prototype.newAgStackInstance=function(ComponentClass,componentFromFramework,params,type){var instance,propertyName=type.propertyName;if(!componentFromFramework)instance=new ComponentClass;else{var thisComponentConfig=this.componentMetadataProvider.retrieve(propertyName);instance=this.frameworkComponentWrapper.wrap(ComponentClass,thisComponentConfig.mandatoryMethodList,thisComponentConfig.optionalMethodList,type)}var deferredInit=this.initComponent(instance,params);return null==deferredInit?AgPromise.resolve(instance):deferredInit.then((function(){return instance}))},UserComponentFactory.prototype.mergeParamsWithApplicationProvidedParams=function(defObject,type,paramsFromGrid,paramsFromSelector){void 0===paramsFromSelector&&(paramsFromSelector=null);var params={context:this.gridOptionsWrapper.getContext(),columnApi:this.gridOptionsWrapper.getColumnApi(),api:this.gridOptionsWrapper.getApi()};mergeDeep(params,paramsFromGrid);var userParams=defObject&&defObject[type.propertyName+"Params"];"function"==typeof userParams?mergeDeep(params,userParams(paramsFromGrid)):"object"==typeof userParams&&mergeDeep(params,userParams);return mergeDeep(params,paramsFromSelector),params},UserComponentFactory.prototype.initComponent=function(component,params){if(this.context.createBean(component),null!=component.init)return component.init(params)},UserComponentFactory.prototype.getDefaultFloatingFilterType=function(def){if(null==def)return null;var defaultFloatingFilterType=null,_a=this.getCompKeys(def,FilterComponent),compName=_a.compName,jsComp=_a.jsComp,fwComp=_a.fwComp;compName?defaultFloatingFilterType=FloatingFilterMapper.getFloatingFilterType(compName):null==jsComp&&null==fwComp&&!0===def.filter&&(defaultFloatingFilterType=ModuleRegistry.isRegistered(exports.ModuleNames.SetFilterModule)?"agSetColumnFloatingFilter":"agTextColumnFloatingFilter");return defaultFloatingFilterType},__decorate$E([Autowired("gridOptions")],UserComponentFactory.prototype,"gridOptions",void 0),__decorate$E([Autowired("agComponentUtils")],UserComponentFactory.prototype,"agComponentUtils",void 0),__decorate$E([Autowired("componentMetadataProvider")],UserComponentFactory.prototype,"componentMetadataProvider",void 0),__decorate$E([Autowired("userComponentRegistry")],UserComponentFactory.prototype,"userComponentRegistry",void 0),__decorate$E([Optional("frameworkComponentWrapper")],UserComponentFactory.prototype,"frameworkComponentWrapper",void 0),UserComponentFactory=__decorate$E([Bean("userComponentFactory")],UserComponentFactory)}(BeanStub);(ExcelFactoryMode=exports.ExcelFactoryMode||(exports.ExcelFactoryMode={}))[ExcelFactoryMode.SINGLE_SHEET=0]="SINGLE_SHEET",ExcelFactoryMode[ExcelFactoryMode.MULTI_SHEET=1]="MULTI_SHEET";var __extends$M=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$F=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DragService=function(_super){function DragService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.dragEndFunctions=[],_this.dragSources=[],_this}return __extends$M(DragService,_super),DragService.prototype.init=function(){this.logger=this.loggerFactory.create("DragService")},DragService.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},DragService.prototype.removeListener=function(dragSourceAndListener){var element=dragSourceAndListener.dragSource.eElement,mouseDownListener=dragSourceAndListener.mouseDownListener;if(element.removeEventListener("mousedown",mouseDownListener),dragSourceAndListener.touchEnabled){var touchStartListener=dragSourceAndListener.touchStartListener;element.removeEventListener("touchstart",touchStartListener,{passive:!0})}},DragService.prototype.removeDragSource=function(params){var dragSourceAndListener=this.dragSources.find((function(item){return item.dragSource===params}));dragSourceAndListener&&(this.removeListener(dragSourceAndListener),removeFromArray(this.dragSources,dragSourceAndListener))},DragService.prototype.isDragging=function(){return this.dragging},DragService.prototype.addDragSource=function(params,includeTouch){var _this=this;void 0===includeTouch&&(includeTouch=!1);var mouseListener=this.onMouseDown.bind(this,params);params.eElement.addEventListener("mousedown",mouseListener);var touchListener=null,suppressTouch=this.gridOptionsWrapper.isSuppressTouch();includeTouch&&!suppressTouch&&(touchListener=function(touchEvent){touchEvent.cancelable&&touchEvent.preventDefault(),_this.onTouchStart(params,touchEvent)},params.eElement.addEventListener("touchstart",touchListener,{passive:!0})),this.dragSources.push({dragSource:params,mouseDownListener:mouseListener,touchStartListener:touchListener,touchEnabled:includeTouch})},DragService.prototype.onTouchStart=function(params,touchEvent){var _this=this;this.currentDragParams=params,this.dragging=!1;var touch=touchEvent.touches[0];this.touchLastTime=touch,this.touchStart=touch;var touchEndEvent=function(e){return _this.onTouchUp(e,params.eElement)},target=params.eElement,events=[{target:document,type:"touchmove",listener:function(e){e.cancelable&&e.preventDefault()},options:{passive:!1}},{target,type:"touchmove",listener:function(e){return _this.onTouchMove(e,params.eElement)},options:{passive:!0}},{target,type:"touchend",listener:touchEndEvent,options:{passive:!0}},{target,type:"touchcancel",listener:touchEndEvent,options:{passive:!0}}];this.addTemporaryEvents(events),0===params.dragStartPixels&&this.onCommonMove(touch,this.touchStart,params.eElement)},DragService.prototype.onMouseDown=function(params,mouseEvent){var _this=this,e=mouseEvent;if(!(params.skipMouseEvent&&params.skipMouseEvent(mouseEvent)||e._alreadyProcessedByDragService||(e._alreadyProcessedByDragService=!0,0!==mouseEvent.button))){this.currentDragParams=params,this.dragging=!1,this.mouseStartEvent=mouseEvent;var eDocument=this.gridOptionsWrapper.getDocument(),events=[{target:eDocument,type:"mousemove",listener:function(event){return _this.onMouseMove(event,params.eElement)}},{target:eDocument,type:"mouseup",listener:function(event){return _this.onMouseUp(event,params.eElement)}},{target:eDocument,type:"contextmenu",listener:function(event){return event.preventDefault()}}];this.addTemporaryEvents(events),0===params.dragStartPixels&&this.onMouseMove(mouseEvent,params.eElement)}},DragService.prototype.addTemporaryEvents=function(events){events.forEach((function(currentEvent){var target=currentEvent.target,type=currentEvent.type,listener=currentEvent.listener,options=currentEvent.options;target.addEventListener(type,listener,options)})),this.dragEndFunctions.push((function(){events.forEach((function(currentEvent){var target=currentEvent.target,type=currentEvent.type,listener=currentEvent.listener,options=currentEvent.options;target.removeEventListener(type,listener,options)}))}))},DragService.prototype.isEventNearStartEvent=function(currentEvent,startEvent){var dragStartPixels=this.currentDragParams.dragStartPixels;return areEventsNear(currentEvent,startEvent,exists(dragStartPixels)?dragStartPixels:4)},DragService.prototype.getFirstActiveTouch=function(touchList){for(var i=0;i<touchList.length;i++)if(touchList[i].identifier===this.touchStart.identifier)return touchList[i];return null},DragService.prototype.onCommonMove=function(currentEvent,startEvent,el){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(currentEvent,startEvent))return;this.dragging=!0;var event_1={type:Events.EVENT_DRAG_STARTED,api:this.gridApi,columnApi:this.columnApi,target:el};this.eventService.dispatchEvent(event_1),this.currentDragParams.onDragStart(startEvent),this.currentDragParams.onDragging(startEvent)}this.currentDragParams.onDragging(currentEvent)},DragService.prototype.onTouchMove=function(touchEvent,el){var touch=this.getFirstActiveTouch(touchEvent.touches);touch&&this.onCommonMove(touch,this.touchStart,el)},DragService.prototype.onMouseMove=function(mouseEvent,el){isBrowserSafari()&&"mousemove"===mouseEvent.type&&mouseEvent.cancelable&&this.mouseEventService.isEventFromThisGrid(mouseEvent)&&!this.isOverFormFieldElement(mouseEvent)&&mouseEvent.preventDefault(),this.onCommonMove(mouseEvent,this.mouseStartEvent,el)},DragService.prototype.isOverFormFieldElement=function(mouseEvent){var _a,_b;return!!(null===(_b=null===(_a=mouseEvent.target)||void 0===_a?void 0:_a.tagName.toLocaleLowerCase())||void 0===_b?void 0:_b.match("^a$|textarea|input|select|button"))},DragService.prototype.onTouchUp=function(touchEvent,el){var touch=this.getFirstActiveTouch(touchEvent.changedTouches);touch||(touch=this.touchLastTime),this.onUpCommon(touch,el)},DragService.prototype.onMouseUp=function(mouseEvent,el){this.onUpCommon(mouseEvent,el)},DragService.prototype.onUpCommon=function(eventOrTouch,el){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(eventOrTouch);var event_2={type:Events.EVENT_DRAG_STOPPED,api:this.gridApi,columnApi:this.columnApi,target:el};this.eventService.dispatchEvent(event_2)}this.mouseStartEvent=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach((function(func){return func()})),this.dragEndFunctions.length=0},__decorate$F([Autowired("loggerFactory")],DragService.prototype,"loggerFactory",void 0),__decorate$F([Autowired("columnApi")],DragService.prototype,"columnApi",void 0),__decorate$F([Autowired("gridApi")],DragService.prototype,"gridApi",void 0),__decorate$F([Autowired("mouseEventService")],DragService.prototype,"mouseEventService",void 0),__decorate$F([PostConstruct],DragService.prototype,"init",null),__decorate$F([PreDestroy],DragService.prototype,"removeAllListeners",null),DragService=__decorate$F([Bean("dragService")],DragService)}(BeanStub),__extends$N=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$8=function(){return __assign$8=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$8.apply(this,arguments)},__decorate$G=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FilterManager=function(_super){function FilterManager(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.allColumnFilters=new Map,_this.activeAggregateFilters=[],_this.activeColumnFilters=[],_this.quickFilter=null,_this.quickFilterParts=null,_this.processingFilterChange=!1,_this}var FilterManager_1;return __extends$N(FilterManager,_super),FilterManager_1=FilterManager,FilterManager.prototype.init=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,(function(){return _this.onColumnsChanged()})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,(function(){return _this.refreshFiltersForAggregations()})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,(function(){return _this.refreshFiltersForAggregations()})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){return _this.refreshFiltersForAggregations()})),this.quickFilter=this.parseQuickFilter(this.gridOptionsWrapper.getQuickFilterText()),this.setQuickFilterParts(),this.allowShowChangeAfterFilter=this.gridOptionsWrapper.isAllowShowChangeAfterFilter()},FilterManager.prototype.setQuickFilterParts=function(){this.quickFilterParts=this.quickFilter?this.quickFilter.split(" "):null},FilterManager.prototype.setFilterModel=function(model){var _this=this,allPromises=[],previousModel=this.getFilterModel();if(model){var modelKeys_1=convertToSet(Object.keys(model));this.allColumnFilters.forEach((function(filterWrapper,colId){var newModel=model[colId];allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise,newModel)),modelKeys_1.delete(colId)})),modelKeys_1.forEach((function(colId){var column=_this.columnModel.getPrimaryColumn(colId)||_this.columnModel.getGridColumn(colId);if(column)if(column.isFilterAllowed()){var filterWrapper=_this.getOrCreateFilterWrapper(column,"NO_UI");filterWrapper?allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise,model[colId])):console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+colId)}else console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+colId);else console.warn("AG Grid: setFilterModel() - no column found for colId: "+colId)}))}else this.allColumnFilters.forEach((function(filterWrapper){allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise,null))}));AgPromise.all(allPromises).then((function(){var currentModel=_this.getFilterModel(),columns=[];_this.allColumnFilters.forEach((function(filterWrapper,colId){var before=previousModel?previousModel[colId]:null,after=currentModel?currentModel[colId]:null;_.jsonEquals(before,after)||columns.push(filterWrapper.column)})),columns.length>0&&_this.onFilterChanged({columns})}))},FilterManager.prototype.setModelOnFilterWrapper=function(filterPromise,newModel){return new AgPromise((function(resolve){filterPromise.then((function(filter){"function"!=typeof filter.setModel&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),resolve()),(filter.setModel(newModel)||AgPromise.resolve()).then((function(){return resolve()}))}))}))},FilterManager.prototype.getFilterModel=function(){var result={};return this.allColumnFilters.forEach((function(filterWrapper,key){var filter=filterWrapper.filterPromise.resolveNow(null,(function(promiseFilter){return promiseFilter}));if(null==filter)return null;if("function"==typeof filter.getModel){var model=filter.getModel();exists(model)&&(result[key]=model)}else console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel")})),result},FilterManager.prototype.isColumnFilterPresent=function(){return this.activeColumnFilters.length>0},FilterManager.prototype.isAggregateFilterPresent=function(){return!!this.activeAggregateFilters.length},FilterManager.prototype.doAggregateFiltersPass=function(node,filterToSkip){return this.doColumnFiltersPass(node,filterToSkip,!0)},FilterManager.prototype.updateActiveFilters=function(){var _this=this;this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;var isFilterActive=function(filter){return!!filter&&(filter.isFilterActive?filter.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1))},groupFilterEnabled=!!this.gridOptionsWrapper.getGroupAggFiltering();this.allColumnFilters.forEach((function(filterWrapper){if(filterWrapper.filterPromise.resolveNow(!1,isFilterActive)){var filterComp=filterWrapper.filterPromise.resolveNow(null,(function(filter){return filter}));!function(column){if(!column.isPrimary())return!0;var isShowingPrimaryColumns=!_this.columnModel.isPivotActive();return!(!column.isValueActive()||!isShowingPrimaryColumns)&&(!!_this.columnModel.isPivotMode()||groupFilterEnabled)}(filterWrapper.column)?_this.activeColumnFilters.push(filterComp):_this.activeAggregateFilters.push(filterComp)}}))},FilterManager.prototype.updateFilterFlagInColumns=function(source,additionalEventAttributes){this.allColumnFilters.forEach((function(filterWrapper){var isFilterActive=filterWrapper.filterPromise.resolveNow(!1,(function(filter){return filter.isFilterActive()}));filterWrapper.column.setFilterActive(isFilterActive,source,additionalEventAttributes)}))},FilterManager.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.gridOptionsWrapper.isExternalFilterPresent()},FilterManager.prototype.doColumnFiltersPass=function(node,filterToSkip,targetAggregates){for(var data=node.data,aggData=node.aggData,targetedFilters=targetAggregates?this.activeAggregateFilters:this.activeColumnFilters,targetedData=targetAggregates?aggData:data,i=0;i<targetedFilters.length;i++){var filter=targetedFilters[i];if(null!=filter&&filter!==filterToSkip){if("function"!=typeof filter.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!filter.doesFilterPass({node,data:targetedData}))return!1}}return!0},FilterManager.prototype.parseQuickFilter=function(newFilter){return exists(newFilter)?this.gridOptionsWrapper.isRowModelDefault()?newFilter.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null},FilterManager.prototype.setQuickFilter=function(newFilter){if(null==newFilter||"string"==typeof newFilter){var parsedFilter=this.parseQuickFilter(newFilter);this.quickFilter!==parsedFilter&&(this.quickFilter=parsedFilter,this.setQuickFilterParts(),this.onFilterChanged())}else console.warn("AG Grid - setQuickFilter() only supports string inputs, received: "+typeof newFilter)},FilterManager.prototype.refreshFiltersForAggregations=function(){this.gridOptionsWrapper.getGroupAggFiltering()&&this.onFilterChanged()},FilterManager.prototype.callOnFilterChangedOutsideRenderCycle=function(params){var _this=this;void 0===params&&(params={});var action=function(){return _this.onFilterChanged(params)};this.rowRenderer.isRefreshInProgress()?setTimeout(action,0):action()},FilterManager.prototype.onFilterChanged=function(params){void 0===params&&(params={});var filterInstance=params.filterInstance,additionalEventAttributes=params.additionalEventAttributes,columns=params.columns;this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",additionalEventAttributes),this.allColumnFilters.forEach((function(filterWrapper){filterWrapper.filterPromise&&filterWrapper.filterPromise.then((function(filter){filter&&filter!==filterInstance&&filter.onAnyFilterChanged&&filter.onAnyFilterChanged()}))}));var filterChangedEvent={type:Events.EVENT_FILTER_CHANGED,api:this.gridApi,columnApi:this.columnApi,columns:columns||[]};additionalEventAttributes&&mergeDeep(filterChangedEvent,additionalEventAttributes),this.processingFilterChange=!0,this.eventService.dispatchEvent(filterChangedEvent),this.processingFilterChange=!1},FilterManager.prototype.isSuppressFlashingCellsBecauseFiltering=function(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange},FilterManager.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},FilterManager.prototype.doesRowPassOtherFilters=function(filterToSkip,node){return this.doesRowPassFilter({rowNode:node,filterInstanceToSkip:filterToSkip})},FilterManager.prototype.doesRowPassQuickFilterNoCache=function(node,filterPart){var _this=this;return this.columnModel.getAllColumnsForQuickFilter().some((function(column){var part=_this.getQuickFilterTextForColumn(column,node);return exists(part)&&part.indexOf(filterPart)>=0}))},FilterManager.prototype.doesRowPassQuickFilterCache=function(node,filterPart){return node.quickFilterAggregateText||this.aggregateRowForQuickFilter(node),node.quickFilterAggregateText.indexOf(filterPart)>=0},FilterManager.prototype.doesRowPassQuickFilter=function(node){var _this=this,usingCache=this.gridOptionsWrapper.isCacheQuickFilter();return this.quickFilterParts.every((function(part){return usingCache?_this.doesRowPassQuickFilterCache(node,part):_this.doesRowPassQuickFilterNoCache(node,part)}))},FilterManager.prototype.doesRowPassAggregateFilters=function(params){return!(this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(params.rowNode,params.filterInstanceToSkip))},FilterManager.prototype.doesRowPassFilter=function(params){return!(this.isQuickFilterPresent()&&!this.doesRowPassQuickFilter(params.rowNode))&&(!(this.gridOptionsWrapper.isExternalFilterPresent()&&!this.gridOptionsWrapper.doesExternalFilterPass(params.rowNode))&&!(this.isColumnFilterPresent()&&!this.doColumnFiltersPass(params.rowNode,params.filterInstanceToSkip)))},FilterManager.prototype.getQuickFilterTextForColumn=function(column,node){var value=this.valueService.getValue(column,node,!0),colDef=column.getColDef();if(colDef.getQuickFilterText){var params={value,node,data:node.data,column,colDef,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};value=colDef.getQuickFilterText(params)}return exists(value)?value.toString().toUpperCase():null},FilterManager.prototype.aggregateRowForQuickFilter=function(node){var _this=this,stringParts=[];this.columnModel.getAllColumnsForQuickFilter().forEach((function(column){var part=_this.getQuickFilterTextForColumn(column,node);exists(part)&&stringParts.push(part)})),node.quickFilterAggregateText=stringParts.join(FilterManager_1.QUICK_FILTER_SEPARATOR)},FilterManager.prototype.onNewRowsLoaded=function(source){this.allColumnFilters.forEach((function(filterWrapper){filterWrapper.filterPromise.then((function(filter){filter.onNewRowsLoaded&&filter.onNewRowsLoaded()}))})),this.updateFilterFlagInColumns(source),this.updateActiveFilters()},FilterManager.prototype.createValueGetter=function(column){var _this=this;return function(_a){var node=_a.node;return _this.valueService.getValue(column,node,!0)}},FilterManager.prototype.getFilterComponent=function(column,source,createIfDoesNotExist){var _a;if(void 0===createIfDoesNotExist&&(createIfDoesNotExist=!0),createIfDoesNotExist)return(null===(_a=this.getOrCreateFilterWrapper(column,source))||void 0===_a?void 0:_a.filterPromise)||null;var filterWrapper=this.cachedFilter(column);return filterWrapper?filterWrapper.filterPromise:null},FilterManager.prototype.isFilterActive=function(column){var filterWrapper=this.cachedFilter(column);return!!filterWrapper&&filterWrapper.filterPromise.resolveNow(!1,(function(filter){return filter.isFilterActive()}))},FilterManager.prototype.getOrCreateFilterWrapper=function(column,source){if(!column.isFilterAllowed())return null;var filterWrapper=this.cachedFilter(column);return filterWrapper?"NO_UI"!==source&&this.putIntoGui(filterWrapper,source):(filterWrapper=this.createFilterWrapper(column,source),this.allColumnFilters.set(column.getColId(),filterWrapper)),filterWrapper},FilterManager.prototype.cachedFilter=function(column){return this.allColumnFilters.get(column.getColId())},FilterManager.prototype.createFilterInstance=function(column){var filterInstance,_this=this,defaultFilter=ModuleRegistry.isRegistered(exports.ModuleNames.SetFilterModule)?"agSetColumnFilter":"agTextColumnFilter",colDef=column.getColDef(),params=__assign$8(__assign$8({},this.createFilterParams(column,colDef)),{filterModifiedCallback:function(){var event={type:Events.EVENT_FILTER_MODIFIED,api:_this.gridApi,columnApi:_this.columnApi,column,filterInstance};_this.eventService.dispatchEvent(event)},filterChangedCallback:function(additionalEventAttributes){var params={filterInstance,additionalEventAttributes,columns:[column]};_this.callOnFilterChangedOutsideRenderCycle(params)},doesRowPassOtherFilter:function(node){return _this.doesRowPassOtherFilters(filterInstance,node)}}),compDetails=this.userComponentFactory.getFilterDetails(colDef,params,defaultFilter);if(!compDetails)return null;var componentPromise=compDetails.newAgStackInstance();return componentPromise&&componentPromise.then((function(r){return filterInstance=r})),componentPromise},FilterManager.prototype.createFilterParams=function(column,colDef){return{api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),column,colDef:cloneObject(colDef),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(column),context:this.gridOptionsWrapper.getContext(),doesRowPassOtherFilter:function(){return!0}}},FilterManager.prototype.createFilterWrapper=function(column,source){var filterWrapper={column,filterPromise:null,compiledElement:null,guiPromise:AgPromise.resolve(null)};return filterWrapper.filterPromise=this.createFilterInstance(column),filterWrapper.filterPromise&&this.putIntoGui(filterWrapper,source),filterWrapper},FilterManager.prototype.putIntoGui=function(filterWrapper,source){var _this=this,eFilterGui=document.createElement("div");eFilterGui.className="ag-filter",filterWrapper.guiPromise=new AgPromise((function(resolve){filterWrapper.filterPromise.then((function(filter){var guiFromFilter=filter.getGui();exists(guiFromFilter)||console.warn("AG Grid: getGui method from filter returned "+guiFromFilter+", it should be a DOM element or an HTML template string."),"string"==typeof guiFromFilter&&(guiFromFilter=loadTemplate(guiFromFilter)),eFilterGui.appendChild(guiFromFilter),resolve(eFilterGui),_this.eventService.dispatchEvent({type:Events.EVENT_FILTER_OPENED,column:filterWrapper.column,source,eGui:eFilterGui,api:_this.gridApi,columnApi:_this.columnApi})}))}))},FilterManager.prototype.onColumnsChanged=function(){var _this=this,columns=[];this.allColumnFilters.forEach((function(wrapper,colId){(wrapper.column.isPrimary()?_this.columnModel.getPrimaryColumn(colId):_this.columnModel.getGridColumn(colId))||(columns.push(wrapper.column),_this.disposeFilterWrapper(wrapper,"filterDestroyed"))})),columns.length>0&&this.onFilterChanged({columns})},FilterManager.prototype.destroyFilter=function(column,source){void 0===source&&(source="api");var filterWrapper=this.allColumnFilters.get(column.getColId());filterWrapper&&(this.disposeFilterWrapper(filterWrapper,source),this.onFilterChanged({columns:[column]}))},FilterManager.prototype.disposeFilterWrapper=function(filterWrapper,source){var _this=this;filterWrapper.filterPromise.then((function(filter){(filter.setModel(null)||AgPromise.resolve()).then((function(){_this.getContext().destroyBean(filter),filterWrapper.column.setFilterActive(!1,source),_this.allColumnFilters.delete(filterWrapper.column.getColId())}))}))},FilterManager.prototype.destroy=function(){var _this=this;_super.prototype.destroy.call(this),this.allColumnFilters.forEach((function(filterWrapper){return _this.disposeFilterWrapper(filterWrapper,"filterDestroyed")}))},FilterManager.QUICK_FILTER_SEPARATOR="\n",__decorate$G([Autowired("valueService")],FilterManager.prototype,"valueService",void 0),__decorate$G([Autowired("columnModel")],FilterManager.prototype,"columnModel",void 0),__decorate$G([Autowired("rowModel")],FilterManager.prototype,"rowModel",void 0),__decorate$G([Autowired("columnApi")],FilterManager.prototype,"columnApi",void 0),__decorate$G([Autowired("gridApi")],FilterManager.prototype,"gridApi",void 0),__decorate$G([Autowired("userComponentFactory")],FilterManager.prototype,"userComponentFactory",void 0),__decorate$G([Autowired("rowRenderer")],FilterManager.prototype,"rowRenderer",void 0),__decorate$G([PostConstruct],FilterManager.prototype,"init",null),__decorate$G([PreDestroy],FilterManager.prototype,"destroy",null),FilterManager=FilterManager_1=__decorate$G([Bean("filterManager")],FilterManager)}(BeanStub),__extends$O=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AbstractHeaderCellComp=function(_super){function AbstractHeaderCellComp(template,ctrl){var _this=_super.call(this,template)||this;return _this.ctrl=ctrl,_this}return __extends$O(AbstractHeaderCellComp,_super),AbstractHeaderCellComp.prototype.getCtrl=function(){return this.ctrl},AbstractHeaderCellComp}(Component),__extends$P=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$H=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderFilterCellComp=function(_super){function HeaderFilterCellComp(ctrl){return _super.call(this,HeaderFilterCellComp.TEMPLATE,ctrl)||this}return __extends$P(HeaderFilterCellComp,_super),HeaderFilterCellComp.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},addOrRemoveBodyCssClass:function(cssClassName,on){return _this.eFloatingFilterBody.classList.toggle(cssClassName,on)},addOrRemoveButtonWrapperCssClass:function(cssClassName,on){return _this.eButtonWrapper.classList.toggle(cssClassName,on)},setCompDetails:function(compDetails){return _this.setCompDetails(compDetails)},getFloatingFilterComp:function(){return _this.compPromise},setWidth:function(width){return eGui.style.width=width},setMenuIcon:function(eIcon){return _this.eButtonShowMainFilter.appendChild(eIcon)}};this.ctrl.setComp(compProxy,eGui,this.eButtonShowMainFilter,this.eFloatingFilterBody)},HeaderFilterCellComp.prototype.setCompDetails=function(compDetails){var _this=this;this.compPromise=compDetails.newAgStackInstance(),this.compPromise.then((function(comp){return _this.afterCompCreated(comp)}))},HeaderFilterCellComp.prototype.afterCompCreated=function(comp){var _this=this;comp&&(this.addDestroyFunc((function(){return _this.context.destroyBean(comp)})),this.isAlive()&&(this.eFloatingFilterBody.appendChild(comp.getGui()),comp.afterGuiAttached&&comp.afterGuiAttached()))},HeaderFilterCellComp.TEMPLATE='<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" aria-label="Open Filter Menu" class="ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',__decorate$H([RefSelector("eFloatingFilterBody")],HeaderFilterCellComp.prototype,"eFloatingFilterBody",void 0),__decorate$H([RefSelector("eButtonWrapper")],HeaderFilterCellComp.prototype,"eButtonWrapper",void 0),__decorate$H([RefSelector("eButtonShowMainFilter")],HeaderFilterCellComp.prototype,"eButtonShowMainFilter",void 0),__decorate$H([PostConstruct],HeaderFilterCellComp.prototype,"postConstruct",null),HeaderFilterCellComp}(AbstractHeaderCellComp),SideBarDefParser=function(){function SideBarDefParser(){}return SideBarDefParser.parse=function(toParse){if(!toParse)return null;if(!0===toParse)return{toolPanels:[SideBarDefParser.DEFAULT_COLUMN_COMP,SideBarDefParser.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if("string"==typeof toParse)return SideBarDefParser.parse([toParse]);if(Array.isArray(toParse)){var comps_1=[];return toParse.forEach((function(key){var lookupResult=SideBarDefParser.DEFAULT_BY_KEY[key];lookupResult?comps_1.push(lookupResult):console.warn("AG Grid: the key "+key+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(SideBarDefParser.DEFAULT_BY_KEY).join(","))})),0===comps_1.length?null:{toolPanels:comps_1,defaultToolPanel:comps_1[0].id}}return{toolPanels:SideBarDefParser.parseComponents(toParse.toolPanels),defaultToolPanel:toParse.defaultToolPanel,hiddenByDefault:toParse.hiddenByDefault,position:toParse.position}},SideBarDefParser.parseComponents=function(from){var result=[];return from?(from.forEach((function(it){var toAdd=null;if("string"==typeof it){var lookupResult=SideBarDefParser.DEFAULT_BY_KEY[it];if(!lookupResult)return void console.warn("AG Grid: the key "+it+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(SideBarDefParser.DEFAULT_BY_KEY).join(","));toAdd=lookupResult}else toAdd=it;result.push(toAdd)})),result):result},SideBarDefParser.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},SideBarDefParser.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"},SideBarDefParser.DEFAULT_BY_KEY={columns:SideBarDefParser.DEFAULT_COLUMN_COMP,filters:SideBarDefParser.DEFAULT_FILTER_COMP},SideBarDefParser}(),__assign$9=function(){return __assign$9=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$9.apply(this,arguments)},__decorate$I=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$3=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__read$6=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$4=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$6(arguments[i]));return ar};function isTrue(value){return!0===value||"true"===value}function toNumber(value){return"number"==typeof value?value:"string"==typeof value?parseInt(value,10):void 0}function oneOrGreater(value,defaultValue){var valueNumber=parseInt(value,10);return isNumeric(valueNumber)&&valueNumber>0?valueNumber:defaultValue}var LayoutCssClasses,GridOptionsWrapper=function(){function GridOptionsWrapper(){this.propertyEventService=new EventService,this.domDataKey="__AG_"+Math.random().toString(),this.destroyed=!1}var GridOptionsWrapper_1;return GridOptionsWrapper_1=GridOptionsWrapper,GridOptionsWrapper.prototype.agWire=function(gridApi,columnApi){this.gridOptions.api=gridApi,this.gridOptions.columnApi=columnApi,this.checkForDeprecated(),this.checkForViolations()},GridOptionsWrapper.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0},GridOptionsWrapper.prototype.init=function(){var _this=this;!0!==this.gridOptions.suppressPropertyNamesCheck&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),null!=this.gridOptions.sideBar&&(this.gridOptions.sideBar=SideBarDefParser.parse(this.gridOptions.sideBar));var async=this.useAsyncEvents();if(this.eventService.addGlobalListener(this.globalEventHandler.bind(this),async),this.isGroupSelectsChildren()&&this.isSuppressParentsInRowNodes()&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.isGroupSelectsChildren()&&(this.isRowSelectionMulti()||console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.isRowModelServerSide()&&console.warn("AG Grid: group selects children is NOT support for Server Side Row Model. This is because the rows are lazy loaded, so selecting a group is not possible asthe grid has no way of knowing what the children are.")),this.isGroupRemoveSingleChildren()&&this.isGroupHideOpenParents()&&console.warn("AG Grid: groupRemoveSingleChildren and groupHideOpenParents do not work with each other, you need to pick one. And don't ask us how to us these together on our support forum either you will get the same answer!"),this.isRowModelServerSide()){var msg=function(prop){return"AG Grid: '"+prop+"' is not supported on the Server-Side Row Model"};exists(this.gridOptions.groupDefaultExpanded)&&console.warn(msg("groupDefaultExpanded")),exists(this.gridOptions.groupDefaultExpanded)&&console.warn(msg("groupIncludeFooter")),exists(this.gridOptions.groupDefaultExpanded)&&console.warn(msg("groupIncludeTotalFooter"))}this.isEnableRangeSelection()&&ModuleRegistry.assertRegistered(exports.ModuleNames.RangeSelectionModule,"enableRangeSelection"),this.isEnableRangeSelection()||!this.isEnableRangeHandle()&&!this.isEnableFillHandle()||console.warn("AG Grid: 'enableRangeHandle' and 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");var warnOfDeprecaredIcon=function(name){_this.gridOptions.icons&&_this.gridOptions.icons[name]&&console.warn("gridOptions.icons."+name+" is no longer supported. For information on how to style checkboxes and radio buttons, see https://www.ag-grid.com/javascript-grid-icons/")};warnOfDeprecaredIcon("radioButtonOff"),warnOfDeprecaredIcon("radioButtonOn"),warnOfDeprecaredIcon("checkboxChecked"),warnOfDeprecaredIcon("checkboxUnchecked"),warnOfDeprecaredIcon("checkboxIndeterminate"),this.getScrollbarWidth()},GridOptionsWrapper.prototype.checkColumnDefProperties=function(){var _this=this;null!=this.gridOptions.columnDefs&&this.gridOptions.columnDefs.forEach((function(colDef){var userProperties=Object.getOwnPropertyNames(colDef),validProperties=__spread$4(ColDefUtil.ALL_PROPERTIES,ColDefUtil.FRAMEWORK_PROPERTIES);_this.checkProperties(userProperties,validProperties,validProperties,"colDef","https://www.ag-grid.com/javascript-grid-column-properties/")}))},GridOptionsWrapper.prototype.checkGridOptionsProperties=function(){var userProperties=Object.getOwnPropertyNames(this.gridOptions),validProperties=__spread$4(PropertyKeys.ALL_PROPERTIES,PropertyKeys.FRAMEWORK_PROPERTIES,values(Events).map((function(event){return ComponentUtil.getCallbackForEvent(event)}))),validPropertiesAndExceptions=__spread$4(validProperties,["api","columnApi"]);this.checkProperties(userProperties,validPropertiesAndExceptions,validProperties,"gridOptions","https://www.ag-grid.com/javascript-data-grid/grid-options/")},GridOptionsWrapper.prototype.checkProperties=function(userProperties,validPropertiesAndExceptions,validProperties,containerName,docsUrl){var invalidProperties=fuzzyCheckStrings(userProperties,validPropertiesAndExceptions,validProperties);iterateObject(invalidProperties,(function(key,value){console.warn("ag-grid: invalid "+containerName+" property '"+key+"' did you mean any of these: "+value.slice(0,8).join(", "))})),Object.keys(invalidProperties).length>0&&console.warn("ag-grid: to see all the valid "+containerName+" properties please check: "+docsUrl)},GridOptionsWrapper.prototype.mergeGridCommonParams=function(callback){var _this=this;if(callback){return function(callbackParams){var mergedParams=__assign$9(__assign$9({},callbackParams),{api:_this.getApi(),columnApi:_this.getColumnApi(),context:_this.getContext()});return callback(mergedParams)}}return callback},GridOptionsWrapper.prototype.getDomDataKey=function(){return this.domDataKey},GridOptionsWrapper.prototype.getDomData=function(element,key){var domData=element[this.getDomDataKey()];return domData?domData[key]:void 0},GridOptionsWrapper.prototype.setDomData=function(element,key,value){var domDataKey=this.getDomDataKey(),domData=element[domDataKey];missing(domData)&&(domData={},element[domDataKey]=domData),domData[key]=value},GridOptionsWrapper.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},GridOptionsWrapper.prototype.isSuppressRowDeselection=function(){return isTrue(this.gridOptions.suppressRowDeselection)},GridOptionsWrapper.prototype.isRowSelectionMulti=function(){return"multiple"===this.gridOptions.rowSelection},GridOptionsWrapper.prototype.isRowMultiSelectWithClick=function(){return isTrue(this.gridOptions.rowMultiSelectWithClick)},GridOptionsWrapper.prototype.getContext=function(){return this.gridOptions.context},GridOptionsWrapper.prototype.isPivotMode=function(){return isTrue(this.gridOptions.pivotMode)},GridOptionsWrapper.prototype.isSuppressExpandablePivotGroups=function(){return isTrue(this.gridOptions.suppressExpandablePivotGroups)},GridOptionsWrapper.prototype.getPivotColumnGroupTotals=function(){return this.gridOptions.pivotColumnGroupTotals},GridOptionsWrapper.prototype.getPivotRowTotals=function(){return this.gridOptions.pivotRowTotals},GridOptionsWrapper.prototype.isRowModelInfinite=function(){return this.gridOptions.rowModelType===Constants.ROW_MODEL_TYPE_INFINITE},GridOptionsWrapper.prototype.isRowModelViewport=function(){return this.gridOptions.rowModelType===Constants.ROW_MODEL_TYPE_VIEWPORT},GridOptionsWrapper.prototype.isRowModelServerSide=function(){return this.gridOptions.rowModelType===Constants.ROW_MODEL_TYPE_SERVER_SIDE},GridOptionsWrapper.prototype.isRowModelDefault=function(){return missing(this.gridOptions.rowModelType)||this.gridOptions.rowModelType===Constants.ROW_MODEL_TYPE_CLIENT_SIDE},GridOptionsWrapper.prototype.isFullRowEdit=function(){return"fullRow"===this.gridOptions.editType},GridOptionsWrapper.prototype.isSuppressFocusAfterRefresh=function(){return isTrue(this.gridOptions.suppressFocusAfterRefresh)},GridOptionsWrapper.prototype.isSuppressBrowserResizeObserver=function(){return isTrue(this.gridOptions.suppressBrowserResizeObserver)},GridOptionsWrapper.prototype.isSuppressMaintainUnsortedOrder=function(){return isTrue(this.gridOptions.suppressMaintainUnsortedOrder)},GridOptionsWrapper.prototype.isSuppressClearOnFillReduction=function(){return isTrue(this.gridOptions.suppressClearOnFillReduction)},GridOptionsWrapper.prototype.isShowToolPanel=function(){return isTrue(this.gridOptions.sideBar&&Array.isArray(this.getSideBar().toolPanels))},GridOptionsWrapper.prototype.getSideBar=function(){return this.gridOptions.sideBar},GridOptionsWrapper.prototype.isSuppressTouch=function(){return isTrue(this.gridOptions.suppressTouch)},GridOptionsWrapper.prototype.isMaintainColumnOrder=function(){return isTrue(this.gridOptions.maintainColumnOrder)},GridOptionsWrapper.prototype.isSuppressRowTransform=function(){return isTrue(this.gridOptions.suppressRowTransform)},GridOptionsWrapper.prototype.isSuppressColumnStateEvents=function(){return isTrue(this.gridOptions.suppressColumnStateEvents)},GridOptionsWrapper.prototype.isAllowDragFromColumnsToolPanel=function(){return isTrue(this.gridOptions.allowDragFromColumnsToolPanel)},GridOptionsWrapper.prototype.useAsyncEvents=function(){return!isTrue(this.gridOptions.suppressAsyncEvents)},GridOptionsWrapper.prototype.isEnableCellChangeFlash=function(){return isTrue(this.gridOptions.enableCellChangeFlash)},GridOptionsWrapper.prototype.getCellFlashDelay=function(){return this.gridOptions.cellFlashDelay||500},GridOptionsWrapper.prototype.getCellFadeDelay=function(){return this.gridOptions.cellFadeDelay||1e3},GridOptionsWrapper.prototype.isGroupSelectsChildren=function(){return isTrue(this.gridOptions.groupSelectsChildren)},GridOptionsWrapper.prototype.isSuppressRowHoverHighlight=function(){return isTrue(this.gridOptions.suppressRowHoverHighlight)},GridOptionsWrapper.prototype.isColumnHoverHighlight=function(){return isTrue(this.gridOptions.columnHoverHighlight)},GridOptionsWrapper.prototype.isGroupSelectsFiltered=function(){return isTrue(this.gridOptions.groupSelectsFiltered)},GridOptionsWrapper.prototype.isGroupHideOpenParents=function(){return isTrue(this.gridOptions.groupHideOpenParents)},GridOptionsWrapper.prototype.isGroupMaintainOrder=function(){return isTrue(this.gridOptions.groupMaintainOrder)},GridOptionsWrapper.prototype.getAutoGroupColumnDef=function(){return this.gridOptions.autoGroupColumnDef},GridOptionsWrapper.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?this.matchesGroupDisplayType("multipleColumns",this.gridOptions.groupDisplayType):isTrue(this.gridOptions.groupHideOpenParents)},GridOptionsWrapper.prototype.isGroupUseEntireRow=function(pivotMode){return!pivotMode&&(!!this.gridOptions.groupDisplayType&&this.matchesGroupDisplayType("groupRows",this.gridOptions.groupDisplayType))},GridOptionsWrapper.prototype.isGroupSuppressAutoColumn=function(){return!(!this.gridOptions.groupDisplayType||!this.matchesGroupDisplayType("custom",this.gridOptions.groupDisplayType))||!!this.gridOptions.treeDataDisplayType&&this.matchesTreeDataDisplayType("custom",this.gridOptions.treeDataDisplayType)},GridOptionsWrapper.prototype.isGroupRemoveSingleChildren=function(){return isTrue(this.gridOptions.groupRemoveSingleChildren)},GridOptionsWrapper.prototype.isGroupRemoveLowestSingleChildren=function(){return isTrue(this.gridOptions.groupRemoveLowestSingleChildren)},GridOptionsWrapper.prototype.isGroupIncludeFooter=function(){return isTrue(this.gridOptions.groupIncludeFooter)},GridOptionsWrapper.prototype.isGroupIncludeTotalFooter=function(){return isTrue(this.gridOptions.groupIncludeTotalFooter)},GridOptionsWrapper.prototype.isGroupSuppressBlankHeader=function(){return isTrue(this.gridOptions.groupSuppressBlankHeader)},GridOptionsWrapper.prototype.isSuppressRowClickSelection=function(){return isTrue(this.gridOptions.suppressRowClickSelection)},GridOptionsWrapper.prototype.isSuppressCellFocus=function(){return isTrue(this.gridOptions.suppressCellFocus)},GridOptionsWrapper.prototype.isSuppressMultiSort=function(){return isTrue(this.gridOptions.suppressMultiSort)},GridOptionsWrapper.prototype.isAlwaysMultiSort=function(){return isTrue(this.gridOptions.alwaysMultiSort)},GridOptionsWrapper.prototype.isMultiSortKeyCtrl=function(){return"ctrl"===this.gridOptions.multiSortKey},GridOptionsWrapper.prototype.isPivotSuppressAutoColumn=function(){return isTrue(this.gridOptions.pivotSuppressAutoColumn)},GridOptionsWrapper.prototype.isSuppressDragLeaveHidesColumns=function(){return isTrue(this.gridOptions.suppressDragLeaveHidesColumns)},GridOptionsWrapper.prototype.isSuppressScrollOnNewData=function(){return isTrue(this.gridOptions.suppressScrollOnNewData)},GridOptionsWrapper.prototype.isSuppressScrollWhenPopupsAreOpen=function(){return isTrue(this.gridOptions.suppressScrollWhenPopupsAreOpen)},GridOptionsWrapper.prototype.isRowDragEntireRow=function(){return isTrue(this.gridOptions.rowDragEntireRow)},GridOptionsWrapper.prototype.isSuppressRowDrag=function(){return isTrue(this.gridOptions.suppressRowDrag)},GridOptionsWrapper.prototype.isRowDragManaged=function(){return isTrue(this.gridOptions.rowDragManaged)},GridOptionsWrapper.prototype.isSuppressMoveWhenRowDragging=function(){return isTrue(this.gridOptions.suppressMoveWhenRowDragging)},GridOptionsWrapper.prototype.isRowDragMultiRow=function(){return isTrue(this.gridOptions.rowDragMultiRow)},GridOptionsWrapper.prototype.getDomLayout=function(){var domLayout=this.gridOptions.domLayout||Constants.DOM_LAYOUT_NORMAL;return-1===[Constants.DOM_LAYOUT_PRINT,Constants.DOM_LAYOUT_AUTO_HEIGHT,Constants.DOM_LAYOUT_NORMAL].indexOf(domLayout)?(doOnce((function(){return console.warn("AG Grid: "+domLayout+" is not valid for DOM Layout, valid values are "+Constants.DOM_LAYOUT_NORMAL+", "+Constants.DOM_LAYOUT_AUTO_HEIGHT+" and "+Constants.DOM_LAYOUT_PRINT)}),"warn about dom layout values"),Constants.DOM_LAYOUT_NORMAL):domLayout},GridOptionsWrapper.prototype.isSuppressHorizontalScroll=function(){return isTrue(this.gridOptions.suppressHorizontalScroll)},GridOptionsWrapper.prototype.isSuppressMaxRenderedRowRestriction=function(){return isTrue(this.gridOptions.suppressMaxRenderedRowRestriction)},GridOptionsWrapper.prototype.isExcludeChildrenWhenTreeDataFiltering=function(){return isTrue(this.gridOptions.excludeChildrenWhenTreeDataFiltering)},GridOptionsWrapper.prototype.isAlwaysShowHorizontalScroll=function(){return isTrue(this.gridOptions.alwaysShowHorizontalScroll)},GridOptionsWrapper.prototype.isAlwaysShowVerticalScroll=function(){return isTrue(this.gridOptions.alwaysShowVerticalScroll)},GridOptionsWrapper.prototype.isDebounceVerticalScrollbar=function(){return isTrue(this.gridOptions.debounceVerticalScrollbar)},GridOptionsWrapper.prototype.isSuppressLoadingOverlay=function(){return isTrue(this.gridOptions.suppressLoadingOverlay)},GridOptionsWrapper.prototype.isSuppressNoRowsOverlay=function(){return isTrue(this.gridOptions.suppressNoRowsOverlay)},GridOptionsWrapper.prototype.isSuppressFieldDotNotation=function(){return isTrue(this.gridOptions.suppressFieldDotNotation)},GridOptionsWrapper.prototype.getPinnedTopRowData=function(){return this.gridOptions.pinnedTopRowData},GridOptionsWrapper.prototype.getPinnedBottomRowData=function(){return this.gridOptions.pinnedBottomRowData},GridOptionsWrapper.prototype.isFunctionsPassive=function(){return isTrue(this.gridOptions.functionsPassive)},GridOptionsWrapper.prototype.isSuppressChangeDetection=function(){return isTrue(this.gridOptions.suppressChangeDetection)},GridOptionsWrapper.prototype.isSuppressAnimationFrame=function(){return isTrue(this.gridOptions.suppressAnimationFrame)},GridOptionsWrapper.prototype.getQuickFilterText=function(){return this.gridOptions.quickFilterText},GridOptionsWrapper.prototype.isCacheQuickFilter=function(){return isTrue(this.gridOptions.cacheQuickFilter)},GridOptionsWrapper.prototype.isUnSortIcon=function(){return isTrue(this.gridOptions.unSortIcon)},GridOptionsWrapper.prototype.isSuppressMenuHide=function(){return isTrue(this.gridOptions.suppressMenuHide)},GridOptionsWrapper.prototype.isEnterMovesDownAfterEdit=function(){return isTrue(this.gridOptions.enterMovesDownAfterEdit)},GridOptionsWrapper.prototype.isEnterMovesDown=function(){return isTrue(this.gridOptions.enterMovesDown)},GridOptionsWrapper.prototype.isUndoRedoCellEditing=function(){return isTrue(this.gridOptions.undoRedoCellEditing)},GridOptionsWrapper.prototype.getUndoRedoCellEditingLimit=function(){return toNumber(this.gridOptions.undoRedoCellEditingLimit)},GridOptionsWrapper.prototype.getRowStyle=function(){return this.gridOptions.rowStyle},GridOptionsWrapper.prototype.getRowClass=function(){return this.gridOptions.rowClass},GridOptionsWrapper.prototype.getRowStyleFunc=function(){return this.mergeGridCommonParams(this.gridOptions.getRowStyle)},GridOptionsWrapper.prototype.getRowClassFunc=function(){return this.mergeGridCommonParams(this.gridOptions.getRowClass)},GridOptionsWrapper.prototype.rowClassRules=function(){return this.gridOptions.rowClassRules},GridOptionsWrapper.prototype.getServerSideStoreType=function(){return this.gridOptions.serverSideStoreType},GridOptionsWrapper.prototype.getServerSideStoreParamsFunc=function(){return this.mergeGridCommonParams(this.gridOptions.getServerSideStoreParams)},GridOptionsWrapper.prototype.getCreateChartContainerFunc=function(){return this.mergeGridCommonParams(this.gridOptions.createChartContainer)},GridOptionsWrapper.prototype.getPopupParent=function(){return this.gridOptions.popupParent},GridOptionsWrapper.prototype.getBlockLoadDebounceMillis=function(){return this.gridOptions.blockLoadDebounceMillis},GridOptionsWrapper.prototype.getPostProcessPopupFunc=function(){return this.mergeGridCommonParams(this.gridOptions.postProcessPopup)},GridOptionsWrapper.prototype.getPaginationNumberFormatterFunc=function(){return this.mergeGridCommonParams(this.gridOptions.paginationNumberFormatter)},GridOptionsWrapper.prototype.getChildCountFunc=function(){return this.gridOptions.getChildCount},GridOptionsWrapper.prototype.getIsApplyServerSideTransactionFunc=function(){return this.mergeGridCommonParams(this.gridOptions.isApplyServerSideTransaction)},GridOptionsWrapper.prototype.getInitialGroupOrderComparator=function(){var _a=this.gridOptions,initialGroupOrderComparator=_a.initialGroupOrderComparator,defaultGroupOrderComparator=_a.defaultGroupOrderComparator;return initialGroupOrderComparator?this.mergeGridCommonParams(initialGroupOrderComparator):defaultGroupOrderComparator?function(params){return defaultGroupOrderComparator(params.nodeA,params.nodeB)}:void 0},GridOptionsWrapper.prototype.getIsFullWidthCellFunc=function(){var _a=this.gridOptions,isFullWidthRow=_a.isFullWidthRow,isFullWidthCell=_a.isFullWidthCell;return isFullWidthRow?this.mergeGridCommonParams(isFullWidthRow):isFullWidthCell?function(params){return isFullWidthCell(params.rowNode)}:void 0},GridOptionsWrapper.prototype.getFullWidthCellRendererParams=function(){return this.gridOptions.fullWidthCellRendererParams},GridOptionsWrapper.prototype.isEmbedFullWidthRows=function(){return isTrue(this.gridOptions.embedFullWidthRows)||isTrue(this.gridOptions.deprecatedEmbedFullWidthRows)},GridOptionsWrapper.prototype.isDetailRowAutoHeight=function(){return isTrue(this.gridOptions.detailRowAutoHeight)},GridOptionsWrapper.prototype.getSuppressKeyboardEventFunc=function(){return this.gridOptions.suppressKeyboardEvent},GridOptionsWrapper.prototype.getBusinessKeyForNodeFunc=function(){return this.gridOptions.getBusinessKeyForNode},GridOptionsWrapper.prototype.getApi=function(){return this.gridOptions.api},GridOptionsWrapper.prototype.getColumnApi=function(){return this.gridOptions.columnApi},GridOptionsWrapper.prototype.isReadOnlyEdit=function(){return isTrue(this.gridOptions.readOnlyEdit)},GridOptionsWrapper.prototype.isImmutableData=function(){var getRowIdProvided=null!=this.gridOptions.getRowId,immutableData=isTrue(this.gridOptions.immutableData);return!isTrue(this.gridOptions.resetRowDataOnUpdate)&&(getRowIdProvided||immutableData)},GridOptionsWrapper.prototype.isEnsureDomOrder=function(){return isTrue(this.gridOptions.ensureDomOrder)},GridOptionsWrapper.prototype.isEnableCharts=function(){return!!isTrue(this.gridOptions.enableCharts)&&ModuleRegistry.assertRegistered(exports.ModuleNames.GridChartsModule,"enableCharts")},GridOptionsWrapper.prototype.getColResizeDefault=function(){return this.gridOptions.colResizeDefault},GridOptionsWrapper.prototype.isSingleClickEdit=function(){return isTrue(this.gridOptions.singleClickEdit)},GridOptionsWrapper.prototype.isSuppressClickEdit=function(){return isTrue(this.gridOptions.suppressClickEdit)},GridOptionsWrapper.prototype.isStopEditingWhenCellsLoseFocus=function(){return isTrue(this.gridOptions.stopEditingWhenCellsLoseFocus)},GridOptionsWrapper.prototype.getGroupDefaultExpanded=function(){return this.gridOptions.groupDefaultExpanded},GridOptionsWrapper.prototype.getMaxConcurrentDatasourceRequests=function(){var res=toNumber(this.gridOptions.maxConcurrentDatasourceRequests);return null==res?2:res<=0?void 0:res},GridOptionsWrapper.prototype.getMaxBlocksInCache=function(){return this.gridOptions.maxBlocksInCache},GridOptionsWrapper.prototype.getCacheOverflowSize=function(){return this.gridOptions.cacheOverflowSize},GridOptionsWrapper.prototype.getPaginationPageSize=function(){return toNumber(this.gridOptions.paginationPageSize)},GridOptionsWrapper.prototype.isPaginateChildRows=function(){return!(!this.isGroupRemoveSingleChildren()&&!this.isGroupRemoveLowestSingleChildren())||isTrue(this.gridOptions.paginateChildRows)},GridOptionsWrapper.prototype.getCacheBlockSize=function(){return oneOrGreater(this.gridOptions.cacheBlockSize)},GridOptionsWrapper.prototype.getInfiniteInitialRowCount=function(){return this.gridOptions.infiniteInitialRowCount},GridOptionsWrapper.prototype.isPurgeClosedRowNodes=function(){return isTrue(this.gridOptions.purgeClosedRowNodes)},GridOptionsWrapper.prototype.isSuppressPaginationPanel=function(){return isTrue(this.gridOptions.suppressPaginationPanel)},GridOptionsWrapper.prototype.getRowData=function(){return this.gridOptions.rowData},GridOptionsWrapper.prototype.isEnableRtl=function(){return isTrue(this.gridOptions.enableRtl)},GridOptionsWrapper.prototype.getRowGroupPanelShow=function(){return this.gridOptions.rowGroupPanelShow},GridOptionsWrapper.prototype.getPivotPanelShow=function(){return this.gridOptions.pivotPanelShow},GridOptionsWrapper.prototype.isAngularCompileRows=function(){return isTrue(this.gridOptions.angularCompileRows)},GridOptionsWrapper.prototype.isAngularCompileFilters=function(){return isTrue(this.gridOptions.angularCompileFilters)},GridOptionsWrapper.prototype.isDebug=function(){return isTrue(this.gridOptions.debug)},GridOptionsWrapper.prototype.getColumnDefs=function(){return this.gridOptions.columnDefs},GridOptionsWrapper.prototype.getColumnTypes=function(){return this.gridOptions.columnTypes},GridOptionsWrapper.prototype.getDatasource=function(){return this.gridOptions.datasource},GridOptionsWrapper.prototype.getViewportDatasource=function(){return this.gridOptions.viewportDatasource},GridOptionsWrapper.prototype.getServerSideDatasource=function(){return this.gridOptions.serverSideDatasource},GridOptionsWrapper.prototype.isAccentedSort=function(){return isTrue(this.gridOptions.accentedSort)},GridOptionsWrapper.prototype.isEnableBrowserTooltips=function(){return isTrue(this.gridOptions.enableBrowserTooltips)},GridOptionsWrapper.prototype.isEnableCellExpressions=function(){return isTrue(this.gridOptions.enableCellExpressions)},GridOptionsWrapper.prototype.isEnableGroupEdit=function(){return isTrue(this.gridOptions.enableGroupEdit)},GridOptionsWrapper.prototype.isSuppressMiddleClickScrolls=function(){return isTrue(this.gridOptions.suppressMiddleClickScrolls)},GridOptionsWrapper.prototype.isPreventDefaultOnContextMenu=function(){return isTrue(this.gridOptions.preventDefaultOnContextMenu)},GridOptionsWrapper.prototype.isSuppressPreventDefaultOnMouseWheel=function(){return isTrue(this.gridOptions.suppressPreventDefaultOnMouseWheel)},GridOptionsWrapper.prototype.isSuppressColumnVirtualisation=function(){return isTrue(this.gridOptions.suppressColumnVirtualisation)},GridOptionsWrapper.prototype.isSuppressRowVirtualisation=function(){return isTrue(this.gridOptions.suppressRowVirtualisation)},GridOptionsWrapper.prototype.isSuppressContextMenu=function(){return isTrue(this.gridOptions.suppressContextMenu)},GridOptionsWrapper.prototype.isAllowContextMenuWithControlKey=function(){return isTrue(this.gridOptions.allowContextMenuWithControlKey)},GridOptionsWrapper.prototype.isSuppressCopyRowsToClipboard=function(){return isTrue(this.gridOptions.suppressCopyRowsToClipboard)},GridOptionsWrapper.prototype.isSuppressCopySingleCellRanges=function(){return isTrue(this.gridOptions.suppressCopySingleCellRanges)},GridOptionsWrapper.prototype.isCopyHeadersToClipboard=function(){return isTrue(this.gridOptions.copyHeadersToClipboard)},GridOptionsWrapper.prototype.isCopyGroupHeadersToClipboard=function(){return isTrue(this.gridOptions.copyGroupHeadersToClipboard)},GridOptionsWrapper.prototype.isSuppressClipboardPaste=function(){return isTrue(this.gridOptions.suppressClipboardPaste)},GridOptionsWrapper.prototype.isSuppressLastEmptyLineOnPaste=function(){return isTrue(this.gridOptions.suppressLastEmptyLineOnPaste)},GridOptionsWrapper.prototype.isPagination=function(){return isTrue(this.gridOptions.pagination)},GridOptionsWrapper.prototype.isSuppressEnterpriseResetOnNewColumns=function(){return isTrue(this.gridOptions.suppressEnterpriseResetOnNewColumns)},GridOptionsWrapper.prototype.getProcessDataFromClipboardFunc=function(){return this.mergeGridCommonParams(this.gridOptions.processDataFromClipboard)},GridOptionsWrapper.prototype.getAsyncTransactionWaitMillis=function(){return exists(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:Constants.BATCH_WAIT_MILLIS},GridOptionsWrapper.prototype.isSuppressMovableColumns=function(){return isTrue(this.gridOptions.suppressMovableColumns)},GridOptionsWrapper.prototype.isAnimateRows=function(){return!this.isEnsureDomOrder()&&isTrue(this.gridOptions.animateRows)},GridOptionsWrapper.prototype.isSuppressColumnMoveAnimation=function(){return isTrue(this.gridOptions.suppressColumnMoveAnimation)},GridOptionsWrapper.prototype.isSuppressAggFuncInHeader=function(){return isTrue(this.gridOptions.suppressAggFuncInHeader)},GridOptionsWrapper.prototype.isSuppressAggAtRootLevel=function(){return isTrue(this.gridOptions.suppressAggAtRootLevel)},GridOptionsWrapper.prototype.isSuppressAggFilteredOnly=function(){return void 0!==this.getGroupAggFiltering()||isTrue(this.gridOptions.suppressAggFilteredOnly)},GridOptionsWrapper.prototype.isRemovePivotHeaderRowWhenSingleValueColumn=function(){return isTrue(this.gridOptions.removePivotHeaderRowWhenSingleValueColumn)},GridOptionsWrapper.prototype.isShowOpenedGroup=function(){return isTrue(this.gridOptions.showOpenedGroup)},GridOptionsWrapper.prototype.isReactUi=function(){return isTrue(this.gridOptions.reactUi)},GridOptionsWrapper.prototype.isSuppressReactUi=function(){return isTrue(this.gridOptions.suppressReactUi)},GridOptionsWrapper.prototype.isEnableRangeSelection=function(){return ModuleRegistry.isRegistered(exports.ModuleNames.RangeSelectionModule)&&isTrue(this.gridOptions.enableRangeSelection)},GridOptionsWrapper.prototype.isEnableRangeHandle=function(){return isTrue(this.gridOptions.enableRangeHandle)},GridOptionsWrapper.prototype.isEnableFillHandle=function(){return isTrue(this.gridOptions.enableFillHandle)},GridOptionsWrapper.prototype.getFillHandleDirection=function(){var direction=this.gridOptions.fillHandleDirection;return direction?"x"!==direction&&"y"!==direction&&"xy"!==direction?(doOnce((function(){return console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.")}),"warn invalid fill direction"),"xy"):direction:"xy"},GridOptionsWrapper.prototype.getFillOperation=function(){return this.mergeGridCommonParams(this.gridOptions.fillOperation)},GridOptionsWrapper.prototype.isSuppressMultiRangeSelection=function(){return isTrue(this.gridOptions.suppressMultiRangeSelection)},GridOptionsWrapper.prototype.isPaginationAutoPageSize=function(){return isTrue(this.gridOptions.paginationAutoPageSize)},GridOptionsWrapper.prototype.isRememberGroupStateWhenNewData=function(){return isTrue(this.gridOptions.rememberGroupStateWhenNewData)},GridOptionsWrapper.prototype.getIcons=function(){return this.gridOptions.icons},GridOptionsWrapper.prototype.getGroupAggFiltering=function(){var userValue=this.gridOptions.groupAggFiltering;return"function"==typeof userValue?this.mergeGridCommonParams(userValue):isTrue(userValue)?function(){return!0}:void 0},GridOptionsWrapper.prototype.getAggFuncs=function(){return this.gridOptions.aggFuncs},GridOptionsWrapper.prototype.getSortingOrder=function(){return this.gridOptions.sortingOrder},GridOptionsWrapper.prototype.getAlignedGrids=function(){return this.gridOptions.alignedGrids},GridOptionsWrapper.prototype.isMasterDetail=function(){return!!isTrue(this.gridOptions.masterDetail)&&ModuleRegistry.assertRegistered(exports.ModuleNames.MasterDetailModule,"masterDetail")},GridOptionsWrapper.prototype.isKeepDetailRows=function(){return isTrue(this.gridOptions.keepDetailRows)},GridOptionsWrapper.prototype.getKeepDetailRowsCount=function(){var keepDetailRowsCount=this.gridOptions.keepDetailRowsCount;return exists(keepDetailRowsCount)&&keepDetailRowsCount>0?this.gridOptions.keepDetailRowsCount:10},GridOptionsWrapper.prototype.getIsRowMasterFunc=function(){return this.gridOptions.isRowMaster},GridOptionsWrapper.prototype.getIsRowSelectableFunc=function(){return this.gridOptions.isRowSelectable},GridOptionsWrapper.prototype.getGroupRowRendererParams=function(){return this.gridOptions.groupRowRendererParams},GridOptionsWrapper.prototype.getOverlayLoadingTemplate=function(){return this.gridOptions.overlayLoadingTemplate},GridOptionsWrapper.prototype.getOverlayNoRowsTemplate=function(){return this.gridOptions.overlayNoRowsTemplate},GridOptionsWrapper.prototype.isSuppressAutoSize=function(){return isTrue(this.gridOptions.suppressAutoSize)},GridOptionsWrapper.prototype.isEnableCellTextSelection=function(){return isTrue(this.gridOptions.enableCellTextSelection)},GridOptionsWrapper.prototype.isSuppressParentsInRowNodes=function(){return isTrue(this.gridOptions.suppressParentsInRowNodes)},GridOptionsWrapper.prototype.isSuppressClipboardApi=function(){return isTrue(this.gridOptions.suppressClipboardApi)},GridOptionsWrapper.prototype.isFunctionsReadOnly=function(){return isTrue(this.gridOptions.functionsReadOnly)},GridOptionsWrapper.prototype.isEnableCellTextSelect=function(){return isTrue(this.gridOptions.enableCellTextSelection)},GridOptionsWrapper.prototype.getDefaultColDef=function(){return this.gridOptions.defaultColDef},GridOptionsWrapper.prototype.getDefaultColGroupDef=function(){return this.gridOptions.defaultColGroupDef},GridOptionsWrapper.prototype.getDefaultExportParams=function(type){return this.gridOptions.defaultExportParams?(console.warn("AG Grid: Since v25.2 `defaultExportParams`  has been replaced by `default"+capitalise(type)+"ExportParams`'"),this.gridOptions.defaultExportParams):"csv"===type&&this.gridOptions.defaultCsvExportParams?this.gridOptions.defaultCsvExportParams:"excel"===type&&this.gridOptions.defaultExcelExportParams?this.gridOptions.defaultExcelExportParams:void 0},GridOptionsWrapper.prototype.isSuppressCsvExport=function(){return isTrue(this.gridOptions.suppressCsvExport)},GridOptionsWrapper.prototype.isAllowShowChangeAfterFilter=function(){return isTrue(this.gridOptions.allowShowChangeAfterFilter)},GridOptionsWrapper.prototype.isSuppressExcelExport=function(){return isTrue(this.gridOptions.suppressExcelExport)},GridOptionsWrapper.prototype.isSuppressMakeColumnVisibleAfterUnGroup=function(){return isTrue(this.gridOptions.suppressMakeColumnVisibleAfterUnGroup)},GridOptionsWrapper.prototype.getDataPathFunc=function(){return this.gridOptions.getDataPath},GridOptionsWrapper.prototype.getIsServerSideGroupFunc=function(){return this.gridOptions.isServerSideGroup},GridOptionsWrapper.prototype.getIsServerSideGroupOpenByDefaultFunc=function(){return this.mergeGridCommonParams(this.gridOptions.isServerSideGroupOpenByDefault)},GridOptionsWrapper.prototype.getIsGroupOpenByDefaultFunc=function(){return this.mergeGridCommonParams(this.gridOptions.isGroupOpenByDefault)},GridOptionsWrapper.prototype.getServerSideGroupKeyFunc=function(){return this.gridOptions.getServerSideGroupKey},GridOptionsWrapper.prototype.getGroupRowAggFunc=function(){var _a=this.gridOptions,getGroupRowAgg=_a.getGroupRowAgg,groupRowAggNodes=_a.groupRowAggNodes;return getGroupRowAgg?this.mergeGridCommonParams(getGroupRowAgg):groupRowAggNodes?function(params){return groupRowAggNodes(params.nodes)}:void 0},GridOptionsWrapper.prototype.getContextMenuItemsFunc=function(){return this.mergeGridCommonParams(this.gridOptions.getContextMenuItems)},GridOptionsWrapper.prototype.getMainMenuItemsFunc=function(){return this.mergeGridCommonParams(this.gridOptions.getMainMenuItems)},GridOptionsWrapper.prototype.getRowIdFunc=function(){var _a=this.gridOptions,getRowId=_a.getRowId,getRowNodeId=_a.getRowNodeId;return getRowId?this.mergeGridCommonParams(getRowId):getRowNodeId?function(params){return getRowNodeId(params.data)}:void 0},GridOptionsWrapper.prototype.getNavigateToNextHeaderFunc=function(){return this.mergeGridCommonParams(this.gridOptions.navigateToNextHeader)},GridOptionsWrapper.prototype.getTabToNextHeaderFunc=function(){return this.mergeGridCommonParams(this.gridOptions.tabToNextHeader)},GridOptionsWrapper.prototype.getNavigateToNextCellFunc=function(){return this.mergeGridCommonParams(this.gridOptions.navigateToNextCell)},GridOptionsWrapper.prototype.getTabToNextCellFunc=function(){return this.mergeGridCommonParams(this.gridOptions.tabToNextCell)},GridOptionsWrapper.prototype.getGridTabIndex=function(){return(this.gridOptions.tabIndex||0).toString()},GridOptionsWrapper.prototype.isTreeData=function(){return!!isTrue(this.gridOptions.treeData)&&ModuleRegistry.assertRegistered(exports.ModuleNames.RowGroupingModule,"Tree Data")},GridOptionsWrapper.prototype.isValueCache=function(){return isTrue(this.gridOptions.valueCache)},GridOptionsWrapper.prototype.isValueCacheNeverExpires=function(){return isTrue(this.gridOptions.valueCacheNeverExpires)},GridOptionsWrapper.prototype.isDeltaSort=function(){return isTrue(this.gridOptions.deltaSort)},GridOptionsWrapper.prototype.isAggregateOnlyChangedColumns=function(){return isTrue(this.gridOptions.aggregateOnlyChangedColumns)},GridOptionsWrapper.prototype.getProcessSecondaryColDefFunc=function(){return this.gridOptions.processSecondaryColDef},GridOptionsWrapper.prototype.getProcessSecondaryColGroupDefFunc=function(){return this.gridOptions.processSecondaryColGroupDef},GridOptionsWrapper.prototype.getSendToClipboardFunc=function(){return this.mergeGridCommonParams(this.gridOptions.sendToClipboard)},GridOptionsWrapper.prototype.getProcessRowPostCreateFunc=function(){return this.mergeGridCommonParams(this.gridOptions.processRowPostCreate)},GridOptionsWrapper.prototype.getProcessCellForClipboardFunc=function(){return this.mergeGridCommonParams(this.gridOptions.processCellForClipboard)},GridOptionsWrapper.prototype.getProcessHeaderForClipboardFunc=function(){return this.mergeGridCommonParams(this.gridOptions.processHeaderForClipboard)},GridOptionsWrapper.prototype.getProcessGroupHeaderForClipboardFunc=function(){return this.mergeGridCommonParams(this.gridOptions.processGroupHeaderForClipboard)},GridOptionsWrapper.prototype.getProcessCellFromClipboardFunc=function(){return this.mergeGridCommonParams(this.gridOptions.processCellFromClipboard)},GridOptionsWrapper.prototype.getViewportRowModelPageSize=function(){return oneOrGreater(this.gridOptions.viewportRowModelPageSize,5)},GridOptionsWrapper.prototype.getViewportRowModelBufferSize=function(){return function zeroOrGreater(value,defaultValue){return value>=0?value:defaultValue}(this.gridOptions.viewportRowModelBufferSize,5)},GridOptionsWrapper.prototype.isServerSideSortingAlwaysResets=function(){return isTrue(this.gridOptions.serverSideSortingAlwaysResets)},GridOptionsWrapper.prototype.isServerSideFilteringAlwaysResets=function(){return isTrue(this.gridOptions.serverSideFilteringAlwaysResets)},GridOptionsWrapper.prototype.getPostSortFunc=function(){var _a=this.gridOptions,postSortRows=_a.postSortRows,postSort=_a.postSort;return postSortRows?this.mergeGridCommonParams(postSortRows):postSort?function(params){return postSort(params.nodes)}:void 0},GridOptionsWrapper.prototype.getChartToolbarItemsFunc=function(){return this.mergeGridCommonParams(this.gridOptions.getChartToolbarItems)},GridOptionsWrapper.prototype.getChartThemeOverrides=function(){return this.gridOptions.chartThemeOverrides},GridOptionsWrapper.prototype.getCustomChartThemes=function(){return this.gridOptions.customChartThemes},GridOptionsWrapper.prototype.getChartThemes=function(){return this.gridOptions.chartThemes||["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"]},GridOptionsWrapper.prototype.getClipboardDelimiter=function(){return exists(this.gridOptions.clipboardDelimiter)?this.gridOptions.clipboardDelimiter:"\t"},GridOptionsWrapper.prototype.setProperty=function(key,value,force){void 0===force&&(force=!1);var gridOptionsNoType=this.gridOptions,previousValue=gridOptionsNoType[key];if(force||previousValue!==value){gridOptionsNoType[key]=value;var event_1={type:key,currentValue:value,previousValue};this.propertyEventService.dispatchEvent(event_1)}},GridOptionsWrapper.prototype.addEventListener=function(key,listener){this.propertyEventService.addEventListener(key,listener)},GridOptionsWrapper.prototype.removeEventListener=function(key,listener){this.propertyEventService.removeEventListener(key,listener)},GridOptionsWrapper.prototype.isSkipHeaderOnAutoSize=function(){return!!this.gridOptions.skipHeaderOnAutoSize},GridOptionsWrapper.prototype.getAutoSizePadding=function(){var value=this.gridOptions.autoSizePadding;return null!=value&&value>=0?value:20},GridOptionsWrapper.prototype.getHeaderHeight=function(){return"number"==typeof this.gridOptions.headerHeight?this.gridOptions.headerHeight:this.getFromTheme(25,"headerHeight")},GridOptionsWrapper.prototype.getFloatingFiltersHeight=function(){return"number"==typeof this.gridOptions.floatingFiltersHeight?this.gridOptions.floatingFiltersHeight:this.getFromTheme(25,"headerHeight")},GridOptionsWrapper.prototype.getGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.groupHeaderHeight?this.gridOptions.groupHeaderHeight:this.getHeaderHeight()},GridOptionsWrapper.prototype.getPivotHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotHeaderHeight?this.gridOptions.pivotHeaderHeight:this.getHeaderHeight()},GridOptionsWrapper.prototype.getPivotGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotGroupHeaderHeight?this.gridOptions.pivotGroupHeaderHeight:this.getGroupHeaderHeight()},GridOptionsWrapper.prototype.isExternalFilterPresent=function(){return"function"==typeof this.gridOptions.isExternalFilterPresent&&this.gridOptions.isExternalFilterPresent({api:this.getApi(),columnApi:this.getColumnApi(),context:this.getContext()})},GridOptionsWrapper.prototype.doesExternalFilterPass=function(node){return"function"==typeof this.gridOptions.doesExternalFilterPass&&this.gridOptions.doesExternalFilterPass(node)},GridOptionsWrapper.prototype.getTooltipDelay=function(type){var _a=this.gridOptions,tooltipShowDelay=_a.tooltipShowDelay,tooltipHideDelay=_a.tooltipHideDelay,delay="show"===type?tooltipShowDelay:tooltipHideDelay,capitalisedType=capitalise(type);return exists(delay)?(delay<0&&doOnce((function(){return console.warn("ag-grid: tooltip"+capitalisedType+"Delay should not be lower than 0")}),"tooltip"+capitalisedType+"DelayWarn"),Math.max(200,delay)):null},GridOptionsWrapper.prototype.isTooltipMouseTrack=function(){return isTrue(this.gridOptions.tooltipMouseTrack)},GridOptionsWrapper.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(){return isTrue(this.gridOptions.suppressModelUpdateAfterUpdateTransaction)},GridOptionsWrapper.prototype.getDocument=function(){var result=null;return this.gridOptions.getDocument&&exists(this.gridOptions.getDocument)?result=this.gridOptions.getDocument():this.eGridDiv&&(result=this.eGridDiv.ownerDocument),result&&exists(result)?result:document},GridOptionsWrapper.prototype.getMinColWidth=function(){var minColWidth=this.gridOptions.minColWidth;if(exists(minColWidth)&&minColWidth>GridOptionsWrapper_1.MIN_COL_WIDTH)return this.gridOptions.minColWidth;var measuredMin=this.getFromTheme(null,"headerCellMinWidth");return exists(measuredMin)?Math.max(measuredMin,GridOptionsWrapper_1.MIN_COL_WIDTH):GridOptionsWrapper_1.MIN_COL_WIDTH},GridOptionsWrapper.prototype.getMaxColWidth=function(){return this.gridOptions.maxColWidth&&this.gridOptions.maxColWidth>GridOptionsWrapper_1.MIN_COL_WIDTH?this.gridOptions.maxColWidth:null},GridOptionsWrapper.prototype.getColWidth=function(){return"number"!=typeof this.gridOptions.colWidth||this.gridOptions.colWidth<GridOptionsWrapper_1.MIN_COL_WIDTH?200:this.gridOptions.colWidth},GridOptionsWrapper.prototype.getRowBuffer=function(){var rowBuffer=this.gridOptions.rowBuffer;return"number"==typeof rowBuffer?rowBuffer<0&&(doOnce((function(){return console.warn("AG Grid: rowBuffer should not be negative")}),"warn rowBuffer negative"),this.gridOptions.rowBuffer=rowBuffer=0):rowBuffer=Constants.ROW_BUFFER_SIZE,rowBuffer},GridOptionsWrapper.prototype.getRowBufferInPixels=function(){return this.getRowBuffer()*this.getRowHeightAsNumber()},GridOptionsWrapper.prototype.getScrollbarWidth=function(){if(null==this.scrollbarWidth){var scrollbarWidth="number"==typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:getScrollbarWidth();null!=scrollbarWidth&&(this.scrollbarWidth=scrollbarWidth,this.eventService.dispatchEvent({type:Events.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},GridOptionsWrapper.prototype.checkForDeprecated=function(){var options=this.gridOptions;options.deprecatedEmbedFullWidthRows&&console.warn("AG Grid: since v21.2, deprecatedEmbedFullWidthRows has been replaced with embedFullWidthRows."),options.rowDeselection&&console.warn("AG Grid: since v24.x, rowDeselection is deprecated and the behaviour is true by default. Please use `suppressRowDeselection` to prevent rows from being deselected."),options.enableMultiRowDragging&&(options.rowDragMultiRow=!0,delete options.enableMultiRowDragging,console.warn("AG Grid: since v26.1, `enableMultiRowDragging` is deprecated. Please use `rowDragMultiRow`."));var checkRenamedProperty=function(oldProp,newProp,version){null!=options[oldProp]&&(console.warn("AG Grid: since version "+version+", '"+oldProp+"' is deprecated / renamed, please use the new property name '"+newProp+"' instead."),null==options[newProp]&&(options[newProp]=options[oldProp]))};if(checkRenamedProperty("batchUpdateWaitMillis","asyncTransactionWaitMillis","23.1.x"),checkRenamedProperty("deltaRowDataMode","immutableData","23.1.x"),(options.immutableColumns||options.deltaColumnMode)&&console.warn("AG Grid: since v24.0, immutableColumns and deltaColumnMode properties are gone. The grid now works like this as default. To keep column order maintained, set grid property applyColumnDefOrder=true"),checkRenamedProperty("suppressSetColumnStateEvents","suppressColumnStateEvents","24.0.x"),options.groupRowInnerRenderer||options.groupRowInnerRendererParams||options.groupRowInnerRendererFramework){console.warn("AG Grid: since v24.0, grid properties groupRowInnerRenderer, groupRowInnerRendererFramework and groupRowInnerRendererParams are no longer used."),console.warn("  Instead use the grid properties groupRowRendererParams.innerRenderer, groupRowRendererParams.innerRendererFramework and groupRowRendererParams.innerRendererParams."),console.warn("  For example instead of this:"),console.warn('    groupRowInnerRenderer: "myRenderer"'),console.warn("    groupRowInnerRendererParams: {x: a}"),console.warn("  Replace with this:"),console.warn("    groupRowRendererParams: {"),console.warn('      innerRenderer: "myRenderer",'),console.warn("      innerRendererParams: {x: a}"),console.warn("    }"),console.warn("  We have copied the properties over for you. However to stop this error message, please change your application code."),options.groupRowRendererParams||(options.groupRowRendererParams={});var params=options.groupRowRendererParams;options.groupRowInnerRenderer&&(params.innerRenderer=options.groupRowInnerRenderer),options.groupRowInnerRendererParams&&(params.innerRendererParams=options.groupRowInnerRendererParams),options.groupRowInnerRendererFramework&&(params.innerRendererFramework=options.groupRowInnerRendererFramework)}if(options.rememberGroupStateWhenNewData&&console.warn("AG Grid: since v24.0, grid property rememberGroupStateWhenNewData is deprecated. This feature was provided before Transaction Updates worked (which keep group state). Now that transaction updates are possible and they keep group state, this feature is no longer needed."),options.detailCellRendererParams&&options.detailCellRendererParams.autoHeight&&(console.warn("AG Grid: since v24.1, grid property detailCellRendererParams.autoHeight is replaced with grid property detailRowAutoHeight. This allows this feature to work when you provide a custom DetailCellRenderer"),options.detailRowAutoHeight=!0),options.suppressKeyboardEvent&&console.warn("AG Grid: since v24.1 suppressKeyboardEvent in the gridOptions has been deprecated and will be removed in\n                 future versions of AG Grid. If you need this to be set for every column use the defaultColDef property."),options.suppressEnterpriseResetOnNewColumns&&console.warn("AG Grid: since v25, grid property suppressEnterpriseResetOnNewColumns is deprecated. This was a temporary property to allow changing columns in Server Side Row Model without triggering a reload. Now that it is possible to dynamically change columns in the grid, this is no longer needed."),options.suppressColumnStateEvents&&console.warn('AG Grid: since v25, grid property suppressColumnStateEvents no longer works due to a refactor that we did. It should be possible to achieve similar using event.source, which would be "api" if the event was due to setting column state via the API'),options.defaultExportParams&&console.warn("AG Grid: since v25.2, the grid property `defaultExportParams` has been replaced by `defaultCsvExportParams` and `defaultExcelExportParams`."),options.stopEditingWhenGridLosesFocus&&(console.warn("AG Grid: since v25.2.2, the grid property `stopEditingWhenGridLosesFocus` has been replaced by `stopEditingWhenCellsLoseFocus`."),options.stopEditingWhenCellsLoseFocus=!0),options.applyColumnDefOrder&&console.warn("AG Grid: since v26.0, the grid property `applyColumnDefOrder` is no longer needed, as this is the default behaviour. To turn this behaviour off, set maintainColumnOrder=true"),options.groupMultiAutoColumn&&(console.warn("AG Grid: since v26.0, the grid property `groupMultiAutoColumn` has been replaced by `groupDisplayType = 'multipleColumns'`"),options.groupDisplayType="multipleColumns"),options.groupUseEntireRow&&(console.warn("AG Grid: since v26.0, the grid property `groupUseEntireRow` has been replaced by `groupDisplayType = 'groupRows'`"),options.groupDisplayType="groupRows"),options.groupSuppressAutoColumn){var propName=options.treeData?"treeDataDisplayType":"groupDisplayType";console.warn("AG Grid: since v26.0, the grid property `groupSuppressAutoColumn` has been replaced by `"+propName+" = 'custom'`"),options.groupDisplayType="custom"}options.defaultGroupOrderComparator&&console.warn("AG Grid: since v27.2, the grid property `defaultGroupOrderComparator` is deprecated and has been replaced by `initialGroupOrderComparator` and now receives a single params object."),options.defaultGroupSortComparator&&(console.warn("AG Grid: since v26.0, the grid property `defaultGroupSortComparator` has been replaced by `initialGroupOrderComparator`"),options.defaultGroupOrderComparator=options.defaultGroupSortComparator),options.groupRowAggNodes&&console.warn("AG Grid: since v27.2, the grid property `groupRowAggNodes` is deprecated and has been replaced by `getGroupRowAgg` and now receives a single params object."),options.postSort&&console.warn("AG Grid: since v27.2, the grid property `postSort` is deprecated and has been replaced by `postSortRows` and now receives a single params object."),options.isFullWidthCell&&console.warn("AG Grid: since v27.2, the grid property `isFullWidthCell` is deprecated and has been replaced by `isFullWidthRow` and now receives a single params object."),options.localeTextFunc&&console.warn("AG Grid: since v27.2, the grid property `localeTextFunc` is deprecated and has been replaced by `getLocaleText` and now receives a single params object."),options.colWidth&&console.warn("AG Grid: since v26.1, the grid property `colWidth` is deprecated and should be set via `defaultColDef.width`."),options.minColWidth&&console.warn("AG Grid: since v26.1, the grid property `minColWidth` is deprecated and should be set via `defaultColDef.minWidth`."),options.maxColWidth&&console.warn("AG Grid: since v26.1, the grid property `maxColWidth` is deprecated and should be set via `defaultColDef.maxWidth`."),options.reactUi&&console.warn("AG Grid: since v27.0, React UI is on by default, so no need for reactUi=true. To turn it off, set suppressReactUi=true."),options.suppressReactUi&&console.warn("AG Grid: The legacy React rendering engine is deprecated and will be removed in the next major version of the grid."),options.suppressCellSelection&&(console.warn("AG Grid: since v27.0, `suppressCellSelection` has been replaced by `suppressCellFocus`."),options.suppressCellFocus=options.suppressCellSelection),options.getRowNodeId&&console.warn("AG Grid: since v27.1, `getRowNodeId` is deprecated and has been replaced by `getRowId`. The difference: if getRowId() is implemented then immutable data is enabled by default."),options.immutableData&&(options.getRowId?console.warn("AG Grid: since v27.1, `immutableData` is deprecated. With the `getRowId` callback implemented, immutable data is enabled by default so you can remove `immutableData=true`."):console.warn("AG Grid: since v27.1, `immutableData` is deprecated. To enable immutable data you must implement the `getRowId()` callback.")),options.clipboardDeliminator&&(console.warn("AG Grid: since v27.1, `clipboardDeliminator` has been replaced by `clipboardDelimiter`."),options.clipboardDelimiter=options.clipboardDeliminator)},GridOptionsWrapper.prototype.checkForViolations=function(){this.isTreeData()&&this.treeDataViolations()},GridOptionsWrapper.prototype.treeDataViolations=function(){this.isRowModelDefault()&&missing(this.getDataPathFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data."),this.isRowModelServerSide()&&(missing(this.getIsServerSideGroupFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),missing(this.getServerSideGroupKeyFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))},GridOptionsWrapper.prototype.getLocaleTextFunc=function(){var _this=this,_a=this.gridOptions,localeText=_a.localeText,getLocaleText=_a.getLocaleText,localeTextFunc=_a.localeTextFunc;return getLocaleText?function(key,defaultValue,variableValues){var params={key,defaultValue,variableValues,api:_this.getApi(),columnApi:_this.getColumnApi(),context:_this.getContext()};return getLocaleText(params)}:localeTextFunc||function(key,defaultValue,variableValues){var localisedText=localeText&&localeText[key];if(localisedText&&variableValues&&variableValues.length)for(var found=0;!(found>=variableValues.length);){if(-1===localisedText.indexOf("${variable}"))break;localisedText=localisedText.replace("${variable}",variableValues[found++])}return null!=localisedText?localisedText:defaultValue}},GridOptionsWrapper.prototype.globalEventHandler=function(eventName,event){if(!this.destroyed){var callbackMethodName=ComponentUtil.getCallbackForEvent(eventName);"function"==typeof this.gridOptions[callbackMethodName]&&this.gridOptions[callbackMethodName](event)}},GridOptionsWrapper.prototype.setRowHeightVariable=function(height){var newRowHeight=height+"px";this.eGridDiv.style.getPropertyValue("--ag-line-height").trim()!=newRowHeight&&this.eGridDiv.style.setProperty("--ag-line-height",newRowHeight)},GridOptionsWrapper.prototype.getRowHeightAsNumber=function(){if(!this.gridOptions.rowHeight||missing(this.gridOptions.rowHeight))return this.getDefaultRowHeight();var rowHeight=this.gridOptions.rowHeight;return rowHeight&&this.isNumeric(rowHeight)?(this.setRowHeightVariable(rowHeight),rowHeight):(console.warn("AG Grid row height must be a number if not using standard row model"),this.getDefaultRowHeight())},GridOptionsWrapper.prototype.isGetRowHeightFunction=function(){return"function"==typeof this.gridOptions.getRowHeight},GridOptionsWrapper.prototype.getRowHeightForNode=function(rowNode,allowEstimate,defaultRowHeight){if(void 0===allowEstimate&&(allowEstimate=!1),null==defaultRowHeight&&(defaultRowHeight=this.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(allowEstimate)return{height:defaultRowHeight,estimated:!0};var params={node:rowNode,data:rowNode.data},height=this.mergeGridCommonParams(this.gridOptions.getRowHeight)(params);if(this.isNumeric(height))return 0===height&&doOnce((function(){return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.")}),"invalidRowHeight"),{height:Math.max(1,height),estimated:!1}}return rowNode.detail&&this.isMasterDetail()?this.isDetailRowAutoHeight()?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}:{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:defaultRowHeight,estimated:!1}},GridOptionsWrapper.prototype.isDynamicRowHeight=function(){return"function"==typeof this.gridOptions.getRowHeight},GridOptionsWrapper.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},GridOptionsWrapper.prototype.chartMenuPanelWidth=function(){return this.environment.chartMenuPanelWidth()},GridOptionsWrapper.prototype.isNumeric=function(value){return!isNaN(value)&&"number"==typeof value&&isFinite(value)},GridOptionsWrapper.prototype.getFromTheme=function(defaultValue,sassVariableName){var theme=this.environment.getTheme().theme;return theme&&0===theme.indexOf("ag-theme")?this.environment.getSassVariable(theme,sassVariableName):defaultValue},GridOptionsWrapper.prototype.getDefaultRowHeight=function(){return this.getFromTheme(25,"rowHeight")},GridOptionsWrapper.prototype.matchesGroupDisplayType=function(toMatch,supplied){var groupDisplayTypeValues=["groupRows","multipleColumns","custom","singleColumn"];return groupDisplayTypeValues.indexOf(supplied)<0?(console.warn("AG Grid: '"+supplied+"' is not a valid groupDisplayType value - possible values are: '"+groupDisplayTypeValues.join("', '")+"'"),!1):supplied===toMatch},GridOptionsWrapper.prototype.matchesTreeDataDisplayType=function(toMatch,supplied){var treeDataDisplayTypeValues=["auto","custom"];return treeDataDisplayTypeValues.indexOf(supplied)<0?(console.warn("AG Grid: '"+supplied+"' is not a valid treeDataDisplayType value - possible values are: '"+treeDataDisplayTypeValues.join("', '")+"'"),!1):supplied===toMatch},GridOptionsWrapper.MIN_COL_WIDTH=10,GridOptionsWrapper.PROP_HEADER_HEIGHT="headerHeight",GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN="groupRemoveSingleChildren",GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN="groupRemoveLowestSingleChildren",GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT="pivotHeaderHeight",GridOptionsWrapper.PROP_SUPPRESS_CLIPBOARD_PASTE="suppressClipboardPaste",GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT="groupHeaderHeight",GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT="pivotGroupHeaderHeight",GridOptionsWrapper.PROP_NAVIGATE_TO_NEXT_CELL="navigateToNextCell",GridOptionsWrapper.PROP_TAB_TO_NEXT_CELL="tabToNextCell",GridOptionsWrapper.PROP_NAVIGATE_TO_NEXT_HEADER="navigateToNextHeader",GridOptionsWrapper.PROP_TAB_TO_NEXT_HEADER="tabToNextHeader",GridOptionsWrapper.PROP_IS_EXTERNAL_FILTER_PRESENT="isExternalFilterPresent",GridOptionsWrapper.PROP_DOES_EXTERNAL_FILTER_PASS="doesExternalFilterPass",GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT="floatingFiltersHeight",GridOptionsWrapper.PROP_SUPPRESS_ROW_CLICK_SELECTION="suppressRowClickSelection",GridOptionsWrapper.PROP_SUPPRESS_ROW_DRAG="suppressRowDrag",GridOptionsWrapper.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG="suppressMoveWhenRowDragging",GridOptionsWrapper.PROP_GET_ROW_CLASS="getRowClass",GridOptionsWrapper.PROP_GET_ROW_STYLE="getRowStyle",GridOptionsWrapper.PROP_GET_ROW_HEIGHT="getRowHeight",GridOptionsWrapper.PROP_POPUP_PARENT="popupParent",GridOptionsWrapper.PROP_DOM_LAYOUT="domLayout",GridOptionsWrapper.PROP_ROW_CLASS="rowClass",GridOptionsWrapper.PROP_FILL_HANDLE_DIRECTION="fillHandleDirection",GridOptionsWrapper.PROP_GROUP_ROW_AGG_NODES="groupRowAggNodes",GridOptionsWrapper.PROP_GET_GROUP_ROW_AGG="getGroupRowAgg",GridOptionsWrapper.PROP_GET_BUSINESS_KEY_FOR_NODE="getBusinessKeyForNode",GridOptionsWrapper.PROP_GET_CHILD_COUNT="getChildCount",GridOptionsWrapper.PROP_PROCESS_ROW_POST_CREATE="processRowPostCreate",GridOptionsWrapper.PROP_GET_ROW_NODE_ID="getRowNodeId",GridOptionsWrapper.PROP_GET_ROW_ID="getRowId",GridOptionsWrapper.PROP_IS_FULL_WIDTH_CELL="isFullWidthCell",GridOptionsWrapper.PROP_IS_FULL_WIDTH_ROW="isFullWidthRow",GridOptionsWrapper.PROP_IS_ROW_SELECTABLE="isRowSelectable",GridOptionsWrapper.PROP_IS_ROW_MASTER="isRowMaster",GridOptionsWrapper.PROP_POST_SORT="postSort",GridOptionsWrapper.PROP_POST_SORT_ROWS="postSortRows",GridOptionsWrapper.PROP_GET_DOCUMENT="getDocument",GridOptionsWrapper.PROP_POST_PROCESS_POPUP="postProcessPopup",GridOptionsWrapper.PROP_DEFAULT_GROUP_ORDER_COMPARATOR="defaultGroupOrderComparator",GridOptionsWrapper.PROP_INITIAL_GROUP_ORDER_COMPARATOR="initialGroupOrderComparator",GridOptionsWrapper.PROP_PAGINATION_NUMBER_FORMATTER="paginationNumberFormatter",GridOptionsWrapper.PROP_GET_CONTEXT_MENU_ITEMS="getContextMenuItems",GridOptionsWrapper.PROP_GET_MAIN_MENU_ITEMS="getMainMenuItems",GridOptionsWrapper.PROP_PROCESS_CELL_FOR_CLIPBOARD="processCellForClipboard",GridOptionsWrapper.PROP_PROCESS_CELL_FROM_CLIPBOARD="processCellFromClipboard",GridOptionsWrapper.PROP_SEND_TO_CLIPBOARD="sendToClipboard",GridOptionsWrapper.PROP_PROCESS_TO_SECONDARY_COLDEF="processSecondaryColDef",GridOptionsWrapper.PROP_PROCESS_SECONDARY_COL_GROUP_DEF="processSecondaryColGroupDef",GridOptionsWrapper.PROP_GET_CHART_TOOLBAR_ITEMS="getChartToolbarItems",GridOptionsWrapper.PROP_GET_SERVER_SIDE_STORE_PARAMS="getServerSideStoreParams",GridOptionsWrapper.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT="isServerSideGroupOpenByDefault",GridOptionsWrapper.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION="isApplyServerSideTransaction",GridOptionsWrapper.PROP_IS_SERVER_SIDE_GROUP="isServerSideGroup",GridOptionsWrapper.PROP_GET_SERVER_SIDE_GROUP_KEY="getServerSideGroupKey",__decorate$I([Autowired("gridOptions")],GridOptionsWrapper.prototype,"gridOptions",void 0),__decorate$I([Autowired("eventService")],GridOptionsWrapper.prototype,"eventService",void 0),__decorate$I([Autowired("environment")],GridOptionsWrapper.prototype,"environment",void 0),__decorate$I([Autowired("eGridDiv")],GridOptionsWrapper.prototype,"eGridDiv",void 0),__decorate$I([__param$3(0,Qualifier("gridApi")),__param$3(1,Qualifier("columnApi"))],GridOptionsWrapper.prototype,"agWire",null),__decorate$I([PreDestroy],GridOptionsWrapper.prototype,"destroy",null),__decorate$I([PostConstruct],GridOptionsWrapper.prototype,"init",null),GridOptionsWrapper=GridOptionsWrapper_1=__decorate$I([Bean("gridOptionsWrapper")],GridOptionsWrapper)}(),__extends$Q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$J=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};(LayoutCssClasses=exports.LayoutCssClasses||(exports.LayoutCssClasses={})).AUTO_HEIGHT="ag-layout-auto-height",LayoutCssClasses.NORMAL="ag-layout-normal",LayoutCssClasses.PRINT="ag-layout-print";var RowAnimationCssClasses,LayoutFeature=function(_super){function LayoutFeature(view){var _this=_super.call(this)||this;return _this.view=view,_this}return __extends$Q(LayoutFeature,_super),LayoutFeature.prototype.postConstruct=function(){this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_DOM_LAYOUT,this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},LayoutFeature.prototype.updateLayoutClasses=function(){var domLayout=this.gridOptionsWrapper.getDomLayout(),params={autoHeight:domLayout===Constants.DOM_LAYOUT_AUTO_HEIGHT,normal:domLayout===Constants.DOM_LAYOUT_NORMAL,print:domLayout===Constants.DOM_LAYOUT_PRINT},cssClass=params.autoHeight?exports.LayoutCssClasses.AUTO_HEIGHT:params.print?exports.LayoutCssClasses.PRINT:exports.LayoutCssClasses.NORMAL;this.view.updateLayoutClasses(cssClass,params)},__decorate$J([Autowired("gridOptionsWrapper")],LayoutFeature.prototype,"gridOptionsWrapper",void 0),__decorate$J([PostConstruct],LayoutFeature.prototype,"postConstruct",null),LayoutFeature}(BeanStub),__extends$R=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$K=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridBodyScrollFeature=function(_super){function GridBodyScrollFeature(eBodyViewport){var _this=_super.call(this)||this;return _this.scrollLeft=-1,_this.nextScrollTop=-1,_this.scrollTop=-1,_this.eBodyViewport=eBodyViewport,_this.resetLastHorizontalScrollElementDebounced=debounce(_this.resetLastHorizontalScrollElement.bind(_this),500),_this}return __extends$R(GridBodyScrollFeature,_super),GridBodyScrollFeature.prototype.postConstruct=function(){var _this=this;this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady((function(p){_this.centerRowContainerCtrl=p.centerRowContainerCtrl,_this.onDisplayedColumnsWidthChanged(),_this.addScrollListener()}))},GridBodyScrollFeature.prototype.addScrollListener=function(){var fakeHScroll=this.ctrlsService.getFakeHScrollCtrl();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onCenterViewportScroll.bind(this)),this.addManagedListener(fakeHScroll.getViewport(),"scroll",this.onFakeHorizontalScroll.bind(this));var onVerticalScroll=this.gridOptionsWrapper.isDebounceVerticalScrollbar()?debounce(this.onVerticalScroll.bind(this),100):this.onVerticalScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",onVerticalScroll)},GridBodyScrollFeature.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},GridBodyScrollFeature.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(scrollLeft){if(!(null==this.centerRowContainerCtrl)){void 0===scrollLeft&&(scrollLeft=this.centerRowContainerCtrl.getCenterViewportScrollLeft());var offset=this.enableRtl?scrollLeft:-scrollLeft,topCenterContainer=this.ctrlsService.getTopCenterRowContainerCtrl(),bottomCenterContainer=this.ctrlsService.getBottomCenterRowContainerCtrl(),fakeHScroll=this.ctrlsService.getFakeHScrollCtrl();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(offset),bottomCenterContainer.setContainerTranslateX(offset),topCenterContainer.setContainerTranslateX(offset),setScrollLeft(this.lastHorizontalScrollElement===this.centerRowContainerCtrl.getViewportElement()?fakeHScroll.getViewport():this.centerRowContainerCtrl.getViewportElement(),Math.abs(scrollLeft),this.enableRtl)}},GridBodyScrollFeature.prototype.isControllingScroll=function(eDiv){return this.lastHorizontalScrollElement?eDiv===this.lastHorizontalScrollElement:(this.lastHorizontalScrollElement=eDiv,!0)},GridBodyScrollFeature.prototype.onFakeHorizontalScroll=function(){var fakeHScrollViewport=this.ctrlsService.getFakeHScrollCtrl().getViewport();this.isControllingScroll(fakeHScrollViewport)&&this.onBodyHorizontalScroll(fakeHScrollViewport)},GridBodyScrollFeature.prototype.onCenterViewportScroll=function(){var centerContainerViewport=this.centerRowContainerCtrl.getViewportElement();this.isControllingScroll(centerContainerViewport)&&this.onBodyHorizontalScroll(centerContainerViewport)},GridBodyScrollFeature.prototype.onBodyHorizontalScroll=function(eSource){var scrollLeft=this.centerRowContainerCtrl.getViewportElement().scrollLeft;this.shouldBlockScrollUpdate("horizontal",scrollLeft,!0)||(this.doHorizontalScroll(Math.round(getScrollLeft(eSource,this.enableRtl))),this.resetLastHorizontalScrollElementDebounced())},GridBodyScrollFeature.prototype.onVerticalScroll=function(){var scrollTop=this.eBodyViewport.scrollTop;this.shouldBlockScrollUpdate("vertical",scrollTop,!0)||(this.animationFrameService.setScrollTop(scrollTop),this.nextScrollTop=scrollTop,this.gridOptionsWrapper.isSuppressAnimationFrame()?(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()):this.animationFrameService.schedule())},GridBodyScrollFeature.prototype.resetLastHorizontalScrollElement=function(){this.lastHorizontalScrollElement=null},GridBodyScrollFeature.prototype.doHorizontalScroll=function(scrollLeft){var fakeScrollLeft=getScrollLeft(this.ctrlsService.getFakeHScrollCtrl().getViewport(),this.enableRtl);this.scrollLeft===scrollLeft&&scrollLeft===fakeScrollLeft||(this.scrollLeft=scrollLeft,this.fireScrollEvent("horizontal"),this.horizontallyScrollHeaderCenterAndFloatingCenter(scrollLeft),this.onHorizontalViewportChanged())},GridBodyScrollFeature.prototype.fireScrollEvent=function(direction){var _this=this,bodyScrollEvent={type:Events.EVENT_BODY_SCROLL,api:this.gridApi,columnApi:this.columnApi,direction,left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(bodyScrollEvent),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout((function(){var bodyScrollEndEvent=Object.assign({},bodyScrollEvent,{type:Events.EVENT_BODY_SCROLL_END});_this.eventService.dispatchEvent(bodyScrollEndEvent)}),100)},GridBodyScrollFeature.prototype.shouldBlockScrollUpdate=function(direction,scrollTo,touchOnly){if(void 0===touchOnly&&(touchOnly=!1),touchOnly&&!isIOSUserAgent())return!1;if("vertical"===direction){var clientHeight=getInnerHeight(this.eBodyViewport),scrollHeight=this.eBodyViewport.scrollHeight;if(scrollTo<0||scrollTo+clientHeight>scrollHeight)return!0}if("horizontal"===direction){var clientWidth=this.centerRowContainerCtrl.getCenterWidth(),scrollWidth=this.centerRowContainerCtrl.getViewportElement().scrollWidth;if(this.enableRtl&&isRtlNegativeScroll()){if(scrollTo>0)return!0}else if(scrollTo<0)return!0;if(Math.abs(scrollTo)+clientWidth>scrollWidth)return!0}return!1},GridBodyScrollFeature.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent("vertical")},GridBodyScrollFeature.prototype.onHorizontalViewportChanged=function(){this.centerRowContainerCtrl.onHorizontalViewportChanged()},GridBodyScrollFeature.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onBodyHorizontalScroll(this.centerRowContainerCtrl.getViewportElement())},GridBodyScrollFeature.prototype.executeAnimationFrameScroll=function(){var frameNeeded=this.scrollTop!=this.nextScrollTop;return frameNeeded&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),frameNeeded},GridBodyScrollFeature.prototype.setHorizontalScrollPosition=function(hScrollPosition){var maxScrollLeft=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();this.shouldBlockScrollUpdate("horizontal",hScrollPosition)&&(hScrollPosition=this.enableRtl&&isRtlNegativeScroll()?hScrollPosition>0?0:maxScrollLeft:Math.min(Math.max(hScrollPosition,0),maxScrollLeft)),setScrollLeft(this.centerRowContainerCtrl.getViewportElement(),Math.abs(hScrollPosition),this.enableRtl),this.doHorizontalScroll(hScrollPosition)},GridBodyScrollFeature.prototype.setVerticalScrollPosition=function(vScrollPosition){this.eBodyViewport.scrollTop=vScrollPosition},GridBodyScrollFeature.prototype.getVScrollPosition=function(){return{top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight}},GridBodyScrollFeature.prototype.getHScrollPosition=function(){return this.centerRowContainerCtrl.getHScrollPosition()},GridBodyScrollFeature.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()},GridBodyScrollFeature.prototype.scrollHorizontally=function(pixels){var oldScrollPosition=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(oldScrollPosition+pixels),this.centerRowContainerCtrl.getViewportElement().scrollLeft-oldScrollPosition},GridBodyScrollFeature.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},GridBodyScrollFeature.prototype.ensureNodeVisible=function(comparator,position){void 0===position&&(position=null);for(var rowCount=this.rowModel.getRowCount(),comparatorIsAFunction="function"==typeof comparator,indexToSelect=-1,i=0;i<rowCount;i++){var node=this.rowModel.getRow(i);if(comparatorIsAFunction){if(comparator(node)){indexToSelect=i;break}}else if(comparator===node||comparator===node.data){indexToSelect=i;break}}indexToSelect>=0&&this.ensureIndexVisible(indexToSelect,position)},GridBodyScrollFeature.prototype.ensureIndexVisible=function(index,position){if(this.gridOptionsWrapper.getDomLayout()!==Constants.DOM_LAYOUT_PRINT){var rowCount=this.paginationProxy.getRowCount();if("number"!=typeof index||index<0||index>=rowCount)console.warn("invalid row index for ensureIndexVisible: "+index);else{this.gridOptionsWrapper.isPagination()&&!this.gridOptionsWrapper.isSuppressPaginationPanel()||this.paginationProxy.goToPageWithIndex(index);var rowGotShiftedDuringOperation,rowNode=this.paginationProxy.getRow(index);do{var startingRowTop=rowNode.rowTop,startingRowHeight=rowNode.rowHeight,paginationOffset=this.paginationProxy.getPixelOffset(),rowTopPixel=rowNode.rowTop-paginationOffset,rowBottomPixel=rowTopPixel+rowNode.rowHeight,scrollPosition=this.getVScrollPosition(),heightOffset=this.heightScaler.getDivStretchOffset(),vScrollTop=scrollPosition.top+heightOffset,vScrollBottom=scrollPosition.bottom+heightOffset,viewportHeight=vScrollBottom-vScrollTop,pxTop=this.heightScaler.getScrollPositionForPixel(rowTopPixel),pxBottom=this.heightScaler.getScrollPositionForPixel(rowBottomPixel-viewportHeight),pxMiddle=Math.min((pxTop+pxBottom)/2,rowTopPixel),newScrollPosition=null;"top"===position?newScrollPosition=pxTop:"bottom"===position?newScrollPosition=pxBottom:"middle"===position?newScrollPosition=pxMiddle:vScrollTop>rowTopPixel?newScrollPosition=pxTop:vScrollBottom<rowBottomPixel&&(newScrollPosition=pxBottom),null!==newScrollPosition&&(this.eBodyViewport.scrollTop=newScrollPosition,this.rowRenderer.redrawAfterScroll()),rowGotShiftedDuringOperation=startingRowTop!==rowNode.rowTop||startingRowHeight!==rowNode.rowHeight}while(rowGotShiftedDuringOperation);this.animationFrameService.flushAllFrames()}}},GridBodyScrollFeature.prototype.ensureColumnVisible=function(key,position){void 0===position&&(position="auto");var column=this.columnModel.getGridColumn(key);if(column&&!column.isPinned()&&this.columnModel.isColumnDisplayed(column)){var newHorizontalScroll=this.getPositionedHorizontalScroll(column,position);null!==newHorizontalScroll&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(newHorizontalScroll),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}},GridBodyScrollFeature.prototype.getPositionedHorizontalScroll=function(column,position){var _a=this.isColumnOutsideViewport(column),columnBeforeStart=_a.columnBeforeStart,columnAfterEnd=_a.columnAfterEnd,viewportTooSmallForColumn=this.centerRowContainerCtrl.getCenterWidth()<column.getActualWidth(),viewportWidth=this.centerRowContainerCtrl.getCenterWidth(),isRtl=this.enableRtl,alignColToStart=(isRtl?columnBeforeStart:columnAfterEnd)||viewportTooSmallForColumn,alignColToEnd=isRtl?columnAfterEnd:columnBeforeStart;"auto"!==position&&(alignColToStart="start"===position,alignColToEnd="end"===position);var isMiddle="middle"===position;if(alignColToStart||alignColToEnd||isMiddle){var _b=this.getColumnBounds(column),colLeft=_b.colLeft,colMiddle=_b.colMiddle,colRight=_b.colRight;return isMiddle?colMiddle-viewportWidth/2:alignColToStart?isRtl?colRight:colLeft:isRtl?colLeft-viewportWidth:colRight-viewportWidth}return null},GridBodyScrollFeature.prototype.isColumnOutsideViewport=function(column){var _a=this.getViewportBounds(),viewportStart=_a.start,viewportEnd=_a.end,_b=this.getColumnBounds(column),colLeft=_b.colLeft,colRight=_b.colRight,isRtl=this.enableRtl;return{columnBeforeStart:isRtl?viewportStart>colRight:viewportEnd<colRight,columnAfterEnd:isRtl?viewportEnd<colLeft:viewportStart>colLeft}},GridBodyScrollFeature.prototype.getColumnBounds=function(column){var isRtl=this.enableRtl,bodyWidth=this.columnModel.getBodyContainerWidth(),colWidth=column.getActualWidth(),colLeft=column.getLeft(),multiplier=isRtl?-1:1,colLeftPixel=isRtl?bodyWidth-colLeft:colLeft;return{colLeft:colLeftPixel,colMiddle:colLeftPixel+colWidth/2*multiplier,colRight:colLeftPixel+colWidth*multiplier}},GridBodyScrollFeature.prototype.getViewportBounds=function(){var viewportWidth=this.centerRowContainerCtrl.getCenterWidth(),scrollPosition=this.centerRowContainerCtrl.getCenterViewportScrollLeft();return{start:scrollPosition,end:viewportWidth+scrollPosition,width:viewportWidth}},__decorate$K([Autowired("ctrlsService")],GridBodyScrollFeature.prototype,"ctrlsService",void 0),__decorate$K([Autowired("animationFrameService")],GridBodyScrollFeature.prototype,"animationFrameService",void 0),__decorate$K([Autowired("columnApi")],GridBodyScrollFeature.prototype,"columnApi",void 0),__decorate$K([Autowired("gridApi")],GridBodyScrollFeature.prototype,"gridApi",void 0),__decorate$K([Autowired("paginationProxy")],GridBodyScrollFeature.prototype,"paginationProxy",void 0),__decorate$K([Autowired("rowModel")],GridBodyScrollFeature.prototype,"rowModel",void 0),__decorate$K([Autowired("rowContainerHeightService")],GridBodyScrollFeature.prototype,"heightScaler",void 0),__decorate$K([Autowired("rowRenderer")],GridBodyScrollFeature.prototype,"rowRenderer",void 0),__decorate$K([Autowired("columnModel")],GridBodyScrollFeature.prototype,"columnModel",void 0),__decorate$K([PostConstruct],GridBodyScrollFeature.prototype,"postConstruct",null),GridBodyScrollFeature}(BeanStub),AutoScrollService=function(){function AutoScrollService(params){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=params.scrollContainer,this.scrollHorizontally=-1!==params.scrollAxis.indexOf("x"),this.scrollVertically=-1!==params.scrollAxis.indexOf("y"),this.scrollByTick=null!=params.scrollByTick?params.scrollByTick:20,params.onScrollCallback&&(this.onScrollCallback=params.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=params.getVerticalPosition,this.setVerticalPosition=params.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=params.getHorizontalPosition,this.setHorizontalPosition=params.setHorizontalPosition),this.shouldSkipVerticalScroll=params.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=params.shouldSkipHorizontalScroll||function(){return!1}}return AutoScrollService.prototype.check=function(mouseEvent,forceSkipVerticalScroll){void 0===forceSkipVerticalScroll&&(forceSkipVerticalScroll=!1);var skipVerticalScroll=forceSkipVerticalScroll||this.shouldSkipVerticalScroll();if(!skipVerticalScroll||!this.shouldSkipHorizontalScroll()){var rect=this.scrollContainer.getBoundingClientRect(),scrollTick=this.scrollByTick;this.tickLeft=mouseEvent.clientX<rect.left+scrollTick,this.tickRight=mouseEvent.clientX>rect.right-scrollTick,this.tickUp=mouseEvent.clientY<rect.top+scrollTick&&!skipVerticalScroll,this.tickDown=mouseEvent.clientY>rect.bottom-scrollTick&&!skipVerticalScroll,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},AutoScrollService.prototype.ensureTickingStarted=function(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},AutoScrollService.prototype.doTick=function(){var tickAmount;if(this.tickCount++,tickAmount=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var vScrollPosition=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(vScrollPosition-tickAmount),this.tickDown&&this.setVerticalPosition(vScrollPosition+tickAmount)}if(this.scrollHorizontally){var hScrollPosition=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(hScrollPosition-tickAmount),this.tickRight&&this.setHorizontalPosition(hScrollPosition+tickAmount)}this.onScrollCallback&&this.onScrollCallback()},AutoScrollService.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},AutoScrollService}(),__extends$S=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$a=function(){return __assign$a=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$a.apply(this,arguments)},__decorate$L=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$7=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$5=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$7(arguments[i]));return ar},RowDragFeature=function(_super){function RowDragFeature(eContainer){var _this=_super.call(this)||this;return _this.isMultiRowDrag=!1,_this.isGridSorted=!1,_this.isGridFiltered=!1,_this.isRowGroupActive=!1,_this.eContainer=eContainer,_this}return __extends$S(RowDragFeature,_super),RowDragFeature.prototype.postConstruct=function(){var _this=this;this.gridOptionsWrapper.isRowModelDefault()&&(this.clientSideRowModel=this.rowModel);var refreshStatus=function(){_this.onSortChanged(),_this.onFilterChanged(),_this.onRowGroupChanged()};this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,(function(){refreshStatus()})),refreshStatus(),this.ctrlsService.whenReady((function(){var gridBodyCon=_this.ctrlsService.getGridBodyCtrl();_this.autoScrollService=new AutoScrollService({scrollContainer:gridBodyCon.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return gridBodyCon.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(position){return gridBodyCon.getScrollFeature().setVerticalScrollPosition(position)},onScrollCallback:function(){_this.onDragging(_this.lastDraggingEvent)}})}))},RowDragFeature.prototype.onSortChanged=function(){this.isGridSorted=this.sortController.isSortActive()},RowDragFeature.prototype.onFilterChanged=function(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()},RowDragFeature.prototype.onRowGroupChanged=function(){var rowGroups=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!missingOrEmpty(rowGroups)},RowDragFeature.prototype.getContainer=function(){return this.eContainer},RowDragFeature.prototype.isInterestedIn=function(type){return type===exports.DragSourceType.RowDrag},RowDragFeature.prototype.getIconName=function(){return this.gridOptionsWrapper.isRowDragManaged()&&this.shouldPreventRowMove()?DragAndDropService.ICON_NOT_ALLOWED:DragAndDropService.ICON_MOVE},RowDragFeature.prototype.shouldPreventRowMove=function(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive},RowDragFeature.prototype.getRowNodes=function(draggingEvent){var _this=this;if(!this.isFromThisGrid(draggingEvent))return draggingEvent.dragItem.rowNodes||[];var isRowDragMultiRow=this.gridOptionsWrapper.isRowDragMultiRow(),selectedNodes=__spread$5(this.selectionService.getSelectedNodes()).sort((function(a,b){return _this.getRowIndexNumber(a)-_this.getRowIndexNumber(b)})),currentNode=draggingEvent.dragItem.rowNode;return isRowDragMultiRow&&-1!==selectedNodes.indexOf(currentNode)?(this.isMultiRowDrag=!0,selectedNodes):(this.isMultiRowDrag=!1,[currentNode])},RowDragFeature.prototype.onDragEnter=function(draggingEvent){draggingEvent.dragItem.rowNodes=this.getRowNodes(draggingEvent),this.dispatchGridEvent(Events.EVENT_ROW_DRAG_ENTER,draggingEvent),this.getRowNodes(draggingEvent).forEach((function(rowNode){rowNode.setDragging(!0)})),this.onEnterOrDragging(draggingEvent)},RowDragFeature.prototype.onDragging=function(draggingEvent){this.onEnterOrDragging(draggingEvent)},RowDragFeature.prototype.isFromThisGrid=function(draggingEvent){return draggingEvent.dragSource.dragSourceDomDataKey===this.gridOptionsWrapper.getDomDataKey()},RowDragFeature.prototype.isDropZoneWithinThisGrid=function(draggingEvent){var gridGui=this.ctrlsService.getGridBodyCtrl().getGui(),dropZoneTarget=draggingEvent.dropZoneTarget;return!gridGui.contains(dropZoneTarget)},RowDragFeature.prototype.onEnterOrDragging=function(draggingEvent){this.dispatchGridEvent(Events.EVENT_ROW_DRAG_MOVE,draggingEvent),this.lastDraggingEvent=draggingEvent;var pixel=this.mouseEventService.getNormalisedPosition(draggingEvent).y;this.gridOptionsWrapper.isRowDragManaged()&&this.doManagedDrag(draggingEvent,pixel),this.autoScrollService.check(draggingEvent.event)},RowDragFeature.prototype.doManagedDrag=function(draggingEvent,pixel){var isFromThisGrid=this.isFromThisGrid(draggingEvent),managedDrag=this.gridOptionsWrapper.isRowDragManaged(),rowNodes=draggingEvent.dragItem.rowNodes;managedDrag&&this.shouldPreventRowMove()||(this.gridOptionsWrapper.isSuppressMoveWhenRowDragging()||!isFromThisGrid?this.isDropZoneWithinThisGrid(draggingEvent)||this.clientSideRowModel.highlightRowAtPixel(rowNodes[0],pixel):this.moveRows(rowNodes,pixel))},RowDragFeature.prototype.getRowIndexNumber=function(rowNode){return parseInt(last(rowNode.getRowIndexString().split("-")),10)},RowDragFeature.prototype.moveRowAndClearHighlight=function(draggingEvent){var _this=this,lastHighlightedRowNode=this.clientSideRowModel.getLastHighlightedRowNode(),isBelow=lastHighlightedRowNode&&lastHighlightedRowNode.highlighted===exports.RowHighlightPosition.Below,pixel=this.mouseEventService.getNormalisedPosition(draggingEvent).y,rowNodes=draggingEvent.dragItem.rowNodes,increment=isBelow?1:0;if(this.isFromThisGrid(draggingEvent))rowNodes.forEach((function(rowNode){rowNode.rowTop<pixel&&(increment-=1)})),this.moveRows(rowNodes,pixel,increment);else{var getRowIdFunc_1=this.gridOptionsWrapper.getRowIdFunc(),addIndex=this.clientSideRowModel.getRowIndexAtPixel(pixel)+1;this.clientSideRowModel.getHighlightPosition(pixel)===exports.RowHighlightPosition.Above&&addIndex--,this.clientSideRowModel.updateRowData({add:rowNodes.map((function(node){return node.data})).filter((function(data){return!_this.clientSideRowModel.getRowNode(getRowIdFunc_1?getRowIdFunc_1({data,level:0}):data.id)})),addIndex})}this.clearRowHighlight()},RowDragFeature.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},RowDragFeature.prototype.moveRows=function(rowNodes,pixel,increment){void 0===increment&&(increment=0),this.clientSideRowModel.ensureRowsAtPixel(rowNodes,pixel,increment)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},RowDragFeature.prototype.addRowDropZone=function(params){var _this=this;if(params.getContainer())if(this.dragAndDropService.findExternalZone(params))console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");else{var processedParams={getContainer:params.getContainer};params.fromGrid?(params.fromGrid=void 0,processedParams=params):(params.onDragEnter&&(processedParams.onDragEnter=function(e){params.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER,e))}),params.onDragLeave&&(processedParams.onDragLeave=function(e){params.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE,e))}),params.onDragging&&(processedParams.onDragging=function(e){params.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE,e))}),params.onDragStop&&(processedParams.onDragStop=function(e){params.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END,e))})),this.dragAndDropService.addDropTarget(__assign$a({isInterestedIn:function(type){return type===exports.DragSourceType.RowDrag},getIconName:function(){return DragAndDropService.ICON_MOVE},external:!0},processedParams))}else doOnce((function(){return console.warn("AG Grid: addRowDropZone - A container target needs to be provided")}),"add-drop-zone-empty-target")},RowDragFeature.prototype.getRowDropZone=function(events){var _this=this,getContainer=this.getContainer.bind(this),onDragEnter=this.onDragEnter.bind(this),onDragLeave=this.onDragLeave.bind(this),onDragging=this.onDragging.bind(this),onDragStop=this.onDragStop.bind(this);return events?{getContainer,onDragEnter:events.onDragEnter?function(e){onDragEnter(e),events.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER,e))}:onDragEnter,onDragLeave:events.onDragLeave?function(e){onDragLeave(e),events.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE,e))}:onDragLeave,onDragging:events.onDragging?function(e){onDragging(e),events.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE,e))}:onDragging,onDragStop:events.onDragStop?function(e){onDragStop(e),events.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END,e))}:onDragStop,fromGrid:!0}:{getContainer,onDragEnter,onDragLeave,onDragging,onDragStop,fromGrid:!0}},RowDragFeature.prototype.draggingToRowDragEvent=function(type,draggingEvent){var overNode,vDirectionString,yNormalised=this.mouseEventService.getNormalisedPosition(draggingEvent).y,overIndex=-1;switch(yNormalised>this.paginationProxy.getCurrentPageHeight()||(overIndex=this.rowModel.getRowIndexAtPixel(yNormalised),overNode=this.rowModel.getRow(overIndex)),draggingEvent.vDirection){case exports.VerticalDirection.Down:vDirectionString="down";break;case exports.VerticalDirection.Up:vDirectionString="up";break;default:vDirectionString=null}return{type,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),event:draggingEvent.event,node:draggingEvent.dragItem.rowNode,nodes:draggingEvent.dragItem.rowNodes,overIndex,overNode,y:yNormalised,vDirection:vDirectionString}},RowDragFeature.prototype.dispatchGridEvent=function(type,draggingEvent){var event=this.draggingToRowDragEvent(type,draggingEvent);this.eventService.dispatchEvent(event)},RowDragFeature.prototype.onDragLeave=function(draggingEvent){this.dispatchGridEvent(Events.EVENT_ROW_DRAG_LEAVE,draggingEvent),this.stopDragging(draggingEvent),this.gridOptionsWrapper.isRowDragManaged()&&this.clearRowHighlight(),this.isFromThisGrid(draggingEvent)&&(this.isMultiRowDrag=!1)},RowDragFeature.prototype.onDragStop=function(draggingEvent){this.dispatchGridEvent(Events.EVENT_ROW_DRAG_END,draggingEvent),this.stopDragging(draggingEvent),!this.gridOptionsWrapper.isRowDragManaged()||!this.gridOptionsWrapper.isSuppressMoveWhenRowDragging()&&this.isFromThisGrid(draggingEvent)||this.isDropZoneWithinThisGrid(draggingEvent)||this.moveRowAndClearHighlight(draggingEvent)},RowDragFeature.prototype.stopDragging=function(draggingEvent){this.autoScrollService.ensureCleared(),this.getRowNodes(draggingEvent).forEach((function(rowNode){rowNode.setDragging(!1)}))},__decorate$L([Autowired("dragAndDropService")],RowDragFeature.prototype,"dragAndDropService",void 0),__decorate$L([Autowired("rowModel")],RowDragFeature.prototype,"rowModel",void 0),__decorate$L([Autowired("paginationProxy")],RowDragFeature.prototype,"paginationProxy",void 0),__decorate$L([Autowired("columnModel")],RowDragFeature.prototype,"columnModel",void 0),__decorate$L([Autowired("focusService")],RowDragFeature.prototype,"focusService",void 0),__decorate$L([Autowired("sortController")],RowDragFeature.prototype,"sortController",void 0),__decorate$L([Autowired("filterManager")],RowDragFeature.prototype,"filterManager",void 0),__decorate$L([Autowired("selectionService")],RowDragFeature.prototype,"selectionService",void 0),__decorate$L([Autowired("mouseEventService")],RowDragFeature.prototype,"mouseEventService",void 0),__decorate$L([Autowired("ctrlsService")],RowDragFeature.prototype,"ctrlsService",void 0),__decorate$L([Optional("rangeService")],RowDragFeature.prototype,"rangeService",void 0),__decorate$L([Autowired("columnApi")],RowDragFeature.prototype,"columnApi",void 0),__decorate$L([Autowired("gridApi")],RowDragFeature.prototype,"gridApi",void 0),__decorate$L([PostConstruct],RowDragFeature.prototype,"postConstruct",null),RowDragFeature}(BeanStub),__extends$T=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$M=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};(RowAnimationCssClasses=exports.RowAnimationCssClasses||(exports.RowAnimationCssClasses={})).ANIMATION_ON="ag-row-animation",RowAnimationCssClasses.ANIMATION_OFF="ag-row-no-animation";var SelectionHandleType,CellRangeType,GridBodyCtrl=function(_super){function GridBodyCtrl(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$T(GridBodyCtrl,_super),GridBodyCtrl.prototype.getScrollFeature=function(){return this.bodyScrollFeature},GridBodyCtrl.prototype.getBodyViewportElement=function(){return this.eBodyViewport},GridBodyCtrl.prototype.setComp=function(comp,eGridBody,eBodyViewport,eTop,eBottom){this.comp=comp,this.eGridBody=eGridBody,this.eBodyViewport=eBodyViewport,this.eTop=eTop,this.eBottom=eBottom,this.setCellTextSelection(this.gridOptionsWrapper.isEnableCellTextSelect()),this.createManagedBean(new LayoutFeature(this.comp)),this.bodyScrollFeature=this.createManagedBean(new GridBodyScrollFeature(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([eTop,eBodyViewport,eBottom]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.ctrlsService.registerGridBodyCtrl(this)},GridBodyCtrl.prototype.getComp=function(){return this.comp},GridBodyCtrl.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_PINNED_ROW_DATA_CHANGED,this.setFloatingHeights.bind(this))},GridBodyCtrl.prototype.addFocusListeners=function(elements){var _this=this;elements.forEach((function(element){_this.addManagedListener(element,"focusin",(function(){element.classList.add("ag-has-focus")})),_this.addManagedListener(element,"focusout",(function(e){element.contains(e.relatedTarget)||element.classList.remove("ag-has-focus")}))}))},GridBodyCtrl.prototype.setColumnMovingCss=function(moving){this.comp.setColumnMovingCss(moving?"ag-column-moving":null,moving)},GridBodyCtrl.prototype.setCellTextSelection=function(selectable){void 0===selectable&&(selectable=!1);var cssClass=selectable?"ag-selectable":null;this.comp.setCellSelectableCss(cssClass,selectable)},GridBodyCtrl.prototype.onScrollVisibilityChanged=function(){var visible=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(visible)},GridBodyCtrl.prototype.onGridColumnsChanged=function(){var columns=this.columnModel.getAllGridColumns();this.comp.setColumnCount(columns?columns.length:0)},GridBodyCtrl.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",(function(event){if(event.target instanceof HTMLImageElement)return event.preventDefault(),!1}))},GridBodyCtrl.prototype.addStopEditingWhenGridLosesFocus=function(){var _this=this;if(this.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus()){var focusOutListener=function(event){var elementWithFocus=event.relatedTarget;if(null!==getTabIndex(elementWithFocus)){var clickInsideGrid=viewports.some((function(viewport){return viewport.contains(elementWithFocus)}))&&_this.mouseEventService.isElementInThisGrid(elementWithFocus);if(!clickInsideGrid){var popupService=_this.popupService;clickInsideGrid=popupService.getActivePopups().some((function(popup){return popup.contains(elementWithFocus)}))||popupService.isElementWithinCustomPopup(elementWithFocus)}clickInsideGrid||_this.rowRenderer.stopEditing()}else _this.rowRenderer.stopEditing()},viewports=[this.eBodyViewport,this.eBottom,this.eTop];viewports.forEach((function(viewport){return _this.addManagedListener(viewport,"focusout",focusOutListener)}))}},GridBodyCtrl.prototype.updateRowCount=function(){var headerCount=this.headerNavigationService.getHeaderRowCount(),modelType=this.paginationProxy.getType(),rowCount=-1;modelType===Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(rowCount=0,this.paginationProxy.forEachNode((function(node){node.group||rowCount++})));var total=-1===rowCount?-1:headerCount+rowCount;this.comp.setRowCount(total)},GridBodyCtrl.prototype.registerBodyViewportResizeListener=function(listener){this.comp.registerBodyViewportResizeListener(listener)},GridBodyCtrl.prototype.setVerticalScrollPaddingVisible=function(visible){var overflowY=visible?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(overflowY)},GridBodyCtrl.prototype.isVerticalScrollShowing=function(){var show=this.gridOptionsWrapper.isAlwaysShowVerticalScroll(),cssClass=show?"ag-force-vertical-scroll":null;return this.comp.setAlwaysVerticalScrollClass(cssClass,show),show||isVerticalScrollShowing(this.eBodyViewport)},GridBodyCtrl.prototype.setupRowAnimationCssClass=function(){var _this=this,listener=function(){var animateRows=_this.gridOptionsWrapper.isAnimateRows()&&!_this.rowContainerHeightService.isStretching(),animateRowsCssClass=animateRows?exports.RowAnimationCssClasses.ANIMATION_ON:exports.RowAnimationCssClasses.ANIMATION_OFF;_this.comp.setRowAnimationCssOnBodyViewport(animateRowsCssClass,animateRows)};listener(),this.addManagedListener(this.eventService,Events.EVENT_HEIGHT_SCALE_CHANGED,listener)},GridBodyCtrl.prototype.getGridBodyElement=function(){return this.eGridBody},GridBodyCtrl.prototype.addBodyViewportListener=function(){var _this=this;this.addManagedListener(this.eBodyViewport,"contextmenu",(function(mouseEvent){_this.gridOptionsWrapper.isPreventDefaultOnContextMenu()&&mouseEvent.preventDefault();var target=mouseEvent.target;target!==_this.eBodyViewport&&target!==_this.ctrlsService.getCenterRowContainerCtrl().getViewportElement()||_this.contextMenuFactory&&_this.contextMenuFactory.onContextMenu(mouseEvent,null,null,null,null,_this.eGridBody)})),this.addManagedListener(this.eBodyViewport,"wheel",this.onWheel.bind(this))},GridBodyCtrl.prototype.onWheel=function(e){this.gridOptionsWrapper.isSuppressScrollWhenPopupsAreOpen()&&this.popupService.hasAnchoredPopup()&&e.preventDefault()},GridBodyCtrl.prototype.getGui=function(){return this.eGridBody},GridBodyCtrl.prototype.scrollVertically=function(pixels){var oldScrollPosition=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(oldScrollPosition+pixels),this.eBodyViewport.scrollTop-oldScrollPosition},GridBodyCtrl.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new RowDragFeature(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},GridBodyCtrl.prototype.getRowDragFeature=function(){return this.rowDragFeature},GridBodyCtrl.prototype.setFloatingHeights=function(){var pinnedRowModel=this.pinnedRowModel,floatingTopHeight=pinnedRowModel.getPinnedTopTotalHeight();floatingTopHeight&&(floatingTopHeight+=1);var floatingBottomHeight=pinnedRowModel.getPinnedBottomTotalHeight();floatingBottomHeight&&(floatingBottomHeight+=1),this.comp.setTopHeight(floatingTopHeight),this.comp.setBottomHeight(floatingBottomHeight),this.comp.setTopDisplay(floatingTopHeight?"inherit":"none"),this.comp.setBottomDisplay(floatingBottomHeight?"inherit":"none")},GridBodyCtrl.prototype.sizeColumnsToFit=function(nextTimeout){var _this=this,scrollWidthToRemove=this.isVerticalScrollShowing()?this.gridOptionsWrapper.getScrollbarWidth():0,availableWidth=getInnerWidth(this.eBodyViewport)-scrollWidthToRemove;availableWidth>0?this.columnModel.sizeColumnsToFit(availableWidth,"sizeColumnsToFit"):void 0===nextTimeout?window.setTimeout((function(){_this.sizeColumnsToFit(100)}),0):100===nextTimeout?window.setTimeout((function(){_this.sizeColumnsToFit(500)}),100):500===nextTimeout?window.setTimeout((function(){_this.sizeColumnsToFit(-1)}),500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},GridBodyCtrl.prototype.addScrollEventListener=function(listener){this.eBodyViewport.addEventListener("scroll",listener)},GridBodyCtrl.prototype.removeScrollEventListener=function(listener){this.eBodyViewport.removeEventListener("scroll",listener)},__decorate$M([Autowired("rowContainerHeightService")],GridBodyCtrl.prototype,"rowContainerHeightService",void 0),__decorate$M([Autowired("ctrlsService")],GridBodyCtrl.prototype,"ctrlsService",void 0),__decorate$M([Autowired("columnModel")],GridBodyCtrl.prototype,"columnModel",void 0),__decorate$M([Autowired("scrollVisibleService")],GridBodyCtrl.prototype,"scrollVisibleService",void 0),__decorate$M([Optional("contextMenuFactory")],GridBodyCtrl.prototype,"contextMenuFactory",void 0),__decorate$M([Autowired("headerNavigationService")],GridBodyCtrl.prototype,"headerNavigationService",void 0),__decorate$M([Autowired("paginationProxy")],GridBodyCtrl.prototype,"paginationProxy",void 0),__decorate$M([Autowired("dragAndDropService")],GridBodyCtrl.prototype,"dragAndDropService",void 0),__decorate$M([Autowired("pinnedRowModel")],GridBodyCtrl.prototype,"pinnedRowModel",void 0),__decorate$M([Autowired("rowRenderer")],GridBodyCtrl.prototype,"rowRenderer",void 0),__decorate$M([Autowired("popupService")],GridBodyCtrl.prototype,"popupService",void 0),__decorate$M([Autowired("mouseEventService")],GridBodyCtrl.prototype,"mouseEventService",void 0),GridBodyCtrl}(BeanStub);(SelectionHandleType=exports.SelectionHandleType||(exports.SelectionHandleType={}))[SelectionHandleType.FILL=0]="FILL",SelectionHandleType[SelectionHandleType.RANGE=1]="RANGE",(CellRangeType=exports.CellRangeType||(exports.CellRangeType={}))[CellRangeType.VALUE=0]="VALUE",CellRangeType[CellRangeType.DIMENSION=1]="DIMENSION";var RowType,CellRangeFeature=function(){function CellRangeFeature(beans,ctrl){this.beans=beans,this.cellCtrl=ctrl}return CellRangeFeature.prototype.setComp=function(cellComp,eGui){this.cellComp=cellComp,this.eGui=eGui,this.onRangeSelectionChanged()},CellRangeFeature.prototype.onRangeSelectionChanged=function(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected",0!==this.rangeCount),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected-1",1===this.rangeCount),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected-2",2===this.rangeCount),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected-3",3===this.rangeCount),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected-4",this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),setAriaSelected(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())},CellRangeFeature.prototype.updateRangeBorders=function(){var rangeBorders=this.getRangeBorders(),isSingleCell=this.isSingleCell(),isTop=!isSingleCell&&rangeBorders.top,isRight=!isSingleCell&&rangeBorders.right,isBottom=!isSingleCell&&rangeBorders.bottom,isLeft=!isSingleCell&&rangeBorders.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",isTop),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",isRight),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",isBottom),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",isLeft)},CellRangeFeature.prototype.isSingleCell=function(){var rangeService=this.beans.rangeService;return 1===this.rangeCount&&rangeService&&!rangeService.isMoreThanOneCell()},CellRangeFeature.prototype.getHasChartRange=function(){var rangeService=this.beans.rangeService;if(!this.rangeCount||!rangeService)return!1;var cellRanges=rangeService.getCellRanges();return cellRanges.length>0&&cellRanges.every((function(range){return includes([exports.CellRangeType.DIMENSION,exports.CellRangeType.VALUE],range.type)}))},CellRangeFeature.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},CellRangeFeature.prototype.getRangeBorders=function(){var leftCol,rightCol,_this=this,isRtl=this.beans.gridOptionsWrapper.isEnableRtl(),top=!1,right=!1,bottom=!1,left=!1,thisCol=this.cellCtrl.getCellPosition().column,_a=this.beans,rangeService=_a.rangeService,columnModel=_a.columnModel;isRtl?(leftCol=columnModel.getDisplayedColAfter(thisCol),rightCol=columnModel.getDisplayedColBefore(thisCol)):(leftCol=columnModel.getDisplayedColBefore(thisCol),rightCol=columnModel.getDisplayedColAfter(thisCol));var ranges=rangeService.getCellRanges().filter((function(range){return rangeService.isCellInSpecificRange(_this.cellCtrl.getCellPosition(),range)}));leftCol||(left=!0),rightCol||(right=!0);for(var i=0;i<ranges.length&&!(top&&right&&bottom&&left);i++){var range=ranges[i],startRow=rangeService.getRangeStartRow(range),endRow=rangeService.getRangeEndRow(range);!top&&this.beans.rowPositionUtils.sameRow(startRow,this.cellCtrl.getCellPosition())&&(top=!0),!bottom&&this.beans.rowPositionUtils.sameRow(endRow,this.cellCtrl.getCellPosition())&&(bottom=!0),!left&&leftCol&&range.columns.indexOf(leftCol)<0&&(left=!0),!right&&rightCol&&range.columns.indexOf(rightCol)<0&&(right=!0)}return{top,right,bottom,left}},CellRangeFeature.prototype.refreshHandle=function(){if(this.beans.rangeService){var shouldHaveSelectionHandle=this.shouldHaveSelectionHandle();this.selectionHandle&&!shouldHaveSelectionHandle&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),shouldHaveSelectionHandle&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}},CellRangeFeature.prototype.shouldHaveSelectionHandle=function(){var _a=this.beans,gridOptionsWrapper=_a.gridOptionsWrapper,rangeService=_a.rangeService,cellRanges=rangeService.getCellRanges(),rangesLen=cellRanges.length;if(this.rangeCount<1||rangesLen<1)return!1;var cellRange=last(cellRanges),cellPosition=this.cellCtrl.getCellPosition(),isFillHandleAvailable=gridOptionsWrapper.isEnableFillHandle()&&!this.cellCtrl.isSuppressFillHandle(),isRangeHandleAvailable=gridOptionsWrapper.isEnableRangeHandle(),handleIsAvailable=1===rangesLen&&!this.cellCtrl.isEditing()&&(isFillHandleAvailable||isRangeHandleAvailable);if(this.hasChartRange){var isCategoryCell=cellRanges[0].type===exports.CellRangeType.DIMENSION&&rangeService.isCellInSpecificRange(cellPosition,cellRanges[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",isCategoryCell),handleIsAvailable=cellRange.type===exports.CellRangeType.VALUE}return handleIsAvailable&&null!=cellRange.endRow&&rangeService.isContiguousRange(cellRange)&&rangeService.isBottomRightCell(cellRange,cellPosition)},CellRangeFeature.prototype.addSelectionHandle=function(){var _a=this.beans,gridOptionsWrapper=_a.gridOptionsWrapper,cellRangeType=last(_a.rangeService.getCellRanges()).type,type=gridOptionsWrapper.isEnableFillHandle()&&missing(cellRangeType)?exports.SelectionHandleType.FILL:exports.SelectionHandleType.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==type&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(type)),this.selectionHandle.refresh(this.cellCtrl)},CellRangeFeature.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},CellRangeFeature}(),__extends$U=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellPositionFeature=function(_super){function CellPositionFeature(ctrl,beans){var _this=_super.call(this)||this;return _this.cellCtrl=ctrl,_this.beans=beans,_this.column=ctrl.getColumn(),_this.rowNode=ctrl.getRowNode(),_this.setupColSpan(),_this.setupRowSpan(),_this}return __extends$U(CellPositionFeature,_super),CellPositionFeature.prototype.setupRowSpan=function(){this.rowSpan=this.column.getRowSpan(this.rowNode)},CellPositionFeature.prototype.setComp=function(eGui){this.eGui=eGui,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},CellPositionFeature.prototype.onDisplayColumnsChanged=function(){var colsSpanning=this.getColSpanningList();areEqual(this.colsSpanning,colsSpanning)||(this.colsSpanning=colsSpanning,this.onWidthChanged(),this.onLeftChanged())},CellPositionFeature.prototype.setupColSpan=function(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},CellPositionFeature.prototype.onWidthChanged=function(){if(this.eGui){var width=this.getCellWidth();this.eGui.style.width=width+"px"}},CellPositionFeature.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce((function(width,col){return width+col.getActualWidth()}),0):this.column.getActualWidth()},CellPositionFeature.prototype.getColSpanningList=function(){var colSpan=this.column.getColSpan(this.rowNode),colsSpanning=[];if(1===colSpan)colsSpanning.push(this.column);else for(var pointer=this.column,pinned=this.column.getPinned(),i=0;pointer&&i<colSpan&&(colsSpanning.push(pointer),(pointer=this.beans.columnModel.getDisplayedColAfter(pointer))&&!missing(pointer))&&pinned===pointer.getPinned();i++);return colsSpanning},CellPositionFeature.prototype.onLeftChanged=function(){if(this.eGui){var left=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=left+"px"}},CellPositionFeature.prototype.getCellLeft=function(){return(this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?last(this.colsSpanning):this.column).getLeft()},CellPositionFeature.prototype.modifyLeftForPrintLayout=function(leftPosition){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()===Constants.PINNED_LEFT)return leftPosition;var leftWidth=this.beans.columnModel.getDisplayedColumnsLeftWidth();return this.column.getPinned()===Constants.PINNED_RIGHT?leftWidth+this.beans.columnModel.getBodyContainerWidth()+(leftPosition||0):leftWidth+(leftPosition||0)},CellPositionFeature.prototype.applyRowSpan=function(){if(1!==this.rowSpan){var totalRowHeight=this.beans.gridOptionsWrapper.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=totalRowHeight+"px",this.eGui.style.zIndex="1"}},CellPositionFeature.prototype.destroy=function(){_super.prototype.destroy.call(this)},CellPositionFeature}(BeanStub),__extends$V=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellCustomStyleFeature=function(_super){function CellCustomStyleFeature(ctrl,beans){var _this=_super.call(this)||this;return _this.staticClasses=[],_this.cellCtrl=ctrl,_this.beans=beans,_this.column=ctrl.getColumn(),_this.rowNode=ctrl.getRowNode(),_this}return __extends$V(CellCustomStyleFeature,_super),CellCustomStyleFeature.prototype.setComp=function(comp){this.cellComp=comp,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},CellCustomStyleFeature.prototype.applyCellClassRules=function(){var _this=this,colDef=this.column.getColDef(),cellClassParams={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};this.beans.stylingService.processClassRules(colDef.cellClassRules,cellClassParams,(function(className){return _this.cellComp.addOrRemoveCssClass(className,!0)}),(function(className){return _this.cellComp.addOrRemoveCssClass(className,!1)}))},CellCustomStyleFeature.prototype.applyUserStyles=function(){var colDef=this.column.getColDef();if(colDef.cellStyle){var styles;if("function"==typeof colDef.cellStyle){var cellStyleParams={column:this.column,value:this.cellCtrl.getValue(),colDef,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};styles=(0,colDef.cellStyle)(cellStyleParams)}else styles=colDef.cellStyle;this.cellComp.setUserStyles(styles)}},CellCustomStyleFeature.prototype.applyClassesFromColDef=function(){var _this=this,colDef=this.column.getColDef(),cellClassParams={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};this.staticClasses.length&&this.staticClasses.forEach((function(className){return _this.cellComp.addOrRemoveCssClass(className,!1)})),this.staticClasses=this.beans.stylingService.getStaticCellClasses(colDef,cellClassParams),this.staticClasses.length&&this.staticClasses.forEach((function(className){return _this.cellComp.addOrRemoveCssClass(className,!0)}))},CellCustomStyleFeature.prototype.destroy=function(){_super.prototype.destroy.call(this)},CellCustomStyleFeature}(BeanStub),__extends$W=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TooltipFeature=function(_super){function TooltipFeature(ctrl,beans){var _this=_super.call(this)||this;return _this.ctrl=ctrl,_this.beans=beans,_this}return __extends$W(TooltipFeature,_super),TooltipFeature.prototype.setComp=function(comp){this.comp=comp,this.setupTooltip()},TooltipFeature.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsWrapper.isEnableBrowserTooltips(),this.updateTooltipText(),this.browserTooltips?this.comp.setTitle(null!=this.tooltip?this.tooltip:void 0):this.createTooltipFeatureIfNeeded()},TooltipFeature.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue()},TooltipFeature.prototype.createTooltipFeatureIfNeeded=function(){var _this=this;if(null==this.genericTooltipFeature){var parent={getTooltipParams:function(){return _this.getTooltipParams()},getGui:function(){return _this.ctrl.getGui()}};this.genericTooltipFeature=this.createManagedBean(new CustomTooltipFeature(parent),this.beans.context)}},TooltipFeature.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.comp.setTitle(null!=this.tooltip?this.tooltip:void 0)},TooltipFeature.prototype.getTooltipParams=function(){var ctrl=this.ctrl,column=ctrl.getColumn?ctrl.getColumn():void 0,colDef=ctrl.getColDef?ctrl.getColDef():void 0,rowNode=ctrl.getRowNode?ctrl.getRowNode():void 0;return{location:ctrl.getLocation(),colDef,column,rowIndex:ctrl.getRowIndex?ctrl.getRowIndex():void 0,node:rowNode,data:rowNode?rowNode.data:void 0,value:this.getTooltipText(),valueFormatted:ctrl.getValueFormatted?ctrl.getValueFormatted():void 0}},TooltipFeature.prototype.getTooltipText=function(){return this.tooltip},TooltipFeature.prototype.destroy=function(){_super.prototype.destroy.call(this)},TooltipFeature}(BeanStub),__decorate$N=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},Beans=function(){function Beans(){}return Beans.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail(),this.gridOptionsWrapper.isRowModelDefault()&&(this.clientSideRowModel=this.rowModel),this.gridOptionsWrapper.isRowModelServerSide()&&(this.serverSideRowModel=this.rowModel)},__decorate$N([Autowired("resizeObserverService")],Beans.prototype,"resizeObserverService",void 0),__decorate$N([Autowired("paginationProxy")],Beans.prototype,"paginationProxy",void 0),__decorate$N([Autowired("context")],Beans.prototype,"context",void 0),__decorate$N([Autowired("columnApi")],Beans.prototype,"columnApi",void 0),__decorate$N([Autowired("gridApi")],Beans.prototype,"gridApi",void 0),__decorate$N([Autowired("gridOptionsWrapper")],Beans.prototype,"gridOptionsWrapper",void 0),__decorate$N([Autowired("expressionService")],Beans.prototype,"expressionService",void 0),__decorate$N([Autowired("rowRenderer")],Beans.prototype,"rowRenderer",void 0),__decorate$N([Autowired("templateService")],Beans.prototype,"templateService",void 0),__decorate$N([Autowired("valueService")],Beans.prototype,"valueService",void 0),__decorate$N([Autowired("eventService")],Beans.prototype,"eventService",void 0),__decorate$N([Autowired("columnModel")],Beans.prototype,"columnModel",void 0),__decorate$N([Autowired("headerNavigationService")],Beans.prototype,"headerNavigationService",void 0),__decorate$N([Autowired("navigationService")],Beans.prototype,"navigationService",void 0),__decorate$N([Autowired("columnAnimationService")],Beans.prototype,"columnAnimationService",void 0),__decorate$N([Optional("rangeService")],Beans.prototype,"rangeService",void 0),__decorate$N([Autowired("focusService")],Beans.prototype,"focusService",void 0),__decorate$N([Optional("contextMenuFactory")],Beans.prototype,"contextMenuFactory",void 0),__decorate$N([Autowired("popupService")],Beans.prototype,"popupService",void 0),__decorate$N([Autowired("valueFormatterService")],Beans.prototype,"valueFormatterService",void 0),__decorate$N([Autowired("stylingService")],Beans.prototype,"stylingService",void 0),__decorate$N([Autowired("columnHoverService")],Beans.prototype,"columnHoverService",void 0),__decorate$N([Autowired("userComponentFactory")],Beans.prototype,"userComponentFactory",void 0),__decorate$N([Autowired("userComponentRegistry")],Beans.prototype,"userComponentRegistry",void 0),__decorate$N([Autowired("animationFrameService")],Beans.prototype,"animationFrameService",void 0),__decorate$N([Autowired("dragAndDropService")],Beans.prototype,"dragAndDropService",void 0),__decorate$N([Autowired("sortController")],Beans.prototype,"sortController",void 0),__decorate$N([Autowired("filterManager")],Beans.prototype,"filterManager",void 0),__decorate$N([Autowired("rowContainerHeightService")],Beans.prototype,"rowContainerHeightService",void 0),__decorate$N([Autowired("frameworkOverrides")],Beans.prototype,"frameworkOverrides",void 0),__decorate$N([Autowired("cellPositionUtils")],Beans.prototype,"cellPositionUtils",void 0),__decorate$N([Autowired("rowPositionUtils")],Beans.prototype,"rowPositionUtils",void 0),__decorate$N([Autowired("selectionService")],Beans.prototype,"selectionService",void 0),__decorate$N([Optional("selectionHandleFactory")],Beans.prototype,"selectionHandleFactory",void 0),__decorate$N([Autowired("rowCssClassCalculator")],Beans.prototype,"rowCssClassCalculator",void 0),__decorate$N([Autowired("rowModel")],Beans.prototype,"rowModel",void 0),__decorate$N([Autowired("ctrlsService")],Beans.prototype,"ctrlsService",void 0),__decorate$N([Autowired("ctrlsFactory")],Beans.prototype,"ctrlsFactory",void 0),__decorate$N([Autowired("agStackComponentsRegistry")],Beans.prototype,"agStackComponentsRegistry",void 0),__decorate$N([Autowired("valueCache")],Beans.prototype,"valueCache",void 0),__decorate$N([Autowired("rowNodeEventThrottle")],Beans.prototype,"rowNodeEventThrottle",void 0),__decorate$N([PostConstruct],Beans.prototype,"postConstruct",null),Beans=__decorate$N([Bean("beans")],Beans)}(),__extends$X=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellMouseListenerFeature=function(_super){function CellMouseListenerFeature(ctrl,beans,column){var _this=_super.call(this)||this;return _this.cellCtrl=ctrl,_this.beans=beans,_this.column=column,_this}return __extends$X(CellMouseListenerFeature,_super),CellMouseListenerFeature.prototype.onMouseEvent=function(eventName,mouseEvent){if(!isStopPropagationForAgGrid(mouseEvent))switch(eventName){case"click":this.onCellClicked(mouseEvent);break;case"mousedown":case"touchstart":this.onMouseDown(mouseEvent);break;case"dblclick":this.onCellDoubleClicked(mouseEvent);break;case"mouseout":this.onMouseOut(mouseEvent);break;case"mouseover":this.onMouseOver(mouseEvent)}},CellMouseListenerFeature.prototype.onCellClicked=function(mouseEvent){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(mouseEvent),void mouseEvent.preventDefault();var _a=this.beans,eventService=_a.eventService,gridOptionsWrapper=_a.gridOptionsWrapper,cellClickedEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_CLICKED);eventService.dispatchEvent(cellClickedEvent);var colDef=this.column.getColDef();colDef.onCellClicked&&window.setTimeout((function(){return colDef.onCellClicked(cellClickedEvent)}),0),(gridOptionsWrapper.isSingleClickEdit()||colDef.singleClickEdit)&&!gridOptionsWrapper.isSuppressClickEdit()&&this.cellCtrl.startRowOrCellEdit()},CellMouseListenerFeature.prototype.isDoubleClickOnIPad=function(){if(!isIOSUserAgent()||isEventSupported("dblclick"))return!1;var nowMillis=(new Date).getTime(),res=nowMillis-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=nowMillis,res},CellMouseListenerFeature.prototype.onCellDoubleClicked=function(mouseEvent){var colDef=this.column.getColDef(),cellDoubleClickedEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(cellDoubleClickedEvent),"function"==typeof colDef.onCellDoubleClicked&&window.setTimeout((function(){return colDef.onCellDoubleClicked(cellDoubleClickedEvent)}),0),!this.beans.gridOptionsWrapper.isSingleClickEdit()&&!this.beans.gridOptionsWrapper.isSuppressClickEdit()&&this.cellCtrl.startRowOrCellEdit(null,null,mouseEvent)},CellMouseListenerFeature.prototype.onMouseDown=function(mouseEvent){var ctrlKey=mouseEvent.ctrlKey,metaKey=mouseEvent.metaKey,shiftKey=mouseEvent.shiftKey,target=mouseEvent.target,_a=this.beans,eventService=_a.eventService,rangeService=_a.rangeService;if(!this.isRightClickInExistingRange(mouseEvent)){var ranges=rangeService&&0!=rangeService.getCellRanges().length;if(!shiftKey||!ranges){var forceBrowserFocus=isBrowserEdge()&&!this.cellCtrl.isEditing()&&!isFocusableFormField(target);this.cellCtrl.focusCell(forceBrowserFocus)}if(shiftKey&&ranges&&mouseEvent.preventDefault(),!this.containsWidget(target)){if(rangeService){var thisCell=this.cellCtrl.getCellPosition();if(shiftKey)rangeService.extendLatestRangeToCell(thisCell);else{var ctrlKeyPressed=ctrlKey||metaKey;rangeService.setRangeToCell(thisCell,ctrlKeyPressed)}}eventService.dispatchEvent(this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_MOUSE_DOWN))}}},CellMouseListenerFeature.prototype.isRightClickInExistingRange=function(mouseEvent){var rangeService=this.beans.rangeService;if(rangeService&&(rangeService.isCellInAnyRange(this.cellCtrl.getCellPosition())&&2===mouseEvent.button))return!0;return!1},CellMouseListenerFeature.prototype.containsWidget=function(target){return isElementChildOfClass(target,"ag-selection-checkbox",3)},CellMouseListenerFeature.prototype.onMouseOut=function(mouseEvent){if(!this.mouseStayingInsideCell(mouseEvent)){var cellMouseOutEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(cellMouseOutEvent),this.beans.columnHoverService.clearMouseOver()}},CellMouseListenerFeature.prototype.onMouseOver=function(mouseEvent){if(!this.mouseStayingInsideCell(mouseEvent)){var cellMouseOverEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(cellMouseOverEvent),this.beans.columnHoverService.setMouseOver([this.column])}},CellMouseListenerFeature.prototype.mouseStayingInsideCell=function(e){if(!e.target||!e.relatedTarget)return!1;var eGui=this.cellCtrl.getGui(),cellContainsTarget=eGui.contains(e.target),cellContainsRelatedTarget=eGui.contains(e.relatedTarget);return cellContainsTarget&&cellContainsRelatedTarget},CellMouseListenerFeature.prototype.destroy=function(){},CellMouseListenerFeature}(Beans),__extends$Y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellKeyboardListenerFeature=function(_super){function CellKeyboardListenerFeature(ctrl,beans,column,rowNode,rowCtrl){var _this=_super.call(this)||this;return _this.cellCtrl=ctrl,_this.beans=beans,_this.rowNode=rowNode,_this.rowCtrl=rowCtrl,_this}return __extends$Y(CellKeyboardListenerFeature,_super),CellKeyboardListenerFeature.prototype.setComp=function(eGui){this.eGui=eGui},CellKeyboardListenerFeature.prototype.onKeyDown=function(event){var key=event.key;switch(key){case KeyCode.ENTER:this.onEnterKeyDown(event);break;case KeyCode.F2:this.onF2KeyDown(event);break;case KeyCode.ESCAPE:this.onEscapeKeyDown(event);break;case KeyCode.TAB:this.onTabKeyDown(event);break;case KeyCode.BACKSPACE:case KeyCode.DELETE:this.onBackspaceOrDeleteKeyPressed(key,event);break;case KeyCode.DOWN:case KeyCode.UP:case KeyCode.RIGHT:case KeyCode.LEFT:this.onNavigationKeyPressed(event,key)}},CellKeyboardListenerFeature.prototype.onNavigationKeyPressed=function(event,key){this.cellCtrl.isEditing()||(event.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(event):this.beans.navigationService.navigateToNextCell(event,key,this.cellCtrl.getCellPosition(),!0),event.preventDefault())},CellKeyboardListenerFeature.prototype.onShiftRangeSelect=function(event){if(this.beans.rangeService){var endCell=this.beans.rangeService.extendLatestRangeInDirection(event);endCell&&this.beans.navigationService.ensureCellVisible(endCell)}},CellKeyboardListenerFeature.prototype.onTabKeyDown=function(event){this.beans.navigationService.onTabKeyDown(this.cellCtrl,event)},CellKeyboardListenerFeature.prototype.onBackspaceOrDeleteKeyPressed=function(key,event){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(key,void 0,event)},CellKeyboardListenerFeature.prototype.onEnterKeyDown=function(e){this.cellCtrl.isEditing()||this.rowCtrl.isEditing()?this.cellCtrl.stopEditingAndFocus():this.beans.gridOptionsWrapper.isEnterMovesDown()?this.beans.navigationService.navigateToNextCell(null,KeyCode.DOWN,this.cellCtrl.getCellPosition(),!1):(this.cellCtrl.startRowOrCellEdit(KeyCode.ENTER,void 0,e),this.cellCtrl.isEditing()&&e.preventDefault())},CellKeyboardListenerFeature.prototype.onF2KeyDown=function(event){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(KeyCode.F2,void 0,event)},CellKeyboardListenerFeature.prototype.onEscapeKeyDown=function(event){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},CellKeyboardListenerFeature.prototype.onKeyPress=function(event){if(!(event.target!==this.eGui)&&!this.cellCtrl.isEditing()){var pressedChar=String.fromCharCode(event.charCode);" "===pressedChar?this.onSpaceKeyPressed(event):isEventFromPrintableCharacter(event)&&(this.cellCtrl.startRowOrCellEdit(null,pressedChar,event),event.preventDefault())}},CellKeyboardListenerFeature.prototype.onSpaceKeyPressed=function(event){var gridOptionsWrapper=this.beans.gridOptionsWrapper;if(!this.cellCtrl.isEditing()&&gridOptionsWrapper.isRowSelection()){var currentSelection=this.rowNode.isSelected(),newSelection=!currentSelection;if(newSelection||!gridOptionsWrapper.isSuppressRowDeselection()){var groupSelectsFiltered=this.beans.gridOptionsWrapper.isGroupSelectsFiltered(),updatedCount=this.rowNode.setSelectedParams({newValue:newSelection,rangeSelect:event.shiftKey,groupSelectsFiltered});void 0===currentSelection&&0===updatedCount&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:event.shiftKey,groupSelectsFiltered})}}event.preventDefault()},CellKeyboardListenerFeature.prototype.destroy=function(){},CellKeyboardListenerFeature}(BeanStub),__extends$Z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$O=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DndSourceComp=function(_super){function DndSourceComp(rowNode,column,beans,eCell){var _this=_super.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return _this.rowNode=rowNode,_this.column=column,_this.beans=beans,_this.eCell=eCell,_this}return __extends$Z(DndSourceComp,_super),DndSourceComp.prototype.postConstruct=function(){this.getGui().appendChild(createIconNoSpan("rowDrag",this.beans.gridOptionsWrapper,null)),this.addGuiEventListener("mousedown",(function(e){e.stopPropagation()})),this.addDragSource(),this.checkVisibility()},DndSourceComp.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},DndSourceComp.prototype.onDragStart=function(dragEvent){var _this=this,providedOnRowDrag=this.column.getColDef().dndSourceOnRowDrag;dragEvent.dataTransfer.setDragImage(this.eCell,0,0);providedOnRowDrag?providedOnRowDrag({rowNode:this.rowNode,dragEvent,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):function(){try{var jsonData=JSON.stringify(_this.rowNode.data);dragEvent.dataTransfer.setData("application/json",jsonData),dragEvent.dataTransfer.setData("text/plain",jsonData)}catch(e){}}()},DndSourceComp.prototype.checkVisibility=function(){var visible=this.column.isDndSource(this.rowNode);this.setDisplayed(visible)},__decorate$O([PostConstruct],DndSourceComp.prototype,"postConstruct",null),DndSourceComp}(Component),__extends$_=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$b=function(){return __assign$b=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$b.apply(this,arguments)},instanceIdSequence$1=0,CellCtrl=function(_super){function CellCtrl(column,rowNode,beans,rowCtrl){var _this=_super.call(this)||this;return _this.suppressRefreshCell=!1,_this.column=column,_this.rowNode=rowNode,_this.beans=beans,_this.rowCtrl=rowCtrl,_this.instanceId=column.getId()+"-"+instanceIdSequence$1++,_this.createCellPosition(),_this.addFeatures(),_this}return __extends$_(CellCtrl,_super),CellCtrl.prototype.addFeatures=function(){var _this=this;this.cellPositionFeature=new CellPositionFeature(this,this.beans),this.addDestroyFunc((function(){return _this.cellPositionFeature.destroy()})),this.cellCustomStyleFeature=new CellCustomStyleFeature(this,this.beans),this.addDestroyFunc((function(){return _this.cellCustomStyleFeature.destroy()})),this.cellMouseListenerFeature=new CellMouseListenerFeature(this,this.beans,this.column),this.addDestroyFunc((function(){return _this.cellMouseListenerFeature.destroy()})),this.cellKeyboardListenerFeature=new CellKeyboardListenerFeature(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc((function(){return _this.cellKeyboardListenerFeature.destroy()})),this.beans.rangeService&&this.beans.gridOptionsWrapper.isEnableRangeSelection()&&(this.cellRangeFeature=new CellRangeFeature(this.beans,this),this.addDestroyFunc((function(){return _this.cellRangeFeature.destroy()}))),this.addTooltipFeature()},CellCtrl.prototype.addTooltipFeature=function(){var _this=this,tooltipCtrl={getColumn:function(){return _this.column},getColDef:function(){return _this.column.getColDef()},getRowIndex:function(){return _this.cellPosition.rowIndex},getRowNode:function(){return _this.rowNode},getGui:function(){return _this.getGui()},getLocation:function(){return"cell"},getTooltipValue:function(){var colDef=_this.column.getColDef(),data=_this.rowNode.data;if(colDef.tooltipField&&exists(data))return getValueUsingField(data,colDef.tooltipField,_this.column.isTooltipFieldContainsDots());var valueGetter=colDef.tooltipValueGetter;return valueGetter?valueGetter({location:"cell",api:_this.beans.gridOptionsWrapper.getApi(),columnApi:_this.beans.gridOptionsWrapper.getColumnApi(),context:_this.beans.gridOptionsWrapper.getContext(),colDef:_this.column.getColDef(),column:_this.column,rowIndex:_this.cellPosition.rowIndex,node:_this.rowNode,data:_this.rowNode.data,value:_this.value,valueFormatted:_this.valueFormatted}):null},getValueFormatted:function(){return _this.valueFormatted}};this.tooltipFeature=new TooltipFeature(tooltipCtrl,this.beans),this.addDestroyFunc((function(){return _this.tooltipFeature.destroy()}))},CellCtrl.prototype.setComp=function(comp,eGui,eCellWrapper,printLayout,startEditing){this.cellComp=comp,this.gow=this.beans.gridOptionsWrapper,this.eGui=eGui,this.eCellWrapper=eCellWrapper,this.printLayout=printLayout,this.updateAndFormatValue(!0),this.addDomData(),this.onCellFocused(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(),this.setAriaColIndex(),this.gow.isSuppressCellFocus()||this.cellComp.setTabIndex(-1);var colIdSanitised=escapeString(this.column.getId());this.cellComp.setColId(colIdSanitised),this.cellComp.setRole("gridcell"),this.cellPositionFeature.setComp(eGui),this.cellCustomStyleFeature.setComp(comp),this.tooltipFeature.setComp(comp),this.cellKeyboardListenerFeature.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(comp,eGui),startEditing&&this.isCellEditable()?this.startEditing():this.showValue()},CellCtrl.prototype.setupAutoHeight=function(){var _this=this;if(this.column.isAutoHeight()){var eAutoHeightContainer=this.eCellWrapper,eParentCell=eAutoHeightContainer.parentElement,minRowHeight=this.beans.gridOptionsWrapper.getRowHeightForNode(this.rowNode).height,measureHeight=function(timesCalled){if(!_this.editing&&_this.isAlive()){var _a=getElementSize(eParentCell),paddingTop=_a.paddingTop,paddingBottom=_a.paddingBottom,autoHeight=eAutoHeightContainer.offsetHeight+paddingTop+paddingBottom;if(timesCalled<5){var doc=_this.beans.gridOptionsWrapper.getDocument();if(!doc||!doc.contains(eAutoHeightContainer)||0==autoHeight)return void _this.beans.frameworkOverrides.setTimeout((function(){return measureHeight(timesCalled+1)}),0)}var newHeight=Math.max(autoHeight,minRowHeight);_this.rowNode.setRowAutoHeight(newHeight,_this.column)}},listener=function(){return measureHeight(0)};listener();var destroyResizeObserver=this.beans.resizeObserverService.observeResize(eAutoHeightContainer,listener);this.addDestroyFunc((function(){destroyResizeObserver(),_this.rowNode.setRowAutoHeight(void 0,_this.column)}))}},CellCtrl.prototype.getInstanceId=function(){return this.instanceId},CellCtrl.prototype.showValue=function(forceNewCellRendererInstance){void 0===forceNewCellRendererInstance&&(forceNewCellRendererInstance=!1);var valueToDisplay=null!=this.valueFormatted?this.valueFormatted:this.value,params=this.createCellRendererParams(),compDetails=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),params);this.cellComp.setRenderDetails(compDetails,valueToDisplay,forceNewCellRendererInstance),this.refreshHandle()},CellCtrl.prototype.setupControlComps=function(){var colDef=this.column.getColDef();this.includeSelection=this.isIncludeControl(colDef.checkboxSelection),this.includeRowDrag=this.isIncludeControl(colDef.rowDrag),this.includeDndSource=this.isIncludeControl(colDef.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)},CellCtrl.prototype.isForceWrapper=function(){return this.beans.gridOptionsWrapper.isEnableCellTextSelection()||this.column.isAutoHeight()},CellCtrl.prototype.isIncludeControl=function(value){return!(null!=this.rowNode.rowPinned)&&("function"==typeof value||!0===value)},CellCtrl.prototype.refreshShouldDestroy=function(){var colDef=this.column.getColDef(),selectionChanged=this.includeSelection!=this.isIncludeControl(colDef.checkboxSelection),rowDragChanged=this.includeRowDrag!=this.isIncludeControl(colDef.rowDrag),dndSourceChanged=this.includeDndSource!=this.isIncludeControl(colDef.dndSource);return selectionChanged||rowDragChanged||dndSourceChanged},CellCtrl.prototype.startEditing=function(key,charPress,cellStartedEdit,event){var _a,_b;if(void 0===key&&(key=null),void 0===charPress&&(charPress=null),void 0===cellStartedEdit&&(cellStartedEdit=!1),void 0===event&&(event=null),this.isCellEditable()&&!this.editing){var editorParams=this.createCellEditorParams(key,charPress,cellStartedEdit),colDef=this.column.getColDef(),compDetails=this.beans.userComponentFactory.getCellEditorDetails(colDef,editorParams),popup=null!=(null===(_a=compDetails)||void 0===_a?void 0:_a.popupFromSelector)?compDetails.popupFromSelector:!!colDef.cellEditorPopup,position=null!=(null===(_b=compDetails)||void 0===_b?void 0:_b.popupPositionFromSelector)?compDetails.popupPositionFromSelector:colDef.cellEditorPopupPosition;this.setEditing(!0,popup),this.cellComp.setEditDetails(compDetails,popup,position);var e=this.createEvent(event,Events.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(e)}},CellCtrl.prototype.setEditing=function(editing,inPopup){void 0===inPopup&&(inPopup=!1),this.editing!==editing&&(this.editing=editing,this.editingInPopup=inPopup,this.setInlineEditingClass())},CellCtrl.prototype.stopRowOrCellEdit=function(cancel){void 0===cancel&&(cancel=!1),this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowCtrl.stopRowEditing(cancel):this.stopEditing(cancel)},CellCtrl.prototype.onPopupEditorClosed=function(){this.isEditing()&&this.stopEditingAndFocus()},CellCtrl.prototype.takeValueFromCellEditor=function(cancel){var noValueResult={newValueExists:!1};if(cancel)return noValueResult;var cellEditor=this.cellComp.getCellEditor();return cellEditor?cellEditor.isCancelAfterEnd&&cellEditor.isCancelAfterEnd()?noValueResult:{newValue:cellEditor.getValue(),newValueExists:!0}:noValueResult},CellCtrl.prototype.saveNewValue=function(oldValue,newValue){if(newValue===oldValue)return!1;if(this.beans.gridOptionsWrapper.isReadOnlyEdit())return this.dispatchEventForSaveValueReadOnly(oldValue,newValue),!1;this.suppressRefreshCell=!0;var valueChanged=this.rowNode.setDataValue(this.column,newValue);return this.suppressRefreshCell=!1,valueChanged},CellCtrl.prototype.dispatchEventForSaveValueReadOnly=function(oldValue,newValue){var rowNode=this.rowNode,event={type:Events.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:rowNode.rowIndex,rowPinned:rowNode.rowPinned,column:this.column,api:this.beans.gridApi,columnApi:this.beans.columnApi,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),data:rowNode.data,node:rowNode,oldValue,newValue,value:newValue,source:void 0};this.beans.eventService.dispatchEvent(event)},CellCtrl.prototype.stopEditing=function(cancel){if(void 0===cancel&&(cancel=!1),!this.editing)return!1;var _a=this.takeValueFromCellEditor(cancel),newValue=_a.newValue,newValueExists=_a.newValueExists,oldValue=this.getValueFromValueService(),valueChanged=!1;return newValueExists&&(valueChanged=this.saveNewValue(oldValue,newValue)),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(oldValue,newValue),valueChanged},CellCtrl.prototype.dispatchEditingStoppedEvent=function(oldValue,newValue){var editingStoppedEvent=__assign$b(__assign$b({},this.createEvent(null,Events.EVENT_CELL_EDITING_STOPPED)),{oldValue,newValue});this.beans.eventService.dispatchEvent(editingStoppedEvent)},CellCtrl.prototype.setInlineEditingClass=function(){if(this.isAlive()){var editingInline=this.editing&&!this.editingInPopup,popupEditorShowing=this.editing&&this.editingInPopup;this.cellComp.addOrRemoveCssClass("ag-cell-inline-editing",editingInline),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!editingInline),this.cellComp.addOrRemoveCssClass("ag-cell-popup-editing",popupEditorShowing),this.rowCtrl.setInlineEditingCss(this.editing)}},CellCtrl.prototype.hackSayEditingInPopup=function(){this.editingInPopup||(this.editingInPopup=!0,this.setInlineEditingClass())},CellCtrl.prototype.createCellEditorParams=function(key,charPress,cellStartedEdit){return{value:this.getValueFromValueService(),key,eventKey:key,charPress,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsWrapper.getApi(),cellStartedEdit,columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)}},CellCtrl.prototype.createCellRendererParams=function(){var _this=this;return{value:this.value,valueFormatted:this.valueFormatted,getValue:this.getValueFromValueService.bind(this),setValue:function(value){return _this.beans.valueService.setValue(_this.rowNode,_this.column,value)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange){return _this.registerRowDragger(rowDraggerElement,dragStartPixels,suppressVisibilityChange)},addRowCompListener:function(eventType,listener){console.warn("AG Grid: since AG Grid v26, params.addRowCompListener() is deprecated. If you need this functionality, please contact AG Grid support and advise why so that we can revert with an appropriate workaround, as we dont have any valid use cases for it. This method was originally provided as a work around to know when cells were destroyed in AG Grid before custom Cell Renderers could be provided."),_this.rowCtrl.addEventListener(eventType,listener)}}},CellCtrl.prototype.parseValue=function(newValue){var colDef=this.column.getColDef(),params={node:this.rowNode,data:this.rowNode.data,oldValue:this.getValue(),newValue,colDef,column:this.column,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()},valueParser=colDef.valueParser;return exists(valueParser)?this.beans.expressionService.evaluate(valueParser,params):newValue},CellCtrl.prototype.setFocusOutOnEditor=function(){if(this.editing){var cellEditor=this.cellComp.getCellEditor();cellEditor&&cellEditor.focusOut&&cellEditor.focusOut()}},CellCtrl.prototype.setFocusInOnEditor=function(){if(this.editing){var cellEditor=this.cellComp.getCellEditor();cellEditor&&cellEditor.focusIn?cellEditor.focusIn():this.focusCell(!0)}},CellCtrl.prototype.onCellChanged=function(event){this.cellComp&&(event.column===this.column&&this.refreshCell({}))},CellCtrl.prototype.refreshCell=function(params){if(!this.suppressRefreshCell&&!this.editing&&this.cellComp){var colDef=this.column.getColDef(),newData=null!=params&&!!params.newData,suppressFlash=null!=params&&!!params.suppressFlash||!!colDef.suppressCellFlash,noValueProvided=null==colDef.field&&null==colDef.valueGetter&&null==colDef.showRowGroup,forceRefresh=params&&params.forceRefresh||noValueProvided||newData,valuesDifferent=this.updateAndFormatValue();if(forceRefresh||valuesDifferent){this.showValue(newData);var processingFilterChange=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!suppressFlash&&!processingFilterChange&&(this.beans.gridOptionsWrapper.isEnableCellChangeFlash()||colDef.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature.applyUserStyles(),this.cellCustomStyleFeature.applyClassesFromColDef()}this.refreshToolTip(),this.cellCustomStyleFeature.applyCellClassRules()}},CellCtrl.prototype.stopEditingAndFocus=function(suppressNavigateAfterEdit){void 0===suppressNavigateAfterEdit&&(suppressNavigateAfterEdit=!1),this.stopRowOrCellEdit(),this.focusCell(!0),suppressNavigateAfterEdit||this.navigateAfterEdit()},CellCtrl.prototype.navigateAfterEdit=function(){this.beans.gridOptionsWrapper.isFullRowEdit()||this.beans.gridOptionsWrapper.isEnterMovesDownAfterEdit()&&this.beans.navigationService.navigateToNextCell(null,KeyCode.DOWN,this.getCellPosition(),!1)},CellCtrl.prototype.flashCell=function(delays){var flashDelay=delays&&delays.flashDelay,fadeDelay=delays&&delays.fadeDelay;this.animateCell("data-changed",flashDelay,fadeDelay)},CellCtrl.prototype.animateCell=function(cssName,flashDelay,fadeDelay){var _this=this,fullName="ag-cell-"+cssName,animationFullName="ag-cell-"+cssName+"-animation",gridOptionsWrapper=this.beans.gridOptionsWrapper;flashDelay||(flashDelay=gridOptionsWrapper.getCellFlashDelay()),exists(fadeDelay)||(fadeDelay=gridOptionsWrapper.getCellFadeDelay()),this.cellComp.addOrRemoveCssClass(fullName,!0),this.cellComp.addOrRemoveCssClass(animationFullName,!1),window.setTimeout((function(){_this.cellComp.addOrRemoveCssClass(fullName,!1),_this.cellComp.addOrRemoveCssClass(animationFullName,!0),_this.eGui.style.transition="background-color "+fadeDelay+"ms",window.setTimeout((function(){_this.cellComp.addOrRemoveCssClass(animationFullName,!1),_this.eGui.style.transition=""}),fadeDelay)}),flashDelay)},CellCtrl.prototype.onFlashCells=function(event){if(this.cellComp){var cellId=this.beans.cellPositionUtils.createId(this.getCellPosition());event.cells[cellId]&&this.animateCell("highlight")}},CellCtrl.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},CellCtrl.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},CellCtrl.prototype.formatValue=function(value){var res=this.callValueFormatter(value);return null!=res?res:value},CellCtrl.prototype.callValueFormatter=function(value){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,value)},CellCtrl.prototype.updateAndFormatValue=function(force){void 0===force&&(force=!1);var oldValue=this.value,oldValueFormatted=this.valueFormatted;return this.value=this.getValueFromValueService(),this.valueFormatted=this.callValueFormatter(this.value),!!force||(!this.valuesAreEqual(oldValue,this.value)||this.valueFormatted!=oldValueFormatted)},CellCtrl.prototype.valuesAreEqual=function(val1,val2){var colDef=this.column.getColDef();return colDef.equals?colDef.equals(val1,val2):val1===val2},CellCtrl.prototype.getComp=function(){return this.cellComp},CellCtrl.prototype.getValueFromValueService=function(){var lockedClosedGroup=this.rowNode.leafGroup&&this.beans.columnModel.isPivotMode(),isOpenGroup=this.rowNode.group&&this.rowNode.expanded&&!this.rowNode.footer&&!lockedClosedGroup,groupFootersEnabled=this.beans.gridOptionsWrapper.isGroupIncludeFooter(),groupAlwaysShowAggData=this.beans.gridOptionsWrapper.isGroupSuppressBlankHeader(),ignoreAggData=isOpenGroup&&groupFootersEnabled&&!groupAlwaysShowAggData;return this.beans.valueService.getValue(this.column,this.rowNode,!1,ignoreAggData)},CellCtrl.prototype.getValue=function(){return this.value},CellCtrl.prototype.getValueFormatted=function(){return this.valueFormatted},CellCtrl.prototype.addDomData=function(){var _this=this,element=this.getGui();this.beans.gridOptionsWrapper.setDomData(element,CellCtrl.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc((function(){return _this.beans.gridOptionsWrapper.setDomData(element,CellCtrl.DOM_DATA_KEY_CELL_CTRL,null)}))},CellCtrl.prototype.createEvent=function(domEvent,eventType){return{type:eventType,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:domEvent,rowIndex:this.rowNode.rowIndex}},CellCtrl.prototype.onKeyPress=function(event){this.cellKeyboardListenerFeature.onKeyPress(event)},CellCtrl.prototype.onKeyDown=function(event){this.cellKeyboardListenerFeature.onKeyDown(event)},CellCtrl.prototype.onMouseEvent=function(eventName,mouseEvent){this.cellMouseListenerFeature.onMouseEvent(eventName,mouseEvent)},CellCtrl.prototype.getGui=function(){return this.eGui},CellCtrl.prototype.refreshToolTip=function(){this.tooltipFeature.refreshToolTip()},CellCtrl.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},CellCtrl.prototype.onLeftChanged=function(){this.cellComp&&this.cellPositionFeature.onLeftChanged()},CellCtrl.prototype.onDisplayedColumnsChanged=function(){this.eGui&&this.setAriaColIndex()},CellCtrl.prototype.setAriaColIndex=function(){var colIdx=this.beans.columnModel.getAriaColumnIndex(this.column);setAriaColIndex(this.getGui(),colIdx)},CellCtrl.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},CellCtrl.prototype.onWidthChanged=function(){return this.cellPositionFeature.onWidthChanged()},CellCtrl.prototype.getColumn=function(){return this.column},CellCtrl.prototype.getRowNode=function(){return this.rowNode},CellCtrl.prototype.getBeans=function(){return this.beans},CellCtrl.prototype.isPrintLayout=function(){return this.printLayout},CellCtrl.prototype.appendChild=function(htmlElement){this.eGui.appendChild(htmlElement)},CellCtrl.prototype.refreshHandle=function(){this.editing||this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},CellCtrl.prototype.getCellPosition=function(){return this.cellPosition},CellCtrl.prototype.isEditing=function(){return this.editing},CellCtrl.prototype.startRowOrCellEdit=function(key,charPress,event){void 0===event&&(event=null),this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowCtrl.startRowEditing(key,charPress,this):this.startEditing(key,charPress,!0,event)},CellCtrl.prototype.getRowCtrl=function(){return this.rowCtrl},CellCtrl.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},CellCtrl.prototype.updateRangeBordersIfRangeCount=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},CellCtrl.prototype.onRangeSelectionChanged=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},CellCtrl.prototype.isRangeSelectionEnabled=function(){return null!=this.cellRangeFeature},CellCtrl.prototype.focusCell=function(forceBrowserFocus){void 0===forceBrowserFocus&&(forceBrowserFocus=!1),this.beans.focusService.setFocusedCell(this.getCellPosition().rowIndex,this.column,this.rowNode.rowPinned,forceBrowserFocus)},CellCtrl.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},CellCtrl.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var firstRightPinned=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",firstRightPinned)}},CellCtrl.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var lastLeftPinned=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",lastLeftPinned)}},CellCtrl.prototype.onCellFocused=function(event){if(this.cellComp&&!this.gow.isSuppressCellFocus()){var cellFocused=this.beans.focusService.isCellFocused(this.cellPosition);if(this.cellComp.addOrRemoveCssClass("ag-cell-focus",cellFocused),cellFocused&&event&&event.forceBrowserFocus)this.cellComp.getFocusableElement().focus();var fullRowEdit=this.beans.gridOptionsWrapper.isFullRowEdit();cellFocused||fullRowEdit||!this.editing||this.stopRowOrCellEdit()}},CellCtrl.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:makeNull(this.rowNode.rowPinned),column:this.column}},CellCtrl.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);var autoHeight=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",autoHeight),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!autoHeight)},CellCtrl.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsWrapper.isColumnHoverHighlight()){var isHovered=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",isHovered)}},CellCtrl.prototype.onNewColumnsLoaded=function(){this.cellComp&&(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))},CellCtrl.prototype.setWrapText=function(){var value=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",value)},CellCtrl.prototype.dispatchCellContextMenuEvent=function(event){var colDef=this.column.getColDef(),cellContextMenuEvent=this.createEvent(event,Events.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(cellContextMenuEvent),colDef.onCellContextMenu&&window.setTimeout((function(){return colDef.onCellContextMenu(cellContextMenuEvent)}),0)},CellCtrl.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},CellCtrl.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},CellCtrl.prototype.destroy=function(){_super.prototype.destroy.call(this)},CellCtrl.prototype.createSelectionCheckbox=function(){var cbSelectionComponent=new CheckboxSelectionComponent;return this.beans.context.createBean(cbSelectionComponent),cbSelectionComponent.init({rowNode:this.rowNode,column:this.column}),cbSelectionComponent},CellCtrl.prototype.createDndSource=function(){var dndSourceComp=new DndSourceComp(this.rowNode,this.column,this.beans,this.eGui);return this.beans.context.createBean(dndSourceComp),dndSourceComp},CellCtrl.prototype.registerRowDragger=function(customElement,dragStartPixels,suppressVisibilityChange){var _this=this;if(this.customRowDragComp)this.customRowDragComp.setDragElement(customElement,dragStartPixels);else{var newComp=this.createRowDragComp(customElement,dragStartPixels,suppressVisibilityChange);newComp&&(this.customRowDragComp=newComp,this.addDestroyFunc((function(){return _this.beans.context.destroyBean(newComp)})))}},CellCtrl.prototype.createRowDragComp=function(customElement,dragStartPixels,suppressVisibilityChange){var _this=this,pagination=this.beans.gridOptionsWrapper.isPagination(),rowDragManaged=this.beans.gridOptionsWrapper.isRowDragManaged(),clientSideRowModelActive=this.beans.gridOptionsWrapper.isRowModelDefault();if(rowDragManaged){if(!clientSideRowModelActive)return void doOnce((function(){return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model")}),"CellComp.addRowDragging");if(pagination)return void doOnce((function(){return console.warn("AG Grid: managed row dragging is not possible when doing pagination")}),"CellComp.addRowDragging")}var rowDragComp=new RowDragComp((function(){return _this.value}),this.rowNode,this.column,customElement,dragStartPixels,suppressVisibilityChange);return this.beans.context.createBean(rowDragComp),rowDragComp},CellCtrl.DOM_DATA_KEY_CELL_CTRL="cellCtrl",CellCtrl}(BeanStub),__extends$$=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$8=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$6=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$8(arguments[i]));return ar};!function(RowType){RowType.Normal="Normal",RowType.FullWidth="FullWidth",RowType.FullWidthLoading="FullWidthLoading",RowType.FullWidthGroup="FullWidthGroup",RowType.FullWidthDetail="FullWidthDetail"}(RowType||(RowType={}));var RowContainerName,RowContainerType,instanceIdSequence$2=0,RowCtrl=function(_super){function RowCtrl(rowNode,beans,animateIn,useAnimationFrameForCreate,printLayout){var _this=_super.call(this)||this;return _this.allRowGuis=[],_this.active=!0,_this.centerCellCtrls={list:[],map:{}},_this.leftCellCtrls={list:[],map:{}},_this.rightCellCtrls={list:[],map:{}},_this.lastMouseDownOnDragger=!1,_this.updateColumnListsPending=!1,_this.beans=beans,_this.rowNode=rowNode,_this.paginationPage=_this.beans.paginationProxy.getCurrentPage(),_this.useAnimationFrameForCreate=useAnimationFrameForCreate,_this.printLayout=printLayout,_this.instanceId=rowNode.id+"-"+instanceIdSequence$2++,_this.setAnimateFlags(animateIn),_this.rowFocused=_this.beans.focusService.isRowFocused(_this.rowNode.rowIndex,_this.rowNode.rowPinned),_this.rowLevel=_this.beans.rowCssClassCalculator.calculateRowLevel(_this.rowNode),_this.setRowType(),_this.addListeners(),_this.setInitialRowTop(),_this}return __extends$$(RowCtrl,_super),RowCtrl.prototype.getBeans=function(){return this.beans},RowCtrl.prototype.getInstanceId=function(){return this.instanceId},RowCtrl.prototype.setComp=function(rowComp,element,containerType){var gui={rowComp,element,containerType};this.allRowGuis.push(gui),containerType===exports.RowContainerType.LEFT?this.leftGui=gui:containerType===exports.RowContainerType.RIGHT?this.rightGui=gui:containerType===exports.RowContainerType.FULL_WIDTH?this.fullWidthGui=gui:this.centerGui=gui;var allNormalPresent=null!=this.leftGui&&null!=this.rightGui&&null!=this.centerGui,fullWidthPresent=null!=this.fullWidthGui;(allNormalPresent||fullWidthPresent)&&this.initialiseRowComps()},RowCtrl.prototype.isCacheable=function(){return this.rowType===RowType.FullWidthDetail&&this.beans.gridOptionsWrapper.isKeepDetailRows()},RowCtrl.prototype.setCached=function(cached){var displayValue=cached?"none":"";this.allRowGuis.forEach((function(rg){return rg.element.style.display=displayValue}))},RowCtrl.prototype.initialiseRowComps=function(){var _this=this,gow=this.beans.gridOptionsWrapper;this.onRowHeightChanged(),this.updateRowIndexes(),this.setFocusedClasses(),this.setStylesFromGridOptions(),gow.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(),this.updateColumnLists(!this.useAnimationFrameForCreate),this.slideRowIn&&executeNextVMTurn(this.onTopChanged.bind(this)),this.fadeRowIn&&executeNextVMTurn((function(){_this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}))}));var businessKey=this.getRowBusinessKey(),rowIdSanitised=escapeString(this.rowNode.id),businessKeySanitised=escapeString(businessKey);this.allRowGuis.forEach((function(gui){var comp=gui.rowComp;comp.setRole("row"),_this.getInitialRowClasses(gui.containerType).forEach((function(name){return comp.addOrRemoveCssClass(name,!0)})),_this.rowNode.group&&setAriaExpanded(gui.element,1==_this.rowNode.expanded),null!=rowIdSanitised&&comp.setRowId(rowIdSanitised),null!=businessKeySanitised&&comp.setRowBusinessKey(businessKeySanitised),_this.isFullWidth()&&!_this.beans.gridOptionsWrapper.isSuppressCellFocus()&&comp.setTabIndex(-1),gow.setDomData(gui.element,RowCtrl.DOM_DATA_KEY_ROW_CTRL,_this),_this.addDestroyFunc((function(){return gow.setDomData(gui.element,RowCtrl.DOM_DATA_KEY_ROW_CTRL,null)})),_this.useAnimationFrameForCreate?_this.beans.animationFrameService.createTask(_this.addHoverFunctionality.bind(_this,gui.element),_this.rowNode.rowIndex,"createTasksP2"):_this.addHoverFunctionality(gui.element),_this.isFullWidth()&&_this.setupFullWidth(gui),gow.isRowDragEntireRow()&&_this.addRowDraggerToRow(gui),_this.useAnimationFrameForCreate&&_this.beans.animationFrameService.addDestroyTask((function(){_this.isAlive()&&gui.rowComp.addOrRemoveCssClass("ag-after-created",!0)}))})),this.executeProcessRowPostCreateFunc()},RowCtrl.prototype.addRowDraggerToRow=function(gui){if(this.beans.gridOptionsWrapper.isEnableRangeSelection())doOnce((function(){console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")}),"rowDragAndRangeSelectionEnabled");else{var rowDragComp=new RowDragComp((function(){return"1 row"}),this.rowNode,void 0,gui.element,void 0,!0);this.createManagedBean(rowDragComp,this.beans.context)}},RowCtrl.prototype.setupFullWidth=function(gui){var pinned=this.getPinnedForContainer(gui.containerType),params=this.createFullWidthParams(gui.element,pinned),masterDetailModuleLoaded=ModuleRegistry.isRegistered(exports.ModuleNames.MasterDetailModule);if(this.rowType!=RowType.FullWidthDetail||masterDetailModuleLoaded){var compDetails;switch(this.rowType){case RowType.FullWidthDetail:compDetails=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(params);break;case RowType.FullWidthGroup:compDetails=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(params);break;case RowType.FullWidthLoading:compDetails=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(params);break;default:compDetails=this.beans.userComponentFactory.getFullWidthCellRendererDetails(params)}gui.rowComp.showFullWidth(compDetails)}else ModuleRegistry.isPackageBased()?console.warn("AG Grid: cell renderer 'agDetailCellRenderer' (for master detail) not found. Can only be used with ag-grid-enterprise package."):console.warn("AG Grid: cell renderer 'agDetailCellRenderer' (for master detail) not found. Can only be used with AG Grid Enterprise Module "+exports.ModuleNames.MasterDetailModule)},RowCtrl.prototype.isPrintLayout=function(){return this.printLayout},RowCtrl.prototype.getCellElement=function(column){var cellCtrl=this.getCellCtrl(column);return cellCtrl?cellCtrl.getGui():null},RowCtrl.prototype.executeProcessRowPostCreateFunc=function(){var func=this.beans.gridOptionsWrapper.getProcessRowPostCreateFunc();func&&func({eRow:this.centerGui?this.centerGui.element:void 0,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})},RowCtrl.prototype.setRowType=function(){var isStub=this.rowNode.stub,isFullWidthCell=this.rowNode.isFullWidthCell(),isDetailCell=this.beans.doingMasterDetail&&this.rowNode.detail,pivotMode=this.beans.columnModel.isPivotMode(),isFullWidthGroup=!!this.rowNode.group&&!this.rowNode.footer&&this.beans.gridOptionsWrapper.isGroupUseEntireRow(pivotMode);this.rowType=isStub?RowType.FullWidthLoading:isDetailCell?RowType.FullWidthDetail:isFullWidthCell?RowType.FullWidth:isFullWidthGroup?RowType.FullWidthGroup:RowType.Normal},RowCtrl.prototype.updateColumnLists=function(suppressAnimationFrame){var _this=this;(void 0===suppressAnimationFrame&&(suppressAnimationFrame=!1),this.isFullWidth())||(suppressAnimationFrame||this.beans.gridOptionsWrapper.isSuppressAnimationFrame()||this.printLayout?this.updateColumnListsImpl():this.updateColumnListsPending||(this.beans.animationFrameService.createTask((function(){_this.active&&_this.updateColumnListsImpl()}),this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0))},RowCtrl.prototype.createCellCtrls=function(prev,cols,pinned){var _this=this;void 0===pinned&&(pinned=null);var res={list:[],map:{}},addCell=function(colInstanceId,cellCtrl){res.list.push(cellCtrl),res.map[colInstanceId]=cellCtrl};return cols.forEach((function(col){var colInstanceId=col.getInstanceId(),cellCtrl=prev.map[colInstanceId];cellCtrl||(cellCtrl=new CellCtrl(col,_this.rowNode,_this.beans,_this)),addCell(colInstanceId,cellCtrl)})),prev.list.forEach((function(prevCellCtrl){null!=res.map[prevCellCtrl.getColumn().getInstanceId()]||(!_this.isCellEligibleToBeRemoved(prevCellCtrl,pinned)?addCell(prevCellCtrl.getColumn().getInstanceId(),prevCellCtrl):prevCellCtrl.destroy())})),res},RowCtrl.prototype.updateColumnListsImpl=function(){var _this=this;this.updateColumnListsPending=!1;var columnModel=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,columnModel.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var centerCols=columnModel.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,centerCols);var leftCols=columnModel.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,leftCols,Constants.PINNED_LEFT);var rightCols=columnModel.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,rightCols,Constants.PINNED_RIGHT)}this.allRowGuis.forEach((function(item){var cellControls=item.containerType===exports.RowContainerType.LEFT?_this.leftCellCtrls:item.containerType===exports.RowContainerType.RIGHT?_this.rightCellCtrls:_this.centerCellCtrls;item.rowComp.setCellCtrls(cellControls.list)}))},RowCtrl.prototype.isCellEligibleToBeRemoved=function(cellCtrl,nextContainerPinned){if(cellCtrl.getColumn().getPinned()!=nextContainerPinned)return true;var editing=cellCtrl.isEditing(),focused=this.beans.focusService.isCellFocused(cellCtrl.getCellPosition());if(editing||focused){var column_1=cellCtrl.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(column_1)>=0)}return true},RowCtrl.prototype.setAnimateFlags=function(animateIn){if(animateIn){var oldRowTopExists=exists(this.rowNode.oldRowTop);this.slideRowIn=oldRowTopExists,this.fadeRowIn=!oldRowTopExists}else this.slideRowIn=!1,this.fadeRowIn=!1},RowCtrl.prototype.isEditing=function(){return this.editingRow},RowCtrl.prototype.stopRowEditing=function(cancel){this.stopEditing(cancel)},RowCtrl.prototype.isFullWidth=function(){return this.rowType!==RowType.Normal},RowCtrl.prototype.getRowType=function(){return this.rowType},RowCtrl.prototype.refreshFullWidth=function(){var _this=this,tryRefresh=function(gui,pinned){if(!gui)return!0;var cellRenderer=gui.rowComp.getFullWidthCellRenderer();if(!cellRenderer)return!1;if(!cellRenderer.refresh)return!1;var params=_this.createFullWidthParams(gui.element,pinned);return cellRenderer.refresh(params)},fullWidthSuccess=tryRefresh(this.fullWidthGui,null),centerSuccess=tryRefresh(this.centerGui,null),leftSuccess=tryRefresh(this.leftGui,Constants.PINNED_LEFT),rightSuccess=tryRefresh(this.rightGui,Constants.PINNED_RIGHT);return fullWidthSuccess&&centerSuccess&&leftSuccess&&rightSuccess},RowCtrl.prototype.addListeners=function(){this.addManagedListener(this.rowNode,RowNode.EVENT_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_SELECTED,this.onRowSelected.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var eventService=this.beans.eventService;this.addManagedListener(eventService,Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(eventService,Events.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()},RowCtrl.prototype.onColumnMoved=function(){this.updateColumnLists()},RowCtrl.prototype.addListenersForCellComps=function(){var _this=this;this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_INDEX_CHANGED,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onRowIndexChanged()}))})),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,(function(event){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onCellChanged(event)}))}))},RowCtrl.prototype.onRowNodeDataChanged=function(event){this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.refreshCell({suppressFlash:!event.update,newData:!event.update})})),this.onRowSelected(),this.postProcessCss()},RowCtrl.prototype.onRowNodeCellChanged=function(){this.postProcessCss()},RowCtrl.prototype.postProcessCss=function(){this.setStylesFromGridOptions(),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},RowCtrl.prototype.onRowNodeHighlightChanged=function(){var highlighted=this.rowNode.highlighted;this.allRowGuis.forEach((function(gui){var aboveOn=highlighted===exports.RowHighlightPosition.Above,belowOn=highlighted===exports.RowHighlightPosition.Below;gui.rowComp.addOrRemoveCssClass("ag-row-highlight-above",aboveOn),gui.rowComp.addOrRemoveCssClass("ag-row-highlight-below",belowOn)}))},RowCtrl.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},RowCtrl.prototype.postProcessRowDragging=function(){var dragging=this.rowNode.dragging;this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-dragging",dragging)}))},RowCtrl.prototype.updateExpandedCss=function(){var expandable=this.rowNode.isExpandable(),expanded=1==this.rowNode.expanded;this.allRowGuis.forEach((function(gui){gui.rowComp.addOrRemoveCssClass("ag-row-group",expandable),gui.rowComp.addOrRemoveCssClass("ag-row-group-expanded",expandable&&expanded),gui.rowComp.addOrRemoveCssClass("ag-row-group-contracted",expandable&&!expanded),setAriaExpanded(gui.element,expandable&&expanded)}))},RowCtrl.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},RowCtrl.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists()},RowCtrl.prototype.getRowPosition=function(){return{rowPinned:makeNull(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}},RowCtrl.prototype.onKeyboardNavigate=function(keyboardEvent){var currentFullWidthComp=this.allRowGuis.find((function(c){return c.element.contains(keyboardEvent.target)}));if((currentFullWidthComp?currentFullWidthComp.element:null)===keyboardEvent.target){var node=this.rowNode,lastFocusedCell=this.beans.focusService.getFocusedCell(),cellPosition={rowIndex:node.rowIndex,rowPinned:node.rowPinned,column:lastFocusedCell&&lastFocusedCell.column};this.beans.navigationService.navigateToNextCell(keyboardEvent,keyboardEvent.key,cellPosition,!0),keyboardEvent.preventDefault()}},RowCtrl.prototype.onTabKeyDown=function(keyboardEvent){if(!keyboardEvent.defaultPrevented&&!isStopPropagationForAgGrid(keyboardEvent)){var currentFullWidthComp=this.allRowGuis.find((function(c){return c.element.contains(keyboardEvent.target)})),currentFullWidthContainer=currentFullWidthComp?currentFullWidthComp.element:null,isFullWidthContainerFocused=currentFullWidthContainer===keyboardEvent.target,nextEl=null;isFullWidthContainerFocused||(nextEl=this.beans.focusService.findNextFocusableElement(currentFullWidthContainer,!1,keyboardEvent.shiftKey)),(this.isFullWidth()&&isFullWidthContainerFocused||!nextEl)&&this.beans.navigationService.onTabKeyDown(this,keyboardEvent)}},RowCtrl.prototype.onFullWidthRowFocused=function(event){var _a,node=this.rowNode,isFocused=this.isFullWidth()&&event.rowIndex===node.rowIndex&&event.rowPinned==node.rowPinned,element=this.fullWidthGui?this.fullWidthGui.element:null===(_a=this.centerGui)||void 0===_a?void 0:_a.element;element&&(element.classList.toggle("ag-full-width-focus",isFocused),isFocused&&element.focus({preventScroll:!0}))},RowCtrl.prototype.refreshCell=function(cellCtrl){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,cellCtrl),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,cellCtrl),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,cellCtrl),this.updateColumnLists()},RowCtrl.prototype.removeCellCtrl=function(prev,cellCtrlToRemove){var res={list:[],map:{}};return prev.list.forEach((function(cellCtrl){cellCtrl!==cellCtrlToRemove&&(res.list.push(cellCtrl),res.map[cellCtrl.getInstanceId()]=cellCtrl)})),res},RowCtrl.prototype.onMouseEvent=function(eventName,mouseEvent){switch(eventName){case"dblclick":this.onRowDblClick(mouseEvent);break;case"click":this.onRowClick(mouseEvent);break;case"touchstart":case"mousedown":this.onRowMouseDown(mouseEvent)}},RowCtrl.prototype.createRowEvent=function(type,domEvent){return{type,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),event:domEvent}},RowCtrl.prototype.createRowEventWithSource=function(type,domEvent){var event=this.createRowEvent(type,domEvent);return event.source=this,event},RowCtrl.prototype.onRowDblClick=function(mouseEvent){if(!isStopPropagationForAgGrid(mouseEvent)){var agEvent=this.createRowEventWithSource(Events.EVENT_ROW_DOUBLE_CLICKED,mouseEvent);this.beans.eventService.dispatchEvent(agEvent)}},RowCtrl.prototype.onRowMouseDown=function(mouseEvent){if(this.lastMouseDownOnDragger=isElementChildOfClass(mouseEvent.target,"ag-row-drag",3),this.isFullWidth()){var node=this.rowNode,columnModel=this.beans.columnModel;this.beans.focusService.setFocusedCell(node.rowIndex,columnModel.getAllDisplayedColumns()[0],node.rowPinned,!0)}},RowCtrl.prototype.onRowClick=function(mouseEvent){if(!(isStopPropagationForAgGrid(mouseEvent)||this.lastMouseDownOnDragger)){var agEvent=this.createRowEventWithSource(Events.EVENT_ROW_CLICKED,mouseEvent);this.beans.eventService.dispatchEvent(agEvent);var multiSelectKeyPressed=mouseEvent.ctrlKey||mouseEvent.metaKey,shiftKeyPressed=mouseEvent.shiftKey;if(!(this.beans.gridOptionsWrapper.isGroupSelectsChildren()&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.beans.gridOptionsWrapper.isRowSelection()||this.beans.gridOptionsWrapper.isSuppressRowClickSelection())){var multiSelectOnClick=this.beans.gridOptionsWrapper.isRowMultiSelectWithClick(),rowDeselectionWithCtrl=!this.beans.gridOptionsWrapper.isSuppressRowDeselection();if(this.rowNode.isSelected())multiSelectOnClick?this.rowNode.setSelectedParams({newValue:!1}):multiSelectKeyPressed?rowDeselectionWithCtrl&&this.rowNode.setSelectedParams({newValue:!1}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!shiftKeyPressed,rangeSelect:shiftKeyPressed});else{var clearSelection=!multiSelectOnClick&&!multiSelectKeyPressed;this.rowNode.setSelectedParams({newValue:!0,clearSelection,rangeSelect:shiftKeyPressed})}}}},RowCtrl.prototype.setupDetailRowAutoHeight=function(eDetailGui){var _this=this;if(this.rowType===RowType.FullWidthDetail&&this.beans.gridOptionsWrapper.isDetailRowAutoHeight()){var checkRowSizeFunc=function(){var clientHeight=eDetailGui.clientHeight;if(null!=clientHeight&&clientHeight>0){_this.beans.frameworkOverrides.setTimeout((function(){_this.rowNode.setRowHeight(clientHeight),_this.beans.clientSideRowModel?_this.beans.clientSideRowModel.onRowHeightChanged():_this.beans.serverSideRowModel&&_this.beans.serverSideRowModel.onRowHeightChanged()}),0)}},resizeObserverDestroyFunc=this.beans.resizeObserverService.observeResize(eDetailGui,checkRowSizeFunc);this.addDestroyFunc(resizeObserverDestroyFunc),checkRowSizeFunc()}},RowCtrl.prototype.createFullWidthParams=function(eRow,pinned){var _this=this;return{fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),eGridCell:eRow,eParentOfValue:eRow,pinned,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange){return _this.addFullWidthRowDragging(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange)}}},RowCtrl.prototype.addFullWidthRowDragging=function(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange){if(void 0===value&&(value=""),this.isFullWidth()){var rowDragComp=new RowDragComp((function(){return value}),this.rowNode,void 0,rowDraggerElement,dragStartPixels,suppressVisibilityChange);this.createManagedBean(rowDragComp,this.beans.context)}},RowCtrl.prototype.onUiLevelChanged=function(){var newLevel=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=newLevel){var classToAdd_1="ag-row-level-"+newLevel,classToRemove_1="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach((function(gui){gui.rowComp.addOrRemoveCssClass(classToAdd_1,!0),gui.rowComp.addOrRemoveCssClass(classToRemove_1,!1)}))}this.rowLevel=newLevel},RowCtrl.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},RowCtrl.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},RowCtrl.prototype.onModelUpdated=function(){this.refreshFirstAndLastRowStyles()},RowCtrl.prototype.refreshFirstAndLastRowStyles=function(){var newFirst=this.isFirstRowOnPage(),newLast=this.isLastRowOnPage();this.firstRowOnPage!==newFirst&&(this.firstRowOnPage=newFirst,this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-first",newFirst)}))),this.lastRowOnPage!==newLast&&(this.lastRowOnPage=newLast,this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-last",newLast)})))},RowCtrl.prototype.stopEditing=function(cancel){void 0===cancel&&(cancel=!1);var cellEdits=this.getAllCellCtrls().map((function(cellCtrl){return cellCtrl.stopEditing(cancel)}));if(this.editingRow){if(!cancel&&cellEdits.some((function(edit){return edit}))){var event_1=this.createRowEvent(Events.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(event_1)}this.setEditingRow(!1)}},RowCtrl.prototype.setInlineEditingCss=function(editing){this.allRowGuis.forEach((function(gui){gui.rowComp.addOrRemoveCssClass("ag-row-inline-editing",editing),gui.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!editing)}))},RowCtrl.prototype.setEditingRow=function(value){this.editingRow=value,this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-editing",value)}));var event=value?this.createRowEvent(Events.EVENT_ROW_EDITING_STARTED):this.createRowEvent(Events.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(event)},RowCtrl.prototype.startRowEditing=function(key,charPress,sourceRenderedCell,event){void 0===key&&(key=null),void 0===charPress&&(charPress=null),void 0===sourceRenderedCell&&(sourceRenderedCell=null),void 0===event&&(event=null),this.editingRow||(this.getAllCellCtrls().forEach((function(cellCtrl){var cellStartedEdit=cellCtrl===sourceRenderedCell;cellStartedEdit?cellCtrl.startEditing(key,charPress,cellStartedEdit,event):cellCtrl.startEditing(null,null,cellStartedEdit,event)})),this.setEditingRow(!0))},RowCtrl.prototype.getAllCellCtrls=function(){return __spread$6(this.centerCellCtrls.list,this.leftCellCtrls.list,this.rightCellCtrls.list)},RowCtrl.prototype.postProcessClassesFromGridOptions=function(){var _this=this,cssClasses=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);cssClasses&&cssClasses.length&&cssClasses.forEach((function(classStr){_this.allRowGuis.forEach((function(c){return c.rowComp.addOrRemoveCssClass(classStr,!0)}))}))},RowCtrl.prototype.postProcessRowClassRules=function(){var _this=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,(function(className){_this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass(className,!0)}))}),(function(className){_this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass(className,!1)}))}))},RowCtrl.prototype.setStylesFromGridOptions=function(){var rowStyles=this.processStylesFromGridOptions();this.allRowGuis.forEach((function(gui){return gui.rowComp.setUserStyles(rowStyles)}))},RowCtrl.prototype.getRowBusinessKey=function(){var businessKeyForNodeFunc=this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc();if("function"==typeof businessKeyForNodeFunc)return businessKeyForNodeFunc(this.rowNode)},RowCtrl.prototype.getPinnedForContainer=function(rowContainerType){return rowContainerType===exports.RowContainerType.LEFT?Constants.PINNED_LEFT:rowContainerType===exports.RowContainerType.RIGHT?Constants.PINNED_RIGHT:null},RowCtrl.prototype.getInitialRowClasses=function(rowContainerType){var pinned=this.getPinnedForContainer(rowContainerType),params={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeRowIn,rowIsEven:this.rowNode.rowIndex%2==0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned};return this.beans.rowCssClassCalculator.getInitialRowClasses(params)},RowCtrl.prototype.processStylesFromGridOptions=function(){var rowStyle=this.beans.gridOptionsWrapper.getRowStyle();if(!rowStyle||"function"!=typeof rowStyle){var rowStyleFuncResult,rowStyleFunc=this.beans.gridOptionsWrapper.getRowStyleFunc();if(rowStyleFunc)rowStyleFuncResult=rowStyleFunc({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex});return Object.assign({},rowStyle,rowStyleFuncResult)}console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead")},RowCtrl.prototype.onRowSelected=function(){var _this=this,selected=!!this.rowNode.isSelected();this.allRowGuis.forEach((function(gui){gui.rowComp.addOrRemoveCssClass("ag-row-selected",selected),setAriaSelected(gui.element,!!selected||void 0);var ariaLabel=_this.createAriaLabel();setAriaLabel(gui.element,null==ariaLabel?"":ariaLabel)}))},RowCtrl.prototype.createAriaLabel=function(){var selected=this.rowNode.isSelected();if(!selected||!this.beans.gridOptionsWrapper.isSuppressRowDeselection())return this.beans.gridOptionsWrapper.getLocaleTextFunc()(selected?"ariaRowDeselect":"ariaRowSelect","Press SPACE to "+(selected?"deselect":"select")+" this row.")},RowCtrl.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},RowCtrl.prototype.addHoverFunctionality=function(eRow){var _this=this;this.active&&(this.addManagedListener(eRow,"mouseenter",(function(){return _this.rowNode.onMouseEnter()})),this.addManagedListener(eRow,"mouseleave",(function(){return _this.rowNode.onMouseLeave()})),this.addManagedListener(this.rowNode,RowNode.EVENT_MOUSE_ENTER,(function(){_this.beans.gridOptionsWrapper.isSuppressRowHoverHighlight()||eRow.classList.add("ag-row-hover")})),this.addManagedListener(this.rowNode,RowNode.EVENT_MOUSE_LEAVE,(function(){eRow.classList.remove("ag-row-hover")})))},RowCtrl.prototype.roundRowTopToBounds=function(rowTop){var range=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),minPixel=this.applyPaginationOffset(range.top,!0)-100,maxPixel=this.applyPaginationOffset(range.bottom,!0)+100;return Math.min(Math.max(minPixel,rowTop),maxPixel)},RowCtrl.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},RowCtrl.prototype.onRowHeightChanged=function(){if(null!=this.rowNode.rowHeight){var rowHeight=this.rowNode.rowHeight,defaultRowHeight=this.beans.gridOptionsWrapper.getDefaultRowHeight(),heightFromFunc=this.beans.gridOptionsWrapper.isGetRowHeightFunction()?this.beans.gridOptionsWrapper.getRowHeightForNode(this.rowNode).height:void 0,lineHeight=heightFromFunc?Math.min(defaultRowHeight,heightFromFunc)-2+"px":void 0;this.allRowGuis.forEach((function(gui){gui.element.style.height=rowHeight+"px",lineHeight&&gui.element.style.setProperty("--ag-line-height",lineHeight)}))}},RowCtrl.prototype.addEventListener=function(eventType,listener){"renderedRowRemoved"!==eventType&&"rowRemoved"!==eventType||(eventType=Events.EVENT_VIRTUAL_ROW_REMOVED,console.warn("AG Grid: Since version 11, event renderedRowRemoved is now called "+Events.EVENT_VIRTUAL_ROW_REMOVED)),_super.prototype.addEventListener.call(this,eventType,listener)},RowCtrl.prototype.removeEventListener=function(eventType,listener){"renderedRowRemoved"!==eventType&&"rowRemoved"!==eventType||(eventType=Events.EVENT_VIRTUAL_ROW_REMOVED,console.warn("AG Grid: Since version 11, event renderedRowRemoved and rowRemoved is now called "+Events.EVENT_VIRTUAL_ROW_REMOVED)),_super.prototype.removeEventListener.call(this,eventType,listener)},RowCtrl.prototype.destroyFirstPass=function(){this.active=!1,this.setupRemoveAnimation();var event=this.createRowEvent(Events.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(event),this.beans.eventService.dispatchEvent(event),_super.prototype.destroy.call(this)},RowCtrl.prototype.setupRemoveAnimation=function(){if(null!=this.rowNode.rowTop){var rowTop=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(rowTop)}else this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)}))},RowCtrl.prototype.destroySecondPass=function(){this.allRowGuis.length=0;var destroyCellCtrls=function(ctrls){return ctrls.list.forEach((function(c){return c.destroy()})),{list:[],map:{}}};this.centerCellCtrls=destroyCellCtrls(this.centerCellCtrls),this.leftCellCtrls=destroyCellCtrls(this.leftCellCtrls),this.rightCellCtrls=destroyCellCtrls(this.rightCellCtrls)},RowCtrl.prototype.setFocusedClasses=function(){var _this=this;this.allRowGuis.forEach((function(gui){gui.rowComp.addOrRemoveCssClass("ag-row-focus",_this.rowFocused),gui.rowComp.addOrRemoveCssClass("ag-row-no-focus",!_this.rowFocused)}))},RowCtrl.prototype.onCellFocusChanged=function(){var rowFocused=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);rowFocused!==this.rowFocused&&(this.rowFocused=rowFocused,this.setFocusedClasses()),!rowFocused&&this.editingRow&&this.stopEditing(!1)},RowCtrl.prototype.onPaginationChanged=function(){var currentPage=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==currentPage&&(this.paginationPage=currentPage,this.onTopChanged()),this.refreshFirstAndLastRowStyles()},RowCtrl.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},RowCtrl.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},RowCtrl.prototype.applyPaginationOffset=function(topPx,reverse){return void 0===reverse&&(reverse=!1),this.rowNode.isRowPinned()?topPx:topPx+this.beans.paginationProxy.getPixelOffset()*(reverse?1:-1)},RowCtrl.prototype.setRowTop=function(pixels){if(!this.printLayout&&exists(pixels)){var afterPaginationPixels=this.applyPaginationOffset(pixels),topPx=(this.rowNode.isRowPinned()?afterPaginationPixels:this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels))+"px";this.setRowTopStyle(topPx)}},RowCtrl.prototype.getInitialRowTop=function(){return this.initialTop},RowCtrl.prototype.getInitialTransform=function(){return this.initialTransform},RowCtrl.prototype.setInitialRowTop=function(){if(this.printLayout)return"";var pixels=this.slideRowIn?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,afterPaginationPixels=this.applyPaginationOffset(pixels),res=(this.rowNode.isRowPinned()?afterPaginationPixels:this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels))+"px";this.beans.gridOptionsWrapper.isSuppressRowTransform()?this.initialTop=res:this.initialTransform="translateY("+res+")"},RowCtrl.prototype.setRowTopStyle=function(topPx){var suppressRowTransform=this.beans.gridOptionsWrapper.isSuppressRowTransform();this.allRowGuis.forEach((function(gui){return suppressRowTransform?gui.rowComp.setTop(topPx):gui.rowComp.setTransform("translateY("+topPx+")")}))},RowCtrl.prototype.getRowNode=function(){return this.rowNode},RowCtrl.prototype.getCellCtrl=function(column){var res=null;return this.getAllCellCtrls().forEach((function(cellCtrl){cellCtrl.getColumn()==column&&(res=cellCtrl)})),null!=res||this.getAllCellCtrls().forEach((function(cellCtrl){cellCtrl.getColSpanningList().indexOf(column)>=0&&(res=cellCtrl)})),res},RowCtrl.prototype.onRowIndexChanged=function(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())},RowCtrl.prototype.updateRowIndexes=function(){var rowIndexStr=this.rowNode.getRowIndexString(),headerRowCount=this.beans.headerNavigationService.getHeaderRowCount(),rowIsEven=this.rowNode.rowIndex%2==0,ariaRowIndex=headerRowCount+this.rowNode.rowIndex+1;this.allRowGuis.forEach((function(c){c.rowComp.setRowIndex(rowIndexStr),c.rowComp.addOrRemoveCssClass("ag-row-even",rowIsEven),c.rowComp.addOrRemoveCssClass("ag-row-odd",!rowIsEven),setAriaRowIndex(c.element,ariaRowIndex)}))},RowCtrl.prototype.getPinnedLeftRowElement=function(){return this.leftGui?this.leftGui.element:void 0},RowCtrl.prototype.getPinnedRightRowElement=function(){return this.rightGui?this.rightGui.element:void 0},RowCtrl.prototype.getBodyRowElement=function(){return this.centerGui?this.centerGui.element:void 0},RowCtrl.prototype.getFullWidthRowElement=function(){return this.fullWidthGui?this.fullWidthGui.element:void 0},RowCtrl.DOM_DATA_KEY_ROW_CTRL="renderedRow",RowCtrl}(BeanStub),__extends$10=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$P=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$9=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},RowContainerEventsFeature=function(_super){function RowContainerEventsFeature(element){var _this=_super.call(this)||this;return _this.element=element,_this}return __extends$10(RowContainerEventsFeature,_super),RowContainerEventsFeature.prototype.postConstruct=function(){this.addMouseListeners(),this.mockContextMenuForIPad(),this.addKeyboardEvents()},RowContainerEventsFeature.prototype.addKeyboardEvents=function(){var _this=this;["keydown","keypress"].forEach((function(eventName){var listener=_this.processKeyboardEvent.bind(_this,eventName);_this.addManagedListener(_this.element,eventName,listener)}))},RowContainerEventsFeature.prototype.addMouseListeners=function(){var _this=this;["dblclick","contextmenu","mouseover","mouseout","click",isEventSupported("touchstart")?"touchstart":"mousedown"].forEach((function(eventName){var listener=_this.processMouseEvent.bind(_this,eventName);_this.addManagedListener(_this.element,eventName,listener)}))},RowContainerEventsFeature.prototype.processMouseEvent=function(eventName,mouseEvent){if(this.mouseEventService.isEventFromThisGrid(mouseEvent)&&!isStopPropagationForAgGrid(mouseEvent)){var rowComp=this.getRowForEvent(mouseEvent),cellCtrl=this.mouseEventService.getRenderedCellForEvent(mouseEvent);"contextmenu"===eventName?this.handleContextMenuMouseEvent(mouseEvent,null,rowComp,cellCtrl):(cellCtrl&&cellCtrl.onMouseEvent(eventName,mouseEvent),rowComp&&rowComp.onMouseEvent(eventName,mouseEvent))}},RowContainerEventsFeature.prototype.mockContextMenuForIPad=function(){var _this=this;if(isIOSUserAgent()){var touchListener=new TouchListener(this.element);this.addManagedListener(touchListener,TouchListener.EVENT_LONG_TAP,(function(event){var rowComp=_this.getRowForEvent(event.touchEvent),cellComp=_this.mouseEventService.getRenderedCellForEvent(event.touchEvent);_this.handleContextMenuMouseEvent(null,event.touchEvent,rowComp,cellComp)})),this.addDestroyFunc((function(){return touchListener.destroy()}))}},RowContainerEventsFeature.prototype.getRowForEvent=function(event){for(var sourceElement=event.target;sourceElement;){var rowCon=this.gridOptionsWrapper.getDomData(sourceElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL);if(rowCon)return rowCon;sourceElement=sourceElement.parentElement}return null},RowContainerEventsFeature.prototype.handleContextMenuMouseEvent=function(mouseEvent,touchEvent,rowComp,cellCtrl){var rowNode=rowComp?rowComp.getRowNode():null,column=cellCtrl?cellCtrl.getColumn():null,value=null;if(column){var event_1=mouseEvent||touchEvent;cellCtrl.dispatchCellContextMenuEvent(event_1),value=this.valueService.getValue(column,rowNode)}var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),anchorToElement=cellCtrl?cellCtrl.getGui():gridBodyCon.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(mouseEvent,touchEvent,rowNode,column,value,anchorToElement)},RowContainerEventsFeature.prototype.processKeyboardEvent=function(eventName,keyboardEvent){var cellComp=getCtrlForEvent(this.gridOptionsWrapper,keyboardEvent,CellCtrl.DOM_DATA_KEY_CELL_CTRL),rowComp=getCtrlForEvent(this.gridOptionsWrapper,keyboardEvent,RowCtrl.DOM_DATA_KEY_ROW_CTRL);keyboardEvent.defaultPrevented||(cellComp?this.processCellKeyboardEvent(cellComp,eventName,keyboardEvent):rowComp&&rowComp.isFullWidth()&&this.processFullWidthRowKeyboardEvent(rowComp,eventName,keyboardEvent))},RowContainerEventsFeature.prototype.processCellKeyboardEvent=function(cellCtrl,eventName,keyboardEvent){var rowNode=cellCtrl.getRowNode(),column=cellCtrl.getColumn(),editing=cellCtrl.isEditing();if(!isUserSuppressingKeyboardEvent(this.gridOptionsWrapper,keyboardEvent,rowNode,column,editing))switch(eventName){case"keydown":!editing&&this.navigationService.handlePageScrollingKey(keyboardEvent)||cellCtrl.onKeyDown(keyboardEvent),this.doGridOperations(keyboardEvent,cellCtrl.isEditing());break;case"keypress":cellCtrl.onKeyPress(keyboardEvent)}if("keydown"===eventName){var cellKeyDownEvent=cellCtrl.createEvent(keyboardEvent,Events.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(cellKeyDownEvent)}if("keypress"===eventName){var cellKeyPressEvent=cellCtrl.createEvent(keyboardEvent,Events.EVENT_CELL_KEY_PRESS);this.eventService.dispatchEvent(cellKeyPressEvent)}},RowContainerEventsFeature.prototype.processFullWidthRowKeyboardEvent=function(rowComp,eventName,keyboardEvent){var rowNode=rowComp.getRowNode(),focusedCell=this.focusService.getFocusedCell(),column=focusedCell&&focusedCell.column;if(!isUserSuppressingKeyboardEvent(this.gridOptionsWrapper,keyboardEvent,rowNode,column,!1)){var key=keyboardEvent.key;if("keydown"===eventName)switch(key){case KeyCode.UP:case KeyCode.DOWN:rowComp.onKeyboardNavigate(keyboardEvent);break;case KeyCode.TAB:rowComp.onTabKeyDown(keyboardEvent)}}if("keydown"===eventName){var cellKeyDownEvent=rowComp.createRowEvent(Events.EVENT_CELL_KEY_DOWN,keyboardEvent);this.eventService.dispatchEvent(cellKeyDownEvent)}if("keypress"===eventName){var cellKeyPressEvent=rowComp.createRowEvent(Events.EVENT_CELL_KEY_PRESS,keyboardEvent);this.eventService.dispatchEvent(cellKeyPressEvent)}},RowContainerEventsFeature.prototype.doGridOperations=function(keyboardEvent,editing){if((keyboardEvent.ctrlKey||keyboardEvent.metaKey)&&!editing&&this.mouseEventService.isEventFromThisGrid(keyboardEvent))switch(keyboardEvent.code){case KeyCode.A:return this.onCtrlAndA(keyboardEvent);case KeyCode.C:return this.onCtrlAndC(keyboardEvent);case KeyCode.V:return this.onCtrlAndV();case KeyCode.D:return this.onCtrlAndD(keyboardEvent);case KeyCode.Z:return keyboardEvent.shiftKey?this.undoRedoService.redo():this.undoRedoService.undo();case KeyCode.Y:return this.undoRedoService.redo()}},RowContainerEventsFeature.prototype.onCtrlAndA=function(event){var pinnedRowModel=this.pinnedRowModel,paginationProxy=this.paginationProxy,rangeService=this.rangeService,PINNED_BOTTOM=Constants.PINNED_BOTTOM,PINNED_TOP=Constants.PINNED_TOP;if(rangeService&&paginationProxy.isRowsToRender()){var _b=__read$9([pinnedRowModel.isEmpty(PINNED_TOP),pinnedRowModel.isEmpty(PINNED_BOTTOM)],2),floatingStart=_b[0]?null:PINNED_TOP,floatingEnd=void 0,rowEnd=void 0;_b[1]?(floatingEnd=null,rowEnd=this.paginationProxy.getRowCount()-1):(floatingEnd=PINNED_BOTTOM,rowEnd=pinnedRowModel.getPinnedBottomRowData().length-1);var allDisplayedColumns=this.columnModel.getAllDisplayedColumns();if(missingOrEmpty(allDisplayedColumns))return;rangeService.setCellRange({rowStartIndex:0,rowStartPinned:floatingStart,rowEndIndex:rowEnd,rowEndPinned:floatingEnd,columnStart:allDisplayedColumns[0],columnEnd:last(allDisplayedColumns)})}event.preventDefault()},RowContainerEventsFeature.prototype.onCtrlAndC=function(event){this.clipboardService&&!this.gridOptionsWrapper.isEnableCellTextSelection()&&(this.clipboardService.copyToClipboard(),event.preventDefault())},RowContainerEventsFeature.prototype.onCtrlAndV=function(){ModuleRegistry.isRegistered(exports.ModuleNames.ClipboardModule)&&!this.gridOptionsWrapper.isSuppressClipboardPaste()&&this.clipboardService.pasteFromClipboard()},RowContainerEventsFeature.prototype.onCtrlAndD=function(event){ModuleRegistry.isRegistered(exports.ModuleNames.ClipboardModule)&&!this.gridOptionsWrapper.isSuppressClipboardPaste()&&this.clipboardService.copyRangeDown(),event.preventDefault()},__decorate$P([Autowired("mouseEventService")],RowContainerEventsFeature.prototype,"mouseEventService",void 0),__decorate$P([Autowired("valueService")],RowContainerEventsFeature.prototype,"valueService",void 0),__decorate$P([Optional("contextMenuFactory")],RowContainerEventsFeature.prototype,"contextMenuFactory",void 0),__decorate$P([Autowired("ctrlsService")],RowContainerEventsFeature.prototype,"ctrlsService",void 0),__decorate$P([Autowired("navigationService")],RowContainerEventsFeature.prototype,"navigationService",void 0),__decorate$P([Autowired("focusService")],RowContainerEventsFeature.prototype,"focusService",void 0),__decorate$P([Autowired("undoRedoService")],RowContainerEventsFeature.prototype,"undoRedoService",void 0),__decorate$P([Autowired("columnModel")],RowContainerEventsFeature.prototype,"columnModel",void 0),__decorate$P([Autowired("paginationProxy")],RowContainerEventsFeature.prototype,"paginationProxy",void 0),__decorate$P([Autowired("pinnedRowModel")],RowContainerEventsFeature.prototype,"pinnedRowModel",void 0),__decorate$P([Optional("rangeService")],RowContainerEventsFeature.prototype,"rangeService",void 0),__decorate$P([Optional("clipboardService")],RowContainerEventsFeature.prototype,"clipboardService",void 0),__decorate$P([PostConstruct],RowContainerEventsFeature.prototype,"postConstruct",null),RowContainerEventsFeature}(BeanStub),__extends$11=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ViewportSizeFeature=function(_super){function ViewportSizeFeature(centerContainerCtrl){var _this=_super.call(this)||this;return _this.centerContainerCtrl=centerContainerCtrl,_this}return __extends$11(ViewportSizeFeature,_super),ViewportSizeFeature.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl(),_this.listenForResize()})),this.addManagedListener(this.eventService,Events.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))},ViewportSizeFeature.prototype.listenForResize=function(){var _this=this,listener=function(){return _this.onCenterViewportResized()};this.centerContainerCtrl.registerViewportResizeListener(listener),this.gridBodyCtrl.registerBodyViewportResizeListener(listener)},ViewportSizeFeature.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},ViewportSizeFeature.prototype.onCenterViewportResized=function(){if(this.centerContainerCtrl.isViewportVisible()){this.checkViewportAndScrolls();var newWidth=this.centerContainerCtrl.getCenterWidth();newWidth!==this.centerWidth&&(this.centerWidth=newWidth,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},ViewportSizeFeature.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()},ViewportSizeFeature.prototype.getBodyHeight=function(){return this.bodyHeight},ViewportSizeFeature.prototype.checkBodyHeight=function(){var bodyHeight=getInnerHeight(this.gridBodyCtrl.getBodyViewportElement());if(this.bodyHeight!==bodyHeight){this.bodyHeight=bodyHeight;var event_1={type:Events.EVENT_BODY_HEIGHT_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event_1)}},ViewportSizeFeature.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},ViewportSizeFeature.prototype.updateScrollVisibleServiceImpl=function(){var params={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(params),this.gridBodyCtrl.setVerticalScrollPaddingVisible(params.verticalScrollShowing)},ViewportSizeFeature.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsWrapper.isAlwaysShowHorizontalScroll()||this.centerContainerCtrl.isViewportHScrollShowing()},ViewportSizeFeature.prototype.onHorizontalViewportChanged=function(){var scrollWidth=this.centerContainerCtrl.getCenterWidth(),scrollPosition=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(scrollWidth,scrollPosition)},__decorate$Q([Autowired("ctrlsService")],ViewportSizeFeature.prototype,"ctrlsService",void 0),__decorate$Q([Autowired("columnModel")],ViewportSizeFeature.prototype,"columnModel",void 0),__decorate$Q([Autowired("scrollVisibleService")],ViewportSizeFeature.prototype,"scrollVisibleService",void 0),__decorate$Q([Autowired("columnApi")],ViewportSizeFeature.prototype,"columnApi",void 0),__decorate$Q([Autowired("gridApi")],ViewportSizeFeature.prototype,"gridApi",void 0),__decorate$Q([PostConstruct],ViewportSizeFeature.prototype,"postConstruct",null),ViewportSizeFeature}(BeanStub),__extends$12=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$R=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetPinnedLeftWidthFeature=function(_super){function SetPinnedLeftWidthFeature(element){var _this=_super.call(this)||this;return _this.element=element,_this}return __extends$12(SetPinnedLeftWidthFeature,_super),SetPinnedLeftWidthFeature.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},SetPinnedLeftWidthFeature.prototype.onPinnedLeftWidthChanged=function(){var leftWidth=this.pinnedWidthService.getPinnedLeftWidth(),displayed=leftWidth>0;setDisplayed(this.element,displayed),displayed&&setFixedWidth(this.element,leftWidth)},__decorate$R([Autowired("pinnedWidthService")],SetPinnedLeftWidthFeature.prototype,"pinnedWidthService",void 0),__decorate$R([PostConstruct],SetPinnedLeftWidthFeature.prototype,"postConstruct",null),SetPinnedLeftWidthFeature}(BeanStub),__extends$13=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$S=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetPinnedRightWidthFeature=function(_super){function SetPinnedRightWidthFeature(element){var _this=_super.call(this)||this;return _this.element=element,_this}return __extends$13(SetPinnedRightWidthFeature,_super),SetPinnedRightWidthFeature.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},SetPinnedRightWidthFeature.prototype.onPinnedRightWidthChanged=function(){var rightWidth=this.pinnedWidthService.getPinnedRightWidth(),displayed=rightWidth>0;setDisplayed(this.element,displayed),displayed&&setFixedWidth(this.element,rightWidth)},__decorate$S([Autowired("pinnedWidthService")],SetPinnedRightWidthFeature.prototype,"pinnedWidthService",void 0),__decorate$S([PostConstruct],SetPinnedRightWidthFeature.prototype,"postConstruct",null),SetPinnedRightWidthFeature}(BeanStub),__extends$14=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$T=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetHeightFeature=function(_super){function SetHeightFeature(eContainer,eWrapper){var _this=_super.call(this)||this;return _this.eContainer=eContainer,_this.eWrapper=eWrapper,_this}return __extends$14(SetHeightFeature,_super),SetHeightFeature.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},SetHeightFeature.prototype.onHeightChanged=function(){var height=this.maxDivHeightScaler.getUiContainerHeight(),heightString=null!=height?height+"px":"";this.eContainer.style.height=heightString,this.eWrapper&&(this.eWrapper.style.height=heightString)},__decorate$T([Autowired("rowContainerHeightService")],SetHeightFeature.prototype,"maxDivHeightScaler",void 0),__decorate$T([PostConstruct],SetHeightFeature.prototype,"postConstruct",null),SetHeightFeature}(BeanStub),__extends$15=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$U=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DragListenerFeature=function(_super){function DragListenerFeature(eContainer){var _this=_super.call(this)||this;return _this.eContainer=eContainer,_this}return __extends$15(DragListenerFeature,_super),DragListenerFeature.prototype.postConstruct=function(){var _this=this;if(this.gridOptionsWrapper.isEnableRangeSelection()&&!missing(this.rangeService)){var params={dragStartPixels:0,eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(params),this.addDestroyFunc((function(){return _this.dragService.removeDragSource(params)}))}},__decorate$U([Optional("rangeService")],DragListenerFeature.prototype,"rangeService",void 0),__decorate$U([Autowired("dragService")],DragListenerFeature.prototype,"dragService",void 0),__decorate$U([PostConstruct],DragListenerFeature.prototype,"postConstruct",null),DragListenerFeature}(BeanStub),__extends$16=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$V=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CenterWidthFeature=function(_super){function CenterWidthFeature(callback){var _this=_super.call(this)||this;return _this.callback=callback,_this}return __extends$16(CenterWidthFeature,_super),CenterWidthFeature.prototype.postConstruct=function(){var listener=this.setWidth.bind(this);this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_DOM_LAYOUT,listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,listener),this.setWidth()},CenterWidthFeature.prototype.setWidth=function(){var columnModel=this.columnModel,printLayout=this.gridOptionsWrapper.getDomLayout()===Constants.DOM_LAYOUT_PRINT,centerWidth=columnModel.getBodyContainerWidth(),leftWidth=columnModel.getDisplayedColumnsLeftWidth(),rightWidth=columnModel.getDisplayedColumnsRightWidth(),totalWidth=printLayout?centerWidth+leftWidth+rightWidth:centerWidth;this.callback(totalWidth)},__decorate$V([Autowired("columnModel")],CenterWidthFeature.prototype,"columnModel",void 0),__decorate$V([PostConstruct],CenterWidthFeature.prototype,"postConstruct",null),CenterWidthFeature}(BeanStub),__extends$17=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$W=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$a=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$7=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$a(arguments[i]));return ar};function getRowContainerTypeForName(name){switch(name){case exports.RowContainerName.CENTER:case exports.RowContainerName.TOP_CENTER:case exports.RowContainerName.BOTTOM_CENTER:return exports.RowContainerType.CENTER;case exports.RowContainerName.LEFT:case exports.RowContainerName.TOP_LEFT:case exports.RowContainerName.BOTTOM_LEFT:return exports.RowContainerType.LEFT;case exports.RowContainerName.RIGHT:case exports.RowContainerName.TOP_RIGHT:case exports.RowContainerName.BOTTOM_RIGHT:return exports.RowContainerType.RIGHT;case exports.RowContainerName.FULL_WIDTH:case exports.RowContainerName.TOP_FULL_WIDTH:case exports.RowContainerName.BOTTOM_FULL_WIDTH:return exports.RowContainerType.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}(RowContainerName=exports.RowContainerName||(exports.RowContainerName={})).LEFT="left",RowContainerName.RIGHT="right",RowContainerName.CENTER="center",RowContainerName.FULL_WIDTH="fullWidth",RowContainerName.TOP_LEFT="topLeft",RowContainerName.TOP_RIGHT="topRight",RowContainerName.TOP_CENTER="topCenter",RowContainerName.TOP_FULL_WIDTH="topFullWidth",RowContainerName.BOTTOM_LEFT="bottomLeft",RowContainerName.BOTTOM_RIGHT="bottomRight",RowContainerName.BOTTOM_CENTER="bottomCenter",RowContainerName.BOTTOM_FULL_WIDTH="bottomFullWidth",(RowContainerType=exports.RowContainerType||(exports.RowContainerType={})).LEFT="left",RowContainerType.RIGHT="right",RowContainerType.CENTER="center",RowContainerType.FULL_WIDTH="fullWidth";var ContainerCssClasses=convertToMap([[exports.RowContainerName.CENTER,"ag-center-cols-container"],[exports.RowContainerName.LEFT,"ag-pinned-left-cols-container"],[exports.RowContainerName.RIGHT,"ag-pinned-right-cols-container"],[exports.RowContainerName.FULL_WIDTH,"ag-full-width-container"],[exports.RowContainerName.TOP_CENTER,"ag-floating-top-container"],[exports.RowContainerName.TOP_LEFT,"ag-pinned-left-floating-top"],[exports.RowContainerName.TOP_RIGHT,"ag-pinned-right-floating-top"],[exports.RowContainerName.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[exports.RowContainerName.BOTTOM_CENTER,"ag-floating-bottom-container"],[exports.RowContainerName.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[exports.RowContainerName.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[exports.RowContainerName.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),ViewportCssClasses=convertToMap([[exports.RowContainerName.CENTER,"ag-center-cols-viewport"],[exports.RowContainerName.TOP_CENTER,"ag-floating-top-viewport"],[exports.RowContainerName.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),WrapperCssClasses=convertToMap([[exports.RowContainerName.CENTER,"ag-center-cols-clipper"]]),RowContainerCtrl=function(_super){function RowContainerCtrl(name){var _this=_super.call(this)||this;return _this.name=name,_this}return __extends$17(RowContainerCtrl,_super),RowContainerCtrl.getRowContainerCssClasses=function(name){return{container:ContainerCssClasses.get(name),viewport:ViewportCssClasses.get(name),wrapper:WrapperCssClasses.get(name)}},RowContainerCtrl.getPinned=function(name){switch(name){case exports.RowContainerName.BOTTOM_LEFT:case exports.RowContainerName.TOP_LEFT:case exports.RowContainerName.LEFT:return Constants.PINNED_LEFT;case exports.RowContainerName.BOTTOM_RIGHT:case exports.RowContainerName.TOP_RIGHT:case exports.RowContainerName.RIGHT:return Constants.PINNED_RIGHT;default:return null}},RowContainerCtrl.prototype.postConstruct=function(){var _this=this;this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.embedFullWidthRows=this.gridOptionsWrapper.isEmbedFullWidthRows(),this.forContainers([exports.RowContainerName.CENTER],(function(){return _this.viewportSizeFeature=_this.createManagedBean(new ViewportSizeFeature(_this))}))},RowContainerCtrl.prototype.registerWithCtrlsService=function(){switch(this.name){case exports.RowContainerName.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case exports.RowContainerName.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case exports.RowContainerName.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case exports.RowContainerName.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case exports.RowContainerName.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case exports.RowContainerName.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case exports.RowContainerName.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case exports.RowContainerName.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case exports.RowContainerName.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this)}},RowContainerCtrl.prototype.forContainers=function(names,callback){names.indexOf(this.name)>=0&&callback()},RowContainerCtrl.prototype.getContainerElement=function(){return this.eContainer},RowContainerCtrl.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},RowContainerCtrl.prototype.setComp=function(view,eContainer,eViewport,eWrapper){var _this=this;this.comp=view,this.eContainer=eContainer,this.eViewport=eViewport,this.eWrapper=eWrapper,this.createManagedBean(new RowContainerEventsFeature(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var allTopNoFW=[exports.RowContainerName.TOP_CENTER,exports.RowContainerName.TOP_LEFT,exports.RowContainerName.TOP_RIGHT],allBottomNoFW=[exports.RowContainerName.BOTTOM_CENTER,exports.RowContainerName.BOTTOM_LEFT,exports.RowContainerName.BOTTOM_RIGHT],allMiddleNoFW=[exports.RowContainerName.CENTER,exports.RowContainerName.LEFT,exports.RowContainerName.RIGHT],allNoFW=__spread$7(allTopNoFW,allBottomNoFW,allMiddleNoFW),allMiddle=[exports.RowContainerName.CENTER,exports.RowContainerName.LEFT,exports.RowContainerName.RIGHT,exports.RowContainerName.FULL_WIDTH],allCenter=[exports.RowContainerName.CENTER,exports.RowContainerName.TOP_CENTER,exports.RowContainerName.BOTTOM_CENTER],allLeft=[exports.RowContainerName.LEFT,exports.RowContainerName.BOTTOM_LEFT,exports.RowContainerName.TOP_LEFT],allRight=[exports.RowContainerName.RIGHT,exports.RowContainerName.BOTTOM_RIGHT,exports.RowContainerName.TOP_RIGHT];this.forContainers(allLeft,(function(){return _this.createManagedBean(new SetPinnedLeftWidthFeature(_this.eContainer))})),this.forContainers(allRight,(function(){return _this.createManagedBean(new SetPinnedRightWidthFeature(_this.eContainer))})),this.forContainers(allMiddle,(function(){return _this.createManagedBean(new SetHeightFeature(_this.eContainer,_this.eWrapper))})),this.forContainers(allNoFW,(function(){return _this.createManagedBean(new DragListenerFeature(_this.eContainer))})),this.forContainers(allCenter,(function(){return _this.createManagedBean(new CenterWidthFeature((function(width){return _this.comp.setContainerWidth(width+"px")})))})),this.addListeners(),this.registerWithCtrlsService()},RowContainerCtrl.prototype.addListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,(function(){return _this.onScrollVisibilityChanged()})),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,(function(){return _this.onDisplayedColumnsChanged()})),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,(function(){return _this.onDisplayedColumnsWidthChanged()})),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_ROWS_CHANGED,(function(){return _this.onDisplayedRowsChanged()})),this.onScrollVisibilityChanged(),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()},RowContainerCtrl.prototype.listenOnDomOrder=function(){var _this=this,listener=function(){return _this.comp.setDomOrder(_this.gridOptionsWrapper.isEnsureDomOrder())};this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_DOM_LAYOUT,listener),listener()},RowContainerCtrl.prototype.stopHScrollOnPinnedRows=function(){var _this=this;this.forContainers([exports.RowContainerName.TOP_CENTER,exports.RowContainerName.BOTTOM_CENTER],(function(){_this.addManagedListener(_this.eViewport,"scroll",(function(){return _this.eViewport.scrollLeft=0}))}))},RowContainerCtrl.prototype.onDisplayedColumnsChanged=function(){var _this=this;this.forContainers([exports.RowContainerName.CENTER],(function(){return _this.onHorizontalViewportChanged()}))},RowContainerCtrl.prototype.onDisplayedColumnsWidthChanged=function(){var _this=this;this.forContainers([exports.RowContainerName.CENTER],(function(){return _this.onHorizontalViewportChanged()}))},RowContainerCtrl.prototype.onScrollVisibilityChanged=function(){if(this.name===exports.RowContainerName.CENTER){var scrollbarWidth=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gridOptionsWrapper.getScrollbarWidth()||0,height=0==scrollbarWidth?"100%":"calc(100% + "+scrollbarWidth+"px)";this.comp.setViewportHeight(height)}},RowContainerCtrl.prototype.addPreventScrollWhileDragging=function(){var _this=this,preventScroll=function(e){_this.dragService.isDragging()&&e.cancelable&&e.preventDefault()};this.eContainer.addEventListener("touchmove",preventScroll,{passive:!1}),this.addDestroyFunc((function(){return _this.eContainer.removeEventListener("touchmove",preventScroll)}))},RowContainerCtrl.prototype.onHorizontalViewportChanged=function(){var scrollWidth=this.getCenterWidth(),scrollPosition=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(scrollWidth,scrollPosition)},RowContainerCtrl.prototype.getCenterWidth=function(){return getInnerWidth(this.eViewport)},RowContainerCtrl.prototype.getCenterViewportScrollLeft=function(){return getScrollLeft(this.eViewport,this.enableRtl)},RowContainerCtrl.prototype.registerViewportResizeListener=function(listener){var unsubscribeFromResize=this.resizeObserverService.observeResize(this.eViewport,listener);this.addDestroyFunc((function(){return unsubscribeFromResize()}))},RowContainerCtrl.prototype.isViewportVisible=function(){return isVisible(this.eViewport)},RowContainerCtrl.prototype.isViewportHScrollShowing=function(){return isHorizontalScrollShowing(this.eViewport)},RowContainerCtrl.prototype.getViewportScrollLeft=function(){return getScrollLeft(this.eViewport,this.enableRtl)},RowContainerCtrl.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsWrapper.isAlwaysShowHorizontalScroll()||isHorizontalScrollShowing(this.eViewport)},RowContainerCtrl.prototype.getViewportElement=function(){return this.eViewport},RowContainerCtrl.prototype.setContainerTranslateX=function(amount){this.eContainer.style.transform="translateX("+amount+"px)"},RowContainerCtrl.prototype.getHScrollPosition=function(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}},RowContainerCtrl.prototype.setCenterViewportScrollLeft=function(value){setScrollLeft(this.eViewport,value,this.enableRtl)},RowContainerCtrl.prototype.onDisplayedRowsChanged=function(){var _this=this,fullWithContainer=this.name===exports.RowContainerName.TOP_FULL_WIDTH||this.name===exports.RowContainerName.BOTTOM_FULL_WIDTH||this.name===exports.RowContainerName.FULL_WIDTH,rowsThisContainer=this.getRowCtrls().filter((function(rowCtrl){var fullWidthRow=rowCtrl.isFullWidth(),printLayout=_this.gridOptionsWrapper.getDomLayout()===Constants.DOM_LAYOUT_PRINT,embedFW=_this.embedFullWidthRows||printLayout;return fullWithContainer?!embedFW&&fullWidthRow:embedFW||!fullWidthRow}));this.comp.setRowCtrls(rowsThisContainer)},RowContainerCtrl.prototype.getRowCtrls=function(){switch(this.name){case exports.RowContainerName.TOP_CENTER:case exports.RowContainerName.TOP_LEFT:case exports.RowContainerName.TOP_RIGHT:case exports.RowContainerName.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case exports.RowContainerName.BOTTOM_CENTER:case exports.RowContainerName.BOTTOM_LEFT:case exports.RowContainerName.BOTTOM_RIGHT:case exports.RowContainerName.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getRowCtrls()}},__decorate$W([Autowired("scrollVisibleService")],RowContainerCtrl.prototype,"scrollVisibleService",void 0),__decorate$W([Autowired("dragService")],RowContainerCtrl.prototype,"dragService",void 0),__decorate$W([Autowired("ctrlsService")],RowContainerCtrl.prototype,"ctrlsService",void 0),__decorate$W([Autowired("columnModel")],RowContainerCtrl.prototype,"columnModel",void 0),__decorate$W([Autowired("resizeObserverService")],RowContainerCtrl.prototype,"resizeObserverService",void 0),__decorate$W([Autowired("rowRenderer")],RowContainerCtrl.prototype,"rowRenderer",void 0),__decorate$W([PostConstruct],RowContainerCtrl.prototype,"postConstruct",null),RowContainerCtrl}(BeanStub),__extends$18=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$X=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GRID_BODY_TEMPLATE='<div class="ag-root ag-unselectable" role="grid">\n        <ag-header-root ref="gridHeader"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <ag-row-container ref="topLeftContainer" name="'+exports.RowContainerName.TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="'+exports.RowContainerName.TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="'+exports.RowContainerName.TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="'+exports.RowContainerName.TOP_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n            <ag-row-container ref="leftContainer" name="'+exports.RowContainerName.LEFT+'"></ag-row-container>\n            <ag-row-container ref="centerContainer" name="'+exports.RowContainerName.CENTER+'"></ag-row-container>\n            <ag-row-container ref="rightContainer" name="'+exports.RowContainerName.RIGHT+'"></ag-row-container>\n            <ag-row-container ref="fullWidthContainer" name="'+exports.RowContainerName.FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <ag-row-container ref="bottomLeftContainer" name="'+exports.RowContainerName.BOTTOM_LEFT+'"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="'+exports.RowContainerName.BOTTOM_CENTER+'"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="'+exports.RowContainerName.BOTTOM_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="'+exports.RowContainerName.BOTTOM_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>',GridBodyComp=function(_super){function GridBodyComp(){return _super.call(this,GRID_BODY_TEMPLATE)||this}return __extends$18(GridBodyComp,_super),GridBodyComp.prototype.init=function(){var _this=this,setHeight=function(height,element){var heightString=height+"px";element.style.minHeight=heightString,element.style.height=heightString},compProxy={setRowAnimationCssOnBodyViewport:function(cssClass,animate){return _this.setRowAnimationCssOnBodyViewport(cssClass,animate)},setColumnCount:function(count){return setAriaColCount(_this.getGui(),count)},setRowCount:function(count){return setAriaRowCount(_this.getGui(),count)},setTopHeight:function(height){return setHeight(height,_this.eTop)},setBottomHeight:function(height){return setHeight(height,_this.eBottom)},setTopDisplay:function(display){return _this.eTop.style.display=display},setBottomDisplay:function(display){return _this.eBottom.style.display=display},setColumnMovingCss:function(cssClass,flag){return _this.addOrRemoveCssClass("ag-column-moving",flag)},updateLayoutClasses:function(cssClass,params){var bodyViewportClassList=_this.eBodyViewport.classList;bodyViewportClassList.toggle(exports.LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),bodyViewportClassList.toggle(exports.LayoutCssClasses.NORMAL,params.normal),bodyViewportClassList.toggle(exports.LayoutCssClasses.PRINT,params.print),_this.addOrRemoveCssClass(exports.LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),_this.addOrRemoveCssClass(exports.LayoutCssClasses.NORMAL,params.normal),_this.addOrRemoveCssClass(exports.LayoutCssClasses.PRINT,params.print)},setAlwaysVerticalScrollClass:function(cssClass,on){return _this.eBodyViewport.classList.toggle("ag-force-vertical-scroll",on)},registerBodyViewportResizeListener:function(listener){var unsubscribeFromResize=_this.resizeObserverService.observeResize(_this.eBodyViewport,listener);_this.addDestroyFunc((function(){return unsubscribeFromResize()}))},setPinnedTopBottomOverflowY:function(overflow){return _this.eTop.style.overflowY=_this.eBottom.style.overflowY=overflow},setCellSelectableCss:function(cssClass,selectable){[_this.eTop,_this.eBodyViewport,_this.eBottom].forEach((function(ct){return ct.classList.toggle("ag-selectable",selectable)}))}};this.ctrl=this.createManagedBean(new GridBodyCtrl),this.ctrl.setComp(compProxy,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom),(this.rangeService||this.gridOptionsWrapper.isRowSelectionMulti())&&setAriaMultiSelectable(this.getGui(),!0)},GridBodyComp.prototype.setRowAnimationCssOnBodyViewport=function(cssClass,animateRows){var bodyViewportClassList=this.eBodyViewport.classList;bodyViewportClassList.toggle(exports.RowAnimationCssClasses.ANIMATION_ON,animateRows),bodyViewportClassList.toggle(exports.RowAnimationCssClasses.ANIMATION_OFF,!animateRows)},GridBodyComp.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},__decorate$X([Autowired("resizeObserverService")],GridBodyComp.prototype,"resizeObserverService",void 0),__decorate$X([Optional("rangeService")],GridBodyComp.prototype,"rangeService",void 0),__decorate$X([RefSelector("eBodyViewport")],GridBodyComp.prototype,"eBodyViewport",void 0),__decorate$X([RefSelector("eTop")],GridBodyComp.prototype,"eTop",void 0),__decorate$X([RefSelector("eBottom")],GridBodyComp.prototype,"eBottom",void 0),__decorate$X([RefSelector("gridHeader")],GridBodyComp.prototype,"headerRootComp",void 0),__decorate$X([PostConstruct],GridBodyComp.prototype,"init",null),GridBodyComp}(Component),__extends$19=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ScrollVisibleService=function(_super){function ScrollVisibleService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$19(ScrollVisibleService,_super),ScrollVisibleService.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},ScrollVisibleService.prototype.onDisplayedColumnsChanged=function(){this.update()},ScrollVisibleService.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},ScrollVisibleService.prototype.update=function(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)},ScrollVisibleService.prototype.updateImpl=function(){var centerRowCtrl=this.ctrlsService.getCenterRowContainerCtrl();if(centerRowCtrl){var params={horizontalScrollShowing:centerRowCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(params)}},ScrollVisibleService.prototype.setScrollsVisible=function(params){if(this.horizontalScrollShowing!==params.horizontalScrollShowing||this.verticalScrollShowing!==params.verticalScrollShowing){this.horizontalScrollShowing=params.horizontalScrollShowing,this.verticalScrollShowing=params.verticalScrollShowing;var event_1={type:Events.EVENT_SCROLL_VISIBILITY_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event_1)}},ScrollVisibleService.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},ScrollVisibleService.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},__decorate$Y([Autowired("columnApi")],ScrollVisibleService.prototype,"columnApi",void 0),__decorate$Y([Autowired("gridApi")],ScrollVisibleService.prototype,"gridApi",void 0),__decorate$Y([Autowired("ctrlsService")],ScrollVisibleService.prototype,"ctrlsService",void 0),__decorate$Y([PostConstruct],ScrollVisibleService.prototype,"postConstruct",null),ScrollVisibleService=__decorate$Y([Bean("scrollVisibleService")],ScrollVisibleService)}(BeanStub),__extends$1a=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MouseEventService=function(_super){function MouseEventService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.gridInstanceId=MouseEventService_1.gridInstanceSequence.next(),_this}var MouseEventService_1;return __extends$1a(MouseEventService,_super),MouseEventService_1=MouseEventService,MouseEventService.prototype.stampTopLevelGridCompWithGridInstance=function(eGridDiv){eGridDiv[MouseEventService_1.GRID_DOM_KEY]=this.gridInstanceId},MouseEventService.prototype.getRenderedCellForEvent=function(event){return getCtrlForEvent(this.gridOptionsWrapper,event,CellCtrl.DOM_DATA_KEY_CELL_CTRL)},MouseEventService.prototype.isEventFromThisGrid=function(event){return this.isElementInThisGrid(event.target)},MouseEventService.prototype.isElementInThisGrid=function(element){for(var pointer=element;pointer;){var instanceId=pointer[MouseEventService_1.GRID_DOM_KEY];if(exists(instanceId))return instanceId===this.gridInstanceId;pointer=pointer.parentElement}return!1},MouseEventService.prototype.getCellPositionForEvent=function(event){var cellComp=this.getRenderedCellForEvent(event);return cellComp?cellComp.getCellPosition():null},MouseEventService.prototype.getNormalisedPosition=function(event){var x,y,gridPanelHasScrolls=this.gridOptionsWrapper.getDomLayout()===Constants.DOM_LAYOUT_NORMAL,e=event;if(null!=e.clientX||null!=e.clientY?(x=e.clientX,y=e.clientY):(x=e.x,y=e.y),gridPanelHasScrolls){var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),vRange=gridBodyCon.getScrollFeature().getVScrollPosition();x+=gridBodyCon.getScrollFeature().getHScrollPosition().left,y+=vRange.top}return{x,y}},MouseEventService.gridInstanceSequence=new NumberSequence,MouseEventService.GRID_DOM_KEY="__ag_grid_instance",__decorate$Z([Autowired("ctrlsService")],MouseEventService.prototype,"ctrlsService",void 0),MouseEventService=MouseEventService_1=__decorate$Z([Bean("mouseEventService")],MouseEventService)}(BeanStub),__extends$1b=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$c=function(){return __assign$c=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$c.apply(this,arguments)},__decorate$_=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},NavigationService=function(_super){function NavigationService(){var _this=_super.call(this)||this;return _this.onPageDown=throttle(_this.onPageDown,100),_this.onPageUp=throttle(_this.onPageUp,100),_this}return __extends$1b(NavigationService,_super),NavigationService.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){_this.gridBodyCon=p.gridBodyCtrl}))},NavigationService.prototype.handlePageScrollingKey=function(event){var key=event.key,alt=event.altKey,ctrl=event.ctrlKey||event.metaKey,rangeServiceShouldHandleShift=!!this.rangeService&&event.shiftKey,currentCell=this.mouseEventService.getCellPositionForEvent(event);if(!currentCell)return!1;var processed=!1;switch(key){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:ctrl||alt||(this.onHomeOrEndKey(key),processed=!0);break;case KeyCode.LEFT:case KeyCode.RIGHT:case KeyCode.UP:case KeyCode.DOWN:!ctrl||alt||rangeServiceShouldHandleShift||(this.onCtrlUpDownLeftRight(key,currentCell),processed=!0);break;case KeyCode.PAGE_DOWN:ctrl||alt||(this.onPageDown(currentCell),processed=!0);break;case KeyCode.PAGE_UP:ctrl||alt||(this.onPageUp(currentCell),processed=!0)}return processed&&event.preventDefault(),processed},NavigationService.prototype.navigateTo=function(navigateParams){var scrollIndex=navigateParams.scrollIndex,scrollType=navigateParams.scrollType,scrollColumn=navigateParams.scrollColumn,focusIndex=navigateParams.focusIndex,focusColumn=navigateParams.focusColumn;if(exists(scrollColumn)&&!scrollColumn.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(scrollColumn),exists(scrollIndex)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(scrollIndex,scrollType),this.animationFrameService.flushAllFrames(),this.focusService.setFocusedCell(focusIndex,focusColumn,null,!0),this.rangeService){var cellPosition={rowIndex:focusIndex,rowPinned:null,column:focusColumn};this.rangeService.setRangeToCell(cellPosition)}},NavigationService.prototype.onPageDown=function(gridCell){var scrollPosition=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),pixelsInOnePage=this.getViewportHeight(),pagingPixelOffset=this.paginationProxy.getPixelOffset(),currentPageBottomPixel=scrollPosition.top+pixelsInOnePage,currentPageBottomRow=this.paginationProxy.getRowIndexAtPixel(currentPageBottomPixel+pagingPixelOffset);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(gridCell,currentPageBottomRow):this.navigateToNextPage(gridCell,currentPageBottomRow)},NavigationService.prototype.onPageUp=function(gridCell){var scrollPosition=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),pagingPixelOffset=this.paginationProxy.getPixelOffset(),currentPageTopPixel=scrollPosition.top,currentPageTopRow=this.paginationProxy.getRowIndexAtPixel(currentPageTopPixel+pagingPixelOffset);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(gridCell,currentPageTopRow,!0):this.navigateToNextPage(gridCell,currentPageTopRow,!0)},NavigationService.prototype.navigateToNextPage=function(gridCell,scrollIndex,up){var _a,_b;void 0===up&&(up=!1);var scrollType,pixelsInOnePage=this.getViewportHeight(),firstRow=this.paginationProxy.getPageFirstRow(),lastRow=this.paginationProxy.getPageLastRow(),pagingPixelOffset=this.paginationProxy.getPixelOffset(),currentRowNode=this.paginationProxy.getRow(gridCell.rowIndex),rowPixelDiff=up?(null===(_a=currentRowNode)||void 0===_a?void 0:_a.rowHeight)-pixelsInOnePage-pagingPixelOffset:pixelsInOnePage-pagingPixelOffset,nextCellPixel=(null===(_b=currentRowNode)||void 0===_b?void 0:_b.rowTop)+rowPixelDiff,focusIndex=this.paginationProxy.getRowIndexAtPixel(nextCellPixel+pagingPixelOffset);if(focusIndex===gridCell.rowIndex){var diff=up?-1:1;scrollIndex=focusIndex=gridCell.rowIndex+diff}up?(scrollType="bottom",focusIndex<firstRow&&(focusIndex=firstRow),scrollIndex<firstRow&&(scrollIndex=firstRow)):(scrollType="top",focusIndex>lastRow&&(focusIndex=lastRow),scrollIndex>lastRow&&(scrollIndex=lastRow)),this.isRowTallerThanView(focusIndex)&&(scrollIndex=focusIndex,scrollType="top"),this.navigateTo({scrollIndex,scrollType,scrollColumn:null,focusIndex,focusColumn:gridCell.column})},NavigationService.prototype.navigateToNextPageWithAutoHeight=function(gridCell,scrollIndex,up){var _this=this;void 0===up&&(up=!1),this.navigateTo({scrollIndex,scrollType:up?"bottom":"top",scrollColumn:null,focusIndex:scrollIndex,focusColumn:gridCell.column}),setTimeout((function(){var focusIndex=_this.getNextFocusIndexForAutoHeight(gridCell,up);_this.navigateTo({scrollIndex,scrollType:up?"bottom":"top",scrollColumn:null,focusIndex,focusColumn:gridCell.column})}),50)},NavigationService.prototype.getNextFocusIndexForAutoHeight=function(gridCell,up){var _a;void 0===up&&(up=!1);for(var step=up?-1:1,pixelsInOnePage=this.getViewportHeight(),lastRowIndex=this.paginationProxy.getPageLastRow(),pixelSum=0,currentIndex=gridCell.rowIndex;currentIndex>=0&&currentIndex<=lastRowIndex;){var currentCell=this.paginationProxy.getRow(currentIndex);if(currentCell){var currentCellHeight=null!=(_a=currentCell.rowHeight)?_a:0;if(pixelSum+currentCellHeight>pixelsInOnePage)break;pixelSum+=currentCellHeight}currentIndex+=step}return Math.max(0,Math.min(currentIndex,lastRowIndex))},NavigationService.prototype.getViewportHeight=function(){var scrollPosition=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),scrollbarWidth=this.gridOptionsWrapper.getScrollbarWidth(),pixelsInOnePage=scrollPosition.bottom-scrollPosition.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(pixelsInOnePage-=scrollbarWidth),pixelsInOnePage},NavigationService.prototype.isRowTallerThanView=function(rowIndex){var rowNode=this.paginationProxy.getRow(rowIndex);if(!rowNode)return!1;var rowHeight=rowNode.rowHeight;return"number"==typeof rowHeight&&rowHeight>this.getViewportHeight()},NavigationService.prototype.onCtrlUpDownLeftRight=function(key,gridCell){var cellToFocus=this.cellNavigationService.getNextCellToFocus(key,gridCell,!0),rowIndex=cellToFocus.rowIndex,column=cellToFocus.column;this.navigateTo({scrollIndex:rowIndex,scrollType:null,scrollColumn:column,focusIndex:rowIndex,focusColumn:column})},NavigationService.prototype.onHomeOrEndKey=function(key){var homeKey=key===KeyCode.PAGE_HOME,allColumns=this.columnModel.getAllDisplayedColumns(),columnToSelect=homeKey?allColumns[0]:last(allColumns),scrollIndex=homeKey?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex,scrollType:null,scrollColumn:columnToSelect,focusIndex:scrollIndex,focusColumn:columnToSelect})},NavigationService.prototype.onTabKeyDown=function(previous,keyboardEvent){var backwards=keyboardEvent.shiftKey;if(this.tabToNextCellCommon(previous,backwards,keyboardEvent))keyboardEvent.preventDefault();else if(backwards){var _a=previous.getRowPosition(),rowIndex=_a.rowIndex;(_a.rowPinned?0===rowIndex:rowIndex===this.paginationProxy.getPageFirstRow())&&(keyboardEvent.preventDefault(),this.focusService.focusLastHeader(keyboardEvent))}else previous instanceof CellCtrl&&previous.focusCell(!0),this.focusService.focusNextGridCoreContainer(backwards)&&keyboardEvent.preventDefault()},NavigationService.prototype.tabToNextCell=function(backwards,event){var focusedCell=this.focusService.getFocusedCell();if(!focusedCell)return!1;var cellOrRow=this.getCellByPosition(focusedCell);return!!(cellOrRow||(cellOrRow=this.rowRenderer.getRowByPosition(focusedCell))&&cellOrRow.isFullWidth())&&this.tabToNextCellCommon(cellOrRow,backwards,event)},NavigationService.prototype.tabToNextCellCommon=function(previous,backwards,event){var editing=previous.isEditing();if(!editing&&previous instanceof CellCtrl){var row=previous.getRowCtrl();row&&(editing=row.isEditing())}return(editing?this.gridOptionsWrapper.isFullRowEdit()?this.moveToNextEditingRow(previous,backwards,event):this.moveToNextEditingCell(previous,backwards,event):this.moveToNextCellNotEditing(previous,backwards))||!!this.focusService.getFocusedHeader()},NavigationService.prototype.moveToNextEditingCell=function(previousCell,backwards,event){void 0===event&&(event=null);var previousPos=previousCell.getCellPosition();previousCell.stopEditing();var nextCell=this.findNextCellToFocusOn(previousPos,backwards,!0);return null!=nextCell&&(nextCell.startEditing(null,null,!0,event),nextCell.focusCell(!1),!0)},NavigationService.prototype.moveToNextEditingRow=function(previousCell,backwards,event){void 0===event&&(event=null);var previousPos=previousCell.getCellPosition(),nextCell=this.findNextCellToFocusOn(previousPos,backwards,!0);if(null==nextCell)return!1;var nextPos=nextCell.getCellPosition(),previousEditable=this.isCellEditable(previousPos),nextEditable=this.isCellEditable(nextPos),rowsMatch=nextPos&&previousPos.rowIndex===nextPos.rowIndex&&previousPos.rowPinned===nextPos.rowPinned;(previousEditable&&previousCell.setFocusOutOnEditor(),rowsMatch)||(previousCell.getRowCtrl().stopEditing(),nextCell.getRowCtrl().startRowEditing(void 0,void 0,void 0,event));return nextEditable?(nextCell.setFocusInOnEditor(),nextCell.focusCell()):nextCell.focusCell(!0),!0},NavigationService.prototype.moveToNextCellNotEditing=function(previousCell,backwards){var cellPos,displayedColumns=this.columnModel.getAllDisplayedColumns();cellPos=previousCell instanceof RowCtrl?__assign$c(__assign$c({},previousCell.getRowPosition()),{column:backwards?displayedColumns[0]:last(displayedColumns)}):previousCell.getCellPosition();var nextCell=this.findNextCellToFocusOn(cellPos,backwards,!1);if(nextCell instanceof CellCtrl)nextCell.focusCell(!0);else if(nextCell)return this.tryToFocusFullWidthRow(nextCell.getRowPosition(),backwards);return exists(nextCell)},NavigationService.prototype.findNextCellToFocusOn=function(previousPosition,backwards,startEditing){for(var nextPosition=previousPosition;;){previousPosition!==nextPosition&&(previousPosition=nextPosition),backwards||(nextPosition=this.getLastCellOfColSpan(nextPosition)),nextPosition=this.cellNavigationService.getNextTabbedCell(nextPosition,backwards);var userFunc=this.gridOptionsWrapper.getTabToNextCellFunc();if(exists(userFunc)){var userCell=userFunc({backwards,editing:startEditing,previousCellPosition:previousPosition,nextCellPosition:nextPosition||null});exists(userCell)?(userCell.floating&&(doOnce((function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")}),"no floating in userCell"),userCell.rowPinned=userCell.floating),nextPosition={rowIndex:userCell.rowIndex,column:userCell.column,rowPinned:userCell.rowPinned}):nextPosition=null}if(!nextPosition)return null;if(nextPosition.rowIndex<0){var headerLen=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:headerLen+nextPosition.rowIndex,column:nextPosition.column}}),null}var fullRowEdit=this.gridOptionsWrapper.isFullRowEdit();if(startEditing&&!fullRowEdit)if(!this.isCellEditable(nextPosition))continue;this.ensureCellVisible(nextPosition);var nextCell=this.getCellByPosition(nextPosition);if(nextCell){if(!nextCell.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(nextPosition),nextCell}else{var row=this.rowRenderer.getRowByPosition(nextPosition);if(row&&row.isFullWidth())return row}}},NavigationService.prototype.isCellEditable=function(cell){var rowNode=this.lookupRowNodeForCell(cell);return!!rowNode&&cell.column.isCellEditable(rowNode)},NavigationService.prototype.getCellByPosition=function(cellPosition){var rowCtrl=this.rowRenderer.getRowByPosition(cellPosition);return rowCtrl?rowCtrl.getCellCtrl(cellPosition.column):null},NavigationService.prototype.lookupRowNodeForCell=function(cell){return cell.rowPinned===Constants.PINNED_TOP?this.pinnedRowModel.getPinnedTopRow(cell.rowIndex):cell.rowPinned===Constants.PINNED_BOTTOM?this.pinnedRowModel.getPinnedBottomRow(cell.rowIndex):this.paginationProxy.getRow(cell.rowIndex)},NavigationService.prototype.navigateToNextCell=function(event,key,currentCell,allowUserOverride){for(var nextCell=currentCell,hitEdgeOfGrid=!1;nextCell&&(nextCell===currentCell||!this.isValidNavigateCell(nextCell));)this.gridOptionsWrapper.isEnableRtl()?key===KeyCode.LEFT&&(nextCell=this.getLastCellOfColSpan(nextCell)):key===KeyCode.RIGHT&&(nextCell=this.getLastCellOfColSpan(nextCell)),hitEdgeOfGrid=missing(nextCell=this.cellNavigationService.getNextCellToFocus(key,nextCell));if(hitEdgeOfGrid&&event&&event.key===KeyCode.UP&&(nextCell={rowIndex:-1,rowPinned:null,column:currentCell.column}),allowUserOverride){var userFunc=this.gridOptionsWrapper.getNavigateToNextCellFunc();if(exists(userFunc)){var userCell=userFunc({key,previousCellPosition:currentCell,nextCellPosition:nextCell||null,event});exists(userCell)?(userCell.floating&&(doOnce((function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")}),"no floating in userCell"),userCell.rowPinned=userCell.floating),nextCell={rowPinned:userCell.rowPinned,rowIndex:userCell.rowIndex,column:userCell.column}):nextCell=null}}if(nextCell)if(nextCell.rowIndex<0){var headerLen=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:headerLen+nextCell.rowIndex,column:currentCell.column},event:event||void 0})}else{var normalisedPosition=this.getNormalisedPosition(nextCell);normalisedPosition?this.focusPosition(normalisedPosition):this.tryToFocusFullWidthRow(nextCell)}},NavigationService.prototype.getNormalisedPosition=function(cellPosition){this.ensureCellVisible(cellPosition);var cellComp=this.getCellByPosition(cellPosition);return cellComp?(cellPosition=cellComp.getCellPosition(),this.ensureCellVisible(cellPosition),cellPosition):null},NavigationService.prototype.tryToFocusFullWidthRow=function(position,backwards){void 0===backwards&&(backwards=!1);var displayedColumns=this.columnModel.getAllDisplayedColumns(),rowComp=this.rowRenderer.getRowByPosition(position);if(!rowComp||!rowComp.isFullWidth())return!1;var currentCellFocused=this.focusService.getFocusedCell(),cellPosition={rowIndex:position.rowIndex,rowPinned:position.rowPinned,column:position.column||(backwards?last(displayedColumns):displayedColumns[0])};this.focusPosition(cellPosition);var fromBelow=null!=currentCellFocused&&this.rowPositionUtils.before(cellPosition,currentCellFocused),focusEvent={type:Events.EVENT_FULL_WIDTH_ROW_FOCUSED,api:this.gridApi,columnApi:this.columnApi,rowIndex:cellPosition.rowIndex,rowPinned:cellPosition.rowPinned,column:cellPosition.column,isFullWidthCell:!0,floating:cellPosition.rowPinned,fromBelow};return this.eventService.dispatchEvent(focusEvent),!0},NavigationService.prototype.focusPosition=function(cellPosition){this.focusService.setFocusedCell(cellPosition.rowIndex,cellPosition.column,cellPosition.rowPinned,!0),this.rangeService&&this.rangeService.setRangeToCell(cellPosition)},NavigationService.prototype.isValidNavigateCell=function(cell){return!!this.rowPositionUtils.getRowNode(cell)},NavigationService.prototype.getLastCellOfColSpan=function(cell){var cellCtrl=this.getCellByPosition(cell);if(!cellCtrl)return cell;var colSpanningList=cellCtrl.getColSpanningList();return 1===colSpanningList.length?cell:{rowIndex:cell.rowIndex,column:last(colSpanningList),rowPinned:cell.rowPinned}},NavigationService.prototype.ensureCellVisible=function(gridCell){missing(gridCell.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(gridCell.rowIndex),gridCell.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(gridCell.column),this.gridBodyCon.getScrollFeature().horizontallyScrollHeaderCenterAndFloatingCenter(),this.animationFrameService.flushAllFrames()},__decorate$_([Autowired("columnApi")],NavigationService.prototype,"columnApi",void 0),__decorate$_([Autowired("gridApi")],NavigationService.prototype,"gridApi",void 0),__decorate$_([Autowired("mouseEventService")],NavigationService.prototype,"mouseEventService",void 0),__decorate$_([Autowired("paginationProxy")],NavigationService.prototype,"paginationProxy",void 0),__decorate$_([Autowired("focusService")],NavigationService.prototype,"focusService",void 0),__decorate$_([Autowired("animationFrameService")],NavigationService.prototype,"animationFrameService",void 0),__decorate$_([Optional("rangeService")],NavigationService.prototype,"rangeService",void 0),__decorate$_([Autowired("columnModel")],NavigationService.prototype,"columnModel",void 0),__decorate$_([Autowired("ctrlsService")],NavigationService.prototype,"ctrlsService",void 0),__decorate$_([Autowired("rowRenderer")],NavigationService.prototype,"rowRenderer",void 0),__decorate$_([Autowired("headerNavigationService")],NavigationService.prototype,"headerNavigationService",void 0),__decorate$_([Autowired("rowPositionUtils")],NavigationService.prototype,"rowPositionUtils",void 0),__decorate$_([Autowired("cellNavigationService")],NavigationService.prototype,"cellNavigationService",void 0),__decorate$_([Autowired("pinnedRowModel")],NavigationService.prototype,"pinnedRowModel",void 0),__decorate$_([PostConstruct],NavigationService.prototype,"postConstruct",null),NavigationService=__decorate$_([Bean("navigationService")],NavigationService)}(BeanStub),__extends$1c=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$$=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PopupEditorWrapper=function(_super){function PopupEditorWrapper(params){var _this=_super.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return _this.params=params,_this}return __extends$1c(PopupEditorWrapper,_super),PopupEditorWrapper.prototype.postConstruct=function(){this.gridOptionsWrapper.setDomData(this.getGui(),PopupEditorWrapper.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},PopupEditorWrapper.prototype.addKeyDownListener=function(){var _this=this,eGui=this.getGui(),params=this.params;this.addManagedListener(eGui,"keydown",(function(event){isUserSuppressingKeyboardEvent(_this.gridOptionsWrapper,event,params.node,params.column,!0)||params.onKeyDown(event)}))},PopupEditorWrapper.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",__decorate$$([PostConstruct],PopupEditorWrapper.prototype,"postConstruct",null),PopupEditorWrapper}(PopupComponent),__extends$1d=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellComp=function(_super){function CellComp(beans,cellCtrl,printLayout,eRow,editingRow){var _this=_super.call(this)||this;_this.rendererVersion=0,_this.editorVersion=0,_this.beans=beans,_this.column=cellCtrl.getColumn(),_this.rowNode=cellCtrl.getRowNode(),_this.rowCtrl=cellCtrl.getRowCtrl(),_this.eRow=eRow,_this.setTemplate('<div comp-id="'+_this.getCompId()+'"/>');var eGui=_this.getGui();_this.forceWrapper=cellCtrl.isForceWrapper(),_this.refreshWrapper(!1);var setAttribute=function(name,value,element){var actualElement=element||eGui;null!=value&&""!=value?actualElement.setAttribute(name,value):actualElement.removeAttribute(name)},compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setUserStyles:function(styles){return addStylesToElement(eGui,styles)},getFocusableElement:function(){return _this.getFocusableElement()},setTabIndex:function(tabIndex){return setAttribute("tabindex",tabIndex.toString())},setRole:function(role){return setAriaRole(eGui,role)},setColId:function(colId){return setAttribute("col-id",colId)},setTitle:function(title){return setAttribute("title",title)},setIncludeSelection:function(include){return _this.includeSelection=include},setIncludeRowDrag:function(include){return _this.includeRowDrag=include},setIncludeDndSource:function(include){return _this.includeDndSource=include},setRenderDetails:function(compDetails,valueToDisplay,force){return _this.setRenderDetails(compDetails,valueToDisplay,force)},setEditDetails:function(compDetails,popup,position){return _this.setEditDetails(compDetails,popup,position)},getCellEditor:function(){return _this.cellEditor||null},getCellRenderer:function(){return _this.cellRenderer||null},getParentOfValue:function(){return _this.getParentOfValue()}};return _this.cellCtrl=cellCtrl,cellCtrl.setComp(compProxy,_this.getGui(),_this.eCellWrapper,printLayout,editingRow),_this}return __extends$1d(CellComp,_super),CellComp.prototype.getParentOfValue=function(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()},CellComp.prototype.setRenderDetails=function(compDetails,valueToDisplay,forceNewCellRendererInstance){if(!(this.cellEditor&&!this.cellEditorPopupWrapper)){this.firstRender=null==this.firstRender;var controlWrapperChanged=this.refreshWrapper(!1);if(compDetails)!(forceNewCellRendererInstance||controlWrapperChanged)&&this.refreshCellRenderer(compDetails)||(this.destroyRenderer(),this.createCellRendererInstance(compDetails));else this.destroyRenderer(),this.insertValueWithoutCellRenderer(valueToDisplay)}},CellComp.prototype.setEditDetails=function(compDetails,popup,position){compDetails?this.createCellEditorInstance(compDetails,popup,position):this.destroyEditor()},CellComp.prototype.removeControls=function(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},CellComp.prototype.refreshWrapper=function(editing){var providingControls=this.includeRowDrag||this.includeDndSource||this.includeSelection,usingWrapper=providingControls||this.forceWrapper,putWrapperIn=usingWrapper&&null==this.eCellWrapper;putWrapperIn&&(this.eCellWrapper=loadTemplate('<div class="ag-cell-wrapper" role="presentation"></div>'),this.getGui().appendChild(this.eCellWrapper));var takeWrapperOut=!usingWrapper&&null!=this.eCellWrapper;takeWrapperOut&&(removeFromParent(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!usingWrapper);var usingCellValue=!editing&&usingWrapper,putCellValueIn=usingCellValue&&null==this.eCellValue;putCellValueIn&&(this.eCellValue=loadTemplate('<span class="ag-cell-value" role="presentation"></span>'),this.eCellWrapper.appendChild(this.eCellValue));var takeCellValueOut=!usingCellValue&&null!=this.eCellValue;takeCellValueOut&&(removeFromParent(this.eCellValue),this.eCellValue=void 0);var templateChanged=putWrapperIn||takeWrapperOut||putCellValueIn||takeCellValueOut;return templateChanged&&this.removeControls(),!editing&&providingControls&&this.addControls(),templateChanged},CellComp.prototype.addControls=function(){var id=this.eCellValue.id="cell-"+this.getCompId(),describedByIds=[];this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&(null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue)),describedByIds.push(this.checkboxSelectionComp.getCheckboxId())),describedByIds.push(id),setAriaDescribedBy(this.getGui(),describedByIds.join(" "))},CellComp.prototype.createCellEditorInstance=function(compDetails,popup,position){var _this=this,versionCopy=this.editorVersion,cellEditorPromise=compDetails.newAgStackInstance();if(cellEditorPromise){var params=compDetails.params;cellEditorPromise.then((function(c){return _this.afterCellEditorCreated(versionCopy,c,params,popup,position)})),missing(this.cellEditor)&&params.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},CellComp.prototype.insertValueWithoutCellRenderer=function(valueToDisplay){var eParent=this.getParentOfValue();clearElement(eParent);var escapedValue=null!=valueToDisplay?escapeString(valueToDisplay):null;null!=escapedValue&&(eParent.innerHTML=escapedValue)},CellComp.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},CellComp.prototype.destroyRenderer=function(){var context=this.beans.context;this.cellRenderer=context.destroyBean(this.cellRenderer),removeFromParent(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},CellComp.prototype.destroyEditor=function(){var context=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=context.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=context.destroyBean(this.cellEditorPopupWrapper),removeFromParent(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},CellComp.prototype.refreshCellRenderer=function(compClassAndParams){if(null==this.cellRenderer||null==this.cellRenderer.refresh)return!1;if(this.cellRendererClass!==compClassAndParams.componentClass)return!1;var result=this.cellRenderer.refresh(compClassAndParams.params);return!0===result||void 0===result},CellComp.prototype.createCellRendererInstance=function(compDetails){var _this=this,angularCompileRows=this.beans.gridOptionsWrapper.isAngularCompileRows(),suppressAnimationFrame=this.beans.gridOptionsWrapper.isSuppressAnimationFrame(),useTaskService=!angularCompileRows&&!suppressAnimationFrame,displayComponentVersionCopy=this.rendererVersion,componentClass=compDetails.componentClass,createCellRendererFunc=function(){if(!(_this.rendererVersion!==displayComponentVersionCopy||!_this.isAlive())){var componentPromise=compDetails.newAgStackInstance(),callback=_this.afterCellRendererCreated.bind(_this,displayComponentVersionCopy,componentClass);componentPromise&&componentPromise.then(callback)}};useTaskService&&this.firstRender?this.beans.animationFrameService.createTask(createCellRendererFunc,this.rowNode.rowIndex,"createTasksP2"):createCellRendererFunc()},CellComp.prototype.getCtrl=function(){return this.cellCtrl},CellComp.prototype.getRowCtrl=function(){return this.rowCtrl},CellComp.prototype.getCellRenderer=function(){return this.cellRenderer},CellComp.prototype.getCellEditor=function(){return this.cellEditor},CellComp.prototype.afterCellRendererCreated=function(cellRendererVersion,cellRendererClass,cellRenderer){if(!this.isAlive()||cellRendererVersion!==this.rendererVersion)this.beans.context.destroyBean(cellRenderer);else if(this.cellRenderer=cellRenderer,this.cellRendererClass=cellRendererClass,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){var eParent=this.getParentOfValue();clearElement(eParent),eParent.appendChild(this.cellRendererGui)}},CellComp.prototype.afterCellEditorCreated=function(requestVersion,cellEditor,params,popup,position){if(requestVersion!==this.editorVersion)this.beans.context.destroyBean(cellEditor);else{if(cellEditor.isCancelBeforeStart&&cellEditor.isCancelBeforeStart())return this.beans.context.destroyBean(cellEditor),void this.cellCtrl.stopEditing();if(!cellEditor.getGui)return console.warn("AG Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),void this.beans.context.destroyBean(cellEditor);this.cellEditor=cellEditor,this.cellEditorGui=cellEditor.getGui(),popup||void 0!==cellEditor.isPopup&&cellEditor.isPopup()?(popup||this.cellCtrl.hackSayEditingInPopup(),this.addPopupCellEditor(params,position)):this.addInCellEditor(),cellEditor.afterGuiAttached&&cellEditor.afterGuiAttached()}},CellComp.prototype.addInCellEditor=function(){var eGui=this.getGui(),eDocument=this.beans.gridOptionsWrapper.getDocument();(eGui.contains(eDocument.activeElement)&&eGui.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui)&&this.getParentOfValue().appendChild(this.cellEditorGui)},CellComp.prototype.addPopupCellEditor=function(params,position){var _this=this;this.beans.gridOptionsWrapper.isFullRowEdit()&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var cellEditor=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new PopupEditorWrapper(params));var ePopupGui=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&ePopupGui.appendChild(this.cellEditorGui);var popupService=this.beans.popupService,useModelPopup=this.beans.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus(),positionToUse=null!=position?position:cellEditor.getPopupPosition?cellEditor.getPopupPosition():"over",positionParams={column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),ePopup:ePopupGui,keepWithinBounds:!0},positionCallback="under"===positionToUse?popupService.positionPopupUnderComponent.bind(popupService,positionParams):popupService.positionPopupOverComponent.bind(popupService,positionParams),translate=this.beans.gridOptionsWrapper.getLocaleTextFunc(),addPopupRes=popupService.addPopup({modal:useModelPopup,eChild:ePopupGui,closeOnEsc:!0,closedCallback:function(){_this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback,ariaLabel:translate("ariaLabelCellEditor","Cell Editor")});addPopupRes&&(this.hideEditorPopup=addPopupRes.hideFunc)},CellComp.prototype.detach=function(){this.eRow.removeChild(this.getGui())},CellComp.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),_super.prototype.destroy.call(this)},CellComp.prototype.clearParentOfValue=function(){var eGui=this.getGui(),eDocument=this.beans.gridOptionsWrapper.getDocument();eGui.contains(eDocument.activeElement)&&eGui.focus({preventScroll:!0}),clearElement(this.getParentOfValue())},CellComp}(Component),__extends$1e=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),RowComp=function(_super){function RowComp(ctrl,beans,containerType){var _this=_super.call(this)||this;_this.cellComps={},_this.beans=beans,_this.rowCtrl=ctrl,_this.setTemplate('<div comp-id="'+_this.getCompId()+'" style="'+_this.getInitialStyle()+'"/>');var eGui=_this.getGui(),style=eGui.style,compProxy={setDomOrder:function(domOrder){return _this.domOrder=domOrder},setCellCtrls:function(cellCtrls){return _this.setCellCtrls(cellCtrls)},showFullWidth:function(compDetails){return _this.showFullWidth(compDetails)},getFullWidthCellRenderer:function(){return _this.getFullWidthCellRenderer()},addOrRemoveCssClass:function(name,on){return _this.addOrRemoveCssClass(name,on)},setUserStyles:function(styles){return addStylesToElement(eGui,styles)},setTop:function(top){return style.top=top},setTransform:function(transform){return style.transform=transform},setRowIndex:function(rowIndex){return eGui.setAttribute("row-index",rowIndex)},setRole:function(role){return setAriaRole(eGui,role)},setRowId:function(rowId){return eGui.setAttribute("row-id",rowId)},setRowBusinessKey:function(businessKey){return eGui.setAttribute("row-business-key",businessKey)},setTabIndex:function(tabIndex){return eGui.setAttribute("tabindex",tabIndex.toString())}};return ctrl.setComp(compProxy,_this.getGui(),containerType),_this}return __extends$1e(RowComp,_super),RowComp.prototype.getInitialStyle=function(){var transform=this.rowCtrl.getInitialTransform(),top=this.rowCtrl.getInitialRowTop();return transform?"transform: "+transform:"top: "+top},RowComp.prototype.showFullWidth=function(compDetails){var _this=this,res=compDetails.newAgStackInstance();res&&res.then((function(cellRenderer){if(_this.isAlive()){var eGui=cellRenderer.getGui();_this.getGui().appendChild(eGui),_this.rowCtrl.setupDetailRowAutoHeight(eGui),_this.setFullWidthRowComp(cellRenderer)}else _this.beans.context.destroyBean(cellRenderer)}))},RowComp.prototype.setCellCtrls=function(cellCtrls){var _this=this,cellsToRemove=Object.assign({},this.cellComps);cellCtrls.forEach((function(cellCtrl){var key=cellCtrl.getInstanceId();null==_this.cellComps[key]?_this.newCellComp(cellCtrl):cellsToRemove[key]=null}));var cellCompsToRemove=getAllValuesInObject(cellsToRemove).filter((function(cellComp){return null!=cellComp}));this.destroyCells(cellCompsToRemove),this.ensureDomOrder(cellCtrls)},RowComp.prototype.ensureDomOrder=function(cellCtrls){var _this=this;if(this.domOrder){var elementsInOrder=[];cellCtrls.forEach((function(cellCtrl){var cellComp=_this.cellComps[cellCtrl.getInstanceId()];cellComp&&elementsInOrder.push(cellComp.getGui())})),setDomChildOrder(this.getGui(),elementsInOrder)}},RowComp.prototype.newCellComp=function(cellCtrl){var cellComp=new CellComp(this.beans,cellCtrl,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[cellCtrl.getInstanceId()]=cellComp,this.getGui().appendChild(cellComp.getGui())},RowComp.prototype.destroy=function(){_super.prototype.destroy.call(this),this.destroyAllCells()},RowComp.prototype.destroyAllCells=function(){var cellsToDestroy=getAllValuesInObject(this.cellComps).filter((function(cp){return null!=cp}));this.destroyCells(cellsToDestroy)},RowComp.prototype.setFullWidthRowComp=function(fullWidthRowComponent){var _this=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=fullWidthRowComponent,this.addDestroyFunc((function(){_this.fullWidthCellRenderer=_this.beans.context.destroyBean(_this.fullWidthCellRenderer)}))},RowComp.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},RowComp.prototype.destroyCells=function(cellComps){var _this=this;cellComps.forEach((function(cellComp){if(cellComp){var instanceId=cellComp.getCtrl().getInstanceId();_this.cellComps[instanceId]===cellComp&&(cellComp.detach(),cellComp.destroy(),_this.cellComps[instanceId]=null)}}))},RowComp}(Component),__extends$1f=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$d=function(){return __assign$d=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$d.apply(this,arguments)},__decorate$10=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};var HeaderRowType,RowContainerComp=function(_super){function RowContainerComp(){var _this=_super.call(this,function templateFactory(){var name=Component.elementGettingCreated.getAttribute("name"),cssClasses=RowContainerCtrl.getRowContainerCssClasses(name),template1=name===exports.RowContainerName.CENTER,template2=name===exports.RowContainerName.TOP_CENTER||name===exports.RowContainerName.BOTTOM_CENTER;return template1?'<div class="'+cssClasses.wrapper+'" ref="eWrapper" role="presentation">\n                <div class="'+cssClasses.viewport+'" ref="eViewport" role="presentation">\n                    <div class="'+cssClasses.container+'" ref="eContainer"></div>\n                </div>\n            </div>':template2?'<div class="'+cssClasses.viewport+'" ref="eViewport" role="presentation">\n                <div class="'+cssClasses.container+'" ref="eContainer"></div>\n            </div>':'<div class="'+cssClasses.container+'" ref="eContainer"></div>'}())||this;return _this.rowComps={},_this.name=Component.elementGettingCreated.getAttribute("name"),_this.type=getRowContainerTypeForName(_this.name),_this}return __extends$1f(RowContainerComp,_super),RowContainerComp.prototype.postConstruct=function(){var _this=this,compProxy={setViewportHeight:function(height){return _this.eViewport.style.height=height},setRowCtrls:function(rowCtrls){return _this.setRowCtrls(rowCtrls)},setDomOrder:function(domOrder){_this.domOrder=domOrder},setContainerWidth:function(width){return _this.eContainer.style.width=width}};this.createManagedBean(new RowContainerCtrl(this.name)).setComp(compProxy,this.eContainer,this.eViewport,this.eWrapper)},RowContainerComp.prototype.preDestroy=function(){this.setRowCtrls([])},RowContainerComp.prototype.setRowCtrls=function(rowCtrls){var _this=this,oldRows=__assign$d({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;rowCtrls.forEach((function(rowCon){var instanceId=rowCon.getInstanceId(),existingRowComp=oldRows[instanceId];if(existingRowComp)_this.rowComps[instanceId]=existingRowComp,delete oldRows[instanceId],_this.ensureDomOrder(existingRowComp.getGui());else{var rowComp=_this.newRowComp(rowCon);_this.rowComps[instanceId]=rowComp,_this.appendRow(rowComp.getGui())}})),getAllValuesInObject(oldRows).forEach((function(oldRowComp){_this.eContainer.removeChild(oldRowComp.getGui()),oldRowComp.destroy()})),setAriaRole(this.eContainer,rowCtrls.length?"rowgroup":"presentation")},RowContainerComp.prototype.appendRow=function(element){this.domOrder?insertWithDomOrder(this.eContainer,element,this.lastPlacedElement):this.eContainer.appendChild(element),this.lastPlacedElement=element},RowContainerComp.prototype.ensureDomOrder=function(eRow){this.domOrder&&(ensureDomOrder(this.eContainer,eRow,this.lastPlacedElement),this.lastPlacedElement=eRow)},RowContainerComp.prototype.newRowComp=function(rowCtrl){RowContainerCtrl.getPinned(this.name);return new RowComp(rowCtrl,this.beans,this.type)},__decorate$10([Autowired("beans")],RowContainerComp.prototype,"beans",void 0),__decorate$10([RefSelector("eViewport")],RowContainerComp.prototype,"eViewport",void 0),__decorate$10([RefSelector("eContainer")],RowContainerComp.prototype,"eContainer",void 0),__decorate$10([RefSelector("eWrapper")],RowContainerComp.prototype,"eWrapper",void 0),__decorate$10([PostConstruct],RowContainerComp.prototype,"postConstruct",null),__decorate$10([PreDestroy],RowContainerComp.prototype,"preDestroy",null),RowContainerComp}(Component),__decorate$11=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},BodyDropPivotTarget=function(){function BodyDropPivotTarget(pinned){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=pinned}return BodyDropPivotTarget.prototype.onDragEnter=function(draggingEvent){var _this=this;if(this.clearColumnsList(),!this.gridOptionsWrapper.isFunctionsReadOnly()){var dragColumns=draggingEvent.dragItem.columns;dragColumns&&dragColumns.forEach((function(column){column.isPrimary()&&(column.isAnyFunctionActive()||(column.isAllowValue()?_this.columnsToAggregate.push(column):column.isAllowRowGroup()?_this.columnsToGroup.push(column):column.isAllowPivot()&&_this.columnsToPivot.push(column)))}))}},BodyDropPivotTarget.prototype.getIconName=function(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?DragAndDropService.ICON_PINNED:DragAndDropService.ICON_MOVE:null},BodyDropPivotTarget.prototype.onDragLeave=function(draggingEvent){this.clearColumnsList()},BodyDropPivotTarget.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},BodyDropPivotTarget.prototype.onDragging=function(draggingEvent){},BodyDropPivotTarget.prototype.onDragStop=function(draggingEvent){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},__decorate$11([Autowired("columnModel")],BodyDropPivotTarget.prototype,"columnModel",void 0),__decorate$11([Autowired("gridOptionsWrapper")],BodyDropPivotTarget.prototype,"gridOptionsWrapper",void 0),BodyDropPivotTarget}(),__decorate$12=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MoveColumnFeature=function(){function MoveColumnFeature(pinned,eContainer){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.pinned=pinned,this.eContainer=eContainer,this.centerContainer=!exists(pinned)}return MoveColumnFeature.prototype.init=function(){var _this=this;this.ctrlsService.whenReady((function(){_this.gridBodyCon=_this.ctrlsService.getGridBodyCtrl()}))},MoveColumnFeature.prototype.getIconName=function(){return this.pinned?DragAndDropService.ICON_PINNED:DragAndDropService.ICON_MOVE},MoveColumnFeature.prototype.onDragEnter=function(draggingEvent){var columns=draggingEvent.dragItem.columns;if(draggingEvent.dragSource.type===exports.DragSourceType.ToolPanel)this.setColumnsVisible(columns,!0,"uiColumnDragged");else{var visibleState_1=draggingEvent.dragItem.visibleState,visibleColumns=(columns||[]).filter((function(column){return visibleState_1[column.getId()]}));this.setColumnsVisible(visibleColumns,!0,"uiColumnDragged")}this.setColumnsPinned(columns,this.pinned,"uiColumnDragged"),this.onDragging(draggingEvent,!0)},MoveColumnFeature.prototype.onDragLeave=function(draggingEvent){if(!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()&&!draggingEvent.fromNudge){var columns=draggingEvent.dragSource.getDragItem().columns;this.setColumnsVisible(columns,!1,"uiColumnDragged")}this.ensureIntervalCleared()},MoveColumnFeature.prototype.setColumnsVisible=function(columns,visible,source){if(void 0===source&&(source="api"),columns){var allowedCols=columns.filter((function(c){return!c.getColDef().lockVisible}));this.columnModel.setColumnsVisible(allowedCols,visible,source)}},MoveColumnFeature.prototype.setColumnsPinned=function(columns,pinned,source){if(void 0===source&&(source="api"),columns){var allowedCols=columns.filter((function(c){return!c.getColDef().lockPinned}));this.columnModel.setColumnsPinned(allowedCols,pinned,source)}},MoveColumnFeature.prototype.onDragStop=function(){this.ensureIntervalCleared()},MoveColumnFeature.prototype.normaliseX=function(x){this.gridOptionsWrapper.isEnableRtl()&&(x=this.eContainer.clientWidth-x);return this.centerContainer&&(x+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),x},MoveColumnFeature.prototype.checkCenterForScrolling=function(xAdjustedForScroll){if(this.centerContainer){var firstVisiblePixel=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),lastVisiblePixel=firstVisiblePixel+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsWrapper.isEnableRtl()?(this.needToMoveRight=xAdjustedForScroll<firstVisiblePixel+50,this.needToMoveLeft=xAdjustedForScroll>lastVisiblePixel-50):(this.needToMoveLeft=xAdjustedForScroll<firstVisiblePixel+50,this.needToMoveRight=xAdjustedForScroll>lastVisiblePixel-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},MoveColumnFeature.prototype.onDragging=function(draggingEvent,fromEnter){var _this=this;if(void 0===fromEnter&&(fromEnter=!1),this.lastDraggingEvent=draggingEvent,!missing(draggingEvent.hDirection)){var mouseXNormalised=this.normaliseX(draggingEvent.x);fromEnter||this.checkCenterForScrolling(mouseXNormalised);var hDirectionNormalised=this.normaliseDirection(draggingEvent.hDirection),dragSourceType=draggingEvent.dragSource.type,columnsToMove=draggingEvent.dragSource.getDragItem().columns;columnsToMove=columnsToMove.filter((function(col){return!col.getColDef().lockPinned||col.getPinned()==_this.pinned})),this.attemptMoveColumns(dragSourceType,columnsToMove,hDirectionNormalised,mouseXNormalised,fromEnter)}},MoveColumnFeature.prototype.normaliseDirection=function(hDirection){if(!this.gridOptionsWrapper.isEnableRtl())return hDirection;switch(hDirection){case exports.HorizontalDirection.Left:return exports.HorizontalDirection.Right;case exports.HorizontalDirection.Right:return exports.HorizontalDirection.Left;default:console.error("AG Grid: Unknown direction "+hDirection)}},MoveColumnFeature.prototype.calculateOldIndex=function(movingCols){var gridCols=this.columnModel.getAllGridColumns(),indexes=sortNumerically(movingCols.map((function(col){return gridCols.indexOf(col)}))),firstIndex=indexes[0];return last(indexes)-firstIndex!==indexes.length-1?null:firstIndex},MoveColumnFeature.prototype.attemptMoveColumns=function(dragSourceType,allMovingColumns,hDirection,mouseX,fromEnter){var draggingLeft=hDirection===exports.HorizontalDirection.Left,draggingRight=hDirection===exports.HorizontalDirection.Right,allMovingColumnsOrdered=allMovingColumns.slice();this.columnModel.sortColumnsLikeGridColumns(allMovingColumnsOrdered);var validMoves=this.calculateValidMoves(allMovingColumnsOrdered,draggingRight,mouseX),oldIndex=this.calculateOldIndex(allMovingColumnsOrdered);if(0!==validMoves.length){var firstValidMove=validMoves[0],constrainDirection=null!==oldIndex&&!fromEnter;if(dragSourceType==exports.DragSourceType.HeaderCell&&(constrainDirection=null!==oldIndex),constrainDirection){if(draggingLeft&&firstValidMove>=oldIndex)return;if(draggingRight&&firstValidMove<=oldIndex)return}for(var i=0;i<validMoves.length;i++){var move=validMoves[i];if(this.columnModel.doesMovePassRules(allMovingColumnsOrdered,move))return void this.columnModel.moveColumns(allMovingColumnsOrdered,move,"uiColumnDragged")}}},MoveColumnFeature.prototype.calculateValidMoves=function(movingCols,draggingRight,mouseX){var isMoveBlocked=this.gridOptionsWrapper.isSuppressMovableColumns()||movingCols.some((function(col){return col.getColDef().suppressMovable}));if(isMoveBlocked)return[];var firstValidMove,allDisplayedCols=this.columnModel.getDisplayedColumns(this.pinned),allGridCols=this.columnModel.getAllGridColumns(),movingDisplayedCols=allDisplayedCols.filter((function(col){return includes(movingCols,col)})),otherDisplayedCols=allDisplayedCols.filter((function(col){return!includes(movingCols,col)})),otherGridCols=allGridCols.filter((function(col){return!includes(movingCols,col)})),displayIndex=0,availableWidth=mouseX;if(draggingRight){var widthOfMovingDisplayedCols_1=0;movingDisplayedCols.forEach((function(col){return widthOfMovingDisplayedCols_1+=col.getActualWidth()})),availableWidth-=widthOfMovingDisplayedCols_1}if(availableWidth>0){for(var i=0;i<otherDisplayedCols.length;i++){if((availableWidth-=otherDisplayedCols[i].getActualWidth())<0)break;displayIndex++}draggingRight&&displayIndex++}if(displayIndex>0){var leftColumn=otherDisplayedCols[displayIndex-1];firstValidMove=otherGridCols.indexOf(leftColumn)+1}else-1===(firstValidMove=otherGridCols.indexOf(otherDisplayedCols[0]))&&(firstValidMove=0);var validMoves=[firstValidMove],numberComparator=function(a,b){return a-b};if(draggingRight){for(var pointer=firstValidMove+1,lastIndex=allGridCols.length-1;pointer<=lastIndex;)validMoves.push(pointer),pointer++;validMoves.sort(numberComparator)}else{pointer=firstValidMove,lastIndex=allGridCols.length-1;for(var displacedCol=allGridCols[pointer];pointer<=lastIndex&&this.isColumnHidden(allDisplayedCols,displacedCol);)pointer++,validMoves.push(pointer),displacedCol=allGridCols[pointer];pointer=firstValidMove-1;for(;pointer>=0;)validMoves.push(pointer),pointer--;validMoves.sort(numberComparator).reverse()}return validMoves},MoveColumnFeature.prototype.isColumnHidden=function(displayedColumns,col){return displayedColumns.indexOf(col)<0},MoveColumnFeature.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_RIGHT,!0))},MoveColumnFeature.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_MOVE))},MoveColumnFeature.prototype.moveInterval=function(){var pixelsToMove;this.intervalCount++,(pixelsToMove=10+5*this.intervalCount)>100&&(pixelsToMove=100);var pixelsMoved=null,scrollFeature=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?pixelsMoved=scrollFeature.scrollHorizontally(-pixelsToMove):this.needToMoveRight&&(pixelsMoved=scrollFeature.scrollHorizontally(pixelsToMove)),0!==pixelsMoved)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var columnsThatCanPin=this.lastDraggingEvent.dragItem.columns.filter((function(c){return!c.getColDef().lockPinned}));if(columnsThatCanPin.length>0&&(this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_PINNED),this.failedMoveAttempts>7)){var pinType=this.needToMoveLeft?Constants.PINNED_LEFT:Constants.PINNED_RIGHT;this.setColumnsPinned(columnsThatCanPin,pinType,"uiColumnDragged"),this.dragAndDropService.nudge()}}},__decorate$12([Autowired("columnModel")],MoveColumnFeature.prototype,"columnModel",void 0),__decorate$12([Autowired("dragAndDropService")],MoveColumnFeature.prototype,"dragAndDropService",void 0),__decorate$12([Autowired("gridOptionsWrapper")],MoveColumnFeature.prototype,"gridOptionsWrapper",void 0),__decorate$12([Autowired("ctrlsService")],MoveColumnFeature.prototype,"ctrlsService",void 0),__decorate$12([PostConstruct],MoveColumnFeature.prototype,"init",null),MoveColumnFeature}(),__extends$1g=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$13=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},BodyDropTarget=function(_super){function BodyDropTarget(pinned,eContainer){var _this=_super.call(this)||this;return _this.pinned=pinned,_this.eContainer=eContainer,_this}return __extends$1g(BodyDropTarget,_super),BodyDropTarget.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){switch(_this.pinned){case Constants.PINNED_LEFT:_this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.leftRowContainerCtrl.getContainerElement()],[p.bottomLeftRowContainerCtrl.getContainerElement()],[p.topLeftRowContainerCtrl.getContainerElement()]];break;case Constants.PINNED_RIGHT:_this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.rightRowContainerCtrl.getContainerElement()],[p.bottomRightRowContainerCtrl.getContainerElement()],[p.topRightRowContainerCtrl.getContainerElement()]];break;default:_this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.centerRowContainerCtrl.getViewportElement()],[p.bottomCenterRowContainerCtrl.getViewportElement()],[p.topCenterRowContainerCtrl.getViewportElement()]]}}))},BodyDropTarget.prototype.isInterestedIn=function(type){return type===exports.DragSourceType.HeaderCell||type===exports.DragSourceType.ToolPanel&&this.gridOptionsWrapper.isAllowDragFromColumnsToolPanel()},BodyDropTarget.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},BodyDropTarget.prototype.getContainer=function(){return this.eContainer},BodyDropTarget.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new MoveColumnFeature(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new BodyDropPivotTarget(this.pinned)),this.dragAndDropService.addDropTarget(this)},BodyDropTarget.prototype.getIconName=function(){return this.currentDropListener.getIconName()},BodyDropTarget.prototype.isDropColumnInPivotMode=function(draggingEvent){return this.columnModel.isPivotMode()&&draggingEvent.dragSource.type===exports.DragSourceType.ToolPanel},BodyDropTarget.prototype.onDragEnter=function(draggingEvent){this.currentDropListener=this.isDropColumnInPivotMode(draggingEvent)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(draggingEvent)},BodyDropTarget.prototype.onDragLeave=function(params){this.currentDropListener.onDragLeave(params)},BodyDropTarget.prototype.onDragging=function(params){this.currentDropListener.onDragging(params)},BodyDropTarget.prototype.onDragStop=function(params){this.currentDropListener.onDragStop(params)},__decorate$13([Autowired("dragAndDropService")],BodyDropTarget.prototype,"dragAndDropService",void 0),__decorate$13([Autowired("columnModel")],BodyDropTarget.prototype,"columnModel",void 0),__decorate$13([Autowired("ctrlsService")],BodyDropTarget.prototype,"ctrlsService",void 0),__decorate$13([PostConstruct],BodyDropTarget.prototype,"postConstruct",null),__decorate$13([PostConstruct],BodyDropTarget.prototype,"init",null),BodyDropTarget}(BeanStub),__read$b=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$8=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$b(arguments[i]));return ar},CssClassApplier=function(){function CssClassApplier(){}return CssClassApplier.getHeaderClassesFromColDef=function(abstractColDef,gridOptionsWrapper,column,columnGroup){return missing(abstractColDef)?[]:this.getColumnClassesFromCollDef(abstractColDef.headerClass,abstractColDef,gridOptionsWrapper,column,columnGroup)},CssClassApplier.getToolPanelClassesFromColDef=function(abstractColDef,gridOptionsWrapper,column,columnGroup){return missing(abstractColDef)?[]:this.getColumnClassesFromCollDef(abstractColDef.toolPanelClass,abstractColDef,gridOptionsWrapper,column,columnGroup)},CssClassApplier.getClassParams=function(abstractColDef,gridOptionsWrapper,column,columnGroup){return{colDef:abstractColDef,column,columnGroup,api:gridOptionsWrapper.getApi(),columnApi:gridOptionsWrapper.getColumnApi(),context:gridOptionsWrapper.getContext()}},CssClassApplier.getColumnClassesFromCollDef=function(classesOrFunc,abstractColDef,gridOptionsWrapper,column,columnGroup){if(missing(classesOrFunc))return[];var classToUse;"function"==typeof classesOrFunc?classToUse=classesOrFunc(this.getClassParams(abstractColDef,gridOptionsWrapper,column,columnGroup)):classToUse=classesOrFunc;return"string"==typeof classToUse?[classToUse]:Array.isArray(classToUse)?__spread$8(classToUse):[]},CssClassApplier}(),__extends$1h=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$14=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderCellComp=function(_super){function HeaderCellComp(ctrl){var _this=_super.call(this,HeaderCellComp.TEMPLATE,ctrl)||this;return _this.headerCompVersion=0,_this.column=ctrl.getColumnGroupChild(),_this.pinned=ctrl.getPinned(),_this}return __extends$1h(HeaderCellComp,_super),HeaderCellComp.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),setAttribute=function(name,value,element){var actualElement=element||eGui;null!=value&&""!=value?actualElement.setAttribute(name,value):actualElement.removeAttribute(name)},compProxy={setWidth:function(width){return eGui.style.width=width},addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setColId:function(id){return setAttribute("col-id",id)},setTitle:function(title){return setAttribute("title",title)},setAriaDescription:function(label){return setAriaDescription(eGui,label)},setAriaSort:function(sort){return sort?setAriaSort(eGui,sort):removeAriaSort(eGui)},setUserCompDetails:function(compDetails){return _this.setUserCompDetails(compDetails)},getUserCompInstance:function(){return _this.headerComp}};this.ctrl.setComp(compProxy,this.getGui(),this.eResize);var selectAllGui=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",selectAllGui)},HeaderCellComp.prototype.destroyHeaderComp=function(){this.headerComp&&(this.getGui().removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},HeaderCellComp.prototype.setUserCompDetails=function(compDetails){var _this=this;this.headerCompVersion++;var versionCopy=this.headerCompVersion;compDetails.newAgStackInstance().then((function(comp){return _this.afterCompCreated(versionCopy,comp)}))},HeaderCellComp.prototype.afterCompCreated=function(version,headerComp){version==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=headerComp,this.headerCompGui=headerComp.getGui(),this.getGui().appendChild(this.headerCompGui),this.ctrl.setDragSource(this.headerCompGui)):this.destroyBean(headerComp)},HeaderCellComp.TEMPLATE='<div class="ag-header-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',__decorate$14([RefSelector("eResize")],HeaderCellComp.prototype,"eResize",void 0),__decorate$14([PostConstruct],HeaderCellComp.prototype,"postConstruct",null),__decorate$14([PreDestroy],HeaderCellComp.prototype,"destroyHeaderComp",null),HeaderCellComp}(AbstractHeaderCellComp),__extends$1i=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$15=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderGroupCellComp=function(_super){function HeaderGroupCellComp(ctrl){return _super.call(this,HeaderGroupCellComp.TEMPLATE,ctrl)||this}return __extends$1i(HeaderGroupCellComp,_super),HeaderGroupCellComp.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),setAttribute=function(key,value){return null!=value?eGui.setAttribute(key,value):eGui.removeAttribute(key)},compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},addOrRemoveResizableCssClass:function(cssClassName,on){return _this.eResize.classList.toggle(cssClassName,on)},setWidth:function(width){return eGui.style.width=width},setColId:function(id){return eGui.setAttribute("col-id",id)},setAriaExpanded:function(expanded){return setAttribute("aria-expanded",expanded)},setTitle:function(title){return setAttribute("title",title)},setUserCompDetails:function(details){return _this.setUserCompDetails(details)}};this.ctrl.setComp(compProxy,eGui,this.eResize)},HeaderGroupCellComp.prototype.setUserCompDetails=function(details){var _this=this;details.newAgStackInstance().then((function(comp){return _this.afterHeaderCompCreated(comp)}))},HeaderGroupCellComp.prototype.afterHeaderCompCreated=function(headerGroupComp){var _this=this,destroyFunc=function(){return _this.destroyBean(headerGroupComp)};this.isAlive()?(this.getGui().appendChild(headerGroupComp.getGui()),this.addDestroyFunc(destroyFunc),this.ctrl.setDragSource(headerGroupComp.getGui())):destroyFunc()},HeaderGroupCellComp.TEMPLATE='<div class="ag-header-group-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',__decorate$15([Autowired("userComponentFactory")],HeaderGroupCellComp.prototype,"userComponentFactory",void 0),__decorate$15([RefSelector("eResize")],HeaderGroupCellComp.prototype,"eResize",void 0),__decorate$15([PostConstruct],HeaderGroupCellComp.prototype,"postConstruct",null),HeaderGroupCellComp}(AbstractHeaderCellComp),__extends$1j=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$16=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};(HeaderRowType=exports.HeaderRowType||(exports.HeaderRowType={})).COLUMN_GROUP="group",HeaderRowType.COLUMN="column",HeaderRowType.FLOATING_FILTER="filter";var ClientSideRowModelSteps,HeaderRowComp=function(_super){function HeaderRowComp(ctrl){var _this=_super.call(this)||this;_this.headerComps={};var extraClass=ctrl.getType()==exports.HeaderRowType.COLUMN_GROUP?"ag-header-row-column-group":ctrl.getType()==exports.HeaderRowType.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return _this.setTemplate('<div class="ag-header-row '+extraClass+'" role="row"></div>'),_this.ctrl=ctrl,_this}return __extends$1j(HeaderRowComp,_super),HeaderRowComp.prototype.init=function(){var _this=this,compProxy={setTransform:function(transform){return _this.getGui().style.transform=transform},setHeight:function(height){return _this.getGui().style.height=height},setTop:function(top){return _this.getGui().style.top=top},setHeaderCtrls:function(ctrls){return _this.setHeaderCtrls(ctrls)},setWidth:function(width){return _this.getGui().style.width=width},setAriaRowIndex:function(rowIndex){return setAriaRowIndex(_this.getGui(),rowIndex)}};this.ctrl.setComp(compProxy)},HeaderRowComp.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([])},HeaderRowComp.prototype.setHeaderCtrls=function(ctrls){var _this=this;if(this.isAlive()){var oldComps=this.headerComps;if(this.headerComps={},ctrls.forEach((function(ctrl){var id=ctrl.getInstanceId(),comp=oldComps[id];delete oldComps[id],null==comp&&(comp=_this.createHeaderComp(ctrl),_this.getGui().appendChild(comp.getGui())),_this.headerComps[id]=comp})),iterateObject(oldComps,(function(id,comp){_this.getGui().removeChild(comp.getGui()),_this.destroyBean(comp)})),this.gridOptionsWrapper.isEnsureDomOrder()){var comps=getAllValuesInObject(this.headerComps);comps.sort((function(a,b){return a.getCtrl().getColumnGroupChild().getLeft()-b.getCtrl().getColumnGroupChild().getLeft()}));var elementsInOrder=comps.map((function(c){return c.getGui()}));setDomChildOrder(this.getGui(),elementsInOrder)}}},HeaderRowComp.prototype.createHeaderComp=function(headerCtrl){var result;switch(this.ctrl.getType()){case exports.HeaderRowType.COLUMN_GROUP:result=new HeaderGroupCellComp(headerCtrl);break;case exports.HeaderRowType.FLOATING_FILTER:result=new HeaderFilterCellComp(headerCtrl);break;default:result=new HeaderCellComp(headerCtrl)}return this.createBean(result),result.setParentComponent(this),result},__decorate$16([PostConstruct],HeaderRowComp.prototype,"init",null),__decorate$16([PreDestroy],HeaderRowComp.prototype,"destroyHeaderCtrls",null),HeaderRowComp}(Component),__extends$1k=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$17=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},instanceIdSequence$3=0,AbstractHeaderCellCtrl=function(_super){function AbstractHeaderCellCtrl(columnGroupChild,parentRowCtrl){var _this=_super.call(this)||this;return _this.lastFocusEvent=null,_this.columnGroupChild=columnGroupChild,_this.parentRowCtrl=parentRowCtrl,_this.instanceId=columnGroupChild.getUniqueId()+"-"+instanceIdSequence$3++,_this}return __extends$1k(AbstractHeaderCellCtrl,_super),AbstractHeaderCellCtrl.prototype.shouldStopEventPropagation=function(e){var _a=this.focusService.getFocusedHeader(),headerRowIndex=_a.headerRowIndex,column=_a.column;return isUserSuppressingHeaderKeyboardEvent(this.gridOptionsWrapper,e,headerRowIndex,column)},AbstractHeaderCellCtrl.prototype.setGui=function(eGui){this.eGui=eGui,this.addDomData()},AbstractHeaderCellCtrl.prototype.addDomData=function(){var _this=this,key=AbstractHeaderCellCtrl.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsWrapper.setDomData(this.eGui,key,this),this.addDestroyFunc((function(){return _this.gridOptionsWrapper.setDomData(_this.eGui,key,null)}))},AbstractHeaderCellCtrl.prototype.getGui=function(){return this.eGui},AbstractHeaderCellCtrl.prototype.focus=function(event){return!!this.eGui&&(this.lastFocusEvent=event||null,this.eGui.focus(),!0)},AbstractHeaderCellCtrl.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},AbstractHeaderCellCtrl.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},AbstractHeaderCellCtrl.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},AbstractHeaderCellCtrl.prototype.getInstanceId=function(){return this.instanceId},AbstractHeaderCellCtrl.prototype.getColumnGroupChild=function(){return this.columnGroupChild},AbstractHeaderCellCtrl.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",__decorate$17([Autowired("focusService")],AbstractHeaderCellCtrl.prototype,"focusService",void 0),AbstractHeaderCellCtrl}(BeanStub);(ClientSideRowModelSteps=exports.ClientSideRowModelSteps||(exports.ClientSideRowModelSteps={})).EVERYTHING="group",ClientSideRowModelSteps.FILTER="filter",ClientSideRowModelSteps.SORT="sort",ClientSideRowModelSteps.MAP="map",ClientSideRowModelSteps.AGGREGATE="aggregate",ClientSideRowModelSteps.FILTER_AGGREGATES="filter_aggregates",ClientSideRowModelSteps.PIVOT="pivot",ClientSideRowModelSteps.NOTHING="nothing";var __decorate$18=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};function unwrapUserComp(comp){var compAsAny=comp;return null!=compAsAny&&null!=compAsAny.getFrameworkComponentInstance?compAsAny.getFrameworkComponentInstance():comp}var HeaderNavigationDirection,GridApi=function(){function GridApi(){this.detailGridInfoMap={},this.destroyCalled=!1}return GridApi.prototype.registerOverlayWrapperComp=function(overlayWrapperComp){this.overlayWrapperComp=overlayWrapperComp},GridApi.prototype.registerSideBarComp=function(sideBarComp){this.sideBarComp=sideBarComp},GridApi.prototype.init=function(){var _this=this;switch(this.rowModel.getType()){case Constants.ROW_MODEL_TYPE_CLIENT_SIDE:this.clientSideRowModel=this.rowModel;break;case Constants.ROW_MODEL_TYPE_INFINITE:this.infiniteRowModel=this.rowModel;break;case Constants.ROW_MODEL_TYPE_SERVER_SIDE:this.serverSideRowModel=this.rowModel}this.ctrlsService.whenReady((function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl()}))},GridApi.prototype.__getAlignedGridService=function(){return this.alignedGridsService},GridApi.prototype.__getContext=function(){return this.context},GridApi.prototype.addDetailGridInfo=function(id,gridInfo){this.detailGridInfoMap[id]=gridInfo},GridApi.prototype.removeDetailGridInfo=function(id){this.detailGridInfoMap[id]=void 0},GridApi.prototype.getDetailGridInfo=function(id){return this.detailGridInfoMap[id]},GridApi.prototype.forEachDetailGridInfo=function(callback){var index=0;iterateObject(this.detailGridInfoMap,(function(id,gridInfo){exists(gridInfo)&&(callback(gridInfo,index),index++)}))},GridApi.prototype.getDataAsCsv=function(params){if(ModuleRegistry.assertRegistered(exports.ModuleNames.CsvExportModule,"api.getDataAsCsv"))return this.csvCreator.getDataAsCsv(params)},GridApi.prototype.exportDataAsCsv=function(params){ModuleRegistry.assertRegistered(exports.ModuleNames.CsvExportModule,"api.exportDataAsCSv")&&this.csvCreator.exportDataAsCsv(params)},GridApi.prototype.getExcelExportMode=function(params){var baseParams=this.gridOptionsWrapper.getDefaultExportParams("excel");return Object.assign({exportMode:"xlsx"},baseParams,params).exportMode},GridApi.prototype.getDataAsExcel=function(params){if(ModuleRegistry.assertRegistered(exports.ModuleNames.ExcelExportModule,"api.getDataAsExcel")){var exportMode=this.getExcelExportMode(params);if(this.excelCreator.getFactoryMode(exportMode)!==exports.ExcelFactoryMode.MULTI_SHEET)return this.excelCreator.getDataAsExcel(params);console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`")}},GridApi.prototype.exportDataAsExcel=function(params){if(ModuleRegistry.assertRegistered(exports.ModuleNames.ExcelExportModule,"api.exportDataAsExcel")){var exportMode=this.getExcelExportMode(params);this.excelCreator.getFactoryMode(exportMode)!==exports.ExcelFactoryMode.MULTI_SHEET?this.excelCreator.exportDataAsExcel(params):console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`")}},GridApi.prototype.getSheetDataForExcel=function(params){if(ModuleRegistry.assertRegistered(exports.ModuleNames.ExcelExportModule,"api.getSheetDataForExcel")){var exportMode=this.getExcelExportMode(params);return this.excelCreator.setFactoryMode(exports.ExcelFactoryMode.MULTI_SHEET,exportMode),this.excelCreator.getSheetDataForExcel(params)}},GridApi.prototype.getMultipleSheetsAsExcel=function(params){if(ModuleRegistry.assertRegistered(exports.ModuleNames.ExcelExportModule,"api.getMultipleSheetsAsExcel"))return this.excelCreator.getMultipleSheetsAsExcel(params)},GridApi.prototype.exportMultipleSheetsAsExcel=function(params){if(ModuleRegistry.assertRegistered(exports.ModuleNames.ExcelExportModule,"api.exportMultipleSheetsAsExcel"))return this.excelCreator.exportMultipleSheetsAsExcel(params)},GridApi.prototype.setEnterpriseDatasource=function(datasource){console.warn("AG Grid: since version 18.x, api.setEnterpriseDatasource() should be replaced with api.setServerSideDatasource()"),this.setServerSideDatasource(datasource)},GridApi.prototype.setGridAriaProperty=function(property,value){if(property){var eGrid=this.ctrlsService.getGridBodyCtrl().getGui(),ariaProperty="aria-"+property;null===value?eGrid.removeAttribute(ariaProperty):eGrid.setAttribute(ariaProperty,value)}},GridApi.prototype.setServerSideDatasource=function(datasource){this.serverSideRowModel?this.serverSideRowModel.setDatasource(datasource):console.warn("AG Grid: you can only use an enterprise datasource when gridOptions.rowModelType is '"+Constants.ROW_MODEL_TYPE_SERVER_SIDE+"'")},GridApi.prototype.setDatasource=function(datasource){this.gridOptionsWrapper.isRowModelInfinite()?this.rowModel.setDatasource(datasource):console.warn("AG Grid: you can only use a datasource when gridOptions.rowModelType is '"+Constants.ROW_MODEL_TYPE_INFINITE+"'")},GridApi.prototype.setViewportDatasource=function(viewportDatasource){this.gridOptionsWrapper.isRowModelViewport()?this.rowModel.setViewportDatasource(viewportDatasource):console.warn("AG Grid: you can only use a viewport datasource when gridOptions.rowModelType is '"+Constants.ROW_MODEL_TYPE_VIEWPORT+"'")},GridApi.prototype.setRowData=function(rowData){null==this.immutableService?console.warn("AG Grid: you can only set rowData when using the Client Side Row Model"):this.immutableService.isActive()?this.immutableService.setRowData(rowData):(this.selectionService.reset(),this.clientSideRowModel.setRowData(rowData))},GridApi.prototype.setFloatingTopRowData=function(rows){console.warn("AG Grid: since v12, api.setFloatingTopRowData() is now api.setPinnedTopRowData()"),this.setPinnedTopRowData(rows)},GridApi.prototype.setFloatingBottomRowData=function(rows){console.warn("AG Grid: since v12, api.setFloatingBottomRowData() is now api.setPinnedBottomRowData()"),this.setPinnedBottomRowData(rows)},GridApi.prototype.getFloatingTopRowCount=function(){return console.warn("AG Grid: since v12, api.getFloatingTopRowCount() is now api.getPinnedTopRowCount()"),this.getPinnedTopRowCount()},GridApi.prototype.getFloatingBottomRowCount=function(){return console.warn("AG Grid: since v12, api.getFloatingBottomRowCount() is now api.getPinnedBottomRowCount()"),this.getPinnedBottomRowCount()},GridApi.prototype.getFloatingTopRow=function(index){return console.warn("AG Grid: since v12, api.getFloatingTopRow() is now api.getPinnedTopRow()"),this.getPinnedTopRow(index)},GridApi.prototype.getFloatingBottomRow=function(index){return console.warn("AG Grid: since v12, api.getFloatingBottomRow() is now api.getPinnedBottomRow()"),this.getPinnedBottomRow(index)},GridApi.prototype.setPinnedTopRowData=function(rows){this.pinnedRowModel.setPinnedTopRowData(rows)},GridApi.prototype.setPinnedBottomRowData=function(rows){this.pinnedRowModel.setPinnedBottomRowData(rows)},GridApi.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},GridApi.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},GridApi.prototype.getPinnedTopRow=function(index){return this.pinnedRowModel.getPinnedTopRow(index)},GridApi.prototype.getPinnedBottomRow=function(index){return this.pinnedRowModel.getPinnedBottomRow(index)},GridApi.prototype.setColumnDefs=function(colDefs,source){void 0===source&&(source="api"),this.columnModel.setColumnDefs(colDefs,source)},GridApi.prototype.setAutoGroupColumnDef=function(colDef,source){this.gridOptionsWrapper.setProperty("autoGroupColumnDef",colDef,!0)},GridApi.prototype.setDefaultColDef=function(colDef,source){this.gridOptionsWrapper.setProperty("defaultColDef",colDef,!0)},GridApi.prototype.expireValueCache=function(){this.valueCache.expire()},GridApi.prototype.getVerticalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()},GridApi.prototype.getHorizontalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()},GridApi.prototype.setAlwaysShowHorizontalScroll=function(show){this.gridOptionsWrapper.setProperty("alwaysShowHorizontalScroll",show)},GridApi.prototype.setAlwaysShowVerticalScroll=function(show){this.gridOptionsWrapper.setProperty("alwaysShowVerticalScroll",show)},GridApi.prototype.refreshToolPanel=function(){this.sideBarComp&&this.sideBarComp.refresh()},GridApi.prototype.refreshCells=function(params){void 0===params&&(params={}),Array.isArray(params)?console.warn("since AG Grid v11.1, refreshCells() now takes parameters, please see the documentation."):this.rowRenderer.refreshCells(params)},GridApi.prototype.flashCells=function(params){void 0===params&&(params={}),this.rowRenderer.flashCells(params)},GridApi.prototype.redrawRows=function(params){void 0===params&&(params={});var rowNodes=params?params.rowNodes:void 0;this.rowRenderer.redrawRows(rowNodes)},GridApi.prototype.setFunctionsReadOnly=function(readOnly){this.gridOptionsWrapper.setProperty("functionsReadOnly",readOnly)},GridApi.prototype.refreshHeader=function(){this.ctrlsService.getHeaderRowContainerCtrls().forEach((function(c){return c.refresh()}))},GridApi.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},GridApi.prototype.isColumnFilterPresent=function(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()},GridApi.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},GridApi.prototype.getModel=function(){return this.rowModel},GridApi.prototype.setRowNodeExpanded=function(rowNode,expanded){rowNode&&rowNode.setExpanded(expanded)},GridApi.prototype.onGroupExpandedOrCollapsed=function(deprecated_refreshFromIndex){missing(this.clientSideRowModel)&&console.warn("AG Grid: cannot call onGroupExpandedOrCollapsed unless using normal row model"),exists(deprecated_refreshFromIndex)&&console.warn("AG Grid: api.onGroupExpandedOrCollapsed - refreshFromIndex parameter is no longer used, the grid will refresh all rows"),this.clientSideRowModel.refreshModel({step:exports.ClientSideRowModelSteps.MAP})},GridApi.prototype.refreshInMemoryRowModel=function(step){console.warn("ag-grid: since version 18.x, api.refreshInMemoryRowModel() should be replaced with api.refreshClientSideRowModel()"),this.refreshClientSideRowModel(step)},GridApi.prototype.refreshClientSideRowModel=function(step){missing(this.clientSideRowModel)&&console.warn("cannot call refreshClientSideRowModel unless using normal row model");var paramsStep=exports.ClientSideRowModelSteps.EVERYTHING,stepsMapped={group:exports.ClientSideRowModelSteps.EVERYTHING,filter:exports.ClientSideRowModelSteps.FILTER,map:exports.ClientSideRowModelSteps.MAP,aggregate:exports.ClientSideRowModelSteps.AGGREGATE,sort:exports.ClientSideRowModelSteps.SORT,pivot:exports.ClientSideRowModelSteps.PIVOT};if(exists(step)&&(paramsStep=stepsMapped[step]),missing(paramsStep))console.error("AG Grid: invalid step "+step+", available steps are "+Object.keys(stepsMapped).join(", "));else{var modelParams={step:paramsStep,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gridOptionsWrapper.isSuppressAnimationFrame()};this.clientSideRowModel.refreshModel(modelParams)}},GridApi.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},GridApi.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},GridApi.prototype.getRowNode=function(id){return this.rowModel.getRowNode(id)},GridApi.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),headerHeight:this.gridOptionsWrapper.getHeaderHeight()}},GridApi.prototype.expandAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):console.warn("AG Grid: expandAll only works with Client Side Row Model and Server Side Row Model")},GridApi.prototype.collapseAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):console.warn("AG Grid: collapseAll only works with Client Side Row Model and Server Side Row Model")},GridApi.prototype.getToolPanelInstance=function(id){if(this.sideBarComp)return unwrapUserComp(this.sideBarComp.getToolPanelInstance(id));console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise")},GridApi.prototype.addVirtualRowListener=function(eventName,rowIndex,callback){"string"!=typeof eventName&&console.warn("AG Grid: addVirtualRowListener is deprecated, please use addRenderedRowListener."),this.addRenderedRowListener(eventName,rowIndex,callback)},GridApi.prototype.addRenderedRowListener=function(eventName,rowIndex,callback){"virtualRowSelected"===eventName&&console.warn("AG Grid: event virtualRowSelected is deprecated, to register for individual row\n                selection events, add a listener directly to the row node."),this.rowRenderer.addRenderedRowListener(eventName,rowIndex,callback)},GridApi.prototype.setQuickFilter=function(newFilter){this.filterManager.setQuickFilter(newFilter)},GridApi.prototype.selectIndex=function(index,tryMulti,suppressEvents){console.warn("AG Grid: do not use api for selection, call node.setSelected(value) instead"),suppressEvents&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionService.selectIndex(index,tryMulti)},GridApi.prototype.deselectIndex=function(index,suppressEvents){void 0===suppressEvents&&(suppressEvents=!1),console.warn("AG Grid: do not use api for selection, call node.setSelected(value) instead"),suppressEvents&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionService.deselectIndex(index)},GridApi.prototype.selectNode=function(node,tryMulti,suppressEvents){void 0===tryMulti&&(tryMulti=!1),void 0===suppressEvents&&(suppressEvents=!1),console.warn("AG Grid: API for selection is deprecated, call node.setSelected(value) instead"),suppressEvents&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),node.setSelectedParams({newValue:!0,clearSelection:!tryMulti})},GridApi.prototype.deselectNode=function(node,suppressEvents){void 0===suppressEvents&&(suppressEvents=!1),console.warn("AG Grid: API for selection is deprecated, call node.setSelected(value) instead"),suppressEvents&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),node.setSelectedParams({newValue:!1})},GridApi.prototype.selectAll=function(){this.selectionService.selectAllRowNodes()},GridApi.prototype.deselectAll=function(){this.selectionService.deselectAllRowNodes()},GridApi.prototype.selectAllFiltered=function(){this.selectionService.selectAllRowNodes(!0)},GridApi.prototype.deselectAllFiltered=function(){this.selectionService.deselectAllRowNodes(!0)},GridApi.prototype.recomputeAggregates=function(){missing(this.clientSideRowModel)&&console.warn("cannot call recomputeAggregates unless using normal row model"),console.warn("recomputeAggregates is deprecated, please call api.refreshClientSideRowModel('aggregate') instead"),this.clientSideRowModel.refreshModel({step:exports.ClientSideRowModelSteps.AGGREGATE})},GridApi.prototype.sizeColumnsToFit=function(){this.gridBodyCtrl.sizeColumnsToFit()},GridApi.prototype.showLoadingOverlay=function(){this.overlayWrapperComp.showLoadingOverlay()},GridApi.prototype.showNoRowsOverlay=function(){this.overlayWrapperComp.showNoRowsOverlay()},GridApi.prototype.hideOverlay=function(){this.overlayWrapperComp.hideOverlay()},GridApi.prototype.isNodeSelected=function(node){return console.warn("AG Grid: no need to call api.isNodeSelected(), just call node.isSelected() instead"),node.isSelected()},GridApi.prototype.getSelectedNodesById=function(){return console.error("AG Grid: since version 3.4, getSelectedNodesById no longer exists, use getSelectedNodes() instead"),null},GridApi.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},GridApi.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},GridApi.prototype.getBestCostNodeSelection=function(){return this.selectionService.getBestCostNodeSelection()},GridApi.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},GridApi.prototype.ensureColIndexVisible=function(index){console.warn("AG Grid: ensureColIndexVisible(index) no longer supported, use ensureColumnVisible(colKey) instead.")},GridApi.prototype.ensureColumnVisible=function(key,position){void 0===position&&(position="auto"),this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(key,position)},GridApi.prototype.ensureIndexVisible=function(index,position){this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(index,position)},GridApi.prototype.ensureNodeVisible=function(comparator,position){void 0===position&&(position=null),this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(comparator,position)},GridApi.prototype.forEachLeafNode=function(callback){missing(this.clientSideRowModel)&&console.warn("cannot call forEachNode unless using normal row model"),this.clientSideRowModel.forEachLeafNode(callback)},GridApi.prototype.forEachNode=function(callback){this.rowModel.forEachNode(callback)},GridApi.prototype.forEachNodeAfterFilter=function(callback){missing(this.clientSideRowModel)&&console.warn("cannot call forEachNodeAfterFilter unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilter(callback)},GridApi.prototype.forEachNodeAfterFilterAndSort=function(callback){missing(this.clientSideRowModel)&&console.warn("cannot call forEachNodeAfterFilterAndSort unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilterAndSort(callback)},GridApi.prototype.getFilterInstance=function(key,callback){var res=this.getFilterInstanceImpl(key,(function(instance){if(callback){var unwrapped=unwrapUserComp(instance);callback(unwrapped)}}));return unwrapUserComp(res)},GridApi.prototype.getFilterInstanceImpl=function(key,callback){var column=this.columnModel.getPrimaryColumn(key);if(column){var filterPromise=this.filterManager.getFilterComponent(column,"NO_UI"),currentValue=filterPromise&&filterPromise.resolveNow(null,(function(filterComp){return filterComp}));return currentValue?setTimeout(callback,0,currentValue):filterPromise&&filterPromise.then((function(comp){callback(comp)})),currentValue}},GridApi.prototype.destroyFilter=function(key){var column=this.columnModel.getPrimaryColumn(key);if(column)return this.filterManager.destroyFilter(column,"filterDestroyed")},GridApi.prototype.getStatusPanel=function(key){if(this.statusBarService)return unwrapUserComp(this.statusBarService.getStatusPanel(key))},GridApi.prototype.getColumnDef=function(key){var column=this.columnModel.getPrimaryColumn(key);return column?column.getColDef():null},GridApi.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},GridApi.prototype.onFilterChanged=function(){this.filterManager.onFilterChanged()},GridApi.prototype.onSortChanged=function(){this.sortController.onSortChanged("api")},GridApi.prototype.setFilterModel=function(model){this.filterManager.setFilterModel(model)},GridApi.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},GridApi.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},GridApi.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},GridApi.prototype.setFocusedCell=function(rowIndex,colKey,rowPinned){this.focusService.setFocusedCell(rowIndex,colKey,rowPinned,!0)},GridApi.prototype.setSuppressRowDrag=function(value){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SUPPRESS_ROW_DRAG,value)},GridApi.prototype.setSuppressMoveWhenRowDragging=function(value){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG,value)},GridApi.prototype.setSuppressRowClickSelection=function(value){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SUPPRESS_ROW_CLICK_SELECTION,value)},GridApi.prototype.addRowDropZone=function(params){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(params)},GridApi.prototype.removeRowDropZone=function(params){var activeDropTarget=this.dragAndDropService.findExternalZone(params);activeDropTarget&&this.dragAndDropService.removeDropTarget(activeDropTarget)},GridApi.prototype.getRowDropZoneParams=function(events){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(events)},GridApi.prototype.setHeaderHeight=function(headerHeight){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_HEADER_HEIGHT,headerHeight)},GridApi.prototype.setDomLayout=function(domLayout){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_DOM_LAYOUT,domLayout)},GridApi.prototype.setEnableCellTextSelection=function(selectable){this.gridBodyCtrl.setCellTextSelection(selectable)},GridApi.prototype.setFillHandleDirection=function(direction){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_FILL_HANDLE_DIRECTION,direction)},GridApi.prototype.setGroupHeaderHeight=function(headerHeight){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,headerHeight)},GridApi.prototype.setFloatingFiltersHeight=function(headerHeight){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,headerHeight)},GridApi.prototype.setPivotHeaderHeight=function(headerHeight){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,headerHeight)},GridApi.prototype.setPivotGroupHeaderHeight=function(headerHeight){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,headerHeight)},GridApi.prototype.setIsExternalFilterPresent=function(isExternalFilterPresentFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_EXTERNAL_FILTER_PRESENT,isExternalFilterPresentFunc)},GridApi.prototype.setDoesExternalFilterPass=function(doesExternalFilterPassFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_DOES_EXTERNAL_FILTER_PASS,doesExternalFilterPassFunc)},GridApi.prototype.setNavigateToNextCell=function(navigateToNextCellFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_NAVIGATE_TO_NEXT_CELL,navigateToNextCellFunc)},GridApi.prototype.setTabToNextCell=function(tabToNextCellFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_TAB_TO_NEXT_CELL,tabToNextCellFunc)},GridApi.prototype.setTabToNextHeader=function(tabToNextHeaderFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_TAB_TO_NEXT_HEADER,tabToNextHeaderFunc)},GridApi.prototype.setNavigateToNextHeader=function(navigateToNextHeaderFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_NAVIGATE_TO_NEXT_HEADER,navigateToNextHeaderFunc)},GridApi.prototype.setGroupRowAggNodes=function(groupRowAggNodesFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_ROW_AGG_NODES,groupRowAggNodesFunc)},GridApi.prototype.setGetGroupRowAgg=function(getGroupRowAggFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_GROUP_ROW_AGG,getGroupRowAggFunc)},GridApi.prototype.setGetBusinessKeyForNode=function(getBusinessKeyForNodeFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_BUSINESS_KEY_FOR_NODE,getBusinessKeyForNodeFunc)},GridApi.prototype.setGetChildCount=function(getChildCountFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_CHILD_COUNT,getChildCountFunc)},GridApi.prototype.setProcessRowPostCreate=function(processRowPostCreateFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_ROW_POST_CREATE,processRowPostCreateFunc)},GridApi.prototype.setGetRowNodeId=function(getRowNodeIdFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_NODE_ID,getRowNodeIdFunc)},GridApi.prototype.setGetRowId=function(getRowIdFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_ID,getRowIdFunc)},GridApi.prototype.setGetRowClass=function(rowClassFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_CLASS,rowClassFunc)},GridApi.prototype.setIsFullWidthCell=function(isFullWidthCellFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_FULL_WIDTH_CELL,isFullWidthCellFunc)},GridApi.prototype.setIsFullWidthRow=function(isFullWidthRowFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_FULL_WIDTH_ROW,isFullWidthRowFunc)},GridApi.prototype.setIsRowSelectable=function(isRowSelectableFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_ROW_SELECTABLE,isRowSelectableFunc)},GridApi.prototype.setIsRowMaster=function(isRowMasterFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_ROW_MASTER,isRowMasterFunc)},GridApi.prototype.setPostSort=function(postSortFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_POST_SORT,postSortFunc)},GridApi.prototype.setPostSortRows=function(postSortRowsFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_POST_SORT_ROWS,postSortRowsFunc)},GridApi.prototype.setGetDocument=function(getDocumentFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_DOCUMENT,getDocumentFunc)},GridApi.prototype.setGetContextMenuItems=function(getContextMenuItemsFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_CONTEXT_MENU_ITEMS,getContextMenuItemsFunc)},GridApi.prototype.setGetMainMenuItems=function(getMainMenuItemsFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_MAIN_MENU_ITEMS,getMainMenuItemsFunc)},GridApi.prototype.setProcessCellForClipboard=function(processCellForClipboardFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_CELL_FOR_CLIPBOARD,processCellForClipboardFunc)},GridApi.prototype.setSendToClipboard=function(sendToClipboardFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SEND_TO_CLIPBOARD,sendToClipboardFunc)},GridApi.prototype.setProcessCellFromClipboard=function(processCellFromClipboardFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_CELL_FROM_CLIPBOARD,processCellFromClipboardFunc)},GridApi.prototype.setProcessSecondaryColDef=function(processSecondaryColDefFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_TO_SECONDARY_COLDEF,processSecondaryColDefFunc)},GridApi.prototype.setProcessSecondaryColGroupDef=function(processSecondaryColGroupDefFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_SECONDARY_COL_GROUP_DEF,processSecondaryColGroupDefFunc)},GridApi.prototype.setPostProcessPopup=function(postProcessPopupFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_POST_PROCESS_POPUP,postProcessPopupFunc)},GridApi.prototype.setDefaultGroupOrderComparator=function(defaultGroupOrderComparatorFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_DEFAULT_GROUP_ORDER_COMPARATOR,defaultGroupOrderComparatorFunc)},GridApi.prototype.setInitialGroupOrderComparator=function(initialGroupOrderComparatorFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_INITIAL_GROUP_ORDER_COMPARATOR,initialGroupOrderComparatorFunc)},GridApi.prototype.setGetChartToolbarItems=function(getChartToolbarItemsFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_CHART_TOOLBAR_ITEMS,getChartToolbarItemsFunc)},GridApi.prototype.setPaginationNumberFormatter=function(paginationNumberFormatterFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PAGINATION_NUMBER_FORMATTER,paginationNumberFormatterFunc)},GridApi.prototype.setGetServerSideStoreParams=function(getServerSideStoreParamsFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_SERVER_SIDE_STORE_PARAMS,getServerSideStoreParamsFunc)},GridApi.prototype.setIsServerSideGroupOpenByDefault=function(isServerSideGroupOpenByDefaultFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT,isServerSideGroupOpenByDefaultFunc)},GridApi.prototype.setIsApplyServerSideTransaction=function(isApplyServerSideTransactionFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION,isApplyServerSideTransactionFunc)},GridApi.prototype.setIsServerSideGroup=function(isServerSideGroupFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_SERVER_SIDE_GROUP,isServerSideGroupFunc)},GridApi.prototype.setGetServerSideGroupKey=function(getServerSideGroupKeyFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_SERVER_SIDE_GROUP_KEY,getServerSideGroupKeyFunc)},GridApi.prototype.setGetRowStyle=function(rowStyleFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_STYLE,rowStyleFunc)},GridApi.prototype.setGetRowHeight=function(rowHeightFunc){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_HEIGHT,rowHeightFunc)},GridApi.prototype.isSideBarVisible=function(){return!!this.sideBarComp&&this.sideBarComp.isDisplayed()},GridApi.prototype.setSideBarVisible=function(show){this.sideBarComp?this.sideBarComp.setDisplayed(show):show&&console.warn("AG Grid: sideBar is not loaded")},GridApi.prototype.setSideBarPosition=function(position){this.sideBarComp?this.sideBarComp.setSideBarPosition(position):console.warn("AG Grid: sideBar is not loaded")},GridApi.prototype.openToolPanel=function(key){this.sideBarComp?this.sideBarComp.openToolPanel(key):console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise")},GridApi.prototype.closeToolPanel=function(){this.sideBarComp?this.sideBarComp.close():console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise")},GridApi.prototype.getOpenedToolPanel=function(){return this.sideBarComp?this.sideBarComp.openedItem():null},GridApi.prototype.getSideBar=function(){return this.gridOptionsWrapper.getSideBar()},GridApi.prototype.setSideBar=function(def){this.gridOptionsWrapper.setProperty("sideBar",SideBarDefParser.parse(def))},GridApi.prototype.setSuppressClipboardPaste=function(value){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SUPPRESS_CLIPBOARD_PASTE,value)},GridApi.prototype.isToolPanelShowing=function(){return this.sideBarComp.isToolPanelShowing()},GridApi.prototype.doLayout=function(){doOnce((function(){return console.warn("AG Grid - since version 25.1, doLayout was taken out, as it's not needed. The grid responds to grid size changes automatically")}),"doLayoutDeprecated")},GridApi.prototype.resetRowHeights=function(){if(exists(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive())return void console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");this.clientSideRowModel.resetRowHeights()}},GridApi.prototype.setGroupRemoveSingleChildren=function(value){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN,value)},GridApi.prototype.setGroupRemoveLowestSingleChildren=function(value){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,value)},GridApi.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},GridApi.prototype.getValue=function(colKey,rowNode){var column=this.columnModel.getPrimaryColumn(colKey);return missing(column)&&(column=this.columnModel.getGridColumn(colKey)),missing(column)?null:this.valueService.getValue(column,rowNode)},GridApi.prototype.addEventListener=function(eventType,listener){var async=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addEventListener(eventType,listener,async)},GridApi.prototype.addGlobalListener=function(listener){var async=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addGlobalListener(listener,async)},GridApi.prototype.removeEventListener=function(eventType,listener){var async=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeEventListener(eventType,listener,async)},GridApi.prototype.removeGlobalListener=function(listener){var async=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeGlobalListener(listener,async)},GridApi.prototype.dispatchEvent=function(event){this.eventService.dispatchEvent(event)},GridApi.prototype.destroy=function(){if(!this.destroyCalled){this.destroyCalled=!0;var gridCtrl=this.ctrlsService.getGridCtrl();gridCtrl&&gridCtrl.destroyGridUi(),this.context.destroy()}},GridApi.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(removeAllReferences.bind(window,this,"Grid API"),100)},GridApi.prototype.warnIfDestroyed=function(methodName){return this.destroyCalled&&console.warn("AG Grid: Grid API method "+methodName+" was called on a grid that was destroyed."),this.destroyCalled},GridApi.prototype.resetQuickFilter=function(){this.warnIfDestroyed("resetQuickFilter")||this.rowModel.forEachNode((function(node){return node.quickFilterAggregateText=null}))},GridApi.prototype.getRangeSelections=function(){return console.warn("AG Grid: in v20.1.x, api.getRangeSelections() is gone, please use getCellRanges() instead.\n        We had to change how cell selections works a small bit to allow charting to integrate. The return type of\n        getCellRanges() is a bit different, please check the AG Grid documentation."),null},GridApi.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),null)},GridApi.prototype.camelCaseToHumanReadable=function(camelCase){return camelCaseToHumanText(camelCase)},GridApi.prototype.addRangeSelection=function(deprecatedNoLongerUsed){console.warn("AG Grid: As of version 21.x, range selection changed slightly to allow charting integration. Please call api.addCellRange() instead of api.addRangeSelection()")},GridApi.prototype.addCellRange=function(params){this.rangeService||console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),this.rangeService.addCellRange(params)},GridApi.prototype.clearRangeSelection=function(){this.rangeService||console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),this.rangeService.removeAllCellRanges()},GridApi.prototype.undoCellEditing=function(){this.undoRedoService.undo()},GridApi.prototype.redoCellEditing=function(){this.undoRedoService.redo()},GridApi.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},GridApi.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},GridApi.prototype.getChartModels=function(){if(ModuleRegistry.assertRegistered(exports.ModuleNames.RangeSelectionModule,"api.getChartModels")&&ModuleRegistry.assertRegistered(exports.ModuleNames.GridChartsModule,"api.getChartModels"))return this.chartService.getChartModels()},GridApi.prototype.getChartRef=function(chartId){if(ModuleRegistry.assertRegistered(exports.ModuleNames.RangeSelectionModule,"api.getChartRef")&&ModuleRegistry.assertRegistered(exports.ModuleNames.GridChartsModule,"api.getChartRef"))return this.chartService.getChartRef(chartId)},GridApi.prototype.getChartImageDataURL=function(params){if(ModuleRegistry.assertRegistered(exports.ModuleNames.RangeSelectionModule,"api.getChartImageDataURL")&&ModuleRegistry.assertRegistered(exports.ModuleNames.GridChartsModule,"api.getChartImageDataURL"))return this.chartService.getChartImageDataURL(params)},GridApi.prototype.createRangeChart=function(params){if(ModuleRegistry.assertRegistered(exports.ModuleNames.RangeSelectionModule,"api.createRangeChart")&&ModuleRegistry.assertRegistered(exports.ModuleNames.GridChartsModule,"api.createRangeChart"))return this.chartService.createRangeChart(params)},GridApi.prototype.createCrossFilterChart=function(params){if(ModuleRegistry.assertRegistered(exports.ModuleNames.RangeSelectionModule,"api.createCrossFilterChart")&&ModuleRegistry.assertRegistered(exports.ModuleNames.GridChartsModule,"api.createCrossFilterChart"))return this.chartService.createCrossFilterChart(params)},GridApi.prototype.restoreChart=function(chartModel,chartContainer){if(ModuleRegistry.assertRegistered(exports.ModuleNames.RangeSelectionModule,"api.restoreChart")&&ModuleRegistry.assertRegistered(exports.ModuleNames.GridChartsModule,"api.restoreChart"))return this.chartService.restoreChart(chartModel,chartContainer)},GridApi.prototype.createPivotChart=function(params){if(ModuleRegistry.assertRegistered(exports.ModuleNames.RangeSelectionModule,"api.createPivotChart")&&ModuleRegistry.assertRegistered(exports.ModuleNames.GridChartsModule,"api.createPivotChart"))return this.chartService.createPivotChart(params)},GridApi.prototype.copySelectedRowsToClipboard=function(params){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copySelectedRowsToClipboard(params)},GridApi.prototype.copySelectedRangeToClipboard=function(params){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copySelectedRangeToClipboard(params)},GridApi.prototype.copySelectedRangeDown=function(){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copyRangeDown()},GridApi.prototype.showColumnMenuAfterButtonClick=function(colKey,buttonElement){var column=this.columnModel.getGridColumn(colKey);this.menuFactory.showMenuAfterButtonClick(column,buttonElement,"columnMenu")},GridApi.prototype.showColumnMenuAfterMouseClick=function(colKey,mouseEvent){var column=this.columnModel.getGridColumn(colKey);column||(column=this.columnModel.getPrimaryColumn(colKey)),column?this.menuFactory.showMenuAfterMouseEvent(column,mouseEvent):console.error("AG Grid: column '"+colKey+"' not found")},GridApi.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},GridApi.prototype.setPopupParent=function(ePopupParent){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_POPUP_PARENT,ePopupParent)},GridApi.prototype.tabToNextCell=function(event){return this.navigationService.tabToNextCell(!1,event)},GridApi.prototype.tabToPreviousCell=function(event){return this.navigationService.tabToNextCell(!0,event)},GridApi.prototype.getCellRendererInstances=function(params){return void 0===params&&(params={}),this.rowRenderer.getCellRendererInstances(params).map(unwrapUserComp)},GridApi.prototype.getCellEditorInstances=function(params){return void 0===params&&(params={}),this.rowRenderer.getCellEditorInstances(params).map(unwrapUserComp)},GridApi.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},GridApi.prototype.stopEditing=function(cancel){void 0===cancel&&(cancel=!1),this.rowRenderer.stopEditing(cancel)},GridApi.prototype.startEditingCell=function(params){var column=this.columnModel.getGridColumn(params.colKey);if(column){var cellPosition={rowIndex:params.rowIndex,rowPinned:params.rowPinned||null,column};null==params.rowPinned&&this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(params.rowIndex);var cell=this.navigationService.getCellByPosition(cellPosition);cell&&cell.startRowOrCellEdit(params.key,params.charPress)}else console.warn("AG Grid: no column found for "+params.colKey)},GridApi.prototype.addAggFunc=function(key,aggFunc){this.aggFuncService&&this.aggFuncService.addAggFunc(key,aggFunc)},GridApi.prototype.addAggFuncs=function(aggFuncs){this.aggFuncService&&this.aggFuncService.addAggFuncs(aggFuncs)},GridApi.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},GridApi.prototype.applyServerSideTransaction=function(transaction){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransaction(transaction);console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.")},GridApi.prototype.applyServerSideTransactionAsync=function(transaction,callback){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransactionAsync(transaction,callback);console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.")},GridApi.prototype.retryServerSideLoads=function(){this.serverSideRowModel?this.serverSideRowModel.retryLoads():console.warn("AG Grid: API retryServerSideLoads() can only be used when using Server-Side Row Model.")},GridApi.prototype.flushServerSideAsyncTransactions=function(){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.flushAsyncTransactions();console.warn("AG Grid: Cannot flush Server Side Transaction if not using the Server Side Row Model.")},GridApi.prototype.applyTransaction=function(rowDataTransaction){if(this.clientSideRowModel){var res=this.clientSideRowModel.updateRowData(rowDataTransaction);return this.rowRenderer.refreshFullWidthRows(res.update),this.gridOptionsWrapper.isSuppressChangeDetection()||this.rowRenderer.refreshCells(),res}console.error("AG Grid: updateRowData() only works with ClientSideRowModel. Working with InfiniteRowModel was deprecated in v23.1 and removed in v24.1")},GridApi.prototype.setDeltaSort=function(enable){this.gridOptionsWrapper.setProperty("deltaSort",enable)},GridApi.prototype.updateRowData=function(rowDataTransaction){return doOnce((function(){return console.warn("AG Grid: as of v23.1, grid API updateRowData(transaction) is now called applyTransaction(transaction). updateRowData is deprecated and will be removed in a future major release.")}),"updateRowData deprecated"),this.applyTransaction(rowDataTransaction)},GridApi.prototype.applyTransactionAsync=function(rowDataTransaction,callback){this.clientSideRowModel?this.clientSideRowModel.batchUpdateRowData(rowDataTransaction,callback):console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.")},GridApi.prototype.flushAsyncTransactions=function(){this.clientSideRowModel?this.clientSideRowModel.flushAsyncTransactions():console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.")},GridApi.prototype.batchUpdateRowData=function(rowDataTransaction,callback){doOnce((function(){return console.warn("AG Grid: as of v23.1, grid API batchUpdateRowData(transaction, callback) is now called applyTransactionAsync(transaction, callback). batchUpdateRowData is deprecated and will be removed in a future major release.")}),"batchUpdateRowData deprecated"),this.applyTransactionAsync(rowDataTransaction,callback)},GridApi.prototype.insertItemsAtIndex=function(index,items,skipRefresh){console.warn("AG Grid: insertItemsAtIndex() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:items,addIndex:index,update:null,remove:null})},GridApi.prototype.removeItems=function(rowNodes,skipRefresh){console.warn("AG Grid: removeItems() is deprecated, use updateRowData(transaction) instead.");var dataToRemove=rowNodes.map((function(rowNode){return rowNode.data}));this.updateRowData({add:null,addIndex:null,update:null,remove:dataToRemove})},GridApi.prototype.addItems=function(items,skipRefresh){console.warn("AG Grid: addItems() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:items,addIndex:null,update:null,remove:null})},GridApi.prototype.refreshVirtualPageCache=function(){console.warn("AG Grid: refreshVirtualPageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},GridApi.prototype.refreshInfinitePageCache=function(){console.warn("AG Grid: refreshInfinitePageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},GridApi.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():console.warn("AG Grid: api.refreshInfiniteCache is only available when rowModelType='infinite'.")},GridApi.prototype.purgeVirtualPageCache=function(){console.warn("AG Grid: purgeVirtualPageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfinitePageCache()},GridApi.prototype.purgeInfinitePageCache=function(){console.warn("AG Grid: purgeInfinitePageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfiniteCache()},GridApi.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():console.warn("AG Grid: api.purgeInfiniteCache is only available when rowModelType='infinite'.")},GridApi.prototype.purgeEnterpriseCache=function(route){console.warn("ag-grid: since version 18.x, api.purgeEnterpriseCache() should be replaced with api.purgeServerSideCache()"),this.purgeServerSideCache(route)},GridApi.prototype.purgeServerSideCache=function(route){void 0===route&&(route=[]),this.serverSideRowModel?(console.warn("AG Grid: since v25.0, api.purgeServerSideCache is deprecated. Please use api.refreshServerSideStore({purge: true}) instead."),this.refreshServerSideStore({route,purge:!0})):console.warn("AG Grid: api.purgeServerSideCache is only available when rowModelType='serverSide'.")},GridApi.prototype.refreshServerSideStore=function(params){this.serverSideRowModel?this.serverSideRowModel.refreshStore(params):console.warn("AG Grid: api.refreshServerSideStore is only available when rowModelType='serverSide'.")},GridApi.prototype.getServerSideStoreState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(console.warn("AG Grid: api.getServerSideStoreState is only available when rowModelType='serverSide'."),[])},GridApi.prototype.getVirtualRowCount=function(){return console.warn("AG Grid: getVirtualRowCount() is now called getInfiniteRowCount(), please call getInfiniteRowCount() instead"),this.getInfiniteRowCount()},GridApi.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();console.warn("AG Grid: api.getVirtualRowCount is only available when rowModelType='virtual'.")},GridApi.prototype.isMaxRowFound=function(){return console.warn("AG Grid: api.isLastRowIndexKnown is deprecated, please use api.isLastRowIndexKnown()"),this.isLastRowIndexKnown()},GridApi.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();console.warn("AG Grid: api.isMaxRowFound is only available when rowModelType='virtual'.")},GridApi.prototype.setVirtualRowCount=function(rowCount,maxRowFound){console.warn("AG Grid: setVirtualRowCount() is now called setInfiniteRowCount(), please call setInfiniteRowCount() instead"),this.setRowCount(rowCount,maxRowFound)},GridApi.prototype.setInfiniteRowCount=function(rowCount,maxRowFound){console.warn("AG Grid: setInfiniteRowCount() is now called setRowCount(), please call setRowCount() instead"),this.setRowCount(rowCount,maxRowFound)},GridApi.prototype.setRowCount=function(rowCount,maxRowFound){this.infiniteRowModel?this.infiniteRowModel.setRowCount(rowCount,maxRowFound):console.warn("AG Grid: api.setRowCount is only available for Infinite Row Model.")},GridApi.prototype.getVirtualPageState=function(){return console.warn("AG Grid: getVirtualPageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},GridApi.prototype.getInfinitePageState=function(){return console.warn("AG Grid: getInfinitePageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},GridApi.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},GridApi.prototype.checkGridSize=function(){console.warn("in AG Grid v25.2.0, checkGridSize() was removed, as it was legacy and didn't do anything uesful.")},GridApi.prototype.getFirstRenderedRow=function(){return console.warn("in AG Grid v12, getFirstRenderedRow() was renamed to getFirstDisplayedRow()"),this.getFirstDisplayedRow()},GridApi.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},GridApi.prototype.getLastRenderedRow=function(){return console.warn("in AG Grid v12, getLastRenderedRow() was renamed to getLastDisplayedRow()"),this.getLastDisplayedRow()},GridApi.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},GridApi.prototype.getDisplayedRowAtIndex=function(index){return this.rowModel.getRow(index)},GridApi.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},GridApi.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},GridApi.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},GridApi.prototype.paginationSetPageSize=function(size){this.gridOptionsWrapper.setProperty("paginationPageSize",size)},GridApi.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},GridApi.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},GridApi.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},GridApi.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},GridApi.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},GridApi.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},GridApi.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},GridApi.prototype.paginationGoToPage=function(page){this.paginationProxy.goToPage(page)},GridApi.prototype.setRowClass=function(className){this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_ROW_CLASS,className)},__decorate$18([Optional("immutableService")],GridApi.prototype,"immutableService",void 0),__decorate$18([Optional("csvCreator")],GridApi.prototype,"csvCreator",void 0),__decorate$18([Optional("excelCreator")],GridApi.prototype,"excelCreator",void 0),__decorate$18([Autowired("rowRenderer")],GridApi.prototype,"rowRenderer",void 0),__decorate$18([Autowired("navigationService")],GridApi.prototype,"navigationService",void 0),__decorate$18([Autowired("filterManager")],GridApi.prototype,"filterManager",void 0),__decorate$18([Autowired("columnModel")],GridApi.prototype,"columnModel",void 0),__decorate$18([Autowired("selectionService")],GridApi.prototype,"selectionService",void 0),__decorate$18([Autowired("gridOptionsWrapper")],GridApi.prototype,"gridOptionsWrapper",void 0),__decorate$18([Autowired("valueService")],GridApi.prototype,"valueService",void 0),__decorate$18([Autowired("alignedGridsService")],GridApi.prototype,"alignedGridsService",void 0),__decorate$18([Autowired("eventService")],GridApi.prototype,"eventService",void 0),__decorate$18([Autowired("pinnedRowModel")],GridApi.prototype,"pinnedRowModel",void 0),__decorate$18([Autowired("context")],GridApi.prototype,"context",void 0),__decorate$18([Autowired("rowModel")],GridApi.prototype,"rowModel",void 0),__decorate$18([Autowired("sortController")],GridApi.prototype,"sortController",void 0),__decorate$18([Autowired("paginationProxy")],GridApi.prototype,"paginationProxy",void 0),__decorate$18([Autowired("focusService")],GridApi.prototype,"focusService",void 0),__decorate$18([Autowired("dragAndDropService")],GridApi.prototype,"dragAndDropService",void 0),__decorate$18([Optional("rangeService")],GridApi.prototype,"rangeService",void 0),__decorate$18([Optional("clipboardService")],GridApi.prototype,"clipboardService",void 0),__decorate$18([Optional("aggFuncService")],GridApi.prototype,"aggFuncService",void 0),__decorate$18([Autowired("menuFactory")],GridApi.prototype,"menuFactory",void 0),__decorate$18([Optional("contextMenuFactory")],GridApi.prototype,"contextMenuFactory",void 0),__decorate$18([Autowired("valueCache")],GridApi.prototype,"valueCache",void 0),__decorate$18([Autowired("animationFrameService")],GridApi.prototype,"animationFrameService",void 0),__decorate$18([Optional("statusBarService")],GridApi.prototype,"statusBarService",void 0),__decorate$18([Optional("chartService")],GridApi.prototype,"chartService",void 0),__decorate$18([Optional("undoRedoService")],GridApi.prototype,"undoRedoService",void 0),__decorate$18([Optional("rowNodeBlockLoader")],GridApi.prototype,"rowNodeBlockLoader",void 0),__decorate$18([Optional("ssrmTransactionManager")],GridApi.prototype,"serverSideTransactionManager",void 0),__decorate$18([Autowired("ctrlsService")],GridApi.prototype,"ctrlsService",void 0),__decorate$18([Optional("frameworkComponentWrapper")],GridApi.prototype,"frameworkComponentWrapper",void 0),__decorate$18([PostConstruct],GridApi.prototype,"init",null),__decorate$18([PreDestroy],GridApi.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),GridApi=__decorate$18([Bean("gridApi")],GridApi)}(),__extends$1l=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$19=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetLeftFeature=function(_super){function SetLeftFeature(columnOrGroup,eCell,beans,colsSpanning){var _this=_super.call(this)||this;return _this.columnOrGroup=columnOrGroup,_this.eCell=eCell,_this.ariaEl=_this.eCell.querySelector("[role=columnheader]")||_this.eCell,_this.colsSpanning=colsSpanning,_this.beans=beans,_this}return __extends$1l(SetLeftFeature,_super),SetLeftFeature.prototype.setColsSpanning=function(colsSpanning){this.colsSpanning=colsSpanning,this.onLeftChanged()},SetLeftFeature.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?last(this.colsSpanning):this.columnOrGroup},SetLeftFeature.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,Column.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,GridOptionsWrapper.PROP_DOM_LAYOUT,this.onLeftChanged.bind(this))},SetLeftFeature.prototype.setLeftFirstTime=function(){var suppressMoveAnimation=this.beans.gridOptionsWrapper.isSuppressColumnMoveAnimation(),oldLeftExists=exists(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&oldLeftExists&&!suppressMoveAnimation?this.animateInLeft():this.onLeftChanged()},SetLeftFeature.prototype.animateInLeft=function(){var _this=this,colOrGroup=this.getColumnOrGroup(),left=colOrGroup.getLeft(),oldLeft=colOrGroup.getOldLeft(),oldActualLeft=this.modifyLeftForPrintLayout(colOrGroup,oldLeft),actualLeft=this.modifyLeftForPrintLayout(colOrGroup,left);this.setLeft(oldActualLeft),this.actualLeft=actualLeft,this.beans.columnAnimationService.executeNextVMTurn((function(){_this.actualLeft===actualLeft&&_this.setLeft(actualLeft)}))},SetLeftFeature.prototype.onLeftChanged=function(){var colOrGroup=this.getColumnOrGroup(),left=colOrGroup.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(colOrGroup,left),this.setLeft(this.actualLeft)},SetLeftFeature.prototype.modifyLeftForPrintLayout=function(colOrGroup,leftPosition){if(!(this.beans.gridOptionsWrapper.getDomLayout()===Constants.DOM_LAYOUT_PRINT))return leftPosition;if(colOrGroup.getPinned()===Constants.PINNED_LEFT)return leftPosition;var leftWidth=this.beans.columnModel.getDisplayedColumnsLeftWidth();return colOrGroup.getPinned()===Constants.PINNED_RIGHT?leftWidth+this.beans.columnModel.getBodyContainerWidth()+leftPosition:leftWidth+leftPosition},SetLeftFeature.prototype.setLeft=function(value){var indexColumn;if(exists(value)&&(this.eCell.style.left=value+"px"),this.columnOrGroup instanceof Column)indexColumn=this.columnOrGroup;else{var children=this.columnOrGroup.getLeafColumns();if(!children.length)return;children.length>1&&setAriaColSpan(this.ariaEl,children.length),indexColumn=children[0]}var index=this.beans.columnModel.getAriaColumnIndex(indexColumn);setAriaColIndex(this.ariaEl,index)},__decorate$19([PostConstruct],SetLeftFeature.prototype,"postConstruct",null),SetLeftFeature}(BeanStub),__extends$1m=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1a=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HoverFeature=function(_super){function HoverFeature(columns,element){var _this=_super.call(this)||this;return _this.columns=columns,_this.element=element,_this}return __extends$1m(HoverFeature,_super),HoverFeature.prototype.postConstruct=function(){this.gridOptionsWrapper.isColumnHoverHighlight()&&this.addMouseHoverListeners()},HoverFeature.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},HoverFeature.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},HoverFeature.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},__decorate$1a([Autowired("columnHoverService")],HoverFeature.prototype,"columnHoverService",void 0),__decorate$1a([PostConstruct],HoverFeature.prototype,"postConstruct",null),HoverFeature}(BeanStub),__extends$1n=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1b=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderFilterCellCtrl=function(_super){function HeaderFilterCellCtrl(column,parentRowCtrl){var _this=_super.call(this,column,parentRowCtrl)||this;return _this.column=column,_this}return __extends$1n(HeaderFilterCellCtrl,_super),HeaderFilterCellCtrl.prototype.setComp=function(comp,eGui,eButtonShowMainFilter,eFloatingFilterBody){_super.prototype.setGui.call(this,eGui),this.comp=comp,this.eButtonShowMainFilter=eButtonShowMainFilter,this.eFloatingFilterBody=eFloatingFilterBody;var colDef=this.column.getColDef(),filterExists=!!colDef.filter||!!colDef.filterFramework,floatingFilterExists=!!colDef.floatingFilter;this.active=filterExists&&floatingFilterExists,this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this))},HeaderFilterCellCtrl.prototype.setupUi=function(){if(this.comp.addOrRemoveButtonWrapperCssClass("ag-hidden",!this.active||this.suppressFilterButton),this.active){this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton);var eMenuIcon=createIconNoSpan("filter",this.gridOptionsWrapper,this.column);eMenuIcon&&this.eButtonShowMainFilter.appendChild(eMenuIcon)}},HeaderFilterCellCtrl.prototype.setupFocus=function(){this.createManagedBean(new ManagedFocusFeature(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},HeaderFilterCellCtrl.prototype.onTabKeyDown=function(e){if(!(this.gridOptionsWrapper.getDocument().activeElement===this.eGui)){var nextFocusableEl=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(nextFocusableEl)return this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),void nextFocusableEl.focus();var nextFocusableColumn=this.findNextColumnWithFloatingFilter(e.shiftKey);nextFocusableColumn&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:nextFocusableColumn},event:e})&&e.preventDefault()}},HeaderFilterCellCtrl.prototype.findNextColumnWithFloatingFilter=function(backwards){var columModel=this.beans.columnModel,nextCol=this.column;do{if(!(nextCol=backwards?columModel.getDisplayedColBefore(nextCol):columModel.getDisplayedColAfter(nextCol)))break}while(!nextCol.getColDef().filter||!nextCol.getColDef().floatingFilter);return nextCol},HeaderFilterCellCtrl.prototype.handleKeyDown=function(e){var wrapperHasFocus=this.gridOptionsWrapper.getDocument().activeElement===this.eGui;switch(e.key){case KeyCode.UP:case KeyCode.DOWN:wrapperHasFocus||e.preventDefault();case KeyCode.LEFT:case KeyCode.RIGHT:if(wrapperHasFocus)return;e.stopPropagation();case KeyCode.ENTER:wrapperHasFocus&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case KeyCode.ESCAPE:wrapperHasFocus||this.eGui.focus()}},HeaderFilterCellCtrl.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var notFromHeaderWrapper=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),fromWithinHeader=!!e.relatedTarget&&isElementChildOfClass(e.relatedTarget,"ag-floating-filter");if(notFromHeaderWrapper&&fromWithinHeader&&e.target===this.eGui){var lastFocusEvent=this.lastFocusEvent,fromTab=!(!lastFocusEvent||lastFocusEvent.key!==KeyCode.TAB);if(lastFocusEvent&&fromTab){var shouldFocusLast=lastFocusEvent.shiftKey;this.focusService.focusInto(this.eGui,shouldFocusLast)}}var rowIndex=this.getRowIndex();this.beans.focusService.setFocusedHeader(rowIndex,this.column)}},HeaderFilterCellCtrl.prototype.setupHover=function(){var _this=this;this.createManagedBean(new HoverFeature([this.column],this.eGui));var listener=function(){if(_this.gridOptionsWrapper.isColumnHoverHighlight()){var hovered=_this.columnHoverService.isHovered(_this.column);_this.comp.addOrRemoveCssClass("ag-column-hover",hovered)}};this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HOVER_CHANGED,listener),listener()},HeaderFilterCellCtrl.prototype.setupLeft=function(){var setLeftFeature=new SetLeftFeature(this.column,this.eGui,this.beans);this.createManagedBean(setLeftFeature)},HeaderFilterCellCtrl.prototype.setupUserComp=function(){var _this=this;if(this.active){var colDef=this.column.getColDef(),filterParams=this.filterManager.createFilterParams(this.column,colDef),finalFilterParams=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(colDef,FilterComponent,filterParams),defaultFloatingFilterType=this.userComponentFactory.getDefaultFloatingFilterType(colDef);null==defaultFloatingFilterType&&(defaultFloatingFilterType="agReadOnlyFloatingFilter");var params={column:this.column,filterParams:finalFilterParams,currentParentModel:function(){return _this.currentParentModel()},parentFilterInstance:function(cb){return _this.parentFilterInstance(cb)},showParentFilter:function(){return _this.showParentFilter()},suppressFilterButton:!1};this.suppressFilterButton=!!colDef.floatingFilterComponentParams&&!!colDef.floatingFilterComponentParams.suppressFilterButton;var compDetails=this.userComponentFactory.getFloatingFilterCompDetails(colDef,params,defaultFloatingFilterType);compDetails&&this.comp.setCompDetails(compDetails)}},HeaderFilterCellCtrl.prototype.currentParentModel=function(){var filterComponent=this.getFilterComponent(!1);return filterComponent?filterComponent.resolveNow(null,(function(filter){return filter&&filter.getModel()})):null},HeaderFilterCellCtrl.prototype.getFilterComponent=function(createIfDoesNotExist){return void 0===createIfDoesNotExist&&(createIfDoesNotExist=!0),this.filterManager.getFilterComponent(this.column,"NO_UI",createIfDoesNotExist)},HeaderFilterCellCtrl.prototype.parentFilterInstance=function(callback){var filterComponent=this.getFilterComponent();null!=filterComponent&&filterComponent.then((function(instance){callback(unwrapUserComp(instance))}))},HeaderFilterCellCtrl.prototype.showParentFilter=function(){var eventSource=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuFactory.showMenuAfterButtonClick(this.column,eventSource,"floatingFilter","filterMenuTab",["filterMenuTab"])},HeaderFilterCellCtrl.prototype.setupSyncWithFilter=function(){var _this=this;if(this.active){var syncWithFilter=function(filterChangedEvent){var compPromise=_this.comp.getFloatingFilterComp();if(compPromise){var parentModel=_this.currentParentModel();compPromise.then((function(comp){comp&&comp.onParentModelChanged(parentModel,filterChangedEvent)}))}};this.addManagedListener(this.column,Column.EVENT_FILTER_CHANGED,syncWithFilter),this.filterManager.isFilterActive(this.column)&&syncWithFilter(null)}},HeaderFilterCellCtrl.prototype.setupWidth=function(){var _this=this,listener=function(){var width=_this.column.getActualWidth()+"px";_this.comp.setWidth(width)};this.addManagedListener(this.column,Column.EVENT_WIDTH_CHANGED,listener),listener()},__decorate$1b([Autowired("userComponentFactory")],HeaderFilterCellCtrl.prototype,"userComponentFactory",void 0),__decorate$1b([Autowired("filterManager")],HeaderFilterCellCtrl.prototype,"filterManager",void 0),__decorate$1b([Autowired("columnHoverService")],HeaderFilterCellCtrl.prototype,"columnHoverService",void 0),__decorate$1b([Autowired("gridApi")],HeaderFilterCellCtrl.prototype,"gridApi",void 0),__decorate$1b([Autowired("menuFactory")],HeaderFilterCellCtrl.prototype,"menuFactory",void 0),__decorate$1b([Autowired("beans")],HeaderFilterCellCtrl.prototype,"beans",void 0),HeaderFilterCellCtrl}(AbstractHeaderCellCtrl),__extends$1o=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1c=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ResizeFeature=function(_super){function ResizeFeature(pinned,column,eResize,comp,ctrl){var _this=_super.call(this)||this;return _this.pinned=pinned,_this.column=column,_this.eResize=eResize,_this.comp=comp,_this.ctrl=ctrl,_this}return __extends$1o(ResizeFeature,_super),ResizeFeature.prototype.postConstruct=function(){var canResize,canAutosize,_this=this,colDef=this.column.getColDef(),destroyResizeFuncs=[],removeResize=function(){destroyResizeFuncs.forEach((function(f){return f()})),destroyResizeFuncs.length=0},refresh=function(){var resize=_this.column.isResizable(),autoSize=!_this.gridOptionsWrapper.isSuppressAutoSize()&&!colDef.suppressAutoSize;(resize!==canResize||autoSize!==canAutosize)&&(canResize=resize,canAutosize=autoSize,removeResize(),function(){if(setDisplayed(_this.eResize,canResize),canResize){var finishedWithResizeFunc=_this.horizontalResizeService.addResizeBar({eResizeBar:_this.eResize,onResizeStart:_this.onResizeStart.bind(_this),onResizing:_this.onResizing.bind(_this,!1),onResizeEnd:_this.onResizing.bind(_this,!0)});if(destroyResizeFuncs.push(finishedWithResizeFunc),canAutosize){var skipHeaderOnAutoSize_1=_this.gridOptionsWrapper.isSkipHeaderOnAutoSize(),autoSizeColListener_1=function(){_this.columnModel.autoSizeColumn(_this.column,skipHeaderOnAutoSize_1,"uiColumnResized")};_this.eResize.addEventListener("dblclick",autoSizeColListener_1);var touchListener_1=new TouchListener(_this.eResize);touchListener_1.addEventListener(TouchListener.EVENT_DOUBLE_TAP,autoSizeColListener_1),_this.addDestroyFunc((function(){_this.eResize.removeEventListener("dblclick",autoSizeColListener_1),touchListener_1.removeEventListener(TouchListener.EVENT_DOUBLE_TAP,autoSizeColListener_1),touchListener_1.destroy()}))}}}())};refresh(),this.addDestroyFunc(removeResize),this.ctrl.addRefreshFunction(refresh)},ResizeFeature.prototype.onResizing=function(finished,resizeAmount){var resizeAmountNormalised=this.normaliseResizeAmount(resizeAmount),columnWidths=[{key:this.column,newWidth:this.resizeStartWidth+resizeAmountNormalised}];this.columnModel.setColumnWidths(columnWidths,this.resizeWithShiftKey,finished,"uiColumnDragged"),finished&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},ResizeFeature.prototype.onResizeStart=function(shiftKey){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=shiftKey,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},ResizeFeature.prototype.normaliseResizeAmount=function(dragChange){var result=dragChange,notPinningLeft=this.pinned!==Constants.PINNED_LEFT,pinningRight=this.pinned===Constants.PINNED_RIGHT;return this.gridOptionsWrapper.isEnableRtl()?notPinningLeft&&(result*=-1):pinningRight&&(result*=-1),result},__decorate$1c([Autowired("horizontalResizeService")],ResizeFeature.prototype,"horizontalResizeService",void 0),__decorate$1c([Autowired("columnModel")],ResizeFeature.prototype,"columnModel",void 0),__decorate$1c([PostConstruct],ResizeFeature.prototype,"postConstruct",null),ResizeFeature}(BeanStub),__extends$1p=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgCheckbox=function(_super){function AgCheckbox(config,className,inputType){void 0===className&&(className="ag-checkbox"),void 0===inputType&&(inputType="checkbox");var _this=_super.call(this,config,className,inputType)||this;return _this.labelAlignment="right",_this.selected=!1,_this.readOnly=!1,_this.passive=!1,_this}return __extends$1p(AgCheckbox,_super),AgCheckbox.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},AgCheckbox.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},AgCheckbox.prototype.setPassive=function(passive){this.passive=passive},AgCheckbox.prototype.isReadOnly=function(){return this.readOnly},AgCheckbox.prototype.setReadOnly=function(readOnly){this.eWrapper.classList.toggle("ag-disabled",readOnly),this.eInput.disabled=readOnly,this.readOnly=readOnly},AgCheckbox.prototype.setDisabled=function(disabled){return this.eWrapper.classList.toggle("ag-disabled",disabled),_super.prototype.setDisabled.call(this,disabled)},AgCheckbox.prototype.toggle=function(){if(!this.eInput.disabled){var previousValue=this.isSelected(),nextValue=this.getNextValue();this.passive?this.dispatchChange(nextValue,previousValue):this.setValue(nextValue)}},AgCheckbox.prototype.getValue=function(){return this.isSelected()},AgCheckbox.prototype.setValue=function(value,silent){return this.refreshSelectedClass(value),this.setSelected(value,silent),this},AgCheckbox.prototype.setName=function(name){return this.getInputElement().name=name,this},AgCheckbox.prototype.isSelected=function(){return this.selected},AgCheckbox.prototype.setSelected=function(selected,silent){this.isSelected()!==selected&&(this.previousValue=this.isSelected(),selected=this.selected="boolean"==typeof selected?selected:void 0,this.eInput.checked=selected,this.eInput.indeterminate=void 0===selected,silent||this.dispatchChange(this.selected,this.previousValue))},AgCheckbox.prototype.dispatchChange=function(selected,previousValue,event){this.dispatchEvent({type:AgCheckbox.EVENT_CHANGED,selected,previousValue,event});var input=this.getInputElement(),checkboxChangedEvent={type:Events.EVENT_CHECKBOX_CHANGED,id:input.id,name:input.name,selected,previousValue};this.eventService.dispatchEvent(checkboxChangedEvent)},AgCheckbox.prototype.onCheckboxClick=function(e){if(!this.passive&&!this.eInput.disabled){var previousValue=this.isSelected(),selected=this.selected=e.target.checked;this.refreshSelectedClass(selected),this.dispatchChange(selected,previousValue,e)}},AgCheckbox.prototype.refreshSelectedClass=function(value){this.eWrapper.classList.toggle("ag-checked",!0===value),this.eWrapper.classList.toggle("ag-indeterminate",null==value)},AgCheckbox}(AgAbstractInputField),__extends$1q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1d=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectAllFeature=function(_super){function SelectAllFeature(column){var _this=_super.call(this)||this;_this.cbSelectAllVisible=!1,_this.processingEventFromCheckbox=!1,_this.column=column;var colDef=column.getColDef();return _this.filteredOnly=!!colDef&&!!colDef.headerCheckboxSelectionFilteredOnly,_this}return __extends$1q(SelectAllFeature,_super),SelectAllFeature.prototype.onSpaceKeyPressed=function(e){var checkbox=this.cbSelectAll,eDocument=this.gridOptionsWrapper.getDocument();checkbox.isDisplayed()&&!checkbox.getGui().contains(eDocument.activeElement)&&(e.preventDefault(),checkbox.setValue(!checkbox.getValue()))},SelectAllFeature.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},SelectAllFeature.prototype.setComp=function(ctrl){this.headerCellCtrl=ctrl,this.cbSelectAll=this.createManagedBean(new AgCheckbox),this.cbSelectAll.addCssClass("ag-header-select-all"),setAriaRole(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,AgCheckbox.EVENT_CHANGED,this.onCbSelectAll.bind(this)),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},SelectAllFeature.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType(),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()},SelectAllFeature.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},SelectAllFeature.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},SelectAllFeature.prototype.getNextCheckboxState=function(selectionCount){return(0!==selectionCount.selected||0!==selectionCount.notSelected)&&(selectionCount.selected>0&&selectionCount.notSelected>0?null:selectionCount.selected>0)},SelectAllFeature.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var selectionCount=this.getSelectionCount(),allSelected=this.getNextCheckboxState(selectionCount);this.cbSelectAll.setValue(allSelected),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},SelectAllFeature.prototype.refreshSelectAllLabel=function(){if(this.cbSelectAllVisible){var translate=this.gridOptionsWrapper.getLocaleTextFunc(),ariaStatus=this.cbSelectAll.getValue()?translate("ariaChecked","checked"):translate("ariaUnchecked","unchecked"),ariaLabel=translate("ariaRowSelectAll","Press Space to toggle all rows selection");this.headerCellCtrl.setAriaDescriptionProperty("selectAll",ariaLabel+" ("+ariaStatus+")")}else this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null);this.headerCellCtrl.refreshAriaDescription()},SelectAllFeature.prototype.getSelectionCount=function(){var _this=this,selectedCount=0,notSelectedCount=0,callback=function(node){_this.gridOptionsWrapper.isGroupSelectsChildren()&&node.group||(node.isSelected()?selectedCount++:node.selectable&&notSelectedCount++)};return this.filteredOnly?this.gridApi.forEachNodeAfterFilter(callback):this.gridApi.forEachNode(callback),{notSelected:notSelectedCount,selected:selectedCount}},SelectAllFeature.prototype.checkRightRowModelType=function(){var rowModelType=this.rowModel.getType();rowModelType===Constants.ROW_MODEL_TYPE_CLIENT_SIDE||console.warn("AG Grid: selectAllCheckbox is only available if using normal row model, you are using "+rowModelType)},SelectAllFeature.prototype.onCbSelectAll=function(){this.processingEventFromCheckbox||this.cbSelectAllVisible&&(this.cbSelectAll.getValue()?this.selectionService.selectAllRowNodes(this.filteredOnly):this.selectionService.deselectAllRowNodes(this.filteredOnly))},SelectAllFeature.prototype.isCheckboxSelection=function(){var result=this.column.getColDef().headerCheckboxSelection;"function"==typeof result&&(result=result({column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi,context:this.gridOptionsWrapper.getContext()}));return!!result&&(this.gridOptionsWrapper.isRowModelServerSide()?(console.warn("AG Grid: headerCheckboxSelection is not supported for Server Side Row Model"),!1):this.gridOptionsWrapper.isRowModelInfinite()?(console.warn("AG Grid: headerCheckboxSelection is not supported for Infinite Row Model"),!1):!this.gridOptionsWrapper.isRowModelViewport()||(console.warn("AG Grid: headerCheckboxSelection is not supported for Viewport Row Model"),!1))},__decorate$1d([Autowired("gridApi")],SelectAllFeature.prototype,"gridApi",void 0),__decorate$1d([Autowired("columnApi")],SelectAllFeature.prototype,"columnApi",void 0),__decorate$1d([Autowired("rowModel")],SelectAllFeature.prototype,"rowModel",void 0),__decorate$1d([Autowired("selectionService")],SelectAllFeature.prototype,"selectionService",void 0),SelectAllFeature}(BeanStub),__extends$1r=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1e=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderCellCtrl=function(_super){function HeaderCellCtrl(column,parentRowCtrl){var _this=_super.call(this,column,parentRowCtrl)||this;return _this.refreshFunctions=[],_this.userHeaderClasses=new Set,_this.ariaDescriptionProperties=new Map,_this.column=column,_this}return __extends$1r(HeaderCellCtrl,_super),HeaderCellCtrl.prototype.setComp=function(comp,eGui,eResize){var _this=this;_super.prototype.setGui.call(this,eGui),this.comp=comp,this.colDefVersion=this.columnModel.getColDefVersion(),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.addColumnHoverListener(),this.setupFilterCss(),this.setupColId(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.createManagedBean(new ResizeFeature(this.getPinned(),this.column,eResize,comp,this)),this.createManagedBean(new HoverFeature([this.column],eGui)),this.createManagedBean(new SetLeftFeature(this.column,eGui,this.beans)),this.createManagedBean(new ManagedFocusFeature(eGui,{shouldStopEventPropagation:function(e){return _this.shouldStopEventPropagation(e)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this))},HeaderCellCtrl.prototype.setupUserComp=function(){var compDetails=this.lookupUserCompDetails();this.setCompDetails(compDetails)},HeaderCellCtrl.prototype.setCompDetails=function(compDetails){this.userCompDetails=compDetails,this.comp.setUserCompDetails(compDetails)},HeaderCellCtrl.prototype.lookupUserCompDetails=function(){var params=this.createParams(),colDef=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(colDef,params)},HeaderCellCtrl.prototype.createParams=function(){var _this=this,colDef=this.column.getColDef();return{column:this.column,displayName:this.displayName,enableSorting:colDef.sortable,enableMenu:this.menuEnabled,showColumnMenu:function(source){_this.gridApi.showColumnMenuAfterButtonClick(_this.column,source)},progressSort:function(multiSort){_this.sortController.progressSort(_this.column,!!multiSort,"uiColumnSorted")},setSort:function(sort,multiSort){_this.sortController.setSortForColumn(_this.column,sort,!!multiSort,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext(),eGridHeader:this.getGui()}},HeaderCellCtrl.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new SelectAllFeature(this.column)),this.selectAllFeature.setComp(this)},HeaderCellCtrl.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},HeaderCellCtrl.prototype.handleKeyDown=function(e){e.key===KeyCode.SPACE&&this.selectAllFeature.onSpaceKeyPressed(e),e.key===KeyCode.ENTER&&this.onEnterKeyPressed(e)},HeaderCellCtrl.prototype.onEnterKeyPressed=function(e){var headerComp=this.comp.getUserCompInstance();if(headerComp)if(e.ctrlKey||e.metaKey)this.menuEnabled&&headerComp.showMenu&&(e.preventDefault(),headerComp.showMenu());else if(this.sortable){var multiSort=e.shiftKey;this.sortController.progressSort(this.column,multiSort,"uiColumnSorted")}},HeaderCellCtrl.prototype.isMenuEnabled=function(){return this.menuEnabled},HeaderCellCtrl.prototype.onFocusIn=function(e){if(!this.getGui().contains(e.relatedTarget)){var rowIndex=this.getRowIndex();this.focusService.setFocusedHeader(rowIndex,this.column)}this.setActiveHeader(!0)},HeaderCellCtrl.prototype.onFocusOut=function(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)},HeaderCellCtrl.prototype.setupTooltip=function(){var _this=this,tooltipCtrl={getColumn:function(){return _this.column},getColDef:function(){return _this.column.getColDef()},getGui:function(){return _this.eGui},getLocation:function(){return"header"},getTooltipValue:function(){return _this.column.getColDef().headerTooltip}},tooltipFeature=this.createManagedBean(new TooltipFeature(tooltipCtrl,this.beans));tooltipFeature.setComp(this.comp),this.refreshFunctions.push((function(){return tooltipFeature.refreshToolTip()}))},HeaderCellCtrl.prototype.setupClassesFromColDef=function(){var _this=this,refreshHeaderClasses=function(){var colDef=_this.column.getColDef(),goa=_this.gridOptionsWrapper,classes=CssClassApplier.getHeaderClassesFromColDef(colDef,goa,_this.column,null),oldClasses=_this.userHeaderClasses;_this.userHeaderClasses=new Set(classes),classes.forEach((function(c){oldClasses.has(c)?oldClasses.delete(c):_this.comp.addOrRemoveCssClass(c,!0)})),oldClasses.forEach((function(c){return _this.comp.addOrRemoveCssClass(c,!1)}))};this.refreshFunctions.push(refreshHeaderClasses),refreshHeaderClasses()},HeaderCellCtrl.prototype.setDragSource=function(eSource){var _this=this;this.dragSourceElement=eSource,this.removeDragSource(),eSource&&this.draggable&&(this.moveDragSource={type:exports.DragSourceType.HeaderCell,eElement:eSource,defaultIconName:DragAndDropService.ICON_HIDE,getDragItem:function(){return _this.createDragItem()},dragItemName:this.displayName,onDragStarted:function(){return _this.column.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return _this.column.setMoving(!1,"uiColumnMoved")}},this.dragAndDropService.addDragSource(this.moveDragSource,!0))},HeaderCellCtrl.prototype.createDragItem=function(){var visibleState={};return visibleState[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState}},HeaderCellCtrl.prototype.removeDragSource=function(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)},HeaderCellCtrl.prototype.onNewColumnsLoaded=function(){var colDefVersionNow=this.columnModel.getColDefVersion();colDefVersionNow!=this.colDefVersion&&(this.colDefVersion=colDefVersionNow,this.refresh())},HeaderCellCtrl.prototype.updateState=function(){var colDef=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!colDef.suppressMenu,this.sortable=colDef.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},HeaderCellCtrl.prototype.addRefreshFunction=function(func){this.refreshFunctions.push(func)},HeaderCellCtrl.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach((function(f){return f()}))},HeaderCellCtrl.prototype.refreshHeaderComp=function(){var newCompDetails=this.lookupUserCompDetails();!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==newCompDetails.componentClass)&&this.attemptHeaderCompRefresh(newCompDetails.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(newCompDetails)},HeaderCellCtrl.prototype.attemptHeaderCompRefresh=function(params){var headerComp=this.comp.getUserCompInstance();return!!headerComp&&(!!headerComp.refresh&&headerComp.refresh(params))},HeaderCellCtrl.prototype.calculateDisplayName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)},HeaderCellCtrl.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},HeaderCellCtrl.prototype.workOutDraggable=function(){var colDef=this.column.getColDef();return!!(!this.gridOptionsWrapper.isSuppressMovableColumns()&&!colDef.suppressMovable&&!colDef.lockPosition)||!!colDef.enableRowGroup||!!colDef.enablePivot},HeaderCellCtrl.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},HeaderCellCtrl.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},HeaderCellCtrl.prototype.onColumnValueChanged=function(){this.checkDisplayName()},HeaderCellCtrl.prototype.setupWidth=function(){var _this=this,listener=function(){_this.comp.setWidth(_this.column.getActualWidth()+"px")};this.addManagedListener(this.column,Column.EVENT_WIDTH_CHANGED,listener),listener()},HeaderCellCtrl.prototype.setupMovingCss=function(){var _this=this,listener=function(){_this.comp.addOrRemoveCssClass("ag-header-cell-moving",_this.column.isMoving())};this.addManagedListener(this.column,Column.EVENT_MOVING_CHANGED,listener),listener()},HeaderCellCtrl.prototype.setupMenuClass=function(){var _this=this,listener=function(){_this.comp.addOrRemoveCssClass("ag-column-menu-visible",_this.column.isMenuVisible())};this.addManagedListener(this.column,Column.EVENT_MENU_VISIBLE_CHANGED,listener),listener()},HeaderCellCtrl.prototype.setupSortableClass=function(){var _this=this,updateSortableCssClass=function(){_this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!_this.sortable)};updateSortableCssClass(),this.addRefreshFunction(updateSortableCssClass),this.addManagedListener(this.column,Column.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))},HeaderCellCtrl.prototype.refreshAriaSort=function(){if(this.sortable){var translate=this.gridOptionsWrapper.getLocaleTextFunc();this.comp.setAriaSort(getAriaSortState(this.column)),this.setAriaDescriptionProperty("sort",translate("ariaSortableColumn","Press ENTER to sort."))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)},HeaderCellCtrl.prototype.refreshAriaMenu=function(){if(this.menuEnabled){var translate=this.gridOptionsWrapper.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",translate("ariaMenuColumn","Press CTRL ENTER to open column menu."))}else this.setAriaDescriptionProperty("menu",null)},HeaderCellCtrl.prototype.setAriaDescriptionProperty=function(property,value){null!=value?this.ariaDescriptionProperties.set(property,value):this.ariaDescriptionProperties.delete(property)},HeaderCellCtrl.prototype.refreshAriaDescription=function(){var descriptionArray=Array.from(this.ariaDescriptionProperties.values());this.comp.setAriaDescription(descriptionArray.length?descriptionArray.join(" "):void 0)},HeaderCellCtrl.prototype.refreshAria=function(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaDescription()},HeaderCellCtrl.prototype.addColumnHoverListener=function(){var _this=this,listener=function(){if(_this.gridOptionsWrapper.isColumnHoverHighlight()){var isHovered=_this.columnHoverService.isHovered(_this.column);_this.comp.addOrRemoveCssClass("ag-column-hover",isHovered)}};this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HOVER_CHANGED,listener),listener()},HeaderCellCtrl.prototype.setupFilterCss=function(){var _this=this,listener=function(){_this.comp.addOrRemoveCssClass("ag-header-cell-filtered",_this.column.isFilterActive())};this.addManagedListener(this.column,Column.EVENT_FILTER_ACTIVE_CHANGED,listener),listener()},HeaderCellCtrl.prototype.setupColId=function(){this.comp.setColId(this.column.getColId())},HeaderCellCtrl.prototype.addActiveHeaderMouseListeners=function(){var _this=this,listener=function(e){return _this.setActiveHeader("mouseenter"===e.type)};this.addManagedListener(this.getGui(),"mouseenter",listener),this.addManagedListener(this.getGui(),"mouseleave",listener)},HeaderCellCtrl.prototype.setActiveHeader=function(active){this.comp.addOrRemoveCssClass("ag-header-active",active)},__decorate$1e([Autowired("columnModel")],HeaderCellCtrl.prototype,"columnModel",void 0),__decorate$1e([Autowired("columnHoverService")],HeaderCellCtrl.prototype,"columnHoverService",void 0),__decorate$1e([Autowired("beans")],HeaderCellCtrl.prototype,"beans",void 0),__decorate$1e([Autowired("sortController")],HeaderCellCtrl.prototype,"sortController",void 0),__decorate$1e([Autowired("menuFactory")],HeaderCellCtrl.prototype,"menuFactory",void 0),__decorate$1e([Autowired("dragAndDropService")],HeaderCellCtrl.prototype,"dragAndDropService",void 0),__decorate$1e([Autowired("gridApi")],HeaderCellCtrl.prototype,"gridApi",void 0),__decorate$1e([Autowired("columnApi")],HeaderCellCtrl.prototype,"columnApi",void 0),__decorate$1e([Autowired("userComponentFactory")],HeaderCellCtrl.prototype,"userComponentFactory",void 0),__decorate$1e([PreDestroy],HeaderCellCtrl.prototype,"removeDragSource",null),HeaderCellCtrl}(AbstractHeaderCellCtrl),__extends$1s=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1f=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GroupResizeFeature=function(_super){function GroupResizeFeature(comp,eResize,pinned,columnGroup){var _this=_super.call(this)||this;return _this.eResize=eResize,_this.comp=comp,_this.pinned=pinned,_this.columnGroup=columnGroup,_this}return __extends$1s(GroupResizeFeature,_super),GroupResizeFeature.prototype.postConstruct=function(){var _this=this;if(this.columnGroup.isResizable()){var finishedWithResizeFunc=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(finishedWithResizeFunc),!this.gridOptionsWrapper.isSuppressAutoSize()){var skipHeaderOnAutoSize_1=this.gridOptionsWrapper.isSkipHeaderOnAutoSize();this.eResize.addEventListener("dblclick",(function(){var keys=[];_this.columnGroup.getDisplayedLeafColumns().forEach((function(column){column.getColDef().suppressAutoSize||keys.push(column.getColId())})),keys.length>0&&_this.columnModel.autoSizeColumns({columns:keys,skipHeader:skipHeaderOnAutoSize_1,stopAtGroup:_this.columnGroup,source:"uiColumnResized"}),_this.resizeLeafColumnsToFit()}))}}else this.comp.addOrRemoveResizableCssClass("ag-hidden",!0)},GroupResizeFeature.prototype.onResizeStart=function(shiftKey){var _this=this;this.calculateInitialValues();var takeFromGroup=null;if(shiftKey&&(takeFromGroup=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),takeFromGroup){var takeFromLeafCols=takeFromGroup.getDisplayedLeafColumns();this.resizeTakeFromCols=takeFromLeafCols.filter((function(col){return col.isResizable()})),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach((function(col){return _this.resizeTakeFromStartWidth+=col.getActualWidth()})),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach((function(col){return _this.resizeTakeFromRatios.push(col.getActualWidth()/_this.resizeTakeFromStartWidth)}))}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},GroupResizeFeature.prototype.onResizing=function(finished,resizeAmount){var resizeAmountNormalised=this.normaliseDragChange(resizeAmount),width=this.resizeStartWidth+resizeAmountNormalised;this.resizeColumns(width,finished)},GroupResizeFeature.prototype.resizeLeafColumnsToFit=function(){var preferredSize=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup);this.calculateInitialValues(),preferredSize>this.resizeStartWidth&&this.resizeColumns(preferredSize,!0)},GroupResizeFeature.prototype.resizeColumns=function(totalWidth,finished){void 0===finished&&(finished=!0);var resizeSets=[];if(resizeSets.push({columns:this.resizeCols,ratios:this.resizeRatios,width:totalWidth}),this.resizeTakeFromCols){var diff=totalWidth-this.resizeStartWidth;resizeSets.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-diff})}this.columnModel.resizeColumnSets({resizeSets,finished,source:"uiColumnDragged"}),finished&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},GroupResizeFeature.prototype.calculateInitialValues=function(){var _this=this,leafCols=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=leafCols.filter((function(col){return col.isResizable()})),this.resizeStartWidth=0,this.resizeCols.forEach((function(col){return _this.resizeStartWidth+=col.getActualWidth()})),this.resizeRatios=[],this.resizeCols.forEach((function(col){return _this.resizeRatios.push(col.getActualWidth()/_this.resizeStartWidth)}))},GroupResizeFeature.prototype.normaliseDragChange=function(dragChange){var result=dragChange;return this.gridOptionsWrapper.isEnableRtl()?this.pinned!==Constants.PINNED_LEFT&&(result*=-1):this.pinned===Constants.PINNED_RIGHT&&(result*=-1),result},__decorate$1f([Autowired("horizontalResizeService")],GroupResizeFeature.prototype,"horizontalResizeService",void 0),__decorate$1f([Autowired("autoWidthCalculator")],GroupResizeFeature.prototype,"autoWidthCalculator",void 0),__decorate$1f([Autowired("columnModel")],GroupResizeFeature.prototype,"columnModel",void 0),__decorate$1f([PostConstruct],GroupResizeFeature.prototype,"postConstruct",null),GroupResizeFeature}(BeanStub),__extends$1t=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1g=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GroupWidthFeature=function(_super){function GroupWidthFeature(comp,columnGroup){var _this=_super.call(this)||this;return _this.removeChildListenersFuncs=[],_this.columnGroup=columnGroup,_this.comp=comp,_this}return __extends$1t(GroupWidthFeature,_super),GroupWidthFeature.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},GroupWidthFeature.prototype.addListenersToChildrenColumns=function(){var _this=this;this.removeListenersOnChildrenColumns();var widthChangedListener=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach((function(column){column.addEventListener(Column.EVENT_WIDTH_CHANGED,widthChangedListener),column.addEventListener(Column.EVENT_VISIBLE_CHANGED,widthChangedListener),_this.removeChildListenersFuncs.push((function(){column.removeEventListener(Column.EVENT_WIDTH_CHANGED,widthChangedListener),column.removeEventListener(Column.EVENT_VISIBLE_CHANGED,widthChangedListener)}))}))},GroupWidthFeature.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach((function(func){return func()})),this.removeChildListenersFuncs=[]},GroupWidthFeature.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},GroupWidthFeature.prototype.onWidthChanged=function(){this.comp.setWidth(this.columnGroup.getActualWidth()+"px")},__decorate$1g([PostConstruct],GroupWidthFeature.prototype,"postConstruct",null),GroupWidthFeature}(BeanStub),__extends$1u=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1h=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderGroupCellCtrl=function(_super){function HeaderGroupCellCtrl(columnGroup,parentRowCtrl){var _this=_super.call(this,columnGroup,parentRowCtrl)||this;return _this.columnGroup=columnGroup,_this}return __extends$1u(HeaderGroupCellCtrl,_super),HeaderGroupCellCtrl.prototype.setComp=function(comp,eGui,eResize){_super.prototype.setGui.call(this,eGui),this.comp=comp,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.addAttributes(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();var pinned=this.getParentRowCtrl().getPinned(),leafCols=this.columnGroup.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new HoverFeature(leafCols,eGui)),this.createManagedBean(new SetLeftFeature(this.columnGroup,eGui,this.beans)),this.createManagedBean(new GroupWidthFeature(comp,this.columnGroup)),this.groupResizeFeature=this.createManagedBean(new GroupResizeFeature(comp,eResize,pinned,this.columnGroup)),this.createManagedBean(new ManagedFocusFeature(eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},HeaderGroupCellCtrl.prototype.resizeLeafColumnsToFit=function(){this.groupResizeFeature.onResizeStart(!1),this.groupResizeFeature.resizeLeafColumnsToFit()},HeaderGroupCellCtrl.prototype.setupUserComp=function(){var _this=this,displayName=this.displayName,params={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:function(expanded){_this.columnModel.setColumnGroupOpened(_this.columnGroup.getProvidedColumnGroup(),expanded,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};if(!displayName){for(var columnGroup=this.columnGroup,leafCols=columnGroup.getLeafColumns();columnGroup.getParent()&&columnGroup.getParent().getLeafColumns().length===leafCols.length;)columnGroup=columnGroup.getParent();var colGroupDef=columnGroup.getColGroupDef();colGroupDef&&(displayName=colGroupDef.headerName),displayName||(displayName=leafCols?this.columnModel.getDisplayNameForColumn(leafCols[0],"header",!0):"")}var compDetails=this.userComponentFactory.getHeaderGroupCompDetails(params);this.comp.setUserCompDetails(compDetails)},HeaderGroupCellCtrl.prototype.setupTooltip=function(){var _this=this,colGroupDef=this.columnGroup.getColGroupDef(),tooltipCtrl={getColumn:function(){return _this.columnGroup},getGui:function(){return _this.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return colGroupDef&&colGroupDef.headerTooltip}};colGroupDef&&(tooltipCtrl.getColDef=function(){return colGroupDef}),this.createManagedBean(new TooltipFeature(tooltipCtrl,this.beans)).setComp(this.comp)},HeaderGroupCellCtrl.prototype.setupExpandable=function(){var providedColGroup=this.columnGroup.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(providedColGroup,ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(providedColGroup,ProvidedColumnGroup.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},HeaderGroupCellCtrl.prototype.refreshExpanded=function(){var column=this.columnGroup;this.expandable=column.isExpandable();var expanded=column.isExpanded();this.expandable?this.comp.setAriaExpanded(expanded?"true":"false"):this.comp.setAriaExpanded(void 0)},HeaderGroupCellCtrl.prototype.addAttributes=function(){this.comp.setColId(this.columnGroup.getUniqueId())},HeaderGroupCellCtrl.prototype.addClasses=function(){var _this=this,colGroupDef=this.columnGroup.getColGroupDef(),classes=CssClassApplier.getHeaderClassesFromColDef(colGroupDef,this.gridOptionsWrapper,null,this.columnGroup);classes.push(this.columnGroup.isPadding()?"ag-header-group-cell-no-group":"ag-header-group-cell-with-group"),classes.forEach((function(c){return _this.comp.addOrRemoveCssClass(c,!0)}))},HeaderGroupCellCtrl.prototype.setupMovingCss=function(){var _this=this,leafColumns=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),listener=function(){return _this.comp.addOrRemoveCssClass("ag-header-cell-moving",_this.columnGroup.isMoving())};leafColumns.forEach((function(col){_this.addManagedListener(col,Column.EVENT_MOVING_CHANGED,listener)})),listener()},HeaderGroupCellCtrl.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var rowIndex=this.getRowIndex();this.beans.focusService.setFocusedHeader(rowIndex,this.columnGroup)}},HeaderGroupCellCtrl.prototype.handleKeyDown=function(e){var wrapperHasFocus=this.gridOptionsWrapper.getDocument().activeElement===this.eGui;if(this.expandable&&wrapperHasFocus&&e.key===KeyCode.ENTER){var column=this.columnGroup,newExpandedValue=!column.isExpanded();this.columnModel.setColumnGroupOpened(column.getProvidedColumnGroup(),newExpandedValue,"uiColumnExpanded")}},HeaderGroupCellCtrl.prototype.setDragSource=function(eHeaderGroup){var _this=this;if(!this.isSuppressMoving()){var allLeafColumns=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),dragSource={type:exports.DragSourceType.HeaderCell,eElement:eHeaderGroup,defaultIconName:DragAndDropService.ICON_HIDE,dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:function(){return allLeafColumns.forEach((function(col){return col.setMoving(!0,"uiColumnDragged")}))},onDragStopped:function(){return allLeafColumns.forEach((function(col){return col.setMoving(!1,"uiColumnDragged")}))}};this.dragAndDropService.addDragSource(dragSource,!0),this.addDestroyFunc((function(){return _this.dragAndDropService.removeDragSource(dragSource)}))}},HeaderGroupCellCtrl.prototype.getDragItemForGroup=function(){var allColumnsOriginalOrder=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),visibleState={};allColumnsOriginalOrder.forEach((function(column){return visibleState[column.getId()]=column.isVisible()}));var allColumnsCurrentOrder=[];return this.columnModel.getAllDisplayedColumns().forEach((function(column){allColumnsOriginalOrder.indexOf(column)>=0&&(allColumnsCurrentOrder.push(column),removeFromArray(allColumnsOriginalOrder,column))})),allColumnsOriginalOrder.forEach((function(column){return allColumnsCurrentOrder.push(column)})),{columns:allColumnsCurrentOrder,visibleState}},HeaderGroupCellCtrl.prototype.isSuppressMoving=function(){var childSuppressesMoving=!1;return this.columnGroup.getLeafColumns().forEach((function(column){(column.getColDef().suppressMovable||column.getColDef().lockPosition)&&(childSuppressesMoving=!0)})),childSuppressesMoving||this.gridOptionsWrapper.isSuppressMovableColumns()},__decorate$1h([Autowired("beans")],HeaderGroupCellCtrl.prototype,"beans",void 0),__decorate$1h([Autowired("columnModel")],HeaderGroupCellCtrl.prototype,"columnModel",void 0),__decorate$1h([Autowired("dragAndDropService")],HeaderGroupCellCtrl.prototype,"dragAndDropService",void 0),__decorate$1h([Autowired("userComponentFactory")],HeaderGroupCellCtrl.prototype,"userComponentFactory",void 0),__decorate$1h([Autowired("gridApi")],HeaderGroupCellCtrl.prototype,"gridApi",void 0),__decorate$1h([Autowired("columnApi")],HeaderGroupCellCtrl.prototype,"columnApi",void 0),HeaderGroupCellCtrl}(AbstractHeaderCellCtrl),__extends$1v=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1i=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},instanceIdSequence$4=0,HeaderRowCtrl=function(_super){function HeaderRowCtrl(rowIndex,pinned,type){var _this=_super.call(this)||this;return _this.instanceId=instanceIdSequence$4++,_this.headerCellCtrls={},_this.rowIndex=rowIndex,_this.pinned=pinned,_this.type=type,_this}return __extends$1v(HeaderRowCtrl,_super),HeaderRowCtrl.prototype.getInstanceId=function(){return this.instanceId},HeaderRowCtrl.prototype.setComp=function(comp){this.comp=comp,this.onRowHeightChanged(),this.onVirtualColumnsChanged(),this.setWidth(),this.addEventListeners(),isBrowserSafari()&&this.comp.setTransform("translateZ(0)"),comp.setAriaRowIndex(this.rowIndex+1)},HeaderRowCtrl.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_DOM_LAYOUT,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,this.onRowHeightChanged.bind(this))},HeaderRowCtrl.prototype.getHeaderCellCtrl=function(column){return values(this.headerCellCtrls).find((function(cellCtrl){return cellCtrl.getColumnGroupChild()===column}))},HeaderRowCtrl.prototype.onDisplayedColumnsChanged=function(){this.onVirtualColumnsChanged(),this.setWidth()},HeaderRowCtrl.prototype.getType=function(){return this.type},HeaderRowCtrl.prototype.onColumnResized=function(){this.setWidth()},HeaderRowCtrl.prototype.setWidth=function(){var width=this.getWidthForRow();this.comp.setWidth(width+"px")},HeaderRowCtrl.prototype.getWidthForRow=function(){return this.gridOptionsWrapper.getDomLayout()===Constants.DOM_LAYOUT_PRINT?null!=this.pinned?0:this.columnModel.getContainerWidth(Constants.PINNED_RIGHT)+this.columnModel.getContainerWidth(Constants.PINNED_LEFT)+this.columnModel.getContainerWidth(null):this.columnModel.getContainerWidth(this.pinned)},HeaderRowCtrl.prototype.onRowHeightChanged=function(){var groupHeight,headerHeight,headerRowCount=this.columnModel.getHeaderRowCount(),sizes=[],numberOfFloating=0;this.columnModel.hasFloatingFilters()&&(headerRowCount++,numberOfFloating=1),this.columnModel.isPivotMode()?(groupHeight=this.gridOptionsWrapper.getPivotGroupHeaderHeight(),headerHeight=this.gridOptionsWrapper.getPivotHeaderHeight()):(groupHeight=this.gridOptionsWrapper.getGroupHeaderHeight(),headerHeight=this.gridOptionsWrapper.getHeaderHeight());for(var numberOfGroups=headerRowCount-(1+numberOfFloating),i=0;i<numberOfGroups;i++)sizes.push(groupHeight);sizes.push(headerHeight);for(i=0;i<numberOfFloating;i++)sizes.push(this.gridOptionsWrapper.getFloatingFiltersHeight());var rowHeight=0;for(i=0;i<this.rowIndex;i++)rowHeight+=sizes[i];this.comp.setTop(rowHeight+"px"),this.comp.setHeight(sizes[this.rowIndex]+"px")},HeaderRowCtrl.prototype.getPinned=function(){return this.pinned},HeaderRowCtrl.prototype.getRowIndex=function(){return this.rowIndex},HeaderRowCtrl.prototype.onVirtualColumnsChanged=function(){var _this=this,oldCtrls=this.headerCellCtrls;this.headerCellCtrls={},this.getColumnsInViewport().forEach((function(child){if(!child.isEmptyGroup()){var idOfChild=child.getUniqueId(),headerCtrl=oldCtrls[idOfChild];if(delete oldCtrls[idOfChild],headerCtrl&&headerCtrl.getColumnGroupChild()!=child&&(_this.destroyBean(headerCtrl),headerCtrl=void 0),null==headerCtrl)switch(_this.type){case exports.HeaderRowType.FLOATING_FILTER:headerCtrl=_this.createBean(new HeaderFilterCellCtrl(child,_this));break;case exports.HeaderRowType.COLUMN_GROUP:headerCtrl=_this.createBean(new HeaderGroupCellCtrl(child,_this));break;default:headerCtrl=_this.createBean(new HeaderCellCtrl(child,_this))}_this.headerCellCtrls[idOfChild]=headerCtrl}}));iterateObject(oldCtrls,(function(id,oldCtrl){var ctrl;(ctrl=oldCtrl,!!_this.focusService.isHeaderWrapperFocused(ctrl)&&_this.columnModel.isDisplayed(ctrl.getColumnGroupChild()))?_this.headerCellCtrls[id]=oldCtrl:_this.destroyBean(oldCtrl)}));var ctrlsToDisplay=getAllValuesInObject(this.headerCellCtrls);this.comp.setHeaderCtrls(ctrlsToDisplay)},HeaderRowCtrl.prototype.destroyCtrls=function(){var _this=this;iterateObject(this.headerCellCtrls,(function(key,ctrl){_this.destroyBean(ctrl)})),this.headerCellCtrls={}},HeaderRowCtrl.prototype.getColumnsInViewport=function(){return this.gridOptionsWrapper.getDomLayout()===Constants.DOM_LAYOUT_PRINT?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},HeaderRowCtrl.prototype.getColumnsInViewportPrintLayout=function(){var _this=this;if(null!=this.pinned)return[];var viewportColumns=[],actualDepth=this.getActualDepth();return[Constants.PINNED_LEFT,null,Constants.PINNED_RIGHT].forEach((function(pinned){var items=_this.columnModel.getVirtualHeaderGroupRow(pinned,actualDepth);viewportColumns=viewportColumns.concat(items)})),viewportColumns},HeaderRowCtrl.prototype.getActualDepth=function(){return this.type==exports.HeaderRowType.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},HeaderRowCtrl.prototype.getColumnsInViewportNormalLayout=function(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},HeaderRowCtrl.prototype.focusHeader=function(column,event){var ctrl=getAllValuesInObject(this.headerCellCtrls).find((function(ctrl){return ctrl.getColumnGroupChild()==column}));return!!ctrl&&(ctrl.focus(event),!0)},__decorate$1i([Autowired("columnModel")],HeaderRowCtrl.prototype,"columnModel",void 0),__decorate$1i([Autowired("focusService")],HeaderRowCtrl.prototype,"focusService",void 0),__decorate$1i([PreDestroy],HeaderRowCtrl.prototype,"destroyCtrls",null),HeaderRowCtrl}(BeanStub),__extends$1w=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1j=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$c=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$9=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$c(arguments[i]));return ar},HeaderRowContainerCtrl=function(_super){function HeaderRowContainerCtrl(pinned){var _this=_super.call(this)||this;return _this.groupsRowCtrls=[],_this.pinned=pinned,_this}return __extends$1w(HeaderRowContainerCtrl,_super),HeaderRowContainerCtrl.prototype.setComp=function(comp,eGui){this.comp=comp,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(eGui),this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},HeaderRowContainerCtrl.prototype.setupDragAndDrop=function(dropContainer){var bodyDropTarget=new BodyDropTarget(this.pinned,dropContainer);this.createManagedBean(bodyDropTarget)},HeaderRowContainerCtrl.prototype.refresh=function(keepColumns){var _this=this;void 0===keepColumns&&(keepColumns=!1);var rowIndex,sequence=new NumberSequence,focusedHeaderPosition=this.focusService.getFocusHeaderToUseAfterRefresh();!function(){var groupRowCount=_this.columnModel.getHeaderRowCount()-1;_this.groupsRowCtrls=_this.destroyBeans(_this.groupsRowCtrls);for(var i=0;i<groupRowCount;i++){var ctrl=_this.createBean(new HeaderRowCtrl(sequence.next(),_this.pinned,exports.HeaderRowType.COLUMN_GROUP));_this.groupsRowCtrls.push(ctrl)}}(),rowIndex=sequence.next(),(null==_this.columnsRowCtrl||!keepColumns||_this.columnsRowCtrl.getRowIndex()!==rowIndex)&&(_this.destroyBean(_this.columnsRowCtrl),_this.columnsRowCtrl=_this.createBean(new HeaderRowCtrl(rowIndex,_this.pinned,exports.HeaderRowType.COLUMN))),function(){var destroyPreviousComp=function(){_this.filtersRowCtrl=_this.destroyBean(_this.filtersRowCtrl)};if(_this.columnModel.hasFloatingFilters()){var rowIndex=sequence.next();if(_this.filtersRowCtrl){var rowIndexMismatch=_this.filtersRowCtrl.getRowIndex()!==rowIndex;keepColumns&&!rowIndexMismatch||destroyPreviousComp()}_this.filtersRowCtrl||(_this.filtersRowCtrl=_this.createBean(new HeaderRowCtrl(rowIndex,_this.pinned,exports.HeaderRowType.FLOATING_FILTER)))}else destroyPreviousComp()}();var allCtrls=this.getAllCtrls();this.comp.setCtrls(allCtrls),this.restoreFocusOnHeader(focusedHeaderPosition)},HeaderRowContainerCtrl.prototype.restoreFocusOnHeader=function(position){null!=position&&position.column.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:position})},HeaderRowContainerCtrl.prototype.getAllCtrls=function(){var res=__spread$9(this.groupsRowCtrls,[this.columnsRowCtrl]);return this.filtersRowCtrl&&res.push(this.filtersRowCtrl),res},HeaderRowContainerCtrl.prototype.onGridColumnsChanged=function(){this.refresh(!0)},HeaderRowContainerCtrl.prototype.setupCenterWidth=function(){var _this=this;null==this.pinned&&this.createManagedBean(new CenterWidthFeature((function(width){return _this.comp.setCenterWidth(width+"px")})))},HeaderRowContainerCtrl.prototype.setHorizontalScroll=function(offset){this.comp.setContainerTransform("translateX("+offset+"px)")},HeaderRowContainerCtrl.prototype.setupPinnedWidth=function(){var _this=this;if(null!=this.pinned){var pinningLeft=this.pinned===Constants.PINNED_LEFT,pinningRight=this.pinned===Constants.PINNED_RIGHT,listener=function(){var width=pinningLeft?_this.pinnedWidthService.getPinnedLeftWidth():_this.pinnedWidthService.getPinnedRightWidth();if(null!=width){var hidden=0==width,isRtl=_this.gridOptionsWrapper.isEnableRtl(),scrollbarWidth=_this.gridOptionsWrapper.getScrollbarWidth(),widthWithPadding=_this.scrollVisibleService.isVerticalScrollShowing()&&(isRtl&&pinningLeft||!isRtl&&pinningRight)?width+scrollbarWidth:width;_this.comp.setPinnedContainerWidth(widthWithPadding+"px"),_this.comp.addOrRemoveCssClass("ag-hidden",hidden)}};this.addManagedListener(this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_SCROLLBAR_WIDTH_CHANGED,listener)}},HeaderRowContainerCtrl.prototype.getHeaderCtrlForColumn=function(column){if(column instanceof Column){if(!this.columnsRowCtrl)return;return this.columnsRowCtrl.getHeaderCellCtrl(column)}if(0!==this.groupsRowCtrls.length)for(var i=0;i<this.groupsRowCtrls.length;i++){var ctrl=this.groupsRowCtrls[i].getHeaderCellCtrl(column);if(ctrl)return ctrl}},HeaderRowContainerCtrl.prototype.getHtmlElementForColumnHeader=function(column){var cellCtrl=this.getHeaderCtrlForColumn(column);return cellCtrl?cellCtrl.getGui():null},HeaderRowContainerCtrl.prototype.getRowType=function(rowIndex){var ctrl=this.getAllCtrls()[rowIndex];return ctrl?ctrl.getType():void 0},HeaderRowContainerCtrl.prototype.focusHeader=function(rowIndex,column,event){var ctrl=this.getAllCtrls()[rowIndex];return!!ctrl&&ctrl.focusHeader(column,event)},HeaderRowContainerCtrl.prototype.getRowCount=function(){return this.getAllCtrls().length},__decorate$1j([Autowired("ctrlsService")],HeaderRowContainerCtrl.prototype,"ctrlsService",void 0),__decorate$1j([Autowired("scrollVisibleService")],HeaderRowContainerCtrl.prototype,"scrollVisibleService",void 0),__decorate$1j([Autowired("pinnedWidthService")],HeaderRowContainerCtrl.prototype,"pinnedWidthService",void 0),__decorate$1j([Autowired("columnModel")],HeaderRowContainerCtrl.prototype,"columnModel",void 0),__decorate$1j([Autowired("focusService")],HeaderRowContainerCtrl.prototype,"focusService",void 0),HeaderRowContainerCtrl}(BeanStub),__extends$1x=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1k=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderRowContainerComp=function(_super){function HeaderRowContainerComp(pinned){var _this=_super.call(this)||this;return _this.headerRowComps={},_this.rowCompsList=[],_this.pinned=pinned,_this}return __extends$1x(HeaderRowContainerComp,_super),HeaderRowContainerComp.prototype.init=function(){var _this=this;this.selectAndSetTemplate();var compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setCtrls:function(ctrls){return _this.setCtrls(ctrls)},setCenterWidth:function(width){return _this.eCenterContainer.style.width=width},setContainerTransform:function(transform){return _this.eCenterContainer.style.transform=transform},setPinnedContainerWidth:function(width){var eGui=_this.getGui();eGui.style.width=width,eGui.style.maxWidth=width,eGui.style.minWidth=width}};this.createManagedBean(new HeaderRowContainerCtrl(this.pinned)).setComp(compProxy,this.getGui())},HeaderRowContainerComp.prototype.selectAndSetTemplate=function(){var pinnedLeft=this.pinned==Constants.PINNED_LEFT,pinnedRight=this.pinned==Constants.PINNED_RIGHT,template=pinnedLeft?HeaderRowContainerComp.PINNED_LEFT_TEMPLATE:pinnedRight?HeaderRowContainerComp.PINNED_RIGHT_TEMPLATE:HeaderRowContainerComp.CENTER_TEMPLATE;this.setTemplate(template),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},HeaderRowContainerComp.prototype.destroyRowComps=function(){this.setCtrls([])},HeaderRowContainerComp.prototype.destroyRowComp=function(rowComp){this.destroyBean(rowComp),this.eRowContainer.removeChild(rowComp.getGui())},HeaderRowContainerComp.prototype.setCtrls=function(ctrls){var prevGui,_this=this,oldRowComps=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];ctrls.forEach((function(ctrl){var ctrlId=ctrl.getInstanceId(),existingComp=oldRowComps[ctrlId];delete oldRowComps[ctrlId];var rowComp=existingComp||_this.createBean(new HeaderRowComp(ctrl));_this.headerRowComps[ctrlId]=rowComp,_this.rowCompsList.push(rowComp),function(rowComp){var eGui=rowComp.getGui();eGui.parentElement!=_this.eRowContainer&&_this.eRowContainer.appendChild(eGui),prevGui&&ensureDomOrder(_this.eRowContainer,eGui,prevGui),prevGui=eGui}(rowComp)})),getAllValuesInObject(oldRowComps).forEach((function(c){return _this.destroyRowComp(c)}))},HeaderRowContainerComp.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"/>',HeaderRowContainerComp.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"/>',HeaderRowContainerComp.CENTER_TEMPLATE='<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>',__decorate$1k([RefSelector("eCenterContainer")],HeaderRowContainerComp.prototype,"eCenterContainer",void 0),__decorate$1k([PostConstruct],HeaderRowContainerComp.prototype,"init",null),__decorate$1k([PreDestroy],HeaderRowContainerComp.prototype,"destroyRowComps",null),HeaderRowContainerComp}(Component),__extends$1y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1l=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};(HeaderNavigationDirection=exports.HeaderNavigationDirection||(exports.HeaderNavigationDirection={}))[HeaderNavigationDirection.UP=0]="UP",HeaderNavigationDirection[HeaderNavigationDirection.DOWN=1]="DOWN",HeaderNavigationDirection[HeaderNavigationDirection.LEFT=2]="LEFT",HeaderNavigationDirection[HeaderNavigationDirection.RIGHT=3]="RIGHT";var HeaderNavigationService=function(_super){function HeaderNavigationService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1y(HeaderNavigationService,_super),HeaderNavigationService.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){_this.gridBodyCon=p.gridBodyCtrl}))},HeaderNavigationService.prototype.getHeaderRowCount=function(){var centerHeaderContainer=this.ctrlsService.getHeaderRowContainerCtrl();return centerHeaderContainer?centerHeaderContainer.getRowCount():0},HeaderNavigationService.prototype.getHeaderRowType=function(rowIndex){var centerHeaderContainer=this.ctrlsService.getHeaderRowContainerCtrl();if(centerHeaderContainer)return centerHeaderContainer.getRowType(rowIndex)},HeaderNavigationService.prototype.navigateVertically=function(direction,fromHeader,event){if(fromHeader||(fromHeader=this.focusService.getFocusedHeader()),!fromHeader)return!1;var headerRowIndex=fromHeader.headerRowIndex,column=fromHeader.column,rowLen=this.getHeaderRowCount(),isUp=direction===exports.HeaderNavigationDirection.UP,nextRow=isUp?headerRowIndex-1:headerRowIndex+1,nextFocusColumn=null,skipColumn=!1;nextRow<0&&(nextRow=0,nextFocusColumn=column,skipColumn=!0),nextRow>=rowLen&&(nextRow=-1);var currentRowType=this.getHeaderRowType(headerRowIndex);if(!skipColumn){if(currentRowType===exports.HeaderRowType.COLUMN_GROUP){var currentColumn=column;nextFocusColumn=isUp?column.getParent():currentColumn.getDisplayedChildren()[0]}else if(currentRowType===exports.HeaderRowType.FLOATING_FILTER)nextFocusColumn=column;else{currentColumn=column;nextFocusColumn=isUp?currentColumn.getParent():currentColumn}if(!nextFocusColumn)return!1}return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:nextRow,column:nextFocusColumn},allowUserOverride:!0,event})},HeaderNavigationService.prototype.navigateHorizontally=function(direction,fromTab,event){void 0===fromTab&&(fromTab=!1);var nextHeader,normalisedDirection,focusedHeader=this.focusService.getFocusedHeader();return direction===exports.HeaderNavigationDirection.LEFT!==this.gridOptionsWrapper.isEnableRtl()?(normalisedDirection="Before",nextHeader=this.headerPositionUtils.findHeader(focusedHeader,normalisedDirection)):(normalisedDirection="After",nextHeader=this.headerPositionUtils.findHeader(focusedHeader,normalisedDirection)),nextHeader?this.focusService.focusHeaderPosition({headerPosition:nextHeader,direction:normalisedDirection,fromTab,allowUserOverride:!0,event}):!fromTab||this.focusNextHeaderRow(focusedHeader,normalisedDirection,event)},HeaderNavigationService.prototype.focusNextHeaderRow=function(focusedHeader,direction,event){var nextRowIndex,currentIndex=focusedHeader.headerRowIndex,nextPosition=null;return"Before"===direction?currentIndex>0&&(nextRowIndex=currentIndex-1,nextPosition=this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex,"end")):(nextRowIndex=currentIndex+1,nextPosition=this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex,"start")),this.focusService.focusHeaderPosition({headerPosition:nextPosition,direction,fromTab:!0,allowUserOverride:!0,event})},HeaderNavigationService.prototype.scrollToColumn=function(column,direction){if(void 0===direction&&(direction="After"),!column.getPinned()){var columnToScrollTo;if(column instanceof ColumnGroup){var columns=column.getDisplayedLeafColumns();columnToScrollTo="Before"===direction?last(columns):columns[0]}else columnToScrollTo=column;this.gridBodyCon.getScrollFeature().ensureColumnVisible(columnToScrollTo),this.gridBodyCon.getScrollFeature().horizontallyScrollHeaderCenterAndFloatingCenter(),this.animationFrameService.flushAllFrames()}},__decorate$1l([Autowired("focusService")],HeaderNavigationService.prototype,"focusService",void 0),__decorate$1l([Autowired("headerPositionUtils")],HeaderNavigationService.prototype,"headerPositionUtils",void 0),__decorate$1l([Autowired("animationFrameService")],HeaderNavigationService.prototype,"animationFrameService",void 0),__decorate$1l([Autowired("ctrlsService")],HeaderNavigationService.prototype,"ctrlsService",void 0),__decorate$1l([PostConstruct],HeaderNavigationService.prototype,"postConstruct",null),HeaderNavigationService=__decorate$1l([Bean("headerNavigationService")],HeaderNavigationService)}(BeanStub),__extends$1z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1m=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridHeaderCtrl=function(_super){function GridHeaderCtrl(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1z(GridHeaderCtrl,_super),GridHeaderCtrl.prototype.setComp=function(comp,eGui,eFocusableElement){this.comp=comp,this.eGui=eGui,this.createManagedBean(new ManagedFocusFeature(eFocusableElement,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)},GridHeaderCtrl.prototype.setupHeaderHeight=function(){var listener=this.setHeaderHeight.bind(this);listener(),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_HEADER_HEIGHT,listener),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,listener),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,listener),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,listener),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,listener)},GridHeaderCtrl.prototype.setHeaderHeight=function(){var totalHeaderHeight,groupHeight,headerHeight,columnModel=this.columnModel,gridOptionsWrapper=this.gridOptionsWrapper,numberOfFloating=0,headerRowCount=columnModel.getHeaderRowCount();columnModel.hasFloatingFilters()&&(headerRowCount++,numberOfFloating=1),columnModel.isPivotMode()?(groupHeight=gridOptionsWrapper.getPivotGroupHeaderHeight(),headerHeight=gridOptionsWrapper.getPivotHeaderHeight()):(groupHeight=gridOptionsWrapper.getGroupHeaderHeight(),headerHeight=gridOptionsWrapper.getHeaderHeight());var numberOfGroups=headerRowCount-(1+numberOfFloating);totalHeaderHeight=numberOfFloating*gridOptionsWrapper.getFloatingFiltersHeight(),totalHeaderHeight+=numberOfGroups*groupHeight;var px=(totalHeaderHeight+=headerHeight)+1+"px";this.comp.setHeightAndMinHeight(px)},GridHeaderCtrl.prototype.onPivotModeChanged=function(){var pivotMode=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",pivotMode),this.comp.addOrRemoveCssClass("ag-pivot-off",!pivotMode)},GridHeaderCtrl.prototype.onTabKeyDown=function(e){var isRtl=this.gridOptionsWrapper.isEnableRtl(),direction=e.shiftKey!==isRtl?exports.HeaderNavigationDirection.LEFT:exports.HeaderNavigationDirection.RIGHT;(this.headerNavigationService.navigateHorizontally(direction,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()},GridHeaderCtrl.prototype.handleKeyDown=function(e){var direction=null;switch(e.key){case KeyCode.LEFT:direction=exports.HeaderNavigationDirection.LEFT;case KeyCode.RIGHT:exists(direction)||(direction=exports.HeaderNavigationDirection.RIGHT),this.headerNavigationService.navigateHorizontally(direction,!1,e);break;case KeyCode.UP:direction=exports.HeaderNavigationDirection.UP;case KeyCode.DOWN:exists(direction)||(direction=exports.HeaderNavigationDirection.DOWN),this.headerNavigationService.navigateVertically(direction,null,e)&&e.preventDefault();break;default:return}},GridHeaderCtrl.prototype.onFocusOut=function(e){var eDocument=this.gridOptionsWrapper.getDocument(),relatedTarget=e.relatedTarget;!relatedTarget&&this.eGui.contains(eDocument.activeElement)||this.eGui.contains(relatedTarget)||this.focusService.clearFocusedHeader()},__decorate$1m([Autowired("headerNavigationService")],GridHeaderCtrl.prototype,"headerNavigationService",void 0),__decorate$1m([Autowired("focusService")],GridHeaderCtrl.prototype,"focusService",void 0),__decorate$1m([Autowired("columnModel")],GridHeaderCtrl.prototype,"columnModel",void 0),__decorate$1m([Autowired("ctrlsService")],GridHeaderCtrl.prototype,"ctrlsService",void 0),GridHeaderCtrl}(BeanStub),__extends$1A=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1n=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridHeaderComp=function(_super){function GridHeaderComp(){return _super.call(this,GridHeaderComp.TEMPLATE)||this}return __extends$1A(GridHeaderComp,_super),GridHeaderComp.prototype.postConstruct=function(){var _this=this,compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setHeightAndMinHeight:function(height){_this.getGui().style.height=height,_this.getGui().style.minHeight=height}};this.createManagedBean(new GridHeaderCtrl).setComp(compProxy,this.getGui(),this.getFocusableElement());var addContainer=function(container){_this.createManagedBean(container),_this.appendChild(container)};addContainer(new HeaderRowContainerComp(Constants.PINNED_LEFT)),addContainer(new HeaderRowContainerComp(null)),addContainer(new HeaderRowContainerComp(Constants.PINNED_RIGHT))},GridHeaderComp.TEMPLATE='<div class="ag-header" role="presentation"/>',__decorate$1n([PostConstruct],GridHeaderComp.prototype,"postConstruct",null),GridHeaderComp}(Component),__extends$1B=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1o=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HorizontalResizeService=function(_super){function HorizontalResizeService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1B(HorizontalResizeService,_super),HorizontalResizeService.prototype.addResizeBar=function(params){var _this=this,dragSource={dragStartPixels:params.dragStartPixels||0,eElement:params.eResizeBar,onDragStart:this.onDragStart.bind(this,params),onDragStop:this.onDragStop.bind(this,params),onDragging:this.onDragging.bind(this,params)};this.dragService.addDragSource(dragSource,!0);return function(){return _this.dragService.removeDragSource(dragSource)}},HorizontalResizeService.prototype.onDragStart=function(params,mouseEvent){this.dragStartX=mouseEvent.clientX,this.setResizeIcons();var shiftKey=mouseEvent instanceof MouseEvent&&!0===mouseEvent.shiftKey;params.onResizeStart(shiftKey)},HorizontalResizeService.prototype.setResizeIcons=function(){var ctrl=this.ctrlsService.getGridCtrl();ctrl.setResizeCursor(!0),ctrl.disableUserSelect(!0)},HorizontalResizeService.prototype.onDragStop=function(params,mouseEvent){params.onResizeEnd(this.resizeAmount),this.resetIcons()},HorizontalResizeService.prototype.resetIcons=function(){var ctrl=this.ctrlsService.getGridCtrl();ctrl.setResizeCursor(!1),ctrl.disableUserSelect(!1)},HorizontalResizeService.prototype.onDragging=function(params,mouseEvent){this.resizeAmount=mouseEvent.clientX-this.dragStartX,params.onResizing(this.resizeAmount)},__decorate$1o([Autowired("dragService")],HorizontalResizeService.prototype,"dragService",void 0),__decorate$1o([Autowired("ctrlsService")],HorizontalResizeService.prototype,"ctrlsService",void 0),HorizontalResizeService=__decorate$1o([Bean("horizontalResizeService")],HorizontalResizeService)}(BeanStub),__extends$1C=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1p=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},StandardMenuFactory=function(_super){function StandardMenuFactory(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1C(StandardMenuFactory,_super),StandardMenuFactory.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},StandardMenuFactory.prototype.showMenuAfterMouseEvent=function(column,mouseEvent){var _this=this;this.showPopup(column,(function(eMenu){_this.popupService.positionPopupUnderMouseEvent({column,type:"columnMenu",mouseEvent,ePopup:eMenu})}),mouseEvent.target)},StandardMenuFactory.prototype.showMenuAfterButtonClick=function(column,eventSource,containerType){var _this=this;this.showPopup(column,(function(eMenu){_this.popupService.positionPopupUnderComponent({type:containerType,eventSource,ePopup:eMenu,keepWithinBounds:!0,column})}),eventSource)},StandardMenuFactory.prototype.showPopup=function(column,positionCallback,eventSource){var _this=this,filterWrapper=this.filterManager.getOrCreateFilterWrapper(column,"COLUMN_MENU");if(!filterWrapper)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");var hidePopup,eMenu=document.createElement("div");setAriaRole(eMenu,"presentation"),eMenu.classList.add("ag-menu"),this.tabListener=this.addManagedListener(eMenu,"keydown",(function(e){return _this.trapFocusWithin(e,eMenu)})),filterWrapper.guiPromise.then((function(gui){return eMenu.appendChild(gui)}));var anchorToElement=eventSource||this.ctrlsService.getGridBodyCtrl().getGui(),translate=this.gridOptionsWrapper.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal:!0,eChild:eMenu,closeOnEsc:!0,closedCallback:function(e){column.setMenuVisible(!1,"contextMenu");var isKeyboardEvent=e instanceof KeyboardEvent;if(_this.tabListener&&(_this.tabListener=_this.tabListener()),isKeyboardEvent&&eventSource&&isVisible(eventSource)){var focusableEl=_this.focusService.findTabbableParent(eventSource);focusableEl&&focusableEl.focus()}},positionCallback:function(){return positionCallback(eMenu)},anchorToElement,ariaLabel:translate("ariaLabelColumnMenu","Column Menu")});addPopupRes&&(this.hidePopup=hidePopup=addPopupRes.hideFunc),filterWrapper.filterPromise.then((function(filter){positionCallback(eMenu),filter.afterGuiAttached&&filter.afterGuiAttached({container:"columnMenu",hidePopup})})),column.setMenuVisible(!0,"contextMenu")},StandardMenuFactory.prototype.trapFocusWithin=function(e,menu){e.key!==KeyCode.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(menu,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(menu,e.shiftKey))},StandardMenuFactory.prototype.isMenuEnabled=function(column){return column.isFilterAllowed()},__decorate$1p([Autowired("filterManager")],StandardMenuFactory.prototype,"filterManager",void 0),__decorate$1p([Autowired("popupService")],StandardMenuFactory.prototype,"popupService",void 0),__decorate$1p([Autowired("focusService")],StandardMenuFactory.prototype,"focusService",void 0),__decorate$1p([Autowired("ctrlsService")],StandardMenuFactory.prototype,"ctrlsService",void 0),StandardMenuFactory=__decorate$1p([Bean("menuFactory")],StandardMenuFactory)}(BeanStub),__extends$1D=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TabbedLayout=function(_super){function TabbedLayout(params){var _this=_super.call(this,TabbedLayout.getTemplate(params.cssClass))||this;return _this.items=[],_this.tabbedItemScrollMap=new Map,_this.params=params,params.items&&params.items.forEach((function(item){return _this.addItem(item)})),_this}return __extends$1D(TabbedLayout,_super),TabbedLayout.prototype.postConstruct=function(){this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},TabbedLayout.getTemplate=function(cssClass){return'<div class="ag-tabs '+cssClass+'">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header '+(cssClass?cssClass+"-header":"")+'"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body '+(cssClass?cssClass+"-body":"")+'"></div>\n        </div>'},TabbedLayout.prototype.handleKeyDown=function(e){var eDocument=this.gridOptionsWrapper.getDocument();switch(e.key){case KeyCode.RIGHT:case KeyCode.LEFT:if(!this.eHeader.contains(eDocument.activeElement))return;var currentPosition=this.items.indexOf(this.activeItem),nextPosition=e.key===KeyCode.RIGHT?Math.min(currentPosition+1,this.items.length-1):Math.max(currentPosition-1,0);if(currentPosition===nextPosition)return;e.preventDefault();var nextItem=this.items[nextPosition];this.showItemWrapper(nextItem),nextItem.eHeaderButton.focus();break;case KeyCode.UP:case KeyCode.DOWN:e.stopPropagation()}},TabbedLayout.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var focusService=this.focusService,eHeader=this.eHeader,eBody=this.eBody,activeItem=this.activeItem,activeElement=this.gridOptionsWrapper.getDocument().activeElement;if(e.preventDefault(),eHeader.contains(activeElement))focusService.focusInto(eBody,e.shiftKey);else if(focusService.isFocusUnderManagedComponent(eBody))activeItem.eHeaderButton.focus();else{var nextEl=focusService.findNextFocusableElement(eBody,!1,e.shiftKey);nextEl?nextEl.focus():activeItem.eHeaderButton.focus()}}},TabbedLayout.prototype.setAfterAttachedParams=function(params){this.afterAttachedParams=params},TabbedLayout.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},TabbedLayout.prototype.addItem=function(item){var eHeaderButton=document.createElement("span");setAriaRole(eHeaderButton,"tab"),eHeaderButton.setAttribute("tabIndex","-1"),eHeaderButton.appendChild(item.title),eHeaderButton.classList.add("ag-tab"),this.eHeader.appendChild(eHeaderButton),setAriaLabel(eHeaderButton,item.titleLabel);var wrapper={tabbedItem:item,eHeaderButton};this.items.push(wrapper),eHeaderButton.addEventListener("click",this.showItemWrapper.bind(this,wrapper))},TabbedLayout.prototype.showItem=function(tabbedItem){var itemWrapper=this.items.find((function(wrapper){return wrapper.tabbedItem===tabbedItem}));itemWrapper&&this.showItemWrapper(itemWrapper)},TabbedLayout.prototype.showItemWrapper=function(wrapper){var _this=this,tabbedItem=wrapper.tabbedItem,eHeaderButton=wrapper.eHeaderButton;this.params.onItemClicked&&this.params.onItemClicked({item:tabbedItem}),this.activeItem!==wrapper?(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),clearElement(this.eBody),tabbedItem.bodyPromise.then((function(body){_this.eBody.appendChild(body);var onlyUnmanaged=!_this.focusService.isKeyboardMode();if(_this.focusService.focusInto(_this.eBody,!1,onlyUnmanaged),tabbedItem.afterAttachedCallback&&tabbedItem.afterAttachedCallback(_this.afterAttachedParams),_this.params.keepScrollPosition){var scrollableContainer_1=tabbedItem.getScrollableContainer&&tabbedItem.getScrollableContainer()||body;_this.lastScrollListener=_this.addManagedListener(scrollableContainer_1,"scroll",(function(){_this.tabbedItemScrollMap.set(tabbedItem.name,scrollableContainer_1.scrollTop)}));var scrollPosition_1=_this.tabbedItemScrollMap.get(tabbedItem.name);void 0!==scrollPosition_1&&setTimeout((function(){scrollableContainer_1.scrollTop=scrollPosition_1}),0)}})),this.activeItem&&this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),eHeaderButton.classList.add("ag-tab-selected"),this.activeItem=wrapper):callIfPresent(this.params.onActiveItemClicked)},__decorate$1q([Autowired("focusService")],TabbedLayout.prototype,"focusService",void 0),__decorate$1q([RefSelector("eHeader")],TabbedLayout.prototype,"eHeader",void 0),__decorate$1q([RefSelector("eBody")],TabbedLayout.prototype,"eBody",void 0),__decorate$1q([PostConstruct],TabbedLayout.prototype,"postConstruct",null),TabbedLayout}(Component);var ServerSideTransactionResultStatus,__extends$1E=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1r=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ResizeObserverService=function(_super){function ResizeObserverService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.polyfillFunctions=[],_this}return __extends$1E(ResizeObserverService,_super),ResizeObserverService.prototype.observeResize=function(element,callback){var resizeObserver,widthLastTime,heightLastTime,running,periodicallyCheckWidthAndHeight,_this=this,win=this.gridOptionsWrapper.getDocument().defaultView||window,debouncedCallback=debounce(callback,50),suppressResize=this.gridOptionsWrapper.isSuppressBrowserResizeObserver();return!!win.ResizeObserver&&!suppressResize?((resizeObserver=new win.ResizeObserver(debouncedCallback)).observe(element),function(){return resizeObserver.disconnect()}):(widthLastTime=offsetWidth(element),heightLastTime=offsetHeight(element),running=!0,(periodicallyCheckWidthAndHeight=function(){if(running){var newWidth=offsetWidth(element),newHeight=offsetHeight(element);(newWidth!==widthLastTime||newHeight!==heightLastTime)&&(widthLastTime=newWidth,heightLastTime=newHeight,callback()),_this.doNextPolyfillTurn(periodicallyCheckWidthAndHeight)}})(),function(){return running=!1})},ResizeObserverService.prototype.doNextPolyfillTurn=function(func){this.polyfillFunctions.push(func),this.schedulePolyfill()},ResizeObserverService.prototype.schedulePolyfill=function(){var _this=this;if(!this.polyfillScheduled){this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout((function(){var funcs=_this.polyfillFunctions;_this.polyfillScheduled=!1,_this.polyfillFunctions=[],funcs.forEach((function(f){return f()}))}),50)}},ResizeObserverService=__decorate$1r([Bean("resizeObserverService")],ResizeObserverService)}(BeanStub),__extends$1F=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1s=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AnimationFrameService=function(_super){function AnimationFrameService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.createTasksP1={list:[],sorted:!1},_this.createTasksP2={list:[],sorted:!1},_this.destroyTasks=[],_this.ticking=!1,_this.scrollGoingDown=!0,_this.lastScrollTop=0,_this.taskCount=0,_this.cancelledTasks=new Set,_this}return __extends$1F(AnimationFrameService,_super),AnimationFrameService.prototype.setScrollTop=function(scrollTop){this.scrollGoingDown=scrollTop>this.lastScrollTop,this.lastScrollTop=scrollTop},AnimationFrameService.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsWrapper.isSuppressAnimationFrame()},AnimationFrameService.prototype.isOn=function(){return this.useAnimationFrame},AnimationFrameService.prototype.verifyAnimationFrameOn=function(methodName){!1===this.useAnimationFrame&&console.warn("AG Grid: AnimationFrameService."+methodName+" called but animation frames are off")},AnimationFrameService.prototype.createTask=function(task,index,list){this.verifyAnimationFrameOn(list);var taskItem={task,index,createOrder:++this.taskCount};this.addTaskToList(this[list],taskItem),this.schedule()},AnimationFrameService.prototype.cancelTask=function(task){this.cancelledTasks.add(task)},AnimationFrameService.prototype.addTaskToList=function(taskList,task){taskList.list.push(task),taskList.sorted=!1},AnimationFrameService.prototype.sortTaskList=function(taskList){if(!taskList.sorted){var sortDirection=this.scrollGoingDown?1:-1;taskList.list.sort((function(a,b){return a.index!==b.index?sortDirection*(b.index-a.index):b.createOrder-a.createOrder})),taskList.sorted=!0}},AnimationFrameService.prototype.addDestroyTask=function(task){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(task),this.schedule()},AnimationFrameService.prototype.executeFrame=function(millis){this.verifyAnimationFrameOn("executeFrame");for(var p1TaskList=this.createTasksP1,p1Tasks=p1TaskList.list,p2TaskList=this.createTasksP2,p2Tasks=p2TaskList.list,destroyTasks=this.destroyTasks,frameStart=(new Date).getTime(),duration=(new Date).getTime()-frameStart,noMaxMillis=millis<=0,gridBodyCon=this.ctrlsService.getGridBodyCtrl();noMaxMillis||duration<millis;){if(!gridBodyCon.getScrollFeature().executeAnimationFrameScroll()){var task=void 0;if(p1Tasks.length)this.sortTaskList(p1TaskList),task=p1Tasks.pop().task;else if(p2Tasks.length)this.sortTaskList(p2TaskList),task=p2Tasks.pop().task;else{if(!destroyTasks.length){this.cancelledTasks.clear();break}task=destroyTasks.pop()}this.cancelledTasks.has(task)||task()}duration=(new Date).getTime()-frameStart}p1Tasks.length||p2Tasks.length||destroyTasks.length?this.requestFrame():this.stopTicking()},AnimationFrameService.prototype.stopTicking=function(){this.ticking=!1},AnimationFrameService.prototype.flushAllFrames=function(){this.useAnimationFrame&&this.executeFrame(-1)},AnimationFrameService.prototype.schedule=function(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))},AnimationFrameService.prototype.requestFrame=function(){var callback=this.executeFrame.bind(this,60),win=this.gridOptionsWrapper.getDocument().defaultView||window;win.requestAnimationFrame?win.requestAnimationFrame(callback):win.webkitRequestAnimationFrame?win.webkitRequestAnimationFrame(callback):win.setTimeout(callback,0)},AnimationFrameService.prototype.isQueueEmpty=function(){return!this.ticking},AnimationFrameService.prototype.debounce=function(func){var _this=this,pending=!1;return function(){_this.isOn()?pending||(pending=!0,_this.addDestroyTask((function(){pending=!1,func()}))):_this.getFrameworkOverrides().setTimeout(func,0)}},__decorate$1s([Autowired("ctrlsService")],AnimationFrameService.prototype,"ctrlsService",void 0),__decorate$1s([PostConstruct],AnimationFrameService.prototype,"init",null),AnimationFrameService=__decorate$1s([Bean("animationFrameService")],AnimationFrameService)}(BeanStub),__extends$1G=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1t=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PositionableFeature=function(_super){function PositionableFeature(element,config){var _this=_super.call(this)||this;return _this.element=element,_this.dragStartPosition={x:0,y:0},_this.position={x:0,y:0},_this.lastSize={width:-1,height:-1},_this.positioned=!1,_this.resizersAdded=!1,_this.resizeListeners=[],_this.boundaryEl=null,_this.isResizing=!1,_this.isMoving=!1,_this.resizable={},_this.movable=!1,_this.currentResizer=null,_this.config=Object.assign({},{popup:!1},config),_this}return __extends$1G(PositionableFeature,_super),PositionableFeature.prototype.center=function(){var _a=this.offsetParent,clientHeight=_a.clientHeight,x=_a.clientWidth/2-this.getWidth()/2,y=clientHeight/2-this.getHeight()/2;this.offsetElement(x,y)},PositionableFeature.prototype.initialisePosition=function(){var _a=this.config,centered=_a.centered,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent,minWidth=_a.minWidth,width=_a.width,minHeight=_a.minHeight,height=_a.height,x=_a.x,y=_a.y;this.offsetParent||this.setOffsetParent();var computedMinHeight=0,computedMinWidth=0,isVisible=!!this.element.offsetParent;if(isVisible){var boundaryEl=this.findBoundaryElement(),offsetParentComputedStyles=window.getComputedStyle(boundaryEl);if(null!=offsetParentComputedStyles.minWidth){var paddingWidth=boundaryEl.offsetWidth-this.element.offsetWidth;computedMinWidth=parseInt(offsetParentComputedStyles.minWidth,10)-paddingWidth}if(null!=offsetParentComputedStyles.minHeight){var paddingHeight=boundaryEl.offsetHeight-this.element.offsetHeight;computedMinHeight=parseInt(offsetParentComputedStyles.minHeight,10)-paddingHeight}}if(this.minHeight=minHeight||computedMinHeight,this.minWidth=minWidth||computedMinWidth,width&&this.setWidth(width),height&&this.setHeight(height),width&&height||this.refreshSize(),centered)this.center();else if(x||y)this.offsetElement(x,y);else if(isVisible&&forcePopupParentAsOffsetParent&&this.boundaryEl){var top_1=parseFloat(this.boundaryEl.style.top),left=parseFloat(this.boundaryEl.style.left);this.offsetElement(isNaN(left)?0:left,isNaN(top_1)?0:top_1)}this.positioned=!!this.offsetParent},PositionableFeature.prototype.isPositioned=function(){return this.positioned},PositionableFeature.prototype.getPosition=function(){return this.position},PositionableFeature.prototype.setMovable=function(movable,moveElement){if(this.config.popup&&movable!==this.movable){this.movable=movable;var params=this.moveElementDragListener||{eElement:moveElement,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};movable?(this.dragService.addDragSource(params),this.moveElementDragListener=params):(this.dragService.removeDragSource(params),this.moveElementDragListener=void 0)}},PositionableFeature.prototype.setResizable=function(resizable){var _this=this;if(this.clearResizeListeners(),resizable?this.addResizers():this.removeResizers(),"boolean"==typeof resizable){if(!1===resizable)return;resizable={topLeft:resizable,top:resizable,topRight:resizable,right:resizable,bottomRight:resizable,bottom:resizable,bottomLeft:resizable,left:resizable}}Object.keys(resizable).forEach((function(side){var val=!!resizable[side],resizerEl=_this.getResizerElement(side),params={dragStartPixels:0,eElement:resizerEl,onDragStart:function(e){return _this.onResizeStart(e,side)},onDragging:_this.onResize.bind(_this),onDragStop:function(e){return _this.onResizeEnd(e,side)}};!!_this.resizable[side]===val&&(_this.isAlive()||val)||(val?(_this.dragService.addDragSource(params),_this.resizeListeners.push(params),resizerEl.style.pointerEvents="all"):resizerEl.style.pointerEvents="none")}))},PositionableFeature.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},PositionableFeature.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var _a=this.lastSize,height=_a.height,width=_a.width;-1!==width&&(this.element.style.width=width+"px"),-1!==height&&(this.element.style.height=height+"px")},PositionableFeature.prototype.getHeight=function(){return this.element.offsetHeight},PositionableFeature.prototype.setHeight=function(height){var popup=this.config.popup,eGui=this.element,isPercent=!1;if("string"==typeof height&&-1!==height.indexOf("%"))setFixedHeight(eGui,height),height=getAbsoluteHeight(eGui),isPercent=!0;else if(this.positioned){var elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect();height=Math.max(this.minHeight,height);var clientHeight=this.offsetParent.clientHeight,yPosition=popup?this.position.y:elRect.top,parentTop=popup?0:parentRect.top;clientHeight&&height+yPosition>clientHeight+parentTop&&(height=clientHeight-yPosition)}this.getHeight()!==height&&(isPercent?(eGui.style.maxHeight="unset",eGui.style.minHeight="unset"):popup?setFixedHeight(eGui,height):(eGui.style.height=height+"px",eGui.style.flex="0 0 auto",this.lastSize.height="number"==typeof height?height:parseFloat(height)))},PositionableFeature.prototype.getWidth=function(){return this.element.offsetWidth},PositionableFeature.prototype.setWidth=function(width){var eGui=this.element,popup=this.config.popup,isPercent=!1;if("string"==typeof width&&-1!==width.indexOf("%"))setFixedWidth(eGui,width),width=getAbsoluteWidth(eGui),isPercent=!0;else if(this.positioned){width=Math.max(this.minWidth,width);var clientWidth=this.offsetParent.clientWidth,xPosition=popup?this.position.x:this.element.getBoundingClientRect().left;clientWidth&&width+xPosition>clientWidth&&(width=clientWidth-xPosition)}this.getWidth()!==width&&(isPercent?(eGui.style.maxWidth="unset",eGui.style.minWidth="unset"):this.config.popup?setFixedWidth(eGui,width):(eGui.style.width=width+"px",eGui.style.flex=" unset",this.lastSize.width="number"==typeof width?width:parseFloat(width)))},PositionableFeature.prototype.offsetElement=function(x,y){void 0===x&&(x=0),void 0===y&&(y=0);var ePopup=this.config.forcePopupParentAsOffsetParent?this.boundaryEl:this.element;this.popupService.positionPopup({ePopup,x,y,keepWithinBounds:!0}),this.setPosition(parseFloat(ePopup.style.left),parseFloat(ePopup.style.top))},PositionableFeature.prototype.setPosition=function(x,y){this.position.x=x,this.position.y=y},PositionableFeature.prototype.updateDragStartPosition=function(x,y){this.dragStartPosition={x,y}},PositionableFeature.prototype.calculateMouseMovement=function(params){var e=params.e,isLeft=params.isLeft,isTop=params.isTop,anywhereWithin=params.anywhereWithin,topBuffer=params.topBuffer,xDiff=e.clientX-this.dragStartPosition.x,yDiff=e.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(e,!!isLeft,!!anywhereWithin,xDiff)?0:xDiff,movementY:this.shouldSkipY(e,!!isTop,topBuffer,yDiff)?0:yDiff}},PositionableFeature.prototype.shouldSkipX=function(e,isLeft,anywhereWithin,diff){var elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect(),boundaryElRect=this.boundaryEl.getBoundingClientRect(),xPosition=this.config.popup?this.position.x:elRect.left,skipX=xPosition<=0&&parentRect.left>=e.clientX||parentRect.right<=e.clientX&&parentRect.right<=boundaryElRect.right;return!!skipX||(skipX=isLeft?diff<0&&e.clientX>xPosition+parentRect.left||diff>0&&e.clientX<xPosition+parentRect.left:anywhereWithin?diff<0&&e.clientX>boundaryElRect.right||diff>0&&e.clientX<xPosition+parentRect.left:diff<0&&e.clientX>boundaryElRect.right||diff>0&&e.clientX<boundaryElRect.right)},PositionableFeature.prototype.shouldSkipY=function(e,isTop,topBuffer,diff){void 0===topBuffer&&(topBuffer=0);var elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect(),boundaryElRect=this.boundaryEl.getBoundingClientRect(),yPosition=this.config.popup?this.position.y:elRect.top,skipY=yPosition<=0&&parentRect.top>=e.clientY||parentRect.bottom<=e.clientY&&parentRect.bottom<=boundaryElRect.bottom;return!!skipY||(skipY=isTop?diff<0&&e.clientY>yPosition+parentRect.top+topBuffer||diff>0&&e.clientY<yPosition+parentRect.top:diff<0&&e.clientY>boundaryElRect.bottom||diff>0&&e.clientY<boundaryElRect.bottom)},PositionableFeature.prototype.createResizeMap=function(){var eGui=this.element;this.resizerMap={topLeft:{element:eGui.querySelector("[ref=eTopLeftResizer]")},top:{element:eGui.querySelector("[ref=eTopResizer]")},topRight:{element:eGui.querySelector("[ref=eTopRightResizer]")},right:{element:eGui.querySelector("[ref=eRightResizer]")},bottomRight:{element:eGui.querySelector("[ref=eBottomRightResizer]")},bottom:{element:eGui.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:eGui.querySelector("[ref=eBottomLeftResizer]")},left:{element:eGui.querySelector("[ref=eLeftResizer]")}}},PositionableFeature.prototype.addResizers=function(){if(!this.resizersAdded){var eGui=this.element;if(eGui){var resizers=(new DOMParser).parseFromString('<div class="ag-resizer-wrapper">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>',"text/html").body;eGui.appendChild(resizers.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},PositionableFeature.prototype.removeResizers=function(){this.resizerMap=void 0;var resizerEl=this.element.querySelector(".ag-resizer-wrapper");resizerEl&&this.element.removeChild(resizerEl),this.resizersAdded=!1},PositionableFeature.prototype.getResizerElement=function(side){return this.resizerMap[side].element},PositionableFeature.prototype.onResizeStart=function(e,side){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!side.match(/top/i),isRight:!!side.match(/right/i),isBottom:!!side.match(/bottom/i),isLeft:!!side.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[side].element.classList.add("ag-active");var _a=this.config,popup=_a.popup,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent;popup||forcePopupParentAsOffsetParent||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)},PositionableFeature.prototype.getSiblings=function(){var parent=this.element.parentElement;return parent?Array.prototype.slice.call(parent.children).filter((function(el){return!el.classList.contains("ag-hidden")})):null},PositionableFeature.prototype.getMinSizeOfSiblings=function(){for(var siblings=this.getSiblings()||[],height=0,width=0,i=0;i<siblings.length;i++){var currentEl=siblings[i],isFlex=!!currentEl.style.flex&&"0 0 auto"!==currentEl.style.flex;if(currentEl!==this.element){var nextHeight=this.minHeight||0,nextWidth=this.minWidth||0;if(isFlex){var computedStyle=window.getComputedStyle(currentEl);computedStyle.minHeight&&(nextHeight=parseInt(computedStyle.minHeight,10)),computedStyle.minWidth&&(nextWidth=parseInt(computedStyle.minWidth,10))}else nextHeight=currentEl.offsetHeight,nextWidth=currentEl.offsetWidth;height+=nextHeight,width+=nextWidth}}return{height,width}},PositionableFeature.prototype.applySizeToSiblings=function(vertical){var containerToFlex=null,siblings=this.getSiblings();if(siblings){for(var i=0;i<siblings.length;i++){var el=siblings[i];el!==containerToFlex&&(vertical?el.style.height=el.offsetHeight+"px":el.style.width=el.offsetWidth+"px",el.style.flex="0 0 auto",el===this.element&&(containerToFlex=siblings[i+1]))}containerToFlex&&(containerToFlex.style.removeProperty("height"),containerToFlex.style.removeProperty("min-height"),containerToFlex.style.removeProperty("max-height"),containerToFlex.style.flex="1 1 auto")}},PositionableFeature.prototype.onResize=function(e){if(this.isResizing&&this.currentResizer){var _a=this.config,popup=_a.popup,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent,_b=this.currentResizer,isTop=_b.isTop,isRight=_b.isRight,isBottom=_b.isBottom,isLeft=_b.isLeft,isHorizontal=isRight||isLeft,isVertical=isBottom||isTop,_c=this.calculateMouseMovement({e,isLeft,isTop}),movementX=_c.movementX,movementY=_c.movementY,xPosition=this.position.x,yPosition=this.position.y,offsetLeft=0,offsetTop=0;if(isHorizontal&&movementX){var direction=isLeft?-1:1,oldWidth=this.getWidth(),newWidth=oldWidth+movementX*direction,skipWidth=!1;isLeft&&(xPosition+(offsetLeft=oldWidth-newWidth)<=0||newWidth<=this.minWidth)&&(skipWidth=!0,offsetLeft=0),skipWidth||this.setWidth(newWidth)}if(isVertical&&movementY){direction=isTop?-1:1;var oldHeight=this.getHeight(),newHeight=oldHeight+movementY*direction,skipHeight=!1;isTop?(yPosition+(offsetTop=oldHeight-newHeight)<=0||newHeight<=this.minHeight)&&(skipHeight=!0,offsetTop=0):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&oldHeight<newHeight&&this.getMinSizeOfSiblings().height+newHeight>this.element.parentElement.offsetHeight&&(skipHeight=!0),skipHeight||this.setHeight(newHeight)}this.updateDragStartPosition(e.clientX,e.clientY),((popup||forcePopupParentAsOffsetParent)&&offsetLeft||offsetTop)&&this.offsetElement(xPosition+offsetLeft,yPosition+offsetTop)}},PositionableFeature.prototype.onResizeEnd=function(e,side){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var params={type:"resize",api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};this.element.classList.remove("ag-resizing"),this.resizerMap[side].element.classList.remove("ag-active"),this.dispatchEvent(params)},PositionableFeature.prototype.refreshSize=function(){var eGui=this.element;this.config.popup&&(this.config.width||this.setWidth(eGui.offsetWidth),this.config.height||this.setHeight(eGui.offsetHeight))},PositionableFeature.prototype.onMoveStart=function(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)},PositionableFeature.prototype.onMove=function(e){if(this.isMoving){var topBuffer,_a=this.position,x=_a.x,y=_a.y;this.config.calculateTopBuffer&&(topBuffer=this.config.calculateTopBuffer());var _b=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer}),movementX=_b.movementX,movementY=_b.movementY;this.offsetElement(x+movementX,y+movementY),this.updateDragStartPosition(e.clientX,e.clientY)}},PositionableFeature.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")},PositionableFeature.prototype.setOffsetParent=function(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent},PositionableFeature.prototype.findBoundaryElement=function(){for(var el=this.element;el;){if("static"!==window.getComputedStyle(el).position)return el;el=el.parentElement}return this.element},PositionableFeature.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var params=this.resizeListeners.pop();this.dragService.removeDragSource(params)}},PositionableFeature.prototype.destroy=function(){_super.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.clearResizeListeners(),this.removeResizers()},__decorate$1t([Autowired("popupService")],PositionableFeature.prototype,"popupService",void 0),__decorate$1t([Autowired("dragService")],PositionableFeature.prototype,"dragService",void 0),PositionableFeature}(BeanStub),__extends$1H=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1u=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AutoWidthCalculator=function(_super){function AutoWidthCalculator(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1H(AutoWidthCalculator,_super),AutoWidthCalculator.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){_this.centerRowContainerCtrl=p.centerRowContainerCtrl}))},AutoWidthCalculator.prototype.getPreferredWidthForColumn=function(column,skipHeader){var eHeaderCell=this.getHeaderCellForColumn(column);if(!eHeaderCell)return-1;var elements=this.rowRenderer.getAllCellsForColumn(column);return skipHeader||elements.push(eHeaderCell),this.addElementsToContainerAndGetWidth(elements)},AutoWidthCalculator.prototype.getPreferredWidthForColumnGroup=function(columnGroup){var eHeaderCell=this.getHeaderCellForColumn(columnGroup);return eHeaderCell?this.addElementsToContainerAndGetWidth([eHeaderCell]):-1},AutoWidthCalculator.prototype.addElementsToContainerAndGetWidth=function(elements){var _this=this,eDummyContainer=document.createElement("span");eDummyContainer.style.position="fixed";var eBodyContainer=this.centerRowContainerCtrl.getContainerElement();eBodyContainer.appendChild(eDummyContainer),elements.forEach((function(el){return _this.cloneItemIntoDummy(el,eDummyContainer)}));var dummyContainerWidth=eDummyContainer.offsetWidth;return eBodyContainer.removeChild(eDummyContainer),dummyContainerWidth+this.gridOptionsWrapper.getAutoSizePadding()},AutoWidthCalculator.prototype.getHeaderCellForColumn=function(column){var element=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach((function(container){var res=container.getHtmlElementForColumnHeader(column);null!=res&&(element=res)})),element},AutoWidthCalculator.prototype.cloneItemIntoDummy=function(eCell,eDummyContainer){var eCellClone=eCell.cloneNode(!0);eCellClone.style.width="",eCellClone.style.position="static",eCellClone.style.left="";var eCloneParent=document.createElement("div"),eCloneParentClassList=eCloneParent.classList;["ag-header-cell","ag-header-group-cell"].some((function(cls){return eCellClone.classList.contains(cls)}))?(eCloneParentClassList.add("ag-header","ag-header-row"),eCloneParent.style.position="static"):eCloneParentClassList.add("ag-row");for(var pointer=eCell.parentElement;pointer;){if(["ag-header-row","ag-row"].some((function(cls){return pointer.classList.contains(cls)}))){for(var i=0;i<pointer.classList.length;i++){var item=pointer.classList[i];"ag-row-position-absolute"!=item&&eCloneParentClassList.add(item)}break}pointer=pointer.parentElement}eCloneParent.appendChild(eCellClone),eDummyContainer.appendChild(eCloneParent)},__decorate$1u([Autowired("rowRenderer")],AutoWidthCalculator.prototype,"rowRenderer",void 0),__decorate$1u([Autowired("ctrlsService")],AutoWidthCalculator.prototype,"ctrlsService",void 0),__decorate$1u([Autowired("rowCssClassCalculator")],AutoWidthCalculator.prototype,"rowCssClassCalculator",void 0),__decorate$1u([PostConstruct],AutoWidthCalculator.prototype,"postConstruct",null),AutoWidthCalculator=__decorate$1u([Bean("autoWidthCalculator")],AutoWidthCalculator)}(BeanStub),__extends$1I=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1v=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$d=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$a=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$d(arguments[i]));return ar},RowRenderer=function(_super){function RowRenderer(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.destroyFuncsForColumnListeners=[],_this.rowCtrlsByRowIndex={},_this.zombieRowCtrls={},_this.allRowCtrls=[],_this.topRowCtrls=[],_this.bottomRowCtrls=[],_this.refreshInProgress=!1,_this}return __extends$1I(RowRenderer,_super),RowRenderer.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl(),_this.initialise()}))},RowRenderer.prototype.initialise=function(){this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,this.redrawAfterScroll.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_BODY_HEIGHT_CHANGED,this.redrawAfterScroll.bind(this)),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_DOM_LAYOUT,this.onDomLayoutChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_ROW_CLASS,this.redrawRows.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsWrapper.getDomLayout()===Constants.DOM_LAYOUT_PRINT,this.embedFullWidthRows=this.printLayout||this.gridOptionsWrapper.isEmbedFullWidthRows(),this.redrawAfterModelUpdate()},RowRenderer.prototype.initialiseCache=function(){if(this.gridOptionsWrapper.isKeepDetailRows()){var countProp=this.gridOptionsWrapper.getKeepDetailRowsCount(),count=null!=countProp?countProp:3;this.cachedRowCtrls=new RowCtrlCache(count)}},RowRenderer.prototype.getRowCtrls=function(){return this.allRowCtrls},RowRenderer.prototype.updateAllRowCtrls=function(){var liveList=getAllValuesInObject(this.rowCtrlsByRowIndex);this.gridOptionsWrapper.isEnsureDomOrder()&&liveList.sort((function(a,b){return a.getRowNode().rowIndex-b.getRowNode.rowIndex}));var zombieList=getAllValuesInObject(this.zombieRowCtrls),cachedList=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];this.allRowCtrls=__spread$a(liveList,zombieList,cachedList)},RowRenderer.prototype.registerCellEventListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_CELL_FOCUSED,(function(event){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onCellFocused(event)})),_this.getFullWidthRowCtrls().forEach((function(rowCtrl){rowCtrl.onFullWidthRowFocused(event)}))})),this.addManagedListener(this.eventService,Events.EVENT_FLASH_CELLS,(function(event){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onFlashCells(event)}))})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HOVER_CHANGED,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onColumnHover()}))})),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onDisplayedColumnsChanged()}))})),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,(function(){_this.printLayout&&_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onLeftChanged()}))})),this.gridOptionsWrapper.isEnableRangeSelection()&&(this.addManagedListener(this.eventService,Events.EVENT_RANGE_SELECTION_CHANGED,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onRangeSelectionChanged()}))})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.updateRangeBordersIfRangeCount()}))})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.updateRangeBordersIfRangeCount()}))})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.updateRangeBordersIfRangeCount()}))}))),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},RowRenderer.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach((function(func){return func()})),this.destroyFuncsForColumnListeners.length=0},RowRenderer.prototype.refreshListenersToColumnsForCellComps=function(){var _this=this;this.removeGridColumnListeners();var cols=this.columnModel.getAllGridColumns();cols&&cols.forEach((function(col){var forEachCellWithThisCol=function(callback){_this.getAllCellCtrls().forEach((function(cellCtrl){cellCtrl.getColumn()===col&&callback(cellCtrl)}))},leftChangedListener=function(){forEachCellWithThisCol((function(cellCtrl){return cellCtrl.onLeftChanged()}))},widthChangedListener=function(){forEachCellWithThisCol((function(cellCtrl){return cellCtrl.onWidthChanged()}))},firstRightPinnedChangedListener=function(){forEachCellWithThisCol((function(cellCtrl){return cellCtrl.onFirstRightPinnedChanged()}))},lastLeftPinnedChangedListener=function(){forEachCellWithThisCol((function(cellCtrl){return cellCtrl.onLastLeftPinnedChanged()}))};col.addEventListener(Column.EVENT_LEFT_CHANGED,leftChangedListener),col.addEventListener(Column.EVENT_WIDTH_CHANGED,widthChangedListener),col.addEventListener(Column.EVENT_FIRST_RIGHT_PINNED_CHANGED,firstRightPinnedChangedListener),col.addEventListener(Column.EVENT_LAST_LEFT_PINNED_CHANGED,lastLeftPinnedChangedListener),_this.destroyFuncsForColumnListeners.push((function(){col.removeEventListener(Column.EVENT_LEFT_CHANGED,leftChangedListener),col.removeEventListener(Column.EVENT_WIDTH_CHANGED,widthChangedListener),col.removeEventListener(Column.EVENT_FIRST_RIGHT_PINNED_CHANGED,firstRightPinnedChangedListener),col.removeEventListener(Column.EVENT_LAST_LEFT_PINNED_CHANGED,lastLeftPinnedChangedListener)}))}))},RowRenderer.prototype.onDomLayoutChanged=function(){var printLayout=this.gridOptionsWrapper.getDomLayout()===Constants.DOM_LAYOUT_PRINT,embedFullWidthRows=printLayout||this.gridOptionsWrapper.isEmbedFullWidthRows(),destroyRows=embedFullWidthRows!==this.embedFullWidthRows||this.printLayout!==printLayout;this.printLayout=printLayout,this.embedFullWidthRows=embedFullWidthRows,destroyRows&&this.redrawAfterModelUpdate()},RowRenderer.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var rowIndexesToRemove=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(rowIndexesToRemove)},RowRenderer.prototype.onPageLoaded=function(event){var params={recycleRows:event.keepRenderedRows,animate:event.animate,newData:event.newData,newPage:event.newPage,onlyBody:!0};this.redrawAfterModelUpdate(params)},RowRenderer.prototype.getAllCellsForColumn=function(column){var res=[];return this.getAllRowCtrls().forEach((function(rowCtrl){var eCell=rowCtrl.getCellElement(column);eCell&&res.push(eCell)})),res},RowRenderer.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},RowRenderer.prototype.getTopRowCtrls=function(){return this.topRowCtrls},RowRenderer.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},RowRenderer.prototype.refreshFloatingRows=function(rowComps,rowNodes){var _this=this;rowComps.forEach((function(row){row.destroyFirstPass(),row.destroySecondPass()})),rowComps.length=0,rowNodes&&rowNodes.forEach((function(rowNode){var rowCtrl=new RowCtrl(rowNode,_this.beans,!1,!1,_this.printLayout);rowComps.push(rowCtrl)}))},RowRenderer.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate({recycleRows:!0})},RowRenderer.prototype.getRenderedIndexesForRowNodes=function(rowNodes){var result=[];return missing(rowNodes)||iterateObject(this.rowCtrlsByRowIndex,(function(index,renderedRow){var rowNode=renderedRow.getRowNode();rowNodes.indexOf(rowNode)>=0&&result.push(index)})),result},RowRenderer.prototype.redrawRows=function(rowNodes){var partialRefresh=null!=rowNodes&&rowNodes.length>0;if(partialRefresh){var indexesToRemove=this.getRenderedIndexesForRowNodes(rowNodes);this.removeRowCtrls(indexesToRemove)}this.redrawAfterModelUpdate({recycleRows:partialRefresh})},RowRenderer.prototype.getCellToRestoreFocusToAfterRefresh=function(params){var focusedCell=params.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==focusedCell)return null;var activeElement=this.gridOptionsWrapper.getDocument().activeElement,cellDomData=this.gridOptionsWrapper.getDomData(activeElement,CellCtrl.DOM_DATA_KEY_CELL_CTRL),rowDomData=this.gridOptionsWrapper.getDomData(activeElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL);return cellDomData||rowDomData?focusedCell:null},RowRenderer.prototype.redrawAfterModelUpdate=function(params){void 0===params&&(params={}),this.getLockOnRefresh();var focusedCell=this.getCellToRestoreFocusToAfterRefresh(params);this.updateContainerHeights(),this.scrollToTopIfNewData(params);var recycleRows=!this.printLayout&&!!params.recycleRows,animate=params.animate&&this.gridOptionsWrapper.isAnimateRows(),rowsToRecycle=recycleRows?this.recycleRows():null;recycleRows||this.removeAllRowComps();var focusedCellRecycled=function(){if(null==focusedCell||null==rowsToRecycle)return!1;var res=!1;return iterateObject(rowsToRecycle,(function(key,rowComp){var rowNode=rowComp.getRowNode(),rowIndexEqual=rowNode.rowIndex==focusedCell.rowIndex,pinnedEqual=rowNode.rowPinned==focusedCell.rowPinned;rowIndexEqual&&pinnedEqual&&(res=!0)})),res}();this.redraw(rowsToRecycle,animate),params.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),focusedCellRecycled||this.restoreFocusedCell(focusedCell),this.releaseLockOnRefresh()},RowRenderer.prototype.scrollToTopIfNewData=function(params){var scrollToTop=params.newData||params.newPage,suppressScrollToTop=this.gridOptionsWrapper.isSuppressScrollOnNewData();scrollToTop&&!suppressScrollToTop&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},RowRenderer.prototype.updateContainerHeights=function(){if(this.printLayout)this.rowContainerHeightService.setModelHeight(null);else{var containerHeight=this.paginationProxy.getCurrentPageHeight();0===containerHeight&&(containerHeight=1),this.rowContainerHeightService.setModelHeight(containerHeight)}},RowRenderer.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},RowRenderer.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},RowRenderer.prototype.isRefreshInProgress=function(){return this.refreshInProgress},RowRenderer.prototype.restoreFocusedCell=function(cellPosition){cellPosition&&this.focusService.setFocusedCell(cellPosition.rowIndex,cellPosition.column,cellPosition.rowPinned,!0)},RowRenderer.prototype.stopEditing=function(cancel){void 0===cancel&&(cancel=!1),this.getAllRowCtrls().forEach((function(rowCtrl){rowCtrl.stopEditing(cancel)}))},RowRenderer.prototype.onNewColumnsLoaded=function(){this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onNewColumnsLoaded()}))},RowRenderer.prototype.getAllCellCtrls=function(){var res=[];return this.getAllRowCtrls().forEach((function(rowCtrl){return res=res.concat(rowCtrl.getAllCellCtrls())})),res},RowRenderer.prototype.getAllRowCtrls=function(){var _this=this,res=__spread$a(this.topRowCtrls,this.bottomRowCtrls);return Object.keys(this.rowCtrlsByRowIndex).forEach((function(key){return res.push(_this.rowCtrlsByRowIndex[key])})),res},RowRenderer.prototype.addRenderedRowListener=function(eventName,rowIndex,callback){var rowComp=this.rowCtrlsByRowIndex[rowIndex];rowComp&&rowComp.addEventListener(eventName,callback)},RowRenderer.prototype.flashCells=function(params){void 0===params&&(params={});var flashDelay=params.flashDelay,fadeDelay=params.fadeDelay;this.getCellCtrls(params.rowNodes,params.columns).forEach((function(cellCtrl){return cellCtrl.flashCell({flashDelay,fadeDelay})}))},RowRenderer.prototype.refreshCells=function(params){void 0===params&&(params={});var refreshCellParams={forceRefresh:params.force,newData:!1,suppressFlash:params.suppressFlash};this.getCellCtrls(params.rowNodes,params.columns).forEach((function(cellCtrl){if(cellCtrl.refreshShouldDestroy()){var rowCtrl=cellCtrl.getRowCtrl();rowCtrl&&rowCtrl.refreshCell(cellCtrl)}else cellCtrl.refreshCell(refreshCellParams)})),this.getFullWidthRowCtrls(params.rowNodes).forEach((function(fullWidthRowCtrl){fullWidthRowCtrl.refreshFullWidth()}))},RowRenderer.prototype.getCellRendererInstances=function(params){return this.getCellCtrls(params.rowNodes,params.columns).map((function(cellCtrl){return cellCtrl.getCellRenderer()})).filter((function(renderer){return null!=renderer}))},RowRenderer.prototype.getCellEditorInstances=function(params){var res=[];return this.getCellCtrls(params.rowNodes,params.columns).forEach((function(cellCtrl){var cellEditor=cellCtrl.getCellEditor();cellEditor&&res.push(cellEditor)})),res},RowRenderer.prototype.getEditingCells=function(){var res=[];return this.getAllCellCtrls().forEach((function(cellCtrl){if(cellCtrl.isEditing()){var cellPosition=cellCtrl.getCellPosition();res.push(cellPosition)}})),res},RowRenderer.prototype.mapRowNodes=function(rowNodes){if(rowNodes){var res={top:{},bottom:{},normal:{}};return rowNodes.forEach((function(rowNode){var id=rowNode.id;rowNode.rowPinned===Constants.PINNED_TOP?res.top[id]=rowNode:rowNode.rowPinned===Constants.PINNED_BOTTOM?res.bottom[id]=rowNode:res.normal[id]=rowNode})),res}},RowRenderer.prototype.isRowInMap=function(rowNode,rowIdsMap){var id=rowNode.id,floating=rowNode.rowPinned;return floating===Constants.PINNED_BOTTOM?null!=rowIdsMap.bottom[id]:floating===Constants.PINNED_TOP?null!=rowIdsMap.top[id]:null!=rowIdsMap.normal[id]},RowRenderer.prototype.getCellCtrls=function(rowNodes,columns){var colIdsMap,_this=this,rowIdsMap=this.mapRowNodes(rowNodes),res=[];exists(columns)&&(colIdsMap={},columns.forEach((function(colKey){var column=_this.columnModel.getGridColumn(colKey);exists(column)&&(colIdsMap[column.getId()]=!0)})));var processRow=function(rowComp){var rowNode=rowComp.getRowNode();(null==rowIdsMap||_this.isRowInMap(rowNode,rowIdsMap))&&rowComp.getAllCellCtrls().forEach((function(cellCtrl){var colId=cellCtrl.getColumn().getId();colIdsMap&&!colIdsMap[colId]||res.push(cellCtrl)}))};return iterateObject(this.rowCtrlsByRowIndex,(function(index,rowComp){processRow(rowComp)})),this.topRowCtrls&&this.topRowCtrls.forEach(processRow),this.bottomRowCtrls&&this.bottomRowCtrls.forEach(processRow),res},RowRenderer.prototype.destroy=function(){this.removeAllRowComps(),_super.prototype.destroy.call(this)},RowRenderer.prototype.removeAllRowComps=function(){var rowIndexesToRemove=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(rowIndexesToRemove)},RowRenderer.prototype.recycleRows=function(){var stubNodeIndexes=[];iterateObject(this.rowCtrlsByRowIndex,(function(index,rowComp){null==rowComp.getRowNode().id&&stubNodeIndexes.push(index)})),this.removeRowCtrls(stubNodeIndexes);var nodesByIdMap={};return iterateObject(this.rowCtrlsByRowIndex,(function(index,rowComp){var rowNode=rowComp.getRowNode();nodesByIdMap[rowNode.id]=rowComp})),this.rowCtrlsByRowIndex={},nodesByIdMap},RowRenderer.prototype.removeRowCtrls=function(rowsToRemove){var _this=this;rowsToRemove.forEach((function(indexToRemove){var rowCtrl=_this.rowCtrlsByRowIndex[indexToRemove];rowCtrl&&(rowCtrl.destroyFirstPass(),rowCtrl.destroySecondPass()),delete _this.rowCtrlsByRowIndex[indexToRemove]}))},RowRenderer.prototype.redrawAfterScroll=function(){this.getLockOnRefresh(),this.redraw(null,!1,!0),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged()},RowRenderer.prototype.removeRowCompsNotToDraw=function(indexesToDraw){var indexesToDrawMap={};indexesToDraw.forEach((function(index){return indexesToDrawMap[index]=!0}));var indexesNotToDraw=Object.keys(this.rowCtrlsByRowIndex).filter((function(index){return!indexesToDrawMap[index]}));this.removeRowCtrls(indexesNotToDraw)},RowRenderer.prototype.calculateIndexesToDraw=function(rowsToRecycle){var _this=this,indexesToDraw=createArrayOfNumbers(this.firstRenderedRow,this.lastRenderedRow),checkRowToDraw=function(indexStr,rowComp){var index=rowComp.getRowNode().rowIndex;null!=index&&(index<_this.firstRenderedRow||index>_this.lastRenderedRow)&&_this.doNotUnVirtualiseRow(rowComp)&&indexesToDraw.push(index)};return iterateObject(this.rowCtrlsByRowIndex,checkRowToDraw),iterateObject(rowsToRecycle,checkRowToDraw),indexesToDraw.sort((function(a,b){return a-b})),indexesToDraw},RowRenderer.prototype.redraw=function(rowsToRecycle,animate,afterScroll){var _this=this;void 0===animate&&(animate=!1),void 0===afterScroll&&(afterScroll=!1),this.rowContainerHeightService.updateOffset(),this.workOutFirstAndLastRowsToRender();var indexesToDraw=this.calculateIndexesToDraw(rowsToRecycle);(this.removeRowCompsNotToDraw(indexesToDraw),this.printLayout&&(animate=!1),indexesToDraw.forEach((function(rowIndex){exists(_this.createOrUpdateRowCtrl(rowIndex,rowsToRecycle,animate,afterScroll))})),rowsToRecycle)&&(afterScroll&&!this.gridOptionsWrapper.isSuppressAnimationFrame()&&!this.printLayout?this.beans.animationFrameService.addDestroyTask((function(){_this.destroyRowCtrls(rowsToRecycle,animate),_this.updateAllRowCtrls(),_this.dispatchDisplayedRowsChanged()})):this.destroyRowCtrls(rowsToRecycle,animate));this.updateAllRowCtrls(),this.gridBodyCtrl.updateRowCount()},RowRenderer.prototype.dispatchDisplayedRowsChanged=function(){var event={type:Events.EVENT_DISPLAYED_ROWS_CHANGED};this.eventService.dispatchEvent(event)},RowRenderer.prototype.onDisplayedColumnsChanged=function(){var pinningLeft=this.columnModel.isPinningLeft(),pinningRight=this.columnModel.isPinningRight();(this.pinningLeft!==pinningLeft||pinningRight!==this.pinningRight)&&(this.pinningLeft=pinningLeft,this.pinningRight=pinningRight,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},RowRenderer.prototype.redrawFullWidthEmbeddedRows=function(){var rowsToRemove=[];this.getFullWidthRowCtrls().forEach((function(fullWidthCtrl){var rowIndex=fullWidthCtrl.getRowNode().rowIndex;rowsToRemove.push(rowIndex.toString())})),this.refreshFloatingRowComps(),this.removeRowCtrls(rowsToRemove),this.redrawAfterScroll()},RowRenderer.prototype.getFullWidthRowCtrls=function(rowNodes){var _this=this,rowNodesMap=this.mapRowNodes(rowNodes);return getAllValuesInObject(this.rowCtrlsByRowIndex).filter((function(rowCtrl){if(!rowCtrl.isFullWidth())return!1;var rowNode=rowCtrl.getRowNode();return!(null!=rowNodesMap&&!_this.isRowInMap(rowNode,rowNodesMap))}))},RowRenderer.prototype.refreshFullWidthRows=function(rowNodesToRefresh){var rowsToRemove=[],selectivelyRefreshing=!!rowNodesToRefresh,idsToRefresh=selectivelyRefreshing?{}:void 0;selectivelyRefreshing&&idsToRefresh&&rowNodesToRefresh.forEach((function(r){return idsToRefresh[r.id]=!0})),this.getFullWidthRowCtrls().forEach((function(fullWidthRowCtrl){var rowNode=fullWidthRowCtrl.getRowNode();if(selectivelyRefreshing&&idsToRefresh){var parentId=rowNode.level>0&&rowNode.parent?rowNode.parent.id:void 0;if(!idsToRefresh[rowNode.id]&&!idsToRefresh[parentId])return}if(!fullWidthRowCtrl.refreshFullWidth()){var rowIndex=fullWidthRowCtrl.getRowNode().rowIndex;rowsToRemove.push(rowIndex.toString())}})),this.removeRowCtrls(rowsToRemove),this.redrawAfterScroll()},RowRenderer.prototype.createOrUpdateRowCtrl=function(rowIndex,rowsToRecycle,animate,afterScroll){var rowNode,rowCtrl=this.rowCtrlsByRowIndex[rowIndex];if(rowCtrl||exists(rowNode=this.paginationProxy.getRow(rowIndex))&&exists(rowsToRecycle)&&rowsToRecycle[rowNode.id]&&rowNode.alreadyRendered&&(rowCtrl=rowsToRecycle[rowNode.id],rowsToRecycle[rowNode.id]=null),!rowCtrl){if(rowNode||(rowNode=this.paginationProxy.getRow(rowIndex)),!exists(rowNode))return;rowCtrl=this.createRowCon(rowNode,animate,afterScroll)}return rowNode&&(rowNode.alreadyRendered=!0),this.rowCtrlsByRowIndex[rowIndex]=rowCtrl,rowCtrl},RowRenderer.prototype.destroyRowCtrls=function(rowCtrlsMap,animate){var _this=this,executeInAWhileFuncs=[];iterateObject(rowCtrlsMap,(function(nodeId,rowCtrl){rowCtrl&&(_this.cachedRowCtrls&&rowCtrl.isCacheable()?_this.cachedRowCtrls.addRow(rowCtrl):(rowCtrl.destroyFirstPass(),animate?(_this.zombieRowCtrls[rowCtrl.getInstanceId()]=rowCtrl,executeInAWhileFuncs.push((function(){rowCtrl.destroySecondPass(),delete _this.zombieRowCtrls[rowCtrl.getInstanceId()]}))):rowCtrl.destroySecondPass()))})),animate&&(executeInAWhileFuncs.push((function(){_this.updateAllRowCtrls(),_this.dispatchDisplayedRowsChanged()})),executeInAWhile(executeInAWhileFuncs))},RowRenderer.prototype.workOutFirstAndLastRowsToRender=function(){var newFirst,newLast,_this=this;if(this.paginationProxy.isRowsToRender())if(this.printLayout)newFirst=this.paginationProxy.getPageFirstRow(),newLast=this.paginationProxy.getPageLastRow();else{var bufferPixels=this.gridOptionsWrapper.getRowBufferInPixels(),gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),suppressRowVirtualisation=this.gridOptionsWrapper.isSuppressRowVirtualisation(),rowHeightsChanged=!1,firstPixel=void 0,lastPixel=void 0;do{var paginationOffset=this.paginationProxy.getPixelOffset(),_a=this.paginationProxy.getCurrentPagePixelRange(),pageFirstPixel=_a.pageFirstPixel,pageLastPixel=_a.pageLastPixel,divStretchOffset=this.rowContainerHeightService.getDivStretchOffset();if(suppressRowVirtualisation)firstPixel=pageFirstPixel+divStretchOffset,lastPixel=pageLastPixel+divStretchOffset;else{var bodyVRange=gridBodyCtrl.getScrollFeature().getVScrollPosition(),bodyTopPixel=bodyVRange.top,bodyBottomPixel=bodyVRange.bottom;firstPixel=Math.max(bodyTopPixel+paginationOffset-bufferPixels,pageFirstPixel)+divStretchOffset,lastPixel=Math.min(bodyBottomPixel+paginationOffset+bufferPixels,pageLastPixel)+divStretchOffset}rowHeightsChanged=this.ensureAllRowsInRangeHaveHeightsCalculated(firstPixel,lastPixel)}while(rowHeightsChanged);var firstRowIndex=this.paginationProxy.getRowIndexAtPixel(firstPixel),lastRowIndex=this.paginationProxy.getRowIndexAtPixel(lastPixel),pageFirstRow=this.paginationProxy.getPageFirstRow(),pageLastRow=this.paginationProxy.getPageLastRow();firstRowIndex<pageFirstRow&&(firstRowIndex=pageFirstRow),lastRowIndex>pageLastRow&&(lastRowIndex=pageLastRow),newFirst=firstRowIndex,newLast=lastRowIndex}else newFirst=0,newLast=-1;var rowLayoutNormal=this.gridOptionsWrapper.getDomLayout()===Constants.DOM_LAYOUT_NORMAL,suppressRowCountRestriction=this.gridOptionsWrapper.isSuppressMaxRenderedRowRestriction(),rowBufferMaxSize=Math.max(this.gridOptionsWrapper.getRowBuffer(),500);rowLayoutNormal&&!suppressRowCountRestriction&&newLast-newFirst>rowBufferMaxSize&&(newLast=newFirst+rowBufferMaxSize);var firstDiffers=newFirst!==this.firstRenderedRow,lastDiffers=newLast!==this.lastRenderedRow;if(firstDiffers||lastDiffers){this.firstRenderedRow=newFirst,this.lastRenderedRow=newLast;var event_1={type:Events.EVENT_VIEWPORT_CHANGED,firstRow:newFirst,lastRow:newLast,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event_1)}if(this.paginationProxy.isRowsToRender()){var event_2={type:Events.EVENT_FIRST_DATA_RENDERED,firstRow:newFirst,lastRow:newLast,api:this.gridApi,columnApi:this.columnApi};window.setTimeout((function(){return _this.eventService.dispatchEventOnce(event_2)}),50)}},RowRenderer.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(topPixel,bottomPixel){var res=this.paginationProxy.ensureRowHeightsValid(topPixel,bottomPixel,-1,-1);return res&&this.updateContainerHeights(),res},RowRenderer.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},RowRenderer.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},RowRenderer.prototype.doNotUnVirtualiseRow=function(rowComp){var rowNode=rowComp.getRowNode(),rowHasFocus=this.focusService.isRowNodeFocused(rowNode),rowIsEditing=rowComp.isEditing(),rowIsDetail=rowNode.detail;return!!(rowHasFocus||rowIsEditing||rowIsDetail)&&!!this.paginationProxy.isRowPresent(rowNode)},RowRenderer.prototype.createRowCon=function(rowNode,animate,afterScroll){var rowCtrlFromCache=this.cachedRowCtrls?this.cachedRowCtrls.getRow(rowNode):null;if(rowCtrlFromCache)return rowCtrlFromCache;var suppressAnimationFrame=this.gridOptionsWrapper.isSuppressAnimationFrame(),useAnimationFrameForCreate=afterScroll&&!suppressAnimationFrame&&!this.printLayout;return new RowCtrl(rowNode,this.beans,animate,useAnimationFrameForCreate,this.printLayout)},RowRenderer.prototype.getRenderedNodes=function(){var renderedRows=this.rowCtrlsByRowIndex;return Object.keys(renderedRows).map((function(key){return renderedRows[key].getRowNode()}))},RowRenderer.prototype.getRowByPosition=function(rowPosition){var rowComponent;switch(rowPosition.rowPinned){case Constants.PINNED_TOP:rowComponent=this.topRowCtrls[rowPosition.rowIndex];break;case Constants.PINNED_BOTTOM:rowComponent=this.bottomRowCtrls[rowPosition.rowIndex];break;default:rowComponent=this.rowCtrlsByRowIndex[rowPosition.rowIndex]}return rowComponent},RowRenderer.prototype.getRowNode=function(gridRow){switch(gridRow.rowPinned){case Constants.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];case Constants.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];default:return this.rowModel.getRow(gridRow.rowIndex)}},RowRenderer.prototype.isRangeInRenderedViewport=function(startIndex,endIndex){if(null==startIndex||null==endIndex)return!1;var blockAfterViewport=startIndex>this.lastRenderedRow;return!(endIndex<this.firstRenderedRow)&&!blockAfterViewport},__decorate$1v([Autowired("paginationProxy")],RowRenderer.prototype,"paginationProxy",void 0),__decorate$1v([Autowired("columnModel")],RowRenderer.prototype,"columnModel",void 0),__decorate$1v([Autowired("pinnedRowModel")],RowRenderer.prototype,"pinnedRowModel",void 0),__decorate$1v([Autowired("rowModel")],RowRenderer.prototype,"rowModel",void 0),__decorate$1v([Autowired("focusService")],RowRenderer.prototype,"focusService",void 0),__decorate$1v([Autowired("columnApi")],RowRenderer.prototype,"columnApi",void 0),__decorate$1v([Autowired("gridApi")],RowRenderer.prototype,"gridApi",void 0),__decorate$1v([Autowired("beans")],RowRenderer.prototype,"beans",void 0),__decorate$1v([Autowired("rowContainerHeightService")],RowRenderer.prototype,"rowContainerHeightService",void 0),__decorate$1v([Optional("ctrlsService")],RowRenderer.prototype,"ctrlsService",void 0),__decorate$1v([PostConstruct],RowRenderer.prototype,"postConstruct",null),RowRenderer=__decorate$1v([Bean("rowRenderer")],RowRenderer)}(BeanStub),RowCtrlCache=function(){function RowCtrlCache(maxCount){this.entriesMap={},this.entriesList=[],this.maxCount=maxCount}return RowCtrlCache.prototype.addRow=function(rowCtrl){if(this.entriesMap[rowCtrl.getRowNode().id]=rowCtrl,this.entriesList.push(rowCtrl),rowCtrl.setCached(!0),this.entriesList.length>this.maxCount){var rowCtrlToDestroy=this.entriesList[0];rowCtrlToDestroy.destroyFirstPass(),rowCtrlToDestroy.destroySecondPass(),this.removeFromCache(rowCtrlToDestroy)}},RowCtrlCache.prototype.getRow=function(rowNode){if(null==rowNode||null==rowNode.id)return null;var res=this.entriesMap[rowNode.id];return res?(this.removeFromCache(res),res.setCached(!1),res.getRowNode()!=rowNode?null:res):null},RowCtrlCache.prototype.removeFromCache=function(rowCtrl){var rowNodeId=rowCtrl.getRowNode().id;delete this.entriesMap[rowNodeId],removeFromArray(this.entriesList,rowCtrl)},RowCtrlCache.prototype.getEntries=function(){return this.entriesList},RowCtrlCache}(),__extends$1J=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1w=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ValueFormatterService=function(_super){function ValueFormatterService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1J(ValueFormatterService,_super),ValueFormatterService.prototype.formatValue=function(column,node,value,suppliedFormatter,useFormatterFromColumn){void 0===useFormatterFromColumn&&(useFormatterFromColumn=!0);var formatter,result=null,colDef=column.getColDef();if(suppliedFormatter?formatter=suppliedFormatter:useFormatterFromColumn&&(formatter=node&&node.rowPinned&&colDef.pinnedRowValueFormatter?colDef.pinnedRowValueFormatter:colDef.valueFormatter),formatter){var params={value,node,data:node?node.data:null,colDef,column,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};result=this.expressionService.evaluate(formatter,params)}else if(colDef.refData)return colDef.refData[value]||"";return null==result&&Array.isArray(value)&&(result=value.join(", ")),result},__decorate$1w([Autowired("expressionService")],ValueFormatterService.prototype,"expressionService",void 0),ValueFormatterService=__decorate$1w([Bean("valueFormatterService")],ValueFormatterService)}(BeanStub),__extends$1K=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1x=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PinnedRowModel=function(_super){function PinnedRowModel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1K(PinnedRowModel,_super),PinnedRowModel.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsWrapper.getPinnedTopRowData()),this.setPinnedBottomRowData(this.gridOptionsWrapper.getPinnedBottomRowData())},PinnedRowModel.prototype.isEmpty=function(floating){return missingOrEmpty(floating===Constants.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows)},PinnedRowModel.prototype.isRowsToRender=function(floating){return!this.isEmpty(floating)},PinnedRowModel.prototype.getRowAtPixel=function(pixel,floating){var rows=floating===Constants.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;if(missingOrEmpty(rows))return 0;for(var i=0;i<rows.length;i++){var rowNode=rows[i];if(rowNode.rowTop+rowNode.rowHeight-1>=pixel)return i}return rows.length-1},PinnedRowModel.prototype.setPinnedTopRowData=function(rowData){this.pinnedTopRows=this.createNodesFromData(rowData,!0);var event={type:Events.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event)},PinnedRowModel.prototype.setPinnedBottomRowData=function(rowData){this.pinnedBottomRows=this.createNodesFromData(rowData,!1);var event={type:Events.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event)},PinnedRowModel.prototype.createNodesFromData=function(allData,isTop){var _this=this,rowNodes=[];if(allData){var nextRowTop_1=0;allData.forEach((function(dataItem,index){var rowNode=new RowNode(_this.beans);rowNode.data=dataItem;var idPrefix=isTop?RowNode.ID_PREFIX_TOP_PINNED:RowNode.ID_PREFIX_BOTTOM_PINNED;rowNode.id=idPrefix+index,rowNode.rowPinned=isTop?Constants.PINNED_TOP:Constants.PINNED_BOTTOM,rowNode.setRowTop(nextRowTop_1),rowNode.setRowHeight(_this.gridOptionsWrapper.getRowHeightForNode(rowNode).height),rowNode.setRowIndex(index),nextRowTop_1+=rowNode.rowHeight,rowNodes.push(rowNode)}))}return rowNodes},PinnedRowModel.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},PinnedRowModel.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},PinnedRowModel.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},PinnedRowModel.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},PinnedRowModel.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},PinnedRowModel.prototype.getPinnedTopRow=function(index){return this.pinnedTopRows[index]},PinnedRowModel.prototype.getPinnedBottomRow=function(index){return this.pinnedBottomRows[index]},PinnedRowModel.prototype.forEachPinnedTopRow=function(callback){missingOrEmpty(this.pinnedTopRows)||this.pinnedTopRows.forEach(callback)},PinnedRowModel.prototype.forEachPinnedBottomRow=function(callback){missingOrEmpty(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(callback)},PinnedRowModel.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},PinnedRowModel.prototype.getTotalHeight=function(rowNodes){if(!rowNodes||0===rowNodes.length)return 0;var lastNode=last(rowNodes);return lastNode.rowTop+lastNode.rowHeight},__decorate$1x([Autowired("columnApi")],PinnedRowModel.prototype,"columnApi",void 0),__decorate$1x([Autowired("gridApi")],PinnedRowModel.prototype,"gridApi",void 0),__decorate$1x([Autowired("beans")],PinnedRowModel.prototype,"beans",void 0),__decorate$1x([PostConstruct],PinnedRowModel.prototype,"init",null),PinnedRowModel=__decorate$1x([Bean("pinnedRowModel")],PinnedRowModel)}(BeanStub);(ServerSideTransactionResultStatus=exports.ServerSideTransactionResultStatus||(exports.ServerSideTransactionResultStatus={})).Applied="Applied",ServerSideTransactionResultStatus.StoreNotFound="StoreNotFound",ServerSideTransactionResultStatus.StoreLoading="StoreLoading",ServerSideTransactionResultStatus.StoreWaitingToLoad="StoreWaitingToLoad",ServerSideTransactionResultStatus.StoreLoadingFailed="StoreLoadingFailed",ServerSideTransactionResultStatus.StoreWrongType="StoreWrongType",ServerSideTransactionResultStatus.Cancelled="Cancelled";var DIRECTION,ChangedPath=function(){function ChangedPath(keepingColumns,rootNode){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=keepingColumns,this.pathRoot={rowNode:rootNode,children:null},this.mapToItems[rootNode.id]=this.pathRoot}return ChangedPath.prototype.setInactive=function(){this.active=!1},ChangedPath.prototype.isActive=function(){return this.active},ChangedPath.prototype.depthFirstSearchChangedPath=function(pathItem,callback){if(pathItem.children)for(var i=0;i<pathItem.children.length;i++)this.depthFirstSearchChangedPath(pathItem.children[i],callback);callback(pathItem.rowNode)},ChangedPath.prototype.depthFirstSearchEverything=function(rowNode,callback,traverseEverything){if(rowNode.childrenAfterGroup)for(var i=0;i<rowNode.childrenAfterGroup.length;i++){var childNode=rowNode.childrenAfterGroup[i];childNode.childrenAfterGroup?this.depthFirstSearchEverything(rowNode.childrenAfterGroup[i],callback,traverseEverything):traverseEverything&&callback(childNode)}callback(rowNode)},ChangedPath.prototype.forEachChangedNodeDepthFirst=function(callback,traverseLeafNodes){void 0===traverseLeafNodes&&(traverseLeafNodes=!1),this.active?this.depthFirstSearchChangedPath(this.pathRoot,callback):this.depthFirstSearchEverything(this.pathRoot.rowNode,callback,traverseLeafNodes)},ChangedPath.prototype.executeFromRootNode=function(callback){callback(this.pathRoot.rowNode)},ChangedPath.prototype.createPathItems=function(rowNode){for(var pointer=rowNode,newEntryCount=0;!this.mapToItems[pointer.id];){var newEntry={rowNode:pointer,children:null};this.mapToItems[pointer.id]=newEntry,newEntryCount++,pointer=pointer.parent}return newEntryCount},ChangedPath.prototype.populateColumnsMap=function(rowNode,columns){var _this=this;if(this.keepingColumns&&columns)for(var pointer=rowNode;pointer;)this.nodeIdsToColumns[pointer.id]||(this.nodeIdsToColumns[pointer.id]={}),columns.forEach((function(col){return _this.nodeIdsToColumns[pointer.id][col.getId()]=!0})),pointer=pointer.parent},ChangedPath.prototype.linkPathItems=function(rowNode,newEntryCount){for(var pointer=rowNode,i=0;i<newEntryCount;i++){var thisItem=this.mapToItems[pointer.id],parentItem=this.mapToItems[pointer.parent.id];parentItem.children||(parentItem.children=[]),parentItem.children.push(thisItem),pointer=pointer.parent}},ChangedPath.prototype.addParentNode=function(rowNode,columns){if(rowNode&&!rowNode.isRowPinned()){var newEntryCount=this.createPathItems(rowNode);this.linkPathItems(rowNode,newEntryCount),this.populateColumnsMap(rowNode,columns)}},ChangedPath.prototype.canSkip=function(rowNode){return this.active&&!this.mapToItems[rowNode.id]},ChangedPath.prototype.getValueColumnsForNode=function(rowNode,valueColumns){if(!this.keepingColumns)return valueColumns;var colsForThisNode=this.nodeIdsToColumns[rowNode.id];return valueColumns.filter((function(col){return colsForThisNode[col.getId()]}))},ChangedPath.prototype.getNotValueColumnsForNode=function(rowNode,valueColumns){if(!this.keepingColumns)return null;var colsForThisNode=this.nodeIdsToColumns[rowNode.id];return valueColumns.filter((function(col){return!colsForThisNode[col.getId()]}))},ChangedPath}(),__extends$1L=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),RowNodeBlock=function(_super){function RowNodeBlock(id){var _this=_super.call(this)||this;return _this.state=RowNodeBlock.STATE_WAITING_TO_LOAD,_this.version=0,_this.id=id,_this}return __extends$1L(RowNodeBlock,_super),RowNodeBlock.prototype.getId=function(){return this.id},RowNodeBlock.prototype.load=function(){this.state=RowNodeBlock.STATE_LOADING,this.loadFromDatasource()},RowNodeBlock.prototype.getVersion=function(){return this.version},RowNodeBlock.prototype.setStateWaitingToLoad=function(){this.version++,this.state=RowNodeBlock.STATE_WAITING_TO_LOAD},RowNodeBlock.prototype.getState=function(){return this.state},RowNodeBlock.prototype.pageLoadFailed=function(version){this.isRequestMostRecentAndLive(version)&&(this.state=RowNodeBlock.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},RowNodeBlock.prototype.success=function(version,params){this.successCommon(version,params)},RowNodeBlock.prototype.pageLoaded=function(version,rows,lastRow){this.successCommon(version,{rowData:rows,rowCount:lastRow})},RowNodeBlock.prototype.isRequestMostRecentAndLive=function(version){var thisIsMostRecentRequest=version===this.version,weAreNotDestroyed=this.isAlive();return thisIsMostRecentRequest&&weAreNotDestroyed},RowNodeBlock.prototype.successCommon=function(version,params){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(version)&&(this.state=RowNodeBlock.STATE_LOADED,this.processServerResult(params))},RowNodeBlock.prototype.dispatchLoadCompleted=function(success){void 0===success&&(success=!0);var event={type:RowNodeBlock.EVENT_LOAD_COMPLETE,success,block:this};this.dispatchEvent(event)},RowNodeBlock.EVENT_LOAD_COMPLETE="loadComplete",RowNodeBlock.STATE_WAITING_TO_LOAD="needsLoading",RowNodeBlock.STATE_LOADING="loading",RowNodeBlock.STATE_LOADED="loaded",RowNodeBlock.STATE_FAILED="failed",RowNodeBlock}(BeanStub),__extends$1M=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$4=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},RowNodeBlockLoader=function(_super){function RowNodeBlockLoader(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.activeBlockLoadsCount=0,_this.blocks=[],_this.active=!0,_this}var RowNodeBlockLoader_1;return __extends$1M(RowNodeBlockLoader,_super),RowNodeBlockLoader_1=RowNodeBlockLoader,RowNodeBlockLoader.prototype.postConstruct=function(){this.maxConcurrentRequests=this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();var blockLoadDebounceMillis=this.gridOptionsWrapper.getBlockLoadDebounceMillis();blockLoadDebounceMillis&&blockLoadDebounceMillis>0&&(this.checkBlockToLoadDebounce=_.debounce(this.performCheckBlocksToLoad.bind(this),blockLoadDebounceMillis))},RowNodeBlockLoader.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("RowNodeBlockLoader")},RowNodeBlockLoader.prototype.addBlock=function(block){this.blocks.push(block),block.addEventListener(RowNodeBlock.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},RowNodeBlockLoader.prototype.removeBlock=function(block){_.removeFromArray(this.blocks,block)},RowNodeBlockLoader.prototype.destroy=function(){_super.prototype.destroy.call(this),this.active=!1},RowNodeBlockLoader.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),0==this.activeBlockLoadsCount&&this.dispatchEvent({type:RowNodeBlockLoader_1.BLOCK_LOADER_FINISHED_EVENT})},RowNodeBlockLoader.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},RowNodeBlockLoader.prototype.performCheckBlocksToLoad=function(){if(this.active)if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)this.logger.log("checkBlockToLoad: max loads exceeded");else{var blockToLoad=null;this.blocks.forEach((function(block){block.getState()===RowNodeBlock.STATE_WAITING_TO_LOAD&&(blockToLoad=block)})),blockToLoad&&(blockToLoad.load(),this.activeBlockLoadsCount++,this.printCacheStatus())}},RowNodeBlockLoader.prototype.getBlockState=function(){var result={};return this.blocks.forEach((function(block){var _a=block.getBlockStateJson(),id=_a.id,state=_a.state;result[id]=state})),result},RowNodeBlockLoader.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+", blocks = "+JSON.stringify(this.getBlockState()))},RowNodeBlockLoader.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},RowNodeBlockLoader.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",__decorate$1y([PostConstruct],RowNodeBlockLoader.prototype,"postConstruct",null),__decorate$1y([__param$4(0,Qualifier("loggerFactory"))],RowNodeBlockLoader.prototype,"setBeans",null),RowNodeBlockLoader=RowNodeBlockLoader_1=__decorate$1y([Bean("rowNodeBlockLoader")],RowNodeBlockLoader)}(BeanStub),__extends$1N=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PaginationProxy=function(_super){function PaginationProxy(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.currentPage=0,_this.topDisplayedRowIndex=0,_this.bottomDisplayedRowIndex=0,_this.pixelOffset=0,_this.masterRowCount=0,_this}return __extends$1N(PaginationProxy,_super),PaginationProxy.prototype.postConstruct=function(){this.active=this.gridOptionsWrapper.isPagination(),this.paginateChildRows=this.gridOptionsWrapper.isPaginateChildRows(),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()},PaginationProxy.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){var res=this.rowModel.ensureRowHeightsValid(startPixel,endPixel,this.getPageFirstRow(),this.getPageLastRow());return res&&this.calculatePages(),res},PaginationProxy.prototype.onModelUpdated=function(modelUpdatedEvent){this.calculatePages();var paginationChangedEvent={type:Events.EVENT_PAGINATION_CHANGED,animate:!!modelUpdatedEvent&&modelUpdatedEvent.animate,newData:!!modelUpdatedEvent&&modelUpdatedEvent.newData,newPage:!!modelUpdatedEvent&&modelUpdatedEvent.newPage,keepRenderedRows:!!modelUpdatedEvent&&modelUpdatedEvent.keepRenderedRows,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(paginationChangedEvent)},PaginationProxy.prototype.onPaginationPageSizeChanged=function(){this.calculatePages();var paginationChangedEvent={type:Events.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(paginationChangedEvent)},PaginationProxy.prototype.goToPage=function(page){if(this.active&&this.currentPage!==page){this.currentPage=page;var event={type:Events.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,api:this.gridApi,columnApi:this.columnApi};this.onModelUpdated(event)}},PaginationProxy.prototype.getPixelOffset=function(){return this.pixelOffset},PaginationProxy.prototype.getRow=function(index){return this.rowModel.getRow(index)},PaginationProxy.prototype.getRowNode=function(id){return this.rowModel.getRowNode(id)},PaginationProxy.prototype.getRowIndexAtPixel=function(pixel){return this.rowModel.getRowIndexAtPixel(pixel)},PaginationProxy.prototype.getCurrentPageHeight=function(){return missing(this.topRowBounds)||missing(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},PaginationProxy.prototype.getCurrentPagePixelRange=function(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}},PaginationProxy.prototype.isRowPresent=function(rowNode){return!!this.rowModel.isRowPresent(rowNode)&&(rowNode.rowIndex>=this.topDisplayedRowIndex&&rowNode.rowIndex<=this.bottomDisplayedRowIndex)},PaginationProxy.prototype.isEmpty=function(){return this.rowModel.isEmpty()},PaginationProxy.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},PaginationProxy.prototype.getNodesInRangeForSelection=function(firstInRange,lastInRange){return this.rowModel.getNodesInRangeForSelection(firstInRange,lastInRange)},PaginationProxy.prototype.forEachNode=function(callback){return this.rowModel.forEachNode(callback)},PaginationProxy.prototype.getType=function(){return this.rowModel.getType()},PaginationProxy.prototype.getRowBounds=function(index){var res=this.rowModel.getRowBounds(index);return res.rowIndex=index,res},PaginationProxy.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},PaginationProxy.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},PaginationProxy.prototype.getRowCount=function(){return this.rowModel.getRowCount()},PaginationProxy.prototype.getPageForIndex=function(index){return Math.floor(index/this.pageSize)},PaginationProxy.prototype.goToPageWithIndex=function(index){if(this.active){var pageNumber=this.getPageForIndex(index);this.goToPage(pageNumber)}},PaginationProxy.prototype.isRowInPage=function(row){return!this.active||this.getPageForIndex(row.rowIndex)===this.currentPage},PaginationProxy.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},PaginationProxy.prototype.getCurrentPage=function(){return this.currentPage},PaginationProxy.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},PaginationProxy.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},PaginationProxy.prototype.goToFirstPage=function(){this.goToPage(0)},PaginationProxy.prototype.goToLastPage=function(){var rowCount=this.rowModel.getRowCount(),lastPage=Math.floor(rowCount/this.pageSize);this.goToPage(lastPage)},PaginationProxy.prototype.getPageSize=function(){return this.pageSize},PaginationProxy.prototype.getTotalPages=function(){return this.totalPages},PaginationProxy.prototype.setPageSize=function(){this.pageSize=this.gridOptionsWrapper.getPaginationPageSize(),(null==this.pageSize||this.pageSize<1)&&(this.pageSize=100)},PaginationProxy.prototype.calculatePages=function(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(exists(this.topRowBounds)?this.topRowBounds.rowTop:0)},PaginationProxy.prototype.setPixelOffset=function(value){this.pixelOffset!==value&&(this.pixelOffset=value,this.eventService.dispatchEvent({type:Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},PaginationProxy.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},PaginationProxy.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)this.setZeroRows();else{var masterLastRowIndex=this.masterRowCount-1;this.totalPages=Math.floor(masterLastRowIndex/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isNumeric(this.currentPage)||this.currentPage<0)&&(this.currentPage=0);var masterPageStartIndex=this.pageSize*this.currentPage,masterPageEndIndex=this.pageSize*(this.currentPage+1)-1;if(masterPageEndIndex>masterLastRowIndex&&(masterPageEndIndex=masterLastRowIndex),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(masterPageStartIndex),masterPageEndIndex===masterLastRowIndex)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var firstIndexNotToShow=this.rowModel.getTopLevelRowDisplayedIndex(masterPageEndIndex+1);this.bottomDisplayedRowIndex=firstIndexNotToShow-1}}},PaginationProxy.prototype.getMasterRowCount=function(){return this.masterRowCount},PaginationProxy.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),0!==this.masterRowCount){var maxRowIndex=this.masterRowCount-1;this.totalPages=Math.floor(maxRowIndex/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isNumeric(this.currentPage)||this.currentPage<0)&&(this.currentPage=0),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>maxRowIndex&&(this.bottomDisplayedRowIndex=maxRowIndex)}else this.setZeroRows()},PaginationProxy.prototype.calculatedPagesNotActive=function(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},__decorate$1z([Autowired("rowModel")],PaginationProxy.prototype,"rowModel",void 0),__decorate$1z([Autowired("columnApi")],PaginationProxy.prototype,"columnApi",void 0),__decorate$1z([Autowired("gridApi")],PaginationProxy.prototype,"gridApi",void 0),__decorate$1z([PostConstruct],PaginationProxy.prototype,"postConstruct",null),PaginationProxy=__decorate$1z([Bean("paginationProxy")],PaginationProxy)}(BeanStub),__extends$1O=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1A=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},StylingService=function(_super){function StylingService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1O(StylingService,_super),StylingService.prototype.processAllCellClasses=function(colDef,params,onApplicableClass,onNotApplicableClass){this.processClassRules(colDef.cellClassRules,params,onApplicableClass,onNotApplicableClass),this.processStaticCellClasses(colDef,params,onApplicableClass)},StylingService.prototype.processClassRules=function(classRules,params,onApplicableClass,onNotApplicableClass){if(null!=classRules){for(var classNames=Object.keys(classRules),classesToApply={},classesToRemove={},_loop_1=function(i){var resultOfRule,className=classNames[i],rule=classRules[className];"string"==typeof rule?resultOfRule=this_1.expressionService.evaluate(rule,params):"function"==typeof rule&&(resultOfRule=rule(params)),className.split(" ").forEach((function(singleClass){null!=singleClass&&""!=singleClass.trim()&&(resultOfRule?classesToApply[singleClass]=!0:classesToRemove[singleClass]=!0)}))},this_1=this,i=0;i<classNames.length;i++)_loop_1(i);onNotApplicableClass&&Object.keys(classesToRemove).forEach(onNotApplicableClass),Object.keys(classesToApply).forEach(onApplicableClass)}},StylingService.prototype.getStaticCellClasses=function(colDef,params){var classOrClasses,cellClass=colDef.cellClass;if(!cellClass)return[];"function"==typeof cellClass?classOrClasses=cellClass(params):classOrClasses=cellClass;return"string"==typeof classOrClasses&&(classOrClasses=[classOrClasses]),classOrClasses||[]},StylingService.prototype.processStaticCellClasses=function(colDef,params,onApplicableClass){this.getStaticCellClasses(colDef,params).forEach((function(cssClassItem){onApplicableClass(cssClassItem)}))},__decorate$1A([Autowired("expressionService")],StylingService.prototype,"expressionService",void 0),StylingService=__decorate$1A([Bean("stylingService")],StylingService)}(BeanStub),__extends$1P=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgRadioButton=function(_super){function AgRadioButton(config){return _super.call(this,config,"ag-radio-button","radio")||this}return __extends$1P(AgRadioButton,_super),AgRadioButton.prototype.isSelected=function(){return this.eInput.checked},AgRadioButton.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},AgRadioButton.prototype.addInputListeners=function(){_super.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,Events.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},AgRadioButton.prototype.onChange=function(event){event.selected&&event.name&&this.eInput.name&&this.eInput.name===event.name&&event.id&&this.eInput.id!==event.id&&this.setValue(!1,!0)},AgRadioButton}(AgCheckbox),__extends$1Q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgToggleButton=function(_super){function AgToggleButton(config){return _super.call(this,config,"ag-toggle-button")||this}return __extends$1Q(AgToggleButton,_super),AgToggleButton.prototype.setValue=function(value,silent){return _super.prototype.setValue.call(this,value,silent),this.addOrRemoveCssClass("ag-selected",this.getValue()),this},AgToggleButton}(AgCheckbox),__extends$1R=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputTextField=function(_super){function AgInputTextField(config,className,inputType){return void 0===className&&(className="ag-text-field"),void 0===inputType&&(inputType="text"),_super.call(this,config,className,inputType)||this}return __extends$1R(AgInputTextField,_super),AgInputTextField.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},AgInputTextField.prototype.setValue=function(value,silent){var ret=_super.prototype.setValue.call(this,value,silent);return this.eInput.value!==value&&(this.eInput.value=exists(value)?value:""),ret},AgInputTextField.prototype.preventDisallowedCharacters=function(){var pattern=new RegExp("["+this.config.allowedCharPattern+"]");this.addManagedListener(this.eInput,"keypress",(function(event){event.key&&!pattern.test(event.key)&&event.preventDefault()})),this.addManagedListener(this.eInput,"paste",(function(e){var _a,text=null===(_a=e.clipboardData)||void 0===_a?void 0:_a.getData("text");text&&text.split("").some((function(c){return!pattern.test(c)}))&&e.preventDefault()}))},AgInputTextField}(AgAbstractInputField),__extends$1S=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputTextArea=function(_super){function AgInputTextArea(config){return _super.call(this,config,"ag-text-area",null,"textarea")||this}return __extends$1S(AgInputTextArea,_super),AgInputTextArea.prototype.setValue=function(value,silent){var ret=_super.prototype.setValue.call(this,value,silent);return this.eInput.value=value,ret},AgInputTextArea.prototype.setCols=function(cols){return this.eInput.cols=cols,this},AgInputTextArea.prototype.setRows=function(rows){return this.eInput.rows=rows,this},AgInputTextArea}(AgAbstractInputField),__extends$1T=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputNumberField=function(_super){function AgInputNumberField(config){return _super.call(this,config,"ag-number-field","number")||this}return __extends$1T(AgInputNumberField,_super),AgInputNumberField.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",(function(){var floatedValue=parseFloat(_this.eInput.value),value=isNaN(floatedValue)?"":_this.normalizeValue(floatedValue.toString());_this.value!==value&&_this.setValue(value)})),this.eInput.step="any"},AgInputNumberField.prototype.normalizeValue=function(value){if(""===value)return"";this.precision&&(value=this.adjustPrecision(value));var val=parseFloat(value);return null!=this.min&&val<this.min?value=this.min.toString():null!=this.max&&val>this.max&&(value=this.max.toString()),value},AgInputNumberField.prototype.adjustPrecision=function(value){if(this.precision){var floatString=parseFloat(value).toFixed(this.precision);value=parseFloat(floatString).toString()}return value},AgInputNumberField.prototype.setMin=function(min){return this.min===min||(this.min=min,addOrRemoveAttribute(this.eInput,"min",min)),this},AgInputNumberField.prototype.setMax=function(max){return this.max===max||(this.max=max,addOrRemoveAttribute(this.eInput,"max",max)),this},AgInputNumberField.prototype.setPrecision=function(precision){return this.precision=precision,this},AgInputNumberField.prototype.setStep=function(step){return this.step===step||(this.step=step,addOrRemoveAttribute(this.eInput,"step",step)),this},AgInputNumberField.prototype.setValue=function(value,silent){return(value=this.adjustPrecision(value))!=this.normalizeValue(value)?this:_super.prototype.setValue.call(this,value,silent)},AgInputNumberField}(AgInputTextField),__extends$1U=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputRange=function(_super){function AgInputRange(config){return _super.call(this,config,"ag-range-field","range")||this}return __extends$1U(AgInputRange,_super),AgInputRange.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this);var _a=this.config,min=_a.min,max=_a.max,step=_a.step;null!=min&&this.setMinValue(min),null!=max&&this.setMaxValue(max),this.setStep(step||1)},AgInputRange.prototype.addInputListeners=function(){var _this=this;this.addManagedListener(this.eInput,"input",(function(e){var value=e.target.value;_this.setValue(value)}))},AgInputRange.prototype.setMinValue=function(value){return this.min=value,this.eInput.setAttribute("min",value.toString()),this},AgInputRange.prototype.setMaxValue=function(value){return this.max=value,this.eInput.setAttribute("max",value.toString()),this},AgInputRange.prototype.setStep=function(value){return this.eInput.setAttribute("step",value.toString()),this},AgInputRange.prototype.setValue=function(value,silent){null!=this.min&&(value=Math.max(parseFloat(value),this.min).toString()),null!=this.max&&(value=Math.min(parseFloat(value),this.max).toString());var ret=_super.prototype.setValue.call(this,value,silent);return this.eInput.value=value,ret},AgInputRange}(AgAbstractInputField),__extends$1V=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1B=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgSlider=function(_super){function AgSlider(config){var _this=_super.call(this,config,AgSlider.TEMPLATE)||this;return _this.labelAlignment="top",_this}return __extends$1V(AgSlider,_super),AgSlider.prototype.init=function(){this.eSlider.addCssClass("ag-slider-field")},AgSlider.prototype.onValueChange=function(callbackFn){var _this=this,eventChanged=AgAbstractField.EVENT_CHANGED;return this.addManagedListener(this.eText,eventChanged,(function(){var textValue=parseFloat(_this.eText.getValue());_this.eSlider.setValue(textValue.toString(),!0),callbackFn(textValue||0)})),this.addManagedListener(this.eSlider,eventChanged,(function(){var sliderValue=_this.eSlider.getValue();_this.eText.setValue(sliderValue,!0),callbackFn(parseFloat(sliderValue))})),this},AgSlider.prototype.setSliderWidth=function(width){return this.eSlider.setWidth(width),this},AgSlider.prototype.setTextFieldWidth=function(width){return this.eText.setWidth(width),this},AgSlider.prototype.setMinValue=function(minValue){return this.eSlider.setMinValue(minValue),this.eText.setMin(minValue),this},AgSlider.prototype.setMaxValue=function(maxValue){return this.eSlider.setMaxValue(maxValue),this.eText.setMax(maxValue),this},AgSlider.prototype.getValue=function(){return this.eText.getValue()},AgSlider.prototype.setValue=function(value){return this.getValue()===value||(this.eText.setValue(value,!0),this.eSlider.setValue(value,!0),this.dispatchEvent({type:AgAbstractField.EVENT_CHANGED})),this},AgSlider.prototype.setStep=function(step){return this.eSlider.setStep(step),this.eText.setStep(step),this},AgSlider.TEMPLATE='<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>',__decorate$1B([RefSelector("eLabel")],AgSlider.prototype,"eLabel",void 0),__decorate$1B([RefSelector("eSlider")],AgSlider.prototype,"eSlider",void 0),__decorate$1B([RefSelector("eText")],AgSlider.prototype,"eText",void 0),__decorate$1B([PostConstruct],AgSlider.prototype,"init",null),AgSlider}(AgAbstractLabel),__extends$1W=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1C=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgAngleSelect=function(_super){function AgAngleSelect(config){var _this=_super.call(this,config,AgAngleSelect.TEMPLATE)||this;return _this.radius=0,_this.offsetX=0,_this.offsetY=0,_this}return __extends$1W(AgAngleSelect,_super),AgAngleSelect.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(e){_this.parentCircleRect=_this.eParentCircle.getBoundingClientRect()},onDragging:function(e){return _this.calculateAngleDrag(e)},onDragStop:function(){}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(""+this.degrees).onValueChange((function(value){null!=value&&""!==value||(value="0"),value=_this.eAngleValue.normalizeValue(value);var floatValue=parseFloat(value);floatValue>180&&(floatValue-=360),_this.setValue(floatValue)})),this.updateNumberInput(),exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,AgAbstractField.EVENT_CHANGED,(function(){var eDocument=_this.gridOptionsWrapper.getDocument();_this.eAngleValue.getInputElement().contains(eDocument.activeElement)||_this.updateNumberInput()}))},AgAngleSelect.prototype.updateNumberInput=function(){var normalizedValue=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(normalizedValue.toString())},AgAngleSelect.prototype.positionChildCircle=function(radians){var rect=this.parentCircleRect||{width:24,height:24},eChildCircle=this.eChildCircle,centerX=rect.width/2,centerY=rect.height/2;eChildCircle.style.left=centerX+8*Math.cos(radians)+"px",eChildCircle.style.top=centerY+8*Math.sin(radians)+"px"},AgAngleSelect.prototype.calculatePolar=function(){var x=this.offsetX,y=this.offsetY,radians=Math.atan2(y,x);this.degrees=this.toDegrees(radians),this.radius=Math.sqrt(x*x+y*y),this.positionChildCircle(radians)},AgAngleSelect.prototype.calculateCartesian=function(){var radians=this.toRadians(this.getValue()),radius=this.getRadius();this.setOffsetX(Math.cos(radians)*radius).setOffsetY(Math.sin(radians)*radius)},AgAngleSelect.prototype.setOffsetX=function(offset){return this.offsetX!==offset&&(this.offsetX=offset,this.calculatePolar()),this},AgAngleSelect.prototype.setOffsetY=function(offset){return this.offsetY!==offset&&(this.offsetY=offset,this.calculatePolar()),this},AgAngleSelect.prototype.calculateAngleDrag=function(e){var rect=this.parentCircleRect,centerX=rect.width/2,centerY=rect.height/2,dx=e.clientX-rect.left-centerX,dy=e.clientY-rect.top-centerY,radians=Math.atan2(dy,dx);this.setValue(radians,!0)},AgAngleSelect.prototype.toDegrees=function(radians){return radians/Math.PI*180},AgAngleSelect.prototype.toRadians=function(degrees){return degrees/180*Math.PI},AgAngleSelect.prototype.normalizeNegativeValue=function(degrees){return degrees<0?360+degrees:degrees},AgAngleSelect.prototype.normalizeAngle180=function(radians){return(radians%=2*Math.PI)<-Math.PI?radians+=2*Math.PI:radians>=Math.PI&&(radians-=2*Math.PI),radians},AgAngleSelect.prototype.getRadius=function(){return this.radius},AgAngleSelect.prototype.setRadius=function(r){return this.radius===r||(this.radius=r,this.calculateCartesian()),this},AgAngleSelect.prototype.onValueChange=function(callbackFn){var _this=this;return this.addManagedListener(this,AgAbstractField.EVENT_CHANGED,(function(){callbackFn(_this.degrees)})),this},AgAngleSelect.prototype.getValue=function(radians){return radians?this.toRadians(this.degrees):this.degrees},AgAngleSelect.prototype.setValue=function(degrees,radians){var radiansValue;return radiansValue=radians?degrees:this.normalizeAngle180(this.toRadians(degrees)),degrees=this.toDegrees(radiansValue),this.degrees!==degrees&&(this.degrees=Math.floor(degrees),this.calculateCartesian(),this.positionChildCircle(radiansValue),this.dispatchEvent({type:AgAbstractField.EVENT_CHANGED})),this},AgAngleSelect.prototype.setWidth=function(width){return setFixedWidth(this.getGui(),width),this},AgAngleSelect.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener),_super.prototype.destroy.call(this)},AgAngleSelect.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',__decorate$1C([RefSelector("eLabel")],AgAngleSelect.prototype,"eLabel",void 0),__decorate$1C([RefSelector("eParentCircle")],AgAngleSelect.prototype,"eParentCircle",void 0),__decorate$1C([RefSelector("eChildCircle")],AgAngleSelect.prototype,"eChildCircle",void 0),__decorate$1C([RefSelector("eAngleValue")],AgAngleSelect.prototype,"eAngleValue",void 0),__decorate$1C([Autowired("dragService")],AgAngleSelect.prototype,"dragService",void 0),AgAngleSelect}(AgAbstractLabel),__extends$1X=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1D=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$e=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},AgColorPanel=function(_super){function AgColorPanel(config){var _this=_super.call(this,AgColorPanel.TEMPLATE)||this;return _this.H=1,_this.S=1,_this.B=1,_this.A=1,_this.isSpectrumDragging=!1,_this.isSpectrumHueDragging=!1,_this.isSpectrumAlphaDragging=!1,_this.colorChanged=!1,_this.picker=config.picker,_this}return __extends$1X(AgColorPanel,_super),AgColorPanel.prototype.postConstruct=function(){var eGui=this.getGui();this.initRecentColors(),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(eGui,"mousemove",this.onSpectrumDraggerMove.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(eGui,"mousemove",this.onSpectrumHueMove.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addManagedListener(eGui,"mousemove",this.onSpectrumAlphaMove.bind(this)),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this))},AgColorPanel.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()},AgColorPanel.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()},AgColorPanel.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()},AgColorPanel.prototype.onSpectrumDraggerDown=function(e){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)},AgColorPanel.prototype.onSpectrumDraggerMove=function(e){this.isSpectrumDragging&&this.moveDragger(e)},AgColorPanel.prototype.onSpectrumHueDown=function(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)},AgColorPanel.prototype.onSpectrumHueMove=function(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)},AgColorPanel.prototype.onSpectrumAlphaDown=function(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)},AgColorPanel.prototype.onSpectrumAlphaMove=function(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)},AgColorPanel.prototype.onMouseUp=function(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1},AgColorPanel.prototype.moveDragger=function(e){var valRect=this.spectrumValRect;if(valRect){var x=e.clientX-valRect.left,y=e.clientY-valRect.top;x=Math.max(x,0),x=Math.min(x,valRect.width),y=Math.max(y,0),y=Math.min(y,valRect.height),this.setSpectrumValue(x/valRect.width,1-y/valRect.height)}},AgColorPanel.prototype.moveHueSlider=function(e){var hueRect=this.spectrumHueRect;if(hueRect){var slider=this.spectrumHueSlider,sliderRect=slider.getBoundingClientRect(),x=e.clientX-hueRect.left;x=Math.max(x,0),x=Math.min(x,hueRect.width),this.H=1-x/hueRect.width,slider.style.left=x+sliderRect.width/2+"px",this.update()}},AgColorPanel.prototype.moveAlphaSlider=function(e){var alphaRect=this.spectrumAlphaRect;if(alphaRect){var slider=this.spectrumAlphaSlider,sliderRect=slider.getBoundingClientRect(),x=e.clientX-alphaRect.left;x=Math.max(x,0),x=Math.min(x,alphaRect.width),this.A=x/alphaRect.width,slider.style.left=x+sliderRect.width/2+"px",this.update()}},AgColorPanel.prototype.update=function(){var color=Color.fromHSB(360*this.H,this.S,this.B,this.A),spectrumColor=Color.fromHSB(360*this.H,1,1),rgbaColor=color.toRgbaString(),colorPicker=this.picker;Color.fromString(colorPicker.getValue()).toRgbaString()!==rgbaColor&&(this.colorChanged=!0),colorPicker.setValue(rgbaColor),this.spectrumColor.style.backgroundColor=spectrumColor.toRgbaString(),this.spectrumDragger.style.backgroundColor=rgbaColor},AgColorPanel.prototype.setSpectrumValue=function(saturation,brightness){var valRect=this.spectrumValRect||this.refreshSpectrumRect();if(valRect){var dragger=this.spectrumDragger,draggerRect=dragger.getBoundingClientRect();saturation=Math.max(0,saturation),saturation=Math.min(1,saturation),brightness=Math.max(0,brightness),brightness=Math.min(1,brightness),this.S=saturation,this.B=brightness,dragger.style.left=saturation*valRect.width-draggerRect.width/2+"px",dragger.style.top=(1-brightness)*valRect.height-draggerRect.height/2+"px",this.update()}},AgColorPanel.prototype.initRecentColors=function(){var innerHtml=AgColorPanel.recentColors.map((function(color,index){return'<div class="ag-recent-color" id='+index+' style="background-color: '+color+'; width: 15px; height: 15px;" recent-color="'+color+'"></div>'}));this.recentColors.innerHTML=innerHtml.join("")},AgColorPanel.prototype.setValue=function(val){var color=Color.fromString(val),_a=__read$e(color.toHSB(),3),h=_a[0],s=_a[1],b=_a[2];this.H=(isNaN(h)?0:h)/360,this.A=color.a;var spectrumHueRect=this.spectrumHueRect||this.refreshHueRect(),spectrumAlphaRect=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-spectrumHueRect.width+"px",this.spectrumAlphaSlider.style.left=this.A*spectrumAlphaRect.width+"px",this.setSpectrumValue(s,b)},AgColorPanel.prototype.onRecentColorClick=function(e){var target=e.target;if(exists(target.id)){var id=parseInt(target.id,10);this.setValue(AgColorPanel.recentColors[id]),this.destroy()}},AgColorPanel.prototype.addRecentColor=function(){var rgbaColor=Color.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString(),recentColors=AgColorPanel.recentColors;this.colorChanged&&recentColors[0]!==rgbaColor&&(recentColors=recentColors.filter((function(currentColor){return currentColor!=rgbaColor})),(recentColors=[rgbaColor].concat(recentColors)).length>AgColorPanel.maxRecentColors&&(recentColors=recentColors.slice(0,AgColorPanel.maxRecentColors)),AgColorPanel.recentColors=recentColors)},AgColorPanel.prototype.destroy=function(){this.addRecentColor(),_super.prototype.destroy.call(this)},AgColorPanel.maxRecentColors=8,AgColorPanel.recentColors=[],AgColorPanel.TEMPLATE='<div class="ag-color-panel">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',__decorate$1D([RefSelector("spectrumColor")],AgColorPanel.prototype,"spectrumColor",void 0),__decorate$1D([RefSelector("spectrumVal")],AgColorPanel.prototype,"spectrumVal",void 0),__decorate$1D([RefSelector("spectrumDragger")],AgColorPanel.prototype,"spectrumDragger",void 0),__decorate$1D([RefSelector("spectrumHue")],AgColorPanel.prototype,"spectrumHue",void 0),__decorate$1D([RefSelector("spectrumHueSlider")],AgColorPanel.prototype,"spectrumHueSlider",void 0),__decorate$1D([RefSelector("spectrumAlpha")],AgColorPanel.prototype,"spectrumAlpha",void 0),__decorate$1D([RefSelector("spectrumAlphaSlider")],AgColorPanel.prototype,"spectrumAlphaSlider",void 0),__decorate$1D([RefSelector("recentColors")],AgColorPanel.prototype,"recentColors",void 0),__decorate$1D([PostConstruct],AgColorPanel.prototype,"postConstruct",null),AgColorPanel}(Component),__extends$1Y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1E=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgPanel=function(_super){function AgPanel(config){var _this=_super.call(this,AgPanel.getTemplate(config))||this;return _this.closable=!0,_this.config=config,_this}return __extends$1Y(AgPanel,_super),AgPanel.getTemplate=function(config){var cssIdentifier=config&&config.cssIdentifier||"default";return'<div class="ag-panel ag-'+cssIdentifier+'-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-'+cssIdentifier+'-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-'+cssIdentifier+'-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-'+cssIdentifier+'-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-'+cssIdentifier+'-panel-content-wrapper"></div>\n        </div>'},AgPanel.prototype.postConstruct=function(){var _this=this,_a=this.config,component=_a.component,closable=_a.closable,hideTitleBar=_a.hideTitleBar,title=_a.title,_b=_a.minWidth,minWidth=void 0===_b?250:_b,width=_a.width,_c=_a.minHeight,minHeight=void 0===_c?250:_c,height=_a.height,centered=_a.centered,popup=_a.popup,x=_a.x,y=_a.y;this.positionableFeature=new PositionableFeature(this.getGui(),{minWidth,width,minHeight,height,centered,x,y,popup,calculateTopBuffer:function(){return _this.positionableFeature.getHeight()-_this.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var eGui=this.getGui();component&&this.setBodyComponent(component),hideTitleBar?this.eTitleBar.classList.add("ag-hidden"):(title&&this.setTitle(title),this.setClosable(null!=closable?closable:this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",(function(e){var eDocument=_this.gridOptionsWrapper.getDocument();if(eGui.contains(e.relatedTarget)||eGui.contains(eDocument.activeElement)||_this.eTitleBarButtons.contains(e.target))e.preventDefault();else{var focusEl=_this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");focusEl&&focusEl.focus()}})),popup&&this.positionableFeature.isPositioned()||(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},AgPanel.prototype.renderComponent=function(){var _this=this,eGui=this.getGui();eGui.focus(),this.close=function(){eGui.parentElement.removeChild(eGui),_this.destroy()}},AgPanel.prototype.getHeight=function(){return this.positionableFeature.getHeight()},AgPanel.prototype.setHeight=function(height){this.positionableFeature.setHeight(height)},AgPanel.prototype.getWidth=function(){return this.positionableFeature.getWidth()},AgPanel.prototype.setWidth=function(width){this.positionableFeature.setWidth(width)},AgPanel.prototype.setClosable=function(closable){if(closable!==this.closable&&(this.closable=closable),closable){var closeButtonComp=this.closeButtonComp=new Component(AgPanel.CLOSE_BTN_TEMPLATE);this.getContext().createBean(closeButtonComp);var eGui=closeButtonComp.getGui(),child=createIconNoSpan("close",this.gridOptionsWrapper);child.classList.add("ag-panel-title-bar-button-icon"),eGui.appendChild(child),this.addTitleBarButton(closeButtonComp),closeButtonComp.addManagedListener(eGui,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){(eGui=this.closeButtonComp.getGui()).parentElement.removeChild(eGui),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}},AgPanel.prototype.setBodyComponent=function(bodyComponent){bodyComponent.setParentComponent(this),this.eContentWrapper.appendChild(bodyComponent.getGui())},AgPanel.prototype.addTitleBarButton=function(button,position){var eTitleBarButtons=this.eTitleBarButtons,buttons=eTitleBarButtons.children,len=buttons.length;null==position&&(position=len),position=Math.max(0,Math.min(position,len)),button.addCssClass("ag-panel-title-bar-button");var eGui=button.getGui();0===position?eTitleBarButtons.insertAdjacentElement("afterbegin",eGui):position===len?eTitleBarButtons.insertAdjacentElement("beforeend",eGui):buttons[position-1].insertAdjacentElement("afterend",eGui),button.setParentComponent(this)},AgPanel.prototype.getBodyHeight=function(){return getInnerHeight(this.eContentWrapper)},AgPanel.prototype.getBodyWidth=function(){return getInnerWidth(this.eContentWrapper)},AgPanel.prototype.setTitle=function(title){this.eTitle.innerText=title},AgPanel.prototype.onBtClose=function(){this.close()},AgPanel.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var eGui=this.getGui();eGui&&eGui.offsetParent&&this.close(),_super.prototype.destroy.call(this)},AgPanel.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',__decorate$1E([RefSelector("eContentWrapper")],AgPanel.prototype,"eContentWrapper",void 0),__decorate$1E([RefSelector("eTitleBar")],AgPanel.prototype,"eTitleBar",void 0),__decorate$1E([RefSelector("eTitleBarButtons")],AgPanel.prototype,"eTitleBarButtons",void 0),__decorate$1E([RefSelector("eTitle")],AgPanel.prototype,"eTitle",void 0),__decorate$1E([PostConstruct],AgPanel.prototype,"postConstruct",null),AgPanel}(Component),__extends$1Z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$e=function(){return __assign$e=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$e.apply(this,arguments)},__decorate$1F=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgDialog=function(_super){function AgDialog(config){var _this=_super.call(this,__assign$e(__assign$e({},config),{popup:!0}))||this;return _this.isMaximizable=!1,_this.isMaximized=!1,_this.maximizeListeners=[],_this.resizeListenerDestroy=null,_this.lastPosition={x:0,y:0,width:0,height:0},_this}return __extends$1Z(AgDialog,_super),AgDialog.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),_a=this.config,movable=_a.movable,resizable=_a.resizable,maximizable=_a.maximizable;this.addCssClass("ag-dialog"),_super.prototype.postConstruct.call(this),this.addManagedListener(eGui,"focusin",(function(e){eGui.contains(e.relatedTarget)||_this.popupService.bringPopupToFront(eGui)})),movable&&this.setMovable(movable),maximizable&&this.setMaximizable(maximizable),resizable&&this.setResizable(resizable)},AgDialog.prototype.renderComponent=function(){var eGui=this.getGui(),_a=this.config,alwaysOnTop=_a.alwaysOnTop,modal=_a.modal,title=_a.title,translate=this.gridOptionsWrapper.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal,eChild:eGui,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop,ariaLabel:title||translate("ariaLabelDialog","Dialog")});addPopupRes&&(this.close=addPopupRes.hideFunc)},AgDialog.prototype.toggleMaximize=function(){var position=this.positionableFeature.getPosition();if(this.isMaximized){var _a=this.lastPosition,x=_a.x,y=_a.y,width=_a.width,height=_a.height;this.setWidth(width),this.setHeight(height),this.positionableFeature.offsetElement(x,y)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=position.x,this.lastPosition.y=position.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},AgDialog.prototype.refreshMaximizeIcon=function(){setDisplayed(this.maximizeIcon,!this.isMaximized),setDisplayed(this.minimizeIcon,this.isMaximized)},AgDialog.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach((function(destroyListener){return destroyListener()})),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},AgDialog.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),_super.prototype.destroy.call(this)},AgDialog.prototype.setResizable=function(resizable){this.positionableFeature.setResizable(resizable)},AgDialog.prototype.setMovable=function(movable){this.positionableFeature.setMovable(movable,this.eTitleBar)},AgDialog.prototype.setMaximizable=function(maximizable){var _this=this;if(!maximizable)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));var eTitleBar=this.eTitleBar;if(eTitleBar&&maximizable!==this.isMaximizable){var maximizeButtonComp=this.maximizeButtonComp=this.createBean(new Component('<div class="ag-dialog-button"></span>')),eGui=maximizeButtonComp.getGui();eGui.appendChild(this.maximizeIcon=createIconNoSpan("maximize",this.gridOptionsWrapper)),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),eGui.appendChild(this.minimizeIcon=createIconNoSpan("minimize",this.gridOptionsWrapper)),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon","ag-hidden"),maximizeButtonComp.addManagedListener(eGui,"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(maximizeButtonComp,0),this.maximizeListeners.push(this.addManagedListener(eTitleBar,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",(function(){_this.isMaximized=!1,_this.refreshMaximizeIcon()}))}},__decorate$1F([Autowired("popupService")],AgDialog.prototype,"popupService",void 0),AgDialog}(AgPanel),__extends$1_=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgColorPicker=function(_super){function AgColorPicker(config){var _this=_super.call(this,config,"ag-color-picker","colorPicker")||this;return config&&config.color&&(_this.value=config.color),_this}return __extends$1_(AgColorPicker,_super),AgColorPicker.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.value&&this.setValue(this.value)},AgColorPicker.prototype.showPicker=function(){var _this=this,eGuiRect=this.getGui().getBoundingClientRect(),colorDialog=this.createBean(new AgDialog({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:eGuiRect.right-190,y:eGuiRect.top-250}));this.isPickerDisplayed=!0,colorDialog.addCssClass("ag-color-dialog"),setAriaExpanded(this.eWrapper,!0);var colorPanel=this.createBean(new AgColorPanel({picker:this}));return colorPanel.addDestroyFunc((function(){colorDialog.isAlive()&&_this.destroyBean(colorDialog)})),colorDialog.setParentComponent(this),colorDialog.setBodyComponent(colorPanel),colorPanel.setValue(this.getValue()),colorDialog.addDestroyFunc((function(){_this.isDestroyingPicker?_this.isDestroyingPicker=!1:(_this.isDestroyingPicker=!0,colorPanel.isAlive()&&_this.destroyBean(colorPanel)),_this.isAlive()&&(setAriaExpanded(_this.eWrapper,!1),_this.getFocusableElement().focus()),_this.isPickerDisplayed=!1})),colorDialog},AgColorPicker.prototype.setValue=function(color){return this.value===color?this:(this.eDisplayField.style.backgroundColor=color,_super.prototype.setValue.call(this,color))},AgColorPicker.prototype.getValue=function(){return this.value},AgColorPicker}(AgPickerField),__extends$1$=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1G=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgGroupComponent=function(_super){function AgGroupComponent(params){void 0===params&&(params={});var _this=_super.call(this,AgGroupComponent.getTemplate(params))||this;_this.suppressEnabledCheckbox=!0,_this.suppressOpenCloseIcons=!1;var title=params.title,enabled=params.enabled,items=params.items,suppressEnabledCheckbox=params.suppressEnabledCheckbox,suppressOpenCloseIcons=params.suppressOpenCloseIcons;return _this.title=title,_this.cssIdentifier=params.cssIdentifier||"default",_this.enabled=null==enabled||enabled,_this.items=items||[],_this.alignItems=params.alignItems||"center",null!=suppressEnabledCheckbox&&(_this.suppressEnabledCheckbox=suppressEnabledCheckbox),null!=suppressOpenCloseIcons&&(_this.suppressOpenCloseIcons=suppressOpenCloseIcons),_this}return __extends$1$(AgGroupComponent,_super),AgGroupComponent.getTemplate=function(params){var cssIdentifier=params.cssIdentifier||"default";return'<div class="ag-group ag-'+cssIdentifier+'-group" role="presentation">\n            <div class="ag-group-title-bar ag-'+cssIdentifier+'-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-'+cssIdentifier+'-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-'+cssIdentifier+'-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-'+cssIdentifier+'-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-'+cssIdentifier+'-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-'+(params.direction||"vertical")+" ag-"+cssIdentifier+'-group-container"></div>\n        </div>'},AgGroupComponent.prototype.postConstruct=function(){if(this.items.length){var initialItems=this.items;this.items=[],this.addItems(initialItems)}var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc();this.cbGroupEnabled.setLabel(localeTextFunc("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},AgGroupComponent.prototype.setupExpandContract=function(){var _this=this;this.eGroupClosedIcon.appendChild(createIcon("columnSelectClosed",this.gridOptionsWrapper,null)),this.eGroupOpenedIcon.appendChild(createIcon("columnSelectOpen",this.gridOptionsWrapper,null)),this.addManagedListener(this.eTitleBar,"click",(function(){return _this.toggleGroupExpand()})),this.addManagedListener(this.eTitleBar,"keydown",(function(e){switch(e.key){case KeyCode.ENTER:case KeyCode.SPACE:e.preventDefault(),_this.toggleGroupExpand();break;case KeyCode.RIGHT:case KeyCode.LEFT:e.preventDefault(),_this.toggleGroupExpand(e.key===KeyCode.RIGHT)}}))},AgGroupComponent.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||setAriaExpanded(this.eTitleBar,this.expanded)},AgGroupComponent.prototype.refreshChildDisplay=function(){var showIcon=!this.suppressOpenCloseIcons;setDisplayed(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),setDisplayed(this.eGroupOpenedIcon,showIcon&&this.expanded),setDisplayed(this.eGroupClosedIcon,showIcon&&!this.expanded)},AgGroupComponent.prototype.isExpanded=function(){return this.expanded},AgGroupComponent.prototype.setAlignItems=function(alignment){this.alignItems!==alignment&&this.removeCssClass("ag-group-item-alignment-"+this.alignItems),this.alignItems=alignment;var newCls="ag-group-item-alignment-"+this.alignItems;return this.addCssClass(newCls),this},AgGroupComponent.prototype.toggleGroupExpand=function(expanded){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),setDisplayed(this.eContainer,!0),this):(expanded=null!=expanded?expanded:!this.expanded,this.expanded===expanded||(this.expanded=expanded,this.refreshAriaStatus(),this.refreshChildDisplay(),setDisplayed(this.eContainer,expanded),this.dispatchEvent({type:this.expanded?AgGroupComponent.EVENT_EXPANDED:AgGroupComponent.EVENT_COLLAPSED})),this)},AgGroupComponent.prototype.addItems=function(items){var _this=this;items.forEach((function(item){return _this.addItem(item)}))},AgGroupComponent.prototype.addItem=function(item){var container=this.eContainer,el=item instanceof Component?item.getGui():item;el.classList.add("ag-group-item","ag-"+this.cssIdentifier+"-group-item"),container.appendChild(el),this.items.push(el)},AgGroupComponent.prototype.hideItem=function(hide,index){this.items[index].classList.toggle("ag-hidden",hide)},AgGroupComponent.prototype.setTitle=function(title){return this.eTitle.innerText=title,this},AgGroupComponent.prototype.addCssClassToTitleBar=function(cssClass){this.eTitleBar.classList.add(cssClass)},AgGroupComponent.prototype.setEnabled=function(enabled,skipToggle){return this.enabled=enabled,this.refreshDisabledStyles(),this.toggleGroupExpand(enabled),skipToggle||this.cbGroupEnabled.setValue(enabled),this},AgGroupComponent.prototype.isEnabled=function(){return this.enabled},AgGroupComponent.prototype.onEnableChange=function(callbackFn){var _this=this;return this.cbGroupEnabled.onValueChange((function(newSelection){_this.setEnabled(newSelection,!0),callbackFn(newSelection)})),this},AgGroupComponent.prototype.hideEnabledCheckbox=function(hide){return this.suppressEnabledCheckbox=hide,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},AgGroupComponent.prototype.hideOpenCloseIcons=function(hide){return this.suppressOpenCloseIcons=hide,hide&&this.toggleGroupExpand(!0),this},AgGroupComponent.prototype.refreshDisabledStyles=function(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)},AgGroupComponent.EVENT_EXPANDED="expanded",AgGroupComponent.EVENT_COLLAPSED="collapsed",__decorate$1G([RefSelector("eTitleBar")],AgGroupComponent.prototype,"eTitleBar",void 0),__decorate$1G([RefSelector("eGroupOpenedIcon")],AgGroupComponent.prototype,"eGroupOpenedIcon",void 0),__decorate$1G([RefSelector("eGroupClosedIcon")],AgGroupComponent.prototype,"eGroupClosedIcon",void 0),__decorate$1G([RefSelector("eToolbar")],AgGroupComponent.prototype,"eToolbar",void 0),__decorate$1G([RefSelector("cbGroupEnabled")],AgGroupComponent.prototype,"cbGroupEnabled",void 0),__decorate$1G([RefSelector("eTitle")],AgGroupComponent.prototype,"eTitle",void 0),__decorate$1G([RefSelector("eContainer")],AgGroupComponent.prototype,"eContainer",void 0),__decorate$1G([PostConstruct],AgGroupComponent.prototype,"postConstruct",null),AgGroupComponent}(Component),__extends$20=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1H=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TabGuardCtrl=function(_super){function TabGuardCtrl(params){var _this=_super.call(this)||this;_this.skipTabGuardFocus=!1;var comp=params.comp,eTopGuard=params.eTopGuard,eBottomGuard=params.eBottomGuard,focusInnerElement=params.focusInnerElement,onFocusIn=params.onFocusIn,onFocusOut=params.onFocusOut,shouldStopEventPropagation=params.shouldStopEventPropagation,onTabKeyDown=params.onTabKeyDown,handleKeyDown=params.handleKeyDown,eFocusableElement=params.eFocusableElement;return _this.comp=comp,_this.eTopGuard=eTopGuard,_this.eBottomGuard=eBottomGuard,_this.providedFocusInnerElement=focusInnerElement,_this.eFocusableElement=eFocusableElement,_this.providedFocusIn=onFocusIn,_this.providedFocusOut=onFocusOut,_this.providedShouldStopEventPropagation=shouldStopEventPropagation,_this.providedOnTabKeyDown=onTabKeyDown,_this.providedHandleKeyDown=handleKeyDown,_this}return __extends$20(TabGuardCtrl,_super),TabGuardCtrl.prototype.postConstruct=function(){var _this=this;this.createManagedBean(new ManagedFocusFeature(this.eFocusableElement,{shouldStopEventPropagation:function(){return _this.shouldStopEventPropagation()},onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)},onFocusIn:function(e){return _this.onFocusIn(e)},onFocusOut:function(e){return _this.onFocusOut(e)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach((function(guard){return _this.addManagedListener(guard,"focus",_this.onFocus.bind(_this))}))},TabGuardCtrl.prototype.handleKeyDown=function(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)},TabGuardCtrl.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},TabGuardCtrl.prototype.shouldStopEventPropagation=function(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()},TabGuardCtrl.prototype.activateTabGuards=function(){this.comp.setTabIndex(this.getGridTabIndex())},TabGuardCtrl.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},TabGuardCtrl.prototype.onFocus=function(e){if(this.skipTabGuardFocus)this.skipTabGuardFocus=!1;else{var fromBottom=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(fromBottom):this.focusInnerElement(fromBottom)}},TabGuardCtrl.prototype.onFocusIn=function(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()},TabGuardCtrl.prototype.onFocusOut=function(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()},TabGuardCtrl.prototype.onTabKeyDown=function(e){var _this=this;if(this.providedOnTabKeyDown)this.providedOnTabKeyDown(e);else if(!e.defaultPrevented){var tabGuardsAreActive=this.tabGuardsAreActive();tabGuardsAreActive&&this.deactivateTabGuards();var nextRoot=this.getNextFocusableElement(e.shiftKey);tabGuardsAreActive&&setTimeout((function(){return _this.activateTabGuards()}),0),nextRoot&&(nextRoot.focus(),e.preventDefault())}},TabGuardCtrl.prototype.getGridTabIndex=function(){return this.gridOptionsWrapper.getGridTabIndex()},TabGuardCtrl.prototype.focusInnerElement=function(fromBottom){void 0===fromBottom&&(fromBottom=!1);var focusable=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(focusable.splice(0,1),focusable.splice(focusable.length-1,1)),focusable.length&&focusable[fromBottom?focusable.length-1:0].focus()},TabGuardCtrl.prototype.getNextFocusableElement=function(backwards){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,backwards)},TabGuardCtrl.prototype.forceFocusOutOfContainer=function(up){void 0===up&&(up=!1);var tabGuardToFocus=up?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,tabGuardToFocus.focus()},__decorate$1H([Autowired("focusService")],TabGuardCtrl.prototype,"focusService",void 0),__decorate$1H([PostConstruct],TabGuardCtrl.prototype,"postConstruct",null),TabGuardCtrl}(BeanStub),__extends$21=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$f=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$b=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$f(arguments[i]));return ar},TabGuardComp=function(_super){function TabGuardComp(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$21(TabGuardComp,_super),TabGuardComp.prototype.initialiseTabGuard=function(params){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var tabGuards=[this.eTopGuard,this.eBottomGuard],compProxy={setTabIndex:function(tabIndex){tabGuards.forEach((function(tabGuard){return null!=tabIndex?tabGuard.setAttribute("tabIndex",tabIndex):tabGuard.removeAttribute("tabIndex")}))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new TabGuardCtrl({comp:compProxy,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:params.onFocusIn,onFocusOut:params.onFocusOut,focusInnerElement:params.focusInnerElement,handleKeyDown:params.handleKeyDown,onTabKeyDown:params.onTabKeyDown,shouldStopEventPropagation:params.shouldStopEventPropagation}))},TabGuardComp.prototype.createTabGuard=function(side){var tabGuard=document.createElement("div");return tabGuard.classList.add("ag-tab-guard","ag-tab-guard-"+side),setAriaRole(tabGuard,"presentation"),tabGuard},TabGuardComp.prototype.addTabGuards=function(topTabGuard,bottomTabGuard){this.eFocusableElement.insertAdjacentElement("afterbegin",topTabGuard),this.eFocusableElement.insertAdjacentElement("beforeend",bottomTabGuard)},TabGuardComp.prototype.removeAllChildrenExceptTabGuards=function(){var tabGuards=[this.eTopGuard,this.eBottomGuard];clearElement(this.getFocusableElement()),this.addTabGuards.apply(this,__spread$b(tabGuards))},TabGuardComp.prototype.forceFocusOutOfContainer=function(up){void 0===up&&(up=!1),this.tabGuardCtrl.forceFocusOutOfContainer(up)},TabGuardComp.prototype.appendChild=function(newChild,container){isNodeOrElement(newChild)||(newChild=newChild.getGui());var bottomTabGuard=this.eBottomGuard;bottomTabGuard?bottomTabGuard.insertAdjacentElement("beforebegin",newChild):_super.prototype.appendChild.call(this,newChild,container)},TabGuardComp}(Component),__extends$22=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$f=function(){return __assign$f=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$f.apply(this,arguments)},__decorate$1I=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgMenuList=function(_super){function AgMenuList(level){void 0===level&&(level=1);var _this=_super.call(this,'<div class="ag-menu-list" role="tree"></div>')||this;return _this.level=level,_this.menuItems=[],_this}return __extends$22(AgMenuList,_super),AgMenuList.prototype.postConstruct=function(){var _this=this;this.initialiseTabGuard({onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)}})},AgMenuList.prototype.onTabKeyDown=function(e){var parent=this.getParentComponent(),parentGui=parent&&parent.getGui();parentGui&&parentGui.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)},AgMenuList.prototype.handleKeyDown=function(e){switch(e.key){case KeyCode.UP:case KeyCode.RIGHT:case KeyCode.DOWN:case KeyCode.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case KeyCode.ESCAPE:var topMenu=this.findTopMenu();topMenu&&this.focusService.focusInto(topMenu.getGui())}},AgMenuList.prototype.clearActiveItem=function(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)},AgMenuList.prototype.addMenuItems=function(menuItems){var _this=this;null!=menuItems&&menuItems.forEach((function(menuItemOrString){"separator"===menuItemOrString?_this.addSeparator():"string"==typeof menuItemOrString?console.warn("AG Grid: unrecognised menu item "+menuItemOrString):_this.addItem(menuItemOrString)}))},AgMenuList.prototype.addItem=function(menuItemDef){var _this=this,menuItem=this.createManagedBean(new AgMenuItemComponent(__assign$f(__assign$f({},menuItemDef),{isAnotherSubMenuOpen:function(){return _this.menuItems.some((function(m){return m.isSubMenuOpen()}))}})));menuItem.setParentComponent(this),setAriaLevel(menuItem.getGui(),this.level),this.menuItems.push(menuItem),this.appendChild(menuItem.getGui()),this.addManagedListener(menuItem,AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,(function(event){_this.dispatchEvent(event)})),this.addManagedListener(menuItem,AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED,(function(event){_this.activeMenuItem&&_this.activeMenuItem!==event.menuItem&&_this.activeMenuItem.deactivate(),_this.activeMenuItem=event.menuItem}))},AgMenuList.prototype.activateFirstItem=function(){var item=this.menuItems.filter((function(currentItem){return!currentItem.isDisabled()}))[0];item&&item.activate()},AgMenuList.prototype.addSeparator=function(){this.appendChild(loadTemplate('\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>'))},AgMenuList.prototype.findTopMenu=function(){var parent=this.getParentComponent();if(!parent&&this instanceof AgMenuList)return this;for(;;){var nextParent=parent&&parent.getParentComponent&&parent.getParentComponent();if(!nextParent||!(nextParent instanceof AgMenuList||nextParent instanceof AgMenuItemComponent))break;parent=nextParent}return parent instanceof AgMenuList?parent:void 0},AgMenuList.prototype.handleNavKey=function(key){switch(key){case KeyCode.UP:case KeyCode.DOWN:var nextItem=this.findNextItem(key===KeyCode.UP);return void(nextItem&&nextItem!==this.activeMenuItem&&nextItem.activate())}key===(this.gridOptionsWrapper.isEnableRtl()?KeyCode.RIGHT:KeyCode.LEFT)?this.closeIfIsChild():this.openChild()},AgMenuList.prototype.closeIfIsChild=function(e){var parentItem=this.getParentComponent();parentItem&&parentItem instanceof AgMenuItemComponent&&(e&&e.preventDefault(),parentItem.closeSubMenu(),parentItem.getGui().focus())},AgMenuList.prototype.openChild=function(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)},AgMenuList.prototype.findNextItem=function(up){var items=this.menuItems.filter((function(item){return!item.isDisabled()}));if(items.length){if(!this.activeMenuItem)return up?last(items):items[0];var nextItem;up&&items.reverse();for(var foundCurrent=!1,i=0;i<items.length;i++){var item=items[i];if(foundCurrent){nextItem=item;break}item===this.activeMenuItem&&(foundCurrent=!0)}return nextItem||this.activeMenuItem}},AgMenuList.prototype.destroy=function(){this.clearActiveItem(),_super.prototype.destroy.call(this)},__decorate$1I([Autowired("focusService")],AgMenuList.prototype,"focusService",void 0),__decorate$1I([PostConstruct],AgMenuList.prototype,"postConstruct",null),AgMenuList}(TabGuardComp),__extends$23=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1J=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgMenuPanel=function(_super){function AgMenuPanel(wrappedComponent){var _this=_super.call(this)||this;return _this.wrappedComponent=wrappedComponent,_this.setTemplateFromElement(wrappedComponent.getGui()),_this}return __extends$23(AgMenuPanel,_super),AgMenuPanel.prototype.postConstruct=function(){var _this=this;this.initialiseTabGuard({onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)}})},AgMenuPanel.prototype.handleKeyDown=function(e){e.key===KeyCode.ESCAPE&&this.closePanel()},AgMenuPanel.prototype.onTabKeyDown=function(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())},AgMenuPanel.prototype.closePanel=function(){var menuItem=this.parentComponent;menuItem.closeSubMenu(),setTimeout((function(){return menuItem.getGui().focus()}),0)},__decorate$1J([PostConstruct],AgMenuPanel.prototype,"postConstruct",null),AgMenuPanel}(TabGuardComp),__extends$24=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1K=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgMenuItemComponent=function(_super){function AgMenuItemComponent(params){var _this=_super.call(this)||this;return _this.params=params,_this.isActive=!1,_this.subMenuIsOpen=!1,_this.setTemplate('<div class="'+_this.getClassName()+'" tabindex="-1" role="treeitem"></div>'),_this}return __extends$24(AgMenuItemComponent,_super),AgMenuItemComponent.prototype.init=function(){var _this=this;this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();var eGui=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),setAriaDisabled(eGui,!0)):(this.addGuiEventListener("click",(function(e){return _this.onItemSelected(e)})),this.addGuiEventListener("keydown",(function(e){e.key!==KeyCode.ENTER&&e.key!==KeyCode.SPACE||(e.preventDefault(),_this.onItemSelected(e))})),this.addGuiEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),this.addGuiEventListener("mouseenter",(function(){return _this.onMouseEnter()})),this.addGuiEventListener("mouseleave",(function(){return _this.onMouseLeave()}))),this.params.cssClasses&&this.params.cssClasses.forEach((function(it){return _this.addCssClass(it)}))},AgMenuItemComponent.prototype.isDisabled=function(){return!!this.params.disabled},AgMenuItemComponent.prototype.openSubMenu=function(activateFirstItem){var _this=this;if(void 0===activateFirstItem&&(activateFirstItem=!1),this.closeSubMenu(),this.params.subMenu){var destroySubMenu,ePopup=loadTemplate('<div class="ag-menu" role="presentation"></div>');if(this.params.subMenu instanceof Array){var currentLevel=getAriaLevel(this.getGui()),nextLevel=isNaN(currentLevel)?1:currentLevel+1,childMenu_1=this.createBean(new AgMenuList(nextLevel));childMenu_1.setParentComponent(this),childMenu_1.addMenuItems(this.params.subMenu),ePopup.appendChild(childMenu_1.getGui()),this.addManagedListener(childMenu_1,AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,(function(e){return _this.dispatchEvent(e)})),childMenu_1.addGuiEventListener("mouseenter",(function(){return _this.cancelDeactivate()})),destroySubMenu=function(){return _this.destroyBean(childMenu_1)},activateFirstItem&&setTimeout((function(){return childMenu_1.activateFirstItem()}),0)}else{var subMenu_1=this.params.subMenu,menuPanel=this.createBean(new AgMenuPanel(subMenu_1));menuPanel.setParentComponent(this);var subMenuGui_1=menuPanel.getGui(),mouseEnterListener_1=function(){return _this.cancelDeactivate()};subMenuGui_1.addEventListener("mouseenter",mouseEnterListener_1),destroySubMenu=function(){return subMenuGui_1.removeEventListener("mouseenter",mouseEnterListener_1)},ePopup.appendChild(subMenuGui_1),subMenu_1.afterGuiAttached&&setTimeout((function(){return subMenu_1.afterGuiAttached()}),0)}var eGui=this.getGui(),positionCallback=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:eGui,ePopup}),translate=this.gridOptionsWrapper.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal:!0,eChild:ePopup,positionCallback,anchorToElement:eGui,ariaLabel:translate("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,setAriaExpanded(eGui,!0),this.hideSubMenu=function(){addPopupRes&&addPopupRes.hideFunc(),_this.subMenuIsOpen=!1,setAriaExpanded(eGui,!1),destroySubMenu()}}},AgMenuItemComponent.prototype.closeSubMenu=function(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,setAriaExpanded(this.getGui(),!1))},AgMenuItemComponent.prototype.isSubMenuOpen=function(){return this.subMenuIsOpen},AgMenuItemComponent.prototype.activate=function(openSubMenu){var _this=this;this.cancelActivate(),this.params.disabled||(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),openSubMenu&&this.params.subMenu&&window.setTimeout((function(){_this.isAlive()&&_this.isActive&&_this.openSubMenu()}),300),this.onItemActivated())},AgMenuItemComponent.prototype.deactivate=function(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()},AgMenuItemComponent.prototype.addIcon=function(){if(this.params.checked||this.params.icon||!this.params.isCompact){var icon=loadTemplate('<span ref="eIcon" class="'+this.getClassName("part")+" "+this.getClassName("icon")+'" role="presentation"></span>');this.params.checked?icon.appendChild(createIconNoSpan("check",this.gridOptionsWrapper)):this.params.icon&&(isNodeOrElement(this.params.icon)?icon.appendChild(this.params.icon):"string"==typeof this.params.icon?icon.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(icon)}},AgMenuItemComponent.prototype.addName=function(){if(this.params.name||!this.params.isCompact){var name=loadTemplate('<span ref="eName" class="'+this.getClassName("part")+" "+this.getClassName("text")+'">'+(this.params.name||"")+"</span>");this.getGui().appendChild(name)}},AgMenuItemComponent.prototype.addTooltip=function(){this.params.tooltip&&(this.tooltip=this.params.tooltip,this.gridOptionsWrapper.isEnableBrowserTooltips()?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new CustomTooltipFeature(this)))},AgMenuItemComponent.prototype.getTooltipParams=function(){return{location:"menu",value:this.tooltip}},AgMenuItemComponent.prototype.addShortcut=function(){if(this.params.shortcut||!this.params.isCompact){var shortcut=loadTemplate('<span ref="eShortcut" class="'+this.getClassName("part")+" "+this.getClassName("shortcut")+'">'+(this.params.shortcut||"")+"</span>");this.getGui().appendChild(shortcut)}},AgMenuItemComponent.prototype.addSubMenu=function(){if(this.params.subMenu||!this.params.isCompact){var pointer=loadTemplate('<span ref="ePopupPointer" class="'+this.getClassName("part")+" "+this.getClassName("popup-pointer")+'"></span>'),eGui=this.getGui();if(this.params.subMenu){var iconName=this.gridOptionsWrapper.isEnableRtl()?"smallLeft":"smallRight";setAriaExpanded(eGui,!1),pointer.appendChild(createIconNoSpan(iconName,this.gridOptionsWrapper))}eGui.appendChild(pointer)}},AgMenuItemComponent.prototype.onItemSelected=function(event){if(this.params.action?this.params.action():this.openSubMenu(event&&"keydown"===event.type),!this.params.subMenu||this.params.action){var e={type:AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event};this.dispatchEvent(e)}},AgMenuItemComponent.prototype.onItemActivated=function(){var event={type:AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(event)},AgMenuItemComponent.prototype.cancelActivate=function(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)},AgMenuItemComponent.prototype.cancelDeactivate=function(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)},AgMenuItemComponent.prototype.onMouseEnter=function(){var _this=this;this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout((function(){return _this.activate(!0)}),AgMenuItemComponent.ACTIVATION_DELAY):this.activate(!0)},AgMenuItemComponent.prototype.onMouseLeave=function(){var _this=this;this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout((function(){return _this.deactivate()}),AgMenuItemComponent.ACTIVATION_DELAY):this.deactivate()},AgMenuItemComponent.prototype.getClassName=function(suffix){var prefix=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return suffix?prefix+"-"+suffix:prefix},AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED="menuItemSelected",AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",AgMenuItemComponent.ACTIVATION_DELAY=80,__decorate$1K([Autowired("popupService")],AgMenuItemComponent.prototype,"popupService",void 0),__decorate$1K([PostConstruct],AgMenuItemComponent.prototype,"init",null),AgMenuItemComponent}(Component),__extends$25=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1L=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$g=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$c=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$g(arguments[i]));return ar},FocusService=function(_super){function FocusService(){return null!==_super&&_super.apply(this,arguments)||this}var FocusService_1;return __extends$25(FocusService,_super),FocusService_1=FocusService,FocusService.addKeyboardModeEvents=function(doc,controller){var docControllers=FocusService_1.instancesMonitored.get(doc);docControllers&&docControllers.length>0?-1===docControllers.indexOf(controller)&&docControllers.push(controller):(FocusService_1.instancesMonitored.set(doc,[controller]),doc.addEventListener("keydown",FocusService_1.toggleKeyboardMode),doc.addEventListener("mousedown",FocusService_1.toggleKeyboardMode))},FocusService.removeKeyboardModeEvents=function(doc,controller){var docControllers=FocusService_1.instancesMonitored.get(doc),newControllers=[];docControllers&&docControllers.length&&(newControllers=__spread$c(docControllers).filter((function(currentGridCore){return currentGridCore!==controller})),FocusService_1.instancesMonitored.set(doc,newControllers)),0===newControllers.length&&(doc.removeEventListener("keydown",FocusService_1.toggleKeyboardMode),doc.removeEventListener("mousedown",FocusService_1.toggleKeyboardMode))},FocusService.toggleKeyboardMode=function(event){var isKeyboardActive=FocusService_1.keyboardModeActive,isKeyboardEvent="keydown"===event.type;if(!(isKeyboardEvent&&(event.ctrlKey||event.metaKey||event.altKey)||isKeyboardActive&&isKeyboardEvent||!isKeyboardActive&&!isKeyboardEvent)){FocusService_1.keyboardModeActive=isKeyboardEvent;var doc=event.target.ownerDocument;if(doc){var controllersForDoc=FocusService_1.instancesMonitored.get(doc);controllersForDoc&&controllersForDoc.forEach((function(controller){controller.dispatchEvent({type:isKeyboardEvent?Events.EVENT_KEYBOARD_FOCUS:Events.EVENT_MOUSE_FOCUS})}))}}},FocusService.prototype.init=function(){var _this=this,clearFocusedCellListener=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,clearFocusedCellListener),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,clearFocusedCellListener),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,clearFocusedCellListener),this.ctrlsService.whenReady((function(p){_this.gridCtrl=p.gridCtrl;var doc=_this.gridOptionsWrapper.getDocument();FocusService_1.addKeyboardModeEvents(doc,_this.gridCtrl),_this.addDestroyFunc((function(){return _this.unregisterGridCompController(_this.gridCtrl)}))}))},FocusService.prototype.unregisterGridCompController=function(gridCompController){var doc=this.gridOptionsWrapper.getDocument();FocusService_1.removeKeyboardModeEvents(doc,gridCompController)},FocusService.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var col=this.focusedCellPosition.column,colFromColumnModel=this.columnModel.getGridColumn(col.getId());col!==colFromColumnModel&&this.clearFocusedCell()}},FocusService.prototype.isKeyboardMode=function(){return FocusService_1.keyboardModeActive},FocusService.prototype.getFocusCellToUseAfterRefresh=function(){var eDocument=this.gridOptionsWrapper.getDocument();return this.gridOptionsWrapper.isSuppressFocusAfterRefresh()||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(eDocument.activeElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},FocusService.prototype.getFocusHeaderToUseAfterRefresh=function(){var eDocument=this.gridOptionsWrapper.getDocument();return this.gridOptionsWrapper.isSuppressFocusAfterRefresh()||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(eDocument.activeElement,AbstractHeaderCellCtrl.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},FocusService.prototype.isDomDataMissingInHierarchy=function(eBrowserCell,key){for(var ePointer=eBrowserCell;ePointer;){if(this.gridOptionsWrapper.getDomData(ePointer,key))return!1;ePointer=ePointer.parentNode}return!0},FocusService.prototype.clearFocusedCell=function(){this.focusedCellPosition=null,this.onCellFocused(!1)},FocusService.prototype.getFocusedCell=function(){return this.focusedCellPosition},FocusService.prototype.setFocusedCell=function(rowIndex,colKey,floating,forceBrowserFocus){void 0===forceBrowserFocus&&(forceBrowserFocus=!1);var gridColumn=this.columnModel.getGridColumn(colKey);gridColumn?(this.focusedCellPosition=gridColumn?{rowIndex,rowPinned:makeNull(floating),column:gridColumn}:null,this.onCellFocused(forceBrowserFocus)):this.focusedCellPosition=null},FocusService.prototype.isCellFocused=function(cellPosition){return null!=this.focusedCellPosition&&(this.focusedCellPosition.column===cellPosition.column&&this.isRowFocused(cellPosition.rowIndex,cellPosition.rowPinned))},FocusService.prototype.isRowNodeFocused=function(rowNode){return this.isRowFocused(rowNode.rowIndex,rowNode.rowPinned)},FocusService.prototype.isHeaderWrapperFocused=function(headerCtrl){if(null==this.focusedHeaderPosition)return!1;var column=headerCtrl.getColumnGroupChild(),headerRowIndex=headerCtrl.getRowIndex(),pinned=headerCtrl.getPinned(),_a=this.focusedHeaderPosition,focusedColumn=_a.column,focusedHeaderRowIndex=_a.headerRowIndex;return column===focusedColumn&&headerRowIndex===focusedHeaderRowIndex&&pinned==focusedColumn.getPinned()},FocusService.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},FocusService.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},FocusService.prototype.setFocusedHeader=function(headerRowIndex,column){this.focusedHeaderPosition={headerRowIndex,column}},FocusService.prototype.focusHeaderPosition=function(params){var direction=params.direction,fromTab=params.fromTab,allowUserOverride=params.allowUserOverride,event=params.event,headerPosition=params.headerPosition;if(allowUserOverride){var userFunc,gridOptionsWrapper=this.gridOptionsWrapper,currentPosition=this.getFocusedHeader(),headerRowCount=this.headerNavigationService.getHeaderRowCount();if(fromTab){if(userFunc=gridOptionsWrapper.getTabToNextHeaderFunc())headerPosition=userFunc({backwards:"Before"===direction,previousHeaderPosition:currentPosition,nextHeaderPosition:headerPosition,headerRowCount})}else if((userFunc=gridOptionsWrapper.getNavigateToNextHeaderFunc())&&event)headerPosition=userFunc({key:event.key,previousHeaderPosition:currentPosition,nextHeaderPosition:headerPosition,headerRowCount,event})}return!!headerPosition&&(-1===headerPosition.headerRowIndex?this.focusGridView(headerPosition.column):(this.headerNavigationService.scrollToColumn(headerPosition.column,direction),this.ctrlsService.getHeaderRowContainerCtrl(headerPosition.column.getPinned()).focusHeader(headerPosition.headerRowIndex,headerPosition.column,event)))},FocusService.prototype.focusFirstHeader=function(){var firstColumn=this.columnModel.getAllDisplayedColumns()[0];return!!firstColumn&&(firstColumn.getParent()&&(firstColumn=this.columnModel.getColumnGroupAtLevel(firstColumn,0)),this.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:firstColumn}}))},FocusService.prototype.focusLastHeader=function(event){var headerRowIndex=this.headerNavigationService.getHeaderRowCount()-1,column=last(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex,column},event})},FocusService.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},FocusService.prototype.isRowFocused=function(rowIndex,floating){return null!=this.focusedCellPosition&&(this.focusedCellPosition.rowIndex===rowIndex&&this.focusedCellPosition.rowPinned===makeNull(floating))},FocusService.prototype.findFocusableElements=function(rootNode,exclude,onlyUnmanaged){void 0===onlyUnmanaged&&(onlyUnmanaged=!1);var focusableString=Constants.FOCUSABLE_SELECTOR,excludeString=Constants.FOCUSABLE_EXCLUDE;exclude&&(excludeString+=", "+exclude),onlyUnmanaged&&(excludeString+=', [tabindex="-1"]');var nodes=Array.prototype.slice.apply(rootNode.querySelectorAll(focusableString)),excludeNodes=Array.prototype.slice.apply(rootNode.querySelectorAll(excludeString));if(!excludeNodes.length)return nodes;var b;return b=excludeNodes,nodes.filter((function(element){return-1===b.indexOf(element)}))},FocusService.prototype.focusInto=function(rootNode,up,onlyUnmanaged){void 0===up&&(up=!1),void 0===onlyUnmanaged&&(onlyUnmanaged=!1);var focusableElements=this.findFocusableElements(rootNode,null,onlyUnmanaged),toFocus=up?last(focusableElements):focusableElements[0];return!!toFocus&&(toFocus.focus(),!0)},FocusService.prototype.findNextFocusableElement=function(rootNode,onlyManaged,backwards){void 0===rootNode&&(rootNode=this.eGridDiv);var focusable=this.findFocusableElements(rootNode,onlyManaged?':not([tabindex="-1"])':null),activeEl=this.gridOptionsWrapper.getDocument().activeElement,nextIndex=(onlyManaged?focusable.findIndex((function(el){return el.contains(activeEl)})):focusable.indexOf(activeEl))+(backwards?-1:1);return nextIndex<0||nextIndex>=focusable.length?null:focusable[nextIndex]},FocusService.prototype.isFocusUnderManagedComponent=function(rootNode){var eDocument=this.gridOptionsWrapper.getDocument(),managedContainers=rootNode.querySelectorAll("."+ManagedFocusFeature.FOCUS_MANAGED_CLASS);if(!managedContainers.length)return!1;for(var i=0;i<managedContainers.length;i++)if(managedContainers[i].contains(eDocument.activeElement))return!0;return!1},FocusService.prototype.findTabbableParent=function(node,limit){void 0===limit&&(limit=5);for(var counter=0;node&&null===getTabIndex(node)&&++counter<=limit;)node=node.parentElement;return null===getTabIndex(node)?null:node},FocusService.prototype.onCellFocused=function(forceBrowserFocus){var event={type:Events.EVENT_CELL_FOCUSED,forceBrowserFocus,rowIndex:null,column:null,floating:null,api:this.gridApi,columnApi:this.columnApi,rowPinned:null,isFullWidthCell:!1};if(this.focusedCellPosition){var rowIndex=event.rowIndex=this.focusedCellPosition.rowIndex,rowPinned=event.rowPinned=this.focusedCellPosition.rowPinned;event.column=this.focusedCellPosition.column;var rowCtrl=this.rowRenderer.getRowByPosition({rowIndex,rowPinned});rowCtrl&&(event.isFullWidthCell=rowCtrl.isFullWidth())}this.eventService.dispatchEvent(event)},FocusService.prototype.focusGridView=function(column,backwards){if(this.gridOptionsWrapper.isSuppressCellFocus())return backwards?this.focusLastHeader():this.focusNextGridCoreContainer(!1);var nextRow=backwards?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!nextRow)return!1;var rowIndex=nextRow.rowIndex,rowPinned=nextRow.rowPinned,focusedHeader=this.getFocusedHeader();if(!column&&focusedHeader&&(column=focusedHeader.column),null==rowIndex||!column)return!1;if(this.navigationService.ensureCellVisible({rowIndex,column,rowPinned}),this.setFocusedCell(rowIndex,column,makeNull(rowPinned),!0),this.rangeService){var cellPosition={rowIndex,rowPinned,column};this.rangeService.setRangeToCell(cellPosition)}return!0},FocusService.prototype.focusNextGridCoreContainer=function(backwards){return!!this.gridCtrl.focusNextInnerContainer(backwards)||(backwards||this.gridCtrl.isDetailGrid()||this.gridCtrl.forceFocusOutOfContainer(),!1)},FocusService.AG_KEYBOARD_FOCUS="ag-keyboard-focus",FocusService.keyboardModeActive=!1,FocusService.instancesMonitored=new Map,__decorate$1L([Autowired("eGridDiv")],FocusService.prototype,"eGridDiv",void 0),__decorate$1L([Autowired("columnModel")],FocusService.prototype,"columnModel",void 0),__decorate$1L([Autowired("headerNavigationService")],FocusService.prototype,"headerNavigationService",void 0),__decorate$1L([Autowired("columnApi")],FocusService.prototype,"columnApi",void 0),__decorate$1L([Autowired("gridApi")],FocusService.prototype,"gridApi",void 0),__decorate$1L([Autowired("rowRenderer")],FocusService.prototype,"rowRenderer",void 0),__decorate$1L([Autowired("rowPositionUtils")],FocusService.prototype,"rowPositionUtils",void 0),__decorate$1L([Optional("rangeService")],FocusService.prototype,"rangeService",void 0),__decorate$1L([Autowired("navigationService")],FocusService.prototype,"navigationService",void 0),__decorate$1L([Autowired("ctrlsService")],FocusService.prototype,"ctrlsService",void 0),__decorate$1L([PostConstruct],FocusService.prototype,"init",null),FocusService=FocusService_1=__decorate$1L([Bean("focusService")],FocusService)}(BeanStub),__extends$26=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1M=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(DIRECTION){DIRECTION[DIRECTION.vertical=0]="vertical",DIRECTION[DIRECTION.horizontal=1]="horizontal"}(DIRECTION||(DIRECTION={}));var LoadingType,instanceIdSeq=0,PopupService=function(_super){function PopupService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.popupList=[],_this}return __extends$26(PopupService,_super),PopupService.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){_this.gridCtrl=p.gridCtrl,_this.addManagedListener(_this.gridCtrl,Events.EVENT_KEYBOARD_FOCUS,(function(){_this.popupList.forEach((function(popup){return popup.element.classList.add(FocusService.AG_KEYBOARD_FOCUS)}))})),_this.addManagedListener(_this.gridCtrl,Events.EVENT_MOUSE_FOCUS,(function(){_this.popupList.forEach((function(popup){return popup.element.classList.remove(FocusService.AG_KEYBOARD_FOCUS)}))}))}))},PopupService.prototype.getPopupParent=function(){var ePopupParent=this.gridOptionsWrapper.getPopupParent();return ePopupParent||this.gridCtrl.getGui()},PopupService.prototype.positionPopupForMenu=function(params){var sourceRect=params.eventSource.getBoundingClientRect(),parentRect=this.getParentRect(),y=this.keepXYWithinBounds(params.ePopup,sourceRect.top-parentRect.top,DIRECTION.vertical),minWidth=params.ePopup.clientWidth>0?params.ePopup.clientWidth:200;params.ePopup.style.minWidth=minWidth+"px";var x,maxX=parentRect.right-parentRect.left-minWidth;function xRightPosition(){return sourceRect.right-parentRect.left-2}function xLeftPosition(){return sourceRect.left-parentRect.left-minWidth}this.gridOptionsWrapper.isEnableRtl()?((x=xLeftPosition())<0&&(x=xRightPosition()),x>maxX&&(x=0)):((x=xRightPosition())>maxX&&(x=xLeftPosition()),x<0&&(x=0)),params.ePopup.style.left=x+"px",params.ePopup.style.top=y+"px"},PopupService.prototype.positionPopupUnderMouseEvent=function(params){var ePopup=params.ePopup,nudgeX=params.nudgeX,nudgeY=params.nudgeY,_a=this.calculatePointerAlign(params.mouseEvent),x=_a.x,y=_a.y;this.positionPopup({ePopup,x,y,nudgeX,nudgeY,keepWithinBounds:!0}),this.callPostProcessPopup(params.type,params.ePopup,null,params.mouseEvent,params.column,params.rowNode)},PopupService.prototype.calculatePointerAlign=function(e){var parentRect=this.getParentRect();return{x:e.clientX-parentRect.left,y:e.clientY-parentRect.top}},PopupService.prototype.positionPopupUnderComponent=function(params){var sourceRect=params.eventSource.getBoundingClientRect(),alignSide=params.alignSide||"left",parentRect=this.getParentRect(),x=sourceRect.left-parentRect.left;"right"===alignSide&&(x-=params.ePopup.offsetWidth-sourceRect.width),this.positionPopup({ePopup:params.ePopup,nudgeX:params.nudgeX,nudgeY:params.nudgeY,x,y:sourceRect.top-parentRect.top+sourceRect.height,keepWithinBounds:params.keepWithinBounds}),this.callPostProcessPopup(params.type,params.ePopup,params.eventSource,null,params.column,params.rowNode)},PopupService.prototype.positionPopupOverComponent=function(params){var sourceRect=params.eventSource.getBoundingClientRect(),parentRect=this.getParentRect();this.positionPopup({ePopup:params.ePopup,nudgeX:params.nudgeX,nudgeY:params.nudgeY,x:sourceRect.left-parentRect.left,y:sourceRect.top-parentRect.top,keepWithinBounds:params.keepWithinBounds}),this.callPostProcessPopup(params.type,params.ePopup,params.eventSource,null,params.column,params.rowNode)},PopupService.prototype.callPostProcessPopup=function(type,ePopup,eventSource,mouseEvent,column,rowNode){var callback=this.gridOptionsWrapper.getPostProcessPopupFunc();callback&&callback({column,rowNode,ePopup,type,eventSource,mouseEvent})},PopupService.prototype.positionPopup=function(params){var ePopup=params.ePopup,keepWithinBounds=params.keepWithinBounds,nudgeX=params.nudgeX,nudgeY=params.nudgeY,x=params.x,y=params.y;nudgeX&&(x+=nudgeX),nudgeY&&(y+=nudgeY),keepWithinBounds&&(x=this.keepXYWithinBounds(ePopup,x,DIRECTION.horizontal),y=this.keepXYWithinBounds(ePopup,y,DIRECTION.vertical)),ePopup.style.left=x+"px",ePopup.style.top=y+"px"},PopupService.prototype.getActivePopups=function(){return this.popupList.map((function(popup){return popup.element}))},PopupService.prototype.getPopupList=function(){return this.popupList},PopupService.prototype.getParentRect=function(){var eDocument=this.gridOptionsWrapper.getDocument(),popupParent=this.getPopupParent();popupParent===eDocument.body&&(popupParent=eDocument.documentElement);var style=getComputedStyle(popupParent),bounds=popupParent.getBoundingClientRect();return{top:bounds.top+parseFloat(style.borderTopWidth)||0,left:bounds.left+parseFloat(style.borderLeftWidth)||0,right:bounds.right+parseFloat(style.borderRightWidth)||0,bottom:bounds.bottom+parseFloat(style.borderBottomWidth)||0}},PopupService.prototype.keepXYWithinBounds=function(ePopup,position,direction){var isVertical=direction===DIRECTION.vertical,sizeProperty=isVertical?"clientHeight":"clientWidth",anchorProperty=isVertical?"top":"left",offsetProperty=isVertical?"offsetHeight":"offsetWidth",scrollPositionProperty=isVertical?"scrollTop":"scrollLeft",eDocument=this.gridOptionsWrapper.getDocument(),docElement=eDocument.documentElement,popupParent=this.getPopupParent(),parentRect=popupParent.getBoundingClientRect(),documentRect=eDocument.documentElement.getBoundingClientRect(),isBody=popupParent===eDocument.body,offsetSize=ePopup[offsetProperty],sizeOfParent=isBody?(isVertical?getAbsoluteHeight:getAbsoluteWidth)(docElement)+docElement[scrollPositionProperty]:popupParent[sizeProperty];isBody&&(sizeOfParent-=Math.abs(documentRect[anchorProperty]-parentRect[anchorProperty]));var max=sizeOfParent-offsetSize;return Math.min(Math.max(position,0),Math.abs(max))},PopupService.prototype.keepPopupPositionedRelativeTo=function(params){var _this=this,eParent=this.getPopupParent(),parentRect=eParent.getBoundingClientRect(),sourceRect=params.element.getBoundingClientRect(),initialDiffTop=parentRect.top-sourceRect.top,initialDiffLeft=parentRect.left-sourceRect.left,lastDiffTop=initialDiffTop,lastDiffLeft=initialDiffLeft,topPx=params.ePopup.style.top,top=parseInt(topPx.substring(0,topPx.length-1),10),leftPx=params.ePopup.style.left,left=parseInt(leftPx.substring(0,leftPx.length-1),10);return new AgPromise((function(resolve){_this.getFrameworkOverrides().setInterval((function(){var pRect=eParent.getBoundingClientRect(),sRect=params.element.getBoundingClientRect();if(0==sRect.top&&0==sRect.left&&0==sRect.height&&0==sRect.width)params.hidePopup();else{var currentDiffTop=pRect.top-sRect.top;if(currentDiffTop!=lastDiffTop){var newTop=_this.keepXYWithinBounds(params.ePopup,top+initialDiffTop-currentDiffTop,DIRECTION.vertical);params.ePopup.style.top=newTop+"px"}lastDiffTop=currentDiffTop;var currentDiffLeft=pRect.left-sRect.left;if(currentDiffLeft!=lastDiffLeft){var newLeft=_this.keepXYWithinBounds(params.ePopup,left+initialDiffLeft-currentDiffLeft,DIRECTION.horizontal);params.ePopup.style.left=newLeft+"px"}lastDiffLeft=currentDiffLeft}}),200).then((function(intervalId){resolve((function(){null!=intervalId&&window.clearInterval(intervalId)}))}))}))},PopupService.prototype.addPopup=function(params){var _this=this,modal=params.modal,eChild=params.eChild,closeOnEsc=params.closeOnEsc,closedCallback=params.closedCallback,click=params.click,alwaysOnTop=params.alwaysOnTop,afterGuiAttached=params.afterGuiAttached,positionCallback=params.positionCallback,anchorToElement=params.anchorToElement,ariaLabel=params.ariaLabel,eDocument=this.gridOptionsWrapper.getDocument(),destroyPositionTracker=new AgPromise((function(resolve){return resolve((function(){}))}));if(!eDocument)return console.warn("ag-grid: could not find the document, document is empty"),{hideFunc:function(){},stopAnchoringPromise:destroyPositionTracker};var pos=this.popupList.findIndex((function(popup){return popup.element===eChild}));if(-1!==pos){var popup=this.popupList[pos];return{hideFunc:popup.hideFunc,stopAnchoringPromise:popup.stopAnchoringPromise}}var ePopupParent=this.getPopupParent();null==eChild.style.top&&(eChild.style.top="0px"),null==eChild.style.left&&(eChild.style.left="0px");var eWrapper=document.createElement("div"),theme=this.environment.getTheme().theme;theme&&eWrapper.classList.add(theme),eWrapper.classList.add("ag-popup"),eChild.classList.add(this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr","ag-popup-child"),eChild.hasAttribute("role")||setAriaRole(eChild,"dialog"),setAriaLabel(eChild,ariaLabel),this.focusService.isKeyboardMode()&&eChild.classList.add(FocusService.AG_KEYBOARD_FOCUS),eWrapper.appendChild(eChild),ePopupParent.appendChild(eWrapper),alwaysOnTop?this.setAlwaysOnTop(eWrapper,!0):this.bringPopupToFront(eWrapper);var popupHidden=!1,hidePopupOnKeyboardEvent=function(event){eWrapper.contains(eDocument.activeElement)&&(event.key===KeyCode.ESCAPE&&hidePopup({keyboardEvent:event}))},hidePopupOnMouseEvent=function(event){return hidePopup({mouseEvent:event})},hidePopupOnTouchEvent=function(event){return hidePopup({touchEvent:event})},hidePopup=function(popupParams){void 0===popupParams&&(popupParams={});var mouseEvent=popupParams.mouseEvent,touchEvent=popupParams.touchEvent,keyboardEvent=popupParams.keyboardEvent;_this.isEventFromCurrentPopup({mouseEvent,touchEvent},eChild)||_this.isEventSameChainAsOriginalEvent({originalMouseEvent:click,mouseEvent,touchEvent})||popupHidden||(popupHidden=!0,ePopupParent.removeChild(eWrapper),eDocument.removeEventListener("keydown",hidePopupOnKeyboardEvent),eDocument.removeEventListener("mousedown",hidePopupOnMouseEvent),eDocument.removeEventListener("touchstart",hidePopupOnTouchEvent),eDocument.removeEventListener("contextmenu",hidePopupOnMouseEvent),_this.eventService.removeEventListener(Events.EVENT_DRAG_STARTED,hidePopupOnMouseEvent),closedCallback&&closedCallback(mouseEvent||touchEvent||keyboardEvent),_this.popupList=_this.popupList.filter((function(popup){return popup.element!==eChild})),destroyPositionTracker&&destroyPositionTracker.then((function(destroyFunc){return destroyFunc&&destroyFunc()})))};return afterGuiAttached&&afterGuiAttached({hidePopup}),window.setTimeout((function(){closeOnEsc&&eDocument.addEventListener("keydown",hidePopupOnKeyboardEvent),modal&&(eDocument.addEventListener("mousedown",hidePopupOnMouseEvent),_this.eventService.addEventListener(Events.EVENT_DRAG_STARTED,hidePopupOnMouseEvent),eDocument.addEventListener("touchstart",hidePopupOnTouchEvent),eDocument.addEventListener("contextmenu",hidePopupOnMouseEvent))}),0),positionCallback&&positionCallback(),anchorToElement&&(destroyPositionTracker=this.keepPopupPositionedRelativeTo({element:anchorToElement,ePopup:eChild,hidePopup})),this.popupList.push({element:eChild,wrapper:eWrapper,hideFunc:hidePopup,stopAnchoringPromise:destroyPositionTracker,instanceId:instanceIdSeq++,isAnchored:!!anchorToElement}),{hideFunc:hidePopup,stopAnchoringPromise:destroyPositionTracker}},PopupService.prototype.hasAnchoredPopup=function(){return this.popupList.some((function(popup){return popup.isAnchored}))},PopupService.prototype.isEventFromCurrentPopup=function(params,target){var mouseEvent=params.mouseEvent,touchEvent=params.touchEvent,event=mouseEvent||touchEvent;if(!event)return!1;var indexOfThisChild=this.popupList.findIndex((function(popup){return popup.element===target}));if(-1===indexOfThisChild)return!1;for(var i=indexOfThisChild;i<this.popupList.length;i++){if(isElementInEventPath(this.popupList[i].element,event))return!0}return this.isElementWithinCustomPopup(event.target)},PopupService.prototype.isElementWithinCustomPopup=function(el){for(var eDocument=this.gridOptionsWrapper.getDocument();el&&el!==eDocument.body;){if(el.classList.contains("ag-custom-component-popup")||null===el.parentElement)return!0;el=el.parentElement}return!1},PopupService.prototype.isEventSameChainAsOriginalEvent=function(params){var originalMouseEvent=params.originalMouseEvent,mouseEvent=params.mouseEvent,touchEvent=params.touchEvent,mouseEventOrTouch=null;if(mouseEvent?mouseEventOrTouch=mouseEvent:touchEvent&&(mouseEventOrTouch=touchEvent.touches[0]),mouseEventOrTouch&&originalMouseEvent){var screenX_1=mouseEvent?mouseEvent.screenX:0,screenY_1=mouseEvent?mouseEvent.screenY:0,xMatch=Math.abs(originalMouseEvent.screenX-screenX_1)<5,yMatch=Math.abs(originalMouseEvent.screenY-screenY_1)<5;if(xMatch&&yMatch)return!0}return!1},PopupService.prototype.getWrapper=function(ePopup){for(;!ePopup.classList.contains("ag-popup")&&ePopup.parentElement;)ePopup=ePopup.parentElement;return ePopup.classList.contains("ag-popup")?ePopup:null},PopupService.prototype.setAlwaysOnTop=function(ePopup,alwaysOnTop){var eWrapper=this.getWrapper(ePopup);eWrapper&&(eWrapper.classList.toggle("ag-always-on-top",!!alwaysOnTop),alwaysOnTop&&this.bringPopupToFront(eWrapper))},PopupService.prototype.bringPopupToFront=function(ePopup){var parent=this.getPopupParent(),popupList=Array.prototype.slice.call(parent.querySelectorAll(".ag-popup")),popupLen=popupList.length,alwaysOnTopList=Array.prototype.slice.call(parent.querySelectorAll(".ag-popup.ag-always-on-top")),onTopLength=alwaysOnTopList.length,eWrapper=this.getWrapper(ePopup);if(eWrapper&&!(popupLen<=1)&&parent.contains(ePopup)){var pos=popupList.indexOf(eWrapper),innerEls=eWrapper.querySelectorAll("div"),innerElsScrollMap=[];if(innerEls.forEach((function(el){0!==el.scrollTop&&innerElsScrollMap.push([el,el.scrollTop])})),onTopLength)eWrapper.classList.contains("ag-always-on-top")?pos!==popupLen-1&&last(alwaysOnTopList).insertAdjacentElement("afterend",eWrapper):pos!==popupLen-onTopLength-1&&alwaysOnTopList[0].insertAdjacentElement("beforebegin",eWrapper);else pos!==popupLen-1&&last(popupList).insertAdjacentElement("afterend",eWrapper);for(;innerElsScrollMap.length;){var currentEl=innerElsScrollMap.pop();currentEl[0].scrollTop=currentEl[1]}var params={type:"popupToFront",api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),eWrapper};this.eventService.dispatchEvent(params)}},__decorate$1M([Autowired("environment")],PopupService.prototype,"environment",void 0),__decorate$1M([Autowired("focusService")],PopupService.prototype,"focusService",void 0),__decorate$1M([Autowired("ctrlsService")],PopupService.prototype,"ctrlsService",void 0),__decorate$1M([PostConstruct],PopupService.prototype,"postConstruct",null),PopupService=__decorate$1M([Bean("popupService")],PopupService)}(BeanStub),__extends$27=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1N=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},VirtualList=function(_super){function VirtualList(cssIdentifier,ariaRole,listName){void 0===cssIdentifier&&(cssIdentifier="default"),void 0===ariaRole&&(ariaRole="listbox");var _this=_super.call(this,VirtualList.getTemplate(cssIdentifier))||this;return _this.cssIdentifier=cssIdentifier,_this.ariaRole=ariaRole,_this.listName=listName,_this.renderedRows=new Map,_this.rowHeight=20,_this.isDestroyed=!1,_this}return __extends$27(VirtualList,_super),VirtualList.prototype.postConstruct=function(){var _this=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(e){return _this.onFocusIn(e)},onFocusOut:function(e){return _this.onFocusOut(e)},focusInnerElement:function(fromBottom){return _this.focusInnerElement(fromBottom)},onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)}}),this.setAriaProperties()},VirtualList.prototype.setAriaProperties=function(){var listName=this.gridOptionsWrapper.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),ariaEl=this.eContainer;setAriaRole(ariaEl,this.ariaRole),setAriaLabel(ariaEl,listName)},VirtualList.prototype.addResizeObserver=function(){var listener=this.drawVirtualRows.bind(this),destroyObserver=this.resizeObserverService.observeResize(this.getGui(),listener);this.addDestroyFunc(destroyObserver)},VirtualList.prototype.focusInnerElement=function(fromBottom){this.focusRow(fromBottom?this.model.getRowCount()-1:0)},VirtualList.prototype.onFocusIn=function(e){var target=e.target;return target.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=getAriaPosInSet(target)-1),!1},VirtualList.prototype.onFocusOut=function(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1},VirtualList.prototype.handleKeyDown=function(e){switch(e.key){case KeyCode.UP:case KeyCode.DOWN:this.navigate(e.key===KeyCode.UP)&&e.preventDefault()}},VirtualList.prototype.onTabKeyDown=function(e){this.navigate(e.shiftKey)?e.preventDefault():this.focusService.focusInto(this.getGui(),!e.shiftKey)},VirtualList.prototype.navigate=function(up){if(null==this.lastFocusedRowIndex)return!1;var nextRow=this.lastFocusedRowIndex+(up?-1:1);return!(nextRow<0||nextRow>=this.model.getRowCount())&&(this.focusRow(nextRow),!0)},VirtualList.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},VirtualList.prototype.focusRow=function(rowNumber){var _this=this;this.ensureIndexVisible(rowNumber),window.setTimeout((function(){var renderedRow=_this.renderedRows.get(rowNumber);renderedRow&&renderedRow.eDiv.focus()}),10)},VirtualList.prototype.getComponentAt=function(rowIndex){var comp=this.renderedRows.get(rowIndex);return comp&&comp.rowComponent},VirtualList.getTemplate=function(cssIdentifier){return'\n            <div class="ag-virtual-list-viewport ag-'+cssIdentifier+'-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-'+cssIdentifier+'-virtual-list-container" ref="eContainer"></div>\n            </div>'},VirtualList.prototype.getItemHeight=function(){return this.gridOptionsWrapper.getListItemHeight()},VirtualList.prototype.ensureIndexVisible=function(index){var lastRow=this.model.getRowCount();if("number"!=typeof index||index<0||index>=lastRow)console.warn("AG Grid: invalid row index for ensureIndexVisible: "+index);else{var rowTopPixel=index*this.rowHeight,rowBottomPixel=rowTopPixel+this.rowHeight,eGui=this.getGui(),viewportTopPixel=eGui.scrollTop,viewportHeight=eGui.offsetHeight,viewportScrolledBeforeRow=viewportTopPixel+viewportHeight<rowBottomPixel;if(viewportTopPixel>rowTopPixel)eGui.scrollTop=rowTopPixel;else if(viewportScrolledBeforeRow){var newScrollPosition=rowBottomPixel-viewportHeight;eGui.scrollTop=newScrollPosition}}},VirtualList.prototype.setComponentCreator=function(componentCreator){this.componentCreator=componentCreator},VirtualList.prototype.getRowHeight=function(){return this.rowHeight},VirtualList.prototype.getScrollTop=function(){return this.getGui().scrollTop},VirtualList.prototype.setRowHeight=function(rowHeight){this.rowHeight=rowHeight,this.refresh()},VirtualList.prototype.refresh=function(){var _this=this;if(null!=this.model&&!this.isDestroyed){var rowCount=this.model.getRowCount();this.eContainer.style.height=rowCount*this.rowHeight+"px",waitUntil((function(){return _this.eContainer.clientHeight>=rowCount*_this.rowHeight}),(function(){_this.isDestroyed||(_this.clearVirtualRows(),_this.drawVirtualRows())}))}},VirtualList.prototype.clearVirtualRows=function(){var _this=this;this.renderedRows.forEach((function(_,rowIndex){return _this.removeRow(rowIndex)}))},VirtualList.prototype.drawVirtualRows=function(){var gui=this.getGui(),topPixel=gui.scrollTop,bottomPixel=topPixel+gui.offsetHeight,firstRow=Math.floor(topPixel/this.rowHeight),lastRow=Math.floor(bottomPixel/this.rowHeight);this.ensureRowsRendered(firstRow,lastRow)},VirtualList.prototype.ensureRowsRendered=function(start,finish){var _this=this;this.renderedRows.forEach((function(_,rowIndex){(rowIndex<start||rowIndex>finish)&&rowIndex!==_this.lastFocusedRowIndex&&_this.removeRow(rowIndex)}));for(var rowIndex=start;rowIndex<=finish;rowIndex++)this.renderedRows.has(rowIndex)||rowIndex<this.model.getRowCount()&&this.insertRow(rowIndex)},VirtualList.prototype.insertRow=function(rowIndex){var _this=this,value=this.model.getRow(rowIndex),eDiv=document.createElement("div");if(eDiv.classList.add("ag-virtual-list-item","ag-"+this.cssIdentifier+"-virtual-list-item"),setAriaRole(eDiv,"tree"===this.ariaRole?"treeitem":"option"),setAriaSetSize(eDiv,this.model.getRowCount()),setAriaPosInSet(eDiv,rowIndex+1),eDiv.setAttribute("tabindex","-1"),"function"==typeof this.model.isRowSelected){var isSelected=this.model.isRowSelected(rowIndex);setAriaSelected(eDiv,!!isSelected),setAriaChecked(eDiv,isSelected)}eDiv.style.height=this.rowHeight+"px",eDiv.style.top=this.rowHeight*rowIndex+"px";var rowComponent=this.componentCreator(value,eDiv);rowComponent.addGuiEventListener("focusin",(function(){return _this.lastFocusedRowIndex=rowIndex})),eDiv.appendChild(rowComponent.getGui()),this.renderedRows.has(rowIndex-1)?this.renderedRows.get(rowIndex-1).eDiv.insertAdjacentElement("afterend",eDiv):this.renderedRows.has(rowIndex+1)?this.renderedRows.get(rowIndex+1).eDiv.insertAdjacentElement("beforebegin",eDiv):this.eContainer.appendChild(eDiv),this.renderedRows.set(rowIndex,{rowComponent,eDiv})},VirtualList.prototype.removeRow=function(rowIndex){var component=this.renderedRows.get(rowIndex);this.eContainer.removeChild(component.eDiv),this.destroyBean(component.rowComponent),this.renderedRows.delete(rowIndex)},VirtualList.prototype.addScrollListener=function(){var _this=this;this.addGuiEventListener("scroll",(function(){return _this.drawVirtualRows()}))},VirtualList.prototype.setModel=function(model){this.model=model},VirtualList.prototype.destroy=function(){this.isDestroyed||(this.clearVirtualRows(),this.isDestroyed=!0,_super.prototype.destroy.call(this))},__decorate$1N([Autowired("resizeObserverService")],VirtualList.prototype,"resizeObserverService",void 0),__decorate$1N([Autowired("focusService")],VirtualList.prototype,"focusService",void 0),__decorate$1N([RefSelector("eContainer")],VirtualList.prototype,"eContainer",void 0),__decorate$1N([PostConstruct],VirtualList.prototype,"postConstruct",null),VirtualList}(TabGuardComp),OUTSIDE_ANGULAR_EVENTS=["mouseover","mouseout","mouseenter","mouseleave"],PASSIVE_EVENTS$1=["touchstart","touchend","touchmove","touchcancel"],VanillaFrameworkOverrides=function(){function VanillaFrameworkOverrides(){this.isOutsideAngular=function(eventType){return includes(OUTSIDE_ANGULAR_EVENTS,eventType)}}return VanillaFrameworkOverrides.prototype.setTimeout=function(action,timeout){window.setTimeout(action,timeout)},VanillaFrameworkOverrides.prototype.setInterval=function(action,timeout){return new AgPromise((function(resolve){resolve(window.setInterval(action,timeout))}))},VanillaFrameworkOverrides.prototype.addEventListener=function(element,type,listener,useCapture){var isPassive=includes(PASSIVE_EVENTS$1,type);element.addEventListener(type,listener,{capture:!!useCapture,passive:isPassive})},VanillaFrameworkOverrides.prototype.dispatchEvent=function(eventType,listener,global){listener()},VanillaFrameworkOverrides.prototype.frameworkComponent=function(name){return null},VanillaFrameworkOverrides.prototype.isFrameworkComponent=function(comp){return!1},VanillaFrameworkOverrides}(),__extends$28=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1O=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CellNavigationService=function(_super){function CellNavigationService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$28(CellNavigationService,_super),CellNavigationService.prototype.getNextCellToFocus=function(key,focusedCell,ctrlPressed){return void 0===ctrlPressed&&(ctrlPressed=!1),ctrlPressed?this.getNextCellToFocusWithCtrlPressed(key,focusedCell):this.getNextCellToFocusWithoutCtrlPressed(key,focusedCell)},CellNavigationService.prototype.getNextCellToFocusWithCtrlPressed=function(key,focusedCell){var column,rowIndex,upKey=key===KeyCode.UP,downKey=key===KeyCode.DOWN,leftKey=key===KeyCode.LEFT;if(upKey||downKey)rowIndex=upKey?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),column=focusedCell.column;else{var allColumns=this.columnModel.getAllDisplayedColumns(),isRtl=this.gridOptionsWrapper.isEnableRtl();rowIndex=focusedCell.rowIndex,column=leftKey!==isRtl?allColumns[0]:last(allColumns)}return{rowIndex,rowPinned:null,column}},CellNavigationService.prototype.getNextCellToFocusWithoutCtrlPressed=function(key,focusedCell){for(var pointer=focusedCell,finished=!1;!finished;){switch(key){case KeyCode.UP:pointer=this.getCellAbove(pointer);break;case KeyCode.DOWN:pointer=this.getCellBelow(pointer);break;case KeyCode.RIGHT:pointer=this.gridOptionsWrapper.isEnableRtl()?this.getCellToLeft(pointer):this.getCellToRight(pointer);break;case KeyCode.LEFT:pointer=this.gridOptionsWrapper.isEnableRtl()?this.getCellToRight(pointer):this.getCellToLeft(pointer);break;default:pointer=null,console.warn("AG Grid: unknown key for navigation "+key)}finished=!pointer||this.isCellGoodToFocusOn(pointer)}return pointer},CellNavigationService.prototype.isCellGoodToFocusOn=function(gridCell){var rowNode,column=gridCell.column;switch(gridCell.rowPinned){case Constants.PINNED_TOP:rowNode=this.pinnedRowModel.getPinnedTopRow(gridCell.rowIndex);break;case Constants.PINNED_BOTTOM:rowNode=this.pinnedRowModel.getPinnedBottomRow(gridCell.rowIndex);break;default:rowNode=this.rowModel.getRow(gridCell.rowIndex)}return!!rowNode&&!column.isSuppressNavigable(rowNode)},CellNavigationService.prototype.getCellToLeft=function(lastCell){if(!lastCell)return null;var colToLeft=this.columnModel.getDisplayedColBefore(lastCell.column);return colToLeft?{rowIndex:lastCell.rowIndex,column:colToLeft,rowPinned:lastCell.rowPinned}:null},CellNavigationService.prototype.getCellToRight=function(lastCell){if(!lastCell)return null;var colToRight=this.columnModel.getDisplayedColAfter(lastCell.column);return colToRight?{rowIndex:lastCell.rowIndex,column:colToRight,rowPinned:lastCell.rowPinned}:null},CellNavigationService.prototype.getRowBelow=function(rowPosition){var index=rowPosition.rowIndex,pinned=rowPosition.rowPinned;if(this.isLastRowInContainer(rowPosition))switch(pinned){case Constants.PINNED_BOTTOM:return null;case Constants.PINNED_TOP:return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender(Constants.PINNED_BOTTOM)?{rowIndex:0,rowPinned:Constants.PINNED_BOTTOM}:null;default:return this.pinnedRowModel.isRowsToRender(Constants.PINNED_BOTTOM)?{rowIndex:0,rowPinned:Constants.PINNED_BOTTOM}:null}return{rowIndex:index+1,rowPinned:pinned}},CellNavigationService.prototype.getCellBelow=function(lastCell){if(!lastCell)return null;var rowBelow=this.getRowBelow(lastCell);return rowBelow?{rowIndex:rowBelow.rowIndex,column:lastCell.column,rowPinned:rowBelow.rowPinned}:null},CellNavigationService.prototype.isLastRowInContainer=function(rowPosition){var pinned=rowPosition.rowPinned,index=rowPosition.rowIndex;return pinned===Constants.PINNED_TOP?this.pinnedRowModel.getPinnedTopRowData().length-1<=index:pinned===Constants.PINNED_BOTTOM?this.pinnedRowModel.getPinnedBottomRowData().length-1<=index:this.paginationProxy.getPageLastRow()<=index},CellNavigationService.prototype.getRowAbove=function(rowPosition){var index=rowPosition.rowIndex,pinned=rowPosition.rowPinned;return(pinned?0===index:index===this.paginationProxy.getPageFirstRow())?pinned===Constants.PINNED_TOP?null:pinned&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender(Constants.PINNED_TOP)?this.getLastFloatingTopRow():null:{rowIndex:index-1,rowPinned:pinned}},CellNavigationService.prototype.getCellAbove=function(lastCell){if(!lastCell)return null;var rowAbove=this.getRowAbove({rowIndex:lastCell.rowIndex,rowPinned:lastCell.rowPinned});return rowAbove?{rowIndex:rowAbove.rowIndex,column:lastCell.column,rowPinned:rowAbove.rowPinned}:null},CellNavigationService.prototype.getLastBodyCell=function(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}},CellNavigationService.prototype.getLastFloatingTopRow=function(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:Constants.PINNED_TOP}},CellNavigationService.prototype.getNextTabbedCell=function(gridCell,backwards){return backwards?this.getNextTabbedCellBackwards(gridCell):this.getNextTabbedCellForwards(gridCell)},CellNavigationService.prototype.getNextTabbedCellForwards=function(gridCell){var displayedColumns=this.columnModel.getAllDisplayedColumns(),newRowIndex=gridCell.rowIndex,newFloating=gridCell.rowPinned,newColumn=this.columnModel.getDisplayedColAfter(gridCell.column);if(!newColumn){newColumn=displayedColumns[0];var rowBelow=this.getRowBelow(gridCell);if(missing(rowBelow))return null;if(!rowBelow.rowPinned&&!this.paginationProxy.isRowInPage(rowBelow))return null;newRowIndex=rowBelow?rowBelow.rowIndex:null,newFloating=rowBelow?rowBelow.rowPinned:null}return{rowIndex:newRowIndex,column:newColumn,rowPinned:newFloating}},CellNavigationService.prototype.getNextTabbedCellBackwards=function(gridCell){var displayedColumns=this.columnModel.getAllDisplayedColumns(),newRowIndex=gridCell.rowIndex,newFloating=gridCell.rowPinned,newColumn=this.columnModel.getDisplayedColBefore(gridCell.column);if(!newColumn){newColumn=last(displayedColumns);var rowAbove=this.getRowAbove({rowIndex:gridCell.rowIndex,rowPinned:gridCell.rowPinned});if(missing(rowAbove))return null;if(!rowAbove.rowPinned&&!this.paginationProxy.isRowInPage(rowAbove))return null;newRowIndex=rowAbove?rowAbove.rowIndex:null,newFloating=rowAbove?rowAbove.rowPinned:null}return{rowIndex:newRowIndex,column:newColumn,rowPinned:newFloating}},__decorate$1O([Autowired("columnModel")],CellNavigationService.prototype,"columnModel",void 0),__decorate$1O([Autowired("rowModel")],CellNavigationService.prototype,"rowModel",void 0),__decorate$1O([Autowired("pinnedRowModel")],CellNavigationService.prototype,"pinnedRowModel",void 0),__decorate$1O([Autowired("paginationProxy")],CellNavigationService.prototype,"paginationProxy",void 0),CellNavigationService=__decorate$1O([Bean("cellNavigationService")],CellNavigationService)}(BeanStub),__extends$29=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1P=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$5=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},AlignedGridsService=function(_super){function AlignedGridsService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.consuming=!1,_this}return __extends$29(AlignedGridsService,_super),AlignedGridsService.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("AlignedGridsService")},AlignedGridsService.prototype.init=function(){this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},AlignedGridsService.prototype.fireEvent=function(callback){if(!this.consuming){var otherGrids=this.gridOptionsWrapper.getAlignedGrids();otherGrids&&otherGrids.forEach((function(otherGridOptions){if(otherGridOptions.api){var alignedGridService=otherGridOptions.api.__getAlignedGridService();callback(alignedGridService)}}))}},AlignedGridsService.prototype.onEvent=function(callback){this.consuming=!0,callback(),this.consuming=!1},AlignedGridsService.prototype.fireColumnEvent=function(event){this.fireEvent((function(alignedGridsService){alignedGridsService.onColumnEvent(event)}))},AlignedGridsService.prototype.fireScrollEvent=function(event){"horizontal"===event.direction&&this.fireEvent((function(alignedGridsService){alignedGridsService.onScrollEvent(event)}))},AlignedGridsService.prototype.onScrollEvent=function(event){var _this=this;this.onEvent((function(){_this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(event.left)}))},AlignedGridsService.prototype.getMasterColumns=function(event){var result=[];return event.columns?event.columns.forEach((function(column){result.push(column)})):event.column&&result.push(event.column),result},AlignedGridsService.prototype.getColumnIds=function(event){var result=[];return event.columns?event.columns.forEach((function(column){result.push(column.getColId())})):event.column&&result.push(event.column.getColId()),result},AlignedGridsService.prototype.onColumnEvent=function(event){var _this=this;this.onEvent((function(){switch(event.type){case Events.EVENT_COLUMN_MOVED:case Events.EVENT_COLUMN_VISIBLE:case Events.EVENT_COLUMN_PINNED:case Events.EVENT_COLUMN_RESIZED:var colEvent=event;_this.processColumnEvent(colEvent);break;case Events.EVENT_COLUMN_GROUP_OPENED:var groupOpenedEvent=event;_this.processGroupOpenedEvent(groupOpenedEvent);break;case Events.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}}))},AlignedGridsService.prototype.processGroupOpenedEvent=function(groupOpenedEvent){var masterColumnGroup=groupOpenedEvent.columnGroup,otherColumnGroup=null;if(masterColumnGroup){var groupId=masterColumnGroup.getGroupId();otherColumnGroup=this.columnModel.getProvidedColumnGroup(groupId)}masterColumnGroup&&!otherColumnGroup||(this.logger.log("onColumnEvent-> processing "+groupOpenedEvent+" expanded = "+masterColumnGroup.isExpanded()),this.columnModel.setColumnGroupOpened(otherColumnGroup,masterColumnGroup.isExpanded(),"alignedGridChanged"))},AlignedGridsService.prototype.processColumnEvent=function(colEvent){var _this=this,masterColumn=colEvent.column,otherColumn=null;if(masterColumn&&(otherColumn=this.columnModel.getPrimaryColumn(masterColumn.getColId())),!masterColumn||otherColumn){var masterColumns=this.getMasterColumns(colEvent);switch(colEvent.type){case Events.EVENT_COLUMN_MOVED:var movedEvent=colEvent,destColState=colEvent.columnApi.getColumnState().map((function(s){return{colId:s.colId}}));this.columnModel.applyColumnState({state:destColState,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+colEvent.type+" toIndex = "+movedEvent.toIndex);break;case Events.EVENT_COLUMN_VISIBLE:var visibleEvent=colEvent;destColState=colEvent.columnApi.getColumnState().map((function(s){return{colId:s.colId,hide:s.hide}}));this.columnModel.applyColumnState({state:destColState},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+colEvent.type+" visible = "+visibleEvent.visible);break;case Events.EVENT_COLUMN_PINNED:var pinnedEvent=colEvent;destColState=colEvent.columnApi.getColumnState().map((function(s){return{colId:s.colId,pinned:s.pinned}}));this.columnModel.applyColumnState({state:destColState},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+colEvent.type+" pinned = "+pinnedEvent.pinned);break;case Events.EVENT_COLUMN_RESIZED:var resizedEvent_1=colEvent;masterColumns.forEach((function(column){_this.logger.log("onColumnEvent-> processing "+colEvent.type+" actualWidth = "+column.getActualWidth());var columnWidths=[{key:column.getColId(),newWidth:column.getActualWidth()}];_this.columnModel.setColumnWidths(columnWidths,!1,resizedEvent_1.finished,"alignedGridChanged")}))}var isVerticalScrollShowing=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing(),alignedGrids=this.gridOptionsWrapper.getAlignedGrids();alignedGrids&&alignedGrids.forEach((function(grid){grid.api&&grid.api.setAlwaysShowVerticalScroll(isVerticalScrollShowing)}))}},__decorate$1P([Autowired("columnModel")],AlignedGridsService.prototype,"columnModel",void 0),__decorate$1P([Autowired("ctrlsService")],AlignedGridsService.prototype,"ctrlsService",void 0),__decorate$1P([__param$5(0,Qualifier("loggerFactory"))],AlignedGridsService.prototype,"setBeans",null),__decorate$1P([PostConstruct],AlignedGridsService.prototype,"init",null),AlignedGridsService=__decorate$1P([Bean("alignedGridsService")],AlignedGridsService)}(BeanStub),__extends$2a=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1Q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$6=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},SelectionService=function(_super){function SelectionService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2a(SelectionService,_super),SelectionService.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("selectionService"),this.reset()},SelectionService.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.addManagedListener(this.eventService,Events.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},SelectionService.prototype.setLastSelectedNode=function(rowNode){this.lastSelectedNode=rowNode},SelectionService.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},SelectionService.prototype.getSelectedNodes=function(){var selectedNodes=[];return iterateObject(this.selectedNodes,(function(key,rowNode){rowNode&&selectedNodes.push(rowNode)})),selectedNodes},SelectionService.prototype.getSelectedRows=function(){var selectedRows=[];return iterateObject(this.selectedNodes,(function(key,rowNode){rowNode&&rowNode.data&&selectedRows.push(rowNode.data)})),selectedRows},SelectionService.prototype.removeGroupsFromSelection=function(){var _this=this;iterateObject(this.selectedNodes,(function(key,rowNode){rowNode&&rowNode.group&&(_this.selectedNodes[rowNode.id]=void 0)}))},SelectionService.prototype.updateGroupsFromChildrenSelections=function(changedPath){if(this.gridOptionsWrapper.isGroupSelectsChildren()&&this.rowModel.getType()===Constants.ROW_MODEL_TYPE_CLIENT_SIDE){var rootNode=this.rowModel.getRootNode();changedPath||(changedPath=new ChangedPath(!0,rootNode)).setInactive(),changedPath.forEachChangedNodeDepthFirst((function(rowNode){rowNode!==rootNode&&rowNode.calculateSelectedFromChildren()}))}},SelectionService.prototype.getNodeForIdIfSelected=function(id){return this.selectedNodes[id]},SelectionService.prototype.clearOtherNodes=function(rowNodeToKeepSelected){var _this=this,groupsToRefresh={},updatedCount=0;return iterateObject(this.selectedNodes,(function(key,otherRowNode){if(otherRowNode&&otherRowNode.id!==rowNodeToKeepSelected.id){var rowNode=_this.selectedNodes[otherRowNode.id];updatedCount+=rowNode.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0}),_this.groupSelectsChildren&&otherRowNode.parent&&(groupsToRefresh[otherRowNode.parent.id]=otherRowNode.parent)}})),iterateObject(groupsToRefresh,(function(key,group){group.calculateSelectedFromChildren()})),updatedCount},SelectionService.prototype.onRowSelected=function(event){var rowNode=event.node;this.groupSelectsChildren&&rowNode.group||(rowNode.isSelected()?this.selectedNodes[rowNode.id]=rowNode:this.selectedNodes[rowNode.id]=void 0)},SelectionService.prototype.syncInRowNode=function(rowNode,oldNode){this.syncInOldRowNode(rowNode,oldNode),this.syncInNewRowNode(rowNode)},SelectionService.prototype.syncInOldRowNode=function(rowNode,oldNode){if(exists(oldNode)&&rowNode.id!==oldNode.id&&oldNode){var id=oldNode.id;this.selectedNodes[id]==rowNode&&(this.selectedNodes[oldNode.id]=oldNode)}},SelectionService.prototype.syncInNewRowNode=function(rowNode){exists(this.selectedNodes[rowNode.id])?(rowNode.setSelectedInitialValue(!0),this.selectedNodes[rowNode.id]=rowNode):rowNode.setSelectedInitialValue(!1)},SelectionService.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},SelectionService.prototype.getBestCostNodeSelection=function(){if(this.rowModel.getType()===Constants.ROW_MODEL_TYPE_CLIENT_SIDE){var topLevelNodes=this.rowModel.getTopLevelNodes();if(null!==topLevelNodes){var result=[];return function traverse(nodes){for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];if(node.isSelected())result.push(node);else{var maybeGroup=node;maybeGroup.group&&maybeGroup.children&&traverse(maybeGroup.children)}}}(topLevelNodes),result}console.warn("AG Grid: `selectAll` not available doing `rowModel=virtual`")}else console.warn("AG Grid: `getBestCostNodeSelection` is only available when using normal row model")},SelectionService.prototype.setRowModel=function(rowModel){this.rowModel=rowModel},SelectionService.prototype.isEmpty=function(){var count=0;return iterateObject(this.selectedNodes,(function(nodeId,rowNode){rowNode&&count++})),0===count},SelectionService.prototype.deselectAllRowNodes=function(justFiltered){void 0===justFiltered&&(justFiltered=!1);var callback=function(rowNode){return rowNode.selectThisNode(!1)},rowModelClientSide=this.rowModel.getType()===Constants.ROW_MODEL_TYPE_CLIENT_SIDE;if(justFiltered){if(!rowModelClientSide)return void console.error("AG Grid: selecting just filtered only works with In Memory Row Model");this.rowModel.forEachNodeAfterFilter(callback)}else iterateObject(this.selectedNodes,(function(id,rowNode){rowNode&&callback(rowNode)})),this.reset();rowModelClientSide&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections();var event={type:Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event)},SelectionService.prototype.selectAllRowNodes=function(justFiltered){if(void 0===justFiltered&&(justFiltered=!1),this.rowModel.getType()!==Constants.ROW_MODEL_TYPE_CLIENT_SIDE)throw new Error("selectAll only available with normal row model, ie not "+this.rowModel.getType());var clientSideRowModel=this.rowModel,callback=function(rowNode){return rowNode.selectThisNode(!0)};justFiltered?clientSideRowModel.forEachNodeAfterFilter(callback):clientSideRowModel.forEachNode(callback),this.rowModel.getType()===Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections();var event={type:Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event)},SelectionService.prototype.selectNode=function(rowNode,tryMulti){rowNode&&rowNode.setSelectedParams({newValue:!0,clearSelection:!tryMulti})},SelectionService.prototype.deselectIndex=function(rowIndex){var node=this.rowModel.getRow(rowIndex);this.deselectNode(node)},SelectionService.prototype.deselectNode=function(rowNode){rowNode&&rowNode.setSelectedParams({newValue:!1,clearSelection:!1})},SelectionService.prototype.selectIndex=function(index,tryMulti){var node=this.rowModel.getRow(index);this.selectNode(node,tryMulti)},__decorate$1Q([Autowired("rowModel")],SelectionService.prototype,"rowModel",void 0),__decorate$1Q([Autowired("columnApi")],SelectionService.prototype,"columnApi",void 0),__decorate$1Q([Autowired("gridApi")],SelectionService.prototype,"gridApi",void 0),__decorate$1Q([__param$6(0,Qualifier("loggerFactory"))],SelectionService.prototype,"setBeans",null),__decorate$1Q([PostConstruct],SelectionService.prototype,"init",null),SelectionService=__decorate$1Q([Bean("selectionService")],SelectionService)}(BeanStub),__decorate$1R=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnApi=function(){function ColumnApi(){}return ColumnApi.prototype.sizeColumnsToFit=function(gridWidth){void 0===gridWidth&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(gridWidth,"api")},ColumnApi.prototype.setColumnGroupOpened=function(group,newValue){this.columnModel.setColumnGroupOpened(group,newValue,"api")},ColumnApi.prototype.getColumnGroup=function(name,instanceId){return this.columnModel.getColumnGroup(name,instanceId)},ColumnApi.prototype.getProvidedColumnGroup=function(name){return this.columnModel.getProvidedColumnGroup(name)},ColumnApi.prototype.getDisplayNameForColumn=function(column,location){return this.columnModel.getDisplayNameForColumn(column,location)||""},ColumnApi.prototype.getDisplayNameForColumnGroup=function(columnGroup,location){return this.columnModel.getDisplayNameForColumnGroup(columnGroup,location)||""},ColumnApi.prototype.getColumn=function(key){return this.columnModel.getPrimaryColumn(key)},ColumnApi.prototype.applyColumnState=function(params){return this.columnModel.applyColumnState(params,"api")},ColumnApi.prototype.getColumnState=function(){return this.columnModel.getColumnState()},ColumnApi.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},ColumnApi.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},ColumnApi.prototype.setColumnGroupState=function(stateItems){this.columnModel.setColumnGroupState(stateItems,"api")},ColumnApi.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},ColumnApi.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},ColumnApi.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},ColumnApi.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},ColumnApi.prototype.getDisplayedColAfter=function(col){return this.columnModel.getDisplayedColAfter(col)},ColumnApi.prototype.getDisplayedColBefore=function(col){return this.columnModel.getDisplayedColBefore(col)},ColumnApi.prototype.setColumnVisible=function(key,visible){this.columnModel.setColumnVisible(key,visible,"api")},ColumnApi.prototype.setColumnsVisible=function(keys,visible){this.columnModel.setColumnsVisible(keys,visible,"api")},ColumnApi.prototype.setColumnPinned=function(key,pinned){this.columnModel.setColumnPinned(key,pinned,"api")},ColumnApi.prototype.setColumnsPinned=function(keys,pinned){this.columnModel.setColumnsPinned(keys,pinned,"api")},ColumnApi.prototype.getAllColumns=function(){return this.columnModel.getAllPrimaryColumns()},ColumnApi.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},ColumnApi.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},ColumnApi.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},ColumnApi.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},ColumnApi.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},ColumnApi.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},ColumnApi.prototype.moveColumn=function(key,toIndex){"number"==typeof key?(console.warn("AG Grid: you are using moveColumn(fromIndex, toIndex) - moveColumn takes a column key and a destination index, not two indexes, to move with indexes use moveColumnByIndex(from,to) instead"),this.columnModel.moveColumnByIndex(key,toIndex,"api")):this.columnModel.moveColumn(key,toIndex,"api")},ColumnApi.prototype.moveColumnByIndex=function(fromIndex,toIndex){this.columnModel.moveColumnByIndex(fromIndex,toIndex,"api")},ColumnApi.prototype.moveColumns=function(columnsToMoveKeys,toIndex){this.columnModel.moveColumns(columnsToMoveKeys,toIndex,"api")},ColumnApi.prototype.moveRowGroupColumn=function(fromIndex,toIndex){this.columnModel.moveRowGroupColumn(fromIndex,toIndex)},ColumnApi.prototype.setColumnAggFunc=function(key,aggFunc){this.columnModel.setColumnAggFunc(key,aggFunc)},ColumnApi.prototype.setColumnWidth=function(key,newWidth,finished,source){void 0===finished&&(finished=!0),this.columnModel.setColumnWidths([{key,newWidth}],!1,finished,source)},ColumnApi.prototype.setColumnWidths=function(columnWidths,finished,source){void 0===finished&&(finished=!0),this.columnModel.setColumnWidths(columnWidths,!1,finished,source)},ColumnApi.prototype.setPivotMode=function(pivotMode){this.columnModel.setPivotMode(pivotMode)},ColumnApi.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},ColumnApi.prototype.getSecondaryPivotColumn=function(pivotKeys,valueColKey){return this.columnModel.getSecondaryPivotColumn(pivotKeys,valueColKey)},ColumnApi.prototype.setValueColumns=function(colKeys){this.columnModel.setValueColumns(colKeys,"api")},ColumnApi.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},ColumnApi.prototype.removeValueColumn=function(colKey){this.columnModel.removeValueColumn(colKey,"api")},ColumnApi.prototype.removeValueColumns=function(colKeys){this.columnModel.removeValueColumns(colKeys,"api")},ColumnApi.prototype.addValueColumn=function(colKey){this.columnModel.addValueColumn(colKey,"api")},ColumnApi.prototype.addValueColumns=function(colKeys){this.columnModel.addValueColumns(colKeys,"api")},ColumnApi.prototype.setRowGroupColumns=function(colKeys){this.columnModel.setRowGroupColumns(colKeys,"api")},ColumnApi.prototype.removeRowGroupColumn=function(colKey){this.columnModel.removeRowGroupColumn(colKey,"api")},ColumnApi.prototype.removeRowGroupColumns=function(colKeys){this.columnModel.removeRowGroupColumns(colKeys,"api")},ColumnApi.prototype.addRowGroupColumn=function(colKey){this.columnModel.addRowGroupColumn(colKey,"api")},ColumnApi.prototype.addRowGroupColumns=function(colKeys){this.columnModel.addRowGroupColumns(colKeys,"api")},ColumnApi.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},ColumnApi.prototype.setPivotColumns=function(colKeys){this.columnModel.setPivotColumns(colKeys,"api")},ColumnApi.prototype.removePivotColumn=function(colKey){this.columnModel.removePivotColumn(colKey,"api")},ColumnApi.prototype.removePivotColumns=function(colKeys){this.columnModel.removePivotColumns(colKeys,"api")},ColumnApi.prototype.addPivotColumn=function(colKey){this.columnModel.addPivotColumn(colKey,"api")},ColumnApi.prototype.addPivotColumns=function(colKeys){this.columnModel.addPivotColumns(colKeys,"api")},ColumnApi.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},ColumnApi.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},ColumnApi.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},ColumnApi.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},ColumnApi.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},ColumnApi.prototype.autoSizeColumn=function(key,skipHeader){return this.columnModel.autoSizeColumn(key,skipHeader,"api")},ColumnApi.prototype.autoSizeColumns=function(keys,skipHeader){this.columnModel.autoSizeColumns({columns:keys,skipHeader})},ColumnApi.prototype.autoSizeAllColumns=function(skipHeader){this.columnModel.autoSizeAllColumns(skipHeader,"api")},ColumnApi.prototype.setSecondaryColumns=function(colDefs){this.columnModel.setSecondaryColumns(colDefs,"api")},ColumnApi.prototype.getSecondaryColumns=function(){return this.columnModel.getSecondaryColumns()},ColumnApi.prototype.getPrimaryColumns=function(){return this.columnModel.getAllPrimaryColumns()},ColumnApi.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(_.removeAllReferences.bind(window,this,"Column API"),100)},ColumnApi.prototype.columnGroupOpened=function(group,newValue){console.error("AG Grid: columnGroupOpened no longer exists, use setColumnGroupOpened"),this.setColumnGroupOpened(group,newValue)},ColumnApi.prototype.hideColumns=function(colIds,hide){console.error("AG Grid: hideColumns is deprecated, use setColumnsVisible"),this.columnModel.setColumnsVisible(colIds,!hide,"api")},ColumnApi.prototype.hideColumn=function(colId,hide){console.error("AG Grid: hideColumn is deprecated, use setColumnVisible"),this.columnModel.setColumnVisible(colId,!hide,"api")},ColumnApi.prototype.setState=function(columnState){return console.error("AG Grid: setState is deprecated, use setColumnState"),this.setColumnState(columnState)},ColumnApi.prototype.getState=function(){return console.error("AG Grid: getState is deprecated, use getColumnState"),this.getColumnState()},ColumnApi.prototype.resetState=function(){console.error("AG Grid: resetState is deprecated, use resetColumnState"),this.resetColumnState()},ColumnApi.prototype.getAggregationColumns=function(){return console.error("AG Grid: getAggregationColumns is deprecated, use getValueColumns"),this.columnModel.getValueColumns()},ColumnApi.prototype.removeAggregationColumn=function(colKey){console.error("AG Grid: removeAggregationColumn is deprecated, use removeValueColumn"),this.columnModel.removeValueColumn(colKey,"api")},ColumnApi.prototype.removeAggregationColumns=function(colKeys){console.error("AG Grid: removeAggregationColumns is deprecated, use removeValueColumns"),this.columnModel.removeValueColumns(colKeys,"api")},ColumnApi.prototype.addAggregationColumn=function(colKey){console.error("AG Grid: addAggregationColumn is deprecated, use addValueColumn"),this.columnModel.addValueColumn(colKey,"api")},ColumnApi.prototype.addAggregationColumns=function(colKeys){console.error("AG Grid: addAggregationColumns is deprecated, use addValueColumns"),this.columnModel.addValueColumns(colKeys,"api")},ColumnApi.prototype.setColumnAggFunction=function(column,aggFunc){console.error("AG Grid: setColumnAggFunction is deprecated, use setColumnAggFunc"),this.columnModel.setColumnAggFunc(column,aggFunc,"api")},ColumnApi.prototype.getDisplayNameForCol=function(column){return console.error("AG Grid: getDisplayNameForCol is deprecated, use getDisplayNameForColumn"),this.getDisplayNameForColumn(column,null)},ColumnApi.prototype.setColumnState=function(columnState){return console.error("AG Grid: setColumnState is deprecated, use applyColumnState"),this.columnModel.applyColumnState({state:columnState,applyOrder:!0},"api")},ColumnApi.prototype.getOriginalColumnGroup=function(name){return console.error("AG Grid: getOriginalColumnGroup is deprecated, use getProvidedColumnGroup"),this.columnModel.getProvidedColumnGroup(name)},__decorate$1R([Autowired("columnModel")],ColumnApi.prototype,"columnModel",void 0),__decorate$1R([PreDestroy],ColumnApi.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),ColumnApi=__decorate$1R([Bean("columnApi")],ColumnApi)}(),__extends$2b=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1S=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ValueService=function(_super){function ValueService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.initialised=!1,_this}return __extends$2b(ValueService,_super),ValueService.prototype.init=function(){var _this=this;this.cellExpressions=this.gridOptionsWrapper.isEnableCellExpressions(),this.initialised=!0,this.eventService.addEventListener(Events.EVENT_CELL_VALUE_CHANGED,(function(event){return _this.callColumnCellValueChangedHandler(event)}),this.gridOptionsWrapper.useAsyncEvents())},ValueService.prototype.getValue=function(column,rowNode,forFilter,ignoreAggData){if(void 0===forFilter&&(forFilter=!1),void 0===ignoreAggData&&(ignoreAggData=!1),this.initialised||this.init(),rowNode){var result,colDef=column.getColDef(),field=colDef.field,colId=column.getId(),data=rowNode.data,groupDataExists=rowNode.groupData&&void 0!==rowNode.groupData[colId],aggDataExists=!ignoreAggData&&rowNode.aggData&&void 0!==rowNode.aggData[colId];if(forFilter&&colDef.filterValueGetter?result=this.executeFilterValueGetter(colDef.filterValueGetter,data,column,rowNode):this.gridOptionsWrapper.isTreeData()&&aggDataExists?result=rowNode.aggData[colId]:this.gridOptionsWrapper.isTreeData()&&colDef.valueGetter?result=this.executeValueGetter(colDef.valueGetter,data,column,rowNode):this.gridOptionsWrapper.isTreeData()&&field&&data?result=getValueUsingField(data,field,column.isFieldContainsDots()):groupDataExists?result=rowNode.groupData[colId]:aggDataExists?result=rowNode.aggData[colId]:colDef.valueGetter?result=this.executeValueGetter(colDef.valueGetter,data,column,rowNode):field&&data&&(result=getValueUsingField(data,field,column.isFieldContainsDots())),this.cellExpressions&&"string"==typeof result&&0===result.indexOf("=")){var cellValueGetter=result.substring(1);result=this.executeValueGetter(cellValueGetter,data,column,rowNode)}if(null==result){var openedGroup=this.getOpenedGroup(rowNode,column);if(null!=openedGroup)return openedGroup}return result}},ValueService.prototype.getOpenedGroup=function(rowNode,column){if(this.gridOptionsWrapper.isShowOpenedGroup()&&column.getColDef().showRowGroup)for(var showRowGroup=column.getColDef().showRowGroup,pointer=rowNode.parent;null!=pointer;){if(pointer.rowGroupColumn&&(!0===showRowGroup||showRowGroup===pointer.rowGroupColumn.getId()))return pointer.key;pointer=pointer.parent}},ValueService.prototype.setValue=function(rowNode,colKey,newValue,eventSource){var column=this.columnModel.getPrimaryColumn(colKey);if(!rowNode||!column)return!1;missing(rowNode.data)&&(rowNode.data={});var _a=column.getColDef(),field=_a.field,newValueHandler=_a.newValueHandler,valueSetter=_a.valueSetter;if(missing(field)&&missing(newValueHandler)&&missing(valueSetter))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;var valueWasDifferent,params={node:rowNode,data:rowNode.data,oldValue:this.getValue(column,rowNode),newValue,colDef:column.getColDef(),column,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};if(params.newValue=newValue,void 0===(valueWasDifferent=newValueHandler&&exists(newValueHandler)?newValueHandler(params):exists(valueSetter)?this.expressionService.evaluate(valueSetter,params):this.setValueUsingField(rowNode.data,field,newValue,column.isFieldContainsDots()))&&(valueWasDifferent=!0),!valueWasDifferent)return!1;rowNode.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),params.newValue=this.getValue(column,rowNode);var event={type:Events.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:rowNode.rowIndex,rowPinned:rowNode.rowPinned,column:params.column,api:params.api,columnApi:params.columnApi,colDef:params.colDef,context:params.context,data:rowNode.data,node:rowNode,oldValue:params.oldValue,newValue:params.newValue,value:params.newValue,source:eventSource};return this.eventService.dispatchEvent(event),!0},ValueService.prototype.callColumnCellValueChangedHandler=function(event){var onCellValueChanged=event.colDef.onCellValueChanged;"function"==typeof onCellValueChanged&&onCellValueChanged({node:event.node,data:event.data,oldValue:event.oldValue,newValue:event.newValue,colDef:event.colDef,column:event.column,api:event.api,columnApi:event.columnApi,context:event.context})},ValueService.prototype.setValueUsingField=function(data,field,newValue,isFieldContainsDots){if(!field)return!1;if(isFieldContainsDots)for(var fieldPieces=field.split("."),currentObject=data;fieldPieces.length>0&&currentObject;){var fieldPiece=fieldPieces.shift();0===fieldPieces.length?currentObject[fieldPiece]=newValue:currentObject=currentObject[fieldPiece]}else data[field]=newValue;return!0},ValueService.prototype.executeFilterValueGetter=function(valueGetter,data,column,rowNode){var params={data,node:rowNode,column,colDef:column.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,rowNode)};return this.expressionService.evaluate(valueGetter,params)},ValueService.prototype.executeValueGetter=function(valueGetter,data,column,rowNode){var colId=column.getId(),valueFromCache=this.valueCache.getValue(rowNode,colId);if(void 0!==valueFromCache)return valueFromCache;var params={data,node:rowNode,column,colDef:column.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,rowNode)},result=this.expressionService.evaluate(valueGetter,params);return this.valueCache.setValue(rowNode,colId,result),result},ValueService.prototype.getValueCallback=function(node,field){var otherColumn=this.columnModel.getPrimaryColumn(field);return otherColumn?this.getValue(otherColumn,node):null},ValueService.prototype.getKeyForNode=function(col,rowNode){var value=this.getValue(col,rowNode),keyCreator=col.getColDef().keyCreator,result=value;keyCreator&&(result=keyCreator({value,colDef:col.getColDef(),column:col,node:rowNode,data:rowNode.data,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}));return"string"==typeof result||null==result||"[object Object]"===(result=String(result))&&doOnce((function(){console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")}),"getKeyForNode - warn about [object,object]"),result},__decorate$1S([Autowired("expressionService")],ValueService.prototype,"expressionService",void 0),__decorate$1S([Autowired("columnModel")],ValueService.prototype,"columnModel",void 0),__decorate$1S([Autowired("valueCache")],ValueService.prototype,"valueCache",void 0),__decorate$1S([PostConstruct],ValueService.prototype,"init",null),ValueService=__decorate$1S([Bean("valueService")],ValueService)}(BeanStub),__extends$2c=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1T=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$7=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},ExpressionService=function(_super){function ExpressionService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.expressionToFunctionCache={},_this}return __extends$2c(ExpressionService,_super),ExpressionService.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("ExpressionService")},ExpressionService.prototype.evaluate=function(expressionOrFunc,params){if("function"==typeof expressionOrFunc)return expressionOrFunc(params);if("string"==typeof expressionOrFunc){var expression=expressionOrFunc;return this.evaluateExpression(expression,params)}console.error("AG Grid: value should be either a string or a function",expressionOrFunc)},ExpressionService.prototype.evaluateExpression=function(expression,params){try{return this.createExpressionFunction(expression)(params.value,params.context,params.oldValue,params.newValue,params.value,params.node,params.data,params.colDef,params.rowIndex,params.api,params.columnApi,params.getValue,params.column,params.columnGroup)}catch(e){return console.log("Processing of the expression failed"),console.log("Expression = "+expression),console.log("Params =",params),console.log("Exception = "+e),null}},ExpressionService.prototype.createExpressionFunction=function(expression){if(this.expressionToFunctionCache[expression])return this.expressionToFunctionCache[expression];var functionBody=this.createFunctionBody(expression),theFunction=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",functionBody);return this.expressionToFunctionCache[expression]=theFunction,theFunction},ExpressionService.prototype.createFunctionBody=function(expression){return expression.indexOf("return")>=0?expression:"return "+expression+";"},__decorate$1T([__param$7(0,Qualifier("loggerFactory"))],ExpressionService.prototype,"setBeans",null),ExpressionService=__decorate$1T([Bean("expressionService")],ExpressionService)}(BeanStub),__extends$2d=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1U=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TemplateService=function(_super){function TemplateService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.templateCache={},_this.waitingCallbacks={},_this}return __extends$2d(TemplateService,_super),TemplateService.prototype.getTemplate=function(url,callback){var templateFromCache=this.templateCache[url];if(templateFromCache)return templateFromCache;var callbackList=this.waitingCallbacks[url],that=this;if(!callbackList){callbackList=[],this.waitingCallbacks[url]=callbackList;var client=new XMLHttpRequest;client.onload=function(){that.handleHttpResult(this,url)},client.open("GET",url),client.send()}return callback&&callbackList.push(callback),null},TemplateService.prototype.handleHttpResult=function(httpResult,url){if(200===httpResult.status&&null!==httpResult.response){this.templateCache[url]=httpResult.response||httpResult.responseText;for(var callbacks=this.waitingCallbacks[url],i=0;i<callbacks.length;i++){(0,callbacks[i])()}}else console.warn("AG Grid: Unable to get template error "+httpResult.status+" - "+url)},TemplateService=__decorate$1U([Bean("templateService")],TemplateService)}(BeanStub),__extends$2e=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1V=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$8=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},LoggerFactory=function(_super){function LoggerFactory(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2e(LoggerFactory,_super),LoggerFactory.prototype.setBeans=function(gridOptionsWrapper){this.logging=gridOptionsWrapper.isDebug()},LoggerFactory.prototype.create=function(name){return new Logger(name,this.isLogging.bind(this))},LoggerFactory.prototype.isLogging=function(){return this.logging},__decorate$1V([__param$8(0,Qualifier("gridOptionsWrapper"))],LoggerFactory.prototype,"setBeans",null),LoggerFactory=__decorate$1V([Bean("loggerFactory")],LoggerFactory)}(BeanStub),Logger=function(){function Logger(name,isLoggingFunc){this.name=name,this.isLoggingFunc=isLoggingFunc}return Logger.prototype.isLogging=function(){return this.isLoggingFunc()},Logger.prototype.log=function(message){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+message)},Logger}(),__extends$2f=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1W=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridCtrl=function(_super){function GridCtrl(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2f(GridCtrl,_super),GridCtrl.prototype.setComp=function(view,eGridDiv,eGui){var _this=this;this.view=view,this.eGridHostDiv=eGridDiv,this.eGui=eGui,this.mouseEventService.stampTopLevelGridCompWithGridInstance(eGridDiv),this.createManagedBean(new LayoutFeature(this.view)),this.addRtlSupport(),this.addManagedListener(this,Events.EVENT_KEYBOARD_FOCUS,(function(){_this.view.addOrRemoveKeyboardFocusClass(!0)})),this.addManagedListener(this,Events.EVENT_MOUSE_FOCUS,(function(){_this.view.addOrRemoveKeyboardFocusClass(!1)}));var unsubscribeFromResize=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc((function(){return unsubscribeFromResize()})),this.ctrlsService.registerGridCtrl(this)},GridCtrl.prototype.isDetailGrid=function(){var _a,_b;return(null===(_b=null===(_a=this.focusService.findTabbableParent(this.getGui()))||void 0===_a?void 0:_a.getAttribute("row-id"))||void 0===_b?void 0:_b.startsWith("detail"))||!1},GridCtrl.prototype.showDropZones=function(){return ModuleRegistry.isRegistered(exports.ModuleNames.RowGroupingModule)},GridCtrl.prototype.showSideBar=function(){return ModuleRegistry.isRegistered(exports.ModuleNames.SideBarModule)},GridCtrl.prototype.showStatusBar=function(){return ModuleRegistry.isRegistered(exports.ModuleNames.StatusBarModule)},GridCtrl.prototype.showWatermark=function(){return ModuleRegistry.isRegistered(exports.ModuleNames.EnterpriseCoreModule)},GridCtrl.prototype.onGridSizeChanged=function(){var event={type:Events.EVENT_GRID_SIZE_CHANGED,api:this.gridApi,columnApi:this.columnApi,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(event)},GridCtrl.prototype.addRtlSupport=function(){var cssClass=this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr";this.view.setRtlClass(cssClass)},GridCtrl.prototype.destroyGridUi=function(){this.view.destroyGridUi()},GridCtrl.prototype.getGui=function(){return this.eGui},GridCtrl.prototype.setResizeCursor=function(on){this.view.setCursor(on?"ew-resize":null)},GridCtrl.prototype.disableUserSelect=function(on){this.view.setUserSelect(on?"none":null)},GridCtrl.prototype.focusNextInnerContainer=function(backwards){var eDocument=this.gridOptionsWrapper.getDocument(),focusableContainers=this.view.getFocusableContainers(),nextIdx=focusableContainers.findIndex((function(container){return container.contains(eDocument.activeElement)}))+(backwards?-1:1);return!(nextIdx<=0||nextIdx>=focusableContainers.length)&&this.focusService.focusInto(focusableContainers[nextIdx])},GridCtrl.prototype.focusInnerElement=function(fromBottom){var focusableContainers=this.view.getFocusableContainers();if(fromBottom){if(focusableContainers.length>1)return this.focusService.focusInto(last(focusableContainers),!0);var lastColumn=last(this.columnModel.getAllDisplayedColumns());if(this.focusService.focusGridView(lastColumn,!0))return!0}return this.focusService.focusFirstHeader()},GridCtrl.prototype.forceFocusOutOfContainer=function(up){void 0===up&&(up=!1),this.view.forceFocusOutOfContainer(up)},__decorate$1W([Autowired("columnApi")],GridCtrl.prototype,"columnApi",void 0),__decorate$1W([Autowired("gridApi")],GridCtrl.prototype,"gridApi",void 0),__decorate$1W([Autowired("focusService")],GridCtrl.prototype,"focusService",void 0),__decorate$1W([Autowired("resizeObserverService")],GridCtrl.prototype,"resizeObserverService",void 0),__decorate$1W([Autowired("columnModel")],GridCtrl.prototype,"columnModel",void 0),__decorate$1W([Autowired("ctrlsService")],GridCtrl.prototype,"ctrlsService",void 0),__decorate$1W([Autowired("mouseEventService")],GridCtrl.prototype,"mouseEventService",void 0),GridCtrl}(BeanStub),__extends$2g=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1X=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridComp=function(_super){function GridComp(eGridDiv){var _this=_super.call(this,void 0)||this;return _this.eGridDiv=eGridDiv,_this}return __extends$2g(GridComp,_super),GridComp.prototype.postConstruct=function(){var _this=this;this.logger=this.loggerFactory.create("GridComp");var compProxy={destroyGridUi:function(){return _this.destroyBean(_this)},setRtlClass:function(cssClass){return _this.addCssClass(cssClass)},addOrRemoveKeyboardFocusClass:function(addOrRemove){return _this.addOrRemoveCssClass(FocusService.AG_KEYBOARD_FOCUS,addOrRemove)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(value){_this.getGui().style.userSelect=null!=value?value:"",_this.getGui().style.webkitUserSelect=null!=value?value:""},setCursor:function(value){_this.getGui().style.cursor=null!=value?value:""}};this.ctrl=this.createManagedBean(new GridCtrl);var template=this.createTemplate();this.setTemplate(template),this.ctrl.setComp(compProxy,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(fromBottom){return _this.ctrl.focusInnerElement(fromBottom)}})},GridComp.prototype.insertGridIntoDom=function(){var _this=this,eGui=this.getGui();this.eGridDiv.appendChild(eGui),this.addDestroyFunc((function(){_this.eGridDiv.removeChild(eGui),_this.logger.log("Grid removed from DOM")}))},GridComp.prototype.updateLayoutClasses=function(cssClass,params){var eRootWrapperBodyClassList=this.eRootWrapperBody.classList;eRootWrapperBodyClassList.toggle(exports.LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),eRootWrapperBodyClassList.toggle(exports.LayoutCssClasses.NORMAL,params.normal),eRootWrapperBodyClassList.toggle(exports.LayoutCssClasses.PRINT,params.print),this.addOrRemoveCssClass(exports.LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),this.addOrRemoveCssClass(exports.LayoutCssClasses.NORMAL,params.normal),this.addOrRemoveCssClass(exports.LayoutCssClasses.PRINT,params.print)},GridComp.prototype.createTemplate=function(){return'<div class="ag-root-wrapper">\n                '+(this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"")+'\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    '+(this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"")+"\n                </div>\n                "+(this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"")+"\n                <ag-pagination></ag-pagination>\n                "+(this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"")+"\n            </div>"},GridComp.prototype.getFocusableElement=function(){return this.eRootWrapperBody},GridComp.prototype.getFocusableContainers=function(){var focusableContainers=[this.gridBodyComp.getGui()];return this.sideBarComp&&focusableContainers.push(this.sideBarComp.getGui()),focusableContainers.filter((function(el){return isVisible(el)}))},__decorate$1X([Autowired("loggerFactory")],GridComp.prototype,"loggerFactory",void 0),__decorate$1X([RefSelector("gridBody")],GridComp.prototype,"gridBodyComp",void 0),__decorate$1X([RefSelector("sideBar")],GridComp.prototype,"sideBarComp",void 0),__decorate$1X([RefSelector("rootWrapperBody")],GridComp.prototype,"eRootWrapperBody",void 0),__decorate$1X([PostConstruct],GridComp.prototype,"postConstruct",null),GridComp}(TabGuardComp),__extends$2h=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1Y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SortController=function(_super){function SortController(){return null!==_super&&_super.apply(this,arguments)||this}var SortController_1;return __extends$2h(SortController,_super),SortController_1=SortController,SortController.prototype.progressSort=function(column,multiSort,source){var nextDirection=this.getNextSortDirection(column);this.setSortForColumn(column,nextDirection,multiSort,source)},SortController.prototype.setSortForColumn=function(column,sort,multiSort,source){sort!==Constants.SORT_ASC&&sort!==Constants.SORT_DESC&&(sort=null),column.setSort(sort,source),(multiSort||this.gridOptionsWrapper.isAlwaysMultiSort())&&!this.gridOptionsWrapper.isSuppressMultiSort()||this.clearSortBarThisColumn(column,source),this.updateSortIndex(column),this.dispatchSortChangedEvents(source)},SortController.prototype.updateSortIndex=function(lastColToChange){var allSortedCols=this.getColumnsWithSortingOrdered(),sortIndex=0;allSortedCols.forEach((function(col){col!==lastColToChange&&(col.setSortIndex(sortIndex),sortIndex++)})),lastColToChange.getSort()&&lastColToChange.setSortIndex(sortIndex),this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter((function(col){return null==col.getSort()})).forEach((function(col){return col.setSortIndex()}))},SortController.prototype.onSortChanged=function(source){this.dispatchSortChangedEvents(source)},SortController.prototype.isSortActive=function(){var sortedCols=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter((function(column){return!!column.getSort()}));return sortedCols&&sortedCols.length>0},SortController.prototype.dispatchSortChangedEvents=function(source){var event={type:Events.EVENT_SORT_CHANGED,api:this.gridApi,columnApi:this.columnApi,source};this.eventService.dispatchEvent(event)},SortController.prototype.clearSortBarThisColumn=function(columnToSkip,source){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach((function(columnToClear){columnToClear!==columnToSkip&&columnToClear.setSort(void 0,source)}))},SortController.prototype.getNextSortDirection=function(column){var sortingOrder;if(sortingOrder=column.getColDef().sortingOrder?column.getColDef().sortingOrder:this.gridOptionsWrapper.getSortingOrder()?this.gridOptionsWrapper.getSortingOrder():SortController_1.DEFAULT_SORTING_ORDER,!Array.isArray(sortingOrder)||sortingOrder.length<=0)return console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's "+sortingOrder),null;var result,currentIndex=sortingOrder.indexOf(column.getSort()),notInArray=currentIndex<0,lastItemInArray=currentIndex==sortingOrder.length-1;return result=notInArray||lastItemInArray?sortingOrder[0]:sortingOrder[currentIndex+1],SortController_1.DEFAULT_SORTING_ORDER.indexOf(result)<0?(console.warn("AG Grid: invalid sort type "+result),null):result},SortController.prototype.getColumnsWithSortingOrdered=function(){var allColumnsIncludingAuto=this.columnModel.getPrimaryAndSecondaryAndAutoColumns(),columnsWithSorting=allColumnsIncludingAuto.filter((function(column){return!!column.getSort()})),allColsIndexes={};return allColumnsIncludingAuto.forEach((function(col,index){return allColsIndexes[col.getId()]=index})),columnsWithSorting.sort((function(a,b){var iA=a.getSortIndex(),iB=b.getSortIndex();return null!=iA&&null!=iB?iA-iB:null==iA&&null==iB?allColsIndexes[a.getId()]>allColsIndexes[b.getId()]?1:-1:null==iB?-1:1})),columnsWithSorting},SortController.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().map((function(column){return{sort:column.getSort(),colId:column.getId()}}))},SortController.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().map((function(column){return{sort:column.getSort(),column}}))},SortController.DEFAULT_SORTING_ORDER=[Constants.SORT_ASC,Constants.SORT_DESC,null],__decorate$1Y([Autowired("columnModel")],SortController.prototype,"columnModel",void 0),__decorate$1Y([Autowired("columnApi")],SortController.prototype,"columnApi",void 0),__decorate$1Y([Autowired("gridApi")],SortController.prototype,"gridApi",void 0),SortController=SortController_1=__decorate$1Y([Bean("sortController")],SortController)}(BeanStub),__extends$2i=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1Z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnHoverService=function(_super){function ColumnHoverService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2i(ColumnHoverService,_super),ColumnHoverService.prototype.setMouseOver=function(columns){this.selectedColumns=columns;var event={type:Events.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event)},ColumnHoverService.prototype.clearMouseOver=function(){this.selectedColumns=null;var event={type:Events.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event)},ColumnHoverService.prototype.isHovered=function(column){return!!this.selectedColumns&&this.selectedColumns.indexOf(column)>=0},__decorate$1Z([Autowired("columnApi")],ColumnHoverService.prototype,"columnApi",void 0),__decorate$1Z([Autowired("gridApi")],ColumnHoverService.prototype,"gridApi",void 0),ColumnHoverService=__decorate$1Z([Bean("columnHoverService")],ColumnHoverService)}(BeanStub),__extends$2j=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1_=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnAnimationService=function(_super){function ColumnAnimationService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.executeNextFuncs=[],_this.executeLaterFuncs=[],_this.active=!1,_this.animationThreadCount=0,_this}return __extends$2j(ColumnAnimationService,_super),ColumnAnimationService.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){return _this.gridBodyCtrl=p.gridBodyCtrl}))},ColumnAnimationService.prototype.isActive=function(){return this.active},ColumnAnimationService.prototype.start=function(){this.active||this.gridOptionsWrapper.isSuppressColumnMoveAnimation()||this.gridOptionsWrapper.isEnableRtl()||(this.ensureAnimationCssClassPresent(),this.active=!0)},ColumnAnimationService.prototype.finish=function(){this.active&&(this.flush(),this.active=!1)},ColumnAnimationService.prototype.executeNextVMTurn=function(func){this.active?this.executeNextFuncs.push(func):func()},ColumnAnimationService.prototype.executeLaterVMTurn=function(func){this.active?this.executeLaterFuncs.push(func):func()},ColumnAnimationService.prototype.ensureAnimationCssClassPresent=function(){var _this=this;this.animationThreadCount++;var animationThreadCountCopy=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push((function(){_this.animationThreadCount===animationThreadCountCopy&&_this.gridBodyCtrl.setColumnMovingCss(!1)}))},ColumnAnimationService.prototype.flush=function(){var nowFuncs=this.executeNextFuncs;this.executeNextFuncs=[];var waitFuncs=this.executeLaterFuncs;this.executeLaterFuncs=[],0===nowFuncs.length&&0===waitFuncs.length||(window.setTimeout((function(){return nowFuncs.forEach((function(func){return func()}))}),0),window.setTimeout((function(){return waitFuncs.forEach((function(func){return func()}))}),300))},__decorate$1_([Autowired("ctrlsService")],ColumnAnimationService.prototype,"ctrlsService",void 0),__decorate$1_([PostConstruct],ColumnAnimationService.prototype,"postConstruct",null),ColumnAnimationService=__decorate$1_([Bean("columnAnimationService")],ColumnAnimationService)}(BeanStub),__extends$2k=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1$=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AutoGroupColService=function(_super){function AutoGroupColService(){return null!==_super&&_super.apply(this,arguments)||this}var AutoGroupColService_1;return __extends$2k(AutoGroupColService,_super),AutoGroupColService_1=AutoGroupColService,AutoGroupColService.prototype.createAutoGroupColumns=function(existingCols,rowGroupColumns){var _this=this,groupAutoColumns=[],doingTreeData=this.gridOptionsWrapper.isTreeData(),doingMultiAutoColumn=this.gridOptionsWrapper.isGroupMultiAutoColumn();return doingTreeData&&doingMultiAutoColumn&&(console.warn("AG Grid: you cannot mix groupMultiAutoColumn with treeData, only one column can be used to display groups when doing tree data"),doingMultiAutoColumn=!1),doingMultiAutoColumn?rowGroupColumns.forEach((function(rowGroupCol,index){groupAutoColumns.push(_this.createOneAutoGroupColumn(existingCols,rowGroupCol,index))})):groupAutoColumns.push(this.createOneAutoGroupColumn(existingCols)),groupAutoColumns},AutoGroupColService.prototype.createOneAutoGroupColumn=function(existingCols,rowGroupCol,index){var colId,defaultAutoColDef=this.generateDefaultColDef(rowGroupCol);(colId=rowGroupCol?Constants.GROUP_AUTO_COLUMN_ID+"-"+rowGroupCol.getId():AutoGroupColService_1.GROUP_AUTO_COLUMN_BUNDLE_ID,mergeDeep(defaultAutoColDef,this.gridOptionsWrapper.getAutoGroupColumnDef()),(defaultAutoColDef=this.columnFactory.mergeColDefs(defaultAutoColDef)).colId=colId,this.gridOptionsWrapper.isTreeData())||missing(defaultAutoColDef.field)&&missing(defaultAutoColDef.valueGetter)&&missing(defaultAutoColDef.filterValueGetter)&&(defaultAutoColDef.filter=!1);index&&index>0&&(defaultAutoColDef.headerCheckboxSelection=!1);var existingCol=existingCols.find((function(col){return col.getId()==colId}));if(existingCol)return existingCol.setColDef(defaultAutoColDef,null),this.columnFactory.applyColumnState(existingCol,defaultAutoColDef),existingCol;var newCol=new Column(defaultAutoColDef,null,colId,!0);return this.context.createBean(newCol),newCol},AutoGroupColService.prototype.generateDefaultColDef=function(rowGroupCol){var userDef=this.gridOptionsWrapper.getAutoGroupColumnDef(),res={headerName:this.gridOptionsWrapper.getLocaleTextFunc()("group","Group")};if(userDef&&(userDef.cellRenderer||userDef.cellRendererFramework||userDef.cellRendererSelector)||(res.cellRenderer="agGroupCellRenderer"),rowGroupCol){var colDef=rowGroupCol.getColDef();Object.assign(res,{headerName:this.columnModel.getDisplayNameForColumn(rowGroupCol,"header"),headerValueGetter:colDef.headerValueGetter}),(colDef.cellRenderer||colDef.cellRendererFramework)&&Object.assign(res,{cellRendererParams:{innerRenderer:colDef.cellRenderer,innerRendererFramework:colDef.cellRendererFramework,innerRendererParams:colDef.cellRendererParams}}),res.showRowGroup=rowGroupCol.getColId()}else res.showRowGroup=!0;return res},AutoGroupColService.GROUP_AUTO_COLUMN_BUNDLE_ID=Constants.GROUP_AUTO_COLUMN_ID,__decorate$1$([Autowired("columnModel")],AutoGroupColService.prototype,"columnModel",void 0),__decorate$1$([Autowired("columnFactory")],AutoGroupColService.prototype,"columnFactory",void 0),AutoGroupColService=AutoGroupColService_1=__decorate$1$([Bean("autoGroupColService")],AutoGroupColService)}(BeanStub),__extends$2l=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$20=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PaginationAutoPageSizeService=function(_super){function PaginationAutoPageSizeService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2l(PaginationAutoPageSizeService,_super),PaginationAutoPageSizeService.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){_this.centerRowContainerCon=p.centerRowContainerCtrl,_this.addManagedListener(_this.eventService,Events.EVENT_BODY_HEIGHT_CHANGED,_this.onBodyHeightChanged.bind(_this)),_this.addManagedListener(_this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,_this.onScrollVisibilityChanged.bind(_this)),_this.checkPageSize()}))},PaginationAutoPageSizeService.prototype.notActive=function(){return!this.gridOptionsWrapper.isPaginationAutoPageSize()},PaginationAutoPageSizeService.prototype.onScrollVisibilityChanged=function(){this.checkPageSize()},PaginationAutoPageSizeService.prototype.onBodyHeightChanged=function(){this.checkPageSize()},PaginationAutoPageSizeService.prototype.checkPageSize=function(){if(!this.notActive()){var rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),bodyHeight=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(bodyHeight>0){var newPageSize=Math.floor(bodyHeight/rowHeight);this.gridOptionsWrapper.setProperty("paginationPageSize",newPageSize)}}},__decorate$20([Autowired("ctrlsService")],PaginationAutoPageSizeService.prototype,"ctrlsService",void 0),__decorate$20([PostConstruct],PaginationAutoPageSizeService.prototype,"postConstruct",null),PaginationAutoPageSizeService=__decorate$20([Bean("paginationAutoPageSizeService")],PaginationAutoPageSizeService)}(BeanStub),__extends$2m=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$21=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ValueCache=function(_super){function ValueCache(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.cacheVersion=0,_this}return __extends$2m(ValueCache,_super),ValueCache.prototype.init=function(){this.active=this.gridOptionsWrapper.isValueCache(),this.neverExpires=this.gridOptionsWrapper.isValueCacheNeverExpires()},ValueCache.prototype.onDataChanged=function(){this.neverExpires||this.expire()},ValueCache.prototype.expire=function(){this.cacheVersion++},ValueCache.prototype.setValue=function(rowNode,colId,value){this.active&&(rowNode.__cacheVersion!==this.cacheVersion&&(rowNode.__cacheVersion=this.cacheVersion,rowNode.__cacheData={}),rowNode.__cacheData[colId]=value)},ValueCache.prototype.getValue=function(rowNode,colId){if(this.active&&rowNode.__cacheVersion===this.cacheVersion)return rowNode.__cacheData[colId]},__decorate$21([PostConstruct],ValueCache.prototype,"init",null),ValueCache=__decorate$21([Bean("valueCache")],ValueCache)}(BeanStub),__extends$2n=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$22=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ChangeDetectionService=function(_super){function ChangeDetectionService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2n(ChangeDetectionService,_super),ChangeDetectionService.prototype.init=function(){this.rowModel.getType()===Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},ChangeDetectionService.prototype.onCellValueChanged=function(event){event.source!==Constants.SOURCE_PASTE&&this.doChangeDetection(event.node,event.column)},ChangeDetectionService.prototype.doChangeDetection=function(rowNode,column){if(!this.gridOptionsWrapper.isSuppressChangeDetection()){if(this.clientSideRowModel&&!rowNode.isRowPinned()){var onlyChangedColumns=this.gridOptionsWrapper.isAggregateOnlyChangedColumns(),changedPath=new ChangedPath(onlyChangedColumns,this.clientSideRowModel.getRootNode());changedPath.addParentNode(rowNode.parent,[column]),this.clientSideRowModel.doAggregate(changedPath)}this.rowRenderer.refreshCells()}},__decorate$22([Autowired("rowModel")],ChangeDetectionService.prototype,"rowModel",void 0),__decorate$22([Autowired("rowRenderer")],ChangeDetectionService.prototype,"rowRenderer",void 0),__decorate$22([PostConstruct],ChangeDetectionService.prototype,"init",null),ChangeDetectionService=__decorate$22([Bean("changeDetectionService")],ChangeDetectionService)}(BeanStub),__extends$2o=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$23=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgComponentUtils=function(_super){function AgComponentUtils(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2o(AgComponentUtils,_super),AgComponentUtils.prototype.adaptFunction=function(propertyName,jsCompFunc){var metadata=this.componentMetadataProvider.retrieve(propertyName);return metadata&&metadata.functionAdapter?metadata.functionAdapter(jsCompFunc):null},AgComponentUtils.prototype.adaptCellRendererFunction=function(callback){return function(){function Adapter(){}return Adapter.prototype.refresh=function(params){return!1},Adapter.prototype.getGui=function(){return this.eGui},Adapter.prototype.init=function(params){var callbackResult=callback(params),type=typeof callbackResult;this.eGui="string"!==type&&"number"!==type&&"boolean"!==type?null!=callbackResult?callbackResult:loadTemplate("<span></span>"):loadTemplate("<span>"+callbackResult+"</span>")},Adapter}()},AgComponentUtils.prototype.doesImplementIComponent=function(candidate){return!!candidate&&(candidate.prototype&&"getGui"in candidate.prototype)},__decorate$23([Autowired("componentMetadataProvider")],AgComponentUtils.prototype,"componentMetadataProvider",void 0),AgComponentUtils=__decorate$23([Bean("agComponentUtils")],AgComponentUtils)}(BeanStub),__extends$2p=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$24=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ComponentMetadataProvider=function(_super){function ComponentMetadataProvider(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2p(ComponentMetadataProvider,_super),ComponentMetadataProvider.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},pinnedRowCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}},ComponentMetadataProvider.prototype.retrieve=function(name){return this.componentMetaData[name]},__decorate$24([Autowired("agComponentUtils")],ComponentMetadataProvider.prototype,"agComponentUtils",void 0),__decorate$24([PostConstruct],ComponentMetadataProvider.prototype,"postConstruct",null),ComponentMetadataProvider=__decorate$24([Bean("componentMetadataProvider")],ComponentMetadataProvider)}(BeanStub),__extends$2q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$25=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HARD_CODED_SIZES={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:20,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:56,headerCellMinWidth:48,listItemHeight:32,rowHeight:48,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:32,headerCellMinWidth:24,listItemHeight:24,rowHeight:28,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:240}},SASS_PROPERTY_BUILDER={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},CALCULATED_SIZES={},Environment=function(_super){function Environment(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2q(Environment,_super),Environment.prototype.getSassVariable=function(theme,key){var useTheme="ag-theme-"+(theme.match("material")?"material":theme.match("balham")?"balham":theme.match("alpine")?"alpine":"custom"),defaultValue=HARD_CODED_SIZES[useTheme][key],calculatedValue=0;CALCULATED_SIZES[theme]||(CALCULATED_SIZES[theme]={});var size=CALCULATED_SIZES[theme][key];if(null!=size)return size;if(SASS_PROPERTY_BUILDER[key]){var classList=SASS_PROPERTY_BUILDER[key],div=document.createElement("div");div.classList.add(theme),div.style.position="absolute";var el=classList.reduce((function(prevEl,currentClass){var currentDiv=document.createElement("div");return currentDiv.style.position="static",currentDiv.classList.add(currentClass),prevEl.appendChild(currentDiv),currentDiv}),div);if(document.body){document.body.appendChild(div);var sizeName=-1!==key.toLowerCase().indexOf("height")?"height":"width";calculatedValue=parseInt(window.getComputedStyle(el)[sizeName],10),document.body.removeChild(div)}}return CALCULATED_SIZES[theme][key]=calculatedValue||defaultValue,CALCULATED_SIZES[theme][key]},Environment.prototype.isThemeDark=function(){var theme=this.getTheme().theme;return!!theme&&theme.indexOf("dark")>=0},Environment.prototype.chartMenuPanelWidth=function(){var theme=this.getTheme().themeFamily;return this.getSassVariable(theme,"chartMenuPanelWidth")},Environment.prototype.getTheme=function(){for(var reg=/\bag-(material|(?:theme-([\w\-]*)))\b/,el=this.eGridDiv,themeMatch=null;el&&!(themeMatch=reg.exec(el.className));)el=el.parentElement||void 0;if(!themeMatch)return{};var theme=themeMatch[0];if(void 0===themeMatch[2]){var newTheme_1=theme.replace("ag-","ag-theme-");doOnce((function(){return console.warn("AG Grid: As of v19 old theme are no longer provided. Please replace "+theme+" with "+newTheme_1+".")}),"using-old-theme")}return{theme,el,themeFamily:theme.replace(/-dark$/,"")}},__decorate$25([Autowired("eGridDiv")],Environment.prototype,"eGridDiv",void 0),Environment=__decorate$25([Bean("environment")],Environment)}(BeanStub),__extends$2r=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$26=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$9=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},RowContainerHeightService=function(_super){function RowContainerHeightService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.scrollY=0,_this.uiBodyHeight=0,_this}return __extends$2r(RowContainerHeightService,_super),RowContainerHeightService.prototype.agWire=function(loggerFactory){this.logger=loggerFactory.create("RowContainerHeightService")},RowContainerHeightService.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=getMaxDivHeight(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},RowContainerHeightService.prototype.isStretching=function(){return this.stretching},RowContainerHeightService.prototype.getDivStretchOffset=function(){return this.divStretchOffset},RowContainerHeightService.prototype.updateOffset=function(){if(this.stretching){var newScrollY=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,newBodyHeight=this.getUiBodyHeight();(newScrollY!==this.scrollY||newBodyHeight!==this.uiBodyHeight)&&(this.scrollY=newScrollY,this.uiBodyHeight=newBodyHeight,this.calculateOffset())}},RowContainerHeightService.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var scrollPercent=this.scrollY/this.maxScrollY,divStretchOffset=scrollPercent*this.pixelsToShave;this.logger.log("Div Stretch Offset = "+divStretchOffset+" ("+this.pixelsToShave+" * "+scrollPercent+")"),this.setDivStretchOffset(divStretchOffset)},RowContainerHeightService.prototype.setUiContainerHeight=function(height){height!==this.uiContainerHeight&&(this.uiContainerHeight=height,this.eventService.dispatchEvent({type:Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},RowContainerHeightService.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},RowContainerHeightService.prototype.setDivStretchOffset=function(newOffset){var newOffsetFloor="number"==typeof newOffset?Math.floor(newOffset):null;this.divStretchOffset!==newOffsetFloor&&(this.divStretchOffset=newOffsetFloor,this.eventService.dispatchEvent({type:Events.EVENT_HEIGHT_SCALE_CHANGED}))},RowContainerHeightService.prototype.setModelHeight=function(modelHeight){this.modelHeight=modelHeight,this.stretching=null!=modelHeight&&this.maxDivHeight>0&&modelHeight>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},RowContainerHeightService.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},RowContainerHeightService.prototype.getRealPixelPosition=function(modelPixel){return modelPixel-this.divStretchOffset},RowContainerHeightService.prototype.getUiBodyHeight=function(){var pos=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return pos.bottom-pos.top},RowContainerHeightService.prototype.getScrollPositionForPixel=function(rowTop){if(this.pixelsToShave<=0)return rowTop;var scrollPercent=rowTop/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*scrollPercent},__decorate$26([Autowired("ctrlsService")],RowContainerHeightService.prototype,"ctrlsService",void 0),__decorate$26([__param$9(0,Qualifier("loggerFactory"))],RowContainerHeightService.prototype,"agWire",null),__decorate$26([PostConstruct],RowContainerHeightService.prototype,"postConstruct",null),RowContainerHeightService=__decorate$26([Bean("rowContainerHeightService")],RowContainerHeightService)}(BeanStub),__extends$2s=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$27=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectableService=function(_super){function SelectableService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2s(SelectableService,_super),SelectableService.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.isRowSelectableFunc=this.gridOptionsWrapper.getIsRowSelectableFunc()},SelectableService.prototype.updateSelectableAfterGrouping=function(rowNode){if(this.isRowSelectableFunc){this.recurseDown(rowNode.childrenAfterGroup,(function(node){return node.childrenAfterGroup}))}},SelectableService.prototype.recurseDown=function(children,nextChildrenFunc){var _this=this;children&&children.forEach((function(child){if(child.group){var rowSelectable;if(child.hasChildren()&&_this.recurseDown(nextChildrenFunc(child),nextChildrenFunc),_this.groupSelectsChildren)rowSelectable=exists((nextChildrenFunc(child)||[]).find((function(rowNode){return!0===rowNode.selectable})));else rowSelectable=!!_this.isRowSelectableFunc&&_this.isRowSelectableFunc(child);child.setRowSelectable(rowSelectable)}}))},__decorate$27([PostConstruct],SelectableService.prototype,"init",null),SelectableService=__decorate$27([Bean("selectableService")],SelectableService)}(BeanStub),__extends$2t=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$28=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PaginationComp=function(_super){function PaginationComp(){var _this=_super.call(this)||this;return _this.previousAndFirstButtonsDisabled=!1,_this.nextButtonDisabled=!1,_this.lastButtonDisabled=!1,_this}return __extends$2t(PaginationComp,_super),PaginationComp.prototype.postConstruct=function(){var _this=this,isRtl=this.gridOptionsWrapper.isEnableRtl();this.setTemplate(this.getTemplate()),this.btFirst.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"last":"first",this.gridOptionsWrapper)),this.btPrevious.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"next":"previous",this.gridOptionsWrapper)),this.btNext.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"previous":"next",this.gridOptionsWrapper)),this.btLast.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"first":"last",this.gridOptionsWrapper)),this.gridOptionsWrapper.isPagination()&&!this.gridOptionsWrapper.isSuppressPaginationPanel()?(this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach((function(item){var el=item.el,fn=item.fn;_this.addManagedListener(el,"click",fn),_this.addManagedListener(el,"keydown",(function(e){e.key!==KeyCode.ENTER&&e.key!==KeyCode.SPACE||(e.preventDefault(),fn())}))})),this.onPaginationChanged()):this.setDisplayed(!1)},PaginationComp.prototype.onPaginationChanged=function(){this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels()},PaginationComp.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},PaginationComp.prototype.setCurrentPageLabel=function(){var pagesExist=this.paginationProxy.getTotalPages()>0,currentPage=this.paginationProxy.getCurrentPage(),toDisplay=pagesExist?currentPage+1:0;this.lbCurrent.innerHTML=this.formatNumber(toDisplay)},PaginationComp.prototype.formatNumber=function(value){var userFunc=this.gridOptionsWrapper.getPaginationNumberFormatterFunc();if(userFunc)return userFunc({value});var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc();return formatNumberCommas(value,localeTextFunc("thousandSeparator",","),localeTextFunc("decimalSeparator","."))},PaginationComp.prototype.getTemplate=function(){var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),strPage=localeTextFunc("page","Page"),strTo=localeTextFunc("to","to"),strOf=localeTextFunc("of","of"),strFirst=localeTextFunc("firstPage","First Page"),strPrevious=localeTextFunc("previousPage","Previous Page"),strNext=localeTextFunc("nextPage","Next Page"),strLast=localeTextFunc("lastPage","Last Page"),compId=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'+compId+'">\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-'+compId+'-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+compId+'-to">'+strTo+'</span>\n                    <span id="ag-'+compId+'-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+compId+'-of">'+strOf+'</span>\n                    <span id="ag-'+compId+'-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-paging-button" role="button" aria-label="'+strFirst+'"></div>\n                    <div ref="btPrevious" class="ag-paging-button" role="button" aria-label="'+strPrevious+'"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-'+compId+'-start-page">'+strPage+'</span>\n                        <span id="ag-'+compId+'-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-'+compId+'-of-page">'+strOf+'</span>\n                        <span id="ag-'+compId+'-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-paging-button" role="button" aria-label="'+strNext+'"></div>\n                    <div ref="btLast" class="ag-paging-button" role="button" aria-label="'+strLast+'"></div>\n                </span>\n            </div>'},PaginationComp.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},PaginationComp.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},PaginationComp.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},PaginationComp.prototype.enableOrDisableButtons=function(){var currentPage=this.paginationProxy.getCurrentPage(),maxRowFound=this.paginationProxy.isLastPageFound(),totalPages=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=0===currentPage,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);var zeroPagesToDisplay=this.isZeroPagesToDisplay(),onLastPage=maxRowFound&&currentPage===totalPages-1;this.nextButtonDisabled=onLastPage||zeroPagesToDisplay,this.lastButtonDisabled=!maxRowFound||zeroPagesToDisplay||currentPage===totalPages-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)},PaginationComp.prototype.toggleButtonDisabled=function(button,disabled){setAriaDisabled(button,disabled),button.classList.toggle("ag-disabled",disabled),disabled?button.removeAttribute("tabindex"):button.setAttribute("tabindex","0")},PaginationComp.prototype.updateRowLabels=function(){var startRow,endRow,currentPage=this.paginationProxy.getCurrentPage(),pageSize=this.paginationProxy.getPageSize(),maxRowFound=this.paginationProxy.isLastPageFound(),rowCount=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;this.isZeroPagesToDisplay()?startRow=endRow=0:(endRow=(startRow=pageSize*currentPage+1)+pageSize-1,maxRowFound&&endRow>rowCount&&(endRow=rowCount)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(startRow),this.rowNodeBlockLoader.isLoading()?this.lbLastRowOnPage.innerHTML="?":this.lbLastRowOnPage.innerHTML=this.formatNumber(endRow)},PaginationComp.prototype.isZeroPagesToDisplay=function(){var maxRowFound=this.paginationProxy.isLastPageFound(),totalPages=this.paginationProxy.getTotalPages();return maxRowFound&&0===totalPages},PaginationComp.prototype.setTotalLabels=function(){var lastPageFound=this.paginationProxy.isLastPageFound(),totalPages=this.paginationProxy.getTotalPages(),rowCount=lastPageFound?this.paginationProxy.getMasterRowCount():null;if(1===rowCount){var firstRow=this.paginationProxy.getRow(0);if(firstRow&&firstRow.group&&!(firstRow.groupData||firstRow.aggData))return void this.setTotalLabelsToZero()}if(lastPageFound)this.lbTotal.innerHTML=this.formatNumber(totalPages),this.lbRecordCount.innerHTML=this.formatNumber(rowCount);else{var moreText=this.gridOptionsWrapper.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=moreText,this.lbRecordCount.innerHTML=moreText}},PaginationComp.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)},__decorate$28([Autowired("paginationProxy")],PaginationComp.prototype,"paginationProxy",void 0),__decorate$28([Autowired("rowNodeBlockLoader")],PaginationComp.prototype,"rowNodeBlockLoader",void 0),__decorate$28([RefSelector("btFirst")],PaginationComp.prototype,"btFirst",void 0),__decorate$28([RefSelector("btPrevious")],PaginationComp.prototype,"btPrevious",void 0),__decorate$28([RefSelector("btNext")],PaginationComp.prototype,"btNext",void 0),__decorate$28([RefSelector("btLast")],PaginationComp.prototype,"btLast",void 0),__decorate$28([RefSelector("lbRecordCount")],PaginationComp.prototype,"lbRecordCount",void 0),__decorate$28([RefSelector("lbFirstRowOnPage")],PaginationComp.prototype,"lbFirstRowOnPage",void 0),__decorate$28([RefSelector("lbLastRowOnPage")],PaginationComp.prototype,"lbLastRowOnPage",void 0),__decorate$28([RefSelector("lbCurrent")],PaginationComp.prototype,"lbCurrent",void 0),__decorate$28([RefSelector("lbTotal")],PaginationComp.prototype,"lbTotal",void 0),__decorate$28([PostConstruct],PaginationComp.prototype,"postConstruct",null),PaginationComp}(Component),__extends$2u=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$29=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(LoadingType){LoadingType[LoadingType.Loading=0]="Loading",LoadingType[LoadingType.NoRows=1]="NoRows"}(LoadingType||(LoadingType={}));var OverlayWrapperComponent=function(_super){function OverlayWrapperComponent(){var _this=_super.call(this,OverlayWrapperComponent.TEMPLATE)||this;return _this.inProgress=!1,_this.destroyRequested=!1,_this.manuallyDisplayed=!1,_this}return __extends$2u(OverlayWrapperComponent,_super),OverlayWrapperComponent.prototype.updateLayoutClasses=function(cssClass,params){var overlayWrapperClassList=this.eOverlayWrapper.classList;overlayWrapperClassList.toggle(exports.LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),overlayWrapperClassList.toggle(exports.LayoutCssClasses.NORMAL,params.normal),overlayWrapperClassList.toggle(exports.LayoutCssClasses.PRINT,params.print)},OverlayWrapperComponent.prototype.postConstruct=function(){this.createManagedBean(new LayoutFeature(this)),this.setDisplayed(!1),this.addManagedListener(this.eventService,Events.EVENT_ROW_DATA_CHANGED,this.onRowDataChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_ROW_DATA_UPDATED,this.onRowDataChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsWrapper.isRowModelDefault()&&!this.gridOptionsWrapper.getRowData()&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)},OverlayWrapperComponent.prototype.setWrapperTypeClass=function(loadingType){var overlayWrapperClassList=this.eOverlayWrapper.classList;overlayWrapperClassList.toggle("ag-overlay-loading-wrapper",loadingType===LoadingType.Loading),overlayWrapperClassList.toggle("ag-overlay-no-rows-wrapper",loadingType===LoadingType.NoRows)},OverlayWrapperComponent.prototype.showLoadingOverlay=function(){if(!this.gridOptionsWrapper.isSuppressLoadingOverlay()){var promise=this.userComponentFactory.getLoadingOverlayCompDetails({}).newAgStackInstance();this.showOverlay(promise,LoadingType.Loading)}},OverlayWrapperComponent.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsWrapper.isSuppressNoRowsOverlay()){var promise=this.userComponentFactory.getNoRowsOverlayCompDetails({}).newAgStackInstance();this.showOverlay(promise,LoadingType.NoRows)}},OverlayWrapperComponent.prototype.showOverlay=function(workItem,type){var _this=this;this.inProgress||(this.setWrapperTypeClass(type),this.destroyActiveOverlay(),this.inProgress=!0,workItem&&workItem.then((function(comp){_this.inProgress=!1,_this.eOverlayWrapper.appendChild(comp.getGui()),_this.activeOverlay=comp,_this.destroyRequested&&(_this.destroyRequested=!1,_this.destroyActiveOverlay())})),this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.setDisplayed(!0))},OverlayWrapperComponent.prototype.destroyActiveOverlay=function(){this.inProgress?this.destroyRequested=!0:this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),clearElement(this.eOverlayWrapper))},OverlayWrapperComponent.prototype.hideOverlay=function(){this.manuallyDisplayed=!1,this.destroyActiveOverlay(),this.setDisplayed(!1)},OverlayWrapperComponent.prototype.destroy=function(){this.destroyActiveOverlay(),_super.prototype.destroy.call(this)},OverlayWrapperComponent.prototype.showOrHideOverlay=function(){var isEmpty=this.paginationProxy.isEmpty(),isSuppressNoRowsOverlay=this.gridOptionsWrapper.isSuppressNoRowsOverlay();isEmpty&&!isSuppressNoRowsOverlay?this.showNoRowsOverlay():this.hideOverlay()},OverlayWrapperComponent.prototype.onRowDataChanged=function(){this.showOrHideOverlay()},OverlayWrapperComponent.prototype.onNewColumnsLoaded=function(){!this.columnModel.isReady()||this.paginationProxy.isEmpty()||this.manuallyDisplayed||this.hideOverlay()},OverlayWrapperComponent.TEMPLATE='\n        <div class="ag-overlay" aria-hidden="true">\n            <div class="ag-overlay-panel">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>\n            </div>\n        </div>',__decorate$29([Autowired("userComponentFactory")],OverlayWrapperComponent.prototype,"userComponentFactory",void 0),__decorate$29([Autowired("paginationProxy")],OverlayWrapperComponent.prototype,"paginationProxy",void 0),__decorate$29([Autowired("gridApi")],OverlayWrapperComponent.prototype,"gridApi",void 0),__decorate$29([Autowired("columnModel")],OverlayWrapperComponent.prototype,"columnModel",void 0),__decorate$29([RefSelector("eOverlayWrapper")],OverlayWrapperComponent.prototype,"eOverlayWrapper",void 0),__decorate$29([PostConstruct],OverlayWrapperComponent.prototype,"postConstruct",null),OverlayWrapperComponent}(Component),__extends$2v=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2a=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowPositionUtils=function(_super){function RowPositionUtils(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2v(RowPositionUtils,_super),RowPositionUtils.prototype.getFirstRow=function(){var rowPinned,rowIndex=0;return this.pinnedRowModel.getPinnedTopRowCount()?rowPinned=Constants.PINNED_TOP:this.rowModel.getRowCount()?(rowPinned=null,rowIndex=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(rowPinned=Constants.PINNED_BOTTOM),void 0===rowPinned?null:{rowIndex,rowPinned}},RowPositionUtils.prototype.getLastRow=function(){var rowIndex,rowPinned=null,pinnedBottomCount=this.pinnedRowModel.getPinnedBottomRowCount(),pinnedTopCount=this.pinnedRowModel.getPinnedTopRowCount();return pinnedBottomCount?(rowPinned=Constants.PINNED_BOTTOM,rowIndex=pinnedBottomCount-1):this.rowModel.getRowCount()?(rowPinned=null,rowIndex=this.paginationProxy.getPageLastRow()):pinnedTopCount&&(rowPinned=Constants.PINNED_TOP,rowIndex=pinnedTopCount-1),void 0===rowIndex?null:{rowIndex,rowPinned}},RowPositionUtils.prototype.getRowNode=function(gridRow){switch(gridRow.rowPinned){case Constants.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];case Constants.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];default:return this.rowModel.getRow(gridRow.rowIndex)}},RowPositionUtils.prototype.sameRow=function(rowA,rowB){return!rowA&&!rowB||!(rowA&&!rowB||!rowA&&rowB)&&(rowA.rowIndex===rowB.rowIndex&&rowA.rowPinned==rowB.rowPinned)},RowPositionUtils.prototype.before=function(rowA,rowB){switch(rowA.rowPinned){case Constants.PINNED_TOP:if(rowB.rowPinned!==Constants.PINNED_TOP)return!0;break;case Constants.PINNED_BOTTOM:if(rowB.rowPinned!==Constants.PINNED_BOTTOM)return!1;break;default:if(exists(rowB.rowPinned))return rowB.rowPinned!==Constants.PINNED_TOP}return rowA.rowIndex<rowB.rowIndex},__decorate$2a([Autowired("rowModel")],RowPositionUtils.prototype,"rowModel",void 0),__decorate$2a([Autowired("pinnedRowModel")],RowPositionUtils.prototype,"pinnedRowModel",void 0),__decorate$2a([Autowired("paginationProxy")],RowPositionUtils.prototype,"paginationProxy",void 0),RowPositionUtils=__decorate$2a([Bean("rowPositionUtils")],RowPositionUtils)}(BeanStub),__extends$2w=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2b=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CellPositionUtils=function(_super){function CellPositionUtils(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2w(CellPositionUtils,_super),CellPositionUtils.prototype.createId=function(cellPosition){var rowIndex=cellPosition.rowIndex,rowPinned=cellPosition.rowPinned,column=cellPosition.column;return this.createIdFromValues(rowIndex,column,rowPinned)},CellPositionUtils.prototype.createIdFromValues=function(rowIndex,column,rowPinned){return rowIndex+"."+(null==rowPinned?"null":rowPinned)+"."+column.getId()},CellPositionUtils.prototype.equals=function(cellA,cellB){var colsMatch=cellA.column===cellB.column,floatingMatch=cellA.rowPinned===cellB.rowPinned,indexMatch=cellA.rowIndex===cellB.rowIndex;return colsMatch&&floatingMatch&&indexMatch},CellPositionUtils=__decorate$2b([Bean("cellPositionUtils")],CellPositionUtils)}(BeanStub),__extends$2x=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),UndoRedoAction=function UndoRedoAction(cellValueChanges){this.cellValueChanges=cellValueChanges},FillUndoRedoAction=function(_super){function FillUndoRedoAction(cellValueChanges,initialRange,finalRange){var _this=_super.call(this,cellValueChanges)||this;return _this.initialRange=initialRange,_this.finalRange=finalRange,_this}return __extends$2x(FillUndoRedoAction,_super),FillUndoRedoAction}(UndoRedoAction),UndoRedoStack=function(){function UndoRedoStack(maxStackSize){this.actionStack=[],this.maxStackSize=maxStackSize||UndoRedoStack.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return UndoRedoStack.prototype.pop=function(){return this.actionStack.pop()},UndoRedoStack.prototype.push=function(item){item.cellValueChanges&&item.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(item))},UndoRedoStack.prototype.clear=function(){this.actionStack=[]},UndoRedoStack.prototype.getCurrentStackSize=function(){return this.actionStack.length},UndoRedoStack.DEFAULT_STACK_SIZE=10,UndoRedoStack}(),__extends$2y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2c=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},UndoRedoService=function(_super){function UndoRedoService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.cellValueChanges=[],_this.activeCellEdit=null,_this.activeRowEdit=null,_this.isPasting=!1,_this.isFilling=!1,_this.onCellValueChanged=function(event){var eventCell={column:event.column,rowIndex:event.rowIndex,rowPinned:event.rowPinned},isCellEditing=null!==_this.activeCellEdit&&_this.cellPositionUtils.equals(_this.activeCellEdit,eventCell),isRowEditing=null!==_this.activeRowEdit&&_this.rowPositionUtils.sameRow(_this.activeRowEdit,eventCell);if(isCellEditing||isRowEditing||_this.isPasting||_this.isFilling){var rowPinned=event.rowPinned,rowIndex=event.rowIndex,column=event.column,oldValue=event.oldValue,value=event.value,cellValueChange={rowPinned,rowIndex,columnId:column.getColId(),newValue:value,oldValue};_this.cellValueChanges.push(cellValueChange)}},_this.clearStacks=function(){_this.undoStack.clear(),_this.redoStack.clear()},_this}return __extends$2y(UndoRedoService,_super),UndoRedoService.prototype.init=function(){if(this.gridOptionsWrapper.isUndoRedoCellEditing()){var undoRedoLimit=this.gridOptionsWrapper.getUndoRedoCellEditingLimit();undoRedoLimit<=0||(this.undoStack=new UndoRedoStack(undoRedoLimit),this.redoStack=new UndoRedoStack(undoRedoLimit),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addManagedListener(this.eventService,Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_ROW_DRAG_END,this.clearStacks))}},UndoRedoService.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},UndoRedoService.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},UndoRedoService.prototype.undo=function(){if(this.undoStack){var undoAction=this.undoStack.pop();undoAction&&undoAction.cellValueChanges&&(this.processAction(undoAction,(function(cellValueChange){return cellValueChange.oldValue})),undoAction instanceof FillUndoRedoAction?this.processRangeAndCellFocus(undoAction.cellValueChanges,undoAction.initialRange):this.processRangeAndCellFocus(undoAction.cellValueChanges),this.redoStack.push(undoAction))}},UndoRedoService.prototype.redo=function(){if(this.redoStack){var redoAction=this.redoStack.pop();redoAction&&redoAction.cellValueChanges&&(this.processAction(redoAction,(function(cellValueChange){return cellValueChange.newValue})),redoAction instanceof FillUndoRedoAction?this.processRangeAndCellFocus(redoAction.cellValueChanges,redoAction.finalRange):this.processRangeAndCellFocus(redoAction.cellValueChanges),this.undoStack.push(redoAction))}},UndoRedoService.prototype.processAction=function(action,valueExtractor){var _this=this;action.cellValueChanges.forEach((function(cellValueChange){var rowIndex=cellValueChange.rowIndex,rowPinned=cellValueChange.rowPinned,columnId=cellValueChange.columnId,rowPosition={rowIndex,rowPinned},currentRow=_this.getRowNode(rowPosition);currentRow.displayed&&currentRow.setDataValue(columnId,valueExtractor(cellValueChange))}))},UndoRedoService.prototype.processRangeAndCellFocus=function(cellValueChanges,range){var lastFocusedCell;if(range){var startRow=range.startRow,endRow=range.endRow;lastFocusedCell={rowPinned:startRow.rowPinned,rowIndex:startRow.rowIndex,columnId:range.startColumn.getColId()},this.setLastFocusedCell(lastFocusedCell);var cellRangeParams={rowStartIndex:startRow.rowIndex,rowStartPinned:startRow.rowPinned,rowEndIndex:endRow.rowIndex,rowEndPinned:endRow.rowPinned,columnStart:range.startColumn,columns:range.columns};this.gridApi.addCellRange(cellRangeParams)}else{var cellValueChange=cellValueChanges[0],rowPosition={rowIndex:cellValueChange.rowIndex,rowPinned:cellValueChange.rowPinned},row=this.getRowNode(rowPosition);lastFocusedCell={rowPinned:cellValueChange.rowPinned,rowIndex:row.rowIndex,columnId:cellValueChange.columnId},this.setLastFocusedCell(lastFocusedCell)}},UndoRedoService.prototype.setLastFocusedCell=function(lastFocusedCell){var rowIndex=lastFocusedCell.rowIndex,columnId=lastFocusedCell.columnId,rowPinned=lastFocusedCell.rowPinned;this.gridApi.ensureIndexVisible(rowIndex),this.gridApi.ensureColumnVisible(columnId),ModuleRegistry.isRegistered(exports.ModuleNames.RangeSelectionModule)&&this.gridApi.clearRangeSelection(),this.focusService.setFocusedCell(rowIndex,columnId,rowPinned,!0)},UndoRedoService.prototype.addRowEditingListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_ROW_EDITING_STARTED,(function(e){_this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}})),this.addManagedListener(this.eventService,Events.EVENT_ROW_EDITING_STOPPED,(function(){var action=new UndoRedoAction(_this.cellValueChanges);_this.pushActionsToUndoStack(action),_this.activeRowEdit=null}))},UndoRedoService.prototype.addCellEditingListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_CELL_EDITING_STARTED,(function(e){_this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}})),this.addManagedListener(this.eventService,Events.EVENT_CELL_EDITING_STOPPED,(function(){if(_this.activeCellEdit=null,!_this.activeRowEdit&&!_this.isPasting&&!_this.isFilling){var action=new UndoRedoAction(_this.cellValueChanges);_this.pushActionsToUndoStack(action)}}))},UndoRedoService.prototype.addPasteListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_PASTE_START,(function(){_this.isPasting=!0})),this.addManagedListener(this.eventService,Events.EVENT_PASTE_END,(function(){var action=new UndoRedoAction(_this.cellValueChanges);_this.pushActionsToUndoStack(action),_this.isPasting=!1}))},UndoRedoService.prototype.addFillListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_FILL_START,(function(){_this.isFilling=!0})),this.addManagedListener(this.eventService,Events.EVENT_FILL_END,(function(event){var action=new FillUndoRedoAction(_this.cellValueChanges,event.initialRange,event.finalRange);_this.pushActionsToUndoStack(action),_this.isFilling=!1}))},UndoRedoService.prototype.pushActionsToUndoStack=function(action){this.undoStack.push(action),this.cellValueChanges=[],this.redoStack.clear()},UndoRedoService.prototype.getRowNode=function(gridRow){switch(gridRow.rowPinned){case Constants.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];case Constants.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];default:return this.rowModel.getRow(gridRow.rowIndex)}},__decorate$2c([Autowired("focusService")],UndoRedoService.prototype,"focusService",void 0),__decorate$2c([Autowired("gridApi")],UndoRedoService.prototype,"gridApi",void 0),__decorate$2c([Autowired("rowModel")],UndoRedoService.prototype,"rowModel",void 0),__decorate$2c([Autowired("pinnedRowModel")],UndoRedoService.prototype,"pinnedRowModel",void 0),__decorate$2c([Autowired("cellPositionUtils")],UndoRedoService.prototype,"cellPositionUtils",void 0),__decorate$2c([Autowired("rowPositionUtils")],UndoRedoService.prototype,"rowPositionUtils",void 0),__decorate$2c([PostConstruct],UndoRedoService.prototype,"init",null),UndoRedoService=__decorate$2c([Bean("undoRedoService")],UndoRedoService)}(BeanStub),__extends$2z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2d=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderPositionUtils=function(_super){function HeaderPositionUtils(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2z(HeaderPositionUtils,_super),HeaderPositionUtils.prototype.findHeader=function(focusedHeader,direction){var nextColumn,getGroupMethod,getColMethod;if(focusedHeader.column instanceof ColumnGroup?(getGroupMethod="getDisplayedGroup"+direction,nextColumn=this.columnModel[getGroupMethod](focusedHeader.column)):(getColMethod="getDisplayedCol"+direction,nextColumn=this.columnModel[getColMethod](focusedHeader.column)),nextColumn)return{column:nextColumn,headerRowIndex:focusedHeader.headerRowIndex}},HeaderPositionUtils.prototype.findColAtEdgeForHeaderRow=function(level,position){var displayedColumns=this.columnModel.getAllDisplayedColumns(),column=displayedColumns["start"===position?0:displayedColumns.length-1];if(column){var type=this.ctrlsService.getHeaderRowContainerCtrl(column.getPinned()).getRowType(level);return type==exports.HeaderRowType.COLUMN_GROUP?{headerRowIndex:level,column:this.columnModel.getColumnGroupAtLevel(column,level)}:{headerRowIndex:null==type?-1:level,column}}},__decorate$2d([Autowired("columnModel")],HeaderPositionUtils.prototype,"columnModel",void 0),__decorate$2d([Autowired("ctrlsService")],HeaderPositionUtils.prototype,"ctrlsService",void 0),HeaderPositionUtils=__decorate$2d([Bean("headerPositionUtils")],HeaderPositionUtils)}(BeanStub),__decorate$2e=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnDefFactory=function(){function ColumnDefFactory(){}return ColumnDefFactory.prototype.buildColumnDefs=function(cols,rowGroupColumns,pivotColumns){var _this=this,res=[],colGroupDefs={};return cols.forEach((function(col){for(var addToResult=!0,childDef=_this.createDefFromColumn(col,rowGroupColumns,pivotColumns),pointer=col.getOriginalParent();pointer;){var parentDef=null;if(pointer.isPadding())pointer=pointer.getOriginalParent();else{var existingParentDef=colGroupDefs[pointer.getGroupId()];if(existingParentDef){existingParentDef.children.push(childDef),addToResult=!1;break}(parentDef=_this.createDefFromGroup(pointer))&&(parentDef.children=[childDef],colGroupDefs[parentDef.groupId]=parentDef,childDef=parentDef,pointer=pointer.getOriginalParent())}}addToResult&&res.push(childDef)})),res},ColumnDefFactory.prototype.createDefFromGroup=function(group){var defCloned=deepCloneDefinition(group.getColGroupDef(),["children"]);return defCloned&&(defCloned.groupId=group.getGroupId()),defCloned},ColumnDefFactory.prototype.createDefFromColumn=function(col,rowGroupColumns,pivotColumns){var colDefCloned=deepCloneDefinition(col.getColDef());return colDefCloned.colId=col.getColId(),colDefCloned.width=col.getActualWidth(),colDefCloned.rowGroup=col.isRowGroupActive(),colDefCloned.rowGroupIndex=col.isRowGroupActive()?rowGroupColumns.indexOf(col):null,colDefCloned.pivot=col.isPivotActive(),colDefCloned.pivotIndex=col.isPivotActive()?pivotColumns.indexOf(col):null,colDefCloned.aggFunc=col.isValueActive()?col.getAggFunc():null,colDefCloned.hide=!col.isVisible()||void 0,colDefCloned.pinned=col.isPinned()?col.getPinned():null,colDefCloned.sort=col.getSort()?col.getSort():null,colDefCloned.sortIndex=null!=col.getSortIndex()?col.getSortIndex():null,colDefCloned},ColumnDefFactory=__decorate$2e([Bean("columnDefFactory")],ColumnDefFactory)}(),__decorate$2f=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowCssClassCalculator=function(){function RowCssClassCalculator(){}return RowCssClassCalculator.prototype.getInitialRowClasses=function(params){var classes=[];return exists(params.extraCssClass)&&classes.push(params.extraCssClass),classes.push("ag-row"),classes.push(params.rowFocused?"ag-row-focus":"ag-row-no-focus"),params.fadeRowIn&&classes.push("ag-opacity-zero"),classes.push(params.rowIsEven?"ag-row-even":"ag-row-odd"),params.rowNode.isRowPinned()&&classes.push("ag-row-pinned"),params.rowNode.isSelected()&&classes.push("ag-row-selected"),params.rowNode.footer&&classes.push("ag-row-footer"),classes.push("ag-row-level-"+params.rowLevel),params.rowNode.stub&&classes.push("ag-row-loading"),params.fullWidthRow&&classes.push("ag-full-width-row"),params.expandable&&(classes.push("ag-row-group"),classes.push(params.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),params.rowNode.dragging&&classes.push("ag-row-dragging"),pushAll(classes,this.processClassesFromGridOptions(params.rowNode)),pushAll(classes,this.preProcessRowClassRules(params.rowNode)),classes.push(params.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),params.firstRowOnPage&&classes.push("ag-row-first"),params.lastRowOnPage&&classes.push("ag-row-last"),params.fullWidthRow&&(params.pinned===Constants.PINNED_LEFT&&classes.push("ag-cell-last-left-pinned"),params.pinned===Constants.PINNED_RIGHT&&classes.push("ag-cell-first-right-pinned")),classes},RowCssClassCalculator.prototype.processClassesFromGridOptions=function(rowNode){var res=[],process=function(rowCls){"string"==typeof rowCls?res.push(rowCls):Array.isArray(rowCls)&&rowCls.forEach((function(e){return res.push(e)}))},rowClass=this.gridOptionsWrapper.getRowClass();if(rowClass){if("function"==typeof rowClass)return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];process(rowClass)}var rowClassFunc=this.gridOptionsWrapper.getRowClassFunc();rowClassFunc&&process(rowClassFunc({data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex}));return res},RowCssClassCalculator.prototype.preProcessRowClassRules=function(rowNode){var res=[];return this.processRowClassRules(rowNode,(function(className){res.push(className)}),(function(className){})),res},RowCssClassCalculator.prototype.processRowClassRules=function(rowNode,onApplicableClass,onNotApplicableClass){var rowClassParams={data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};this.stylingService.processClassRules(this.gridOptionsWrapper.rowClassRules(),rowClassParams,onApplicableClass,onNotApplicableClass)},RowCssClassCalculator.prototype.calculateRowLevel=function(rowNode){return rowNode.group?rowNode.level:rowNode.parent?rowNode.parent.level+1:0},__decorate$2f([Autowired("stylingService")],RowCssClassCalculator.prototype,"stylingService",void 0),__decorate$2f([Autowired("gridOptionsWrapper")],RowCssClassCalculator.prototype,"gridOptionsWrapper",void 0),RowCssClassCalculator=__decorate$2f([Bean("rowCssClassCalculator")],RowCssClassCalculator)}(),__decorate$2g=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowNodeSorter=function(){function RowNodeSorter(){}return RowNodeSorter.prototype.doFullSort=function(rowNodes,sortOptions){var sortedRowNodes=rowNodes.map((function(rowNode,pos){return{currentPos:pos,rowNode}}));return sortedRowNodes.sort(this.compareRowNodes.bind(this,sortOptions)),sortedRowNodes.map((function(item){return item.rowNode}))},RowNodeSorter.prototype.compareRowNodes=function(sortOptions,sortedNodeA,sortedNodeB){for(var nodeA=sortedNodeA.rowNode,nodeB=sortedNodeB.rowNode,i=0,len=sortOptions.length;i<len;i++){var sortOption=sortOptions[i],isInverted=sortOption.sort===Constants.SORT_DESC,valueA=this.getValue(nodeA,sortOption.column),valueB=this.getValue(nodeB,sortOption.column),comparatorResult=void 0,providedComparator=this.getComparator(sortOption,nodeA);if(comparatorResult=providedComparator?providedComparator(valueA,valueB,nodeA,nodeB,isInverted):_.defaultComparator(valueA,valueB,this.gridOptionsWrapper.isAccentedSort()),!isNaN(comparatorResult)&&0!==comparatorResult)return sortOption.sort===Constants.SORT_ASC?comparatorResult:-1*comparatorResult}return sortedNodeA.currentPos-sortedNodeB.currentPos},RowNodeSorter.prototype.getComparator=function(sortOption,rowNode){var column=sortOption.column,comparatorOnCol=column.getColDef().comparator;if(null!=comparatorOnCol)return comparatorOnCol;if(rowNode.rowGroupColumn)return rowNode.rowGroupColumn.getColDef().comparator;if(column.getColDef().showRowGroup){var groupLeafField=!rowNode.group&&column.getColDef().field;if(groupLeafField){var primaryColumn=this.columnModel.getPrimaryColumn(groupLeafField);if(primaryColumn)return primaryColumn.getColDef().comparator}}},RowNodeSorter.prototype.getValue=function(nodeA,column){return this.valueService.getValue(column,nodeA,!1,!1)},__decorate$2g([Autowired("gridOptionsWrapper")],RowNodeSorter.prototype,"gridOptionsWrapper",void 0),__decorate$2g([Autowired("valueService")],RowNodeSorter.prototype,"valueService",void 0),__decorate$2g([Autowired("columnModel")],RowNodeSorter.prototype,"columnModel",void 0),RowNodeSorter=__decorate$2g([Bean("rowNodeSorter")],RowNodeSorter)}(),__extends$2A=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2h=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CtrlsService=function(_super){function CtrlsService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.ready=!1,_this.readyCallbacks=[],_this}var CtrlsService_1;return __extends$2A(CtrlsService,_super),CtrlsService_1=CtrlsService,CtrlsService.prototype.checkReady=function(){if(this.ready=null!=this.gridCtrl&&null!=this.gridBodyCtrl&&null!=this.centerRowContainerCtrl&&null!=this.leftRowContainerCtrl&&null!=this.rightRowContainerCtrl&&null!=this.bottomCenterRowContainerCtrl&&null!=this.bottomLeftRowContainerCtrl&&null!=this.bottomRightRowContainerCtrl&&null!=this.topCenterRowContainerCtrl&&null!=this.topLeftRowContainerCtrl&&null!=this.topRightRowContainerCtrl&&null!=this.centerHeaderRowContainerCtrl&&null!=this.leftHeaderRowContainerCtrl&&null!=this.rightHeaderRowContainerCtrl&&null!=this.fakeHScrollCtrl&&null!=this.gridHeaderCtrl,this.ready){var p_1=this.createReadyParams();this.readyCallbacks.forEach((function(c){return c(p_1)})),this.readyCallbacks.length=0}},CtrlsService.prototype.whenReady=function(callback){this.ready?callback(this.createReadyParams()):this.readyCallbacks.push(callback)},CtrlsService.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollCtrl:this.fakeHScrollCtrl,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},CtrlsService.prototype.registerFakeHScrollCtrl=function(ctrl){this.fakeHScrollCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerGridHeaderCtrl=function(gridHeaderCtrl){this.gridHeaderCtrl=gridHeaderCtrl,this.checkReady()},CtrlsService.prototype.registerCenterRowContainerCtrl=function(ctrl){this.centerRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerLeftRowContainerCtrl=function(ctrl){this.leftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerRightRowContainerCtrl=function(ctrl){this.rightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerTopCenterRowContainerCtrl=function(ctrl){this.topCenterRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerTopLeftRowContainerCon=function(ctrl){this.topLeftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerTopRightRowContainerCtrl=function(ctrl){this.topRightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerBottomCenterRowContainerCtrl=function(ctrl){this.bottomCenterRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerBottomLeftRowContainerCtrl=function(ctrl){this.bottomLeftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerBottomRightRowContainerCtrl=function(ctrl){this.bottomRightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerHeaderContainer=function(ctrl,pinned){switch(pinned){case Constants.PINNED_LEFT:this.leftHeaderRowContainerCtrl=ctrl;break;case Constants.PINNED_RIGHT:this.rightHeaderRowContainerCtrl=ctrl;break;default:this.centerHeaderRowContainerCtrl=ctrl}this.checkReady()},CtrlsService.prototype.registerGridBodyCtrl=function(ctrl){this.gridBodyCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerGridCtrl=function(ctrl){this.gridCtrl=ctrl,this.checkReady()},CtrlsService.prototype.getFakeHScrollCtrl=function(){return this.fakeHScrollCtrl},CtrlsService.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},CtrlsService.prototype.getGridCtrl=function(){return this.gridCtrl},CtrlsService.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},CtrlsService.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},CtrlsService.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},CtrlsService.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},CtrlsService.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},CtrlsService.prototype.getHeaderRowContainerCtrl=function(pinned){switch(pinned){case Constants.PINNED_LEFT:return this.leftHeaderRowContainerCtrl;case Constants.PINNED_RIGHT:return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}},CtrlsService.NAME="ctrlsService",CtrlsService=CtrlsService_1=__decorate$2h([Bean(CtrlsService_1.NAME)],CtrlsService)}(BeanStub),__extends$2B=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2i=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CtrlsFactory=function(_super){function CtrlsFactory(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.registry={},_this}return __extends$2B(CtrlsFactory,_super),CtrlsFactory.prototype.register=function(meta){this.registry[meta.controllerName]=meta.controllerClass},CtrlsFactory.prototype.getInstance=function(name){var ControllerClass=this.registry[name];if(null!=ControllerClass)return new ControllerClass},CtrlsFactory=__decorate$2i([Bean("ctrlsFactory")],CtrlsFactory)}(BeanStub),__extends$2C=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2j=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FakeHScrollCtrl=function(_super){function FakeHScrollCtrl(){return _super.call(this)||this}return __extends$2C(FakeHScrollCtrl,_super),FakeHScrollCtrl.prototype.setComp=function(view,eGui,eViewport,eContainer){this.view=view,this.eViewport=eViewport,this.eContainer=eContainer,this.eGui=eGui,this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged();var spacerWidthsListener=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,spacerWidthsListener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,spacerWidthsListener),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_DOM_LAYOUT,spacerWidthsListener),this.setFakeHScrollSpacerWidths(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()),this.ctrlsService.registerFakeHScrollCtrl(this)},FakeHScrollCtrl.prototype.addActiveListenerToggles=function(){var _this=this;["mouseenter","mousedown","touchstart"].forEach((function(eventName){return _this.addManagedListener(_this.eGui,eventName,(function(){return _this.view.addOrRemoveCssClass("ag-scrollbar-active",!0)}))})),["mouseleave","mouseup","touchend"].forEach((function(eventName){return _this.addManagedListener(_this.eGui,eventName,(function(){return _this.view.addOrRemoveCssClass("ag-scrollbar-active",!1)}))}))},FakeHScrollCtrl.prototype.postConstruct=function(){this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.invisibleScrollbar=isInvisibleScrollbar()},FakeHScrollCtrl.prototype.onScrollVisibilityChanged=function(){this.setScrollVisible(),this.setFakeHScrollSpacerWidths()},FakeHScrollCtrl.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,(function(params){"horizontal"===params.direction&&_this.view.addOrRemoveCssClass("ag-scrollbar-scrolling",!0)})),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL_END,(function(){return _this.view.addOrRemoveCssClass("ag-scrollbar-scrolling",!1)}))},FakeHScrollCtrl.prototype.setFakeHScrollSpacerWidths=function(){var vScrollShowing=this.scrollVisibleService.isVerticalScrollShowing(),rightSpacing=this.columnModel.getDisplayedColumnsRightWidth(),scrollOnRight=!this.enableRtl&&vScrollShowing,scrollbarWidth=this.gridOptionsWrapper.getScrollbarWidth();scrollOnRight&&(rightSpacing+=scrollbarWidth),this.view.setRightSpacerFixedWidth(rightSpacing),this.view.includeRightSpacerScrollerCss("ag-scroller-corner",rightSpacing<=scrollbarWidth);var leftSpacing=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&vScrollShowing&&(leftSpacing+=scrollbarWidth),this.view.setLeftSpacerFixedWidth(leftSpacing),this.view.includeLeftSpacerScrollerCss("ag-scroller-corner",leftSpacing<=scrollbarWidth)},FakeHScrollCtrl.prototype.setScrollVisible=function(){var hScrollShowing=this.scrollVisibleService.isHorizontalScrollShowing(),invisibleScrollbar=this.invisibleScrollbar,isSuppressHorizontalScroll=this.gridOptionsWrapper.isSuppressHorizontalScroll(),scrollbarWidth=hScrollShowing&&this.gridOptionsWrapper.getScrollbarWidth()||0,scrollContainerSize=isSuppressHorizontalScroll?0:0===scrollbarWidth&&invisibleScrollbar?15:scrollbarWidth;this.view.addOrRemoveCssClass("ag-scrollbar-invisible",invisibleScrollbar),this.view.setHeight(scrollContainerSize),this.view.setViewportHeight(scrollContainerSize),this.view.setContainerHeight(scrollContainerSize)},FakeHScrollCtrl.prototype.getViewport=function(){return this.eViewport},FakeHScrollCtrl.prototype.getContainer=function(){return this.eContainer},__decorate$2j([Autowired("scrollVisibleService")],FakeHScrollCtrl.prototype,"scrollVisibleService",void 0),__decorate$2j([Autowired("columnModel")],FakeHScrollCtrl.prototype,"columnModel",void 0),__decorate$2j([Autowired("ctrlsService")],FakeHScrollCtrl.prototype,"ctrlsService",void 0),__decorate$2j([PostConstruct],FakeHScrollCtrl.prototype,"postConstruct",null),FakeHScrollCtrl}(BeanStub),__extends$2D=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2k=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FakeHScrollComp=function(_super){function FakeHScrollComp(){return _super.call(this,FakeHScrollComp.TEMPLATE)||this}return __extends$2D(FakeHScrollComp,_super),FakeHScrollComp.prototype.postConstruct=function(){var _this=this,compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setHeight:function(height){return setFixedHeight(_this.getGui(),height)},setContainerHeight:function(height){return setFixedHeight(_this.eContainer,height)},setViewportHeight:function(height){return setFixedHeight(_this.eViewport,height)},setRightSpacerFixedWidth:function(width){return setFixedWidth(_this.eRightSpacer,width)},setLeftSpacerFixedWidth:function(width){return setFixedWidth(_this.eLeftSpacer,width)},includeLeftSpacerScrollerCss:function(cssClass,include){return _this.eLeftSpacer.classList.toggle(cssClass,include)},includeRightSpacerScrollerCss:function(cssClass,include){return _this.eRightSpacer.classList.toggle(cssClass,include)}};this.createManagedBean(new FakeHScrollCtrl).setComp(compProxy,this.getGui(),this.eViewport,this.eContainer),this.createManagedBean(new CenterWidthFeature((function(width){return _this.eContainer.style.width=width+"px"})))},FakeHScrollComp.TEMPLATE='<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>',__decorate$2k([RefSelector("eLeftSpacer")],FakeHScrollComp.prototype,"eLeftSpacer",void 0),__decorate$2k([RefSelector("eRightSpacer")],FakeHScrollComp.prototype,"eRightSpacer",void 0),__decorate$2k([RefSelector("eViewport")],FakeHScrollComp.prototype,"eViewport",void 0),__decorate$2k([RefSelector("eContainer")],FakeHScrollComp.prototype,"eContainer",void 0),__decorate$2k([PostConstruct],FakeHScrollComp.prototype,"postConstruct",null),FakeHScrollComp}(Component),__extends$2E=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2l=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PinnedWidthService=function(_super){function PinnedWidthService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2E(PinnedWidthService,_super),PinnedWidthService.prototype.postConstruct=function(){var listener=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,listener),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_DOM_LAYOUT,listener)},PinnedWidthService.prototype.checkContainerWidths=function(){var printLayout=this.gridOptionsWrapper.getDomLayout()===Constants.DOM_LAYOUT_PRINT,newLeftWidth=printLayout?0:this.columnModel.getDisplayedColumnsLeftWidth(),newRightWidth=printLayout?0:this.columnModel.getDisplayedColumnsRightWidth();newLeftWidth!=this.leftWidth&&(this.leftWidth=newLeftWidth,this.eventService.dispatchEvent({type:Events.EVENT_LEFT_PINNED_WIDTH_CHANGED})),newRightWidth!=this.rightWidth&&(this.rightWidth=newRightWidth,this.eventService.dispatchEvent({type:Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},PinnedWidthService.prototype.getPinnedRightWidth=function(){return this.rightWidth},PinnedWidthService.prototype.getPinnedLeftWidth=function(){return this.leftWidth},__decorate$2l([Autowired("columnModel")],PinnedWidthService.prototype,"columnModel",void 0),__decorate$2l([PostConstruct],PinnedWidthService.prototype,"postConstruct",null),PinnedWidthService=__decorate$2l([Bean("pinnedWidthService")],PinnedWidthService)}(BeanStub),__extends$2F=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2m=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowNodeEventThrottle=function(_super){function RowNodeEventThrottle(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.events=[],_this}return __extends$2F(RowNodeEventThrottle,_super),RowNodeEventThrottle.prototype.postConstruct=function(){this.rowModel.getType()==Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},RowNodeEventThrottle.prototype.dispatchExpanded=function(event){var _this=this;if(null!=this.clientSideRowModel){this.events.push(event);null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce((function(){_this.clientSideRowModel&&_this.clientSideRowModel.onRowGroupOpened(),_this.events.forEach((function(e){return _this.eventService.dispatchEvent(e)})),_this.events=[]}))),this.dispatchExpandedDebounced()}else this.eventService.dispatchEvent(event)},__decorate$2m([Autowired("animationFrameService")],RowNodeEventThrottle.prototype,"animationFrameService",void 0),__decorate$2m([Autowired("rowModel")],RowNodeEventThrottle.prototype,"rowModel",void 0),__decorate$2m([PostConstruct],RowNodeEventThrottle.prototype,"postConstruct",null),RowNodeEventThrottle=__decorate$2m([Bean("rowNodeEventThrottle")],RowNodeEventThrottle)}(BeanStub),__read$h=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$d=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$h(arguments[i]));return ar},Grid=function(){function Grid(eGridDiv,gridOptions,params){gridOptions?(this.gridOptions=gridOptions,(new GridCoreCreator).create(eGridDiv,gridOptions,(function(context){var gridComp=new GridComp(eGridDiv);context.createBean(gridComp)}),void 0,params)):console.error("AG Grid: no gridOptions provided to the grid")}return Grid.prototype.destroy=function(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()},Grid}(),GridCoreCreator=function(){function GridCoreCreator(){}return GridCoreCreator.prototype.create=function(eGridDiv,gridOptions,createUi,acceptChanges,params){var _this=this,debug=!!gridOptions.debug,registeredModules=this.getRegisteredModules(params),beanClasses=this.createBeansList(gridOptions.rowModelType,registeredModules),providedBeanInstances=this.createProvidedBeans(eGridDiv,gridOptions,params);if(beanClasses){var contextParams={providedBeanInstances,beanClasses,debug},logger=new Logger("AG Grid",(function(){return gridOptions.debug})),contextLogger=new Logger("Context",(function(){return contextParams.debug})),context=new Context(contextParams,contextLogger),beans=context.getBean("beans");this.registerModuleUserComponents(beans,registeredModules),this.registerStackComponents(beans,registeredModules),this.registerControllers(beans,registeredModules),createUi(context),beans.ctrlsService.whenReady((function(){_this.setColumnsAndData(beans),_this.dispatchGridReadyEvent(beans,gridOptions);var isEnterprise=ModuleRegistry.isRegistered(exports.ModuleNames.EnterpriseCoreModule);logger.log("initialised successfully, enterprise = "+isEnterprise)})),acceptChanges&&acceptChanges(context)}},GridCoreCreator.prototype.registerControllers=function(beans,registeredModules){registeredModules.forEach((function(module){module.controllers&&module.controllers.forEach((function(meta){return beans.ctrlsFactory.register(meta)}))}))},GridCoreCreator.prototype.registerStackComponents=function(beans,registeredModules){var agStackComponents=this.createAgStackComponentsList(registeredModules);beans.agStackComponentsRegistry.setupComponents(agStackComponents)},GridCoreCreator.prototype.getRegisteredModules=function(params){var passedViaConstructor=params?params.modules:null,registered=ModuleRegistry.getRegisteredModules(),allModules=[],mapNames={};function addModule(moduleBased,mod){!function addIndividualModule(currentModule){mapNames[currentModule.moduleName]||(mapNames[currentModule.moduleName]=!0,allModules.push(currentModule),ModuleRegistry.register(currentModule,moduleBased))}(mod),mod.dependantModules&&mod.dependantModules.forEach(addModule.bind(null,moduleBased))}return passedViaConstructor&&passedViaConstructor.forEach(addModule.bind(null,!0)),registered&&registered.forEach(addModule.bind(null,!ModuleRegistry.isPackageBased())),allModules},GridCoreCreator.prototype.registerModuleUserComponents=function(beans,registeredModules){this.extractModuleEntity(registeredModules,(function(module){return module.userComponents?module.userComponents:[]})).forEach((function(compMeta){beans.userComponentRegistry.registerDefaultComponent(compMeta.componentName,compMeta.componentClass)}))},GridCoreCreator.prototype.createProvidedBeans=function(eGridDiv,gridOptions,params){var frameworkOverrides=params?params.frameworkOverrides:null;missing(frameworkOverrides)&&(frameworkOverrides=new VanillaFrameworkOverrides);var seed={gridOptions,eGridDiv,globalEventListener:params?params.globalEventListener:null,frameworkOverrides};return params&&params.providedBeanInstances&&Object.assign(seed,params.providedBeanInstances),seed},GridCoreCreator.prototype.createAgStackComponentsList=function(registeredModules){var components=[{componentName:"AgCheckbox",componentClass:AgCheckbox},{componentName:"AgRadioButton",componentClass:AgRadioButton},{componentName:"AgToggleButton",componentClass:AgToggleButton},{componentName:"AgInputTextField",componentClass:AgInputTextField},{componentName:"AgInputTextArea",componentClass:AgInputTextArea},{componentName:"AgInputNumberField",componentClass:AgInputNumberField},{componentName:"AgInputRange",componentClass:AgInputRange},{componentName:"AgSelect",componentClass:AgSelect},{componentName:"AgSlider",componentClass:AgSlider},{componentName:"AgAngleSelect",componentClass:AgAngleSelect},{componentName:"AgColorPicker",componentClass:AgColorPicker},{componentName:"AgGridBody",componentClass:GridBodyComp},{componentName:"AgHeaderRoot",componentClass:GridHeaderComp},{componentName:"AgPagination",componentClass:PaginationComp},{componentName:"AgOverlayWrapper",componentClass:OverlayWrapperComponent},{componentName:"AgGroupComponent",componentClass:AgGroupComponent},{componentName:"AgPanel",componentClass:AgPanel},{componentName:"AgDialog",componentClass:AgDialog},{componentName:"AgRowContainer",componentClass:RowContainerComp},{componentName:"AgFakeHorizontalScroll",componentClass:FakeHScrollComp}],moduleAgStackComps=this.extractModuleEntity(registeredModules,(function(module){return module.agStackComponents?module.agStackComponents:[]}));return components=components.concat(moduleAgStackComps)},GridCoreCreator.prototype.createBeansList=function(rowModelType,registeredModules){var rowModelClass=this.getRowModelClass(rowModelType,registeredModules);if(rowModelClass){var beans=[rowModelClass,Beans,RowPositionUtils,CellPositionUtils,HeaderPositionUtils,PaginationAutoPageSizeService,GridApi,UserComponentRegistry,AgComponentUtils,ComponentMetadataProvider,ResizeObserverService,UserComponentFactory,RowContainerHeightService,HorizontalResizeService,PinnedRowModel,DragService,DisplayedGroupCreator,EventService,GridOptionsWrapper,PopupService,SelectionService,FilterManager,ColumnModel,HeaderNavigationService,PaginationProxy,RowRenderer,ExpressionService,ColumnFactory,TemplateService,AlignedGridsService,NavigationService,ValueCache,ValueService,LoggerFactory,ColumnUtils,AutoWidthCalculator,StandardMenuFactory,DragAndDropService,ColumnApi,FocusService,MouseEventService,Environment,CellNavigationService,ValueFormatterService,StylingService,ScrollVisibleService,SortController,ColumnHoverService,ColumnAnimationService,SelectableService,AutoGroupColService,ChangeDetectionService,AnimationFrameService,UndoRedoService,AgStackComponentsRegistry,ColumnDefFactory,RowCssClassCalculator,RowNodeBlockLoader,RowNodeSorter,CtrlsService,PinnedWidthService,RowNodeEventThrottle,CtrlsFactory],moduleBeans=this.extractModuleEntity(registeredModules,(function(module){return module.beans?module.beans:[]}));beans.push.apply(beans,__spread$d(moduleBeans));var beansNoDuplicates=[];return beans.forEach((function(bean){beansNoDuplicates.indexOf(bean)<0&&beansNoDuplicates.push(bean)})),beansNoDuplicates}},GridCoreCreator.prototype.extractModuleEntity=function(moduleEntities,extractor){return[].concat.apply([],__spread$d(moduleEntities.map(extractor)))},GridCoreCreator.prototype.setColumnsAndData=function(beans){var columnDefs=beans.gridOptionsWrapper.getColumnDefs();beans.columnModel.setColumnDefs(columnDefs||[],"gridInitializing"),beans.rowModel.start()},GridCoreCreator.prototype.dispatchGridReadyEvent=function(beans,gridOptions){var readyEvent={type:Events.EVENT_GRID_READY,api:gridOptions.api,columnApi:gridOptions.columnApi};beans.eventService.dispatchEvent(readyEvent)},GridCoreCreator.prototype.getRowModelClass=function(rowModelType,registeredModules){rowModelType||(rowModelType=Constants.ROW_MODEL_TYPE_CLIENT_SIDE);var rowModelClasses={};registeredModules.forEach((function(module){iterateObject(module.rowModels,(function(key,value){rowModelClasses[key]=value}))}));var rowModelClass=rowModelClasses[rowModelType];if(exists(rowModelClass))return rowModelClass;ModuleRegistry.isPackageBased()?[Constants.ROW_MODEL_TYPE_VIEWPORT,Constants.ROW_MODEL_TYPE_SERVER_SIDE].includes(rowModelType)?console.error('AG Grid: Row Model "'+rowModelType+"\" not found. Please ensure the package 'ag-grid-enterprise' is imported. Please see: https://www.ag-grid.com/javascript-grid/packages/"):console.error("AG Grid: could not find row model for rowModelType "+rowModelType):rowModelType===Constants.ROW_MODEL_TYPE_INFINITE?console.error('AG Grid: Row Model "Infinite" not found. Please ensure the '+exports.ModuleNames.InfiniteRowModelModule+" module is registered. Please see: https://www.ag-grid.com/javascript-grid/modules/"):rowModelType===Constants.ROW_MODEL_TYPE_VIEWPORT?console.error('AG Grid: Row Model "Viewport" not found. Please ensure the AG Grid Enterprise Module '+exports.ModuleNames.ViewportRowModelModule+" module is registered. Please see: https://www.ag-grid.com/javascript-grid/modules/"):rowModelType===Constants.ROW_MODEL_TYPE_SERVER_SIDE?console.error('AG Grid: Row Model "Server Side" not found. Please ensure the AG Grid Enterprise Module '+exports.ModuleNames.ServerSideRowModelModule+" module is registered. Please see: https://www.ag-grid.com/javascript-grid/modules/"):rowModelType===Constants.ROW_MODEL_TYPE_CLIENT_SIDE?console.error('AG Grid: Row Model "Client Side" not found. Please ensure the '+exports.ModuleNames.ClientSideRowModelModule+" module is registered. Please see: https://www.ag-grid.com/javascript-grid/modules/"):console.error("AG Grid: could not find row model for rowModelType "+rowModelType)},GridCoreCreator}();var BarColumnLabelPlacement,BaseComponentWrapper=function(){function BaseComponentWrapper(){}return BaseComponentWrapper.prototype.wrap=function(OriginalConstructor,mandatoryMethodList,optionalMethodList,componentType){var _this=this;void 0===optionalMethodList&&(optionalMethodList=[]);var wrapper=this.createWrapper(OriginalConstructor,componentType);return mandatoryMethodList.forEach((function(methodName){_this.createMethod(wrapper,methodName,!0)})),optionalMethodList.forEach((function(methodName){_this.createMethod(wrapper,methodName,!1)})),wrapper},BaseComponentWrapper.prototype.unwrap=function(comp){return comp},BaseComponentWrapper.prototype.createMethod=function(wrapper,methodName,mandatory){wrapper.addMethod(methodName,this.createMethodProxy(wrapper,methodName,mandatory))},BaseComponentWrapper.prototype.createMethodProxy=function(wrapper,methodName,mandatory){return function(){return wrapper.hasMethod(methodName)?wrapper.callMethod(methodName,arguments):(mandatory&&console.warn("AG Grid: Framework component is missing the method "+methodName+"()"),null)}},BaseComponentWrapper}();(BarColumnLabelPlacement=exports.BarColumnLabelPlacement||(exports.BarColumnLabelPlacement={})).InsideBase="insideBase",BarColumnLabelPlacement.InsideEnd="insideEnd",BarColumnLabelPlacement.Center="center",BarColumnLabelPlacement.OutsideEnd="outsideEnd";var globalObj=void 0===__webpack_require__.g?{}:__webpack_require__.g;globalObj.HTMLElement="undefined"==typeof HTMLElement?{}:HTMLElement,globalObj.HTMLButtonElement="undefined"==typeof HTMLButtonElement?{}:HTMLButtonElement,globalObj.HTMLSelectElement="undefined"==typeof HTMLSelectElement?{}:HTMLSelectElement,globalObj.HTMLInputElement="undefined"==typeof HTMLInputElement?{}:HTMLInputElement,globalObj.Node="undefined"==typeof Node?{}:Node,globalObj.MouseEvent="undefined"==typeof MouseEvent?{}:MouseEvent;var RecursionType,__read$i=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$e=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$i(arguments[i]));return ar},ClientSideNodeManager=function(){function ClientSideNodeManager(rootNode,gridOptionsWrapper,eventService,columnModel,gridApi,columnApi,selectionService,beans){this.nextId=0,this.allNodesMap={},this.rootNode=rootNode,this.gridOptionsWrapper=gridOptionsWrapper,this.eventService=eventService,this.columnModel=columnModel,this.gridApi=gridApi,this.columnApi=columnApi,this.beans=beans,this.selectionService=selectionService,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=ClientSideNodeManager.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return ClientSideNodeManager.prototype.postConstruct=function(){this.suppressParentsInRowNodes=this.gridOptionsWrapper.isSuppressParentsInRowNodes(),this.isRowMasterFunc=this.gridOptionsWrapper.getIsRowMasterFunc(),this.doingTreeData=this.gridOptionsWrapper.isTreeData(),this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},ClientSideNodeManager.prototype.getCopyOfNodesMap=function(){return _.cloneObject(this.allNodesMap)},ClientSideNodeManager.prototype.getRowNode=function(id){return this.allNodesMap[id]},ClientSideNodeManager.prototype.setRowData=function(rowData){var _this=this;if("string"!=typeof rowData){var rootNode=this.rootNode,sibling=this.rootNode.sibling;rootNode.childrenAfterFilter=null,rootNode.childrenAfterGroup=null,rootNode.childrenAfterAggFilter=null,rootNode.childrenAfterSort=null,rootNode.childrenMapped=null,rootNode.updateHasChildren(),this.nextId=0,this.allNodesMap={},rowData?rootNode.allLeafChildren=rowData.map((function(dataItem){return _this.createNode(dataItem,_this.rootNode,ClientSideNodeManager.TOP_LEVEL)})):(rootNode.allLeafChildren=[],rootNode.childrenAfterGroup=[]),sibling&&(sibling.childrenAfterFilter=rootNode.childrenAfterFilter,sibling.childrenAfterGroup=rootNode.childrenAfterGroup,sibling.childrenAfterAggFilter=rootNode.childrenAfterAggFilter,sibling.childrenAfterSort=rootNode.childrenAfterSort,sibling.childrenMapped=rootNode.childrenMapped,sibling.allLeafChildren=rootNode.allLeafChildren)}else console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")},ClientSideNodeManager.prototype.updateRowData=function(rowDataTran,rowNodeOrder){var rowNodeTransaction={remove:[],update:[],add:[]},nodesToUnselect=[];return this.executeRemove(rowDataTran,rowNodeTransaction,nodesToUnselect),this.executeUpdate(rowDataTran,rowNodeTransaction,nodesToUnselect),this.executeAdd(rowDataTran,rowNodeTransaction),this.updateSelection(nodesToUnselect),rowNodeOrder&&_.sortRowNodesByOrder(this.rootNode.allLeafChildren,rowNodeOrder),rowNodeTransaction},ClientSideNodeManager.prototype.updateSelection=function(nodesToUnselect){var selectionChanged=nodesToUnselect.length>0;if(selectionChanged&&nodesToUnselect.forEach((function(rowNode){rowNode.setSelected(!1,!1,!0)})),this.selectionService.updateGroupsFromChildrenSelections(),selectionChanged){var event_1={type:Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event_1)}},ClientSideNodeManager.prototype.executeAdd=function(rowDataTran,rowNodeTransaction){var _this=this,add=rowDataTran.add,addIndex=rowDataTran.addIndex;if(!_.missingOrEmpty(add)){var nodesBeforeIndex,nodesAfterIndex,newNodes=add.map((function(item){return _this.createNode(item,_this.rootNode,ClientSideNodeManager.TOP_LEVEL)}));if("number"==typeof addIndex&&addIndex>=0){var allLeafChildren_1=this.rootNode.allLeafChildren,normalizedAddIndex=0===addIndex?0:allLeafChildren_1.reduce((function(prevIdx,currNode,currIdx){var _a,rowIndex=currNode.rowIndex,prevValueAtIndex=null===(_a=allLeafChildren_1[prevIdx])||void 0===_a?void 0:_a.rowIndex;return null!=rowIndex&&null!=prevValueAtIndex&&rowIndex<addIndex&&rowIndex>prevValueAtIndex?currIdx:prevIdx}),0)+1;nodesBeforeIndex=allLeafChildren_1.slice(0,normalizedAddIndex),nodesAfterIndex=allLeafChildren_1.slice(normalizedAddIndex,allLeafChildren_1.length)}else nodesBeforeIndex=this.rootNode.allLeafChildren,nodesAfterIndex=[];this.rootNode.allLeafChildren=__spread$e(nodesBeforeIndex,newNodes,nodesAfterIndex),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),rowNodeTransaction.add=newNodes}},ClientSideNodeManager.prototype.executeRemove=function(rowDataTran,rowNodeTransaction,nodesToUnselect){var _this=this,remove=rowDataTran.remove;if(!_.missingOrEmpty(remove)){var rowIdsRemoved={};remove.forEach((function(item){var rowNode=_this.lookupRowNode(item);rowNode&&(rowNode.isSelected()&&nodesToUnselect.push(rowNode),rowNode.clearRowTopAndRowIndex(),rowIdsRemoved[rowNode.id]=!0,delete _this.allNodesMap[rowNode.id],rowNodeTransaction.remove.push(rowNode))})),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter((function(rowNode){return!rowIdsRemoved[rowNode.id]})),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},ClientSideNodeManager.prototype.executeUpdate=function(rowDataTran,rowNodeTransaction,nodesToUnselect){var _this=this,update=rowDataTran.update;_.missingOrEmpty(update)||update.forEach((function(item){var rowNode=_this.lookupRowNode(item);rowNode&&(rowNode.updateData(item),!rowNode.selectable&&rowNode.isSelected()&&nodesToUnselect.push(rowNode),_this.setMasterForRow(rowNode,item,ClientSideNodeManager.TOP_LEVEL,!1),rowNodeTransaction.update.push(rowNode))}))},ClientSideNodeManager.prototype.lookupRowNode=function(data){var rowNode,getRowIdFunc=this.gridOptionsWrapper.getRowIdFunc();if(getRowIdFunc){var id=getRowIdFunc({data,level:0});if(!(rowNode=this.allNodesMap[id]))return console.error("AG Grid: could not find row id="+id+", data item was not found for this id"),null}else if(!(rowNode=this.rootNode.allLeafChildren.find((function(node){return node.data===data}))))return console.error("AG Grid: could not find data item as object was not found",data),console.error("Consider using getRowId to help the Grid find matching row data"),null;return rowNode||null},ClientSideNodeManager.prototype.createNode=function(dataItem,parent,level){var node=new RowNode(this.beans);return node.group=!1,this.setMasterForRow(node,dataItem,level,!0),parent&&!this.suppressParentsInRowNodes&&(node.parent=parent),node.level=level,node.setDataAndId(dataItem,this.nextId.toString()),this.allNodesMap[node.id]&&console.warn("AG Grid: duplicate node id '"+node.id+"' detected from getRowId callback, this could cause issues in your grid."),this.allNodesMap[node.id]=node,this.nextId++,node},ClientSideNodeManager.prototype.setMasterForRow=function(rowNode,data,level,setExpanded){if(this.doingTreeData)rowNode.setMaster(!1),setExpanded&&(rowNode.expanded=!1);else if(this.doingMasterDetail?this.isRowMasterFunc?rowNode.setMaster(this.isRowMasterFunc(data)):rowNode.setMaster(!0):rowNode.setMaster(!1),setExpanded){var rowGroupColumns=this.columnModel.getRowGroupColumns(),masterRowLevel=level+(rowGroupColumns?rowGroupColumns.length:0);rowNode.expanded=!!rowNode.master&&this.isExpanded(masterRowLevel)}},ClientSideNodeManager.prototype.isExpanded=function(level){var expandByDefault=this.gridOptionsWrapper.getGroupDefaultExpanded();return-1===expandByDefault||level<expandByDefault},ClientSideNodeManager.TOP_LEVEL=0,ClientSideNodeManager.ROOT_NODE_ID="ROOT_NODE_ID",ClientSideNodeManager}(),__extends$2G=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2n=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(RecursionType){RecursionType[RecursionType.Normal=0]="Normal",RecursionType[RecursionType.AfterFilter=1]="AfterFilter",RecursionType[RecursionType.AfterFilterAndSort=2]="AfterFilterAndSort",RecursionType[RecursionType.PivotNodes=3]="PivotNodes"}(RecursionType||(RecursionType={}));var ClientSideRowModel=function(_super){function ClientSideRowModel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2G(ClientSideRowModel,_super),ClientSideRowModel.prototype.init=function(){var refreshEverythingFunc=this.refreshModel.bind(this,{step:exports.ClientSideRowModelSteps.EVERYTHING}),animate=!this.gridOptionsWrapper.isSuppressAnimationFrame(),refreshEverythingAfterColsChangedFunc=this.refreshModel.bind(this,{step:exports.ClientSideRowModelSteps.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate});this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,refreshEverythingAfterColsChangedFunc),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,refreshEverythingFunc),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:exports.ClientSideRowModelSteps.PIVOT})),this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,refreshEverythingFunc);var refreshMapListener=this.refreshModel.bind(this,{step:exports.ClientSideRowModelSteps.MAP,keepRenderedRows:!0,animate});this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN,refreshMapListener),this.addManagedListener(this.gridOptionsWrapper,GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,refreshMapListener),this.rootNode=new RowNode(this.beans),this.nodeManager=new ClientSideNodeManager(this.rootNode,this.gridOptionsWrapper,this.eventService,this.columnModel,this.gridApi,this.columnApi,this.selectionService,this.beans)},ClientSideRowModel.prototype.start=function(){var rowData=this.gridOptionsWrapper.getRowData();rowData&&this.setRowData(rowData)},ClientSideRowModel.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){var atLeastOneChange,res=!1;do{atLeastOneChange=!1;for(var rowAtStartPixel=this.getRowIndexAtPixel(startPixel),rowAtEndPixel=this.getRowIndexAtPixel(endPixel),firstRow=Math.max(rowAtStartPixel,startLimitIndex),lastRow=Math.min(rowAtEndPixel,endLimitIndex),rowIndex=firstRow;rowIndex<=lastRow;rowIndex++){var rowNode=this.getRow(rowIndex);if(rowNode.rowHeightEstimated){var rowHeight=this.gridOptionsWrapper.getRowHeightForNode(rowNode);rowNode.setRowHeight(rowHeight.height),atLeastOneChange=!0,res=!0}}atLeastOneChange&&this.setRowTopAndRowIndex()}while(atLeastOneChange);return res},ClientSideRowModel.prototype.setRowTopAndRowIndex=function(){for(var defaultRowHeight=this.gridOptionsWrapper.getDefaultRowHeight(),nextRowTop=0,displayedRowsMapped=new Set,allowEstimate=this.gridOptionsWrapper.getDomLayout()===Constants.DOM_LAYOUT_NORMAL,i=0;i<this.rowsToDisplay.length;i++){var rowNode=this.rowsToDisplay[i];if(null!=rowNode.id&&displayedRowsMapped.add(rowNode.id),null==rowNode.rowHeight){var rowHeight=this.gridOptionsWrapper.getRowHeightForNode(rowNode,allowEstimate,defaultRowHeight);rowNode.setRowHeight(rowHeight.height,rowHeight.estimated)}rowNode.setRowTop(nextRowTop),rowNode.setRowIndex(i),nextRowTop+=rowNode.rowHeight}return displayedRowsMapped},ClientSideRowModel.prototype.clearRowTopAndRowIndex=function(changedPath,displayedRowsMapped){var changedPathActive=changedPath.isActive(),clearIfNotDisplayed=function(rowNode){rowNode&&null!=rowNode.id&&!displayedRowsMapped.has(rowNode.id)&&rowNode.clearRowTopAndRowIndex()},recurse=function(rowNode){if(clearIfNotDisplayed(rowNode),clearIfNotDisplayed(rowNode.detailNode),clearIfNotDisplayed(rowNode.sibling),rowNode.hasChildren()&&rowNode.childrenAfterGroup){var isRootNode=-1==rowNode.level;changedPathActive&&!isRootNode&&!rowNode.expanded||rowNode.childrenAfterGroup.forEach(recurse)}};recurse(this.rootNode)},ClientSideRowModel.prototype.ensureRowsAtPixel=function(rowNodes,pixel,increment){var _this=this;void 0===increment&&(increment=0);var indexAtPixelNow=this.getRowIndexAtPixel(pixel),rowNodeAtPixelNow=this.getRow(indexAtPixelNow),animate=!this.gridOptionsWrapper.isSuppressAnimationFrame();return rowNodeAtPixelNow!==rowNodes[0]&&(rowNodes.forEach((function(rowNode){_.removeFromArray(_this.rootNode.allLeafChildren,rowNode)})),rowNodes.forEach((function(rowNode,idx){_.insertIntoArray(_this.rootNode.allLeafChildren,rowNode,Math.max(indexAtPixelNow+increment,0)+idx)})),this.refreshModel({step:exports.ClientSideRowModelSteps.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate}),!0)},ClientSideRowModel.prototype.highlightRowAtPixel=function(rowNode,pixel){var indexAtPixelNow=null!=pixel?this.getRowIndexAtPixel(pixel):null,rowNodeAtPixelNow=null!=indexAtPixelNow?this.getRow(indexAtPixelNow):null;if(rowNodeAtPixelNow&&rowNode&&rowNodeAtPixelNow!==rowNode&&null!=pixel){var highlight=this.getHighlightPosition(pixel,rowNodeAtPixelNow);this.lastHighlightedRow&&this.lastHighlightedRow!==rowNodeAtPixelNow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),rowNodeAtPixelNow.setHighlighted(highlight),this.lastHighlightedRow=rowNodeAtPixelNow}else this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)},ClientSideRowModel.prototype.getHighlightPosition=function(pixel,rowNode){if(!rowNode){var index=this.getRowIndexAtPixel(pixel);if(!(rowNode=this.getRow(index||0)))return exports.RowHighlightPosition.Below}return pixel-rowNode.rowTop<rowNode.rowHeight/2?exports.RowHighlightPosition.Above:exports.RowHighlightPosition.Below},ClientSideRowModel.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},ClientSideRowModel.prototype.isLastRowIndexKnown=function(){return!0},ClientSideRowModel.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},ClientSideRowModel.prototype.getTopLevelRowCount=function(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;var filteredChildren=this.rootNode.childrenAfterAggFilter;return filteredChildren?filteredChildren.length:0},ClientSideRowModel.prototype.getTopLevelRowDisplayedIndex=function(topLevelIndex){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return topLevelIndex;var rowNode=this.rootNode.childrenAfterSort[topLevelIndex];if(this.gridOptionsWrapper.isGroupHideOpenParents())for(;rowNode.expanded&&rowNode.childrenAfterSort&&rowNode.childrenAfterSort.length>0;)rowNode=rowNode.childrenAfterSort[0];return rowNode.rowIndex},ClientSideRowModel.prototype.getRowBounds=function(index){if(_.missing(this.rowsToDisplay))return null;var rowNode=this.rowsToDisplay[index];return rowNode?{rowTop:rowNode.rowTop,rowHeight:rowNode.rowHeight}:null},ClientSideRowModel.prototype.onRowGroupOpened=function(){var animate=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:exports.ClientSideRowModelSteps.MAP,keepRenderedRows:!0,animate})},ClientSideRowModel.prototype.onFilterChanged=function(event){if(!event.afterDataChange){var animate=this.gridOptionsWrapper.isAnimateRows(),step=0===event.columns.length||event.columns.some((function(col){return col.isPrimary()}))?exports.ClientSideRowModelSteps.FILTER:exports.ClientSideRowModelSteps.FILTER_AGGREGATES;this.refreshModel({step,keepRenderedRows:!0,animate})}},ClientSideRowModel.prototype.onSortChanged=function(){var animate=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:exports.ClientSideRowModelSteps.SORT,keepRenderedRows:!0,animate,keepEditingRows:!0})},ClientSideRowModel.prototype.getType=function(){return Constants.ROW_MODEL_TYPE_CLIENT_SIDE},ClientSideRowModel.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:exports.ClientSideRowModelSteps.PIVOT}):this.refreshModel({step:exports.ClientSideRowModelSteps.AGGREGATE})},ClientSideRowModel.prototype.createChangePath=function(rowNodeTransactions){var noTransactions=_.missingOrEmpty(rowNodeTransactions),changedPath=new ChangedPath(!1,this.rootNode);return(noTransactions||this.gridOptionsWrapper.isTreeData())&&changedPath.setInactive(),changedPath},ClientSideRowModel.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(params){if(!this.gridOptionsWrapper.isSuppressModelUpdateAfterUpdateTransaction())return!1;if(null==params.rowNodeTransactions)return!1;var transWithAddsOrDeletes=params.rowNodeTransactions.filter((function(tx){return null!=tx.add&&tx.add.length>0||null!=tx.remove&&tx.remove.length>0}));return null==transWithAddsOrDeletes||0==transWithAddsOrDeletes.length},ClientSideRowModel.prototype.refreshModel=function(params){if(!this.isSuppressModelUpdateAfterUpdateTransaction(params)){var changedPath=this.createChangePath(params.rowNodeTransactions);switch(params.step){case exports.ClientSideRowModelSteps.EVERYTHING:this.doRowGrouping(params.groupState,params.rowNodeTransactions,params.rowNodeOrder,changedPath,!!params.afterColumnsChanged);case exports.ClientSideRowModelSteps.FILTER:this.doFilter(changedPath);case exports.ClientSideRowModelSteps.PIVOT:this.doPivot(changedPath);case exports.ClientSideRowModelSteps.AGGREGATE:this.doAggregate(changedPath);case exports.ClientSideRowModelSteps.FILTER_AGGREGATES:this.doFilterAggregates(changedPath);case exports.ClientSideRowModelSteps.SORT:this.doSort(params.rowNodeTransactions,changedPath);case exports.ClientSideRowModelSteps.MAP:this.doRowsToDisplay()}var displayedNodesMapped=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(changedPath,displayedNodesMapped);var event={type:Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:params.animate,keepRenderedRows:params.keepRenderedRows,newData:params.newData,newPage:!1};this.eventService.dispatchEvent(event)}},ClientSideRowModel.prototype.isEmpty=function(){var rowsMissing=_.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return _.missing(this.rootNode)||rowsMissing||!this.columnModel.isReady()},ClientSideRowModel.prototype.isRowsToRender=function(){return _.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},ClientSideRowModel.prototype.getNodesInRangeForSelection=function(firstInRange,lastInRange){var lastRow,firstRowHit=!lastInRange,lastRowHit=!1,result=[],groupsSelectChildren=this.gridOptionsWrapper.isGroupSelectsChildren();return this.forEachNodeAfterFilterAndSort((function(rowNode){var lookingForLastRow=firstRowHit&&!lastRowHit;if(firstRowHit||rowNode!==lastInRange&&rowNode!==firstInRange||(firstRowHit=!0),!(rowNode.group&&groupsSelectChildren)){var inRange=firstRowHit&&!lastRowHit,childOfLastRow=rowNode.isParentOfNode(lastRow);(inRange||childOfLastRow)&&result.push(rowNode)}lookingForLastRow&&(rowNode!==lastInRange&&rowNode!==firstInRange||(lastRowHit=!0,lastRow=rowNode===lastInRange?lastInRange:firstInRange))})),result},ClientSideRowModel.prototype.setDatasource=function(datasource){console.error("AG Grid: should never call setDatasource on clientSideRowController")},ClientSideRowModel.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},ClientSideRowModel.prototype.getRootNode=function(){return this.rootNode},ClientSideRowModel.prototype.getRow=function(index){return this.rowsToDisplay[index]},ClientSideRowModel.prototype.isRowPresent=function(rowNode){return this.rowsToDisplay.indexOf(rowNode)>=0},ClientSideRowModel.prototype.getRowIndexAtPixel=function(pixelToMatch){if(this.isEmpty())return-1;var bottomPointer=0,topPointer=this.rowsToDisplay.length-1;if(pixelToMatch<=0)return 0;if(_.last(this.rowsToDisplay).rowTop<=pixelToMatch)return this.rowsToDisplay.length-1;for(;;){var midPointer=Math.floor((bottomPointer+topPointer)/2),currentRowNode=this.rowsToDisplay[midPointer];if(this.isRowInPixel(currentRowNode,pixelToMatch))return midPointer;currentRowNode.rowTop<pixelToMatch?bottomPointer=midPointer+1:currentRowNode.rowTop>pixelToMatch&&(topPointer=midPointer-1)}},ClientSideRowModel.prototype.isRowInPixel=function(rowNode,pixelToMatch){var topPixel=rowNode.rowTop,bottomPixel=rowNode.rowTop+rowNode.rowHeight;return topPixel<=pixelToMatch&&bottomPixel>pixelToMatch},ClientSideRowModel.prototype.forEachLeafNode=function(callback){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((function(rowNode,index){return callback(rowNode,index)}))},ClientSideRowModel.prototype.forEachNode=function(callback){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterGroup,callback,RecursionType.Normal,0)},ClientSideRowModel.prototype.forEachNodeAfterFilter=function(callback){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterAggFilter,callback,RecursionType.AfterFilter,0)},ClientSideRowModel.prototype.forEachNodeAfterFilterAndSort=function(callback){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterSort,callback,RecursionType.AfterFilterAndSort,0)},ClientSideRowModel.prototype.forEachPivotNode=function(callback){this.recursivelyWalkNodesAndCallback([this.rootNode],callback,RecursionType.PivotNodes,0)},ClientSideRowModel.prototype.recursivelyWalkNodesAndCallback=function(nodes,callback,recursionType,index){if(!nodes)return index;for(var i=0;i<nodes.length;i++){var node=nodes[i];if(callback(node,index++),node.hasChildren()){var nodeChildren=null;switch(recursionType){case RecursionType.Normal:nodeChildren=node.childrenAfterGroup;break;case RecursionType.AfterFilter:nodeChildren=node.childrenAfterAggFilter;break;case RecursionType.AfterFilterAndSort:nodeChildren=node.childrenAfterSort;break;case RecursionType.PivotNodes:nodeChildren=node.leafGroup?null:node.childrenAfterSort}nodeChildren&&(index=this.recursivelyWalkNodesAndCallback(nodeChildren,callback,recursionType,index))}}return index},ClientSideRowModel.prototype.doAggregate=function(changedPath){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath})},ClientSideRowModel.prototype.doFilterAggregates=function(changedPath){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},ClientSideRowModel.prototype.expandOrCollapseAll=function(expand){var usingTreeData=this.gridOptionsWrapper.isTreeData(),usingPivotMode=this.columnModel.isPivotActive(),recursiveExpandOrCollapse=function(rowNodes){rowNodes&&rowNodes.forEach((function(rowNode){var actionRow=function(){rowNode.expanded=expand,recursiveExpandOrCollapse(rowNode.childrenAfterGroup)};usingTreeData?_.exists(rowNode.childrenAfterGroup)&&actionRow():usingPivotMode?!rowNode.leafGroup&&actionRow():rowNode.group&&actionRow()}))};this.rootNode&&recursiveExpandOrCollapse(this.rootNode.childrenAfterGroup),this.refreshModel({step:exports.ClientSideRowModelSteps.MAP});var eventSource=expand?"expandAll":"collapseAll",event={api:this.gridApi,columnApi:this.columnApi,type:Events.EVENT_EXPAND_COLLAPSE_ALL,source:eventSource};this.eventService.dispatchEvent(event)},ClientSideRowModel.prototype.doSort=function(rowNodeTransactions,changedPath){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions,changedPath})},ClientSideRowModel.prototype.doRowGrouping=function(groupState,rowNodeTransactions,rowNodeOrder,changedPath,afterColumnsChanged){this.groupStage?(rowNodeTransactions?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions,rowNodeOrder,changedPath}):(this.groupStage.execute({rowNode:this.rootNode,changedPath,afterColumnsChanged}),this.restoreGroupState(groupState)),this.gridOptionsWrapper.isGroupSelectsChildren()&&this.selectionService.updateGroupsFromChildrenSelections(changedPath)):(this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren())},ClientSideRowModel.prototype.restoreGroupState=function(groupState){groupState&&_.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(function(node,key){"boolean"==typeof groupState[key]&&(node.expanded=groupState[key])}))},ClientSideRowModel.prototype.doFilter=function(changedPath){this.filterStage.execute({rowNode:this.rootNode,changedPath})},ClientSideRowModel.prototype.doPivot=function(changedPath){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath})},ClientSideRowModel.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsWrapper.isRememberGroupStateWhenNewData())return null;var result={};return _.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(function(node,key){return result[key]=node.expanded})),result},ClientSideRowModel.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},ClientSideRowModel.prototype.getRowNode=function(id){if("string"==typeof id&&0==id.indexOf(RowNode.ID_PREFIX_ROW_GROUP)){var res_1=void 0;return this.forEachNode((function(node){node.id===id&&(res_1=node)})),res_1}return this.nodeManager.getRowNode(id)},ClientSideRowModel.prototype.setRowData=function(rowData){var groupState=this.getGroupState();this.nodeManager.setRowData(rowData),this.selectionService.reset(),this.filterManager.onNewRowsLoaded("rowDataUpdated");var rowDataChangedEvent={type:Events.EVENT_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(rowDataChangedEvent),this.refreshModel({step:exports.ClientSideRowModelSteps.EVERYTHING,groupState,newData:!0})},ClientSideRowModel.prototype.batchUpdateRowData=function(rowDataTransaction,callback){var _this=this;if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];var waitMillis=this.gridOptionsWrapper.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout((function(){_this.executeBatchUpdateRowData()}),waitMillis)}this.rowDataTransactionBatch.push({rowDataTransaction,callback})},ClientSideRowModel.prototype.flushAsyncTransactions=function(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},ClientSideRowModel.prototype.executeBatchUpdateRowData=function(){var _this=this;this.valueCache.onDataChanged();var callbackFuncsBound=[],rowNodeTrans=[],forceRowNodeOrder=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach((function(tranItem){var rowNodeTran=_this.nodeManager.updateRowData(tranItem.rowDataTransaction,void 0);rowNodeTrans.push(rowNodeTran),tranItem.callback&&callbackFuncsBound.push(tranItem.callback.bind(null,rowNodeTran)),"number"==typeof tranItem.rowDataTransaction.addIndex&&(forceRowNodeOrder=!0)})),this.commonUpdateRowData(rowNodeTrans,void 0,forceRowNodeOrder),callbackFuncsBound.length>0&&window.setTimeout((function(){callbackFuncsBound.forEach((function(func){return func()}))}),0),rowNodeTrans.length>0){var event_1={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),type:Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:rowNodeTrans};this.eventService.dispatchEvent(event_1)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},ClientSideRowModel.prototype.updateRowData=function(rowDataTran,rowNodeOrder){this.valueCache.onDataChanged();var rowNodeTran=this.nodeManager.updateRowData(rowDataTran,rowNodeOrder),forceRowNodeOrder="number"==typeof rowDataTran.addIndex;return this.commonUpdateRowData([rowNodeTran],rowNodeOrder,forceRowNodeOrder),rowNodeTran},ClientSideRowModel.prototype.createRowNodeOrder=function(){if(!this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder()){var orderMap={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var index=0;index<this.rootNode.allLeafChildren.length;index++){orderMap[this.rootNode.allLeafChildren[index].id]=index}return orderMap}},ClientSideRowModel.prototype.commonUpdateRowData=function(rowNodeTrans,rowNodeOrder,forceRowNodeOrder){var animate=!this.gridOptionsWrapper.isSuppressAnimationFrame();forceRowNodeOrder&&(rowNodeOrder=this.createRowNodeOrder()),this.refreshModel({step:exports.ClientSideRowModelSteps.EVERYTHING,rowNodeTransactions:rowNodeTrans,rowNodeOrder,keepRenderedRows:!0,keepEditingRows:!0,animate});var event={type:Events.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event)},ClientSideRowModel.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},ClientSideRowModel.prototype.onRowHeightChanged=function(){this.refreshModel({step:exports.ClientSideRowModelSteps.MAP,keepRenderedRows:!0,keepEditingRows:!0})},ClientSideRowModel.prototype.resetRowHeights=function(){var atLeastOne=!1;this.forEachNode((function(rowNode){rowNode.setRowHeight(rowNode.rowHeight,!0);var detailNode=rowNode.detailNode;detailNode&&detailNode.setRowHeight(detailNode.rowHeight,!0),atLeastOne=!0})),atLeastOne&&this.onRowHeightChanged()},__decorate$2n([Autowired("columnModel")],ClientSideRowModel.prototype,"columnModel",void 0),__decorate$2n([Autowired("selectionService")],ClientSideRowModel.prototype,"selectionService",void 0),__decorate$2n([Autowired("filterManager")],ClientSideRowModel.prototype,"filterManager",void 0),__decorate$2n([Autowired("valueCache")],ClientSideRowModel.prototype,"valueCache",void 0),__decorate$2n([Autowired("columnApi")],ClientSideRowModel.prototype,"columnApi",void 0),__decorate$2n([Autowired("gridApi")],ClientSideRowModel.prototype,"gridApi",void 0),__decorate$2n([Autowired("animationFrameService")],ClientSideRowModel.prototype,"animationFrameService",void 0),__decorate$2n([Autowired("beans")],ClientSideRowModel.prototype,"beans",void 0),__decorate$2n([Autowired("filterStage")],ClientSideRowModel.prototype,"filterStage",void 0),__decorate$2n([Autowired("sortStage")],ClientSideRowModel.prototype,"sortStage",void 0),__decorate$2n([Autowired("flattenStage")],ClientSideRowModel.prototype,"flattenStage",void 0),__decorate$2n([Optional("groupStage")],ClientSideRowModel.prototype,"groupStage",void 0),__decorate$2n([Optional("aggregationStage")],ClientSideRowModel.prototype,"aggregationStage",void 0),__decorate$2n([Optional("pivotStage")],ClientSideRowModel.prototype,"pivotStage",void 0),__decorate$2n([Optional("filterAggregatesStage")],ClientSideRowModel.prototype,"filterAggregatesStage",void 0),__decorate$2n([PostConstruct],ClientSideRowModel.prototype,"init",null),ClientSideRowModel=__decorate$2n([Bean("rowModel")],ClientSideRowModel)}(BeanStub),__extends$2H=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2o=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FilterStage=function(_super){function FilterStage(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2H(FilterStage,_super),FilterStage.prototype.execute=function(params){var changedPath=params.changedPath;this.filterService.filter(changedPath)},__decorate$2o([Autowired("filterService")],FilterStage.prototype,"filterService",void 0),FilterStage=__decorate$2o([Bean("filterStage")],FilterStage)}(BeanStub),__extends$2I=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2p=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SortStage=function(_super){function SortStage(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2I(SortStage,_super),SortStage.prototype.execute=function(params){var sortOptions=this.sortController.getSortOptions(),sortActive=_.exists(sortOptions)&&sortOptions.length>0,deltaSort=sortActive&&_.exists(params.rowNodeTransactions)&&this.gridOptionsWrapper.isDeltaSort(),sortContainsGroupColumns=sortOptions.some((function(opt){return!!opt.column.getColDef().showRowGroup}));this.sortService.sort(sortOptions,sortActive,deltaSort,params.rowNodeTransactions,params.changedPath,sortContainsGroupColumns)},__decorate$2p([Autowired("sortService")],SortStage.prototype,"sortService",void 0),__decorate$2p([Autowired("sortController")],SortStage.prototype,"sortController",void 0),__decorate$2p([Autowired("columnModel")],SortStage.prototype,"columnModel",void 0),SortStage=__decorate$2p([Bean("sortStage")],SortStage)}(BeanStub),__extends$2J=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FlattenStage=function(_super){function FlattenStage(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2J(FlattenStage,_super),FlattenStage.prototype.execute=function(params){var rootNode=params.rowNode,result=[],nextRowTop={value:0},skipLeafNodes=this.columnModel.isPivotMode(),showRootNode=skipLeafNodes&&rootNode.leafGroup,topList=showRootNode?[rootNode]:rootNode.childrenAfterSort;return this.recursivelyAddToRowsToDisplay(topList,result,nextRowTop,skipLeafNodes,0),!showRootNode&&result.length>0&&this.gridOptionsWrapper.isGroupIncludeTotalFooter()&&(this.ensureFooterNodeExists(rootNode),this.addRowNodeToRowsToDisplay(rootNode.sibling,result,nextRowTop,0)),result},FlattenStage.prototype.recursivelyAddToRowsToDisplay=function(rowsToFlatten,result,nextRowTop,skipLeafNodes,uiLevel){if(!_.missingOrEmpty(rowsToFlatten))for(var hideOpenParents=this.gridOptionsWrapper.isGroupHideOpenParents(),groupRemoveSingleChildren=this.gridOptionsWrapper.isGroupRemoveSingleChildren(),groupRemoveLowestSingleChildren=!groupRemoveSingleChildren&&this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren(),i=0;i<rowsToFlatten.length;i++){var rowNode=rowsToFlatten[i],isParent=rowNode.hasChildren(),isSkippedLeafNode=skipLeafNodes&&!isParent,isRemovedSingleChildrenGroup=groupRemoveSingleChildren&&isParent&&1===rowNode.childrenAfterGroup.length,isRemovedLowestSingleChildrenGroup=groupRemoveLowestSingleChildren&&isParent&&rowNode.leafGroup&&1===rowNode.childrenAfterGroup.length,neverAllowToExpand=skipLeafNodes&&rowNode.leafGroup,isHiddenOpenParent=hideOpenParents&&rowNode.expanded&&!rowNode.master&&!neverAllowToExpand;if(!(isSkippedLeafNode||isHiddenOpenParent||isRemovedSingleChildrenGroup||isRemovedLowestSingleChildrenGroup)&&this.addRowNodeToRowsToDisplay(rowNode,result,nextRowTop,uiLevel),!skipLeafNodes||!rowNode.leafGroup)if(isParent){var excludedParent=isRemovedSingleChildrenGroup||isRemovedLowestSingleChildrenGroup;if(rowNode.expanded||excludedParent){var uiLevelForChildren=excludedParent?uiLevel:uiLevel+1;this.recursivelyAddToRowsToDisplay(rowNode.childrenAfterSort,result,nextRowTop,skipLeafNodes,uiLevelForChildren),this.gridOptionsWrapper.isGroupIncludeFooter()&&(this.ensureFooterNodeExists(rowNode),this.addRowNodeToRowsToDisplay(rowNode.sibling,result,nextRowTop,uiLevel))}}else if(rowNode.master&&rowNode.expanded){var detailNode=this.createDetailNode(rowNode);this.addRowNodeToRowsToDisplay(detailNode,result,nextRowTop,uiLevel)}}},FlattenStage.prototype.addRowNodeToRowsToDisplay=function(rowNode,result,nextRowTop,uiLevel){var isGroupMultiAutoColumn=this.gridOptionsWrapper.isGroupMultiAutoColumn();result.push(rowNode),rowNode.setUiLevel(isGroupMultiAutoColumn?0:uiLevel)},FlattenStage.prototype.ensureFooterNodeExists=function(groupNode){if(!_.exists(groupNode.sibling)){var footerNode=new RowNode(this.beans);Object.keys(groupNode).forEach((function(key){footerNode[key]=groupNode[key]})),footerNode.footer=!0,footerNode.setRowTop(null),footerNode.setRowIndex(null),footerNode.oldRowTop=null,_.exists(footerNode.id)&&(footerNode.id="rowGroupFooter_"+footerNode.id),footerNode.sibling=groupNode,groupNode.sibling=footerNode}},FlattenStage.prototype.createDetailNode=function(masterNode){if(_.exists(masterNode.detailNode))return masterNode.detailNode;var detailNode=new RowNode(this.beans);return detailNode.detail=!0,detailNode.selectable=!1,detailNode.parent=masterNode,_.exists(masterNode.id)&&(detailNode.id="detail_"+masterNode.id),detailNode.data=masterNode.data,detailNode.level=masterNode.level+1,masterNode.detailNode=detailNode,detailNode},__decorate$2q([Autowired("columnModel")],FlattenStage.prototype,"columnModel",void 0),__decorate$2q([Autowired("beans")],FlattenStage.prototype,"beans",void 0),FlattenStage=__decorate$2q([Bean("flattenStage")],FlattenStage)}(BeanStub),__extends$2K=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2r=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SortService=function(_super){function SortService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2K(SortService,_super),SortService.prototype.init=function(){this.postSortFunc=this.gridOptionsWrapper.getPostSortFunc()},SortService.prototype.sort=function(sortOptions,sortActive,useDeltaSort,rowNodeTransactions,changedPath,sortContainsGroupColumns){var _this=this,groupMaintainOrder=this.gridOptionsWrapper.isGroupMaintainOrder(),groupColumnsPresent=this.columnModel.getAllGridColumns().some((function(c){return c.isRowGroupActive()})),allDirtyNodes={};useDeltaSort&&rowNodeTransactions&&(allDirtyNodes=this.calculateDirtyNodes(rowNodeTransactions));var isPivotMode=this.columnModel.isPivotMode();changedPath&&changedPath.forEachChangedNodeDepthFirst((function(rowNode){_this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterAggFilter,!0);var skipSortingPivotLeafs=isPivotMode&&rowNode.leafGroup,skipSortingGroups=groupMaintainOrder&&groupColumnsPresent&&!rowNode.leafGroup&&!sortContainsGroupColumns;if(!sortActive||skipSortingGroups||skipSortingPivotLeafs){var childrenToBeSorted=rowNode.childrenAfterAggFilter.slice(0);if(groupMaintainOrder&&rowNode.childrenAfterSort){var indexedOrders_1=rowNode.childrenAfterSort.reduce((function(acc,row,idx){return acc[row.id]=idx,acc}),{});childrenToBeSorted.sort((function(row1,row2){return(indexedOrders_1[row1.id]||0)-(indexedOrders_1[row2.id]||0)}))}rowNode.childrenAfterSort=childrenToBeSorted}else rowNode.childrenAfterSort=useDeltaSort?_this.doDeltaSort(rowNode,allDirtyNodes,changedPath,sortOptions):_this.rowNodeSorter.doFullSort(rowNode.childrenAfterAggFilter,sortOptions);if(rowNode.sibling&&(rowNode.sibling.childrenAfterSort=rowNode.childrenAfterSort),_this.updateChildIndexes(rowNode),_this.postSortFunc){var params={nodes:rowNode.childrenAfterSort};_this.postSortFunc(params)}})),this.updateGroupDataForHideOpenParents(changedPath)},SortService.prototype.calculateDirtyNodes=function(rowNodeTransactions){var dirtyNodes={},addNodesFunc=function(rowNodes){rowNodes&&rowNodes.forEach((function(rowNode){return dirtyNodes[rowNode.id]=!0}))};return rowNodeTransactions&&rowNodeTransactions.forEach((function(tran){addNodesFunc(tran.add),addNodesFunc(tran.update),addNodesFunc(tran.remove)})),dirtyNodes},SortService.prototype.doDeltaSort=function(rowNode,allTouchedNodes,changedPath,sortOptions){var _this=this,unsortedRows=rowNode.childrenAfterAggFilter,oldSortedRows=rowNode.childrenAfterSort;if(!oldSortedRows)return this.rowNodeSorter.doFullSort(unsortedRows,sortOptions);var untouchedRowsMap={},touchedRows=[];unsortedRows.forEach((function(row){allTouchedNodes[row.id]||!changedPath.canSkip(row)?touchedRows.push(row):untouchedRowsMap[row.id]=!0}));var sortedUntouchedRows=oldSortedRows.filter((function(child){return untouchedRowsMap[child.id]})),mapNodeToSortedNode=function(rowNode,pos){return{currentPos:pos,rowNode}},sortedChangedRows=touchedRows.map(mapNodeToSortedNode).sort((function(a,b){return _this.rowNodeSorter.compareRowNodes(sortOptions,a,b)}));return this.mergeSortedArrays(sortOptions,sortedChangedRows,sortedUntouchedRows.map(mapNodeToSortedNode)).map((function(_a){return _a.rowNode}))},SortService.prototype.mergeSortedArrays=function(sortOptions,arr1,arr2){for(var res=[],i=0,j=0;i<arr1.length&&j<arr2.length;){this.rowNodeSorter.compareRowNodes(sortOptions,arr1[i],arr2[j])<0?res.push(arr1[i++]):res.push(arr2[j++])}for(;i<arr1.length;)res.push(arr1[i++]);for(;j<arr2.length;)res.push(arr2[j++]);return res},SortService.prototype.updateChildIndexes=function(rowNode){if(!_.missing(rowNode.childrenAfterSort))for(var listToSort=rowNode.childrenAfterSort,i=0;i<listToSort.length;i++){var child=listToSort[i],firstChild=0===i,lastChild=i===rowNode.childrenAfterSort.length-1;child.setFirstChild(firstChild),child.setLastChild(lastChild),child.setChildIndex(i)}},SortService.prototype.updateGroupDataForHideOpenParents=function(changedPath){var _this=this;if(this.gridOptionsWrapper.isGroupHideOpenParents()){if(this.gridOptionsWrapper.isTreeData()){return _.doOnce((function(){return console.warn("AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).")}),"sortService.hideOpenParentsWithTreeData"),!1}var callback=function(rowNode){_this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterSort,!1),rowNode.childrenAfterSort.forEach((function(child){child.hasChildren()&&callback(child)}))};changedPath&&changedPath.executeFromRootNode((function(rowNode){return callback(rowNode)}))}},SortService.prototype.pullDownGroupDataForHideOpenParents=function(rowNodes,clearOperation){var _this=this;this.gridOptionsWrapper.isGroupHideOpenParents()&&!_.missing(rowNodes)&&rowNodes.forEach((function(childRowNode){_this.columnModel.getGroupDisplayColumns().forEach((function(groupDisplayCol){var showRowGroup=groupDisplayCol.getColDef().showRowGroup;if("string"==typeof showRowGroup){var displayingGroupKey=showRowGroup,rowGroupColumn=_this.columnModel.getPrimaryColumn(displayingGroupKey);if(!(rowGroupColumn===childRowNode.rowGroupColumn))if(clearOperation)childRowNode.setGroupValue(groupDisplayCol.getId(),void 0);else{var parentToStealFrom=childRowNode.getFirstChildOfFirstChild(rowGroupColumn);parentToStealFrom&&childRowNode.setGroupValue(groupDisplayCol.getId(),parentToStealFrom.key)}}else console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup")}))}))},__decorate$2r([Autowired("columnModel")],SortService.prototype,"columnModel",void 0),__decorate$2r([Autowired("rowNodeSorter")],SortService.prototype,"rowNodeSorter",void 0),__decorate$2r([PostConstruct],SortService.prototype,"init",null),SortService=__decorate$2r([Bean("sortService")],SortService)}(BeanStub),__extends$2L=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2s=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FilterService=function(_super){function FilterService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2L(FilterService,_super),FilterService.prototype.filter=function(changedPath){var filterActive=this.filterManager.isColumnFilterPresent()||this.filterManager.isQuickFilterPresent()||this.gridOptionsWrapper.isExternalFilterPresent();this.filterNodes(filterActive,changedPath)},FilterService.prototype.filterNodes=function(filterActive,changedPath){var _this=this,filterCallback=function(rowNode,includeChildNodes){rowNode.hasChildren()?rowNode.childrenAfterFilter=filterActive&&!includeChildNodes?rowNode.childrenAfterGroup.filter((function(childNode){var passBecauseChildren=childNode.childrenAfterFilter&&childNode.childrenAfterFilter.length>0,passBecauseDataPasses=childNode.data&&_this.filterManager.doesRowPassFilter({rowNode:childNode});return passBecauseChildren||passBecauseDataPasses})):rowNode.childrenAfterGroup:rowNode.childrenAfterFilter=rowNode.childrenAfterGroup,rowNode.sibling&&(rowNode.sibling.childrenAfterFilter=rowNode.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var treeDataDepthFirstFilter_1=function(rowNode,alreadyFoundInParent){if(rowNode.childrenAfterGroup)for(var i=0;i<rowNode.childrenAfterGroup.length;i++){var childNode=rowNode.childrenAfterGroup[i],foundInParent=alreadyFoundInParent||_this.filterManager.doesRowPassFilter({rowNode:childNode});childNode.childrenAfterGroup?treeDataDepthFirstFilter_1(rowNode.childrenAfterGroup[i],foundInParent):filterCallback(childNode,foundInParent)}filterCallback(rowNode,alreadyFoundInParent)};changedPath.executeFromRootNode((function(rowNode){return treeDataDepthFirstFilter_1(rowNode,!1)}))}else{changedPath.forEachChangedNodeDepthFirst((function(rowNode){return filterCallback(rowNode,!1)}),!0)}},FilterService.prototype.doingTreeDataFiltering=function(){return this.gridOptionsWrapper.isTreeData()&&!this.gridOptionsWrapper.isExcludeChildrenWhenTreeDataFiltering()},__decorate$2s([Autowired("filterManager")],FilterService.prototype,"filterManager",void 0),FilterService=__decorate$2s([Bean("filterService")],FilterService)}(BeanStub),__extends$2M=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2t=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$j=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},ImmutableService=function(_super){function ImmutableService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2M(ImmutableService,_super),ImmutableService.prototype.postConstruct=function(){this.rowModel.getType()===Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},ImmutableService.prototype.isActive=function(){return this.gridOptionsWrapper.isImmutableData()},ImmutableService.prototype.setRowData=function(rowData){var transactionAndMap=this.createTransactionForRowData(rowData);if(transactionAndMap){var _a=__read$j(transactionAndMap,2),transaction=_a[0],orderIdMap=_a[1],nodeTransaction=this.clientSideRowModel.updateRowData(transaction,orderIdMap);nodeTransaction&&this.rowRenderer.refreshFullWidthRows(nodeTransaction.update);var rowDataChangedEvent={type:Events.EVENT_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(rowDataChangedEvent)}},ImmutableService.prototype.createTransactionForRowData=function(rowData){if(_.missing(this.clientSideRowModel))console.error("AG Grid: ImmutableService only works with ClientSideRowModel");else{var getRowIdFunc=this.gridOptionsWrapper.getRowIdFunc();if(null!=getRowIdFunc){var transaction={remove:[],update:[],add:[]},existingNodesMap=this.clientSideRowModel.getCopyOfNodesMap(),orderMap=this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder()?void 0:{};return _.exists(rowData)&&rowData.forEach((function(data,index){var id=getRowIdFunc({data,level:0}),existingNode=existingNodesMap[id];(orderMap&&(orderMap[id]=index),existingNode)?(existingNode.data!==data&&transaction.update.push(data),existingNodesMap[id]=void 0):transaction.add.push(data)})),_.iterateObject(existingNodesMap,(function(id,rowNode){rowNode&&transaction.remove.push(rowNode.data)})),[transaction,orderMap]}console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!")}},__decorate$2t([Autowired("rowModel")],ImmutableService.prototype,"rowModel",void 0),__decorate$2t([Autowired("rowRenderer")],ImmutableService.prototype,"rowRenderer",void 0),__decorate$2t([Autowired("columnApi")],ImmutableService.prototype,"columnApi",void 0),__decorate$2t([Autowired("gridApi")],ImmutableService.prototype,"gridApi",void 0),__decorate$2t([PostConstruct],ImmutableService.prototype,"postConstruct",null),ImmutableService=__decorate$2t([Bean("immutableService")],ImmutableService)}(BeanStub),ClientSideRowModelModule={moduleName:exports.ModuleNames.ClientSideRowModelModule,beans:[FilterStage,SortStage,FlattenStage,SortService,FilterService,ImmutableService],rowModels:{clientSide:ClientSideRowModel}},__extends$2N=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2u=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},InfiniteBlock=function(_super){function InfiniteBlock(id,parentCache,params){var _this=_super.call(this,id)||this;return _this.parentCache=parentCache,_this.params=params,_this.startRow=id*params.blockSize,_this.endRow=_this.startRow+params.blockSize,_this}return __extends$2N(InfiniteBlock,_super),InfiniteBlock.prototype.postConstruct=function(){this.createRowNodes()},InfiniteBlock.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},InfiniteBlock.prototype.setDataAndId=function(rowNode,data,index){!rowNode.id&&rowNode.alreadyRendered&&(rowNode.alreadyRendered=!1),_.exists(data)?rowNode.setDataAndId(data,index.toString()):rowNode.setDataAndId(void 0,void 0)},InfiniteBlock.prototype.loadFromDatasource=function(){var _this=this,params=this.createLoadParams();_.missing(this.params.datasource.getRows)?console.warn("AG Grid: datasource is missing getRows method"):window.setTimeout((function(){_this.params.datasource.getRows(params)}),0)},InfiniteBlock.prototype.processServerFail=function(){},InfiniteBlock.prototype.createLoadParams=function(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsWrapper.getContext()}},InfiniteBlock.prototype.forEachNode=function(callback,sequence,rowCount){var _this=this;this.rowNodes.forEach((function(rowNode,index){_this.startRow+index<rowCount&&callback(rowNode,sequence.next())}))},InfiniteBlock.prototype.getLastAccessed=function(){return this.lastAccessed},InfiniteBlock.prototype.getRow=function(rowIndex,dontTouchLastAccessed){void 0===dontTouchLastAccessed&&(dontTouchLastAccessed=!1),dontTouchLastAccessed||(this.lastAccessed=this.params.lastAccessedSequence.next());var localIndex=rowIndex-this.startRow;return this.rowNodes[localIndex]},InfiniteBlock.prototype.getStartRow=function(){return this.startRow},InfiniteBlock.prototype.getEndRow=function(){return this.endRow},InfiniteBlock.prototype.createRowNodes=function(){this.rowNodes=[];for(var i=0;i<this.params.blockSize;i++){var rowIndex=this.startRow+i,rowNode=new RowNode(this.beans);rowNode.setRowHeight(this.params.rowHeight),rowNode.uiLevel=0,rowNode.setRowIndex(rowIndex),rowNode.setRowTop(this.params.rowHeight*rowIndex),this.rowNodes.push(rowNode)}},InfiniteBlock.prototype.processServerResult=function(params){var _this=this;this.rowNodes.forEach((function(rowNode,index){var data=params.rowData?params.rowData[index]:void 0;_this.setDataAndId(rowNode,data,_this.startRow+index)}));var finalRowCount=null!=params.rowCount&&params.rowCount>=0?params.rowCount:void 0;this.parentCache.pageLoaded(this,finalRowCount)},InfiniteBlock.prototype.destroyRowNodes=function(){this.rowNodes.forEach((function(rowNode){rowNode.clearRowTopAndRowIndex()}))},__decorate$2u([Autowired("beans")],InfiniteBlock.prototype,"beans",void 0),__decorate$2u([PostConstruct],InfiniteBlock.prototype,"postConstruct",null),__decorate$2u([PreDestroy],InfiniteBlock.prototype,"destroyRowNodes",null),InfiniteBlock}(RowNodeBlock),__extends$2O=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2v=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$a=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},InfiniteCache=function(_super){function InfiniteCache(params){var _this=_super.call(this)||this;return _this.lastRowIndexKnown=!1,_this.blocks={},_this.blockCount=0,_this.rowCount=params.initialRowCount,_this.params=params,_this}return __extends$2O(InfiniteCache,_super),InfiniteCache.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("InfiniteCache")},InfiniteCache.prototype.getRow=function(rowIndex,dontCreatePage){void 0===dontCreatePage&&(dontCreatePage=!1);var blockId=Math.floor(rowIndex/this.params.blockSize),block=this.blocks[blockId];if(!block){if(dontCreatePage)return;block=this.createBlock(blockId)}return block.getRow(rowIndex)},InfiniteCache.prototype.createBlock=function(blockNumber){var newBlock=this.createBean(new InfiniteBlock(blockNumber,this,this.params));return this.blocks[newBlock.getId()]=newBlock,this.blockCount++,this.purgeBlocksIfNeeded(newBlock),this.params.rowNodeBlockLoader.addBlock(newBlock),newBlock},InfiniteCache.prototype.refreshCache=function(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach((function(block){return block.setStateWaitingToLoad()})),this.params.rowNodeBlockLoader.checkBlockToLoad())},InfiniteCache.prototype.destroyAllBlocks=function(){var _this=this;this.getBlocksInOrder().forEach((function(block){return _this.destroyBlock(block)}))},InfiniteCache.prototype.getRowCount=function(){return this.rowCount},InfiniteCache.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},InfiniteCache.prototype.pageLoaded=function(block,lastRow){this.isAlive()&&(this.logger.log("onPageLoaded: page = "+block.getId()+", lastRow = "+lastRow),this.checkRowCount(block,lastRow),this.onCacheUpdated())},InfiniteCache.prototype.purgeBlocksIfNeeded=function(blockToExclude){var _this=this,blocksForPurging=this.getBlocksInOrder().filter((function(b){return b!=blockToExclude}));blocksForPurging.sort((function(a,b){return b.getLastAccessed()-a.getLastAccessed()}));var maxBlocksProvided=this.params.maxBlocksInCache>0,blocksToKeep=maxBlocksProvided?this.params.maxBlocksInCache-1:null,emptyBlocksToKeep=InfiniteCache.MAX_EMPTY_BLOCKS_TO_KEEP-1;blocksForPurging.forEach((function(block,index){if(block.getState()===InfiniteBlock.STATE_WAITING_TO_LOAD&&index>=emptyBlocksToKeep||!!maxBlocksProvided&&index>=blocksToKeep){if(_this.isBlockCurrentlyDisplayed(block))return;if(_this.isBlockFocused(block))return;_this.removeBlockFromCache(block)}}))},InfiniteCache.prototype.isBlockFocused=function(block){var focusedCell=this.focusService.getFocusCellToUseAfterRefresh();if(!focusedCell)return!1;if(null!=focusedCell.rowPinned)return!1;var blockIndexStart=block.getStartRow(),blockIndexEnd=block.getEndRow();return focusedCell.rowIndex>=blockIndexStart&&focusedCell.rowIndex<blockIndexEnd},InfiniteCache.prototype.isBlockCurrentlyDisplayed=function(block){var startIndex=block.getStartRow(),endIndex=block.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(startIndex,endIndex)},InfiniteCache.prototype.removeBlockFromCache=function(blockToRemove){blockToRemove&&this.destroyBlock(blockToRemove)},InfiniteCache.prototype.checkRowCount=function(block,lastRow){if("number"==typeof lastRow&&lastRow>=0)this.rowCount=lastRow,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var lastRowIndexPlusOverflow=(block.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<lastRowIndexPlusOverflow&&(this.rowCount=lastRowIndexPlusOverflow)}},InfiniteCache.prototype.setRowCount=function(rowCount,lastRowIndexKnown){this.rowCount=rowCount,_.exists(lastRowIndexKnown)&&(this.lastRowIndexKnown=lastRowIndexKnown),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()},InfiniteCache.prototype.forEachNodeDeep=function(callback){var _this=this,sequence=new NumberSequence;this.getBlocksInOrder().forEach((function(block){return block.forEachNode(callback,sequence,_this.rowCount)}))},InfiniteCache.prototype.getBlocksInOrder=function(){return _.getAllValuesInObject(this.blocks).sort((function(a,b){return a.getId()-b.getId()}))},InfiniteCache.prototype.destroyBlock=function(block){delete this.blocks[block.getId()],this.destroyBean(block),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(block)},InfiniteCache.prototype.onCacheUpdated=function(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();var event_1={type:Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(event_1)}},InfiniteCache.prototype.destroyAllBlocksPastVirtualRowCount=function(){var _this=this,blocksToDestroy=[];this.getBlocksInOrder().forEach((function(block){block.getId()*_this.params.blockSize>=_this.rowCount&&blocksToDestroy.push(block)})),blocksToDestroy.length>0&&blocksToDestroy.forEach((function(block){return _this.destroyBlock(block)}))},InfiniteCache.prototype.purgeCache=function(){var _this=this;this.getBlocksInOrder().forEach((function(block){return _this.removeBlockFromCache(block)})),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},InfiniteCache.prototype.getRowNodesInRange=function(firstInRange,lastInRange){var _this=this,result=[],lastBlockId=-1,inActiveRange=!1,numberSequence=new NumberSequence;_.missing(firstInRange)&&(inActiveRange=!0);var foundGapInSelection=!1;return this.getBlocksInOrder().forEach((function(block){foundGapInSelection||(inActiveRange&&lastBlockId+1!==block.getId()?foundGapInSelection=!0:(lastBlockId=block.getId(),block.forEachNode((function(rowNode){var hitFirstOrLast=rowNode===firstInRange||rowNode===lastInRange;(inActiveRange||hitFirstOrLast)&&result.push(rowNode),hitFirstOrLast&&(inActiveRange=!inActiveRange)}),numberSequence,_this.rowCount)))})),foundGapInSelection||inActiveRange?[]:result},InfiniteCache.MAX_EMPTY_BLOCKS_TO_KEEP=2,__decorate$2v([Autowired("rowRenderer")],InfiniteCache.prototype,"rowRenderer",void 0),__decorate$2v([Autowired("focusService")],InfiniteCache.prototype,"focusService",void 0),__decorate$2v([__param$a(0,Qualifier("loggerFactory"))],InfiniteCache.prototype,"setBeans",null),__decorate$2v([PreDestroy],InfiniteCache.prototype,"destroyAllBlocks",null),InfiniteCache}(BeanStub),__extends$2P=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2w=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},InfiniteRowModel=function(_super){function InfiniteRowModel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2P(InfiniteRowModel,_super),InfiniteRowModel.prototype.getRowBounds=function(index){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*index}},InfiniteRowModel.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){return!1},InfiniteRowModel.prototype.init=function(){var _this=this;this.gridOptionsWrapper.isRowModelInfinite()&&(this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc((function(){return _this.destroyCache()})),this.verifyProps())},InfiniteRowModel.prototype.verifyProps=function(){if(null!=this.gridOptionsWrapper.getInitialGroupOrderComparator()){_.doOnce((function(){return console.warn("AG Grid: initialGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.")}),"IRM.InitialGroupOrderComparator")}},InfiniteRowModel.prototype.start=function(){this.setDatasource(this.gridOptionsWrapper.getDatasource())},InfiniteRowModel.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},InfiniteRowModel.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))},InfiniteRowModel.prototype.onFilterChanged=function(){this.reset()},InfiniteRowModel.prototype.onSortChanged=function(){this.reset()},InfiniteRowModel.prototype.onColumnEverything=function(){(!this.cacheParams||this.isSortModelDifferent())&&this.reset()},InfiniteRowModel.prototype.isSortModelDifferent=function(){return!_.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},InfiniteRowModel.prototype.getType=function(){return Constants.ROW_MODEL_TYPE_INFINITE},InfiniteRowModel.prototype.setDatasource=function(datasource){this.destroyDatasource(),this.datasource=datasource,datasource&&this.reset()},InfiniteRowModel.prototype.isEmpty=function(){return!this.infiniteCache},InfiniteRowModel.prototype.isRowsToRender=function(){return!!this.infiniteCache},InfiniteRowModel.prototype.getNodesInRangeForSelection=function(firstInRange,lastInRange){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(firstInRange,lastInRange):[]},InfiniteRowModel.prototype.reset=function(){if(this.datasource){null!=this.gridOptionsWrapper.getRowIdFunc()||this.selectionService.reset(),this.resetCache();var event=this.createModelUpdatedEvent();this.eventService.dispatchEvent(event)}},InfiniteRowModel.prototype.createModelUpdatedEvent=function(){return{type:Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}},InfiniteRowModel.prototype.resetCache=function(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.defaultIfInvalid(this.gridOptionsWrapper.getInfiniteInitialRowCount(),1),maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache(),rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsWrapper.getCacheOverflowSize(),1),blockSize:this.defaultIfInvalid(this.gridOptionsWrapper.getCacheBlockSize(),100),lastAccessedSequence:new NumberSequence},this.infiniteCache=this.createBean(new InfiniteCache(this.cacheParams))},InfiniteRowModel.prototype.defaultIfInvalid=function(value,defaultValue){return value>0?value:defaultValue},InfiniteRowModel.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},InfiniteRowModel.prototype.onCacheUpdated=function(){var event=this.createModelUpdatedEvent();this.eventService.dispatchEvent(event)},InfiniteRowModel.prototype.getRow=function(rowIndex){if(this.infiniteCache&&!(rowIndex>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(rowIndex)},InfiniteRowModel.prototype.getRowNode=function(id){var result;return this.forEachNode((function(rowNode){rowNode.id===id&&(result=rowNode)})),result},InfiniteRowModel.prototype.forEachNode=function(callback){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(callback)},InfiniteRowModel.prototype.getTopLevelRowCount=function(){return this.getRowCount()},InfiniteRowModel.prototype.getTopLevelRowDisplayedIndex=function(topLevelIndex){return topLevelIndex},InfiniteRowModel.prototype.getRowIndexAtPixel=function(pixel){if(0!==this.rowHeight){var rowIndexForPixel=Math.floor(pixel/this.rowHeight),lastRowIndex=this.getRowCount()-1;return rowIndexForPixel>lastRowIndex?lastRowIndex:rowIndexForPixel}return 0},InfiniteRowModel.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},InfiniteRowModel.prototype.isRowPresent=function(rowNode){return!!this.getRowNode(rowNode.id)},InfiniteRowModel.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},InfiniteRowModel.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},InfiniteRowModel.prototype.isLastRowIndexKnown=function(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()},InfiniteRowModel.prototype.setRowCount=function(rowCount,lastRowIndexKnown){this.infiniteCache&&this.infiniteCache.setRowCount(rowCount,lastRowIndexKnown)},__decorate$2w([Autowired("filterManager")],InfiniteRowModel.prototype,"filterManager",void 0),__decorate$2w([Autowired("sortController")],InfiniteRowModel.prototype,"sortController",void 0),__decorate$2w([Autowired("selectionService")],InfiniteRowModel.prototype,"selectionService",void 0),__decorate$2w([Autowired("gridApi")],InfiniteRowModel.prototype,"gridApi",void 0),__decorate$2w([Autowired("columnApi")],InfiniteRowModel.prototype,"columnApi",void 0),__decorate$2w([Autowired("rowRenderer")],InfiniteRowModel.prototype,"rowRenderer",void 0),__decorate$2w([Autowired("rowNodeBlockLoader")],InfiniteRowModel.prototype,"rowNodeBlockLoader",void 0),__decorate$2w([PostConstruct],InfiniteRowModel.prototype,"init",null),__decorate$2w([PreDestroy],InfiniteRowModel.prototype,"destroyDatasource",null),InfiniteRowModel=__decorate$2w([Bean("rowModel")],InfiniteRowModel)}(BeanStub),InfiniteRowModelModule={moduleName:exports.ModuleNames.InfiniteRowModelModule,rowModels:{infinite:InfiniteRowModel}},BaseCreator=function(){function BaseCreator(){}return BaseCreator.prototype.setBeans=function(beans){this.beans=beans},BaseCreator.prototype.getFileName=function(fileName){var extension=this.getDefaultFileExtension();return null!=fileName&&fileName.length||(fileName=this.getDefaultFileName()),-1===fileName.indexOf(".")?fileName+"."+extension:fileName},BaseCreator.prototype.getData=function(params){var serializingSession=this.createSerializingSession(params);return this.beans.gridSerializer.serialize(serializingSession,params)},BaseCreator}(),BaseGridSerializingSession=function(){function BaseGridSerializingSession(config){this.groupColumns=[];var columnModel=config.columnModel,valueService=config.valueService,gridOptionsWrapper=config.gridOptionsWrapper,processCellCallback=config.processCellCallback,processHeaderCallback=config.processHeaderCallback,processGroupHeaderCallback=config.processGroupHeaderCallback,processRowGroupCallback=config.processRowGroupCallback;this.columnModel=columnModel,this.valueService=valueService,this.gridOptionsWrapper=gridOptionsWrapper,this.processCellCallback=processCellCallback,this.processHeaderCallback=processHeaderCallback,this.processGroupHeaderCallback=processGroupHeaderCallback,this.processRowGroupCallback=processRowGroupCallback}return BaseGridSerializingSession.prototype.prepare=function(columnsToExport){this.groupColumns=columnsToExport.filter((function(col){return!!col.getColDef().showRowGroup}))},BaseGridSerializingSession.prototype.extractHeaderValue=function(column){var value=this.getHeaderName(this.processHeaderCallback,column);return null!=value?value:""},BaseGridSerializingSession.prototype.extractRowCellValue=function(column,index,accumulatedRowIndex,type,node){var valueForCell,groupIndex=this.gridOptionsWrapper.isGroupMultiAutoColumn()?node.rowGroupIndex:0;valueForCell=node&&node.group&&(index===groupIndex&&-1!==this.groupColumns.indexOf(column)||0===index&&this.gridOptionsWrapper.isGroupUseEntireRow(this.columnModel.isPivotMode()))?this.createValueForGroupNode(node):this.valueService.getValue(column,node);var value=this.processCell(accumulatedRowIndex,node,column,valueForCell,this.processCellCallback,type);return null!=value?value:""},BaseGridSerializingSession.prototype.getHeaderName=function(callback,column){return callback?callback({column,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):this.columnModel.getDisplayNameForColumn(column,"csv",!0)},BaseGridSerializingSession.prototype.createValueForGroupNode=function(node){if(this.processRowGroupCallback)return this.processRowGroupCallback({node,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()});var keys=[node.key];if(!this.gridOptionsWrapper.isGroupMultiAutoColumn())for(;node.parent;)node=node.parent,keys.push(node.key);return keys.reverse().join(" -> ")},BaseGridSerializingSession.prototype.processCell=function(accumulatedRowIndex,rowNode,column,value,processCellCallback,type){return processCellCallback?processCellCallback({accumulatedRowIndex,column,node:rowNode,value,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type}):null!=value?value:""},BaseGridSerializingSession}(),Downloader=function(){function Downloader(){}return Downloader.download=function(fileName,content){var win=document.defaultView||window;if(win){var element=document.createElement("a"),url=win.URL.createObjectURL(content);element.setAttribute("href",url),element.setAttribute("download",fileName),element.style.display="none",document.body.appendChild(element),element.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:win})),document.body.removeChild(element),win.setTimeout((function(){win.URL.revokeObjectURL(url)}),0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},Downloader}(),__extends$2Q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CsvSerializingSession=function(_super){function CsvSerializingSession(config){var _this=_super.call(this,config)||this;_this.isFirstLine=!0,_this.result="";var suppressQuotes=config.suppressQuotes,columnSeparator=config.columnSeparator;return _this.suppressQuotes=suppressQuotes,_this.columnSeparator=columnSeparator,_this}return __extends$2Q(CsvSerializingSession,_super),CsvSerializingSession.prototype.addCustomContent=function(content){var _this=this;content&&("string"==typeof content?(/^\s*\n/.test(content)||this.beginNewLine(),content=content.replace(/\r?\n/g,"\r\n"),this.result+=content):content.forEach((function(row){_this.beginNewLine(),row.forEach((function(cell,index){0!==index&&(_this.result+=_this.columnSeparator),_this.result+=_this.putInQuotes(cell.data.value||""),cell.mergeAcross&&_this.appendEmptyCells(cell.mergeAcross)}))})))},CsvSerializingSession.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},CsvSerializingSession.prototype.onNewHeaderGroupingRowColumn=function(header,index,span){0!=index&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(header),this.appendEmptyCells(span)},CsvSerializingSession.prototype.appendEmptyCells=function(count){for(var i=1;i<=count;i++)this.result+=this.columnSeparator+this.putInQuotes("")},CsvSerializingSession.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},CsvSerializingSession.prototype.onNewHeaderRowColumn=function(column,index){0!=index&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(column))},CsvSerializingSession.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},CsvSerializingSession.prototype.onNewBodyRowColumn=function(column,index,node){0!=index&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(column,index,index,Constants.EXPORT_TYPE_CSV,node))},CsvSerializingSession.prototype.putInQuotes=function(value){return this.suppressQuotes?value:null==value?'""':("string"==typeof value?stringValue=value:"function"==typeof value.toString?stringValue=value.toString():(console.warn("AG Grid: unknown value type during csv conversion"),stringValue=""),'"'+stringValue.replace(/"/g,'""')+'"');var stringValue},CsvSerializingSession.prototype.parse=function(){return this.result},CsvSerializingSession.prototype.beginNewLine=function(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1},CsvSerializingSession}(BaseGridSerializingSession),__extends$2R=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2x=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CsvCreator=function(_super){function CsvCreator(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2R(CsvCreator,_super),CsvCreator.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},CsvCreator.prototype.getMergedParams=function(params){var baseParams=this.gridOptionsWrapper.getDefaultExportParams("csv");return Object.assign({},baseParams,params)},CsvCreator.prototype.export=function(userParams){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var mergedParams=this.getMergedParams(userParams),data=this.getData(mergedParams),packagedFile=new Blob(["\ufeff",data],{type:"text/plain"});return Downloader.download(this.getFileName(mergedParams.fileName),packagedFile),data},CsvCreator.prototype.exportDataAsCsv=function(params){return this.export(params)},CsvCreator.prototype.getDataAsCsv=function(params){var mergedParams=this.getMergedParams(params);return this.getData(mergedParams)},CsvCreator.prototype.getDefaultFileName=function(){return"export.csv"},CsvCreator.prototype.getDefaultFileExtension=function(){return"csv"},CsvCreator.prototype.createSerializingSession=function(params){var columnModel=this.columnModel,valueService=this.valueService,gridOptionsWrapper=this.gridOptionsWrapper,_b=params,processCellCallback=_b.processCellCallback,processHeaderCallback=_b.processHeaderCallback,processGroupHeaderCallback=_b.processGroupHeaderCallback,processRowGroupCallback=_b.processRowGroupCallback,suppressQuotes=_b.suppressQuotes,columnSeparator=_b.columnSeparator;return new CsvSerializingSession({columnModel,valueService,gridOptionsWrapper,processCellCallback:processCellCallback||void 0,processHeaderCallback:processHeaderCallback||void 0,processGroupHeaderCallback:processGroupHeaderCallback||void 0,processRowGroupCallback:processRowGroupCallback||void 0,suppressQuotes:suppressQuotes||!1,columnSeparator:columnSeparator||","})},CsvCreator.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressCsvExport()},__decorate$2x([Autowired("columnModel")],CsvCreator.prototype,"columnModel",void 0),__decorate$2x([Autowired("valueService")],CsvCreator.prototype,"valueService",void 0),__decorate$2x([Autowired("gridSerializer")],CsvCreator.prototype,"gridSerializer",void 0),__decorate$2x([Autowired("gridOptionsWrapper")],CsvCreator.prototype,"gridOptionsWrapper",void 0),__decorate$2x([PostConstruct],CsvCreator.prototype,"postConstruct",null),CsvCreator=__decorate$2x([Bean("csvCreator")],CsvCreator)}(BaseCreator),__extends$2S=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(RowType){RowType[RowType.HEADER_GROUPING=0]="HEADER_GROUPING",RowType[RowType.HEADER=1]="HEADER",RowType[RowType.BODY=2]="BODY"}(exports.RowType||(exports.RowType={}));var GridSerializer=function(_super){function GridSerializer(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2S(GridSerializer,_super),GridSerializer.prototype.serialize=function(gridSerializingSession,params){void 0===params&&(params={});var columnsToExport=this.getColumnsToExport(params.allColumns,params.columnKeys);return _.compose(this.prepareSession(columnsToExport),this.prependContent(params),this.exportColumnGroups(params,columnsToExport),this.exportHeaders(params,columnsToExport),this.processPinnedTopRows(params,columnsToExport),this.processRows(params,columnsToExport),this.processPinnedBottomRows(params,columnsToExport),this.appendContent(params))(gridSerializingSession).parse()},GridSerializer.prototype.processRow=function(gridSerializingSession,params,columnsToExport,node){var _this=this,rowSkipper=params.shouldRowBeSkipped||function(){return!1},gridOptionsWrapper=this.gridOptionsWrapper,context=gridOptionsWrapper.getContext(),api=gridOptionsWrapper.getApi(),columnApi=gridOptionsWrapper.getColumnApi(),skipSingleChildrenGroup=gridOptionsWrapper.isGroupRemoveSingleChildren(),hideOpenParents=gridOptionsWrapper.isGroupHideOpenParents(),skipLowestSingleChildrenGroup=gridOptionsWrapper.isGroupRemoveLowestSingleChildren(),isLeafNode=this.columnModel.isPivotMode()?node.leafGroup:!node.group,skipRowGroups=params.skipGroups||params.skipRowGroups,shouldSkipLowestGroup=skipLowestSingleChildrenGroup&&node.leafGroup,shouldSkipCurrentGroup=1===node.allChildrenCount&&(skipSingleChildrenGroup||shouldSkipLowestGroup);skipRowGroups&&params.skipGroups&&_.doOnce((function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")}),"gridSerializer-skipGroups");var rowPosition={rowIndex:node.rowIndex,rowPinned:node.rowPinned};if(!(!isLeafNode&&(params.skipRowGroups||shouldSkipCurrentGroup||hideOpenParents)||params.onlySelected&&!node.isSelected()||params.rowNodes&&!params.rowNodes.some((function(position){return _this.rowPositionUtils.sameRow(position,rowPosition)}))||params.skipPinnedTop&&"top"===node.rowPinned||params.skipPinnedBottom&&"bottom"===node.rowPinned)&&((!(-1===node.level)||node.leafGroup)&&!rowSkipper({node,api,columnApi,context}))){var rowAccumulator=gridSerializingSession.onNewBodyRow();if(columnsToExport.forEach((function(column,index){rowAccumulator.onColumn(column,index,node)})),params.getCustomContentBelowRow){var content=params.getCustomContentBelowRow({node,api,columnApi,context});content&&gridSerializingSession.addCustomContent(content)}}},GridSerializer.prototype.appendContent=function(params){return function(gridSerializingSession){var appendContent=params.customFooter||params.appendContent;return appendContent&&(params.customFooter&&_.doOnce((function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")}),"gridSerializer-customFooter"),gridSerializingSession.addCustomContent(appendContent)),gridSerializingSession}},GridSerializer.prototype.prependContent=function(params){return function(gridSerializingSession){var prependContent=params.customHeader||params.prependContent;return prependContent&&(params.customHeader&&_.doOnce((function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")}),"gridSerializer-customHeader"),gridSerializingSession.addCustomContent(prependContent)),gridSerializingSession}},GridSerializer.prototype.prepareSession=function(columnsToExport){return function(gridSerializingSession){return gridSerializingSession.prepare(columnsToExport),gridSerializingSession}},GridSerializer.prototype.exportColumnGroups=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){if(params.skipColumnGroupHeaders)params.columnGroups&&_.doOnce((function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")}),"gridSerializer-columnGroups");else{var groupInstanceIdCreator=new GroupInstanceIdCreator,displayedGroups=_this.displayedGroupCreator.createDisplayedGroups(columnsToExport,_this.columnModel.getGridBalancedTree(),groupInstanceIdCreator,null);_this.recursivelyAddHeaderGroups(displayedGroups,gridSerializingSession,params.processGroupHeaderCallback)}return gridSerializingSession}},GridSerializer.prototype.exportHeaders=function(params,columnsToExport){return function(gridSerializingSession){if(params.skipHeader||params.skipColumnHeaders)params.skipHeader&&_.doOnce((function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")}),"gridSerializer-skipHeader");else{var gridRowIterator_1=gridSerializingSession.onNewHeaderRow();columnsToExport.forEach((function(column,index){gridRowIterator_1.onColumn(column,index,void 0)}))}return gridSerializingSession}},GridSerializer.prototype.processPinnedTopRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport);return _this.pinnedRowModel.forEachPinnedTopRow(processRow),gridSerializingSession}},GridSerializer.prototype.processRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var rowModel=_this.rowModel,rowModelType=rowModel.getType(),usingCsrm=rowModelType===Constants.ROW_MODEL_TYPE_CLIENT_SIDE,usingSsrm=rowModelType===Constants.ROW_MODEL_TYPE_SERVER_SIDE,onlySelectedNonStandardModel=!usingCsrm&&params.onlySelected,processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport);_this.columnModel.isPivotMode()?usingCsrm?rowModel.forEachPivotNode(processRow):rowModel.forEachNode(processRow):params.onlySelectedAllPages||onlySelectedNonStandardModel?_this.selectionService.getSelectedNodes().forEach(processRow):usingCsrm||usingSsrm?rowModel.forEachNodeAfterFilterAndSort(processRow):rowModel.forEachNode(processRow);return gridSerializingSession}},GridSerializer.prototype.processPinnedBottomRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport);return _this.pinnedRowModel.forEachPinnedBottomRow(processRow),gridSerializingSession}},GridSerializer.prototype.getColumnsToExport=function(allColumns,columnKeys){void 0===allColumns&&(allColumns=!1);var isPivotMode=this.columnModel.isPivotMode();return columnKeys&&columnKeys.length?this.columnModel.getGridColumns(columnKeys):allColumns&&!isPivotMode?(this.gridOptionsWrapper.isTreeData()?this.columnModel.getGridColumns([Constants.GROUP_AUTO_COLUMN_ID]):[]).concat(this.columnModel.getAllPrimaryColumns()||[]):this.columnModel.getAllDisplayedColumns()},GridSerializer.prototype.recursivelyAddHeaderGroups=function(displayedGroups,gridSerializingSession,processGroupHeaderCallback){var directChildrenHeaderGroups=[];displayedGroups.forEach((function(columnGroupChild){var columnGroup=columnGroupChild;columnGroup.getChildren&&columnGroup.getChildren().forEach((function(it){return directChildrenHeaderGroups.push(it)}))})),displayedGroups.length>0&&displayedGroups[0]instanceof ColumnGroup&&this.doAddHeaderHeader(gridSerializingSession,displayedGroups,processGroupHeaderCallback),directChildrenHeaderGroups&&directChildrenHeaderGroups.length>0&&this.recursivelyAddHeaderGroups(directChildrenHeaderGroups,gridSerializingSession,processGroupHeaderCallback)},GridSerializer.prototype.doAddHeaderHeader=function(gridSerializingSession,displayedGroups,processGroupHeaderCallback){var _this=this,gridRowIterator=gridSerializingSession.onNewHeaderGroupingRow(),columnIndex=0;displayedGroups.forEach((function(columnGroupChild){var name,columnGroup=columnGroupChild;name=processGroupHeaderCallback?processGroupHeaderCallback({columnGroup,api:_this.gridOptionsWrapper.getApi(),columnApi:_this.gridOptionsWrapper.getColumnApi(),context:_this.gridOptionsWrapper.getContext()}):_this.columnModel.getDisplayNameForColumnGroup(columnGroup,"header");var collapsibleGroupRanges=columnGroup.getLeafColumns().reduce((function(collapsibleGroups,currentColumn,currentIdx,arr){var lastGroup=_.last(collapsibleGroups);return"open"===currentColumn.getColumnGroupShow()?lastGroup&&null==lastGroup[1]||(lastGroup=[currentIdx],collapsibleGroups.push(lastGroup)):lastGroup&&null==lastGroup[1]&&(lastGroup[1]=currentIdx-1),currentIdx===arr.length-1&&lastGroup&&null==lastGroup[1]&&(lastGroup[1]=currentIdx),collapsibleGroups}),[]);gridRowIterator.onColumn(name||"",columnIndex++,columnGroup.getLeafColumns().length-1,collapsibleGroupRanges)}))},__decorate$2y([Autowired("displayedGroupCreator")],GridSerializer.prototype,"displayedGroupCreator",void 0),__decorate$2y([Autowired("columnModel")],GridSerializer.prototype,"columnModel",void 0),__decorate$2y([Autowired("rowModel")],GridSerializer.prototype,"rowModel",void 0),__decorate$2y([Autowired("pinnedRowModel")],GridSerializer.prototype,"pinnedRowModel",void 0),__decorate$2y([Autowired("selectionService")],GridSerializer.prototype,"selectionService",void 0),__decorate$2y([Autowired("rowPositionUtils")],GridSerializer.prototype,"rowPositionUtils",void 0),GridSerializer=__decorate$2y([Bean("gridSerializer")],GridSerializer)}(BeanStub),CsvExportModule={moduleName:exports.ModuleNames.CsvExportModule,beans:[CsvCreator,GridSerializer]},XmlFactory=function(){function XmlFactory(){}return XmlFactory.createHeader=function(headerElement){void 0===headerElement&&(headerElement={});var keys=["version"];return headerElement.version||(headerElement.version="1.0"),headerElement.encoding&&keys.push("encoding"),headerElement.standalone&&keys.push("standalone"),"<?xml "+keys.map((function(key){return key+'="'+headerElement[key]+'"'})).join(" ")+" ?>"},XmlFactory.createXml=function(xmlElement,booleanTransformer){var _this=this,props="";xmlElement.properties&&(xmlElement.properties.prefixedAttributes&&xmlElement.properties.prefixedAttributes.forEach((function(prefixedSet){Object.keys(prefixedSet.map).forEach((function(key){props+=_this.returnAttributeIfPopulated(prefixedSet.prefix+key,prefixedSet.map[key],booleanTransformer)}))})),xmlElement.properties.rawMap&&Object.keys(xmlElement.properties.rawMap).forEach((function(key){props+=_this.returnAttributeIfPopulated(key,xmlElement.properties.rawMap[key],booleanTransformer)})));var result="<"+xmlElement.name+props;return xmlElement.children||null!=xmlElement.textNode?null!=xmlElement.textNode?result+">"+xmlElement.textNode+"</"+xmlElement.name+">\r\n":(result+=">\r\n",xmlElement.children&&xmlElement.children.forEach((function(it){result+=_this.createXml(it,booleanTransformer)})),result+"</"+xmlElement.name+">\r\n"):result+"/>\r\n"},XmlFactory.returnAttributeIfPopulated=function(key,value,booleanTransformer){if(!value&&""!==value&&0!==value)return"";var xmlValue=value;return"boolean"==typeof value&&booleanTransformer&&(xmlValue=booleanTransformer(value))," "+key+'="'+xmlValue+'"'},XmlFactory}(),__values$3=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},crcTable=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),ZipContainer=function(){function ZipContainer(){}return ZipContainer.addFolders=function(paths){paths.forEach(this.addFolder.bind(this))},ZipContainer.addFolder=function(path){this.folders.push({path,created:new Date,isBase64:!1})},ZipContainer.addFile=function(path,content,isBase64){void 0===isBase64&&(isBase64=!1),this.files.push({path,created:new Date,content,isBase64})},ZipContainer.getContent=function(mimeType){void 0===mimeType&&(mimeType="application/zip");var textOutput=this.buildFileStream(),uInt8Output=this.buildUint8Array(textOutput);return this.clearStream(),new Blob([uInt8Output],{type:mimeType})},ZipContainer.clearStream=function(){this.folders=[],this.files=[]},ZipContainer.buildFileStream=function(fData){var e_1,_a;void 0===fData&&(fData="");var totalFiles=this.folders.concat(this.files),len=totalFiles.length,foData="",lL=0,cL=0;try{for(var totalFiles_1=__values$3(totalFiles),totalFiles_1_1=totalFiles_1.next();!totalFiles_1_1.done;totalFiles_1_1=totalFiles_1.next()){var currentFile=totalFiles_1_1.value,_b=this.getHeader(currentFile,lL),fileHeader=_b.fileHeader,folderHeader=_b.folderHeader,content=_b.content;lL+=fileHeader.length+content.length,cL+=folderHeader.length,fData+=fileHeader+content,foData+=folderHeader}}catch(e_1_1){e_1={error:e_1_1}}finally{try{totalFiles_1_1&&!totalFiles_1_1.done&&(_a=totalFiles_1.return)&&_a.call(totalFiles_1)}finally{if(e_1)throw e_1.error}}return fData+foData+this.buildFolderEnd(len,cL,lL)},ZipContainer.getHeader=function(currentFile,offset){var content=currentFile.content,path=currentFile.path,created=currentFile.created,isBase64=currentFile.isBase64,utf8_encode=_.utf8_encode,decToHex=_.decToHex,utfPath=utf8_encode(path),isUTF8=utfPath!==path,time=this.convertTime(created),dt=this.convertDate(created),extraFields="";if(isUTF8){var uExtraFieldPath=decToHex(1,1)+decToHex(this.getFromCrc32Table(utfPath),4)+utfPath;extraFields="up"+decToHex(uExtraFieldPath.length,2)+uExtraFieldPath}var _a=content?this.getConvertedContent(content,isBase64):{size:0,content:""},size=_a.size,convertedContent=_a.content,header="\n\0"+(isUTF8?"\0\b":"\0\0")+"\0\0"+decToHex(time,2)+decToHex(dt,2)+decToHex(size?this.getFromCrc32Table(convertedContent):0,4)+decToHex(size,4)+decToHex(size,4)+decToHex(utfPath.length,2)+decToHex(extraFields.length,2);return{fileHeader:"PK"+header+utfPath+extraFields,folderHeader:"PK\0"+header+"\0\0\0\0\0\0"+(content?"\0\0\0\0":"\0\0\0")+decToHex(offset,4)+utfPath+extraFields,content:convertedContent||""}},ZipContainer.getConvertedContent=function(content,isBase64){return void 0===isBase64&&(isBase64=!1),isBase64&&(content=content.split(";base64,")[1]),{size:(content=isBase64?atob(content):content).length,content}},ZipContainer.buildFolderEnd=function(tLen,cLen,lLen){var decToHex=_.decToHex;return"PK\0\0\0\0"+decToHex(tLen,2)+decToHex(tLen,2)+decToHex(cLen,4)+decToHex(lLen,4)+"\0\0"},ZipContainer.buildUint8Array=function(content){for(var uint8=new Uint8Array(content.length),i=0;i<uint8.length;i++)uint8[i]=content.charCodeAt(i);return uint8},ZipContainer.getFromCrc32Table=function(content){if(!content.length)return 0;for(var size=content.length,iterable=new Uint8Array(size),i=0;i<size;i++)iterable[i]=content.charCodeAt(i);var crc=~0,j=0;for(i=0;i<size;i++)j=iterable[i],crc=crc>>>8^crcTable[255&(crc^j)];return~crc},ZipContainer.convertTime=function(date){var time=date.getHours();return time<<=6,time|=date.getMinutes(),time<<=5,time|=date.getSeconds()/2},ZipContainer.convertDate=function(date){var dt=date.getFullYear()-1980;return dt<<=4,dt|=date.getMonth()+1,dt<<=5,dt|=date.getDate()},ZipContainer.folders=[],ZipContainer.files=[],ZipContainer}();ModuleRegistry.register(ClientSideRowModelModule,!1),ModuleRegistry.register(InfiniteRowModelModule,!1),ModuleRegistry.register(CsvExportModule,!1),exports.AbstractHeaderCellCtrl=AbstractHeaderCellCtrl,exports.AgAbstractField=AgAbstractField,exports.AgAngleSelect=AgAngleSelect,exports.AgCheckbox=AgCheckbox,exports.AgColorPicker=AgColorPicker,exports.AgDialog=AgDialog,exports.AgGroupComponent=AgGroupComponent,exports.AgInputNumberField=AgInputNumberField,exports.AgInputRange=AgInputRange,exports.AgInputTextArea=AgInputTextArea,exports.AgInputTextField=AgInputTextField,exports.AgMenuItemComponent=AgMenuItemComponent,exports.AgMenuList=AgMenuList,exports.AgMenuPanel=AgMenuPanel,exports.AgPanel=AgPanel,exports.AgPromise=AgPromise,exports.AgRadioButton=AgRadioButton,exports.AgSelect=AgSelect,exports.AgSlider=AgSlider,exports.AgStackComponentsRegistry=AgStackComponentsRegistry,exports.AgToggleButton=AgToggleButton,exports.AlignedGridsService=AlignedGridsService,exports.AnimateShowChangeCellRenderer=AnimateShowChangeCellRenderer,exports.AnimateSlideCellRenderer=AnimateSlideCellRenderer,exports.AnimationFrameService=AnimationFrameService,exports.AutoScrollService=AutoScrollService,exports.AutoWidthCalculator=AutoWidthCalculator,exports.Autowired=Autowired,exports.BaseComponentWrapper=BaseComponentWrapper,exports.BaseCreator=BaseCreator,exports.BaseGridSerializingSession=BaseGridSerializingSession,exports.Bean=Bean,exports.BeanStub=BeanStub,exports.Beans=Beans,exports.BodyDropPivotTarget=BodyDropPivotTarget,exports.BodyDropTarget=BodyDropTarget,exports.CellComp=CellComp,exports.CellCtrl=CellCtrl,exports.CellNavigationService=CellNavigationService,exports.CellPositionUtils=CellPositionUtils,exports.ChangedPath=ChangedPath,exports.CheckboxSelectionComponent=CheckboxSelectionComponent,exports.ColDefUtil=ColDefUtil,exports.Color=Color,exports.Column=Column,exports.ColumnApi=ColumnApi,exports.ColumnFactory=ColumnFactory,exports.ColumnGroup=ColumnGroup,exports.ColumnKeyCreator=ColumnKeyCreator,exports.ColumnModel=ColumnModel,exports.ColumnUtils=ColumnUtils,exports.Component=Component,exports.ComponentUtil=ComponentUtil,exports.Constants=Constants,exports.Context=Context,exports.CssClassApplier=CssClassApplier,exports.CssClassManager=CssClassManager,exports.CsvCreator=CsvCreator,exports.CsvExportModule=CsvExportModule,exports.CtrlsService=CtrlsService,exports.CustomTooltipFeature=CustomTooltipFeature,exports.DateFilter=DateFilter,exports.DisplayedGroupCreator=DisplayedGroupCreator,exports.Downloader=Downloader,exports.DragAndDropService=DragAndDropService,exports.DragService=DragService,exports.Environment=Environment,exports.EventService=EventService,exports.Events=Events,exports.ExpressionService=ExpressionService,exports.FilterManager=FilterManager,exports.FloatingFilterMapper=FloatingFilterMapper,exports.FocusService=FocusService,exports.Grid=Grid,exports.GridApi=GridApi,exports.GridBodyComp=GridBodyComp,exports.GridBodyCtrl=GridBodyCtrl,exports.GridComp=GridComp,exports.GridCoreCreator=GridCoreCreator,exports.GridCtrl=GridCtrl,exports.GridHeaderComp=GridHeaderComp,exports.GridHeaderCtrl=GridHeaderCtrl,exports.GridOptionsWrapper=GridOptionsWrapper,exports.GridSerializer=GridSerializer,exports.GroupCellRenderer=GroupCellRenderer,exports.GroupCellRendererCtrl=GroupCellRendererCtrl,exports.GroupInstanceIdCreator=GroupInstanceIdCreator,exports.HeaderCellCtrl=HeaderCellCtrl,exports.HeaderFilterCellComp=HeaderFilterCellComp,exports.HeaderFilterCellCtrl=HeaderFilterCellCtrl,exports.HeaderGroupCellCtrl=HeaderGroupCellCtrl,exports.HeaderNavigationService=HeaderNavigationService,exports.HeaderPositionUtils=HeaderPositionUtils,exports.HeaderRowComp=HeaderRowComp,exports.HeaderRowContainerComp=HeaderRowContainerComp,exports.HeaderRowContainerCtrl=HeaderRowContainerCtrl,exports.HeaderRowCtrl=HeaderRowCtrl,exports.HorizontalResizeService=HorizontalResizeService,exports.KeyCode=KeyCode,exports.LargeTextCellEditor=LargeTextCellEditor,exports.Logger=Logger,exports.LoggerFactory=LoggerFactory,exports.ManagedFocusFeature=ManagedFocusFeature,exports.ModuleRegistry=ModuleRegistry,exports.MouseEventService=MouseEventService,exports.MoveColumnFeature=MoveColumnFeature,exports.NavigationService=NavigationService,exports.NumberFilter=NumberFilter,exports.NumberSequence=NumberSequence,exports.Optional=Optional,exports.PaginationProxy=PaginationProxy,exports.PinnedRowModel=PinnedRowModel,exports.PopupComponent=PopupComponent,exports.PopupEditorWrapper=PopupEditorWrapper,exports.PopupSelectCellEditor=PopupSelectCellEditor,exports.PopupService=PopupService,exports.PopupTextCellEditor=PopupTextCellEditor,exports.PositionableFeature=PositionableFeature,exports.PostConstruct=PostConstruct,exports.PreConstruct=PreConstruct,exports.PreDestroy=PreDestroy,exports.PropertyKeys=PropertyKeys,exports.ProvidedColumnGroup=ProvidedColumnGroup,exports.ProvidedFilter=ProvidedFilter,exports.Qualifier=Qualifier,exports.QuerySelector=function QuerySelector(selector){return querySelectorFunc.bind(this,selector,void 0)},exports.RefSelector=RefSelector,exports.ResizeObserverService=ResizeObserverService,exports.RowContainerComp=RowContainerComp,exports.RowContainerCtrl=RowContainerCtrl,exports.RowCtrl=RowCtrl,exports.RowNode=RowNode,exports.RowNodeBlock=RowNodeBlock,exports.RowNodeBlockLoader=RowNodeBlockLoader,exports.RowNodeSorter=RowNodeSorter,exports.RowPositionUtils=RowPositionUtils,exports.RowRenderer=RowRenderer,exports.ScalarFilter=ScalarFilter,exports.ScrollVisibleService=ScrollVisibleService,exports.SelectCellEditor=SelectCellEditor,exports.SelectableService=SelectableService,exports.SelectionService=SelectionService,exports.SetLeftFeature=SetLeftFeature,exports.SimpleFilter=SimpleFilter,exports.SortController=SortController,exports.StandardMenuFactory=StandardMenuFactory,exports.StylingService=StylingService,exports.TabGuardComp=TabGuardComp,exports.TabGuardCtrl=TabGuardCtrl,exports.TabbedLayout=TabbedLayout,exports.TemplateService=TemplateService,exports.TextCellEditor=TextCellEditor,exports.TextFilter=TextFilter,exports.TextFloatingFilter=TextFloatingFilter,exports.Timer=Timer,exports.TouchListener=TouchListener,exports.UserComponentFactory=UserComponentFactory,exports.UserComponentRegistry=UserComponentRegistry,exports.ValueCache=ValueCache,exports.ValueFormatterService=ValueFormatterService,exports.ValueService=ValueService,exports.VanillaFrameworkOverrides=VanillaFrameworkOverrides,exports.VirtualList=VirtualList,exports.XmlFactory=XmlFactory,exports.ZipContainer=ZipContainer,exports._=_,exports.defaultGroupComparator=function defaultGroupComparator(valueA,valueB,nodeA,nodeB,accentedCompare){void 0===accentedCompare&&(accentedCompare=!1),console.warn("AG Grid: Since ag-grid 11.0.0 defaultGroupComparator is not necessary. You can remove this from your colDef");var nodeAIsGroup=exists(nodeA)&&nodeA.group,nodeBIsGroup=exists(nodeB)&&nodeB.group,bothAreNormal=!nodeAIsGroup&&!nodeBIsGroup;return nodeAIsGroup&&nodeBIsGroup?defaultComparator(nodeA.key,nodeB.key,accentedCompare):bothAreNormal?defaultComparator(valueA,valueB,accentedCompare):nodeAIsGroup?1:-1},exports.getRowContainerTypeForName=getRowContainerTypeForName,exports.simpleHttpRequest=function simpleHttpRequest(params){return new AgPromise((function(resolve){var httpRequest=new XMLHttpRequest;httpRequest.open("GET",params.url),httpRequest.send(),httpRequest.onreadystatechange=function(){4===httpRequest.readyState&&200===httpRequest.status&&resolve(JSON.parse(httpRequest.responseText))}}))},exports.stringToArray=stringToArray},"./node_modules/ag-grid-enterprise/dist/ag-grid-enterprise.cjs.js":(__unused_webpack_module,exports,__webpack_require__)=>{var extendStatics,ExpandState,agGridCommunity=__webpack_require__("./node_modules/ag-grid-community/dist/ag-grid-community.cjs.js"),__extends=(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},LicenseManager=function(_super){function LicenseManager(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.watermarkMessage=void 0,_this}var LicenseManager_1;return __extends(LicenseManager,_super),LicenseManager_1=LicenseManager,LicenseManager.prototype.validateLicense=function(){if(agGridCommunity._.missingOrEmpty(LicenseManager_1.licenseKey))this.outputMissingLicenseKey();else if(LicenseManager_1.licenseKey.length>32){var _a=LicenseManager_1.extractLicenseComponents(LicenseManager_1.licenseKey),md5=_a.md5,license=_a.license,version=_a.version,isTrial=_a.isTrial;md5===this.md5.md5(license)?agGridCommunity._.exists(version)&&version?this.validateLicenseKeyForVersion(version,!!isTrial,license):this.validateLegacyKey(license):this.outputInvalidLicenseKey()}else this.outputInvalidLicenseKey()},LicenseManager.extractExpiry=function(license){var restrictionHashed=license.substring(license.lastIndexOf("_")+1,license.length);return new Date(parseInt(LicenseManager_1.decode(restrictionHashed),10))},LicenseManager.extractLicenseComponents=function(licenseKey){var cleanedLicenseKey=licenseKey.replace(/[\u200B-\u200D\uFEFF]/g,""),hashStart=(cleanedLicenseKey=cleanedLicenseKey.replace(/\r?\n|\r/g,"")).length-32,md5=cleanedLicenseKey.substring(hashStart),license=cleanedLicenseKey.substring(0,hashStart),_a=__read(LicenseManager_1.extractBracketedInformation(cleanedLicenseKey),2);return{md5,license,version:_a[0],isTrial:_a[1]}},LicenseManager.prototype.getLicenseDetails=function(licenseKey){var _a=LicenseManager_1.extractLicenseComponents(licenseKey),md5=_a.md5,license=_a.license,version=_a.version,isTrial=_a.isTrial,valid=md5===this.md5.md5(license),expiry=null;return valid&&(expiry=LicenseManager_1.extractExpiry(license),valid=!isNaN(expiry.getTime())),{licenseKey,valid,expiry:valid?LicenseManager_1.formatDate(expiry):null,version:version||"legacy",isTrial}},LicenseManager.prototype.isDisplayWatermark=function(){return!agGridCommunity._.missingOrEmpty(this.watermarkMessage)},LicenseManager.prototype.getWatermarkMessage=function(){return this.watermarkMessage||""},LicenseManager.formatDate=function(date){var day=date.getDate(),monthIndex=date.getMonth(),year=date.getFullYear();return day+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][monthIndex]+" "+year},LicenseManager.getGridReleaseDate=function(){return new Date(parseInt(LicenseManager_1.decode(LicenseManager_1.RELEASE_INFORMATION),10))},LicenseManager.decode=function(input){for(var n,r,i,o,u,a,keystr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t="",f=0,e=input.replace(/[^A-Za-z0-9+/=]/g,"");f<e.length;)n=keystr.indexOf(e.charAt(f++))<<2|(o=keystr.indexOf(e.charAt(f++)))>>4,r=(15&o)<<4|(u=keystr.indexOf(e.charAt(f++)))>>2,i=(3&u)<<6|(a=keystr.indexOf(e.charAt(f++))),t+=String.fromCharCode(n),64!=u&&(t+=String.fromCharCode(r)),64!=a&&(t+=String.fromCharCode(i));return t=LicenseManager_1.utf8_decode(t)},LicenseManager.utf8_decode=function(input){input=input.replace(/rn/g,"n");for(var t="",n=0;n<input.length;n++){var r=input.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},LicenseManager.setLicenseKey=function(licenseKey){LicenseManager_1.licenseKey=licenseKey},LicenseManager.extractBracketedInformation=function(licenseKey){var matches=licenseKey.split("[").filter((function(v){return v.indexOf("]")>-1})).map((function(value){return value.split("]")[0]}));if(!matches||0===matches.length)return[null,null];var isTrial=1===matches.filter((function(match){return"TRIAL"===match})).length;return[matches.filter((function(match){return 0===match.indexOf("v")})).map((function(match){return match.replace(/^v/,"")}))[0],isTrial]},LicenseManager.prototype.validateLicenseKeyForVersion=function(version,isTrial,license){"2"===version&&(isTrial?this.validateForTrial(license):this.validateLegacyKey(license))},LicenseManager.prototype.validateLegacyKey=function(license){var gridReleaseDate=LicenseManager_1.getGridReleaseDate(),expiry=LicenseManager_1.extractExpiry(license),valid=!1,current=!1;if(isNaN(expiry.getTime())||(valid=!0,current=gridReleaseDate<expiry),valid){if(!current){var formattedExpiryDate=LicenseManager_1.formatDate(expiry),formattedReleaseDate=LicenseManager_1.formatDate(gridReleaseDate);this.outputIncompatibleVersion(formattedExpiryDate,formattedReleaseDate)}}else this.outputInvalidLicenseKey()},LicenseManager.prototype.validateForTrial=function(license){var expiry=LicenseManager_1.extractExpiry(license),now=new Date,valid=!1,current=!1;if(isNaN(expiry.getTime())||(valid=!0,current=expiry>now),valid){if(!current){var formattedExpiryDate=LicenseManager_1.formatDate(expiry);this.outputExpiredTrialKey(formattedExpiryDate)}}else this.outputInvalidLicenseKey()},LicenseManager.prototype.outputInvalidLicenseKey=function(){console.error("*****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License ********************************************"),console.error("********************************************* Invalid License ***************************************************"),console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *"),console.error("*****************************************************************************************************************"),console.error("*****************************************************************************************************************"),this.watermarkMessage="Invalid License"},LicenseManager.prototype.outputExpiredTrialKey=function(formattedExpiryDate){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("*****************************************   Trial Period Expired.    *******************************************"),console.error("* Your license for AG Grid Enterprise expired on "+formattedExpiryDate+".                                                *"),console.error("* Please email info@ag-grid.com to purchase a license.                                                         *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="Trial Period Expired"},LicenseManager.prototype.outputMissingLicenseKey=function(){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("****************************************** License Key Not Found ***********************************************"),console.error("* All AG Grid Enterprise features are unlocked.                                                                *"),console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *"),console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="For Trial Use Only"},LicenseManager.prototype.outputIncompatibleVersion=function(formattedExpiryDate,formattedReleaseDate){console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),console.error("*                                             AG Grid Enterprise License                                                   *"),console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *"),console.error("*                                                                                                                          *"),console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *"),console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *"),console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *"),console.error("* license end date. The license key that you have expires on "+formattedExpiryDate+", however the version of AG Grid you    *"),console.error("* are trying to use was released on "+formattedReleaseDate+".                                                               *"),console.error("*                                                                                                                          *"),console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *"),console.error("* version of AG Grid.                                                                                                      *"),console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),this.watermarkMessage="License Expired"},LicenseManager.RELEASE_INFORMATION="MTY1MjQ0MzczMDM1MQ==",__decorate([agGridCommunity.Autowired("md5")],LicenseManager.prototype,"md5",void 0),__decorate([agGridCommunity.PreConstruct],LicenseManager.prototype,"validateLicense",null),LicenseManager=LicenseManager_1=__decorate([agGridCommunity.Bean("licenseManager")],LicenseManager)}(agGridCommunity.BeanStub),__extends$1=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MD5=function(_super){function MD5(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.ieCompatibility=!1,_this}return __extends$1(MD5,_super),MD5.prototype.init=function(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")},MD5.prototype.md5cycle=function(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=this.ff(a,b,c,d,k[0],7,-680876936),d=this.ff(d,a,b,c,k[1],12,-389564586),c=this.ff(c,d,a,b,k[2],17,606105819),b=this.ff(b,c,d,a,k[3],22,-1044525330),a=this.ff(a,b,c,d,k[4],7,-176418897),d=this.ff(d,a,b,c,k[5],12,1200080426),c=this.ff(c,d,a,b,k[6],17,-1473231341),b=this.ff(b,c,d,a,k[7],22,-45705983),a=this.ff(a,b,c,d,k[8],7,1770035416),d=this.ff(d,a,b,c,k[9],12,-1958414417),c=this.ff(c,d,a,b,k[10],17,-42063),b=this.ff(b,c,d,a,k[11],22,-1990404162),a=this.ff(a,b,c,d,k[12],7,1804603682),d=this.ff(d,a,b,c,k[13],12,-40341101),c=this.ff(c,d,a,b,k[14],17,-1502002290),b=this.ff(b,c,d,a,k[15],22,1236535329),a=this.gg(a,b,c,d,k[1],5,-165796510),d=this.gg(d,a,b,c,k[6],9,-1069501632),c=this.gg(c,d,a,b,k[11],14,643717713),b=this.gg(b,c,d,a,k[0],20,-373897302),a=this.gg(a,b,c,d,k[5],5,-701558691),d=this.gg(d,a,b,c,k[10],9,38016083),c=this.gg(c,d,a,b,k[15],14,-660478335),b=this.gg(b,c,d,a,k[4],20,-405537848),a=this.gg(a,b,c,d,k[9],5,568446438),d=this.gg(d,a,b,c,k[14],9,-1019803690),c=this.gg(c,d,a,b,k[3],14,-187363961),b=this.gg(b,c,d,a,k[8],20,1163531501),a=this.gg(a,b,c,d,k[13],5,-1444681467),d=this.gg(d,a,b,c,k[2],9,-51403784),c=this.gg(c,d,a,b,k[7],14,1735328473),b=this.gg(b,c,d,a,k[12],20,-1926607734),a=this.hh(a,b,c,d,k[5],4,-378558),d=this.hh(d,a,b,c,k[8],11,-2022574463),c=this.hh(c,d,a,b,k[11],16,1839030562),b=this.hh(b,c,d,a,k[14],23,-35309556),a=this.hh(a,b,c,d,k[1],4,-1530992060),d=this.hh(d,a,b,c,k[4],11,1272893353),c=this.hh(c,d,a,b,k[7],16,-155497632),b=this.hh(b,c,d,a,k[10],23,-1094730640),a=this.hh(a,b,c,d,k[13],4,681279174),d=this.hh(d,a,b,c,k[0],11,-358537222),c=this.hh(c,d,a,b,k[3],16,-722521979),b=this.hh(b,c,d,a,k[6],23,76029189),a=this.hh(a,b,c,d,k[9],4,-640364487),d=this.hh(d,a,b,c,k[12],11,-421815835),c=this.hh(c,d,a,b,k[15],16,530742520),b=this.hh(b,c,d,a,k[2],23,-995338651),a=this.ii(a,b,c,d,k[0],6,-198630844),d=this.ii(d,a,b,c,k[7],10,1126891415),c=this.ii(c,d,a,b,k[14],15,-1416354905),b=this.ii(b,c,d,a,k[5],21,-57434055),a=this.ii(a,b,c,d,k[12],6,1700485571),d=this.ii(d,a,b,c,k[3],10,-1894986606),c=this.ii(c,d,a,b,k[10],15,-1051523),b=this.ii(b,c,d,a,k[1],21,-2054922799),a=this.ii(a,b,c,d,k[8],6,1873313359),d=this.ii(d,a,b,c,k[15],10,-30611744),c=this.ii(c,d,a,b,k[6],15,-1560198380),b=this.ii(b,c,d,a,k[13],21,1309151649),a=this.ii(a,b,c,d,k[4],6,-145523070),d=this.ii(d,a,b,c,k[11],10,-1120210379),c=this.ii(c,d,a,b,k[2],15,718787259),b=this.ii(b,c,d,a,k[9],21,-343485551),x[0]=this.add32(a,x[0]),x[1]=this.add32(b,x[1]),x[2]=this.add32(c,x[2]),x[3]=this.add32(d,x[3])},MD5.prototype.cmn=function(q,a,b,x,s,t){return a=this.add32(this.add32(a,q),this.add32(x,t)),this.add32(a<<s|a>>>32-s,b)},MD5.prototype.ff=function(a,b,c,d,x,s,t){return this.cmn(b&c|~b&d,a,b,x,s,t)},MD5.prototype.gg=function(a,b,c,d,x,s,t){return this.cmn(b&d|c&~d,a,b,x,s,t)},MD5.prototype.hh=function(a,b,c,d,x,s,t){return this.cmn(b^c^d,a,b,x,s,t)},MD5.prototype.ii=function(a,b,c,d,x,s,t){return this.cmn(c^(b|~d),a,b,x,s,t)},MD5.prototype.md51=function(s){var i,n=s.length,state=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=s.length;i+=64)this.md5cycle(state,this.md5blk(s.substring(i-64,i)));s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++)tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3);if(tail[i>>2]|=128<<(i%4<<3),i>55)for(this.md5cycle(state,tail),i=0;i<16;i++)tail[i]=0;return tail[14]=8*n,this.md5cycle(state,tail),state},MD5.prototype.md5blk=function(s){for(var md5blks=[],i=0;i<64;i+=4)md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return md5blks},MD5.prototype.rhex=function(n){for(var hex_chr="0123456789abcdef".split(""),s="",j=0;j<4;j++)s+=hex_chr[n>>8*j+4&15]+hex_chr[n>>8*j&15];return s},MD5.prototype.hex=function(x){for(var i=0;i<x.length;i++)x[i]=this.rhex(x[i]);return x.join("")},MD5.prototype.md5=function(s){return this.hex(this.md51(s))},MD5.prototype.add32=function(a,b){return this.ieCompatibility?this.add32Compat(a,b):this.add32Std(a,b)},MD5.prototype.add32Std=function(a,b){return a+b&4294967295},MD5.prototype.add32Compat=function(x,y){var lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw},__decorate$1([agGridCommunity.PostConstruct],MD5.prototype,"init",null),MD5=__decorate$1([agGridCommunity.Bean("md5")],MD5)}(agGridCommunity.BeanStub),__extends$2=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},WatermarkComp=function(_super){function WatermarkComp(){return _super.call(this,'<div class="ag-watermark">\n                    <div ref="eLicenseTextRef" class="ag-watermark-text"></div>\n               </div>')||this}return __extends$2(WatermarkComp,_super),WatermarkComp.prototype.postConstruct=function(){var _this=this,show=this.shouldDisplayWatermark();this.addOrRemoveCssClass("ag-hidden",!show),show&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout((function(){return _this.addCssClass("ag-opacity-zero")}),0),window.setTimeout((function(){return _this.addCssClass("ag-hidden")}),5e3))},WatermarkComp.prototype.shouldDisplayWatermark=function(){var loc=(this.gridOptionsWrapper.getDocument().defaultView||window).location,_a=loc.hostname,hostname=void 0===_a?"":_a,pathname=loc.pathname,isDisplayWatermark=this.licenseManager.isDisplayWatermark(),isWhiteListURL=null!=hostname.match("^(?:127.0.0.1|localhost|(?:w+.)?ag-grid.com)$");return!!pathname&&-1!==pathname.indexOf("forceWatermark")||isDisplayWatermark&&!isWhiteListURL},__decorate$2([agGridCommunity.Autowired("licenseManager")],WatermarkComp.prototype,"licenseManager",void 0),__decorate$2([agGridCommunity.RefSelector("eLicenseTextRef")],WatermarkComp.prototype,"eLicenseTextRef",void 0),__decorate$2([agGridCommunity.PostConstruct],WatermarkComp.prototype,"postConstruct",null),WatermarkComp}(agGridCommunity.Component),EnterpriseCoreModule={moduleName:agGridCommunity.ModuleNames.EnterpriseCoreModule,beans:[LicenseManager,MD5],agStackComponents:[{componentName:"AgWatermark",componentClass:WatermarkComp}]},__extends$3=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$3=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(ExpandState){ExpandState[ExpandState.EXPANDED=0]="EXPANDED",ExpandState[ExpandState.COLLAPSED=1]="COLLAPSED",ExpandState[ExpandState.INDETERMINATE=2]="INDETERMINATE"}(ExpandState||(ExpandState={}));var PrimaryColsHeaderPanel=function(_super){function PrimaryColsHeaderPanel(){return _super.call(this,PrimaryColsHeaderPanel.TEMPLATE)||this}return __extends$3(PrimaryColsHeaderPanel,_super),PrimaryColsHeaderPanel.prototype.postConstruct=function(){var _this=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",(function(e){e.key===agGridCommunity.KeyCode.SPACE&&_this.onExpandClicked()})),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.eFilterTextField.onValueChange((function(){return _this.onFilterTextChanged()})),this.addManagedListener(this.eFilterTextField.getInputElement(),"keypress",this.onMiniFilterKeyPress.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var translate=this.gridOptionsWrapper.getLocaleTextFunc();this.eSelect.setInputAriaLabel(translate("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(translate("ariaFilterColumnsInput","Filter Columns Input"))},PrimaryColsHeaderPanel.prototype.init=function(params){this.params=params,this.columnModel.isReady()&&this.showOrHideOptions()},PrimaryColsHeaderPanel.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=agGridCommunity._.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandUnchecked=agGridCommunity._.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandIndeterminate=agGridCommunity._.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsWrapper)),this.setExpandState(ExpandState.EXPANDED)},PrimaryColsHeaderPanel.prototype.showOrHideOptions=function(){var showFilter=!this.params.suppressColumnFilter,showSelect=!this.params.suppressColumnSelectAll,showExpand=!this.params.suppressColumnExpandAll,groupsPresent=this.columnModel.isPrimaryColumnGroupsPresent(),translate=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(translate("searchOoo","Search...")),agGridCommunity._.setDisplayed(this.eFilterTextField.getGui(),showFilter),agGridCommunity._.setDisplayed(this.eSelect.getGui(),showSelect),agGridCommunity._.setDisplayed(this.eExpand,showExpand&&groupsPresent)},PrimaryColsHeaderPanel.prototype.onFilterTextChanged=function(){var _this=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=agGridCommunity._.debounce((function(){var filterText=_this.eFilterTextField.getValue();_this.dispatchEvent({type:"filterChanged",filterText})}),PrimaryColsHeaderPanel.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},PrimaryColsHeaderPanel.prototype.onMiniFilterKeyPress=function(e){var _this=this;e.key===agGridCommunity.KeyCode.ENTER&&setTimeout((function(){return _this.onSelectClicked()}),PrimaryColsHeaderPanel.DEBOUNCE_DELAY)},PrimaryColsHeaderPanel.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},PrimaryColsHeaderPanel.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===ExpandState.EXPANDED?"collapseAll":"expandAll"})},PrimaryColsHeaderPanel.prototype.setExpandState=function(state){this.expandState=state,agGridCommunity._.setDisplayed(this.eExpandChecked,this.expandState===ExpandState.EXPANDED),agGridCommunity._.setDisplayed(this.eExpandUnchecked,this.expandState===ExpandState.COLLAPSED),agGridCommunity._.setDisplayed(this.eExpandIndeterminate,this.expandState===ExpandState.INDETERMINATE)},PrimaryColsHeaderPanel.prototype.setSelectionState=function(state){this.selectState=state,this.eSelect.setValue(this.selectState)},PrimaryColsHeaderPanel.DEBOUNCE_DELAY=300,PrimaryColsHeaderPanel.TEMPLATE='<div class="ag-column-select-header" role="presentation" tabindex="-1">\n            <div ref="eExpand" class="ag-column-select-header-icon" tabindex="0"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>',__decorate$3([agGridCommunity.Autowired("columnModel")],PrimaryColsHeaderPanel.prototype,"columnModel",void 0),__decorate$3([agGridCommunity.RefSelector("eExpand")],PrimaryColsHeaderPanel.prototype,"eExpand",void 0),__decorate$3([agGridCommunity.RefSelector("eSelect")],PrimaryColsHeaderPanel.prototype,"eSelect",void 0),__decorate$3([agGridCommunity.RefSelector("eFilterTextField")],PrimaryColsHeaderPanel.prototype,"eFilterTextField",void 0),__decorate$3([agGridCommunity.PostConstruct],PrimaryColsHeaderPanel.prototype,"postConstruct",null),PrimaryColsHeaderPanel}(agGridCommunity.Component),ColumnModelItem=function(){function ColumnModelItem(displayName,columnOrGroup,dept,group,expanded){void 0===group&&(group=!1),this.eventService=new agGridCommunity.EventService,this.displayName=displayName,this.dept=dept,this.group=group,group?(this.columnGroup=columnOrGroup,this.expanded=expanded,this.children=[]):this.column=columnOrGroup}return ColumnModelItem.prototype.isGroup=function(){return this.group},ColumnModelItem.prototype.getDisplayName=function(){return this.displayName},ColumnModelItem.prototype.getColumnGroup=function(){return this.columnGroup},ColumnModelItem.prototype.getColumn=function(){return this.column},ColumnModelItem.prototype.getDept=function(){return this.dept},ColumnModelItem.prototype.isExpanded=function(){return!!this.expanded},ColumnModelItem.prototype.getChildren=function(){return this.children},ColumnModelItem.prototype.isPassesFilter=function(){return this.passesFilter},ColumnModelItem.prototype.setExpanded=function(expanded){expanded!==this.expanded&&(this.expanded=expanded,this.eventService.dispatchEvent({type:ColumnModelItem.EVENT_EXPANDED_CHANGED}))},ColumnModelItem.prototype.setPassesFilter=function(passesFilter){this.passesFilter=passesFilter},ColumnModelItem.prototype.addEventListener=function(eventType,listener){this.eventService.addEventListener(eventType,listener)},ColumnModelItem.prototype.removeEventListener=function(eventType,listener){this.eventService.removeEventListener(eventType,listener)},ColumnModelItem.EVENT_EXPANDED_CHANGED="expandedChanged",ColumnModelItem}(),__extends$4=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$4=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$1=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$1(arguments[i]));return ar},__values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},ToolPanelContextMenu=function(_super){function ToolPanelContextMenu(column,mouseEvent,parentEl){var _this=_super.call(this,'<div class="ag-menu"></div>')||this;return _this.column=column,_this.mouseEvent=mouseEvent,_this.parentEl=parentEl,_this.displayName=null,_this}return __extends$4(ToolPanelContextMenu,_super),ToolPanelContextMenu.prototype.postConstruct=function(){this.initializeProperties(this.column),this.buildMenuItemMap(),this.column instanceof agGridCommunity.Column?this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()&&(this.mouseEvent.preventDefault(),this.displayContextMenu())},ToolPanelContextMenu.prototype.initializeProperties=function(column){column instanceof agGridCommunity.ProvidedColumnGroup?this.columns=column.getLeafColumns():this.columns=[column],this.allowGrouping=this.columns.some((function(col){return col.isPrimary()&&col.isAllowRowGroup()})),this.allowValues=this.columns.some((function(col){return col.isPrimary()&&col.isAllowValue()})),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some((function(col){return col.isPrimary()&&col.isAllowPivot()}))},ToolPanelContextMenu.prototype.buildMenuItemMap=function(){var _this=this,localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:function(col){return col.isPrimary()&&col.isAllowRowGroup()},activeFunction:function(col){return col.isRowGroupActive()},activateLabel:function(){return localeTextFunc("groupBy","Group by")+" "+_this.displayName},deactivateLabel:function(){return localeTextFunc("ungroupBy","Un-Group by")+" "+_this.displayName},activateFunction:function(){var groupedColumns=_this.columnModel.getRowGroupColumns();_this.columnModel.setRowGroupColumns(_this.addColumnsToList(groupedColumns),"toolPanelUi")},deActivateFunction:function(){var groupedColumns=_this.columnModel.getRowGroupColumns();_this.columnModel.setRowGroupColumns(_this.removeColumnsFromList(groupedColumns),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:function(col){return col.isPrimary()&&col.isAllowValue()},activeFunction:function(col){return col.isValueActive()},activateLabel:function(){return localeTextFunc("addToValues","Add "+_this.displayName+" to values",[_this.displayName])},deactivateLabel:function(){return localeTextFunc("removeFromValues","Remove "+_this.displayName+" from values",[_this.displayName])},activateFunction:function(){var valueColumns=_this.columnModel.getValueColumns();_this.columnModel.setValueColumns(_this.addColumnsToList(valueColumns),"toolPanelUi")},deActivateFunction:function(){var valueColumns=_this.columnModel.getValueColumns();_this.columnModel.setValueColumns(_this.removeColumnsFromList(valueColumns),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:function(col){return _this.columnModel.isPivotMode()&&col.isPrimary()&&col.isAllowPivot()},activeFunction:function(col){return col.isPivotActive()},activateLabel:function(){return localeTextFunc("addToLabels","Add "+_this.displayName+" to labels",[_this.displayName])},deactivateLabel:function(){return localeTextFunc("removeFromLabels","Remove "+_this.displayName+" from labels",[_this.displayName])},activateFunction:function(){var pivotColumns=_this.columnModel.getPivotColumns();_this.columnModel.setPivotColumns(_this.addColumnsToList(pivotColumns),"toolPanelUi")},deActivateFunction:function(){var pivotColumns=_this.columnModel.getPivotColumns();_this.columnModel.setPivotColumns(_this.removeColumnsFromList(pivotColumns),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})},ToolPanelContextMenu.prototype.addColumnsToList=function(columnList){return __spread(columnList).concat(this.columns.filter((function(col){return-1===columnList.indexOf(col)})))},ToolPanelContextMenu.prototype.removeColumnsFromList=function(columnList){var _this=this;return columnList.filter((function(col){return-1===_this.columns.indexOf(col)}))},ToolPanelContextMenu.prototype.displayContextMenu=function(){var _this=this,eGui=this.getGui(),menuList=this.createBean(new agGridCommunity.AgMenuList),menuItemsMapped=this.getMappedMenuItems(),hideFunc=function(){};eGui.appendChild(menuList.getGui()),menuList.addMenuItems(menuItemsMapped),menuList.addManagedListener(menuList,agGridCommunity.AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,(function(){_this.parentEl.focus(),hideFunc()}));var addPopupRes=this.popupService.addPopup({modal:!0,eChild:eGui,closeOnEsc:!0,afterGuiAttached:function(){return _this.focusService.focusInto(menuList.getGui())},ariaLabel:"Foo",closedCallback:function(e){e instanceof KeyboardEvent&&_this.parentEl.focus(),_this.destroyBean(menuList)}});addPopupRes&&(hideFunc=addPopupRes.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:eGui})},ToolPanelContextMenu.prototype.isActive=function(){return this.allowGrouping||this.allowValues||this.allowPivoting},ToolPanelContextMenu.prototype.getMappedMenuItems=function(){var e_1,_a,ret=[],_loop_1=function(val){var isInactive=this_1.columns.some((function(col){return val.allowedFunction(col)&&!val.activeFunction(col)})),isActive=this_1.columns.some((function(col){return val.allowedFunction(col)&&val.activeFunction(col)}));isInactive&&ret.push({name:val.activateLabel(this_1.displayName),icon:agGridCommunity._.createIconNoSpan(val.addIcon,this_1.gridOptionsWrapper,null),action:function(){return val.activateFunction()}}),isActive&&ret.push({name:val.deactivateLabel(this_1.displayName),icon:agGridCommunity._.createIconNoSpan(val.removeIcon,this_1.gridOptionsWrapper,null),action:function(){return val.deActivateFunction()}})},this_1=this;try{for(var _b=__values(this.menuItemMap.values()),_c=_b.next();!_c.done;_c=_b.next()){_loop_1(_c.value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return ret},__decorate$4([agGridCommunity.Autowired("columnModel")],ToolPanelContextMenu.prototype,"columnModel",void 0),__decorate$4([agGridCommunity.Autowired("popupService")],ToolPanelContextMenu.prototype,"popupService",void 0),__decorate$4([agGridCommunity.Autowired("focusService")],ToolPanelContextMenu.prototype,"focusService",void 0),__decorate$4([agGridCommunity.PostConstruct],ToolPanelContextMenu.prototype,"postConstruct",null),ToolPanelContextMenu}(agGridCommunity.Component),__extends$5=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$5=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ToolPanelColumnGroupComp=function(_super){function ToolPanelColumnGroupComp(modelItem,allowDragging,eventType,focusWrapper){var _this=_super.call(this)||this;return _this.modelItem=modelItem,_this.allowDragging=allowDragging,_this.eventType=eventType,_this.focusWrapper=focusWrapper,_this.processingColumnStateChange=!1,_this.modelItem=modelItem,_this.columnGroup=modelItem.getColumnGroup(),_this.columnDept=modelItem.getDept(),_this.allowDragging=allowDragging,_this}return __extends$5(ToolPanelColumnGroupComp,_super),ToolPanelColumnGroupComp.prototype.init=function(){var _this=this;this.setTemplate(ToolPanelColumnGroupComp.TEMPLATE),this.eDragHandle=agGridCommunity._.createIconNoSpan("columnDrag",this.gridOptionsWrapper),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");var checkboxGui=this.cbSelect.getGui(),checkboxInput=this.cbSelect.getInputElement();checkboxGui.insertAdjacentElement("afterend",this.eDragHandle),checkboxInput.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.columnGroup,this.eventType),agGridCommunity._.missing(this.displayName)&&(this.displayName=">>"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,agGridCommunity.AgCheckbox.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,ColumnModelItem.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),agGridCommunity.CssClassApplier.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsWrapper,null,this.columnGroup).forEach((function(c){return _this.addOrRemoveCssClass(c,!0)}))},ToolPanelColumnGroupComp.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()},ToolPanelColumnGroupComp.prototype.setupTooltip=function(){var _this=this,colGroupDef=this.columnGroup.getColGroupDef();if(colGroupDef){var refresh=function(){var newTooltipText=colGroupDef.headerTooltip;_this.setTooltip(newTooltipText)};refresh(),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,refresh)}},ToolPanelColumnGroupComp.prototype.getTooltipParams=function(){var res=_super.prototype.getTooltipParams.call(this);return res.location="columnToolPanelColumnGroup",res},ToolPanelColumnGroupComp.prototype.handleKeyDown=function(e){switch(e.key){case agGridCommunity.KeyCode.LEFT:e.preventDefault(),this.modelItem.setExpanded(!1);break;case agGridCommunity.KeyCode.RIGHT:e.preventDefault(),this.modelItem.setExpanded(!0);break;case agGridCommunity.KeyCode.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}},ToolPanelColumnGroupComp.prototype.onContextMenu=function(e){var _this=this,columnGroup=this.columnGroup;if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var contextMenu=this.createBean(new ToolPanelContextMenu(columnGroup,e,this.focusWrapper));this.addDestroyFunc((function(){contextMenu.isAlive()&&_this.destroyBean(contextMenu)}))}},ToolPanelColumnGroupComp.prototype.addVisibilityListenersToAllChildren=function(){var _this=this;this.columnGroup.getLeafColumns().forEach((function(column){_this.addManagedListener(column,agGridCommunity.Column.EVENT_VISIBLE_CHANGED,_this.onColumnStateChanged.bind(_this)),_this.addManagedListener(column,agGridCommunity.Column.EVENT_VALUE_CHANGED,_this.onColumnStateChanged.bind(_this)),_this.addManagedListener(column,agGridCommunity.Column.EVENT_PIVOT_CHANGED,_this.onColumnStateChanged.bind(_this)),_this.addManagedListener(column,agGridCommunity.Column.EVENT_ROW_GROUP_CHANGED,_this.onColumnStateChanged.bind(_this))}))},ToolPanelColumnGroupComp.prototype.setupDragging=function(){var _this=this;if(this.allowDragging){var dragSource={type:agGridCommunity.DragSourceType.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDragItem:function(){return _this.createDragItem()},onDragStarted:function(){var event={type:agGridCommunity.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:_this.columnGroup};_this.eventService.dispatchEvent(event)},onDragStopped:function(){var event={type:agGridCommunity.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END};_this.eventService.dispatchEvent(event)}};this.dragAndDropService.addDragSource(dragSource,!0),this.addDestroyFunc((function(){return _this.dragAndDropService.removeDragSource(dragSource)}))}else agGridCommunity._.setDisplayed(this.eDragHandle,!1)},ToolPanelColumnGroupComp.prototype.createDragItem=function(){var visibleState={};return this.columnGroup.getLeafColumns().forEach((function(col){visibleState[col.getId()]=col.isVisible()})),{columns:this.columnGroup.getLeafColumns(),visibleState}},ToolPanelColumnGroupComp.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(agGridCommunity._.createIcon("columnSelectClosed",this.gridOptionsWrapper,null)),this.eGroupOpenedIcon.appendChild(agGridCommunity._.createIcon("columnSelectOpen",this.gridOptionsWrapper,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var touchListener=new agGridCommunity.TouchListener(this.eColumnGroupIcons,!0);this.addManagedListener(touchListener,agGridCommunity.TouchListener.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(touchListener.destroy.bind(touchListener))},ToolPanelColumnGroupComp.prototype.onLabelClicked=function(){var nextState=!this.cbSelect.getValue();this.onChangeCommon(nextState)},ToolPanelColumnGroupComp.prototype.onCheckboxChanged=function(event){this.onChangeCommon(event.selected)},ToolPanelColumnGroupComp.prototype.getVisibleLeafColumns=function(){var childColumns=[],extractCols=function(children){children.forEach((function(child){child.isPassesFilter()&&(child.isGroup()?extractCols(child.getChildren()):childColumns.push(child.getColumn()))}))};return extractCols(this.modelItem.getChildren()),childColumns},ToolPanelColumnGroupComp.prototype.onChangeCommon=function(nextState){this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),nextState,this.eventType)},ToolPanelColumnGroupComp.prototype.refreshAriaLabel=function(){var translate=this.gridOptionsWrapper.getLocaleTextFunc(),columnLabel=translate("ariaColumnGroup","Column Group"),state=this.cbSelect.getValue()?translate("ariaVisible","visible"):translate("ariaHidden","hidden"),visibilityLabel=translate("ariaToggleVisibility","Press SPACE to toggle visibility");agGridCommunity._.setAriaLabel(this.focusWrapper,this.displayName+" "+columnLabel),this.cbSelect.setInputAriaLabel(visibilityLabel+" ("+state+")"),agGridCommunity._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},ToolPanelColumnGroupComp.prototype.onColumnStateChanged=function(){var selectedValue=this.workOutSelectedValue(),readOnlyValue=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(selectedValue),this.cbSelect.setReadOnly(readOnlyValue),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",readOnlyValue),this.processingColumnStateChange=!1},ToolPanelColumnGroupComp.prototype.workOutSelectedValue=function(){var _this=this,pivotMode=this.columnModel.isPivotMode(),visibleLeafColumns=this.getVisibleLeafColumns(),checkedCount=0,uncheckedCount=0;if(visibleLeafColumns.forEach((function(column){!pivotMode&&column.getColDef().lockVisible||(_this.isColumnChecked(column,pivotMode)?checkedCount++:uncheckedCount++)})),!(checkedCount>0&&uncheckedCount>0))return checkedCount>0},ToolPanelColumnGroupComp.prototype.workOutReadOnlyValue=function(){var pivotMode=this.columnModel.isPivotMode(),colsThatCanAction=0;return this.columnGroup.getLeafColumns().forEach((function(col){pivotMode?col.isAnyFunctionAllowed()&&colsThatCanAction++:col.getColDef().lockVisible||colsThatCanAction++})),0===colsThatCanAction},ToolPanelColumnGroupComp.prototype.isColumnChecked=function(column,pivotMode){if(pivotMode){var pivoted=column.isPivotActive(),grouped=column.isRowGroupActive(),aggregated=column.isValueActive();return pivoted||grouped||aggregated}return column.isVisible()},ToolPanelColumnGroupComp.prototype.onExpandOrContractClicked=function(){var oldState=this.modelItem.isExpanded();this.modelItem.setExpanded(!oldState)},ToolPanelColumnGroupComp.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},ToolPanelColumnGroupComp.prototype.setOpenClosedIcons=function(){var folderOpen=this.modelItem.isExpanded();agGridCommunity._.setDisplayed(this.eGroupClosedIcon,!folderOpen),agGridCommunity._.setDisplayed(this.eGroupOpenedIcon,folderOpen)},ToolPanelColumnGroupComp.prototype.refreshAriaExpanded=function(){agGridCommunity._.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},ToolPanelColumnGroupComp.prototype.getDisplayName=function(){return this.displayName},ToolPanelColumnGroupComp.prototype.onSelectAllChanged=function(value){var cbValue=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(value&&!cbValue||!value&&cbValue)&&this.cbSelect.toggle()},ToolPanelColumnGroupComp.prototype.isSelected=function(){return this.cbSelect.getValue()},ToolPanelColumnGroupComp.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},ToolPanelColumnGroupComp.prototype.setSelected=function(selected){this.cbSelect.setValue(selected,!0)},ToolPanelColumnGroupComp.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',__decorate$5([agGridCommunity.Autowired("columnModel")],ToolPanelColumnGroupComp.prototype,"columnModel",void 0),__decorate$5([agGridCommunity.Autowired("dragAndDropService")],ToolPanelColumnGroupComp.prototype,"dragAndDropService",void 0),__decorate$5([agGridCommunity.Autowired("modelItemUtils")],ToolPanelColumnGroupComp.prototype,"modelItemUtils",void 0),__decorate$5([agGridCommunity.RefSelector("cbSelect")],ToolPanelColumnGroupComp.prototype,"cbSelect",void 0),__decorate$5([agGridCommunity.RefSelector("eLabel")],ToolPanelColumnGroupComp.prototype,"eLabel",void 0),__decorate$5([agGridCommunity.RefSelector("eGroupOpenedIcon")],ToolPanelColumnGroupComp.prototype,"eGroupOpenedIcon",void 0),__decorate$5([agGridCommunity.RefSelector("eGroupClosedIcon")],ToolPanelColumnGroupComp.prototype,"eGroupClosedIcon",void 0),__decorate$5([agGridCommunity.RefSelector("eColumnGroupIcons")],ToolPanelColumnGroupComp.prototype,"eColumnGroupIcons",void 0),__decorate$5([agGridCommunity.PostConstruct],ToolPanelColumnGroupComp.prototype,"init",null),ToolPanelColumnGroupComp}(agGridCommunity.Component),__extends$6=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$6=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PRIMARY_COLS_LIST_ITEM_HOVERED="ag-list-item-hovered",PrimaryColsListPanelItemDragFeature=function(_super){function PrimaryColsListPanelItemDragFeature(comp,virtualList){var _this=_super.call(this)||this;return _this.comp=comp,_this.virtualList=virtualList,_this.currentDragColumn=null,_this.lastHoveredColumnItem=null,_this}return __extends$6(PrimaryColsListPanelItemDragFeature,_super),PrimaryColsListPanelItemDragFeature.prototype.postConstruct=function(){this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,this.columnPanelItemDragStart.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END,this.columnPanelItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},PrimaryColsListPanelItemDragFeature.prototype.columnPanelItemDragStart=function(_a){var column=_a.column;this.currentDragColumn=column,this.getCurrentColumns().find((function(col){var colDef=col.getColDef();return!!colDef.suppressMovable||!!colDef.lockPosition}))&&(this.moveBlocked=!0)},PrimaryColsListPanelItemDragFeature.prototype.columnPanelItemDragEnd=function(){var _this=this;window.setTimeout((function(){_this.currentDragColumn=null,_this.moveBlocked=!1}),10)},PrimaryColsListPanelItemDragFeature.prototype.createDropTarget=function(){var _this=this,dropTarget={isInterestedIn:function(type){return type===agGridCommunity.DragSourceType.ToolPanel},getIconName:function(){return agGridCommunity.DragAndDropService[_this.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return _this.comp.getGui()},onDragging:function(e){return _this.onDragging(e)},onDragStop:function(){return _this.onDragStop()},onDragLeave:function(){return _this.onDragLeave()}};this.dragAndDropService.addDropTarget(dropTarget)},PrimaryColsListPanelItemDragFeature.prototype.createAutoScrollService=function(){var virtualListGui=this.virtualList.getGui();this.autoScrollService=new agGridCommunity.AutoScrollService({scrollContainer:virtualListGui,scrollAxis:"y",getVerticalPosition:function(){return virtualListGui.scrollTop},setVerticalPosition:function(position){return virtualListGui.scrollTop=position}})},PrimaryColsListPanelItemDragFeature.prototype.onDragging=function(e){if(this.currentDragColumn&&!this.moveBlocked){var hoveredColumnItem=this.getDragColumnItem(e),comp=this.virtualList.getComponentAt(hoveredColumnItem.rowIndex);if(comp){var el=comp.getGui().parentElement;this.lastHoveredColumnItem&&this.lastHoveredColumnItem.rowIndex===hoveredColumnItem.rowIndex&&this.lastHoveredColumnItem.position===hoveredColumnItem.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredColumnItem=hoveredColumnItem,agGridCommunity._.radioCssClass(el,""+PRIMARY_COLS_LIST_ITEM_HOVERED),agGridCommunity._.radioCssClass(el,"ag-item-highlight-"+hoveredColumnItem.position))}}},PrimaryColsListPanelItemDragFeature.prototype.getDragColumnItem=function(e){var virtualListGui=this.virtualList.getGui(),paddingTop=parseFloat(window.getComputedStyle(virtualListGui).paddingTop),rowHeight=this.virtualList.getRowHeight(),scrollTop=this.virtualList.getScrollTop(),rowIndex=Math.max(0,(e.y-paddingTop+scrollTop)/rowHeight),maxLen=this.comp.getDisplayedColsList().length-1,normalizedRowIndex=0|Math.min(maxLen,rowIndex);return{rowIndex:normalizedRowIndex,position:Math.round(rowIndex)>rowIndex||rowIndex>maxLen?"bottom":"top",component:this.virtualList.getComponentAt(normalizedRowIndex)}},PrimaryColsListPanelItemDragFeature.prototype.onDragStop=function(){if(!this.moveBlocked){var targetIndex=this.getTargetIndex(),columnsToMove=this.getCurrentColumns();null!=targetIndex&&this.columnModel.moveColumns(columnsToMove,targetIndex),this.clearHoveredItems(),this.autoScrollService.ensureCleared()}},PrimaryColsListPanelItemDragFeature.prototype.getMoveDiff=function(end){var allColumns=this.columnModel.getAllGridColumns(),currentColumns=this.getCurrentColumns(),currentColumn=currentColumns[0],span=currentColumns.length;return allColumns.indexOf(currentColumn)<end?span:0},PrimaryColsListPanelItemDragFeature.prototype.getCurrentColumns=function(){return this.currentDragColumn instanceof agGridCommunity.ProvidedColumnGroup?this.currentDragColumn.getLeafColumns():[this.currentDragColumn]},PrimaryColsListPanelItemDragFeature.prototype.getTargetIndex=function(){if(!this.lastHoveredColumnItem)return null;var targetColumn,columnItemComponent=this.lastHoveredColumnItem.component,isBefore="top"===this.lastHoveredColumnItem.position;columnItemComponent instanceof ToolPanelColumnGroupComp?(targetColumn=columnItemComponent.getColumns()[0],isBefore=!0):targetColumn=columnItemComponent.getColumn();var targetColumnIndex=this.columnModel.getAllGridColumns().indexOf(targetColumn),adjustedTarget=isBefore?targetColumnIndex:targetColumnIndex+1;return adjustedTarget-this.getMoveDiff(adjustedTarget)},PrimaryColsListPanelItemDragFeature.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},PrimaryColsListPanelItemDragFeature.prototype.clearHoveredItems=function(){this.virtualList.getGui().querySelectorAll("."+PRIMARY_COLS_LIST_ITEM_HOVERED).forEach((function(el){[PRIMARY_COLS_LIST_ITEM_HOVERED,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach((function(cls){el.classList.remove(cls)}))})),this.lastHoveredColumnItem=null},__decorate$6([agGridCommunity.Autowired("columnModel")],PrimaryColsListPanelItemDragFeature.prototype,"columnModel",void 0),__decorate$6([agGridCommunity.Autowired("dragAndDropService")],PrimaryColsListPanelItemDragFeature.prototype,"dragAndDropService",void 0),__decorate$6([agGridCommunity.PostConstruct],PrimaryColsListPanelItemDragFeature.prototype,"postConstruct",null),PrimaryColsListPanelItemDragFeature}(agGridCommunity.BeanStub),__extends$7=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$7=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ToolPanelColumnComp=function(_super){function ToolPanelColumnComp(column,columnDept,allowDragging,groupsExist,focusWrapper){var _this=_super.call(this)||this;return _this.column=column,_this.columnDept=columnDept,_this.allowDragging=allowDragging,_this.groupsExist=groupsExist,_this.focusWrapper=focusWrapper,_this.processingColumnStateChange=!1,_this}return __extends$7(ToolPanelColumnComp,_super),ToolPanelColumnComp.prototype.init=function(){var _this=this;this.setTemplate(ToolPanelColumnComp.TEMPLATE),this.eDragHandle=agGridCommunity._.createIconNoSpan("columnDrag",this.gridOptionsWrapper),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");var checkboxGui=this.cbSelect.getGui(),checkboxInput=this.cbSelect.getInputElement();checkboxGui.insertAdjacentElement("afterend",this.eDragHandle),checkboxInput.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel");var displayNameSanitised=agGridCommunity._.escapeString(this.displayName);this.eLabel.innerHTML=displayNameSanitised;var indent=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-"+indent),this.setupDragging(),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,agGridCommunity.Column.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,agGridCommunity.Column.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,agGridCommunity.Column.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,agGridCommunity.Column.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,agGridCommunity.AgCheckbox.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),agGridCommunity.CssClassApplier.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsWrapper,this.column,null).forEach((function(c){return _this.addOrRemoveCssClass(c,!0)}))},ToolPanelColumnComp.prototype.getColumn=function(){return this.column},ToolPanelColumnComp.prototype.setupTooltip=function(){var _this=this,refresh=function(){var newTooltipText=_this.column.getColDef().headerTooltip;_this.setTooltip(newTooltipText)};refresh(),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,refresh)},ToolPanelColumnComp.prototype.getTooltipParams=function(){var res=_super.prototype.getTooltipParams.call(this);return res.location="columnToolPanelColumn",res.colDef=this.column.getColDef(),res},ToolPanelColumnComp.prototype.onContextMenu=function(e){var _this=this,column=this.column;if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var contextMenu=this.createBean(new ToolPanelContextMenu(column,e,this.focusWrapper));this.addDestroyFunc((function(){contextMenu.isAlive()&&_this.destroyBean(contextMenu)}))}},ToolPanelColumnComp.prototype.handleKeyDown=function(e){e.key===agGridCommunity.KeyCode.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},ToolPanelColumnComp.prototype.onLabelClicked=function(){if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var nextState=!this.cbSelect.getValue();this.onChangeCommon(nextState)}},ToolPanelColumnComp.prototype.onCheckboxChanged=function(event){this.onChangeCommon(event.selected)},ToolPanelColumnComp.prototype.onChangeCommon=function(nextState){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.setColumn(this.column,nextState,"toolPanelUi"))},ToolPanelColumnComp.prototype.refreshAriaLabel=function(){var translate=this.gridOptionsWrapper.getLocaleTextFunc(),columnLabel=translate("ariaColumn","Column"),state=this.cbSelect.getValue()?translate("ariaVisible","visible"):translate("ariaHidden","hidden"),visibilityLabel=translate("ariaToggleVisibility","Press SPACE to toggle visibility");agGridCommunity._.setAriaLabel(this.focusWrapper,this.displayName+" "+columnLabel),this.cbSelect.setInputAriaLabel(visibilityLabel+" ("+state+")"),agGridCommunity._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},ToolPanelColumnComp.prototype.setupDragging=function(){var _this=this;if(this.allowDragging){var dragSource={type:agGridCommunity.DragSourceType.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDragItem:function(){return _this.createDragItem()},onDragStarted:function(){var event={type:agGridCommunity.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:_this.column};_this.eventService.dispatchEvent(event)},onDragStopped:function(){var event={type:agGridCommunity.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END};_this.eventService.dispatchEvent(event)}};this.dragAndDropService.addDragSource(dragSource,!0),this.addDestroyFunc((function(){return _this.dragAndDropService.removeDragSource(dragSource)}))}else agGridCommunity._.setDisplayed(this.eDragHandle,!1)},ToolPanelColumnComp.prototype.createDragItem=function(){var visibleState={};return visibleState[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState}},ToolPanelColumnComp.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var isPivotMode=this.columnModel.isPivotMode();if(isPivotMode){var anyFunctionActive=this.column.isAnyFunctionActive();this.cbSelect.setValue(anyFunctionActive)}else this.cbSelect.setValue(this.column.isVisible());var canBeToggled=!0,canBeDragged=!0;if(isPivotMode){var functionsReadOnly=this.gridOptionsWrapper.isFunctionsReadOnly(),noFunctionsAllowed=!this.column.isAnyFunctionAllowed();canBeDragged=canBeToggled=!functionsReadOnly&&!noFunctionsAllowed}else{var _a=this.column.getColDef(),enableRowGroup=_a.enableRowGroup,enableValue=_a.enableValue,lockPosition=_a.lockPosition,suppressMovable=_a.suppressMovable;canBeToggled=!_a.lockVisible,canBeDragged=!!enableRowGroup||!!enableValue||!(!!lockPosition||!!suppressMovable)}this.cbSelect.setReadOnly(!canBeToggled),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!canBeDragged),this.addOrRemoveCssClass("ag-column-select-column-readonly",!canBeDragged&&!canBeToggled);var checkboxPassive=isPivotMode&&this.gridOptionsWrapper.isFunctionsPassive();this.cbSelect.setPassive(checkboxPassive),this.processingColumnStateChange=!1},ToolPanelColumnComp.prototype.getDisplayName=function(){return this.displayName},ToolPanelColumnComp.prototype.onSelectAllChanged=function(value){value!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},ToolPanelColumnComp.prototype.isSelected=function(){return this.cbSelect.getValue()},ToolPanelColumnComp.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},ToolPanelColumnComp.prototype.isExpandable=function(){return!1},ToolPanelColumnComp.prototype.setExpanded=function(value){console.warn("AG Grid: can not expand a column item that does not represent a column group header")},ToolPanelColumnComp.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',__decorate$7([agGridCommunity.Autowired("columnModel")],ToolPanelColumnComp.prototype,"columnModel",void 0),__decorate$7([agGridCommunity.Autowired("dragAndDropService")],ToolPanelColumnComp.prototype,"dragAndDropService",void 0),__decorate$7([agGridCommunity.Autowired("modelItemUtils")],ToolPanelColumnComp.prototype,"modelItemUtils",void 0),__decorate$7([agGridCommunity.RefSelector("eLabel")],ToolPanelColumnComp.prototype,"eLabel",void 0),__decorate$7([agGridCommunity.RefSelector("cbSelect")],ToolPanelColumnComp.prototype,"cbSelect",void 0),__decorate$7([agGridCommunity.PostConstruct],ToolPanelColumnComp.prototype,"init",null),ToolPanelColumnComp}(agGridCommunity.Component),__extends$8=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$8=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},UIColumnModel=function(){function UIColumnModel(items){this.items=items}return UIColumnModel.prototype.getRowCount=function(){return this.items.length},UIColumnModel.prototype.getRow=function(index){return this.items[index]},UIColumnModel}(),PrimaryColsListPanel=function(_super){function PrimaryColsListPanel(){var _this=_super.call(this,PrimaryColsListPanel.TEMPLATE)||this;return _this.destroyColumnItemFuncs=[],_this}return __extends$8(PrimaryColsListPanel,_super),PrimaryColsListPanel.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach((function(f){return f()})),this.destroyColumnItemFuncs=[]},PrimaryColsListPanel.prototype.init=function(params,allowDragging,eventType){var _this=this;this.params=params,this.allowDragging=allowDragging,this.eventType=eventType,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGED,agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGED,agGridCommunity.Events.EVENT_COLUMN_VISIBLE,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED].forEach((function(event){_this.addManagedListener(_this.eventService,event,_this.fireSelectionChangedEvent.bind(_this))})),this.expandGroupsByDefault=!this.params.contractColumnSelection;var columnListName=this.gridOptionsWrapper.getLocaleTextFunc()("ariaColumnList","Column List");this.virtualList=this.createManagedBean(new agGridCommunity.VirtualList("column-select","tree",columnListName)),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator((function(item,listItemElement){return agGridCommunity._.setAriaLevel(listItemElement,item.getDept()+1),_this.createComponentFromItem(item,listItemElement)})),this.columnModel.isReady()&&this.onColumnsChanged(),params.suppressColumnMove||this.gridOptionsWrapper.isSuppressMovableColumns()||this.createManagedBean(new PrimaryColsListPanelItemDragFeature(this,this.virtualList))},PrimaryColsListPanel.prototype.createComponentFromItem=function(item,listItemElement){if(item.isGroup()){var renderedGroup=new ToolPanelColumnGroupComp(item,this.allowDragging,this.eventType,listItemElement);return this.getContext().createBean(renderedGroup),renderedGroup}var columnComp=new ToolPanelColumnComp(item.getColumn(),item.getDept(),this.allowDragging,this.groupsExist,listItemElement);return this.getContext().createBean(columnComp),columnComp},PrimaryColsListPanel.prototype.onColumnsChanged=function(){var expandedStates=this.getExpandedStates(),pivotModeActive=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!pivotModeActive?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(expandedStates),this.markFilteredColumns(),this.flattenAndFilterModel()},PrimaryColsListPanel.prototype.getDisplayedColsList=function(){return this.displayedColsList},PrimaryColsListPanel.prototype.getExpandedStates=function(){if(!this.allColsTree)return{};var res={};return this.forEachItem((function(item){if(item.isGroup()){var colGroup=item.getColumnGroup();colGroup&&(res[colGroup.getId()]=item.isExpanded())}})),res},PrimaryColsListPanel.prototype.setExpandedStates=function(states){this.allColsTree&&this.forEachItem((function(item){if(item.isGroup()){var colGroup=item.getColumnGroup();if(colGroup){var expanded=states[colGroup.getId()];null!=expanded&&item.setExpanded(expanded)}}}))},PrimaryColsListPanel.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},PrimaryColsListPanel.prototype.setColumnLayout=function(colDefs){var columnTree=this.colDefService.createColumnTree(colDefs);this.buildListModel(columnTree),this.groupsExist=colDefs.some((function(colDef){return colDef&&void 0!==colDef.children})),this.markFilteredColumns(),this.flattenAndFilterModel()},PrimaryColsListPanel.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},PrimaryColsListPanel.prototype.buildListModel=function(columnTree){var _this=this,columnExpandedListener=this.onColumnExpanded.bind(this),recursivelyBuild=function(tree,dept,parentList){tree.forEach((function(child){child instanceof agGridCommunity.ProvidedColumnGroup?createGroupItem(child,dept,parentList):createColumnItem(child,dept,parentList)}))},createGroupItem=function(columnGroup,dept,parentList){var columnGroupDef=columnGroup.getColGroupDef();if(!(columnGroupDef&&columnGroupDef.suppressColumnsToolPanel))if(columnGroup.isPadding())recursivelyBuild(columnGroup.getChildren(),dept,parentList);else{var displayName=_this.columnModel.getDisplayNameForProvidedColumnGroup(null,columnGroup,_this.eventType),item=new ColumnModelItem(displayName,columnGroup,dept,!0,_this.expandGroupsByDefault);parentList.push(item),function(item){item.addEventListener(ColumnModelItem.EVENT_EXPANDED_CHANGED,columnExpandedListener);var removeFunc=item.removeEventListener.bind(item,ColumnModelItem.EVENT_EXPANDED_CHANGED,columnExpandedListener);_this.destroyColumnItemFuncs.push(removeFunc)}(item),recursivelyBuild(columnGroup.getChildren(),dept+1,item.getChildren())}},createColumnItem=function(column,dept,parentList){if(!(column.getColDef()&&column.getColDef().suppressColumnsToolPanel)){var displayName=_this.columnModel.getDisplayNameForColumn(column,"columnToolPanel");parentList.push(new ColumnModelItem(displayName,column,dept))}};this.destroyColumnTree(),recursivelyBuild(columnTree,0,this.allColsTree)},PrimaryColsListPanel.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},PrimaryColsListPanel.prototype.flattenAndFilterModel=function(){var _this=this;this.displayedColsList=[];var recursiveFunc=function(item){item.isPassesFilter()&&(_this.displayedColsList.push(item),item.isGroup()&&item.isExpanded()&&item.getChildren().forEach(recursiveFunc))};this.allColsTree.forEach(recursiveFunc),this.virtualList.setModel(new UIColumnModel(this.displayedColsList));var focusedRow=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=focusedRow&&this.focusRowIfAlive(focusedRow),this.notifyListeners()},PrimaryColsListPanel.prototype.focusRowIfAlive=function(rowIndex){var _this=this;window.setTimeout((function(){_this.isAlive()&&_this.virtualList.focusRow(rowIndex)}),0)},PrimaryColsListPanel.prototype.forEachItem=function(callback){var recursiveFunc=function(items){items.forEach((function(item){callback(item),item.isGroup()&&recursiveFunc(item.getChildren())}))};recursiveFunc(this.allColsTree)},PrimaryColsListPanel.prototype.doSetExpandedAll=function(value){this.forEachItem((function(item){item.isGroup()&&item.setExpanded(value)}))},PrimaryColsListPanel.prototype.setGroupsExpanded=function(expand,groupIds){if(groupIds){var expandedGroupIds=[];this.forEachItem((function(item){if(item.isGroup()){var groupId=item.getColumnGroup().getId();groupIds.indexOf(groupId)>=0&&(item.setExpanded(expand),expandedGroupIds.push(groupId))}}));var unrecognisedGroupIds=groupIds.filter((function(groupId){return!agGridCommunity._.includes(expandedGroupIds,groupId)}));unrecognisedGroupIds.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",unrecognisedGroupIds)}else this.doSetExpandedAll(expand)},PrimaryColsListPanel.prototype.getExpandState=function(){var expandedCount=0,notExpandedCount=0;return this.forEachItem((function(item){item.isGroup()&&(item.isExpanded()?expandedCount++:notExpandedCount++)})),expandedCount>0&&notExpandedCount>0?ExpandState.INDETERMINATE:notExpandedCount>0?ExpandState.COLLAPSED:ExpandState.EXPANDED},PrimaryColsListPanel.prototype.doSetSelectedAll=function(selectAllChecked){this.modelItemUtils.selectAllChildren(this.allColsTree,selectAllChecked,this.eventType)},PrimaryColsListPanel.prototype.getSelectionState=function(){var checkedCount=0,uncheckedCount=0,pivotMode=this.columnModel.isPivotMode();if(this.forEachItem((function(item){if(!item.isGroup()&&item.isPassesFilter()){var checked,column=item.getColumn(),colDef=column.getColDef();if(pivotMode){if(!column.isAllowPivot()&&!column.isAllowRowGroup()&&!column.isAllowValue())return;checked=column.isValueActive()||column.isPivotActive()||column.isRowGroupActive()}else{if(colDef.lockVisible)return;checked=column.isVisible()}checked?checkedCount++:uncheckedCount++}})),!(checkedCount>0&&uncheckedCount>0))return!(0===checkedCount||uncheckedCount>0)},PrimaryColsListPanel.prototype.setFilterText=function(filterText){this.filterText=agGridCommunity._.exists(filterText)?filterText.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},PrimaryColsListPanel.prototype.markFilteredColumns=function(){var _this=this,passesFilter=function(item){if(!agGridCommunity._.exists(_this.filterText))return!0;var displayName=item.getDisplayName();return null==displayName||-1!==displayName.toLowerCase().indexOf(_this.filterText)},recursivelyCheckFilter=function(item,parentPasses){var atLeastOneChildPassed=!1;if(item.isGroup()){var groupPasses_1=passesFilter(item);item.getChildren().forEach((function(child){var childPasses=recursivelyCheckFilter(child,groupPasses_1||parentPasses);childPasses&&(atLeastOneChildPassed=childPasses)}))}var filterPasses=!(!parentPasses&&!atLeastOneChildPassed)||passesFilter(item);return item.setPassesFilter(filterPasses),filterPasses};this.allColsTree.forEach((function(item){return recursivelyCheckFilter(item,!1)}))},PrimaryColsListPanel.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},PrimaryColsListPanel.prototype.fireGroupExpandedEvent=function(){var expandState=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:expandState})},PrimaryColsListPanel.prototype.fireSelectionChangedEvent=function(){var selectionState=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:selectionState})},PrimaryColsListPanel.TEMPLATE='<div class="ag-column-select-list" role="presentation"></div>',__decorate$8([agGridCommunity.Autowired("columnModel")],PrimaryColsListPanel.prototype,"columnModel",void 0),__decorate$8([agGridCommunity.Autowired("toolPanelColDefService")],PrimaryColsListPanel.prototype,"colDefService",void 0),__decorate$8([agGridCommunity.Autowired("modelItemUtils")],PrimaryColsListPanel.prototype,"modelItemUtils",void 0),__decorate$8([agGridCommunity.PreDestroy],PrimaryColsListPanel.prototype,"destroyColumnTree",null),PrimaryColsListPanel}(agGridCommunity.Component),__extends$9=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$9=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PivotModePanel=function(_super){function PivotModePanel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$9(PivotModePanel,_super),PivotModePanel.prototype.createTemplate=function(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'},PivotModePanel.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc();this.cbPivotMode.setLabel(localeTextFunc("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,agGridCommunity.AgCheckbox.EVENT_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},PivotModePanel.prototype.onBtPivotMode=function(){var newValue=!!this.cbPivotMode.getValue();if(newValue!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(newValue,"toolPanelUi");var api=this.gridOptionsWrapper.getApi();api&&api.refreshHeader()}},PivotModePanel.prototype.onPivotModeChanged=function(){var pivotModeActive=this.columnModel.isPivotMode();this.cbPivotMode.setValue(pivotModeActive)},__decorate$9([agGridCommunity.Autowired("columnModel")],PivotModePanel.prototype,"columnModel",void 0),__decorate$9([agGridCommunity.RefSelector("cbPivotMode")],PivotModePanel.prototype,"cbPivotMode",void 0),__decorate$9([agGridCommunity.PreConstruct],PivotModePanel.prototype,"init",null),PivotModePanel}(agGridCommunity.Component),__extends$a=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$a=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AggregationStage=function(_super){function AggregationStage(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$a(AggregationStage,_super),AggregationStage.prototype.execute=function(params){var noValueColumns=agGridCommunity._.missingOrEmpty(this.columnModel.getValueColumns()),noUserAgg=!this.gridOptionsWrapper.getGroupRowAggFunc(),changedPathActive=params.changedPath&&params.changedPath.isActive();if(!(noValueColumns&&noUserAgg&&changedPathActive)){var aggDetails=this.createAggDetails(params);this.recursivelyCreateAggData(aggDetails)}},AggregationStage.prototype.createAggDetails=function(params){var pivotActive=this.columnModel.isPivotActive(),measureColumns=this.columnModel.getValueColumns(),pivotColumns=pivotActive?this.columnModel.getPivotColumns():[];return{changedPath:params.changedPath,valueColumns:measureColumns,pivotColumns}},AggregationStage.prototype.recursivelyCreateAggData=function(aggDetails){var _this=this;this.filteredOnly=!this.gridOptionsWrapper.isSuppressAggFilteredOnly();aggDetails.changedPath.forEachChangedNodeDepthFirst((function(rowNode){if(!rowNode.hasChildren())rowNode.aggData&&rowNode.setAggData(null);else{if(-1===rowNode.level){var notPivoting=!_this.columnModel.isPivotMode();if(_this.gridOptionsWrapper.isSuppressAggAtRootLevel()&&notPivoting)return}_this.aggregateRowNode(rowNode,aggDetails)}}),!0)},AggregationStage.prototype.aggregateRowNode=function(rowNode,aggDetails){var aggResult,measureColumnsMissing=0===aggDetails.valueColumns.length,pivotColumnsMissing=0===aggDetails.pivotColumns.length,userFunc=this.gridOptionsWrapper.getGroupRowAggFunc();userFunc?aggResult=userFunc({nodes:rowNode.childrenAfterFilter}):aggResult=measureColumnsMissing?null:pivotColumnsMissing?this.aggregateRowNodeUsingValuesOnly(rowNode,aggDetails):this.aggregateRowNodeUsingValuesAndPivot(rowNode);rowNode.setAggData(aggResult),rowNode.sibling&&rowNode.sibling.setAggData(aggResult)},AggregationStage.prototype.aggregateRowNodeUsingValuesAndPivot=function(rowNode){var _this=this,result={},pivotColumnDefs=this.pivotStage.getPivotColumnDefs();return pivotColumnDefs.filter((function(v){return!agGridCommunity._.exists(v.pivotTotalColumnIds)})).forEach((function(valueColDef){var values,keys=valueColDef.pivotKeys||[],valueColumn=valueColDef.pivotValueColumn,colId=valueColDef.colId;values=rowNode.leafGroup?_this.getValuesFromMappedSet(rowNode.childrenMapped,keys,valueColumn):_this.getValuesPivotNonLeaf(rowNode,colId),result[colId]=_this.aggregateValues(values,valueColumn.getAggFunc(),valueColumn,rowNode)})),pivotColumnDefs.filter((function(v){return agGridCommunity._.exists(v.pivotTotalColumnIds)})).forEach((function(totalColDef){var aggResults=[],pivotValueColumn=totalColDef.pivotValueColumn,pivotTotalColumnIds=totalColDef.pivotTotalColumnIds,colId=totalColDef.colId;pivotTotalColumnIds&&pivotTotalColumnIds.length&&(pivotTotalColumnIds.forEach((function(currentColId){aggResults.push(result[currentColId])})),result[colId]=_this.aggregateValues(aggResults,pivotValueColumn.getAggFunc(),pivotValueColumn,rowNode))})),result},AggregationStage.prototype.aggregateRowNodeUsingValuesOnly=function(rowNode,aggDetails){var _this=this,result={},changedValueColumns=aggDetails.changedPath.isActive()?aggDetails.changedPath.getValueColumnsForNode(rowNode,aggDetails.valueColumns):aggDetails.valueColumns,notChangedValueColumns=aggDetails.changedPath.isActive()?aggDetails.changedPath.getNotValueColumnsForNode(rowNode,aggDetails.valueColumns):null,values2d=this.getValuesNormal(rowNode,changedValueColumns),oldValues=rowNode.aggData;return changedValueColumns.forEach((function(valueColumn,index){result[valueColumn.getId()]=_this.aggregateValues(values2d[index],valueColumn.getAggFunc(),valueColumn,rowNode)})),notChangedValueColumns&&oldValues&&notChangedValueColumns.forEach((function(valueColumn){result[valueColumn.getId()]=oldValues[valueColumn.getId()]})),result},AggregationStage.prototype.getValuesPivotNonLeaf=function(rowNode,colId){var values=[];return rowNode.childrenAfterFilter.forEach((function(node){var value=node.aggData[colId];values.push(value)})),values},AggregationStage.prototype.getValuesFromMappedSet=function(mappedSet,keys,valueColumn){var _this=this,mapPointer=mappedSet;if(keys.forEach((function(key){return mapPointer=mapPointer?mapPointer[key]:null})),!mapPointer)return[];var values=[];return mapPointer.forEach((function(rowNode){var value=_this.valueService.getValue(valueColumn,rowNode);values.push(value)})),values},AggregationStage.prototype.getValuesNormal=function(rowNode,valueColumns){var values=[];valueColumns.forEach((function(){return values.push([])}));for(var valueColumnCount=valueColumns.length,nodeList=this.filteredOnly?rowNode.childrenAfterFilter:rowNode.childrenAfterGroup,rowCount=nodeList.length,i=0;i<rowCount;i++)for(var childNode=nodeList[i],j=0;j<valueColumnCount;j++){var valueColumn=valueColumns[j],value=this.valueService.getValue(valueColumn,childNode);values[j].push(value)}return values},AggregationStage.prototype.aggregateValues=function(values,aggFuncOrString,column,rowNode){var aggFunc="string"==typeof aggFuncOrString?this.aggFuncService.getAggFunc(aggFuncOrString):aggFuncOrString;if("function"!=typeof aggFunc)return console.error("AG Grid: unrecognised aggregation function "+aggFuncOrString),null;var deprecationWarning=function(){agGridCommunity._.doOnce((function(){console.warn("AG Grid: since v24.0, custom aggregation functions take a params object. Please alter your aggregation function to use params.values")}),"aggregationStage.aggregateValues Deprecation")};return aggFunc({values,column,colDef:column?column.getColDef():void 0,rowNode,data:rowNode?rowNode.data:void 0,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext(),forEach:function(callback,thisArg){return deprecationWarning(),values.forEach(callback,thisArg)},get length(){return deprecationWarning(),values.length},set length(val){deprecationWarning(),values.length=val}})},__decorate$a([agGridCommunity.Autowired("columnModel")],AggregationStage.prototype,"columnModel",void 0),__decorate$a([agGridCommunity.Autowired("valueService")],AggregationStage.prototype,"valueService",void 0),__decorate$a([agGridCommunity.Autowired("pivotStage")],AggregationStage.prototype,"pivotStage",void 0),__decorate$a([agGridCommunity.Autowired("aggFuncService")],AggregationStage.prototype,"aggFuncService",void 0),__decorate$a([agGridCommunity.Autowired("gridApi")],AggregationStage.prototype,"gridApi",void 0),__decorate$a([agGridCommunity.Autowired("columnApi")],AggregationStage.prototype,"columnApi",void 0),AggregationStage=__decorate$a([agGridCommunity.Bean("aggregationStage")],AggregationStage)}(agGridCommunity.BeanStub),BatchRemover=function(){function BatchRemover(){this.allSets={},this.allParents=[]}return BatchRemover.prototype.removeFromChildrenAfterGroup=function(parent,child){this.getSet(parent).removeFromChildrenAfterGroup[child.id]=!0},BatchRemover.prototype.removeFromAllLeafChildren=function(parent,child){this.getSet(parent).removeFromAllLeafChildren[child.id]=!0},BatchRemover.prototype.getSet=function(parent){return this.allSets[parent.id]||(this.allSets[parent.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(parent)),this.allSets[parent.id]},BatchRemover.prototype.getAllParents=function(){return this.allParents},BatchRemover.prototype.flush=function(){var _this=this;this.allParents.forEach((function(parent){var nodeDetails=_this.allSets[parent.id];parent.childrenAfterGroup=parent.childrenAfterGroup.filter((function(child){return!nodeDetails.removeFromChildrenAfterGroup[child.id]})),parent.allLeafChildren=parent.allLeafChildren.filter((function(child){return!nodeDetails.removeFromAllLeafChildren[child.id]})),parent.updateHasChildren(),parent.sibling&&(parent.sibling.childrenAfterGroup=parent.childrenAfterGroup,parent.sibling.allLeafChildren=parent.allLeafChildren)})),this.allSets={},this.allParents.length=0},BatchRemover}(),__extends$b=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$b=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$2=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$1=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$2(arguments[i]));return ar},GroupStage=function(_super){function GroupStage(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.groupIdSequence=new agGridCommunity.NumberSequence,_this}return __extends$b(GroupStage,_super),GroupStage.prototype.postConstruct=function(){this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.usingTreeData&&(this.getDataPath=this.gridOptionsWrapper.getDataPathFunc())},GroupStage.prototype.execute=function(params){var details=this.createGroupingDetails(params);if(details.transactions)this.handleTransaction(details);else{var afterColsChanged=!0===params.afterColumnsChanged;this.shotgunResetEverything(details,afterColsChanged)}this.positionLeafsAboveGroups(params.changedPath),this.orderGroups(details.rootNode),this.selectableService.updateSelectableAfterGrouping(details.rootNode)},GroupStage.prototype.positionLeafsAboveGroups=function(changedPath){this.usingTreeData||changedPath.forEachChangedNodeDepthFirst((function(group){if(group.childrenAfterGroup){var leafNodes_1=[],groupNodes_1=[];group.childrenAfterGroup.forEach((function(row){var _a;(null===(_a=row.childrenAfterGroup)||void 0===_a?void 0:_a.length)?groupNodes_1.push(row):leafNodes_1.push(row)})),group.childrenAfterGroup=__spread$1(leafNodes_1,groupNodes_1)}}),!1)},GroupStage.prototype.createGroupingDetails=function(params){var rowNode=params.rowNode,changedPath=params.changedPath,rowNodeTransactions=params.rowNodeTransactions,rowNodeOrder=params.rowNodeOrder,groupedCols=this.usingTreeData?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gridOptionsWrapper.isSuppressParentsInRowNodes(),expandByDefault:this.gridOptionsWrapper.getGroupDefaultExpanded(),groupedCols,rootNode:rowNode,pivotMode:this.columnModel.isPivotMode(),groupedColCount:this.usingTreeData||!groupedCols?0:groupedCols.length,rowNodeOrder,transactions:rowNodeTransactions,changedPath}},GroupStage.prototype.handleTransaction=function(details){var _this=this;details.transactions.forEach((function(tran){var batchRemover=_this.usingTreeData?void 0:new BatchRemover;if(agGridCommunity._.existsAndNotEmpty(tran.remove)&&_this.removeNodes(tran.remove,details,batchRemover),agGridCommunity._.existsAndNotEmpty(tran.update)&&_this.moveNodesInWrongPath(tran.update,details,batchRemover),agGridCommunity._.existsAndNotEmpty(tran.add)&&_this.insertNodes(tran.add,details,!1),batchRemover){var parentsWithChildrenRemoved=batchRemover.getAllParents().slice();batchRemover.flush(),_this.removeEmptyGroups(parentsWithChildrenRemoved,details)}})),details.rowNodeOrder&&this.sortChildren(details)},GroupStage.prototype.sortChildren=function(details){details.changedPath.forEachChangedNodeDepthFirst((function(rowNode){agGridCommunity._.sortRowNodesByOrder(rowNode.childrenAfterGroup,details.rowNodeOrder)}))},GroupStage.prototype.orderGroups=function(rootNode){if(!this.usingTreeData){var comparator=this.gridOptionsWrapper.getInitialGroupOrderComparator();agGridCommunity._.exists(comparator)&&function recursiveSort(rowNode){agGridCommunity._.exists(rowNode.childrenAfterGroup)&&!rowNode.leafGroup&&(rowNode.childrenAfterGroup.sort((function(nodeA,nodeB){return comparator({nodeA,nodeB})})),rowNode.childrenAfterGroup.forEach((function(childNode){return recursiveSort(childNode)})))}(rootNode)}},GroupStage.prototype.getExistingPathForNode=function(node,details){for(var res=[],pointer=this.usingTreeData?node:node.parent;pointer&&pointer!==details.rootNode;)res.push({key:pointer.key,rowGroupColumn:pointer.rowGroupColumn,field:pointer.field}),pointer=pointer.parent;return res.reverse(),res},GroupStage.prototype.moveNodesInWrongPath=function(childNodes,details,batchRemover){var _this=this;childNodes.forEach((function(childNode){details.changedPath.isActive()&&details.changedPath.addParentNode(childNode.parent);var infoToKeyMapper=function(item){return item.key},oldPath=_this.getExistingPathForNode(childNode,details).map(infoToKeyMapper),newPath=_this.getGroupInfo(childNode,details).map(infoToKeyMapper);agGridCommunity._.areEqual(oldPath,newPath)||_this.moveNode(childNode,details,batchRemover)}))},GroupStage.prototype.moveNode=function(childNode,details,batchRemover){if(this.removeNodesInStages([childNode],details,batchRemover),this.insertOneNode(childNode,details,!0),childNode.setData(childNode.data),details.changedPath.isActive()){var newParent=childNode.parent;details.changedPath.addParentNode(newParent)}},GroupStage.prototype.removeNodes=function(leafRowNodes,details,batchRemover){this.removeNodesInStages(leafRowNodes,details,batchRemover),details.changedPath.isActive()&&leafRowNodes.forEach((function(rowNode){return details.changedPath.addParentNode(rowNode.parent)}))},GroupStage.prototype.removeNodesInStages=function(leafRowNodes,details,batchRemover){if(this.removeNodesFromParents(leafRowNodes,details,batchRemover),this.usingTreeData){this.postRemoveCreateFillerNodes(leafRowNodes,details);var nodeParents=leafRowNodes.map((function(n){return n.parent}));this.removeEmptyGroups(nodeParents,details)}},GroupStage.prototype.forEachParentGroup=function(details,group,callback){for(var pointer=group;pointer&&pointer!==details.rootNode;)callback(pointer),pointer=pointer.parent},GroupStage.prototype.removeNodesFromParents=function(nodesToRemove,details,provided){var _this=this,batchRemoverIsLocal=null==provided,batchRemoverToUse=provided||new BatchRemover;nodesToRemove.forEach((function(nodeToRemove){_this.removeFromParent(nodeToRemove,batchRemoverToUse),_this.forEachParentGroup(details,nodeToRemove.parent,(function(parentNode){batchRemoverToUse.removeFromAllLeafChildren(parentNode,nodeToRemove)}))})),batchRemoverIsLocal&&batchRemoverToUse.flush()},GroupStage.prototype.postRemoveCreateFillerNodes=function(nodesToRemove,details){var _this=this;nodesToRemove.forEach((function(nodeToRemove){if(nodeToRemove.hasChildren()){var oldPath=_this.getExistingPathForNode(nodeToRemove,details),newGroupNode_1=_this.findParentForNode(nodeToRemove,oldPath,details);newGroupNode_1.expanded=nodeToRemove.expanded,newGroupNode_1.allLeafChildren=nodeToRemove.allLeafChildren,newGroupNode_1.childrenAfterGroup=nodeToRemove.childrenAfterGroup,newGroupNode_1.childrenMapped=nodeToRemove.childrenMapped,newGroupNode_1.updateHasChildren(),newGroupNode_1.childrenAfterGroup.forEach((function(rowNode){return rowNode.parent=newGroupNode_1}))}}))},GroupStage.prototype.removeEmptyGroups=function(possibleEmptyGroups,details){for(var _this=this,checkAgain=!0,_loop_1=function(){checkAgain=!1;var batchRemover=new BatchRemover;possibleEmptyGroups.forEach((function(possibleEmptyGroup){_this.forEachParentGroup(details,possibleEmptyGroup,(function(rowNode){(function(rowNode){var mapKey=_this.getChildrenMappedKey(rowNode.key,rowNode.rowGroupColumn),parentRowNode=rowNode.parent;return!!(parentRowNode&&parentRowNode.childrenMapped&&parentRowNode.childrenMapped[mapKey]&&rowNode.isEmptyRowGroupNode())})(rowNode)&&(checkAgain=!0,_this.removeFromParent(rowNode,batchRemover),rowNode.setSelected(!1))}))})),batchRemover.flush()};checkAgain;)_loop_1()},GroupStage.prototype.removeFromParent=function(child,batchRemover){child.parent&&(batchRemover?batchRemover.removeFromChildrenAfterGroup(child.parent,child):(agGridCommunity._.removeFromArray(child.parent.childrenAfterGroup,child),child.parent.updateHasChildren()));var mapKey=this.getChildrenMappedKey(child.key,child.rowGroupColumn);child.parent&&child.parent.childrenMapped&&(child.parent.childrenMapped[mapKey]=void 0),child.setRowTop(null),child.setRowIndex(null)},GroupStage.prototype.addToParent=function(child,parent){var mapKey=this.getChildrenMappedKey(child.key,child.rowGroupColumn);parent&&(null!=parent.childrenMapped&&(parent.childrenMapped[mapKey]=child),parent.childrenAfterGroup.push(child),parent.updateHasChildren())},GroupStage.prototype.areGroupColsEqual=function(d1,d2){return null!=d1&&null!=d2&&d1.pivotMode===d2.pivotMode&&agGridCommunity._.areEqual(d1.groupedCols,d2.groupedCols)},GroupStage.prototype.checkAllGroupDataAfterColsChanged=function(details){var _this=this,recurse=function(rowNodes){rowNodes&&rowNodes.forEach((function(rowNode){if(!(!_this.usingTreeData&&!rowNode.group)){var groupInfo={field:rowNode.field,key:rowNode.key,rowGroupColumn:rowNode.rowGroupColumn};_this.setGroupData(rowNode,groupInfo),recurse(rowNode.childrenAfterGroup)}}))};recurse(details.rootNode.childrenAfterGroup)},GroupStage.prototype.shotgunResetEverything=function(details,afterColumnsChanged){if(!this.noChangeInGroupingColumns(details,afterColumnsChanged)){this.selectionService.removeGroupsFromSelection();var rootNode=details.rootNode,groupedCols=details.groupedCols;rootNode.leafGroup=!this.usingTreeData&&0===groupedCols.length,rootNode.childrenAfterGroup=[],rootNode.childrenMapped={},rootNode.updateHasChildren();var sibling=rootNode.sibling;sibling&&(sibling.childrenAfterGroup=rootNode.childrenAfterGroup,sibling.childrenMapped=rootNode.childrenMapped),this.insertNodes(rootNode.allLeafChildren,details,!1)}},GroupStage.prototype.noChangeInGroupingColumns=function(details,afterColumnsChanged){var noFurtherProcessingNeeded=!1,groupDisplayColumns=this.columnModel.getGroupDisplayColumns(),newGroupDisplayColIds=groupDisplayColumns?groupDisplayColumns.map((function(c){return c.getId()})).join("-"):"";return afterColumnsChanged&&(noFurtherProcessingNeeded=this.usingTreeData||this.areGroupColsEqual(details,this.oldGroupingDetails),this.oldGroupDisplayColIds!==newGroupDisplayColIds&&this.checkAllGroupDataAfterColsChanged(details)),this.oldGroupingDetails=details,this.oldGroupDisplayColIds=newGroupDisplayColIds,noFurtherProcessingNeeded},GroupStage.prototype.insertNodes=function(newRowNodes,details,isMove){var _this=this;newRowNodes.forEach((function(rowNode){_this.insertOneNode(rowNode,details,isMove),details.changedPath.isActive()&&details.changedPath.addParentNode(rowNode.parent)}))},GroupStage.prototype.insertOneNode=function(childNode,details,isMove){var path=this.getGroupInfo(childNode,details),parentGroup=this.findParentForNode(childNode,path,details);parentGroup.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[parentGroup.data,childNode.data]),this.usingTreeData?this.swapGroupWithUserNode(parentGroup,childNode,isMove):(childNode.parent=parentGroup,childNode.level=path.length,parentGroup.childrenAfterGroup.push(childNode),parentGroup.updateHasChildren())},GroupStage.prototype.findParentForNode=function(childNode,path,details){var _this=this,nextNode=details.rootNode;return path.forEach((function(groupInfo,level){(nextNode=_this.getOrCreateNextNode(nextNode,groupInfo,level,details)).allLeafChildren.push(childNode)})),nextNode},GroupStage.prototype.swapGroupWithUserNode=function(fillerGroup,userGroup,isMove){userGroup.parent=fillerGroup.parent,userGroup.key=fillerGroup.key,userGroup.field=fillerGroup.field,userGroup.groupData=fillerGroup.groupData,userGroup.level=fillerGroup.level,isMove||(userGroup.expanded=fillerGroup.expanded),userGroup.leafGroup=fillerGroup.leafGroup,userGroup.rowGroupIndex=fillerGroup.rowGroupIndex,userGroup.allLeafChildren=fillerGroup.allLeafChildren,userGroup.childrenAfterGroup=fillerGroup.childrenAfterGroup,userGroup.childrenMapped=fillerGroup.childrenMapped,userGroup.updateHasChildren(),this.removeFromParent(fillerGroup),userGroup.childrenAfterGroup.forEach((function(rowNode){return rowNode.parent=userGroup})),this.addToParent(userGroup,fillerGroup.parent)},GroupStage.prototype.getOrCreateNextNode=function(parentGroup,groupInfo,level,details){var key=this.getChildrenMappedKey(groupInfo.key,groupInfo.rowGroupColumn),nextNode=parentGroup.childrenMapped?parentGroup.childrenMapped[key]:void 0;return nextNode||(nextNode=this.createGroup(groupInfo,parentGroup,level,details),this.addToParent(nextNode,parentGroup)),nextNode},GroupStage.prototype.createGroup=function(groupInfo,parent,level,details){var groupNode=new agGridCommunity.RowNode(this.beans);return groupNode.group=!0,groupNode.field=groupInfo.field,groupNode.rowGroupColumn=groupInfo.rowGroupColumn,this.setGroupData(groupNode,groupInfo),groupNode.id=agGridCommunity.RowNode.ID_PREFIX_ROW_GROUP+this.groupIdSequence.next(),groupNode.key=groupInfo.key,groupNode.level=level,groupNode.leafGroup=!this.usingTreeData&&level===details.groupedColCount-1,groupNode.allLeafChildren=[],groupNode.setAllChildrenCount(0),groupNode.rowGroupIndex=this.usingTreeData?null:level,groupNode.childrenAfterGroup=[],groupNode.childrenMapped={},groupNode.updateHasChildren(),groupNode.parent=details.includeParents?parent:null,this.setExpandedInitialValue(details,groupNode),groupNode},GroupStage.prototype.setGroupData=function(groupNode,groupInfo){var _this=this;groupNode.groupData={},this.columnModel.getGroupDisplayColumns().forEach((function(col){(_this.usingTreeData||!!groupNode.rowGroupColumn&&col.isRowGroupDisplayed(groupNode.rowGroupColumn.getId()))&&(groupNode.groupData[col.getColId()]=groupInfo.key)}))},GroupStage.prototype.getChildrenMappedKey=function(key,rowGroupColumn){return rowGroupColumn?rowGroupColumn.getId()+"-"+key:key},GroupStage.prototype.setExpandedInitialValue=function(details,groupNode){if(details.pivotMode&&groupNode.leafGroup)groupNode.expanded=!1;else{var userCallback=this.gridOptionsWrapper.getIsGroupOpenByDefaultFunc();if(userCallback){var params={rowNode:groupNode,field:groupNode.field,key:groupNode.key,level:groupNode.level,rowGroupColumn:groupNode.rowGroupColumn};groupNode.expanded=1==userCallback(params)}else{var expandByDefault=details.expandByDefault;-1!==details.expandByDefault?groupNode.expanded=groupNode.level<expandByDefault:groupNode.expanded=!0}}},GroupStage.prototype.getGroupInfo=function(rowNode,details){return this.usingTreeData?this.getGroupInfoFromCallback(rowNode):this.getGroupInfoFromGroupColumns(rowNode,details)},GroupStage.prototype.getGroupInfoFromCallback=function(rowNode){var keys=this.getDataPath?this.getDataPath(rowNode.data):null;null!=keys&&0!==keys.length||agGridCommunity._.doOnce((function(){return console.warn("AG Grid: getDataPath() should not return an empty path for data",rowNode.data)}),"groupStage.getGroupInfoFromCallback");return keys?keys.map((function(key){return{key,field:null,rowGroupColumn:null}})):[]},GroupStage.prototype.getGroupInfoFromGroupColumns=function(rowNode,details){var _this=this,res=[];return details.groupedCols.forEach((function(groupCol){var key=_this.valueService.getKeyForNode(groupCol,rowNode),keyExists=null!=key;if(details.pivotMode&&!keyExists&&(key=" ",keyExists=!0),keyExists){var item={key,field:groupCol.getColDef().field,rowGroupColumn:groupCol};res.push(item)}})),res},__decorate$b([agGridCommunity.Autowired("columnModel")],GroupStage.prototype,"columnModel",void 0),__decorate$b([agGridCommunity.Autowired("selectableService")],GroupStage.prototype,"selectableService",void 0),__decorate$b([agGridCommunity.Autowired("valueService")],GroupStage.prototype,"valueService",void 0),__decorate$b([agGridCommunity.Autowired("beans")],GroupStage.prototype,"beans",void 0),__decorate$b([agGridCommunity.Autowired("selectionService")],GroupStage.prototype,"selectionService",void 0),__decorate$b([agGridCommunity.PostConstruct],GroupStage.prototype,"postConstruct",null),GroupStage=__decorate$b([agGridCommunity.Bean("groupStage")],GroupStage)}(agGridCommunity.BeanStub),__extends$c=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},__decorate$c=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$3=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$2=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$3(arguments[i]));return ar},PivotColDefService=function(_super){function PivotColDefService(){return null!==_super&&_super.apply(this,arguments)||this}var PivotColDefService_1;return __extends$c(PivotColDefService,_super),PivotColDefService_1=PivotColDefService,PivotColDefService.prototype.createPivotColumnDefs=function(uniqueValues){var pivotColumns=this.columnModel.getPivotColumns(),valueColumns=this.columnModel.getValueColumns(),levelsDeep=pivotColumns.length,pivotColumnGroupDefs=this.recursiveBuildGroup(0,uniqueValues,[],levelsDeep,pivotColumns);var pivotColumnDefs=function extractColDefs(input,arr){return void 0===arr&&(arr=[]),input.forEach((function(def){void 0!==def.children?extractColDefs(def.children,arr):arr.push(def)})),arr}(pivotColumnGroupDefs);return this.addRowGroupTotals(pivotColumnGroupDefs,pivotColumnDefs,valueColumns),this.addExpandablePivotGroups(pivotColumnGroupDefs,pivotColumnDefs),this.addPivotTotalsToGroups(pivotColumnGroupDefs,pivotColumnDefs),{pivotColumnGroupDefs,pivotColumnDefs:pivotColumnDefs.map((function(colDef){return agGridCommunity._.cloneObject(colDef)}))}},PivotColDefService.prototype.recursiveBuildGroup=function(index,uniqueValue,pivotKeys,maxDepth,primaryPivotColumns){var _this=this,measureColumns=this.columnModel.getValueColumns();if(index>=maxDepth)return this.buildMeasureCols(pivotKeys);var primaryPivotColumnDefs=primaryPivotColumns[index].getColDef(),comparator=this.headerNameComparator.bind(this,primaryPivotColumnDefs.pivotComparator);if(1===measureColumns.length&&this.gridOptionsWrapper.isRemovePivotHeaderRowWhenSingleValueColumn()&&index===maxDepth-1){var leafCols_1=[];return agGridCommunity._.iterateObject(uniqueValue,(function(key){var newPivotKeys=__spread$2(pivotKeys,[key]);leafCols_1.push(__assign(__assign({},_this.createColDef(measureColumns[0],key,newPivotKeys)),{columnGroupShow:"open"}))})),leafCols_1.sort(comparator),leafCols_1}var groups=[];return agGridCommunity._.iterateObject(uniqueValue,(function(key,value){var newPivotKeys=__spread$2(pivotKeys,[key]);groups.push({children:_this.recursiveBuildGroup(index+1,value,newPivotKeys,maxDepth,primaryPivotColumns),headerName:key,pivotKeys:newPivotKeys,columnGroupShow:"open",groupId:_this.generateColumnGroupId(newPivotKeys)})})),groups.sort(comparator),groups},PivotColDefService.prototype.buildMeasureCols=function(pivotKeys){var _this=this,measureColumns=this.columnModel.getValueColumns();return 0===measureColumns.length?[this.createColDef(null,"-",pivotKeys)]:measureColumns.map((function(measureCol){var columnName=_this.columnModel.getDisplayNameForColumn(measureCol,"header");return __assign(__assign({},_this.createColDef(measureCol,columnName,pivotKeys)),{columnGroupShow:"open"})}))},PivotColDefService.prototype.addExpandablePivotGroups=function(pivotColumnGroupDefs,pivotColumnDefs){var _this=this;if(!this.gridOptionsWrapper.isSuppressExpandablePivotGroups()&&!this.gridOptionsWrapper.getPivotColumnGroupTotals()){var recursivelyAddSubTotals=function(groupDef,currentPivotColumnDefs,acc){var group=groupDef;if(group.children){var childAcc_1=new Map;group.children.forEach((function(grp){recursivelyAddSubTotals(grp,currentPivotColumnDefs,childAcc_1)}));var firstGroup_1=!group.children.some((function(child){return child.children}));_this.columnModel.getValueColumns().forEach((function(valueColumn){var columnName=_this.columnModel.getDisplayNameForColumn(valueColumn,"header"),totalColDef=_this.createColDef(valueColumn,columnName,groupDef.pivotKeys);(totalColDef.pivotTotalColumnIds=childAcc_1.get(valueColumn.getColId()),totalColDef.columnGroupShow="closed",totalColDef.aggFunc=valueColumn.getAggFunc(),firstGroup_1)||(groupDef.children.push(totalColDef),currentPivotColumnDefs.push(totalColDef))})),_this.merge(acc,childAcc_1)}else{var def=groupDef;if(!def.pivotValueColumn)return;var pivotValueColId=def.pivotValueColumn.getColId(),arr=acc.has(pivotValueColId)?acc.get(pivotValueColId):[];arr.push(def.colId),acc.set(pivotValueColId,arr)}};pivotColumnGroupDefs.forEach((function(groupDef){recursivelyAddSubTotals(groupDef,pivotColumnDefs,new Map)}))}},PivotColDefService.prototype.addPivotTotalsToGroups=function(pivotColumnGroupDefs,pivotColumnDefs){var _this=this;if(this.gridOptionsWrapper.getPivotColumnGroupTotals()){var insertAfter="after"===this.gridOptionsWrapper.getPivotColumnGroupTotals(),valueCols=this.columnModel.getValueColumns(),aggFuncs=valueCols.map((function(valueCol){return valueCol.getAggFunc()}));if(aggFuncs&&!(aggFuncs.length<1)&&this.sameAggFuncs(aggFuncs)){var valueColumn=valueCols[0];pivotColumnGroupDefs.forEach((function(groupDef){_this.recursivelyAddPivotTotal(groupDef,pivotColumnDefs,valueColumn,insertAfter)}))}}},PivotColDefService.prototype.recursivelyAddPivotTotal=function(groupDef,pivotColumnDefs,valueColumn,insertAfter){var _this=this,group=groupDef;if(!group.children){var def=groupDef;return def.colId?[def.colId]:null}var colIds=[];if(group.children.forEach((function(grp){var childColIds=_this.recursivelyAddPivotTotal(grp,pivotColumnDefs,valueColumn,insertAfter);childColIds&&(colIds=colIds.concat(childColIds))})),group.children.length>1){var headerName=this.gridOptionsWrapper.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),totalColDef=this.createColDef(valueColumn,headerName,groupDef.pivotKeys,!0);totalColDef.pivotTotalColumnIds=colIds,totalColDef.aggFunc=valueColumn.getAggFunc();var children=groupDef.children;insertAfter?children.push(totalColDef):children.unshift(totalColDef),pivotColumnDefs.push(totalColDef)}return colIds},PivotColDefService.prototype.addRowGroupTotals=function(pivotColumnGroupDefs,pivotColumnDefs,valueColumns){var _this=this;if(this.gridOptionsWrapper.getPivotRowTotals())for(var insertAfter="after"===this.gridOptionsWrapper.getPivotRowTotals(),valueCols=insertAfter?valueColumns.slice():valueColumns.slice().reverse(),_loop_1=function(i){var valueCol=valueCols[i],colIds=[];pivotColumnGroupDefs.forEach((function(groupDef){colIds=colIds.concat(_this.extractColIdsForValueColumn(groupDef,valueCol))})),this_1.createRowGroupTotal(pivotColumnGroupDefs,pivotColumnDefs,valueCol,colIds,insertAfter)},this_1=this,i=0;i<valueCols.length;i++)_loop_1(i)},PivotColDefService.prototype.extractColIdsForValueColumn=function(groupDef,valueColumn){var _this=this,group=groupDef;if(!group.children){var colDef=group;return colDef.pivotValueColumn===valueColumn&&colDef.colId?[colDef.colId]:[]}var colIds=[];return group.children.forEach((function(grp){_this.extractColIdsForValueColumn(grp,valueColumn);var childColIds=_this.extractColIdsForValueColumn(grp,valueColumn);colIds=colIds.concat(childColIds)})),colIds},PivotColDefService.prototype.createRowGroupTotal=function(parentChildren,pivotColumnDefs,valueColumn,colIds,insertAfter){var colDef;if(0===this.columnModel.getValueColumns().length)colDef=this.createColDef(null,"-",[]);else{var columnName=this.columnModel.getDisplayNameForColumn(valueColumn,"header");(colDef=this.createColDef(valueColumn,columnName,[])).pivotTotalColumnIds=colIds}colDef.colId=PivotColDefService_1.PIVOT_ROW_TOTAL_PREFIX+colDef.colId,pivotColumnDefs.push(colDef),insertAfter?parentChildren.push(colDef):parentChildren.unshift(colDef)},PivotColDefService.prototype.createColDef=function(valueColumn,headerName,pivotKeys,totalColumn){void 0===totalColumn&&(totalColumn=!1);var colDef={};if(valueColumn){var colDefToCopy=valueColumn.getColDef();Object.assign(colDef,colDefToCopy),colDef.hide=!1}return colDef.headerName=headerName,colDef.colId=this.generateColumnId(pivotKeys||[],valueColumn&&!totalColumn?valueColumn.getColId():""),colDef.field=colDef.colId,colDef.pivotKeys=pivotKeys,colDef.pivotValueColumn=valueColumn,!0===colDef.filter&&(colDef.filter="agNumberColumnFilter"),colDef},PivotColDefService.prototype.sameAggFuncs=function(aggFuncs){if(1==aggFuncs.length)return!0;for(var i=1;i<aggFuncs.length;i++)if(aggFuncs[i]!==aggFuncs[0])return!1;return!0},PivotColDefService.prototype.headerNameComparator=function(userComparator,a,b){return userComparator?userComparator(a.headerName,b.headerName):a.headerName&&!b.headerName?1:!a.headerName&&b.headerName?-1:a.headerName&&b.headerName?a.headerName<b.headerName?-1:a.headerName>b.headerName?1:0:0},PivotColDefService.prototype.merge=function(m1,m2){m2.forEach((function(value,key,map){var existingList=m1.has(key)?m1.get(key):[],updatedList=__spread$2(existingList,value);m1.set(key,updatedList)}))},PivotColDefService.prototype.generateColumnGroupId=function(pivotKeys){return"pivotGroup_"+this.columnModel.getPivotColumns().map((function(col){return col.getColId()})).join("-")+"_"+pivotKeys.join("-")},PivotColDefService.prototype.generateColumnId=function(pivotKeys,measureColumnId){return"pivot_"+this.columnModel.getPivotColumns().map((function(col){return col.getColId()})).join("-")+"_"+pivotKeys.join("-")+"_"+measureColumnId},PivotColDefService.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",__decorate$c([agGridCommunity.Autowired("columnModel")],PivotColDefService.prototype,"columnModel",void 0),PivotColDefService=PivotColDefService_1=__decorate$c([agGridCommunity.Bean("pivotColDefService")],PivotColDefService)}(agGridCommunity.BeanStub),__extends$d=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$d=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PivotStage=function(_super){function PivotStage(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.uniqueValues={},_this}return __extends$d(PivotStage,_super),PivotStage.prototype.execute=function(params){var rootNode=params.rowNode,changedPath=params.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(rootNode,changedPath):this.executePivotOff(changedPath)},PivotStage.prototype.executePivotOff=function(changedPath){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),changedPath&&changedPath.setInactive())},PivotStage.prototype.executePivotOn=function(rootNode,changedPath){var uniqueValues=this.bucketUpRowNodes(rootNode),uniqueValuesChanged=this.setUniqueValues(uniqueValues),aggregationColumns=this.columnModel.getValueColumns(),aggregationColumnsHash=aggregationColumns.map((function(column){return column.getId()+"-"+column.getColDef().headerName})).join("#"),aggregationFuncsHash=aggregationColumns.map((function(column){return column.getAggFunc().toString()})).join("#"),aggregationColumnsChanged=this.aggregationColumnsHashLastTime!==aggregationColumnsHash,aggregationFuncsChanged=this.aggregationFuncsHashLastTime!==aggregationFuncsHash;if(this.aggregationColumnsHashLastTime=aggregationColumnsHash,this.aggregationFuncsHashLastTime=aggregationFuncsHash,uniqueValuesChanged||aggregationColumnsChanged||aggregationFuncsChanged){var _a=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),pivotColumnGroupDefs=_a.pivotColumnGroupDefs,pivotColumnDefs=_a.pivotColumnDefs;this.pivotColumnDefs=pivotColumnDefs,this.columnModel.setSecondaryColumns(pivotColumnGroupDefs,"rowModelUpdated"),changedPath&&changedPath.setInactive()}},PivotStage.prototype.setUniqueValues=function(newValues){return!!(JSON.stringify(newValues)!==JSON.stringify(this.uniqueValues))&&(this.uniqueValues=newValues,!0)},PivotStage.prototype.bucketUpRowNodes=function(rootNode){var _this=this,uniqueValues={},recursivelySearchForLeafNodes=function(rowNode){rowNode.leafGroup?_this.bucketRowNode(rowNode,uniqueValues):rowNode.childrenAfterFilter.forEach((function(child){recursivelySearchForLeafNodes(child)}))};return recursivelySearchForLeafNodes(rootNode),uniqueValues},PivotStage.prototype.bucketRowNode=function(rowNode,uniqueValues){var pivotColumns=this.columnModel.getPivotColumns();0===pivotColumns.length?rowNode.childrenMapped=null:rowNode.childrenMapped=this.bucketChildren(rowNode.childrenAfterFilter,pivotColumns,0,uniqueValues),rowNode.sibling&&(rowNode.sibling.childrenMapped=rowNode.childrenMapped)},PivotStage.prototype.bucketChildren=function(children,pivotColumns,pivotIndex,uniqueValues){var _this=this,mappedChildren={},pivotColumn=pivotColumns[pivotIndex];if(children.forEach((function(child){var key=_this.valueService.getKeyForNode(pivotColumn,child);agGridCommunity._.missing(key)&&(key=""),uniqueValues[key]||(uniqueValues[key]={}),mappedChildren[key]||(mappedChildren[key]=[]),mappedChildren[key].push(child)})),pivotIndex===pivotColumns.length-1)return mappedChildren;var result_1={};return agGridCommunity._.iterateObject(mappedChildren,(function(key,value){result_1[key]=_this.bucketChildren(value,pivotColumns,pivotIndex+1,uniqueValues[key])})),result_1},PivotStage.prototype.getPivotColumnDefs=function(){return this.pivotColumnDefs},__decorate$d([agGridCommunity.Autowired("valueService")],PivotStage.prototype,"valueService",void 0),__decorate$d([agGridCommunity.Autowired("columnModel")],PivotStage.prototype,"columnModel",void 0),__decorate$d([agGridCommunity.Autowired("pivotColDefService")],PivotStage.prototype,"pivotColDefService",void 0),PivotStage=__decorate$d([agGridCommunity.Bean("pivotStage")],PivotStage)}(agGridCommunity.BeanStub),__extends$e=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$e=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AGBigInt="undefined"==typeof BigInt?null:BigInt,AggFuncService=function(_super){function AggFuncService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.aggFuncsMap={},_this.initialised=!1,_this}var AggFuncService_1;return __extends$e(AggFuncService,_super),AggFuncService_1=AggFuncService,AggFuncService.prototype.init=function(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsWrapper.getAggFuncs()))},AggFuncService.prototype.initialiseWithDefaultAggregations=function(){this.aggFuncsMap[AggFuncService_1.AGG_SUM]=aggSum,this.aggFuncsMap[AggFuncService_1.AGG_FIRST]=aggFirst,this.aggFuncsMap[AggFuncService_1.AGG_LAST]=aggLast,this.aggFuncsMap[AggFuncService_1.AGG_MIN]=aggMin,this.aggFuncsMap[AggFuncService_1.AGG_MAX]=aggMax,this.aggFuncsMap[AggFuncService_1.AGG_COUNT]=aggCount,this.aggFuncsMap[AggFuncService_1.AGG_AVG]=aggAvg,this.initialised=!0},AggFuncService.prototype.isAggFuncPossible=function(column,func){var allKeys=this.getFuncNames(column),allowed=agGridCommunity._.includes(allKeys,func),funcExists=agGridCommunity._.exists(this.aggFuncsMap[func]);return allowed&&funcExists},AggFuncService.prototype.getDefaultAggFunc=function(column){var defaultAgg=column.getColDef().defaultAggFunc;if(agGridCommunity._.exists(defaultAgg)&&this.isAggFuncPossible(column,defaultAgg))return defaultAgg;if(this.isAggFuncPossible(column,AggFuncService_1.AGG_SUM))return AggFuncService_1.AGG_SUM;var allKeys=this.getFuncNames(column);return agGridCommunity._.existsAndNotEmpty(allKeys)?allKeys[0]:null},AggFuncService.prototype.addAggFuncs=function(aggFuncs){agGridCommunity._.iterateObject(aggFuncs,this.addAggFunc.bind(this))},AggFuncService.prototype.addAggFunc=function(key,aggFunc){this.init(),this.aggFuncsMap[key]=aggFunc},AggFuncService.prototype.getAggFunc=function(name){return this.init(),this.aggFuncsMap[name]},AggFuncService.prototype.getFuncNames=function(column){var userAllowedFuncs=column.getColDef().allowedAggFuncs;return null==userAllowedFuncs?Object.keys(this.aggFuncsMap).sort():userAllowedFuncs},AggFuncService.prototype.clear=function(){this.aggFuncsMap={}},AggFuncService.AGG_SUM="sum",AggFuncService.AGG_FIRST="first",AggFuncService.AGG_LAST="last",AggFuncService.AGG_MIN="min",AggFuncService.AGG_MAX="max",AggFuncService.AGG_COUNT="count",AggFuncService.AGG_AVG="avg",__decorate$e([agGridCommunity.PostConstruct],AggFuncService.prototype,"init",null),AggFuncService=AggFuncService_1=__decorate$e([agGridCommunity.Bean("aggFuncService")],AggFuncService)}(agGridCommunity.BeanStub);function aggSum(params){for(var values=params.values,result=null,i=0;i<values.length;i++){var value=values[i];"number"==typeof value?null===result?result=value:result+=AGBigInt?"number"==typeof result?value:AGBigInt(value):value:"bigint"==typeof value&&(result=null===result?value:("bigint"==typeof result?result:AGBigInt(result))+value)}return result}function aggFirst(params){return params.values.length>0?params.values[0]:null}function aggLast(params){return params.values.length>0?agGridCommunity._.last(params.values):null}function aggMin(params){for(var values=params.values,result=null,i=0;i<values.length;i++){var value=values[i];"number"!=typeof value&&"bigint"!=typeof value||!(null===result||result>value)||(result=value)}return result}function aggMax(params){for(var values=params.values,result=null,i=0;i<values.length;i++){var value=values[i];"number"!=typeof value&&"bigint"!=typeof value||!(null===result||result<value)||(result=value)}return result}function aggCount(params){for(var values=params.values,result=0,i=0;i<values.length;i++){var value=values[i];result+=null!=value&&"number"==typeof value.value?value.value:1}return{value:result,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function aggAvg(params){for(var values=params.values,sum=0,count=0,i=0;i<values.length;i++){var currentValue=values[i],valueToAdd=null;"number"==typeof currentValue||"bigint"==typeof currentValue?(valueToAdd=currentValue,count++):null==currentValue||"number"!=typeof currentValue.value&&"bigint"!=typeof currentValue.value||"number"!=typeof currentValue.count||(valueToAdd=AGBigInt?currentValue.value*("number"==typeof currentValue.value?currentValue.count:AGBigInt(currentValue.count)):currentValue.value*currentValue.count,count+=currentValue.count),"number"==typeof valueToAdd?sum+=AGBigInt?"number"==typeof sum?valueToAdd:AGBigInt(valueToAdd):valueToAdd:"bigint"==typeof valueToAdd&&(sum=("bigint"==typeof sum?sum:AGBigInt(sum))+valueToAdd)}var value=null;return count>0&&(value=AGBigInt?sum/("number"==typeof sum?count:AGBigInt(count)):sum/count),{count,value,toString:function(){return"number"==typeof this.value||"bigint"==typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}}var RowType,__extends$f=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$f=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DropZoneColumnComp=function(_super){function DropZoneColumnComp(column,dragSourceDropTarget,ghost,valueColumn,horizontal){var _this=_super.call(this)||this;return _this.column=column,_this.dragSourceDropTarget=dragSourceDropTarget,_this.ghost=ghost,_this.valueColumn=valueColumn,_this.horizontal=horizontal,_this.popupShowing=!1,_this}return __extends$f(DropZoneColumnComp,_super),DropZoneColumnComp.prototype.init=function(){this.setTemplate(DropZoneColumnComp.TEMPLATE);var eGui=this.getGui(),isFunctionsReadOnly=this.gridOptionsWrapper.isFunctionsReadOnly();this.addElementClasses(eGui),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(agGridCommunity._.createIconNoSpan("columnDrag",this.gridOptionsWrapper)),this.eButton.appendChild(agGridCommunity._.createIconNoSpan("cancel",this.gridOptionsWrapper)),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),this.ghost||isFunctionsReadOnly||this.addDragSource();var translate=this.gridOptionsWrapper.getLocaleTextFunc(),label=translate("ariaDropZoneColumnComponentDescription","Press DELETE to remove"),_a=this.getColumnAndAggFuncName(),name=_a.name,aggFuncName=_a.aggFuncName,extraDescription="";this.valueColumn&&!isFunctionsReadOnly&&(extraDescription=translate("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type")),agGridCommunity._.setAriaLabel(eGui,aggFuncName+" "+name+" "+label+" "+extraDescription),this.setupTooltip()},DropZoneColumnComp.prototype.setupTooltip=function(){var _this=this,refresh=function(){var newTooltipText=_this.column.getColDef().headerTooltip;_this.setTooltip(newTooltipText)};refresh(),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,refresh)},DropZoneColumnComp.prototype.addDragSource=function(){var _this=this,dragSource={type:agGridCommunity.DragSourceType.ToolPanel,eElement:this.eDragHandle,defaultIconName:agGridCommunity.DragAndDropService.ICON_HIDE,getDragItem:function(){return _this.createDragItem()},dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(dragSource,!0),this.addDestroyFunc((function(){return _this.dragAndDropService.removeDragSource(dragSource)}))},DropZoneColumnComp.prototype.createDragItem=function(){var visibleState={};return visibleState[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState}},DropZoneColumnComp.prototype.setupComponents=function(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost"),this.valueColumn&&!this.gridOptionsWrapper.isFunctionsReadOnly()&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))},DropZoneColumnComp.prototype.setupRemove=function(){var _this=this;agGridCommunity._.setDisplayed(this.eButton,!this.gridOptionsWrapper.isFunctionsReadOnly());var agEvent={type:DropZoneColumnComp.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",(function(e){var isEnter=e.key===agGridCommunity.KeyCode.ENTER;e.key===agGridCommunity.KeyCode.DELETE&&(e.preventDefault(),_this.dispatchEvent(agEvent)),isEnter&&_this.valueColumn&&!_this.gridOptionsWrapper.isFunctionsReadOnly()&&(e.preventDefault(),_this.onShowAggFuncSelection())})),this.addManagedListener(this.eButton,"click",(function(mouseEvent){_this.dispatchEvent(agEvent),mouseEvent.stopPropagation()}));var touchListener=new agGridCommunity.TouchListener(this.eButton);this.addManagedListener(touchListener,agGridCommunity.TouchListener.EVENT_TAP,(function(){_this.dispatchEvent(agEvent)})),this.addDestroyFunc(touchListener.destroy.bind(touchListener))},DropZoneColumnComp.prototype.getColumnAndAggFuncName=function(){var name=this.displayName,aggFuncName="";if(this.valueColumn){var aggFunc=this.column.getAggFunc(),aggFuncString="string"==typeof aggFunc?aggFunc:"agg";aggFuncName=this.gridOptionsWrapper.getLocaleTextFunc()(aggFuncString,aggFuncString)}return{name,aggFuncName}},DropZoneColumnComp.prototype.setTextValue=function(){var _a=this.getColumnAndAggFuncName(),name=_a.name,aggFuncName=_a.aggFuncName,displayValue=this.valueColumn?aggFuncName+"("+name+")":name,displayValueSanitised=agGridCommunity._.escapeString(displayValue);this.eText.innerHTML=displayValueSanitised},DropZoneColumnComp.prototype.onShowAggFuncSelection=function(){var _this=this;if(!this.popupShowing){this.popupShowing=!0;var virtualList=new agGridCommunity.VirtualList("select-agg-func"),rows=this.aggFuncService.getFuncNames(this.column),eGui=this.getGui(),virtualListGui=virtualList.getGui();virtualList.setModel({getRow:function(index){return rows[index]},getRowCount:function(){return rows.length}}),this.getContext().createBean(virtualList);var ePopup=agGridCommunity._.loadTemplate('<div class="ag-select-agg-func-popup"></div>');ePopup.style.top="0px",ePopup.style.left="0px",ePopup.appendChild(virtualListGui),ePopup.style.width=eGui.clientWidth+"px";var translate=this.gridOptionsWrapper.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal:!0,eChild:ePopup,closeOnEsc:!0,closedCallback:function(){_this.destroyBean(virtualList),_this.popupShowing=!1,eGui.focus()},ariaLabel:translate("ariaLabelAggregationFunction","Aggregation Function")});addPopupRes&&virtualList.setComponentCreator(this.createAggSelect.bind(this,addPopupRes.hideFunc)),virtualList.addGuiEventListener("keydown",(function(e){if(e.key===agGridCommunity.KeyCode.ENTER||e.key===agGridCommunity.KeyCode.SPACE){var row=virtualList.getLastFocusedRow();if(null==row)return;var comp=virtualList.getComponentAt(row);comp&&comp.selectItem()}})),this.popupService.positionPopupUnderComponent({type:"aggFuncSelect",eventSource:eGui,ePopup,keepWithinBounds:!0,column:this.column}),virtualList.refresh();var rowToFocus=rows.findIndex((function(r){return r===_this.column.getAggFunc()}));-1===rowToFocus&&(rowToFocus=0),virtualList.focusRow(rowToFocus)}},DropZoneColumnComp.prototype.createAggSelect=function(hidePopup,value){var _this=this,localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),aggFuncString=value.toString(),aggFuncStringTranslated=localeTextFunc(aggFuncString,aggFuncString);return new AggItemComp((function(){if(hidePopup(),_this.gridOptionsWrapper.isFunctionsPassive()){var event_1={type:agGridCommunity.Events.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[_this.column],aggFunc:value,api:_this.gridApi,columnApi:_this.columnApi};_this.eventService.dispatchEvent(event_1)}else _this.columnModel.setColumnAggFunc(_this.column,value,"toolPanelDragAndDrop")}),aggFuncStringTranslated)},DropZoneColumnComp.prototype.addElementClasses=function(el,suffix){suffix=suffix?"-"+suffix:"";var direction=this.horizontal?"horizontal":"vertical";el.classList.add("ag-column-drop-cell"+suffix,"ag-column-drop-"+direction+"-cell"+suffix)},DropZoneColumnComp.EVENT_COLUMN_REMOVE="columnRemove",DropZoneColumnComp.TEMPLATE='<span role="option" tabindex="0">\n          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n        </span>',__decorate$f([agGridCommunity.Autowired("dragAndDropService")],DropZoneColumnComp.prototype,"dragAndDropService",void 0),__decorate$f([agGridCommunity.Autowired("columnModel")],DropZoneColumnComp.prototype,"columnModel",void 0),__decorate$f([agGridCommunity.Autowired("popupService")],DropZoneColumnComp.prototype,"popupService",void 0),__decorate$f([agGridCommunity.Optional("aggFuncService")],DropZoneColumnComp.prototype,"aggFuncService",void 0),__decorate$f([agGridCommunity.Autowired("columnApi")],DropZoneColumnComp.prototype,"columnApi",void 0),__decorate$f([agGridCommunity.Autowired("gridApi")],DropZoneColumnComp.prototype,"gridApi",void 0),__decorate$f([agGridCommunity.RefSelector("eText")],DropZoneColumnComp.prototype,"eText",void 0),__decorate$f([agGridCommunity.RefSelector("eDragHandle")],DropZoneColumnComp.prototype,"eDragHandle",void 0),__decorate$f([agGridCommunity.RefSelector("eButton")],DropZoneColumnComp.prototype,"eButton",void 0),__decorate$f([agGridCommunity.PostConstruct],DropZoneColumnComp.prototype,"init",null),DropZoneColumnComp}(agGridCommunity.Component),AggItemComp=function(_super){function AggItemComp(itemSelected,value){var _this=_super.call(this,'<div class="ag-select-agg-func-item"/>')||this;return _this.selectItem=itemSelected,_this.getGui().innerText=value,_this.addGuiEventListener("click",_this.selectItem),_this}return __extends$f(AggItemComp,_super),AggItemComp}(agGridCommunity.Component),__extends$g=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$g=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},BaseDropZonePanel=function(_super){function BaseDropZonePanel(horizontal,valueColumn){var _this=_super.call(this,'<div class="ag-unselectable" aria-role="presentation"></div>')||this;return _this.horizontal=horizontal,_this.valueColumn=valueColumn,_this.state=BaseDropZonePanel.STATE_NOT_DRAGGING,_this.guiDestroyFunctions=[],_this.childColumnComponents=[],_this.resizeEnabled=!1,_this.addElementClasses(_this.getGui()),_this.eColumnDropList=document.createElement("div"),_this.addElementClasses(_this.eColumnDropList,"list"),agGridCommunity._.setAriaRole(_this.eColumnDropList,"listbox"),_this}return __extends$g(BaseDropZonePanel,_super),BaseDropZonePanel.prototype.isHorizontal=function(){return this.horizontal},BaseDropZonePanel.prototype.toggleResizable=function(resizable){this.positionableFeature.setResizable(!!resizable&&{bottom:!0}),this.resizeEnabled=resizable},BaseDropZonePanel.prototype.setBeans=function(beans){this.beans=beans},BaseDropZonePanel.prototype.destroy=function(){this.destroyGui(),_super.prototype.destroy.call(this)},BaseDropZonePanel.prototype.destroyGui=function(){this.guiDestroyFunctions.forEach((function(func){return func()})),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,agGridCommunity._.clearElement(this.getGui()),agGridCommunity._.clearElement(this.eColumnDropList)},BaseDropZonePanel.prototype.init=function(params){this.params=params,this.createManagedBean(new agGridCommunity.ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.addManagedListener(this.beans.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,"functionsReadOnly",this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new agGridCommunity.PositionableFeature(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),agGridCommunity._.setAriaLabel(this.eColumnDropList,this.getAriaLabel())},BaseDropZonePanel.prototype.handleKeyDown=function(e){var isVertical=!this.horizontal,isNext=e.key===agGridCommunity.KeyCode.DOWN,isPrevious=e.key===agGridCommunity.KeyCode.UP;if(!isVertical){var isRtl=this.gridOptionsWrapper.isEnableRtl();isNext=!isRtl&&e.key===agGridCommunity.KeyCode.RIGHT||isRtl&&e.key===agGridCommunity.KeyCode.LEFT,isPrevious=!isRtl&&e.key===agGridCommunity.KeyCode.LEFT||isRtl&&e.key===agGridCommunity.KeyCode.RIGHT}if(isNext||isPrevious){var el=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,isPrevious);el&&(e.preventDefault(),el.focus())}},BaseDropZonePanel.prototype.addElementClasses=function(el,suffix){suffix=suffix?"-"+suffix:"";var direction=this.horizontal?"horizontal":"vertical";el.classList.add("ag-column-drop"+suffix,"ag-column-drop-"+direction+suffix)},BaseDropZonePanel.prototype.setupDropTarget=function(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)},BaseDropZonePanel.prototype.isInterestedIn=function(type){return type===agGridCommunity.DragSourceType.HeaderCell||type===agGridCommunity.DragSourceType.ToolPanel},BaseDropZonePanel.prototype.checkInsertIndex=function(draggingEvent){var newIndex=this.horizontal?this.getNewHorizontalInsertIndex(draggingEvent):this.getNewVerticalInsertIndex(draggingEvent);if(newIndex<0)return!1;var changed=newIndex!==this.insertIndex;return changed&&(this.insertIndex=newIndex),changed},BaseDropZonePanel.prototype.getNewHorizontalInsertIndex=function(draggingEvent){if(agGridCommunity._.missing(draggingEvent.hDirection))return-1;var newIndex=0,mouseEvent=draggingEvent.event,enableRtl=this.beans.gridOptionsWrapper.isEnableRtl(),goingLeft=draggingEvent.hDirection===agGridCommunity.HorizontalDirection.Left,mouseX=mouseEvent.clientX;return this.childColumnComponents.forEach((function(childColumn){var rect=childColumn.getGui().getBoundingClientRect(),rectX=goingLeft?rect.right:rect.left;(enableRtl?mouseX<=rectX:mouseX>=rectX)&&newIndex++})),newIndex},BaseDropZonePanel.prototype.getNewVerticalInsertIndex=function(draggingEvent){if(agGridCommunity._.missing(draggingEvent.vDirection))return-1;var newIndex=0,mouseEvent=draggingEvent.event;return this.childColumnComponents.forEach((function(childColumn){var rect=childColumn.getGui().getBoundingClientRect();mouseEvent.clientY>=(draggingEvent.vDirection===agGridCommunity.VerticalDirection.Down?rect.top:rect.bottom)&&newIndex++})),newIndex},BaseDropZonePanel.prototype.checkDragStartedBySelf=function(draggingEvent){this.state===BaseDropZonePanel.STATE_NOT_DRAGGING&&(this.state=BaseDropZonePanel.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=draggingEvent.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(draggingEvent),this.refreshGui())},BaseDropZonePanel.prototype.onDragging=function(draggingEvent){this.checkDragStartedBySelf(draggingEvent),this.checkInsertIndex(draggingEvent)&&this.refreshGui()},BaseDropZonePanel.prototype.onDragEnter=function(draggingEvent){var dragColumns=draggingEvent.dragSource.getDragItem().columns||[];this.state=BaseDropZonePanel.STATE_NEW_COLUMNS_IN;var goodDragColumns=dragColumns.filter(this.isColumnDroppable.bind(this));goodDragColumns.length>0&&(this.potentialDndColumns=goodDragColumns,this.checkInsertIndex(draggingEvent),this.refreshGui())},BaseDropZonePanel.prototype.isPotentialDndColumns=function(){return agGridCommunity._.existsAndNotEmpty(this.potentialDndColumns)},BaseDropZonePanel.prototype.onDragLeave=function(draggingEvent){if(this.state===BaseDropZonePanel.STATE_REARRANGE_COLUMNS){var columns=draggingEvent.dragSource.getDragItem().columns||[];this.removeColumns(columns)}this.isPotentialDndColumns()&&(this.potentialDndColumns=[],this.refreshGui()),this.state=BaseDropZonePanel.STATE_NOT_DRAGGING},BaseDropZonePanel.prototype.onDragStop=function(){if(this.isPotentialDndColumns()){var success=!1;this.state===BaseDropZonePanel.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),success=!0):success=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],this.beans.gridOptionsWrapper.isFunctionsPassive()&&success||this.refreshGui()}this.state=BaseDropZonePanel.STATE_NOT_DRAGGING},BaseDropZonePanel.prototype.removeColumns=function(columnsToRemove){var newColumnList=this.getExistingColumns().filter((function(col){return!agGridCommunity._.includes(columnsToRemove,col)}));this.updateColumns(newColumnList)},BaseDropZonePanel.prototype.addColumns=function(columnsToAdd){if(columnsToAdd){var newColumnList=this.getExistingColumns().slice(),colsToAddNoDuplicates=columnsToAdd.filter((function(col){return newColumnList.indexOf(col)<0}));agGridCommunity._.insertArrayIntoArray(newColumnList,colsToAddNoDuplicates,this.insertIndex),this.updateColumns(newColumnList)}},BaseDropZonePanel.prototype.rearrangeColumns=function(columnsToAdd){var newColumnList=this.getNonGhostColumns().slice();return agGridCommunity._.insertArrayIntoArray(newColumnList,columnsToAdd,this.insertIndex),!agGridCommunity._.areEqual(newColumnList,this.getExistingColumns())&&(this.updateColumns(newColumnList),!0)},BaseDropZonePanel.prototype.refreshGui=function(){var scrollTop=this.eColumnDropList.scrollTop,resizeEnabled=this.resizeEnabled,focusedIndex=this.getFocusedItem(),alternateElement=this.focusService.findNextFocusableElement();alternateElement||(alternateElement=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=scrollTop),resizeEnabled&&this.toggleResizable(resizeEnabled),this.restoreFocus(focusedIndex,alternateElement)},BaseDropZonePanel.prototype.getFocusedItem=function(){var eGui=this.getGui(),activeElement=this.gridOptionsWrapper.getDocument().activeElement;return eGui.contains(activeElement)?Array.from(eGui.querySelectorAll(".ag-column-drop-cell")).indexOf(activeElement):-1},BaseDropZonePanel.prototype.restoreFocus=function(index,alternateElement){var eGui=this.getGui(),items=Array.from(eGui.querySelectorAll(".ag-column-drop-cell"));if(-1!==index){0===items.length&&alternateElement.focus();var el=items[Math.min(items.length-1,index)];el&&el.focus()}},BaseDropZonePanel.prototype.getNonGhostColumns=function(){var _this=this,existingColumns=this.getExistingColumns();return this.isPotentialDndColumns()?existingColumns.filter((function(column){return!agGridCommunity._.includes(_this.potentialDndColumns,column)})):existingColumns},BaseDropZonePanel.prototype.addColumnsToGui=function(){var _this=this,nonGhostColumns=this.getNonGhostColumns(),addingGhosts=this.isPotentialDndColumns(),itemsToAddToGui=[];nonGhostColumns.forEach((function(column,index){if(!(addingGhosts&&index>=_this.insertIndex)){var columnComponent=_this.createColumnComponent(column,!1);itemsToAddToGui.push(columnComponent)}})),this.isPotentialDndColumns()&&(this.potentialDndColumns.forEach((function(column){var columnComponent=_this.createColumnComponent(column,!0);itemsToAddToGui.push(columnComponent)})),nonGhostColumns.forEach((function(column,index){if(!(index<_this.insertIndex)){var columnComponent=_this.createColumnComponent(column,!1);itemsToAddToGui.push(columnComponent)}}))),this.appendChild(this.eColumnDropList),itemsToAddToGui.forEach((function(columnComponent,index){index>0&&_this.addArrow(_this.eColumnDropList),_this.eColumnDropList.appendChild(columnComponent.getGui())})),this.addAriaLabelsToComponents()},BaseDropZonePanel.prototype.addAriaLabelsToComponents=function(){var _this=this;this.childColumnComponents.forEach((function(comp,idx){var eGui=comp.getGui();agGridCommunity._.setAriaPosInSet(eGui,idx+1),agGridCommunity._.setAriaSetSize(eGui,_this.childColumnComponents.length)}))},BaseDropZonePanel.prototype.createColumnComponent=function(column,ghost){var _this=this,columnComponent=new DropZoneColumnComp(column,this.dropTarget,ghost,this.valueColumn,this.horizontal);return columnComponent.addEventListener(DropZoneColumnComp.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[column])),this.beans.context.createBean(columnComponent),this.guiDestroyFunctions.push((function(){return _this.destroyBean(columnComponent)})),ghost||this.childColumnComponents.push(columnComponent),columnComponent},BaseDropZonePanel.prototype.addIconAndTitleToGui=function(){var eGroupIcon=this.params.icon,eTitleBar=document.createElement("div");if(eTitleBar.setAttribute("aria-hidden","true"),this.addElementClasses(eTitleBar,"title-bar"),this.addElementClasses(eGroupIcon,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty()),eTitleBar.appendChild(eGroupIcon),!this.horizontal){var eTitle=document.createElement("span");this.addElementClasses(eTitle,"title"),eTitle.innerHTML=this.params.title,eTitleBar.appendChild(eTitle)}this.appendChild(eTitleBar)},BaseDropZonePanel.prototype.isExistingColumnsEmpty=function(){return 0===this.getExistingColumns().length},BaseDropZonePanel.prototype.addEmptyMessageToGui=function(){if(this.isExistingColumnsEmpty()&&!this.isPotentialDndColumns()){var eMessage=document.createElement("span");eMessage.innerHTML=this.params.emptyMessage,this.addElementClasses(eMessage,"empty-message"),this.eColumnDropList.appendChild(eMessage)}},BaseDropZonePanel.prototype.addArrow=function(eParent){if(this.horizontal){var enableRtl=this.beans.gridOptionsWrapper.isEnableRtl(),icon=agGridCommunity._.createIconNoSpan(enableRtl?"smallLeft":"smallRight",this.beans.gridOptionsWrapper);this.addElementClasses(icon,"cell-separator"),eParent.appendChild(icon)}},BaseDropZonePanel.STATE_NOT_DRAGGING="notDragging",BaseDropZonePanel.STATE_NEW_COLUMNS_IN="newColumnsIn",BaseDropZonePanel.STATE_REARRANGE_COLUMNS="rearrangeColumns",__decorate$g([agGridCommunity.Autowired("focusService")],BaseDropZonePanel.prototype,"focusService",void 0),BaseDropZonePanel}(agGridCommunity.Component),__extends$h=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$h=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowGroupDropZonePanel=function(_super){function RowGroupDropZonePanel(horizontal){return _super.call(this,horizontal,!1)||this}return __extends$h(RowGroupDropZonePanel,_super),RowGroupDropZonePanel.prototype.passBeansUp=function(){_super.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),emptyMessage=localeTextFunc("rowGroupColumnsEmptyMessage","Drag here to set row groups"),title=localeTextFunc("groups","Row Groups");_super.prototype.init.call(this,{dragAndDropIcon:agGridCommunity.DragAndDropService.ICON_GROUP,icon:agGridCommunity._.createIconNoSpan("rowGroupPanel",this.gridOptionsWrapper,null),emptyMessage,title}),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))},RowGroupDropZonePanel.prototype.getAriaLabel=function(){return this.gridOptionsWrapper.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")},RowGroupDropZonePanel.prototype.getTooltipParams=function(){var res=_super.prototype.getTooltipParams.call(this);return res.location="rowGroupColumnsList",res},RowGroupDropZonePanel.prototype.isColumnDroppable=function(column){return!(this.gridOptionsWrapper.isFunctionsReadOnly()||!column.isPrimary())&&(column.isAllowRowGroup()&&!column.isRowGroupActive())},RowGroupDropZonePanel.prototype.updateColumns=function(columns){if(this.gridOptionsWrapper.isFunctionsPassive()){var event_1={type:agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event_1)}else this.columnModel.setRowGroupColumns(columns,"toolPanelUi")},RowGroupDropZonePanel.prototype.getIconName=function(){return this.isPotentialDndColumns()?agGridCommunity.DragAndDropService.ICON_GROUP:agGridCommunity.DragAndDropService.ICON_NOT_ALLOWED},RowGroupDropZonePanel.prototype.getExistingColumns=function(){return this.columnModel.getRowGroupColumns()},__decorate$h([agGridCommunity.Autowired("columnModel")],RowGroupDropZonePanel.prototype,"columnModel",void 0),__decorate$h([agGridCommunity.Autowired("loggerFactory")],RowGroupDropZonePanel.prototype,"loggerFactory",void 0),__decorate$h([agGridCommunity.Autowired("dragAndDropService")],RowGroupDropZonePanel.prototype,"dragAndDropService",void 0),__decorate$h([agGridCommunity.Autowired("columnApi")],RowGroupDropZonePanel.prototype,"columnApi",void 0),__decorate$h([agGridCommunity.Autowired("gridApi")],RowGroupDropZonePanel.prototype,"gridApi",void 0),__decorate$h([agGridCommunity.PostConstruct],RowGroupDropZonePanel.prototype,"passBeansUp",null),RowGroupDropZonePanel}(BaseDropZonePanel),__extends$i=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$i=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PivotDropZonePanel=function(_super){function PivotDropZonePanel(horizontal){return _super.call(this,horizontal,!1)||this}return __extends$i(PivotDropZonePanel,_super),PivotDropZonePanel.prototype.passBeansUp=function(){_super.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),emptyMessage=localeTextFunc("pivotColumnsEmptyMessage","Drag here to set column labels"),title=localeTextFunc("pivots","Column Labels");_super.prototype.init.call(this,{dragAndDropIcon:agGridCommunity.DragAndDropService.ICON_GROUP,icon:agGridCommunity._.createIconNoSpan("pivotPanel",this.gridOptionsWrapper,null),emptyMessage,title}),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()},PivotDropZonePanel.prototype.getAriaLabel=function(){return this.gridOptionsWrapper.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")},PivotDropZonePanel.prototype.getTooltipParams=function(){var res=_super.prototype.getTooltipParams.call(this);return res.location="pivotColumnsList",res},PivotDropZonePanel.prototype.refresh=function(){this.checkVisibility(),this.refreshGui()},PivotDropZonePanel.prototype.checkVisibility=function(){var pivotMode=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsWrapper.getPivotPanelShow()){case"always":this.setDisplayed(pivotMode);break;case"onlyWhenPivoting":var pivotActive=this.columnModel.isPivotActive();this.setDisplayed(pivotMode&&pivotActive);break;default:this.setDisplayed(!1)}else this.setDisplayed(pivotMode)},PivotDropZonePanel.prototype.isColumnDroppable=function(column){return!(this.gridOptionsWrapper.isFunctionsReadOnly()||!column.isPrimary())&&(column.isAllowPivot()&&!column.isPivotActive())},PivotDropZonePanel.prototype.updateColumns=function(columns){if(this.gridOptionsWrapper.isFunctionsPassive()){var event_1={type:agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event_1)}else this.columnModel.setPivotColumns(columns,"toolPanelUi")},PivotDropZonePanel.prototype.getIconName=function(){return this.isPotentialDndColumns()?agGridCommunity.DragAndDropService.ICON_PIVOT:agGridCommunity.DragAndDropService.ICON_NOT_ALLOWED},PivotDropZonePanel.prototype.getExistingColumns=function(){return this.columnModel.getPivotColumns()},__decorate$i([agGridCommunity.Autowired("columnModel")],PivotDropZonePanel.prototype,"columnModel",void 0),__decorate$i([agGridCommunity.Autowired("loggerFactory")],PivotDropZonePanel.prototype,"loggerFactory",void 0),__decorate$i([agGridCommunity.Autowired("dragAndDropService")],PivotDropZonePanel.prototype,"dragAndDropService",void 0),__decorate$i([agGridCommunity.Autowired("columnApi")],PivotDropZonePanel.prototype,"columnApi",void 0),__decorate$i([agGridCommunity.Autowired("gridApi")],PivotDropZonePanel.prototype,"gridApi",void 0),__decorate$i([agGridCommunity.PostConstruct],PivotDropZonePanel.prototype,"passBeansUp",null),PivotDropZonePanel}(BaseDropZonePanel),__extends$j=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$j=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridHeaderDropZones=function(_super){function GridHeaderDropZones(){return _super.call(this)||this}return __extends$j(GridHeaderDropZones,_super),GridHeaderDropZones.prototype.postConstruct=function(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,this.onRowGroupChanged.bind(this)),this.onRowGroupChanged()},GridHeaderDropZones.prototype.createNorthPanel=function(){var topPanelGui=document.createElement("div"),dropPanelVisibleListener=this.onDropPanelVisible.bind(this);return topPanelGui.classList.add("ag-column-drop-wrapper"),agGridCommunity._.setAriaRole(topPanelGui,"presentation"),this.rowGroupComp=new RowGroupDropZonePanel(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new PivotDropZonePanel(!0),this.createManagedBean(this.pivotComp),topPanelGui.appendChild(this.rowGroupComp.getGui()),topPanelGui.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,agGridCommunity.Component.EVENT_DISPLAYED_CHANGED,dropPanelVisibleListener),this.addManagedListener(this.pivotComp,agGridCommunity.Component.EVENT_DISPLAYED_CHANGED,dropPanelVisibleListener),this.onDropPanelVisible(),topPanelGui},GridHeaderDropZones.prototype.onDropPanelVisible=function(){var bothDisplayed=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",bothDisplayed),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",bothDisplayed)},GridHeaderDropZones.prototype.onRowGroupChanged=function(){if(this.rowGroupComp){var rowGroupPanelShow=this.gridOptionsWrapper.getRowGroupPanelShow();if(rowGroupPanelShow===agGridCommunity.Constants.ALWAYS)this.rowGroupComp.setDisplayed(!0);else if(rowGroupPanelShow===agGridCommunity.Constants.ONLY_WHEN_GROUPING){var grouping=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(grouping)}else this.rowGroupComp.setDisplayed(!1)}},__decorate$j([agGridCommunity.Autowired("columnModel")],GridHeaderDropZones.prototype,"columnModel",void 0),__decorate$j([agGridCommunity.PostConstruct],GridHeaderDropZones.prototype,"postConstruct",null),GridHeaderDropZones}(agGridCommunity.Component),__extends$k=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$k=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FilterAggregatesStage=function(_super){function FilterAggregatesStage(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$k(FilterAggregatesStage,_super),FilterAggregatesStage.prototype.execute=function(params){var _this=this,isPivotMode=this.columnModel.isPivotMode(),isAggFilterActive=this.filterManager.isAggregateFilterPresent(),applyFilterToNode=this.gridOptionsWrapper.getGroupAggFiltering()||(isPivotMode?function(params){return params.node.leafGroup}:function(params){return!params.node.group}),changedPath=params.changedPath,preserveChildren=function(node,recursive){void 0===recursive&&(recursive=!1),node.childrenAfterFilter&&(node.childrenAfterAggFilter=node.childrenAfterFilter,recursive&&node.childrenAfterAggFilter.forEach((function(child){return preserveChildren(child,recursive)})),_this.setAllChildrenCount(node)),node.sibling&&(node.sibling.childrenAfterAggFilter=node.childrenAfterAggFilter)};changedPath.forEachChangedNodeDepthFirst(isAggFilterActive?function(node){var _a;node.childrenAfterAggFilter=(null===(_a=node.childrenAfterFilter)||void 0===_a?void 0:_a.filter((function(child){var _a;if(applyFilterToNode({node:child})&&_this.filterManager.doesRowPassAggregateFilters({rowNode:child}))return preserveChildren(child,!0),!0;return null===(_a=child.childrenAfterAggFilter)||void 0===_a?void 0:_a.length})))||null,_this.setAllChildrenCount(node),node.sibling&&(node.sibling.childrenAfterAggFilter=node.childrenAfterAggFilter)}:preserveChildren,!0)},FilterAggregatesStage.prototype.setAllChildrenCountTreeData=function(rowNode){var allChildrenCount=0;rowNode.childrenAfterAggFilter.forEach((function(child){allChildrenCount++,allChildrenCount+=child.allChildrenCount})),rowNode.setAllChildrenCount(allChildrenCount)},FilterAggregatesStage.prototype.setAllChildrenCountGridGrouping=function(rowNode){var allChildrenCount=0;rowNode.childrenAfterAggFilter.forEach((function(child){child.group?allChildrenCount+=child.allChildrenCount:allChildrenCount++})),rowNode.setAllChildrenCount(allChildrenCount)},FilterAggregatesStage.prototype.setAllChildrenCount=function(rowNode){rowNode.hasChildren()?this.gridOptionsWrapper.isTreeData()?this.setAllChildrenCountTreeData(rowNode):this.setAllChildrenCountGridGrouping(rowNode):rowNode.setAllChildrenCount(null)},__decorate$k([agGridCommunity.Autowired("filterManager")],FilterAggregatesStage.prototype,"filterManager",void 0),__decorate$k([agGridCommunity.Autowired("columnModel")],FilterAggregatesStage.prototype,"columnModel",void 0),FilterAggregatesStage=__decorate$k([agGridCommunity.Bean("filterAggregatesStage")],FilterAggregatesStage)}(agGridCommunity.BeanStub),RowGroupingModule={moduleName:agGridCommunity.ModuleNames.RowGroupingModule,beans:[AggregationStage,FilterAggregatesStage,GroupStage,PivotColDefService,PivotStage,AggFuncService],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:GridHeaderDropZones}],dependantModules:[EnterpriseCoreModule]},__extends$l=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$l=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ValuesDropZonePanel=function(_super){function ValuesDropZonePanel(horizontal){return _super.call(this,horizontal,!0)||this}return __extends$l(ValuesDropZonePanel,_super),ValuesDropZonePanel.prototype.passBeansUp=function(){_super.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),emptyMessage=localeTextFunc("valueColumnsEmptyMessage","Drag here to aggregate"),title=localeTextFunc("values","Values");_super.prototype.init.call(this,{dragAndDropIcon:agGridCommunity.DragAndDropService.ICON_AGGREGATE,icon:agGridCommunity._.createIconNoSpan("valuePanel",this.gridOptionsWrapper,null),emptyMessage,title}),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))},ValuesDropZonePanel.prototype.getAriaLabel=function(){return this.gridOptionsWrapper.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")},ValuesDropZonePanel.prototype.getTooltipParams=function(){var res=_super.prototype.getTooltipParams.call(this);return res.location="valueColumnsList",res},ValuesDropZonePanel.prototype.getIconName=function(){return this.isPotentialDndColumns()?agGridCommunity.DragAndDropService.ICON_AGGREGATE:agGridCommunity.DragAndDropService.ICON_NOT_ALLOWED},ValuesDropZonePanel.prototype.isColumnDroppable=function(column){return!(this.gridOptionsWrapper.isFunctionsReadOnly()||!column.isPrimary())&&(column.isAllowValue()&&!column.isValueActive())},ValuesDropZonePanel.prototype.updateColumns=function(columns){if(this.gridOptionsWrapper.isFunctionsPassive()){var event_1={type:agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event_1)}else this.columnModel.setValueColumns(columns,"toolPanelUi")},ValuesDropZonePanel.prototype.getExistingColumns=function(){return this.columnModel.getValueColumns()},__decorate$l([agGridCommunity.Autowired("columnModel")],ValuesDropZonePanel.prototype,"columnModel",void 0),__decorate$l([agGridCommunity.Autowired("loggerFactory")],ValuesDropZonePanel.prototype,"loggerFactory",void 0),__decorate$l([agGridCommunity.Autowired("dragAndDropService")],ValuesDropZonePanel.prototype,"dragAndDropService",void 0),__decorate$l([agGridCommunity.Autowired("columnApi")],ValuesDropZonePanel.prototype,"columnApi",void 0),__decorate$l([agGridCommunity.Autowired("gridApi")],ValuesDropZonePanel.prototype,"gridApi",void 0),__decorate$l([agGridCommunity.PostConstruct],ValuesDropZonePanel.prototype,"passBeansUp",null),ValuesDropZonePanel}(BaseDropZonePanel),__extends$m=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$m=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PrimaryColsPanel=function(_super){function PrimaryColsPanel(){return _super.call(this,PrimaryColsPanel.TEMPLATE)||this}return __extends$m(PrimaryColsPanel,_super),PrimaryColsPanel.prototype.postConstruct=function(){this.initialiseTabGuard({})},PrimaryColsPanel.prototype.init=function(allowDragging,params,eventType){this.allowDragging=allowDragging,this.params=params,this.eventType=eventType,this.primaryColsHeaderPanel.init(this.params);var hideFilter=this.params.suppressColumnFilter,hideSelect=this.params.suppressColumnSelectAll;this.params.suppressColumnExpandAll&&hideFilter&&hideSelect&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new agGridCommunity.PositionableFeature(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},PrimaryColsPanel.prototype.toggleResizable=function(resizable){this.positionableFeature.setResizable(!!resizable&&{bottom:!0})},PrimaryColsPanel.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},PrimaryColsPanel.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},PrimaryColsPanel.prototype.expandGroups=function(groupIds){this.primaryColsListPanel.setGroupsExpanded(!0,groupIds)},PrimaryColsPanel.prototype.collapseGroups=function(groupIds){this.primaryColsListPanel.setGroupsExpanded(!1,groupIds)},PrimaryColsPanel.prototype.setColumnLayout=function(colDefs){this.primaryColsListPanel.setColumnLayout(colDefs)},PrimaryColsPanel.prototype.onFilterChanged=function(event){this.primaryColsListPanel.setFilterText(event.filterText)},PrimaryColsPanel.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},PrimaryColsPanel.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},PrimaryColsPanel.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},PrimaryColsPanel.prototype.onGroupExpanded=function(event){this.primaryColsHeaderPanel.setExpandState(event.state)},PrimaryColsPanel.prototype.onSelectionChange=function(event){this.primaryColsHeaderPanel.setSelectionState(event.state)},PrimaryColsPanel.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',__decorate$m([agGridCommunity.RefSelector("primaryColsHeaderPanel")],PrimaryColsPanel.prototype,"primaryColsHeaderPanel",void 0),__decorate$m([agGridCommunity.RefSelector("primaryColsListPanel")],PrimaryColsPanel.prototype,"primaryColsListPanel",void 0),__decorate$m([agGridCommunity.PostConstruct],PrimaryColsPanel.prototype,"postConstruct",null),PrimaryColsPanel}(agGridCommunity.TabGuardComp),__extends$n=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$n=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnToolPanel=function(_super){function ColumnToolPanel(){var _this=_super.call(this,ColumnToolPanel.TEMPLATE)||this;return _this.initialised=!1,_this.childDestroyFuncs=[],_this}return __extends$n(ColumnToolPanel,_super),ColumnToolPanel.prototype.setVisible=function(visible){_super.prototype.setDisplayed.call(this,visible),visible&&!this.initialised&&this.init(this.params)},ColumnToolPanel.prototype.init=function(params){var _this=this,defaultParams={suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};if(agGridCommunity._.mergeDeep(defaultParams,params),this.params=defaultParams,this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new PivotModePanel),this.childDestroyFuncs.push((function(){return _this.destroyBean(_this.pivotModePanel)})),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new PrimaryColsPanel),this.childDestroyFuncs.push((function(){return _this.destroyBean(_this.primaryColsPanel)})),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new RowGroupDropZonePanel(!1)),this.childDestroyFuncs.push((function(){return _this.destroyBean(_this.rowGroupDropZonePanel)})),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new ValuesDropZonePanel(!1)),this.childDestroyFuncs.push((function(){return _this.destroyBean(_this.valuesDropZonePanel)})),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new PivotDropZonePanel(!1)),this.childDestroyFuncs.push((function(){return _this.destroyBean(_this.pivotDropZonePanel)})),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var pivotModeListener_1=this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){_this.resetChildrenHeight(),_this.setLastVisible()}));this.childDestroyFuncs.push((function(){return pivotModeListener_1()}))}this.initialised=!0},ColumnToolPanel.prototype.setPivotModeSectionVisible=function(visible){var _this=this;this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(visible):visible&&(this.pivotModePanel=this.createBean(new PivotModePanel),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push((function(){return _this.destroyBean(_this.pivotModePanel)}))),this.setLastVisible())},ColumnToolPanel.prototype.setRowGroupsSectionVisible=function(visible){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(visible):visible&&(this.rowGroupDropZonePanel=this.createManagedBean(new RowGroupDropZonePanel(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},ColumnToolPanel.prototype.setValuesSectionVisible=function(visible){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(visible):visible&&(this.valuesDropZonePanel=this.createManagedBean(new ValuesDropZonePanel(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},ColumnToolPanel.prototype.setPivotSectionVisible=function(visible){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(visible):visible&&(this.pivotDropZonePanel=this.createManagedBean(new PivotDropZonePanel(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(visible)),this.setLastVisible())},ColumnToolPanel.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach((function(panel){if(panel){var eGui=panel.getGui();panel.toggleResizable(!eGui.classList.contains("ag-last-column-drop")&&!eGui.classList.contains("ag-hidden"))}}))},ColumnToolPanel.prototype.setLastVisible=function(){var eGui=this.getGui();Array.prototype.slice.call(eGui.querySelectorAll(".ag-column-drop")).forEach((function(columnDrop){return columnDrop.classList.remove("ag-last-column-drop")}));var columnDropEls=eGui.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),lastVisible=agGridCommunity._.last(columnDropEls);lastVisible&&lastVisible.classList.add("ag-last-column-drop"),this.setResizers()},ColumnToolPanel.prototype.resetChildrenHeight=function(){for(var children=this.getGui().children,i=0;i<children.length;i++){var child=children[i];child.style.removeProperty("height"),child.style.removeProperty("flex")}},ColumnToolPanel.prototype.isRowGroupingModuleLoaded=function(){return agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.RowGroupingModule,"Row Grouping")},ColumnToolPanel.prototype.expandColumnGroups=function(groupIds){this.primaryColsPanel.expandGroups(groupIds)},ColumnToolPanel.prototype.collapseColumnGroups=function(groupIds){this.primaryColsPanel.collapseGroups(groupIds)},ColumnToolPanel.prototype.setColumnLayout=function(colDefs){this.primaryColsPanel.setColumnLayout(colDefs)},ColumnToolPanel.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},ColumnToolPanel.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach((function(func){return func()})),this.childDestroyFuncs.length=0,agGridCommunity._.clearElement(this.getGui())},ColumnToolPanel.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},ColumnToolPanel.prototype.destroy=function(){this.destroyChildren(),_super.prototype.destroy.call(this)},ColumnToolPanel.TEMPLATE='<div class="ag-column-panel"></div>',__decorate$n([agGridCommunity.Autowired("gridApi")],ColumnToolPanel.prototype,"gridApi",void 0),__decorate$n([agGridCommunity.Autowired("columnApi")],ColumnToolPanel.prototype,"columnApi",void 0),ColumnToolPanel}(agGridCommunity.Component),__extends$o=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$o=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HorizontalResizeComp=function(_super){function HorizontalResizeComp(){var _this=_super.call(this,'<div class="ag-tool-panel-horizontal-resize"></div>')||this;return _this.minWidth=100,_this.maxWidth=null,_this}return __extends$o(HorizontalResizeComp,_super),HorizontalResizeComp.prototype.setElementToResize=function(elementToResize){this.elementToResize=elementToResize},HorizontalResizeComp.prototype.postConstruct=function(){var finishedWithResizeFunc=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizing.bind(this)});this.addDestroyFunc(finishedWithResizeFunc),this.setInverted(this.gridOptionsWrapper.isEnableRtl())},HorizontalResizeComp.prototype.onResizeStart=function(){this.startingWidth=this.elementToResize.offsetWidth},HorizontalResizeComp.prototype.onResizing=function(delta){var direction=this.inverted?-1:1,newWidth=Math.max(this.minWidth,Math.floor(this.startingWidth-delta*direction));null!=this.maxWidth&&(newWidth=Math.min(this.maxWidth,newWidth)),this.elementToResize.style.width=newWidth+"px"},HorizontalResizeComp.prototype.setInverted=function(inverted){this.inverted=inverted},HorizontalResizeComp.prototype.setMaxWidth=function(value){this.maxWidth=value},HorizontalResizeComp.prototype.setMinWidth=function(value){this.minWidth=null!=value?value:100},__decorate$o([agGridCommunity.Autowired("horizontalResizeService")],HorizontalResizeComp.prototype,"horizontalResizeService",void 0),__decorate$o([agGridCommunity.PostConstruct],HorizontalResizeComp.prototype,"postConstruct",null),HorizontalResizeComp}(agGridCommunity.Component),__extends$p=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$p=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SideBarButtonComp=function(_super){function SideBarButtonComp(toolPanelDef){var _this=_super.call(this)||this;return _this.toolPanelDef=toolPanelDef,_this}return __extends$p(SideBarButtonComp,_super),SideBarButtonComp.prototype.getToolPanelId=function(){return this.toolPanelDef.id},SideBarButtonComp.prototype.postConstruct=function(){var template=this.createTemplate();this.setTemplate(template),this.eIconWrapper.insertAdjacentElement("afterbegin",agGridCommunity._.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsWrapper)),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this))},SideBarButtonComp.prototype.createTemplate=function(){var translate=this.gridOptionsWrapper.getLocaleTextFunc(),def=this.toolPanelDef;return'<div class="ag-side-button" role="presentation">\n                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" class="ag-side-button-button">\n                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span class="ag-side-button-label">'+translate(def.labelKey,def.labelDefault)+"</span>\n                </button>\n            </div>"},SideBarButtonComp.prototype.onButtonPressed=function(){this.dispatchEvent({type:SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED})},SideBarButtonComp.prototype.setSelected=function(selected){this.addOrRemoveCssClass("ag-selected",selected)},SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",__decorate$p([agGridCommunity.RefSelector("eToggleButton")],SideBarButtonComp.prototype,"eToggleButton",void 0),__decorate$p([agGridCommunity.RefSelector("eIconWrapper")],SideBarButtonComp.prototype,"eIconWrapper",void 0),__decorate$p([agGridCommunity.PostConstruct],SideBarButtonComp.prototype,"postConstruct",null),SideBarButtonComp}(agGridCommunity.Component),__extends$q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SideBarButtonsComp=function(_super){function SideBarButtonsComp(){var _this=_super.call(this,SideBarButtonsComp.TEMPLATE)||this;return _this.buttonComps=[],_this}return __extends$q(SideBarButtonsComp,_super),SideBarButtonsComp.prototype.postConstruct=function(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))},SideBarButtonsComp.prototype.handleKeyDown=function(e){if(e.key===agGridCommunity.KeyCode.TAB&&e.shiftKey){var lastColumn=agGridCommunity._.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(lastColumn,!0)&&e.preventDefault()}},SideBarButtonsComp.prototype.setToolPanelDefs=function(toolPanelDefs){toolPanelDefs.forEach(this.addButtonComp.bind(this))},SideBarButtonsComp.prototype.setActiveButton=function(id){this.buttonComps.forEach((function(comp){comp.setSelected(id===comp.getToolPanelId())}))},SideBarButtonsComp.prototype.addButtonComp=function(def){var _this=this,buttonComp=this.createBean(new SideBarButtonComp(def));this.buttonComps.push(buttonComp),this.appendChild(buttonComp),buttonComp.addEventListener(SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED,(function(){_this.dispatchEvent({type:SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:def.id})}))},SideBarButtonsComp.prototype.clearButtons=function(){this.buttonComps=this.destroyBeans(this.buttonComps),agGridCommunity._.clearElement(this.getGui())},SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",SideBarButtonsComp.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',__decorate$q([agGridCommunity.Autowired("focusService")],SideBarButtonsComp.prototype,"focusService",void 0),__decorate$q([agGridCommunity.Autowired("columnModel")],SideBarButtonsComp.prototype,"columnModel",void 0),__decorate$q([agGridCommunity.PostConstruct],SideBarButtonsComp.prototype,"postConstruct",null),__decorate$q([agGridCommunity.PreDestroy],SideBarButtonsComp.prototype,"clearButtons",null),SideBarButtonsComp}(agGridCommunity.Component),__extends$r=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$r=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ToolPanelWrapper=function(_super){function ToolPanelWrapper(){return _super.call(this,ToolPanelWrapper.TEMPLATE)||this}return __extends$r(ToolPanelWrapper,_super),ToolPanelWrapper.prototype.setupResize=function(){var eGui=this.getGui(),resizeBar=this.resizeBar=new HorizontalResizeComp;this.getContext().createBean(resizeBar),resizeBar.setElementToResize(eGui),this.appendChild(resizeBar)},ToolPanelWrapper.prototype.getToolPanelId=function(){return this.toolPanelId},ToolPanelWrapper.prototype.setToolPanelDef=function(toolPanelDef){var id=toolPanelDef.id,minWidth=toolPanelDef.minWidth,maxWidth=toolPanelDef.maxWidth,width=toolPanelDef.width;this.toolPanelId=id,this.width=width;var componentPromise=this.userComponentFactory.getToolPanelCompDetails(toolPanelDef,{}).newAgStackInstance();null!=componentPromise?(componentPromise.then(this.setToolPanelComponent.bind(this)),null!=minWidth&&this.resizeBar.setMinWidth(minWidth),null!=maxWidth&&this.resizeBar.setMaxWidth(maxWidth)):console.warn("AG Grid: error processing tool panel component "+id+". You need to specify either 'toolPanel' or 'toolPanelFramework'")},ToolPanelWrapper.prototype.setToolPanelComponent=function(compInstance){var _this=this;this.toolPanelCompInstance=compInstance,this.appendChild(compInstance.getGui()),this.addDestroyFunc((function(){_this.destroyBean(compInstance)})),this.width&&(this.getGui().style.width=this.width+"px")},ToolPanelWrapper.prototype.getToolPanelInstance=function(){return this.toolPanelCompInstance},ToolPanelWrapper.prototype.setResizerSizerSide=function(side){var isLeft="left"===side,inverted=this.gridOptionsWrapper.isEnableRtl()?isLeft:!isLeft;this.resizeBar.setInverted(inverted)},ToolPanelWrapper.prototype.refresh=function(){this.toolPanelCompInstance.refresh()},ToolPanelWrapper.TEMPLATE='<div class="ag-tool-panel-wrapper"/>',__decorate$r([agGridCommunity.Autowired("userComponentFactory")],ToolPanelWrapper.prototype,"userComponentFactory",void 0),__decorate$r([agGridCommunity.PostConstruct],ToolPanelWrapper.prototype,"setupResize",null),ToolPanelWrapper}(agGridCommunity.Component),__extends$s=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$s=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SideBarComp=function(_super){function SideBarComp(){var _this=_super.call(this,SideBarComp.TEMPLATE)||this;return _this.toolPanelWrappers=[],_this}return __extends$s(SideBarComp,_super),SideBarComp.prototype.postConstruct=function(){var _this=this;this.sideBarButtonsComp.addEventListener(SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this)),this.setSideBarDef(),this.gridOptionsWrapper.addEventListener("sideBar",(function(){_this.clearDownUi(),_this.setSideBarDef()})),this.gridApi.registerSideBarComp(this),this.createManagedBean(new agGridCommunity.ManagedFocusFeature(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},SideBarComp.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var focusService=this.focusService,sideBarButtonsComp=this.sideBarButtonsComp,eGui=this.getGui(),sideBarGui=sideBarButtonsComp.getGui(),activeElement=this.gridOptionsWrapper.getDocument().activeElement,openPanel=eGui.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)");if(openPanel)if(sideBarGui.contains(activeElement))focusService.focusInto(openPanel,e.shiftKey)&&e.preventDefault();else if(!focusService.isFocusUnderManagedComponent(openPanel)&&e.shiftKey){var firstFocusableEl=focusService.findFocusableElements(openPanel)[0];if(this.gridOptionsWrapper.getDocument().activeElement===firstFocusableEl){var selectedButton=sideBarGui.querySelector(".ag-selected button");selectedButton&&(e.preventDefault(),selectedButton.focus())}}}},SideBarComp.prototype.handleKeyDown=function(e){var eDocument=this.gridOptionsWrapper.getDocument();if(this.sideBarButtonsComp.getGui().contains(eDocument.activeElement)){var sideBarGui=this.sideBarButtonsComp.getGui(),buttons=Array.prototype.slice.call(sideBarGui.querySelectorAll(".ag-side-button")),currentButton=eDocument.activeElement,currentPos=buttons.findIndex((function(button){return button.contains(currentButton)})),nextPos=null;switch(e.key){case agGridCommunity.KeyCode.LEFT:case agGridCommunity.KeyCode.UP:nextPos=Math.max(0,currentPos-1);break;case agGridCommunity.KeyCode.RIGHT:case agGridCommunity.KeyCode.DOWN:nextPos=Math.min(currentPos+1,buttons.length-1)}if(null!==nextPos){var innerButton=buttons[nextPos].querySelector("button");innerButton&&(innerButton.focus(),e.preventDefault())}}},SideBarComp.prototype.onToolPanelButtonClicked=function(event){var id=event.toolPanelId;this.openedItem()===id?this.openToolPanel(void 0):this.openToolPanel(id)},SideBarComp.prototype.clearDownUi=function(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()},SideBarComp.prototype.setSideBarDef=function(){this.setDisplayed(!1);var sideBar=this.gridOptionsWrapper.getSideBar(),sideBarExists=!!sideBar&&!!sideBar.toolPanels;if(sideBarExists){var shouldDisplaySideBar=sideBarExists&&!sideBar.hiddenByDefault;this.setDisplayed(shouldDisplaySideBar);var toolPanelDefs=sideBar.toolPanels;this.sideBarButtonsComp.setToolPanelDefs(toolPanelDefs),this.setupToolPanels(toolPanelDefs),this.setSideBarPosition(sideBar.position),sideBar.hiddenByDefault||this.openToolPanel(sideBar.defaultToolPanel)}},SideBarComp.prototype.setSideBarPosition=function(position){position||(position="right");var isLeft="left"===position,resizerSide=isLeft?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",isLeft),this.addOrRemoveCssClass("ag-side-bar-right",!isLeft),this.toolPanelWrappers.forEach((function(wrapper){wrapper.setResizerSizerSide(resizerSide)})),this},SideBarComp.prototype.setupToolPanels=function(defs){var _this=this;defs.forEach((function(def){if(null!=def.id){if("agColumnsToolPanel"===def.toolPanel)if(!agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ColumnToolPanelModule,"Column Tool Panel"))return;if("agFiltersToolPanel"===def.toolPanel)if(!agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.FiltersToolPanelModule,"Filters Tool Panel"))return;var wrapper=new ToolPanelWrapper;_this.getContext().createBean(wrapper),wrapper.setToolPanelDef(def),wrapper.setDisplayed(!1),_this.getGui().appendChild(wrapper.getGui()),_this.toolPanelWrappers.push(wrapper)}else console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id")}))},SideBarComp.prototype.refresh=function(){this.toolPanelWrappers.forEach((function(wrapper){return wrapper.refresh()}))},SideBarComp.prototype.openToolPanel=function(key){var currentlyOpenedKey=this.openedItem();currentlyOpenedKey!==key&&(this.toolPanelWrappers.forEach((function(wrapper){var show=key===wrapper.getToolPanelId();wrapper.setDisplayed(show)})),currentlyOpenedKey!==this.openedItem()&&(this.sideBarButtonsComp.setActiveButton(key),this.raiseToolPanelVisibleEvent(key)))},SideBarComp.prototype.getToolPanelInstance=function(key){var toolPanelWrapper=this.toolPanelWrappers.filter((function(toolPanel){return toolPanel.getToolPanelId()===key}))[0];if(toolPanelWrapper)return toolPanelWrapper.getToolPanelInstance();console.warn("AG Grid: unable to lookup Tool Panel as invalid key supplied: "+key)},SideBarComp.prototype.raiseToolPanelVisibleEvent=function(key){var event={type:agGridCommunity.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:key,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};this.eventService.dispatchEvent(event)},SideBarComp.prototype.close=function(){this.openToolPanel(void 0)},SideBarComp.prototype.isToolPanelShowing=function(){return!!this.openedItem()},SideBarComp.prototype.openedItem=function(){var activeToolPanel=null;return this.toolPanelWrappers.forEach((function(wrapper){wrapper.isDisplayed()&&(activeToolPanel=wrapper.getToolPanelId())})),activeToolPanel},SideBarComp.prototype.destroyToolPanelWrappers=function(){var _this=this;this.toolPanelWrappers.forEach((function(wrapper){agGridCommunity._.removeFromParent(wrapper.getGui()),_this.destroyBean(wrapper)})),this.toolPanelWrappers.length=0},SideBarComp.prototype.destroy=function(){this.destroyToolPanelWrappers(),_super.prototype.destroy.call(this)},SideBarComp.TEMPLATE='<div class="ag-side-bar ag-unselectable">\n            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>\n        </div>',__decorate$s([agGridCommunity.Autowired("gridApi")],SideBarComp.prototype,"gridApi",void 0),__decorate$s([agGridCommunity.Autowired("focusService")],SideBarComp.prototype,"focusService",void 0),__decorate$s([agGridCommunity.RefSelector("sideBarButtons")],SideBarComp.prototype,"sideBarButtonsComp",void 0),__decorate$s([agGridCommunity.PostConstruct],SideBarComp.prototype,"postConstruct",null),SideBarComp}(agGridCommunity.Component),__extends$t=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$t=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ToolPanelColDefService=function(_super){function ToolPanelColDefService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.isColGroupDef=function(colDef){return colDef&&void 0!==colDef.children},_this.getId=function(colDef){return _this.isColGroupDef(colDef)?colDef.groupId:colDef.colId},_this}return __extends$t(ToolPanelColDefService,_super),ToolPanelColDefService.prototype.createColumnTree=function(colDefs){var _this=this,invalidColIds=[],createDummyColGroup=function(abstractColDef,depth){if(_this.isColGroupDef(abstractColDef)){var groupDef=abstractColDef,groupId=void 0!==groupDef.groupId?groupDef.groupId:groupDef.headerName,group=new agGridCommunity.ProvidedColumnGroup(groupDef,groupId,!1,depth),children_1=[];return groupDef.children.forEach((function(def){var child=createDummyColGroup(def,depth+1);child&&children_1.push(child)})),group.setChildren(children_1),group}var colDef=abstractColDef,key=colDef.colId?colDef.colId:colDef.field,column=_this.columnModel.getPrimaryColumn(key);return column||invalidColIds.push(colDef),column},mappedResults=[];return colDefs.forEach((function(colDef){var result=createDummyColGroup(colDef,0);result&&mappedResults.push(result)})),invalidColIds.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",invalidColIds),mappedResults},ToolPanelColDefService.prototype.syncLayoutWithGrid=function(syncLayoutCallback){var leafPathTrees=this.getLeafPathTrees();syncLayoutCallback(this.mergeLeafPathTrees(leafPathTrees))},ToolPanelColDefService.prototype.getLeafPathTrees=function(){var getLeafPathTree=function(node,childDef){var leafPathTree;if(node instanceof agGridCommunity.ProvidedColumnGroup)if(node.isPadding())leafPathTree=childDef;else{var groupDef=Object.assign({},node.getColGroupDef());groupDef.groupId=node.getGroupId(),groupDef.children=[childDef],leafPathTree=groupDef}else{var colDef=Object.assign({},node.getColDef());colDef.colId=node.getColId(),leafPathTree=colDef}var parent=node.getOriginalParent();return parent?getLeafPathTree(parent,leafPathTree):leafPathTree},allPrimaryGridColumns=this.columnModel.getAllGridColumns().filter((function(column){var colDef=column.getColDef();return column.isPrimary()&&!colDef.showRowGroup}));return allPrimaryGridColumns.map((function(col){return getLeafPathTree(col,col.getColDef())}))},ToolPanelColDefService.prototype.mergeLeafPathTrees=function(leafPathTrees){for(var pathA,pathB,_this=this,mergeTrees=function(treeA,treeB){if(!_this.isColGroupDef(treeB))return treeA;var mergeResult=treeA,groupToMerge=treeB;if(groupToMerge.children&&groupToMerge.groupId&&_this.addChildrenToGroup(mergeResult,groupToMerge.groupId,groupToMerge.children[0]))return mergeResult;return groupToMerge.children.forEach((function(child){return mergeTrees(mergeResult,child)})),mergeResult},mergeColDefs=[],i=1;i<=leafPathTrees.length;i++){var first=leafPathTrees[i-1],second=leafPathTrees[i];pathA=first,pathB=second,_this.isColGroupDef(pathA)&&_this.isColGroupDef(pathB)&&_this.getId(pathA)===_this.getId(pathB)?leafPathTrees[i]=mergeTrees(first,second):mergeColDefs.push(first)}return mergeColDefs},ToolPanelColDefService.prototype.addChildrenToGroup=function(tree,groupId,colDef){var _this=this;if(!this.isColGroupDef(tree))return!0;var currentGroup=tree,groupToAdd=colDef;if(function(currentSubGroup,currentSubGroupToAdd){var existingChildIds=currentSubGroup.children.map(_this.getId),childGroupAlreadyExists=agGridCommunity._.includes(existingChildIds,_this.getId(currentSubGroupToAdd)),lastChild=agGridCommunity._.last(currentSubGroup.children),lastChildIsDifferent=lastChild&&_this.getId(lastChild)!==_this.getId(currentSubGroupToAdd);return childGroupAlreadyExists&&lastChildIsDifferent}(currentGroup,groupToAdd))return currentGroup.children.push(groupToAdd),!0;if(currentGroup.groupId===groupId){var existingChildIds=currentGroup.children.map(this.getId);if(!agGridCommunity._.includes(existingChildIds,this.getId(groupToAdd)))return currentGroup.children.push(groupToAdd),!0}return currentGroup.children.forEach((function(subGroup){return _this.addChildrenToGroup(subGroup,groupId,colDef)})),!1},__decorate$t([agGridCommunity.Autowired("columnModel")],ToolPanelColDefService.prototype,"columnModel",void 0),ToolPanelColDefService=__decorate$t([agGridCommunity.Bean("toolPanelColDefService")],ToolPanelColDefService)}(agGridCommunity.BeanStub),SideBarModule={moduleName:agGridCommunity.ModuleNames.SideBarModule,beans:[ToolPanelColDefService],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:HorizontalResizeComp},{componentName:"AgSideBar",componentClass:SideBarComp},{componentName:"AgSideBarButtons",componentClass:SideBarButtonsComp}],dependantModules:[EnterpriseCoreModule]},__decorate$u=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ModelItemUtils=function(){function ModelItemUtils(){}return ModelItemUtils.prototype.selectAllChildren=function(colTree,selectAllChecked,eventType){var cols=this.extractAllLeafColumns(colTree);this.setAllColumns(cols,selectAllChecked,eventType)},ModelItemUtils.prototype.setColumn=function(col,selectAllChecked,eventType){this.setAllColumns([col],selectAllChecked,eventType)},ModelItemUtils.prototype.setAllColumns=function(cols,selectAllChecked,eventType){this.columnModel.isPivotMode()?this.setAllPivot(cols,selectAllChecked,eventType):this.setAllVisible(cols,selectAllChecked,eventType)},ModelItemUtils.prototype.extractAllLeafColumns=function(allItems){var res=[],recursiveFunc=function(items){items.forEach((function(item){item.isPassesFilter()&&(item.isGroup()?recursiveFunc(item.getChildren()):res.push(item.getColumn()))}))};return recursiveFunc(allItems),res},ModelItemUtils.prototype.setAllVisible=function(columns,visible,eventType){var colStateItems=[];columns.forEach((function(col){col.getColDef().lockVisible||col.isVisible()!=visible&&colStateItems.push({colId:col.getId(),hide:!visible})})),colStateItems.length>0&&this.columnModel.applyColumnState({state:colStateItems},eventType)},ModelItemUtils.prototype.setAllPivot=function(columns,value,eventType){this.gridOptionsWrapper.isFunctionsPassive()?this.setAllPivotPassive(columns,value):this.setAllPivotActive(columns,value,eventType)},ModelItemUtils.prototype.setAllPivotPassive=function(columns,value){var copyOfPivotColumns=this.columnModel.getPivotColumns().slice(),copyOfValueColumns=this.columnModel.getValueColumns().slice(),copyOfRowGroupColumns=this.columnModel.getRowGroupColumns().slice(),pivotChanged=!1,valueChanged=!1,rowGroupChanged=!1,action=value?function(col){col.isAnyFunctionActive()||(col.isAllowValue()?(copyOfValueColumns.push(col),valueChanged=!0):col.isAllowRowGroup()?(copyOfRowGroupColumns.push(col),pivotChanged=!0):col.isAllowPivot()&&(copyOfPivotColumns.push(col),rowGroupChanged=!0))}:function(col){col.isAnyFunctionActive()&&(copyOfPivotColumns.indexOf(col)>=0&&(agGridCommunity._.removeFromArray(copyOfPivotColumns,col),pivotChanged=!0),copyOfValueColumns.indexOf(col)>=0&&(agGridCommunity._.removeFromArray(copyOfValueColumns,col),valueChanged=!0),copyOfRowGroupColumns.indexOf(col)>=0&&(agGridCommunity._.removeFromArray(copyOfRowGroupColumns,col),rowGroupChanged=!0))};if(columns.forEach(action),pivotChanged){var event_1={type:agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:copyOfPivotColumns,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event_1)}if(rowGroupChanged){var event_2={type:agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:copyOfRowGroupColumns,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event_2)}if(valueChanged){var event_3={type:agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:copyOfRowGroupColumns,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(event_3)}},ModelItemUtils.prototype.setAllPivotActive=function(columns,value,eventType){var _this=this,colStateItems=[],action=value?function(col){if(!col.isAnyFunctionActive())if(col.isAllowValue()){var aggFunc="string"==typeof col.getAggFunc()?col.getAggFunc():_this.aggFuncService.getDefaultAggFunc(col);colStateItems.push({colId:col.getId(),aggFunc})}else col.isAllowRowGroup()?colStateItems.push({colId:col.getId(),rowGroup:!0}):col.isAllowPivot()&&colStateItems.push({colId:col.getId(),pivot:!0})}:function(col){(col.isPivotActive()||col.isRowGroupActive()||col.isValueActive())&&colStateItems.push({colId:col.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};columns.forEach(action),colStateItems.length>0&&this.columnModel.applyColumnState({state:colStateItems},eventType)},__decorate$u([agGridCommunity.Autowired("aggFuncService")],ModelItemUtils.prototype,"aggFuncService",void 0),__decorate$u([agGridCommunity.Autowired("columnModel")],ModelItemUtils.prototype,"columnModel",void 0),__decorate$u([agGridCommunity.Autowired("gridOptionsWrapper")],ModelItemUtils.prototype,"gridOptionsWrapper",void 0),__decorate$u([agGridCommunity.Autowired("columnApi")],ModelItemUtils.prototype,"columnApi",void 0),__decorate$u([agGridCommunity.Autowired("gridApi")],ModelItemUtils.prototype,"gridApi",void 0),__decorate$u([agGridCommunity.Autowired("eventService")],ModelItemUtils.prototype,"eventService",void 0),ModelItemUtils=__decorate$u([agGridCommunity.Bean("modelItemUtils")],ModelItemUtils)}(),ColumnsToolPanelModule={moduleName:agGridCommunity.ModuleNames.ColumnToolPanelModule,beans:[ModelItemUtils],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:PrimaryColsHeaderPanel},{componentName:"AgPrimaryColsList",componentClass:PrimaryColsListPanel},{componentName:"AgPrimaryCols",componentClass:PrimaryColsPanel}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:ColumnToolPanel}],dependantModules:[EnterpriseCoreModule,RowGroupingModule,SideBarModule]},workbook_getTemplate=function(){return{name:"Workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",html:"http://www.w3.org/TR/REC-html40"}}],rawMap:{xmlns:"urn:schemas-microsoft-com:office:spreadsheet"}}}},excelWorkbook_getTemplate=function(){return{name:"ExcelWorkbook",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:excel"}},children:[{name:"WindowHeight",textNode:"8130"},{name:"WindowWidth",textNode:"15135"},{name:"WindowHeight",textNode:"8130"},{name:"WindowTopX",textNode:"120"},{name:"WindowTopY",textNode:"45"},{name:"ProtectStructure",textNode:"False"},{name:"ProtectWindow",textNode:"False"}]}},column_getTemplate=function(c){return{name:"Column",properties:{prefixedAttributes:[{prefix:"ss:",map:{Width:c.width}}]}}},cell_getTemplate=function(c){var mergeAcross=c.mergeAcross,styleId=c.styleId,data=c.data,properties={};return mergeAcross&&(properties.MergeAcross=mergeAcross),styleId&&(properties.StyleID=styleId),{name:"Cell",properties:{prefixedAttributes:[{prefix:"ss:",map:properties}]},children:[{name:"Data",properties:{prefixedAttributes:[{prefix:"ss:",map:{Type:data.type}}]},textNode:data.value}]}},row_getTemplate=function(r){return{name:"Row",children:r.cells.map((function(it){return cell_getTemplate(it)}))}},worksheet_getTemplate=function(ws){var table=ws.table,name=ws.name,columns=table.columns,rows=table.rows,c=columns.map((function(it){return column_getTemplate(it)})),r=rows.map((function(it){return row_getTemplate(it)}));return{name:"Worksheet",children:[{name:"Table",children:c.concat(r)}],properties:{prefixedAttributes:[{prefix:"ss:",map:{Name:name}}]}}},documentProperties_getTemplate=function(){return{name:"DocumentProperties",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:office"}},children:[{name:"Version",textNode:"12.00"}]}},alignment={getTemplate:function(styleProperties){var _a=styleProperties.alignment;return{name:"Alignment",properties:{prefixedAttributes:[{prefix:"ss:",map:{Vertical:_a.vertical,Horizontal:_a.horizontal,Indent:_a.indent,ReadingOrder:_a.readingOrder,Rotate:_a.rotate,ShrinkToFit:_a.shrinkToFit,VerticalText:_a.verticalText,WrapText:_a.wrapText}}]}}}},borders={getTemplate:function(styleProperties){var _a=styleProperties.borders;return{name:"Borders",children:[_a.borderBottom,_a.borderLeft,_a.borderRight,_a.borderTop].map((function(it,index){return{name:"Border",properties:{prefixedAttributes:[{prefix:"ss:",map:{Position:0==index?"Bottom":1==index?"Left":2==index?"Right":"Top",LineStyle:it.lineStyle,Weight:it.weight,Color:it.color}}]}}}))}}},font={getTemplate:function(styleProperties){var _a=styleProperties.font;return{name:"Font",properties:{prefixedAttributes:[{prefix:"ss:",map:{Bold:_a.bold,FontName:_a.fontName,Italic:_a.italic,Color:_a.color,Outline:_a.outline,Shadow:_a.shadow,Size:_a.size,StrikeThrough:_a.strikeThrough,Underline:_a.underline,VerticalAlign:_a.verticalAlign}},{prefix:"x:",map:{CharSet:_a.charSet,Family:_a.family}}]}}}},interior={getTemplate:function(styleProperties){var _a=styleProperties.interior;return{name:"Interior",properties:{prefixedAttributes:[{prefix:"ss:",map:{Color:_a.color,Pattern:_a.pattern,PatternColor:_a.patternColor}}]}}}},protection={getTemplate:function(styleProperties){return{name:"Protection",properties:{prefixedAttributes:[{prefix:"ss:",map:{Protected:styleProperties.protection.protected,HideFormula:styleProperties.protection.hideFormula}}]}}}},numberFormat={getTemplate:function(styleProperties){return{name:"NumberFormat",properties:{prefixedAttributes:[{prefix:"ss:",map:{Format:styleProperties.numberFormat.format}}]}}}},style_getTemplate=function(styleProperties){var id=styleProperties.id,name=styleProperties.name;return{name:"Style",properties:{prefixedAttributes:[{prefix:"ss:",map:{ID:id,Name:name||id}}]}}},BaseCreator=function(){function BaseCreator(){}return BaseCreator.prototype.setBeans=function(beans){this.beans=beans},BaseCreator.prototype.getFileName=function(fileName){var extension=this.getDefaultFileExtension();return null!=fileName&&fileName.length||(fileName=this.getDefaultFileName()),-1===fileName.indexOf(".")?fileName+"."+extension:fileName},BaseCreator.prototype.getData=function(params){var serializingSession=this.createSerializingSession(params);return this.beans.gridSerializer.serialize(serializingSession,params)},BaseCreator}(),BaseGridSerializingSession=function(){function BaseGridSerializingSession(config){this.groupColumns=[];var columnModel=config.columnModel,valueService=config.valueService,gridOptionsWrapper=config.gridOptionsWrapper,processCellCallback=config.processCellCallback,processHeaderCallback=config.processHeaderCallback,processGroupHeaderCallback=config.processGroupHeaderCallback,processRowGroupCallback=config.processRowGroupCallback;this.columnModel=columnModel,this.valueService=valueService,this.gridOptionsWrapper=gridOptionsWrapper,this.processCellCallback=processCellCallback,this.processHeaderCallback=processHeaderCallback,this.processGroupHeaderCallback=processGroupHeaderCallback,this.processRowGroupCallback=processRowGroupCallback}return BaseGridSerializingSession.prototype.prepare=function(columnsToExport){this.groupColumns=columnsToExport.filter((function(col){return!!col.getColDef().showRowGroup}))},BaseGridSerializingSession.prototype.extractHeaderValue=function(column){var value=this.getHeaderName(this.processHeaderCallback,column);return null!=value?value:""},BaseGridSerializingSession.prototype.extractRowCellValue=function(column,index,accumulatedRowIndex,type,node){var valueForCell,groupIndex=this.gridOptionsWrapper.isGroupMultiAutoColumn()?node.rowGroupIndex:0;valueForCell=node&&node.group&&(index===groupIndex&&-1!==this.groupColumns.indexOf(column)||0===index&&this.gridOptionsWrapper.isGroupUseEntireRow(this.columnModel.isPivotMode()))?this.createValueForGroupNode(node):this.valueService.getValue(column,node);var value=this.processCell(accumulatedRowIndex,node,column,valueForCell,this.processCellCallback,type);return null!=value?value:""},BaseGridSerializingSession.prototype.getHeaderName=function(callback,column){return callback?callback({column,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):this.columnModel.getDisplayNameForColumn(column,"csv",!0)},BaseGridSerializingSession.prototype.createValueForGroupNode=function(node){if(this.processRowGroupCallback)return this.processRowGroupCallback({node,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()});var keys=[node.key];if(!this.gridOptionsWrapper.isGroupMultiAutoColumn())for(;node.parent;)node=node.parent,keys.push(node.key);return keys.reverse().join(" -> ")},BaseGridSerializingSession.prototype.processCell=function(accumulatedRowIndex,rowNode,column,value,processCellCallback,type){return processCellCallback?processCellCallback({accumulatedRowIndex,column,node:rowNode,value,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type}):null!=value?value:""},BaseGridSerializingSession}(),Downloader=function(){function Downloader(){}return Downloader.download=function(fileName,content){var win=document.defaultView||window;if(win){var element=document.createElement("a"),url=win.URL.createObjectURL(content);element.setAttribute("href",url),element.setAttribute("download",fileName),element.style.display="none",document.body.appendChild(element),element.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:win})),document.body.removeChild(element),win.setTimeout((function(){win.URL.revokeObjectURL(url)}),0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},Downloader}(),__extends$u=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CsvSerializingSession=function(_super){function CsvSerializingSession(config){var _this=_super.call(this,config)||this;_this.isFirstLine=!0,_this.result="";var suppressQuotes=config.suppressQuotes,columnSeparator=config.columnSeparator;return _this.suppressQuotes=suppressQuotes,_this.columnSeparator=columnSeparator,_this}return __extends$u(CsvSerializingSession,_super),CsvSerializingSession.prototype.addCustomContent=function(content){var _this=this;content&&("string"==typeof content?(/^\s*\n/.test(content)||this.beginNewLine(),content=content.replace(/\r?\n/g,"\r\n"),this.result+=content):content.forEach((function(row){_this.beginNewLine(),row.forEach((function(cell,index){0!==index&&(_this.result+=_this.columnSeparator),_this.result+=_this.putInQuotes(cell.data.value||""),cell.mergeAcross&&_this.appendEmptyCells(cell.mergeAcross)}))})))},CsvSerializingSession.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},CsvSerializingSession.prototype.onNewHeaderGroupingRowColumn=function(header,index,span){0!=index&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(header),this.appendEmptyCells(span)},CsvSerializingSession.prototype.appendEmptyCells=function(count){for(var i=1;i<=count;i++)this.result+=this.columnSeparator+this.putInQuotes("")},CsvSerializingSession.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},CsvSerializingSession.prototype.onNewHeaderRowColumn=function(column,index){0!=index&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(column))},CsvSerializingSession.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},CsvSerializingSession.prototype.onNewBodyRowColumn=function(column,index,node){0!=index&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(column,index,index,agGridCommunity.Constants.EXPORT_TYPE_CSV,node))},CsvSerializingSession.prototype.putInQuotes=function(value){return this.suppressQuotes?value:null==value?'""':("string"==typeof value?stringValue=value:"function"==typeof value.toString?stringValue=value.toString():(console.warn("AG Grid: unknown value type during csv conversion"),stringValue=""),'"'+stringValue.replace(/"/g,'""')+'"');var stringValue},CsvSerializingSession.prototype.parse=function(){return this.result},CsvSerializingSession.prototype.beginNewLine=function(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1},CsvSerializingSession}(BaseGridSerializingSession),__extends$v=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$v=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CsvCreator=function(_super){function CsvCreator(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$v(CsvCreator,_super),CsvCreator.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},CsvCreator.prototype.getMergedParams=function(params){var baseParams=this.gridOptionsWrapper.getDefaultExportParams("csv");return Object.assign({},baseParams,params)},CsvCreator.prototype.export=function(userParams){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var mergedParams=this.getMergedParams(userParams),data=this.getData(mergedParams),packagedFile=new Blob(["\ufeff",data],{type:"text/plain"});return Downloader.download(this.getFileName(mergedParams.fileName),packagedFile),data},CsvCreator.prototype.exportDataAsCsv=function(params){return this.export(params)},CsvCreator.prototype.getDataAsCsv=function(params){var mergedParams=this.getMergedParams(params);return this.getData(mergedParams)},CsvCreator.prototype.getDefaultFileName=function(){return"export.csv"},CsvCreator.prototype.getDefaultFileExtension=function(){return"csv"},CsvCreator.prototype.createSerializingSession=function(params){var columnModel=this.columnModel,valueService=this.valueService,gridOptionsWrapper=this.gridOptionsWrapper,_b=params,processCellCallback=_b.processCellCallback,processHeaderCallback=_b.processHeaderCallback,processGroupHeaderCallback=_b.processGroupHeaderCallback,processRowGroupCallback=_b.processRowGroupCallback,suppressQuotes=_b.suppressQuotes,columnSeparator=_b.columnSeparator;return new CsvSerializingSession({columnModel,valueService,gridOptionsWrapper,processCellCallback:processCellCallback||void 0,processHeaderCallback:processHeaderCallback||void 0,processGroupHeaderCallback:processGroupHeaderCallback||void 0,processRowGroupCallback:processRowGroupCallback||void 0,suppressQuotes:suppressQuotes||!1,columnSeparator:columnSeparator||","})},CsvCreator.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressCsvExport()},__decorate$v([agGridCommunity.Autowired("columnModel")],CsvCreator.prototype,"columnModel",void 0),__decorate$v([agGridCommunity.Autowired("valueService")],CsvCreator.prototype,"valueService",void 0),__decorate$v([agGridCommunity.Autowired("gridSerializer")],CsvCreator.prototype,"gridSerializer",void 0),__decorate$v([agGridCommunity.Autowired("gridOptionsWrapper")],CsvCreator.prototype,"gridOptionsWrapper",void 0),__decorate$v([agGridCommunity.PostConstruct],CsvCreator.prototype,"postConstruct",null),CsvCreator=__decorate$v([agGridCommunity.Bean("csvCreator")],CsvCreator)}(BaseCreator),__extends$w=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$w=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(RowType){RowType[RowType.HEADER_GROUPING=0]="HEADER_GROUPING",RowType[RowType.HEADER=1]="HEADER",RowType[RowType.BODY=2]="BODY"}(RowType||(RowType={}));var stylesMap,registeredNumberFmts,registeredFonts,registeredFills,registeredBorders,registeredCellStyleXfs,registeredCellXfs,registeredCellStyles,currentSheet,EXPAND_STATE,GridSerializer=function(_super){function GridSerializer(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$w(GridSerializer,_super),GridSerializer.prototype.serialize=function(gridSerializingSession,params){void 0===params&&(params={});var columnsToExport=this.getColumnsToExport(params.allColumns,params.columnKeys);return agGridCommunity._.compose(this.prepareSession(columnsToExport),this.prependContent(params),this.exportColumnGroups(params,columnsToExport),this.exportHeaders(params,columnsToExport),this.processPinnedTopRows(params,columnsToExport),this.processRows(params,columnsToExport),this.processPinnedBottomRows(params,columnsToExport),this.appendContent(params))(gridSerializingSession).parse()},GridSerializer.prototype.processRow=function(gridSerializingSession,params,columnsToExport,node){var _this=this,rowSkipper=params.shouldRowBeSkipped||function(){return!1},gridOptionsWrapper=this.gridOptionsWrapper,context=gridOptionsWrapper.getContext(),api=gridOptionsWrapper.getApi(),columnApi=gridOptionsWrapper.getColumnApi(),skipSingleChildrenGroup=gridOptionsWrapper.isGroupRemoveSingleChildren(),hideOpenParents=gridOptionsWrapper.isGroupHideOpenParents(),skipLowestSingleChildrenGroup=gridOptionsWrapper.isGroupRemoveLowestSingleChildren(),isLeafNode=this.columnModel.isPivotMode()?node.leafGroup:!node.group,skipRowGroups=params.skipGroups||params.skipRowGroups,shouldSkipLowestGroup=skipLowestSingleChildrenGroup&&node.leafGroup,shouldSkipCurrentGroup=1===node.allChildrenCount&&(skipSingleChildrenGroup||shouldSkipLowestGroup);skipRowGroups&&params.skipGroups&&agGridCommunity._.doOnce((function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")}),"gridSerializer-skipGroups");var rowPosition={rowIndex:node.rowIndex,rowPinned:node.rowPinned};if(!(!isLeafNode&&(params.skipRowGroups||shouldSkipCurrentGroup||hideOpenParents)||params.onlySelected&&!node.isSelected()||params.rowNodes&&!params.rowNodes.some((function(position){return _this.rowPositionUtils.sameRow(position,rowPosition)}))||params.skipPinnedTop&&"top"===node.rowPinned||params.skipPinnedBottom&&"bottom"===node.rowPinned)&&((!(-1===node.level)||node.leafGroup)&&!rowSkipper({node,api,columnApi,context}))){var rowAccumulator=gridSerializingSession.onNewBodyRow();if(columnsToExport.forEach((function(column,index){rowAccumulator.onColumn(column,index,node)})),params.getCustomContentBelowRow){var content=params.getCustomContentBelowRow({node,api,columnApi,context});content&&gridSerializingSession.addCustomContent(content)}}},GridSerializer.prototype.appendContent=function(params){return function(gridSerializingSession){var appendContent=params.customFooter||params.appendContent;return appendContent&&(params.customFooter&&agGridCommunity._.doOnce((function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")}),"gridSerializer-customFooter"),gridSerializingSession.addCustomContent(appendContent)),gridSerializingSession}},GridSerializer.prototype.prependContent=function(params){return function(gridSerializingSession){var prependContent=params.customHeader||params.prependContent;return prependContent&&(params.customHeader&&agGridCommunity._.doOnce((function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")}),"gridSerializer-customHeader"),gridSerializingSession.addCustomContent(prependContent)),gridSerializingSession}},GridSerializer.prototype.prepareSession=function(columnsToExport){return function(gridSerializingSession){return gridSerializingSession.prepare(columnsToExport),gridSerializingSession}},GridSerializer.prototype.exportColumnGroups=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){if(params.skipColumnGroupHeaders)params.columnGroups&&agGridCommunity._.doOnce((function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")}),"gridSerializer-columnGroups");else{var groupInstanceIdCreator=new agGridCommunity.GroupInstanceIdCreator,displayedGroups=_this.displayedGroupCreator.createDisplayedGroups(columnsToExport,_this.columnModel.getGridBalancedTree(),groupInstanceIdCreator,null);_this.recursivelyAddHeaderGroups(displayedGroups,gridSerializingSession,params.processGroupHeaderCallback)}return gridSerializingSession}},GridSerializer.prototype.exportHeaders=function(params,columnsToExport){return function(gridSerializingSession){if(params.skipHeader||params.skipColumnHeaders)params.skipHeader&&agGridCommunity._.doOnce((function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")}),"gridSerializer-skipHeader");else{var gridRowIterator_1=gridSerializingSession.onNewHeaderRow();columnsToExport.forEach((function(column,index){gridRowIterator_1.onColumn(column,index,void 0)}))}return gridSerializingSession}},GridSerializer.prototype.processPinnedTopRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport);return _this.pinnedRowModel.forEachPinnedTopRow(processRow),gridSerializingSession}},GridSerializer.prototype.processRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var rowModel=_this.rowModel,rowModelType=rowModel.getType(),usingCsrm=rowModelType===agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE,usingSsrm=rowModelType===agGridCommunity.Constants.ROW_MODEL_TYPE_SERVER_SIDE,onlySelectedNonStandardModel=!usingCsrm&&params.onlySelected,processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport);_this.columnModel.isPivotMode()?usingCsrm?rowModel.forEachPivotNode(processRow):rowModel.forEachNode(processRow):params.onlySelectedAllPages||onlySelectedNonStandardModel?_this.selectionService.getSelectedNodes().forEach(processRow):usingCsrm||usingSsrm?rowModel.forEachNodeAfterFilterAndSort(processRow):rowModel.forEachNode(processRow);return gridSerializingSession}},GridSerializer.prototype.processPinnedBottomRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport);return _this.pinnedRowModel.forEachPinnedBottomRow(processRow),gridSerializingSession}},GridSerializer.prototype.getColumnsToExport=function(allColumns,columnKeys){void 0===allColumns&&(allColumns=!1);var isPivotMode=this.columnModel.isPivotMode();return columnKeys&&columnKeys.length?this.columnModel.getGridColumns(columnKeys):allColumns&&!isPivotMode?(this.gridOptionsWrapper.isTreeData()?this.columnModel.getGridColumns([agGridCommunity.Constants.GROUP_AUTO_COLUMN_ID]):[]).concat(this.columnModel.getAllPrimaryColumns()||[]):this.columnModel.getAllDisplayedColumns()},GridSerializer.prototype.recursivelyAddHeaderGroups=function(displayedGroups,gridSerializingSession,processGroupHeaderCallback){var directChildrenHeaderGroups=[];displayedGroups.forEach((function(columnGroupChild){var columnGroup=columnGroupChild;columnGroup.getChildren&&columnGroup.getChildren().forEach((function(it){return directChildrenHeaderGroups.push(it)}))})),displayedGroups.length>0&&displayedGroups[0]instanceof agGridCommunity.ColumnGroup&&this.doAddHeaderHeader(gridSerializingSession,displayedGroups,processGroupHeaderCallback),directChildrenHeaderGroups&&directChildrenHeaderGroups.length>0&&this.recursivelyAddHeaderGroups(directChildrenHeaderGroups,gridSerializingSession,processGroupHeaderCallback)},GridSerializer.prototype.doAddHeaderHeader=function(gridSerializingSession,displayedGroups,processGroupHeaderCallback){var _this=this,gridRowIterator=gridSerializingSession.onNewHeaderGroupingRow(),columnIndex=0;displayedGroups.forEach((function(columnGroupChild){var name,columnGroup=columnGroupChild;name=processGroupHeaderCallback?processGroupHeaderCallback({columnGroup,api:_this.gridOptionsWrapper.getApi(),columnApi:_this.gridOptionsWrapper.getColumnApi(),context:_this.gridOptionsWrapper.getContext()}):_this.columnModel.getDisplayNameForColumnGroup(columnGroup,"header");var collapsibleGroupRanges=columnGroup.getLeafColumns().reduce((function(collapsibleGroups,currentColumn,currentIdx,arr){var lastGroup=agGridCommunity._.last(collapsibleGroups);return"open"===currentColumn.getColumnGroupShow()?lastGroup&&null==lastGroup[1]||(lastGroup=[currentIdx],collapsibleGroups.push(lastGroup)):lastGroup&&null==lastGroup[1]&&(lastGroup[1]=currentIdx-1),currentIdx===arr.length-1&&lastGroup&&null==lastGroup[1]&&(lastGroup[1]=currentIdx),collapsibleGroups}),[]);gridRowIterator.onColumn(name||"",columnIndex++,columnGroup.getLeafColumns().length-1,collapsibleGroupRanges)}))},__decorate$w([agGridCommunity.Autowired("displayedGroupCreator")],GridSerializer.prototype,"displayedGroupCreator",void 0),__decorate$w([agGridCommunity.Autowired("columnModel")],GridSerializer.prototype,"columnModel",void 0),__decorate$w([agGridCommunity.Autowired("rowModel")],GridSerializer.prototype,"rowModel",void 0),__decorate$w([agGridCommunity.Autowired("pinnedRowModel")],GridSerializer.prototype,"pinnedRowModel",void 0),__decorate$w([agGridCommunity.Autowired("selectionService")],GridSerializer.prototype,"selectionService",void 0),__decorate$w([agGridCommunity.Autowired("rowPositionUtils")],GridSerializer.prototype,"rowPositionUtils",void 0),GridSerializer=__decorate$w([agGridCommunity.Bean("gridSerializer")],GridSerializer)}(agGridCommunity.BeanStub),CsvExportModule={moduleName:agGridCommunity.ModuleNames.CsvExportModule,beans:[CsvCreator,GridSerializer]},XmlFactory=function(){function XmlFactory(){}return XmlFactory.createHeader=function(headerElement){void 0===headerElement&&(headerElement={});var keys=["version"];return headerElement.version||(headerElement.version="1.0"),headerElement.encoding&&keys.push("encoding"),headerElement.standalone&&keys.push("standalone"),"<?xml "+keys.map((function(key){return key+'="'+headerElement[key]+'"'})).join(" ")+" ?>"},XmlFactory.createXml=function(xmlElement,booleanTransformer){var _this=this,props="";xmlElement.properties&&(xmlElement.properties.prefixedAttributes&&xmlElement.properties.prefixedAttributes.forEach((function(prefixedSet){Object.keys(prefixedSet.map).forEach((function(key){props+=_this.returnAttributeIfPopulated(prefixedSet.prefix+key,prefixedSet.map[key],booleanTransformer)}))})),xmlElement.properties.rawMap&&Object.keys(xmlElement.properties.rawMap).forEach((function(key){props+=_this.returnAttributeIfPopulated(key,xmlElement.properties.rawMap[key],booleanTransformer)})));var result="<"+xmlElement.name+props;return xmlElement.children||null!=xmlElement.textNode?null!=xmlElement.textNode?result+">"+xmlElement.textNode+"</"+xmlElement.name+">\r\n":(result+=">\r\n",xmlElement.children&&xmlElement.children.forEach((function(it){result+=_this.createXml(it,booleanTransformer)})),result+"</"+xmlElement.name+">\r\n"):result+"/>\r\n"},XmlFactory.returnAttributeIfPopulated=function(key,value,booleanTransformer){if(!value&&""!==value&&0!==value)return"";var xmlValue=value;return"boolean"==typeof value&&booleanTransformer&&(xmlValue=booleanTransformer(value))," "+key+'="'+xmlValue+'"'},XmlFactory}(),__values$1=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},crcTable=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),ZipContainer=function(){function ZipContainer(){}return ZipContainer.addFolders=function(paths){paths.forEach(this.addFolder.bind(this))},ZipContainer.addFolder=function(path){this.folders.push({path,created:new Date,isBase64:!1})},ZipContainer.addFile=function(path,content,isBase64){void 0===isBase64&&(isBase64=!1),this.files.push({path,created:new Date,content,isBase64})},ZipContainer.getContent=function(mimeType){void 0===mimeType&&(mimeType="application/zip");var textOutput=this.buildFileStream(),uInt8Output=this.buildUint8Array(textOutput);return this.clearStream(),new Blob([uInt8Output],{type:mimeType})},ZipContainer.clearStream=function(){this.folders=[],this.files=[]},ZipContainer.buildFileStream=function(fData){var e_1,_a;void 0===fData&&(fData="");var totalFiles=this.folders.concat(this.files),len=totalFiles.length,foData="",lL=0,cL=0;try{for(var totalFiles_1=__values$1(totalFiles),totalFiles_1_1=totalFiles_1.next();!totalFiles_1_1.done;totalFiles_1_1=totalFiles_1.next()){var currentFile=totalFiles_1_1.value,_b=this.getHeader(currentFile,lL),fileHeader=_b.fileHeader,folderHeader=_b.folderHeader,content=_b.content;lL+=fileHeader.length+content.length,cL+=folderHeader.length,fData+=fileHeader+content,foData+=folderHeader}}catch(e_1_1){e_1={error:e_1_1}}finally{try{totalFiles_1_1&&!totalFiles_1_1.done&&(_a=totalFiles_1.return)&&_a.call(totalFiles_1)}finally{if(e_1)throw e_1.error}}return fData+foData+this.buildFolderEnd(len,cL,lL)},ZipContainer.getHeader=function(currentFile,offset){var content=currentFile.content,path=currentFile.path,created=currentFile.created,isBase64=currentFile.isBase64,utf8_encode=agGridCommunity._.utf8_encode,decToHex=agGridCommunity._.decToHex,utfPath=utf8_encode(path),isUTF8=utfPath!==path,time=this.convertTime(created),dt=this.convertDate(created),extraFields="";if(isUTF8){var uExtraFieldPath=decToHex(1,1)+decToHex(this.getFromCrc32Table(utfPath),4)+utfPath;extraFields="up"+decToHex(uExtraFieldPath.length,2)+uExtraFieldPath}var _a=content?this.getConvertedContent(content,isBase64):{size:0,content:""},size=_a.size,convertedContent=_a.content,header="\n\0"+(isUTF8?"\0\b":"\0\0")+"\0\0"+decToHex(time,2)+decToHex(dt,2)+decToHex(size?this.getFromCrc32Table(convertedContent):0,4)+decToHex(size,4)+decToHex(size,4)+decToHex(utfPath.length,2)+decToHex(extraFields.length,2);return{fileHeader:"PK"+header+utfPath+extraFields,folderHeader:"PK\0"+header+"\0\0\0\0\0\0"+(content?"\0\0\0\0":"\0\0\0")+decToHex(offset,4)+utfPath+extraFields,content:convertedContent||""}},ZipContainer.getConvertedContent=function(content,isBase64){return void 0===isBase64&&(isBase64=!1),isBase64&&(content=content.split(";base64,")[1]),{size:(content=isBase64?atob(content):content).length,content}},ZipContainer.buildFolderEnd=function(tLen,cLen,lLen){var decToHex=agGridCommunity._.decToHex;return"PK\0\0\0\0"+decToHex(tLen,2)+decToHex(tLen,2)+decToHex(cLen,4)+decToHex(lLen,4)+"\0\0"},ZipContainer.buildUint8Array=function(content){for(var uint8=new Uint8Array(content.length),i=0;i<uint8.length;i++)uint8[i]=content.charCodeAt(i);return uint8},ZipContainer.getFromCrc32Table=function(content){if(!content.length)return 0;for(var size=content.length,iterable=new Uint8Array(size),i=0;i<size;i++)iterable[i]=content.charCodeAt(i);var crc=~0,j=0;for(i=0;i<size;i++)j=iterable[i],crc=crc>>>8^crcTable[255&(crc^j)];return~crc},ZipContainer.convertTime=function(date){var time=date.getHours();return time<<=6,time|=date.getMinutes(),time<<=5,time|=date.getSeconds()/2},ZipContainer.convertDate=function(date){var dt=date.getFullYear()-1980;return dt<<=4,dt|=date.getMonth()+1,dt<<=5,dt|=date.getDate()},ZipContainer.folders=[],ZipContainer.files=[],ZipContainer}(),ExcelXmlFactory=function(){function ExcelXmlFactory(){}return ExcelXmlFactory.createExcel=function(styles,currentWorksheet){var header=this.excelXmlHeader(),docProps=documentProperties_getTemplate(),eWorkbook=excelWorkbook_getTemplate(),wb=this.workbook(docProps,eWorkbook,styles,currentWorksheet);return""+header+XmlFactory.createXml(wb,(function(boolean){return boolean?"1":"0"}))},ExcelXmlFactory.workbook=function(docProperties,eWorkbook,styles,currentWorksheet){var children=[docProperties,eWorkbook,this.stylesXmlElement(styles)].concat(worksheet_getTemplate(currentWorksheet));return Object.assign({},workbook_getTemplate(),{children})},ExcelXmlFactory.excelXmlHeader=function(){return'<?xml version="1.0" ?>\n        <?mso-application progid="Excel.Sheet" ?>\n        '},ExcelXmlFactory.stylesXmlElement=function(styles){var _this=this;return{name:"Styles",children:styles?styles.map((function(it){return _this.styleXmlElement(it)})):[]}},ExcelXmlFactory.styleXmlElement=function(styleProperties){var children=agGridCommunity._.compose(this.addProperty("alignment",styleProperties),this.addProperty("borders",styleProperties),this.addProperty("font",styleProperties),this.addProperty("interior",styleProperties),this.addProperty("protection",styleProperties),this.addProperty("numberFormat",styleProperties))([]);return Object.assign({},style_getTemplate(styleProperties),{children})},ExcelXmlFactory.addProperty=function(property,styleProperties){return function(children){if(!styleProperties[property])return children;var options={alignment,borders,font,interior,numberFormat,protection};return children.concat(options[property].getTemplate(styleProperties))}},ExcelXmlFactory.factoryMode=agGridCommunity.ExcelFactoryMode.SINGLE_SHEET,ExcelXmlFactory}(),numberFormatMap={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},pixelsToEMU=function(value){return Math.ceil(9525*value)},getHeightFromProperty=function(rowIndex,height){if(height){var finalHeight,pixels;if("number"==typeof height)finalHeight=height;else finalHeight=height({rowIndex});return pixels=finalHeight,Math.round(72*pixels/96)}},createXmlPart=function(body){return""+XmlFactory.createHeader({encoding:"UTF-8",standalone:"yes"})+XmlFactory.createXml(body)},getExcelColumnName=function(colIdx){var fromCharCode=String.fromCharCode,pos=Math.floor(colIdx/26),tableIdx=colIdx%26;return pos&&26!==colIdx?tableIdx?pos<26?fromCharCode(65+pos-1)+fromCharCode(65+tableIdx-1):getExcelColumnName(pos)+fromCharCode(65+tableIdx-1):getExcelColumnName(pos-1)+"Z":fromCharCode(65+colIdx-1)},__extends$x=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$1=function(){return __assign$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$1.apply(this,arguments)},__read$4=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$3=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$4(arguments[i]));return ar},BaseExcelSerializingSession=function(_super){function BaseExcelSerializingSession(config){var _this=_super.call(this,config)||this;return _this.mixedStyles={},_this.mixedStyleCounter=0,_this.rows=[],_this.config=Object.assign({},config),_this.stylesByIds={},_this.config.baseExcelStyles.forEach((function(style){_this.stylesByIds[style.id]=style})),_this.excelStyles=__spread$3(_this.config.baseExcelStyles),_this}return __extends$x(BaseExcelSerializingSession,_super),BaseExcelSerializingSession.prototype.addCustomContent=function(customContent){var _this=this;customContent.forEach((function(row){var rowLen=_this.rows.length+1;_this.rows.push({height:getHeightFromProperty(rowLen,_this.config.rowHeight),cells:row.map((function(cell,idx){var image=_this.addImage(rowLen,_this.columnsToExport[idx],cell.data.value),ret=__assign$1({},cell);return image&&(ret.data={},null!=image.value?ret.data.value=image.value:(ret.data.type="e",ret.data.value=null)),ret}))})}))},BaseExcelSerializingSession.prototype.onNewHeaderGroupingRow=function(){var _this=this,currentCells=[];return this.rows.push({cells:currentCells,height:getHeightFromProperty(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:function(header,index,span,collapsibleRanges){var styleIds=_this.config.styleLinker(RowType.HEADER_GROUPING,1,"grouping-"+header,void 0,void 0);currentCells.push(__assign$1(__assign$1({},_this.createMergedCell(_this.getStyleId(styleIds),_this.getDataTypeForValue("string"),header,span)),{collapsibleRanges}))}}},BaseExcelSerializingSession.prototype.onNewHeaderRow=function(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)},BaseExcelSerializingSession.prototype.onNewBodyRow=function(){return this.onNewRow(this.onNewBodyColumn,this.config.rowHeight)},BaseExcelSerializingSession.prototype.prepare=function(columnsToExport){var _this=this;_super.prototype.prepare.call(this,columnsToExport),this.columnsToExport=__spread$3(columnsToExport),this.cols=columnsToExport.map((function(col,i){return _this.convertColumnToExcel(col,i)}))},BaseExcelSerializingSession.prototype.parse=function(){for(var longestRow=this.rows.reduce((function(a,b){return Math.max(a,b.cells.length)}),0);this.cols.length<longestRow;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));var data={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(data)},BaseExcelSerializingSession.prototype.isFormula=function(value){return null!=value&&(this.config.autoConvertFormulas&&value.toString().startsWith("="))},BaseExcelSerializingSession.prototype.getStyleById=function(styleId){return null==styleId?null:this.stylesByIds[styleId]||null},BaseExcelSerializingSession.prototype.convertColumnToExcel=function(column,index){var columnWidth=this.config.columnWidth;if(columnWidth)return"number"==typeof columnWidth?{width:columnWidth}:{width:columnWidth({column,index})};if(column){return{width:Math.max(column.getActualWidth(),75)}}return{}},BaseExcelSerializingSession.prototype.onNewHeaderColumn=function(rowIndex,currentCells){var _this=this;return function(column,index){var nameForCol=_this.extractHeaderValue(column),styleIds=_this.config.styleLinker(RowType.HEADER,rowIndex,nameForCol,column,void 0);currentCells.push(_this.createCell(_this.getStyleId(styleIds),_this.getDataTypeForValue("string"),nameForCol))}},BaseExcelSerializingSession.prototype.onNewRow=function(onNewColumnAccumulator,height){var currentCells=[];return this.rows.push({cells:currentCells,height:getHeightFromProperty(this.rows.length+1,height)}),{onColumn:onNewColumnAccumulator.bind(this,this.rows.length,currentCells)()}},BaseExcelSerializingSession.prototype.onNewBodyColumn=function(rowIndex,currentCells){var _this=this,skipCols=0;return function(column,index,node){if(skipCols>0)skipCols-=1;else{var valueForCell=_this.extractRowCellValue(column,index,rowIndex,agGridCommunity.Constants.EXPORT_TYPE_EXCEL,node),styleIds=_this.config.styleLinker(RowType.BODY,rowIndex,valueForCell,column,node),excelStyleId=_this.getStyleId(styleIds),colSpan=column.getColSpan(node),addedImage=_this.addImage(rowIndex,column,valueForCell);addedImage?currentCells.push(_this.createCell(excelStyleId,_this.getDataTypeForValue(addedImage.value),null==addedImage.value?"":addedImage.value)):colSpan>1?(skipCols=colSpan-1,currentCells.push(_this.createMergedCell(excelStyleId,_this.getDataTypeForValue(valueForCell),valueForCell,colSpan-1))):currentCells.push(_this.createCell(excelStyleId,_this.getDataTypeForValue(valueForCell),valueForCell))}}},BaseExcelSerializingSession.prototype.getStyleId=function(styleIds){if(!styleIds||!styleIds.length)return null;if(1===styleIds.length)return styleIds[0];var key=styleIds.join("-");return this.mixedStyles[key]||this.addNewMixedStyle(styleIds),this.mixedStyles[key].excelID},BaseExcelSerializingSession.prototype.addNewMixedStyle=function(styleIds){var _this=this;this.mixedStyleCounter+=1;var excelId="mixedStyle"+this.mixedStyleCounter,resultantStyle={};styleIds.forEach((function(styleId){_this.excelStyles.forEach((function(excelStyle){excelStyle.id===styleId&&agGridCommunity._.mergeDeep(resultantStyle,agGridCommunity._.deepCloneObject(excelStyle))}))})),resultantStyle.id=excelId,resultantStyle.name=excelId;var key=styleIds.join("-");this.mixedStyles[key]={excelID:excelId,key,result:resultantStyle},this.excelStyles.push(resultantStyle),this.stylesByIds[excelId]=resultantStyle},BaseExcelSerializingSession}(BaseGridSerializingSession),__extends$y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ExcelXmlSerializingSession=function(_super){function ExcelXmlSerializingSession(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$y(ExcelXmlSerializingSession,_super),ExcelXmlSerializingSession.prototype.createExcel=function(data){return ExcelXmlFactory.createExcel(this.excelStyles,data)},ExcelXmlSerializingSession.prototype.getDataTypeForValue=function(valueForCell){return agGridCommunity._.isNumeric(valueForCell)?"Number":"String"},ExcelXmlSerializingSession.prototype.getType=function(type,style,value){if(this.isFormula(value))return"Formula";if(style&&style.dataType)switch(style.dataType.toLocaleLowerCase()){case"string":return"Formula";case"number":return"Number";case"datetime":return"DateTime";case"error":return"Error";case"boolean":return"Boolean";default:console.warn("AG Grid: Unrecognized data type for excel export ["+style.id+".dataType="+style.dataType+"]")}return type},ExcelXmlSerializingSession.prototype.addImage=function(){},ExcelXmlSerializingSession.prototype.createCell=function(styleId,type,value){var actualStyle=this.getStyleById(styleId),typeTransformed=this.getType(type,actualStyle,value)||type;return{styleId:actualStyle?styleId:void 0,data:{type:typeTransformed,value:this.getValueTransformed(typeTransformed,value)}}},ExcelXmlSerializingSession.prototype.getValueTransformed=function(typeTransformed,value){var val,_this=this;switch(typeTransformed){case"String":return function(val){if(_this.config.suppressTextAsCDATA)return agGridCommunity._.escapeString(val);var cdataEndRegex=new RegExp("]]>","g");return"<![CDATA["+String(val).replace(cdataEndRegex,"]]]]><![CDATA[>")+"]]>"}(value);case"Number":return Number(value).valueOf()+"";case"Boolean":return(val=value)&&"0"!==val&&"false"!==val?"1":"0";default:return value}},ExcelXmlSerializingSession.prototype.createMergedCell=function(styleId,type,value,numOfCells){return{styleId:this.getStyleById(styleId)?styleId:void 0,data:{type,value},mergeAcross:numOfCells}},ExcelXmlSerializingSession}(BaseExcelSerializingSession),coreFactory_getTemplate=function(author){var jsonDate=(new Date).toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:author},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:jsonDate},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:jsonDate}]}},contentTypeFactory_getTemplate=function(config){var name=config.name,ContentType=config.ContentType;return{name,properties:{rawMap:{Extension:config.Extension,PartName:config.PartName,ContentType}}}},__read$5=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$4=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$5(arguments[i]));return ar},contentTypesFactory_getTemplate=function(sheetLen){var worksheets=new Array(sheetLen).fill(void 0).map((function(v,i){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet"+(i+1)+".xml"}})),sheetsWithImages=ExcelXlsxFactory.worksheetImages.size,imageTypesObject={};ExcelXlsxFactory.workbookImageIds.forEach((function(v){imageTypesObject[v.type]=!0}));var imageDocs=new Array(sheetsWithImages).fill(void 0).map((function(v,i){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing"+(i+1)+".xml"}})),imageTypes=Object.keys(imageTypesObject).map((function(ext){return{name:"Default",ContentType:"image/"+ext,Extension:ext}}));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:__spread$4(imageTypes,[{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"}],worksheets,[{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"}],imageDocs,[{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}]).map((function(contentType){return contentTypeFactory_getTemplate(contentType)}))}},getAnchor=function(name,imageAnchor){return{name:"xdr:"+name,children:[{name:"xdr:col",textNode:imageAnchor.col.toString()},{name:"xdr:colOff",textNode:imageAnchor.offsetX.toString()},{name:"xdr:row",textNode:imageAnchor.row.toString()},{name:"xdr:rowOff",textNode:imageAnchor.offsetY.toString()}]}},getExt=function(image){var children=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(image.recolor&&image.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":children.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children}},getNvPicPr=function(image,index){return{name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:index,name:image.id,descr:null!=image.altText?image.altText:void 0}},children:[getExt(image)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}},getColorDetails=function(color){if(color.saturation||color.tint){var ret=[];return color.saturation&&ret.push({name:"a:satMod",properties:{rawMap:{val:1e3*color.saturation}}}),color.tint&&ret.push({name:"a:tint",properties:{rawMap:{val:1e3*color.tint}}}),ret}},getBlipFill=function(image,index){var blipChildren,primaryColor,secondaryColor;if(image.transparency){var transparency=Math.min(Math.max(image.transparency,0),100);blipChildren=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(1e3*transparency)}}}]}if(image.recolor)switch(blipChildren||(blipChildren=[]),image.recolor.toLocaleLowerCase()){case"grayscale":blipChildren.push({name:"a:grayscl"});break;case"sepia":blipChildren.push((secondaryColor={color:"D9C3A5",tint:50,saturation:180},{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:(primaryColor={color:"black"}).color}},children:getColorDetails(primaryColor)},{name:"a:srgbClr",properties:{rawMap:{val:secondaryColor.color}},children:getColorDetails(secondaryColor)}]}));break;case"washout":blipChildren.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}})}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId"+index,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:blipChildren},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},getSpPr=function(image,imageBoxSize){var xfrm={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:imageBoxSize.width,cy:imageBoxSize.height}}}]};if(image.rotation){var rotation=image.rotation;xfrm.properties={rawMap:{rot:6e4*Math.min(Math.max(rotation,0),360)}}}return{name:"xdr:spPr",children:[xfrm,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},getPicture=function(image,currentIndex,worksheetImageIndex,imageBoxSize){return{name:"xdr:pic",children:[getNvPicPr(image,currentIndex+1),getBlipFill(image,worksheetImageIndex+1),getSpPr(image,imageBoxSize)]}},drawingFactory_getTemplate=function(config){var sheetIndex=config.sheetIndex,sheetImages=ExcelXlsxFactory.worksheetImages.get(sheetIndex),sheetImageIds=ExcelXlsxFactory.worksheetImageIds.get(sheetIndex),children=sheetImages.map((function(image,idx){var boxSize=function(image){image.fitCell=!!image.fitCell||!image.width||!image.height;var _a=image.position,position=void 0===_a?{}:_a,fitCell=image.fitCell,_b=image.width,width=void 0===_b?0:_b,_c=image.height,height=void 0===_c?0:_c,totalHeight=image.totalHeight,totalWidth=image.totalWidth,_d=position.offsetX,offsetX=void 0===_d?0:_d,_e=position.offsetY,offsetY=void 0===_e?0:_e,_f=position.row,row=void 0===_f?1:_f,_g=position.rowSpan,rowSpan=void 0===_g?1:_g,_h=position.column,column=void 0===_h?1:_h,_j=position.colSpan,colSpan=void 0===_j?1:_j;return{from:{row:row-1,col:column-1,offsetX:pixelsToEMU(offsetX),offsetY:pixelsToEMU(offsetY)},to:{row:row-1+(fitCell?1:rowSpan-1),col:column-1+(fitCell?1:colSpan-1),offsetX:pixelsToEMU(width+offsetX),offsetY:pixelsToEMU(height+offsetY)},height:pixelsToEMU(totalHeight||height),width:pixelsToEMU(totalWidth||width)}}(image);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[getAnchor("from",boxSize.from),getAnchor("to",boxSize.to),getPicture(image,idx,sheetImageIds.get(image.id).index,boxSize),{name:"xdr:clientData"}]}}));return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children}},__read$6=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},getColorChildren=function(props){var _a=__read$6(props,4);return{name:"a:"+_a[0],children:[{name:"a:"+_a[1],properties:{rawMap:{val:_a[2],lastClr:_a[3]}}}]}},colorScheme_getTemplate=function(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[getColorChildren(["dk1","sysClr","windowText","000000"]),getColorChildren(["lt1","sysClr","window","FFFFFF"]),getColorChildren(["dk2","srgbClr","44546A"]),getColorChildren(["lt2","srgbClr","E7E6E6"]),getColorChildren(["accent1","srgbClr","4472C4"]),getColorChildren(["accent2","srgbClr","ED7D31"]),getColorChildren(["accent3","srgbClr","A5A5A5"]),getColorChildren(["accent4","srgbClr","FFC000"]),getColorChildren(["accent5","srgbClr","5B9BD5"]),getColorChildren(["accent6","srgbClr","70AD47"]),getColorChildren(["hlink","srgbClr","0563C1"]),getColorChildren(["folHlink","srgbClr","954F72"])]}},__read$7=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},getFont=function(props){var _a=__read$7(props,4),type=_a[0],typeface=_a[1];return{name:"a:"+type,properties:{rawMap:{script:_a[2],typeface,panose:_a[3]}}}},fontScheme_getTemplate=function(){var utf8_encode=agGridCommunity._.utf8_encode;return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[getFont(["latin","Calibri Light",void 0,"020F0302020204030204"]),getFont(["ea",""]),getFont(["cs",""]),getFont(["font",utf8_encode("游ゴシック Light"),"Jpan"]),getFont(["font",utf8_encode("맑은 고딕"),"Hang"]),getFont(["font",utf8_encode("等线 Light"),"Hans"]),getFont(["font",utf8_encode("新細明體"),"Hant"]),getFont(["font","Times New Roman","Arab"]),getFont(["font","Times New Roman","Hebr"]),getFont(["font","Tahoma","Thai"]),getFont(["font","Nyala","Ethi"]),getFont(["font","Vrinda","Beng"]),getFont(["font","Shruti","Gujr"]),getFont(["font","MoolBoran","Khmr"]),getFont(["font","Tunga","Knda"]),getFont(["font","Raavi","Guru"]),getFont(["font","Euphemia","Cans"]),getFont(["font","Plantagenet Cherokee","Cher"]),getFont(["font","Microsoft Yi Baiti","Yiii"]),getFont(["font","Microsoft Himalaya","Tibt"]),getFont(["font","MV Boli","Thaa"]),getFont(["font","Mangal","Deva"]),getFont(["font","Gautami","Telu"]),getFont(["font","Latha","Taml"]),getFont(["font","Estrangelo Edessa","Syrc"]),getFont(["font","Kalinga","Orya"]),getFont(["font","Kartika","Mlym"]),getFont(["font","DokChampa","Laoo"]),getFont(["font","Iskoola Pota","Sinh"]),getFont(["font","Mongolian Baiti","Mong"]),getFont(["font","Times New Roman","Viet"]),getFont(["font","Microsoft Uighur","Uigh"]),getFont(["font","Sylfaen","Geor"]),getFont(["font","Arial","Armn"]),getFont(["font","Leelawadee UI","Bugi"]),getFont(["font","Microsoft JhengHei","Bopo"]),getFont(["font","Javanese Text","Java"]),getFont(["font","Segoe UI","Lisu"]),getFont(["font","Myanmar Text","Mymr"]),getFont(["font","Ebrima","Nkoo"]),getFont(["font","Nirmala UI","Olck"]),getFont(["font","Ebrima","Osma"]),getFont(["font","Phagspa","Phag"]),getFont(["font","Estrangelo Edessa","Syrn"]),getFont(["font","Estrangelo Edessa","Syrj"]),getFont(["font","Estrangelo Edessa","Syre"]),getFont(["font","Nirmala UI","Sora"]),getFont(["font","Microsoft Tai Le","Tale"]),getFont(["font","Microsoft New Tai Lue","Talu"]),getFont(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[getFont(["latin","Calibri",void 0,"020F0502020204030204"]),getFont(["ea",""]),getFont(["cs",""]),getFont(["font",utf8_encode("游ゴシック"),"Jpan"]),getFont(["font",utf8_encode("맑은 고딕"),"Hang"]),getFont(["font",utf8_encode("等线"),"Hans"]),getFont(["font",utf8_encode("新細明體"),"Hant"]),getFont(["font","Arial","Arab"]),getFont(["font","Arial","Hebr"]),getFont(["font","Tahoma","Thai"]),getFont(["font","Nyala","Ethi"]),getFont(["font","Vrinda","Beng"]),getFont(["font","Shruti","Gujr"]),getFont(["font","DaunPenh","Khmr"]),getFont(["font","Tunga","Knda"]),getFont(["font","Raavi","Guru"]),getFont(["font","Euphemia","Cans"]),getFont(["font","Plantagenet Cherokee","Cher"]),getFont(["font","Microsoft Yi Baiti","Yiii"]),getFont(["font","Microsoft Himalaya","Tibt"]),getFont(["font","MV Boli","Thaa"]),getFont(["font","Mangal","Deva"]),getFont(["font","Gautami","Telu"]),getFont(["font","Latha","Taml"]),getFont(["font","Estrangelo Edessa","Syrc"]),getFont(["font","Kalinga","Orya"]),getFont(["font","Kartika","Mlym"]),getFont(["font","DokChampa","Laoo"]),getFont(["font","Iskoola Pota","Sinh"]),getFont(["font","Mongolian Baiti","Mong"]),getFont(["font","Arial","Viet"]),getFont(["font","Microsoft Uighur","Uigh"]),getFont(["font","Sylfaen","Geor"]),getFont(["font","Arial","Armn"]),getFont(["font","Leelawadee UI","Bugi"]),getFont(["font","Microsoft JhengHei","Bopo"]),getFont(["font","Javanese Text","Java"]),getFont(["font","Segoe UI","Lisu"]),getFont(["font","Myanmar Text","Mymr"]),getFont(["font","Ebrima","Nkoo"]),getFont(["font","Nirmala UI","Olck"]),getFont(["font","Ebrima","Osma"]),getFont(["font","Phagspa","Phag"]),getFont(["font","Estrangelo Edessa","Syrn"]),getFont(["font","Estrangelo Edessa","Syrj"]),getFont(["font","Estrangelo Edessa","Syre"]),getFont(["font","Nirmala UI","Sora"]),getFont(["font","Microsoft Tai Le","Tale"]),getFont(["font","Microsoft New Tai Lue","Talu"]),getFont(["font","Ebrima","Tfng"])]}]}},__read$8=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},getPropertyVal=function(name,val,children){return{name:"a:"+name,properties:{rawMap:{val}},children}},getGs=function(props){var _a=__read$8(props,6),pos=_a[0],schemeColor=_a[1],satMod=_a[2],lumMod=_a[3],tint=_a[4],shade=_a[5],children=[];return children.push(getPropertyVal("satMod",satMod)),lumMod&&children.push(getPropertyVal("lumMod",lumMod)),tint&&children.push(getPropertyVal("tint",tint)),shade&&children.push(getPropertyVal("shade",shade)),{name:"a:gs",properties:{rawMap:{pos}},children:[{name:"a:schemeClr",properties:{rawMap:{val:schemeColor}},children}]}},getSolidFill=function(val,children){return{name:"a:solidFill",children:[getPropertyVal("schemeClr",val,children)]}},getGradFill=function(props){var _a=__read$8(props,5),rotWithShape=_a[0],gs1=_a[1],gs2=_a[2],gs3=_a[3],lin=_a[4],_b=__read$8(lin,2),ang=_b[0],scaled=_b[1];return{name:"a:gradFill",properties:{rawMap:{rotWithShape}},children:[{name:"a:gsLst",children:[getGs(gs1),getGs(gs2),getGs(gs3)]},{name:"a:lin",properties:{rawMap:{ang,scaled}}}]}},getLine=function(props){var _a=__read$8(props,4);return{name:"a:ln",properties:{rawMap:{w:_a[0],cap:_a[1],cmpd:_a[2],algn:_a[3]}},children:[getSolidFill("phClr"),getPropertyVal("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},getEffectStyle=function(shadow){var children=[];if(shadow){var _a=__read$8(shadow,5),blurRad=_a[0],dist=_a[1],dir=_a[2],algn=_a[3],rotWithShape=_a[4];children.push({name:"a:outerShdw",properties:{rawMap:{blurRad,dist,dir,algn,rotWithShape}},children:[getPropertyVal("srgbClr","000000",[getPropertyVal("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},children.length?{children}:{})]}},formatScheme_getTemplate=function(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:fillStyleLst",children:[getSolidFill("phClr"),getGradFill(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),getGradFill(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]},{name:"a:lnStyleLst",children:[getLine(["6350","flat","sng","ctr"]),getLine(["12700","flat","sng","ctr"]),getLine(["19050","flat","sng","ctr"])]},{name:"a:effectStyleLst",children:[getEffectStyle(),getEffectStyle(),getEffectStyle(["57150","19050","5400000","ctr","0"])]},{name:"a:bgFillStyleLst",children:[getSolidFill("phClr"),getSolidFill("phClr",[getPropertyVal("tint","95000"),getPropertyVal("satMod","170000")]),getGradFill(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}]}},themeElements_getTemplate=function(){return{name:"a:themeElements",children:[colorScheme_getTemplate(),fontScheme_getTemplate(),formatScheme_getTemplate()]}},officeTheme_getTemplate=function(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[themeElements_getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}},sharedStrings_getTemplate=function(strings){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:strings.size,uniqueCount:strings.size}},children:(strMap=strings,ret=[],strMap.forEach((function(val,key){var textNode=key.toString(),child={name:"t",textNode:agGridCommunity._.utf8_encode(agGridCommunity._.escapeString(textNode))};textNode.trim().length!==textNode.length&&(child.properties={rawMap:{"xml:space":"preserve"}}),ret.push({name:"si",children:[child]})})),ret)};var strMap,ret},numberFormatFactory_getTemplate=function(numberFormat){return{name:"numFmt",properties:{rawMap:{formatCode:numberFormat.formatCode,numFmtId:numberFormat.numFmtId}}}},numberFormatsFactory_getTemplate=function(numberFormats){return{name:"numFmts",properties:{rawMap:{count:numberFormats.length}},children:numberFormats.map((function(numberFormat){return numberFormatFactory_getTemplate(numberFormat)}))}},fontFactory_getTemplate=function(font){var size=font.size,colorTheme=font.colorTheme,_a=font.color,color=void 0===_a?"FF000000":_a,_b=font.fontName,fontName=void 0===_b?"Calibri":_b,family=font.family,scheme=font.scheme,italic=font.italic,bold=font.bold,strikeThrough=font.strikeThrough,outline=font.outline,shadow=font.shadow,underline=font.underline,verticalAlign=font.verticalAlign,children=[{name:"sz",properties:{rawMap:{val:size}}},{name:"color",properties:{rawMap:{theme:colorTheme,rgb:color}}},{name:"name",properties:{rawMap:{val:fontName}}}];return family&&children.push({name:"family",properties:{rawMap:{val:family}}}),scheme&&children.push({name:"scheme",properties:{rawMap:{val:scheme}}}),italic&&children.push({name:"i"}),bold&&children.push({name:"b"}),strikeThrough&&children.push({name:"strike"}),outline&&children.push({name:"outline"}),shadow&&children.push({name:"shadow"}),underline&&children.push({name:"u",properties:{rawMap:{val:underline}}}),verticalAlign&&children.push({name:"vertAlign",properties:{rawMap:{val:verticalAlign}}}),{name:"font",children}},fontsFactory_getTemplate=function(fonts){return{name:"fonts",properties:{rawMap:{count:fonts.length}},children:fonts.map((function(font){return fontFactory_getTemplate(font)}))}},fillFactory_getTemplate=function(fill){var patternType=fill.patternType,fgTheme=fill.fgTheme,fgTint=fill.fgTint,fgRgb=fill.fgRgb,bgRgb=fill.bgRgb,bgIndexed=fill.bgIndexed,pf={name:"patternFill",properties:{rawMap:{patternType}}};return(fgTheme||fgTint||fgRgb)&&(pf.children=[{name:"fgColor",properties:{rawMap:{theme:fgTheme,tint:fgTint,rgb:fgRgb}}}]),(bgIndexed||bgRgb)&&(pf.children||(pf.children=[]),pf.children.push({name:"bgColor",properties:{rawMap:{indexed:bgIndexed,rgb:bgRgb}}})),{name:"fill",children:[pf]}},fillsFactory_getTemplate=function(fills){return{name:"fills",properties:{rawMap:{count:fills.length}},children:fills.map((function(fill){return fillFactory_getTemplate(fill)}))}},mappedBorderNames={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},mediumBorders=["Dashed","DashDot","DashDotDot"],colorMap={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},horizontalAlignmentMap={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},verticalAlignmentMap={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},convertLegacyColor=function(color){return null==color?color:("#"===color.charAt(0)&&(color=color.substr(1)),6===color.length?"FF"+color:color)},convertLegacyBorder=function(type,weight){if(!type)return"thin";var namedWeight=function(value){switch(value){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}}(weight),mappedName=mappedBorderNames[type];return"Continuous"===type?namedWeight:"medium"===namedWeight&&-1!==mediumBorders.indexOf(mappedName)?"medium"+mappedName:mappedName.charAt(0).toLowerCase()+mappedName.substr(1)},convertLegacyHorizontalAlignment=function(alignment){return horizontalAlignmentMap[alignment]||"general"},convertLegacyVerticalAlignment=function(alignment){return verticalAlignmentMap[alignment]||void 0},getBorderColor=function(color){return{name:"color",properties:{rawMap:{rgb:convertLegacyColor(color||"#000000")}}}},borderFactory_getTemplate=function(border){var left=border.left,right=border.right,top=border.top,bottom=border.bottom,diagonal=border.diagonal,leftChildren=left?[getBorderColor(left.color)]:void 0,rightChildren=right?[getBorderColor(right.color)]:void 0,topChildren=top?[getBorderColor(top.color)]:void 0,bottomChildren=bottom?[getBorderColor(bottom.color)]:void 0,diagonalChildren=diagonal?[getBorderColor(diagonal.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:left&&left.style}},children:leftChildren},{name:"right",properties:{rawMap:{style:right&&right.style}},children:rightChildren},{name:"top",properties:{rawMap:{style:top&&top.style}},children:topChildren},{name:"bottom",properties:{rawMap:{style:bottom&&bottom.style}},children:bottomChildren},{name:"diagonal",properties:{rawMap:{style:diagonal&&diagonal.style}},children:diagonalChildren}]}},bordersFactory_getTemplate=function(borders){return{name:"borders",properties:{rawMap:{count:borders.length}},children:borders.map((function(border){return borderFactory_getTemplate(border)}))}},getReadingOrderId=function(readingOrder){var pos=["Context","LeftToRight","RightToLeft"].indexOf(readingOrder);return Math.max(pos,0)},alignmentFactory_getTemplate=function(alignment){var horizontal=alignment.horizontal,indent=alignment.indent,readingOrder=alignment.readingOrder,rotate=alignment.rotate,shrinkToFit=alignment.shrinkToFit,vertical=alignment.vertical,wrapText=alignment.wrapText;return{name:"alignment",properties:{rawMap:{horizontal:horizontal&&convertLegacyHorizontalAlignment(horizontal),indent,readingOrder:readingOrder&&getReadingOrderId(readingOrder),textRotation:rotate,shrinkToFit,vertical:vertical&&convertLegacyVerticalAlignment(vertical),wrapText}}}},protectionFactory_getTemplate=function(protection){var locked=!1===protection.protected?0:1;return{name:"protection",properties:{rawMap:{hidden:!0===protection.hideFormula?1:0,locked}}}},xfFactory_getTemplate=function(xf){var alignment=xf.alignment,borderId=xf.borderId,fillId=xf.fillId,fontId=xf.fontId,numFmtId=xf.numFmtId,protection=xf.protection,xfId=xf.xfId,children=[];return alignment&&children.push(alignmentFactory_getTemplate(alignment)),protection&&children.push(protectionFactory_getTemplate(protection)),{name:"xf",properties:{rawMap:{applyAlignment:alignment?1:void 0,applyProtection:protection?1:void 0,applyBorder:borderId?1:void 0,applyFill:fillId?1:void 0,borderId,fillId,applyFont:fontId?1:void 0,fontId,applyNumberFormat:numFmtId?1:void 0,numFmtId,xfId}},children:children.length?children:void 0}},cellStylesXfsFactory_getTemplate=function(xfs){return{name:"cellStyleXfs",properties:{rawMap:{count:xfs.length}},children:xfs.map((function(xf){return xfFactory_getTemplate(xf)}))}},cellXfsFactory_getTemplate=function(xfs){return{name:"cellXfs",properties:{rawMap:{count:xfs.length}},children:xfs.map((function(xf){return xfFactory_getTemplate(xf)}))}},borderFactory$1_getTemplate=function(cellStyle){return{name:"cellStyle",properties:{rawMap:{builtinId:cellStyle.builtinId,name:cellStyle.name,xfId:cellStyle.xfId}}}},cellStylesFactory_getTemplate=function(cellStyles){return{name:"cellStyles",properties:{rawMap:{count:cellStyles.length}},children:cellStyles.map((function(cellStyle){return borderFactory$1_getTemplate(cellStyle)}))}},__assign$2=function(){return __assign$2=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$2.apply(this,arguments)},getStyleName=function(name,currentSheet){return-1!==name.indexOf("mixedStyle")&&currentSheet>1&&(name+="_"+currentSheet),name},resetStylesheetValues=function(){stylesMap={base:0},registeredNumberFmts=[],registeredFonts=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],registeredFills=[{patternType:"none"},{patternType:"gray125"}],registeredBorders=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],registeredCellStyleXfs=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],registeredCellXfs=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],registeredCellStyles=[{builtinId:0,name:"Normal",xfId:0}]},registerFill=function(fill){var name,convertedPattern=(name=fill.pattern)?colorMap[name]||name:"none",convertedFillColor=convertLegacyColor(fill.color),convertedPatternColor=convertLegacyColor(fill.patternColor),pos=registeredFills.findIndex((function(currentFill){var patternType=currentFill.patternType,fgRgb=currentFill.fgRgb,bgRgb=currentFill.bgRgb;return patternType==convertedPattern&&fgRgb==convertedFillColor&&bgRgb==convertedPatternColor}));return-1===pos&&(pos=registeredFills.length,registeredFills.push({patternType:convertedPattern,fgRgb:convertedFillColor,bgRgb:convertedPatternColor})),pos},registerFont=function(font){var _a=font.fontName,name=void 0===_a?"Calibri":_a,color=font.color,size=font.size,bold=font.bold,italic=font.italic,outline=font.outline,shadow=font.shadow,strikeThrough=font.strikeThrough,underline=font.underline,family=font.family,verticalAlign=font.verticalAlign,utf8Name=name?agGridCommunity._.utf8_encode(name):name,convertedColor=convertLegacyColor(color),familyId=function(name){if(void 0!==name){var pos=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(name||"Automatic");return Math.max(pos,0)}}(family),convertedUnderline=underline?underline.toLocaleLowerCase():void 0,convertedVerticalAlign=verticalAlign?verticalAlign.toLocaleLowerCase():void 0,pos=registeredFonts.findIndex((function(currentFont){return currentFont.fontName==utf8Name&&currentFont.color==convertedColor&&currentFont.size==size&&currentFont.bold==bold&&currentFont.italic==italic&&currentFont.outline==outline&&currentFont.shadow==shadow&&currentFont.strikeThrough==strikeThrough&&currentFont.underline==convertedUnderline&&currentFont.verticalAlign==convertedVerticalAlign&&currentFont.family==familyId}));return-1===pos&&(pos=registeredFonts.length,registeredFonts.push({fontName:utf8Name,color:convertedColor,size,bold,italic,outline,shadow,strikeThrough,underline:convertedUnderline,verticalAlign:convertedVerticalAlign,family:null!=familyId?familyId.toString():void 0})),pos},registerStyle=function(config){var alignment=config.alignment,borders=config.borders,font=config.font,interior=config.interior,numberFormat=config.numberFormat,protection=config.protection,id=config.id,currentFill=0,currentBorder=0,currentFont=0,currentNumberFmt=0;id&&(id=getStyleName(id,currentSheet),null==stylesMap[id]&&(interior&&(currentFill=registerFill(interior)),borders&&(currentBorder=function(borders){var bottomStyle,topStyle,leftStyle,rightStyle,bottomColor,topColor,leftColor,rightColor,borderBottom=borders.borderBottom,borderTop=borders.borderTop,borderLeft=borders.borderLeft,borderRight=borders.borderRight;borderLeft&&(leftStyle=convertLegacyBorder(borderLeft.lineStyle,borderLeft.weight),leftColor=convertLegacyColor(borderLeft.color)),borderRight&&(rightStyle=convertLegacyBorder(borderRight.lineStyle,borderRight.weight),rightColor=convertLegacyColor(borderRight.color)),borderBottom&&(bottomStyle=convertLegacyBorder(borderBottom.lineStyle,borderBottom.weight),bottomColor=convertLegacyColor(borderBottom.color)),borderTop&&(topStyle=convertLegacyBorder(borderTop.lineStyle,borderTop.weight),topColor=convertLegacyColor(borderTop.color));var pos=registeredBorders.findIndex((function(currentBorder){var left=currentBorder.left,right=currentBorder.right,top=currentBorder.top,bottom=currentBorder.bottom;if(!left&&(leftStyle||leftColor))return!1;if(!right&&(rightStyle||rightColor))return!1;if(!top&&(topStyle||topColor))return!1;if(!bottom&&(bottomStyle||bottomColor))return!1;var _a=left||{},clS=_a.style,clC=_a.color,_b=right||{},crS=_b.style,crC=_b.color,_c=top||{},ctS=_c.style,ctC=_c.color,_d=bottom||{},cbS=_d.style,cbC=_d.color;return clS==leftStyle&&clC==leftColor&&crS==rightStyle&&crC==rightColor&&ctS==topStyle&&ctC==topColor&&cbS==bottomStyle&&cbC==bottomColor}));return-1===pos&&(pos=registeredBorders.length,registeredBorders.push({left:{style:leftStyle,color:leftColor},right:{style:rightStyle,color:rightColor},top:{style:topStyle,color:topColor},bottom:{style:bottomStyle,color:bottomColor},diagonal:{style:void 0,color:void 0}})),pos}(borders)),font&&(currentFont=registerFont(font)),numberFormat&&(currentNumberFmt=function(format){if(format=agGridCommunity._.utf8_encode(format),numberFormatMap[format])return numberFormatMap[format];var pos=registeredNumberFmts.findIndex((function(currentFormat){return currentFormat.formatCode===format}));return-1===pos?(pos=registeredNumberFmts.length+164,registeredNumberFmts.push({formatCode:format,numFmtId:pos})):pos=registeredNumberFmts[pos].numFmtId,pos}(numberFormat.format)),stylesMap[id]=registeredCellXfs.length,registeredCellXfs.push({alignment,borderId:currentBorder||0,fillId:currentFill||0,fontId:currentFont||0,numFmtId:currentNumberFmt||0,protection,xfId:0})))},stylesheetFactory_getTemplate=function(defaultFontSize){var numberFormats=numberFormatsFactory_getTemplate(registeredNumberFmts),fonts=fontsFactory_getTemplate(registeredFonts.map((function(font){return __assign$2(__assign$2({},font),{size:null!=font.size?font.size:defaultFontSize})}))),fills=fillsFactory_getTemplate(registeredFills),borders=bordersFactory_getTemplate(registeredBorders),cellStylesXfs=cellStylesXfsFactory_getTemplate(registeredCellStyleXfs),cellXfs=cellXfsFactory_getTemplate(registeredCellXfs),cellStyles=cellStylesFactory_getTemplate(registeredCellStyles);return resetStylesheetValues(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[numberFormats,fonts,fills,borders,cellStylesXfs,cellXfs,cellStyles,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}},getStyleId=function(name,currentSheet){return stylesMap[getStyleName(name,currentSheet)]||0},sheetFactory_getTemplate=function(name,idx){var sheetId=(idx+1).toString();return{name:"sheet",properties:{rawMap:{name,sheetId,"r:id":"rId"+sheetId}}}},sheetsFactory_getTemplate=function(names){return{name:"sheets",children:names.map((function(sheet,idx){return sheetFactory_getTemplate(sheet,idx)}))}},workbookFactory_getTemplate=function(names){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[sheetsFactory_getTemplate(names)]}},columnFactory_getTemplate=function(config){var min=config.min,max=config.max,outlineLevel=config.outlineLevel,s=config.s,width=config.width,hidden=config.hidden,bestFit=config.bestFit,excelWidth=1,customWidth="0";return width>1&&(excelWidth=function(width){return Math.ceil((width-12)/7+1)}(width),customWidth="1"),{name:"col",properties:{rawMap:{min,max,outlineLevel:null!=outlineLevel?outlineLevel:void 0,width:excelWidth,style:s,hidden:hidden?"1":"0",bestFit:bestFit?"1":"0",customWidth}}}},cellFactory_getTemplate=function(config,idx,currentSheet){var ref=config.ref,data=config.data,styleId=config.styleId,type=data.type,value=data.value,convertedType=type;"f"===type?convertedType="str":type.charAt(0)===type.charAt(0).toUpperCase()&&(convertedType=function(type){var t=type.charAt(0).toLowerCase();return"s"===t?"inlineStr":t}(type));var children,obj={name:"c",properties:{rawMap:{r:ref,t:"empty"===convertedType?void 0:convertedType,s:styleId?getStyleId(styleId,currentSheet):void 0}}};return"empty"===convertedType?obj:(children="str"===convertedType&&"f"===type?[{name:"f",textNode:agGridCommunity._.escapeString(agGridCommunity._.utf8_encode(value))}]:"inlineStr"===convertedType?[{name:"is",children:[{name:"t",textNode:agGridCommunity._.escapeString(agGridCommunity._.utf8_encode(value))}]}]:[{name:"v",textNode:value}],Object.assign({},obj,{children}))},__read$9=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$5=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$9(arguments[i]));return ar},shouldDisplayCell=function(cell){return""!==cell.data.value||void 0!==cell.styleId},rowFactory_getTemplate=function(config,idx,currentSheet){var index=config.index,collapsed=config.collapsed,hidden=config.hidden,height=config.height,s=config.s,_a=config.cells,cells=void 0===_a?[]:_a;!function(cells,rowIdx){for(var mergeMap=[],posCounter=0,i=0;i<cells.length;i++)(cell=cells[i]).mergeAcross&&(mergeMap.push({pos:i,excelPos:posCounter}),posCounter+=cell.mergeAcross),posCounter++;if(mergeMap.length)for(i=mergeMap.length-1;i>=0;i--){for(var mergedCells=[],cell=cells[mergeMap[i].pos],j=1;j<=cell.mergeAcross;j++)mergedCells.push({ref:""+getExcelColumnName(mergeMap[i].excelPos+1+j)+(rowIdx+1),styleId:cell.styleId,data:{type:"empty",value:null}});mergedCells.length&&cells.splice.apply(cells,__spread$5([mergeMap[i].pos+1,0],mergedCells))}}(cells,idx);var children=cells.filter(shouldDisplayCell).map((function(cell,idx){return cellFactory_getTemplate(cell,idx,currentSheet)}));return{name:"row",properties:{rawMap:{r:index,collapsed,hidden:hidden?"1":"0",ht:height,customHeight:null!=height?"1":"0",s,customFormat:null!=s?"1":"0"}},children}},mergeCellFactory_getTemplate=function(ref){return{name:"mergeCell",properties:{rawMap:{ref}}}},getPageSize=function(pageSize){if(null==pageSize)return 1;var pos=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(pageSize);return-1===pos?1:pos+1},processHeaderFooterContent=function(content){return content.reduce((function(prev,curr){var position,value,output=function(headerString,font){return font?(headerString+="&amp;&quot;",headerString+=font.fontName||"Calibri",font.bold!==font.italic?headerString+=font.bold?",Bold":",Italic":font.bold?headerString+=",Bold Italic":headerString+=",Regular",headerString+="&quot;",font.size&&(headerString+="&amp;"+font.size),font.strikeThrough&&(headerString+="&amp;S"),font.underline&&(headerString+="&amp;"+("Double"===font.underline?"E":"U")),font.color&&(headerString+="&amp;K"+font.color.replace("#","").toUpperCase()),headerString):headerString}(prev+"&amp;"+("Center"===(position=curr.position)?"C":"Right"===position?"R":"L"),curr.font);return""+output+agGridCommunity._.escapeString((value=curr.value,agGridCommunity._.iterateObject({"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F"},(function(key,val){value=value.replace(key,val)})),value))}),"")},buildHeaderFooter=function(headerFooterConfig){var headersAndFooters=[];return["all","first","even"].forEach((function(rule){var headerFooter=headerFooterConfig[rule],namePrefix="all"===rule?"odd":rule;headerFooter&&(headerFooter.header||headerFooter.footer)&&agGridCommunity._.iterateObject(headerFooter,(function(key,value){var nameSuffix=""+key.charAt(0).toUpperCase()+key.slice(1);value&&headersAndFooters.push({name:""+namePrefix+nameSuffix,properties:{rawMap:{"xml:space":"preserve"}},textNode:processHeaderFooterContent(value)})}))})),headersAndFooters},worksheetFactory_getTemplate=function(params){var mergeCells,worksheet=params.worksheet,currentSheet=params.currentSheet,_a=params.margins,margins=void 0===_a?{}:_a,pageSetup=params.pageSetup,headerFooterConfig=params.headerFooterConfig,table=worksheet.table,rows=table.rows,columns=table.columns,mergedCells=columns&&columns.length?function(rows,cols){var mergedCells=[],cellsWithCollapsibleGroups=[];rows.forEach((function(currentRow,rowIdx){var lastCol,cells=currentRow.cells,merges=0;currentRow.index=rowIdx+1,cells.forEach((function(currentCell,cellIdx){var min=cellIdx+merges+1,start=getExcelColumnName(min),outputRow=rowIdx+1;if(currentCell.mergeAcross){merges+=currentCell.mergeAcross;var end=getExcelColumnName(cellIdx+merges+1);mergedCells.push(""+start+outputRow+":"+end+outputRow)}cols[min-1]||(cols[min-1]={});var collapsibleRanges=currentCell.collapsibleRanges;collapsibleRanges&&collapsibleRanges.forEach((function(range){cellsWithCollapsibleGroups.push([min+range[0],min+range[1]])})),(lastCol=cols[min-1]).min=min,lastCol.max=min,currentCell.ref=""+start+outputRow}))})),cellsWithCollapsibleGroups.sort((function(a,b){return a[0]!==b[0]?a[0]-b[0]:b[1]-a[1]}));var rangeMap=new Map,outlineLevel=new Map;return cellsWithCollapsibleGroups.filter((function(currentRange){var rangeString=currentRange.toString();return!rangeMap.get(rangeString)&&(rangeMap.set(rangeString,!0),!0)})).forEach((function(range){var refCol=cols.find((function(col){return col.min==range[0]&&col.max==range[1]})),currentOutlineLevel=outlineLevel.get(range[0]);cols.push({min:range[0],max:range[1],outlineLevel:currentOutlineLevel||1,width:(refCol||{width:100}).width}),outlineLevel.set(range[0],(currentOutlineLevel||0)+1)})),mergedCells}(rows,columns):[],createWorksheetChildren=agGridCommunity._.compose(function(columns){return function(children){return columns.length&&children.push({name:"cols",children:columns.map((function(column){return columnFactory_getTemplate(column)}))}),children}}(columns),function(rows,sheetNumber){return function(children){return rows.length&&children.push({name:"sheetData",children:rows.map((function(row,idx){return rowFactory_getTemplate(row,idx,sheetNumber)}))}),children}}(rows,currentSheet+1),(mergeCells=mergedCells,function(children){return mergeCells.length&&children.push({name:"mergeCells",properties:{rawMap:{count:mergeCells.length}},children:mergeCells.map((function(mergedCell){return mergeCellFactory_getTemplate(mergedCell)}))}),children}),function(margins){return function(children){var _a=margins.top,top=void 0===_a?.75:_a,_b=margins.right,right=void 0===_b?.7:_b,_c=margins.bottom,bottom=void 0===_c?.75:_c,_d=margins.left,left=void 0===_d?.7:_d,_e=margins.header,header=void 0===_e?.3:_e,_f=margins.footer,footer=void 0===_f?.3:_f;return children.push({name:"pageMargins",properties:{rawMap:{bottom,footer,header,left,right,top}}}),children}}(margins),function(pageSetup){return function(children){var orientation;return pageSetup&&children.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:(orientation=pageSetup.orientation,!orientation||"Portrait"!==orientation&&"Landscape"!==orientation?"portrait":orientation.toLocaleLowerCase()),paperSize:getPageSize(pageSetup.pageSize)}}}),children}}(pageSetup),function(headerFooterConfig){return function(children){if(!headerFooterConfig)return children;var differentFirst=null!=headerFooterConfig.first?1:0,differentOddEven=null!=headerFooterConfig.even?1:0;return children.push({name:"headerFooter",properties:{rawMap:{differentFirst,differentOddEven}},children:buildHeaderFooter(headerFooterConfig)}),children}}(headerFooterConfig),function(currentSheet){return function(children){return ExcelXlsxFactory.worksheetImages.get(currentSheet)&&children.push({name:"drawing",properties:{rawMap:{"r:id":"rId1"}}}),children}}(currentSheet));return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:createWorksheetChildren([])}},relationshipFactory_getTemplate=function(config){return{name:"Relationship",properties:{rawMap:{Id:config.Id,Type:config.Type,Target:config.Target}}}},relationshipsFactory_getTemplate=function(c){return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:c.map((function(relationship){return relationshipFactory_getTemplate(relationship)}))}},__read$a=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$6=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$a(arguments[i]));return ar},ExcelXlsxFactory=function(){function ExcelXlsxFactory(){}return ExcelXlsxFactory.createExcel=function(styles,worksheet,margins,pageSetup,headerFooterConfig){return this.addSheetName(worksheet),function(styles,_currentSheet){1===(currentSheet=_currentSheet)&&resetStylesheetValues(),styles.forEach(registerStyle)}(styles,this.sheetNames.length),this.createWorksheet(worksheet,margins,pageSetup,headerFooterConfig)},ExcelXlsxFactory.buildImageMap=function(image,rowIndex,col,columnsToExport,rowHeight){var currentSheetIndex=this.sheetNames.length,registeredImage=this.images.get(image.id);image.position&&image.position.row&&image.position.column||(image.position||(image.position={}),image.position=Object.assign({},image.position,{row:rowIndex,column:columnsToExport.indexOf(col)+1}));var calculatedImage=image;if(function(image,columnsToExport){var _a=image.position,colSpan=_a.colSpan,column=_a.column;if(image.width)if(colSpan)for(var columnsInSpan=columnsToExport.slice(column-1,column+colSpan-1),totalWidth=0,i=0;i<columnsInSpan.length;i++){var colWidth=columnsInSpan[i].getActualWidth();if(image.width<totalWidth+colWidth){image.position.colSpan=i+1,image.totalWidth=image.width,image.width=image.totalWidth-totalWidth;break}totalWidth+=colWidth}else image.totalWidth=image.width}(calculatedImage,columnsToExport),function(image,rowHeight){var points,_a=image.position,rowSpan=_a.rowSpan,row=_a.row;if(image.height)if(rowSpan)for(var totalHeight=0,counter=0,i=row;i<row+rowSpan;i++){var nextRowHeight=(points=getHeightFromProperty(i,rowHeight)||20,Math.round(96*points/72));if(image.height<totalHeight+nextRowHeight){image.position.rowSpan=counter+1,image.totalHeight=image.height,image.height=image.totalHeight-totalHeight;break}totalHeight+=nextRowHeight,counter++}else image.totalHeight=image.height}(calculatedImage,rowHeight),registeredImage){var currentSheetImages=registeredImage.find((function(currentImage){return currentImage.sheetId===currentSheetIndex}));currentSheetImages?currentSheetImages.image.push(calculatedImage):registeredImage.push({sheetId:currentSheetIndex,image:[calculatedImage]})}else this.images.set(calculatedImage.id,[{sheetId:currentSheetIndex,image:[calculatedImage]}]),this.workbookImageIds.set(calculatedImage.id,{type:calculatedImage.imageType,index:this.workbookImageIds.size});this.buildSheetImageMap(currentSheetIndex,calculatedImage)},ExcelXlsxFactory.buildSheetImageMap=function(sheetIndex,image){var worksheetImageIdMap=this.worksheetImageIds.get(sheetIndex);worksheetImageIdMap||(worksheetImageIdMap=new Map,this.worksheetImageIds.set(sheetIndex,worksheetImageIdMap));var sheetImages=this.worksheetImages.get(sheetIndex);sheetImages?(sheetImages.push(image),worksheetImageIdMap.get(image.id)||worksheetImageIdMap.set(image.id,{index:worksheetImageIdMap.size,type:image.imageType})):(this.worksheetImages.set(sheetIndex,[image]),worksheetImageIdMap.set(image.id,{index:0,type:image.imageType}))},ExcelXlsxFactory.addSheetName=function(worksheet){for(var name=agGridCommunity._.escapeString(worksheet.name)||"",append="";-1!==this.sheetNames.indexOf(""+name+append);)if(""===append)append="_1";else{var curr=parseInt(append.slice(1),10);append="_"+(curr+1)}worksheet.name=""+name+append,this.sheetNames.push(worksheet.name)},ExcelXlsxFactory.getStringPosition=function(str){return this.sharedStrings.has(str)?this.sharedStrings.get(str):(this.sharedStrings.set(str,this.sharedStrings.size),this.sharedStrings.size-1)},ExcelXlsxFactory.resetFactory=function(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.sheetNames=[],this.factoryMode=agGridCommunity.ExcelFactoryMode.SINGLE_SHEET},ExcelXlsxFactory.createWorkbook=function(){return createXmlPart(workbookFactory_getTemplate(this.sheetNames))},ExcelXlsxFactory.createStylesheet=function(defaultFontSize){return createXmlPart(stylesheetFactory_getTemplate(defaultFontSize))},ExcelXlsxFactory.createSharedStrings=function(){return createXmlPart(sharedStrings_getTemplate(this.sharedStrings))},ExcelXlsxFactory.createCore=function(author){return createXmlPart(coreFactory_getTemplate(author))},ExcelXlsxFactory.createContentTypes=function(sheetLen){return createXmlPart(contentTypesFactory_getTemplate(sheetLen))},ExcelXlsxFactory.createRels=function(){var rs=relationshipsFactory_getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return createXmlPart(rs)},ExcelXlsxFactory.createTheme=function(){return createXmlPart(officeTheme_getTemplate())},ExcelXlsxFactory.createWorkbookRels=function(sheetLen){var worksheets=new Array(sheetLen).fill(void 0).map((function(v,i){return{Id:"rId"+(i+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet"+(i+1)+".xml"}})),rs=relationshipsFactory_getTemplate(__spread$6(worksheets,[{Id:"rId"+(sheetLen+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId"+(sheetLen+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId"+(sheetLen+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]));return createXmlPart(rs)},ExcelXlsxFactory.createDrawing=function(sheetIndex){return createXmlPart(drawingFactory_getTemplate({sheetIndex}))},ExcelXlsxFactory.createDrawingRel=function(sheetIndex){var _this=this,worksheetImageIds=this.worksheetImageIds.get(sheetIndex),XMLArr=[];return worksheetImageIds.forEach((function(value,key){XMLArr.push({Id:"rId"+(value.index+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image"+(_this.workbookImageIds.get(key).index+1)+"."+value.type})})),createXmlPart(relationshipsFactory_getTemplate(XMLArr))},ExcelXlsxFactory.createWorksheetDrawingRel=function(currentRelationIndex){var rs=relationshipsFactory_getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing"+(currentRelationIndex+1)+".xml"}]);return createXmlPart(rs)},ExcelXlsxFactory.createWorksheet=function(worksheet,margins,pageSetup,headerFooterConfig){return createXmlPart(worksheetFactory_getTemplate({worksheet,currentSheet:this.sheetNames.length-1,margins,pageSetup,headerFooterConfig}))},ExcelXlsxFactory.sharedStrings=new Map,ExcelXlsxFactory.sheetNames=[],ExcelXlsxFactory.images=new Map,ExcelXlsxFactory.worksheetImages=new Map,ExcelXlsxFactory.workbookImageIds=new Map,ExcelXlsxFactory.worksheetImageIds=new Map,ExcelXlsxFactory.factoryMode=agGridCommunity.ExcelFactoryMode.SINGLE_SHEET,ExcelXlsxFactory}(),__extends$z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ExcelXlsxSerializingSession=function(_super){function ExcelXlsxSerializingSession(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$z(ExcelXlsxSerializingSession,_super),ExcelXlsxSerializingSession.prototype.createExcel=function(data){var excelStyles=this.excelStyles,config=this.config,margins=config.margins,pageSetup=config.pageSetup,headerFooterConfig=config.headerFooterConfig;return ExcelXlsxFactory.createExcel(excelStyles,data,margins,pageSetup,headerFooterConfig)},ExcelXlsxSerializingSession.prototype.getDataTypeForValue=function(valueForCell){return void 0===valueForCell?"empty":agGridCommunity._.isNumeric(valueForCell)?"n":"s"},ExcelXlsxSerializingSession.prototype.getType=function(type,style,value){if(this.isFormula(value))return"f";if(style&&style.dataType)switch(style.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn("AG Grid: Unrecognized data type for excel export ["+style.id+".dataType="+style.dataType+"]")}return type},ExcelXlsxSerializingSession.prototype.addImage=function(rowIndex,column,value){if(this.config.addImageToCell){var addedImage=this.config.addImageToCell(rowIndex,column,value);if(addedImage)return ExcelXlsxFactory.buildImageMap(addedImage.image,rowIndex,column,this.columnsToExport,this.config.rowHeight),addedImage}},ExcelXlsxSerializingSession.prototype.createCell=function(styleId,type,value){var actualStyle=this.getStyleById(styleId),typeTransformed=this.getType(type,actualStyle,value)||type;return{styleId:actualStyle?styleId:void 0,data:{type:typeTransformed,value:this.getCellValue(typeTransformed,value)}}},ExcelXlsxSerializingSession.prototype.createMergedCell=function(styleId,type,value,numOfCells){var valueToUse=null==value?"":value;return{styleId:this.getStyleById(styleId)?styleId:void 0,data:{type,value:"s"===type?ExcelXlsxFactory.getStringPosition(valueToUse).toString():value},mergeAcross:numOfCells}},ExcelXlsxSerializingSession.prototype.getCellValue=function(type,value){if(null==value)return ExcelXlsxFactory.getStringPosition("").toString();switch(type){case"s":return""===value?"":ExcelXlsxFactory.getStringPosition(value).toString();case"f":return value.slice(1);case"n":return Number(value).toString();default:return value}},ExcelXlsxSerializingSession}(BaseExcelSerializingSession),__extends$A=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$3=function(){return __assign$3=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$3.apply(this,arguments)},__decorate$x=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},getMultipleSheetsAsExcel=function(params){var data=params.data,_a=params.fontSize,fontSize=void 0===_a?11:_a,_b=params.author,author=void 0===_b?"AG Grid":_b,hasImages=ExcelXlsxFactory.images.size>0;if(ZipContainer.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),hasImages){ZipContainer.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);var imgCounter_1=0;ExcelXlsxFactory.images.forEach((function(value){var firstImage=value[0].image[0],ext=firstImage.imageType;ZipContainer.addFile("xl/media/image"+ ++imgCounter_1+"."+ext,firstImage.base64,!0)}))}if(!data||0===data.length)return console.warn("AG Grid: Invalid params supplied to getMultipleSheetsAsExcel() - `ExcelExportParams.data` is empty."),void ExcelXlsxFactory.resetFactory();var sheetLen=data.length,imageRelationCounter=0;data.forEach((function(value,idx){ZipContainer.addFile("xl/worksheets/sheet"+(idx+1)+".xml",value),hasImages&&ExcelXlsxFactory.worksheetImages.get(idx)&&createImageRelationsForSheet(idx,imageRelationCounter++)})),ZipContainer.addFile("xl/workbook.xml",ExcelXlsxFactory.createWorkbook()),ZipContainer.addFile("xl/styles.xml",ExcelXlsxFactory.createStylesheet(fontSize)),ZipContainer.addFile("xl/sharedStrings.xml",ExcelXlsxFactory.createSharedStrings()),ZipContainer.addFile("xl/theme/theme1.xml",ExcelXlsxFactory.createTheme()),ZipContainer.addFile("xl/_rels/workbook.xml.rels",ExcelXlsxFactory.createWorkbookRels(sheetLen)),ZipContainer.addFile("docProps/core.xml",ExcelXlsxFactory.createCore(author)),ZipContainer.addFile("[Content_Types].xml",ExcelXlsxFactory.createContentTypes(sheetLen)),ZipContainer.addFile("_rels/.rels",ExcelXlsxFactory.createRels()),ExcelXlsxFactory.resetFactory();var mimeType=params.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return ZipContainer.getContent(mimeType)},exportMultipleSheetsAsExcel=function(params){var _a=params.fileName,fileName=void 0===_a?"export.xlsx":_a,contents=getMultipleSheetsAsExcel(params);contents&&Downloader.download(fileName,contents)},createImageRelationsForSheet=function(sheetIndex,currentRelationIndex){var drawingFileName="xl/drawings/drawing"+(currentRelationIndex+1)+".xml",relFileName="xl/drawings/_rels/drawing"+(currentRelationIndex+1)+".xml.rels",worksheetRelFile="xl/worksheets/_rels/sheet"+(sheetIndex+1)+".xml.rels";ZipContainer.addFile(relFileName,ExcelXlsxFactory.createDrawingRel(sheetIndex)),ZipContainer.addFile(drawingFileName,ExcelXlsxFactory.createDrawing(sheetIndex)),ZipContainer.addFile(worksheetRelFile,ExcelXlsxFactory.createWorksheetDrawingRel(currentRelationIndex))},ExcelCreator=function(_super){function ExcelCreator(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.exportMode="xlsx",_this}return __extends$A(ExcelCreator,_super),ExcelCreator.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},ExcelCreator.prototype.getMergedParams=function(params){var baseParams=this.gridOptionsWrapper.getDefaultExportParams("excel");return Object.assign({},baseParams,params)},ExcelCreator.prototype.getData=function(params){return this.setExportMode(params.exportMode||"xlsx"),_super.prototype.getData.call(this,params)},ExcelCreator.prototype.export=function(userParams){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var mergedParams=this.getMergedParams(userParams),data=this.getData(mergedParams),exportParams={data:[data],fontSize:mergedParams.fontSize,author:mergedParams.author,mimeType:mergedParams.mimeType},packageFile=this.packageFile(exportParams);return packageFile&&Downloader.download(this.getFileName(mergedParams.fileName),packageFile),data},ExcelCreator.prototype.exportDataAsExcel=function(params){return this.export(params)},ExcelCreator.prototype.getDataAsExcel=function(params){var mergedParams=this.getMergedParams(params),data=this.getData(mergedParams);if(params&&"xml"===params.exportMode)return data;var exportParams={data:[data],fontSize:mergedParams.fontSize,author:mergedParams.author,mimeType:mergedParams.mimeType};return this.packageFile(exportParams)},ExcelCreator.prototype.setFactoryMode=function(factoryMode,exportMode){void 0===exportMode&&(exportMode="xlsx"),("xlsx"===exportMode?ExcelXlsxFactory:ExcelXmlFactory).factoryMode=factoryMode},ExcelCreator.prototype.getFactoryMode=function(exportMode){return("xlsx"===exportMode?ExcelXlsxFactory:ExcelXmlFactory).factoryMode},ExcelCreator.prototype.getSheetDataForExcel=function(params){var mergedParams=this.getMergedParams(params);return this.getData(mergedParams)},ExcelCreator.prototype.getMultipleSheetsAsExcel=function(params){return getMultipleSheetsAsExcel(params)},ExcelCreator.prototype.exportMultipleSheetsAsExcel=function(params){return exportMultipleSheetsAsExcel(params)},ExcelCreator.prototype.getDefaultFileName=function(){return"export."+this.getExportMode()},ExcelCreator.prototype.getDefaultFileExtension=function(){return this.getExportMode()},ExcelCreator.prototype.createSerializingSession=function(params){var columnModel=this.columnModel,valueService=this.valueService,gridOptionsWrapper=this.gridOptionsWrapper,isXlsx="xlsx"===this.getExportMode(),sheetName="ag-grid";null!=params.sheetName&&(sheetName=agGridCommunity._.utf8_encode(params.sheetName.toString().substr(0,31)));var config=__assign$3(__assign$3({},params),{sheetName,columnModel,valueService,gridOptionsWrapper,headerRowHeight:params.headerRowHeight||params.rowHeight,baseExcelStyles:this.gridOptions.excelStyles||[],styleLinker:this.styleLinker.bind(this)});return new(isXlsx?ExcelXlsxSerializingSession:ExcelXmlSerializingSession)(config)},ExcelCreator.prototype.styleLinker=function(rowType,rowIndex,value,column,node){if(rowType===RowType.HEADER)return["header"];if(rowType===RowType.HEADER_GROUPING)return["header","headerGroup"];var styles=this.gridOptions.excelStyles,applicableStyles=["cell"];if(!styles||!styles.length)return applicableStyles;var styleIds=styles.map((function(it){return it.id}));return this.stylingService.processAllCellClasses(column.getColDef(),{value,data:node.data,node,colDef:column.getColDef(),rowIndex,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()},(function(className){styleIds.indexOf(className)>-1&&applicableStyles.push(className)})),applicableStyles.sort((function(left,right){return styleIds.indexOf(left)<styleIds.indexOf(right)?-1:1}))},ExcelCreator.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressExcelExport()},ExcelCreator.prototype.setExportMode=function(exportMode){this.exportMode=exportMode},ExcelCreator.prototype.getExportMode=function(){return this.exportMode},ExcelCreator.prototype.packageFile=function(params){if("xml"===this.getExportMode()){var mimeType=params.mimeType||"application/vnd.ms-excel";return new Blob(["\ufeff",params.data[0]],{type:mimeType})}return getMultipleSheetsAsExcel(params)},__decorate$x([agGridCommunity.Autowired("columnModel")],ExcelCreator.prototype,"columnModel",void 0),__decorate$x([agGridCommunity.Autowired("valueService")],ExcelCreator.prototype,"valueService",void 0),__decorate$x([agGridCommunity.Autowired("gridOptions")],ExcelCreator.prototype,"gridOptions",void 0),__decorate$x([agGridCommunity.Autowired("stylingService")],ExcelCreator.prototype,"stylingService",void 0),__decorate$x([agGridCommunity.Autowired("gridSerializer")],ExcelCreator.prototype,"gridSerializer",void 0),__decorate$x([agGridCommunity.Autowired("gridOptionsWrapper")],ExcelCreator.prototype,"gridOptionsWrapper",void 0),__decorate$x([agGridCommunity.PostConstruct],ExcelCreator.prototype,"postConstruct",null),ExcelCreator=__decorate$x([agGridCommunity.Bean("excelCreator")],ExcelCreator)}(BaseCreator),ExcelExportModule={moduleName:agGridCommunity.ModuleNames.ExcelExportModule,beans:[ExcelCreator,GridSerializer,CsvCreator],dependantModules:[CsvExportModule,EnterpriseCoreModule]},__extends$B=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(EXPAND_STATE){EXPAND_STATE[EXPAND_STATE.EXPANDED=0]="EXPANDED",EXPAND_STATE[EXPAND_STATE.COLLAPSED=1]="COLLAPSED",EXPAND_STATE[EXPAND_STATE.INDETERMINATE=2]="INDETERMINATE"}(EXPAND_STATE||(EXPAND_STATE={}));var FiltersToolPanelHeaderPanel=function(_super){function FiltersToolPanelHeaderPanel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$B(FiltersToolPanelHeaderPanel,_super),FiltersToolPanelHeaderPanel.prototype.preConstruct=function(){this.setTemplate('<div class="ag-filter-toolpanel-search" role="presentation">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>\n            </div>')},FiltersToolPanelHeaderPanel.prototype.postConstruct=function(){var translate=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.onValueChange(this.onSearchTextChanged.bind(this)),this.eFilterTextField.setInputAriaLabel(translate("ariaFilterColumnsInput","Filter Columns Input")),this.createExpandIcons(),this.setExpandState(EXPAND_STATE.EXPANDED),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))},FiltersToolPanelHeaderPanel.prototype.init=function(params){this.params=params,this.columnModel.isReady()&&this.showOrHideOptions()},FiltersToolPanelHeaderPanel.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=agGridCommunity._.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandUnchecked=agGridCommunity._.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandIndeterminate=agGridCommunity._.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsWrapper))},FiltersToolPanelHeaderPanel.prototype.showOrHideOptions=function(){var showFilterSearch=!this.params.suppressFilterSearch,showExpand=!this.params.suppressExpandAll,translate=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(translate("searchOoo","Search..."));var filterGroupsPresent=this.columnModel.getAllGridColumns().some((function(col){return col.getOriginalParent()&&col.isFilterAllowed()}));agGridCommunity._.setDisplayed(this.eFilterTextField.getGui(),showFilterSearch),agGridCommunity._.setDisplayed(this.eExpand,showExpand&&filterGroupsPresent)},FiltersToolPanelHeaderPanel.prototype.onSearchTextChanged=function(){var _this=this;this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=agGridCommunity._.debounce((function(){_this.dispatchEvent({type:"searchChanged",searchText:_this.eFilterTextField.getValue()})}),300)),this.onSearchTextChangedDebounced()},FiltersToolPanelHeaderPanel.prototype.onExpandClicked=function(){var event=this.currentExpandState===EXPAND_STATE.EXPANDED?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(event)},FiltersToolPanelHeaderPanel.prototype.setExpandState=function(state){this.currentExpandState=state,agGridCommunity._.setDisplayed(this.eExpandChecked,this.currentExpandState===EXPAND_STATE.EXPANDED),agGridCommunity._.setDisplayed(this.eExpandUnchecked,this.currentExpandState===EXPAND_STATE.COLLAPSED),agGridCommunity._.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===EXPAND_STATE.INDETERMINATE)},__decorate$y([agGridCommunity.Autowired("columnModel")],FiltersToolPanelHeaderPanel.prototype,"columnModel",void 0),__decorate$y([agGridCommunity.RefSelector("eExpand")],FiltersToolPanelHeaderPanel.prototype,"eExpand",void 0),__decorate$y([agGridCommunity.RefSelector("eFilterTextField")],FiltersToolPanelHeaderPanel.prototype,"eFilterTextField",void 0),__decorate$y([agGridCommunity.PreConstruct],FiltersToolPanelHeaderPanel.prototype,"preConstruct",null),__decorate$y([agGridCommunity.PostConstruct],FiltersToolPanelHeaderPanel.prototype,"postConstruct",null),FiltersToolPanelHeaderPanel}(agGridCommunity.Component),__extends$C=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ToolPanelFilterComp=function(_super){function ToolPanelFilterComp(hideHeader){void 0===hideHeader&&(hideHeader=!1);var _this=_super.call(this,ToolPanelFilterComp.TEMPLATE)||this;return _this.expanded=!1,_this.hideHeader=hideHeader,_this}return __extends$C(ToolPanelFilterComp,_super),ToolPanelFilterComp.prototype.postConstruct=function(){this.eExpandChecked=agGridCommunity._.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper),this.eExpandUnchecked=agGridCommunity._.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)},ToolPanelFilterComp.prototype.setColumn=function(column){var _this=this;this.column=column,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",(function(e){e.key===agGridCommunity.KeyCode.ENTER&&_this.toggleExpanded()})),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),this.eFilterIcon.classList.toggle("ag-hidden",!this.isFilterActive()),this.eExpandChecked.classList.add("ag-hidden"),this.hideHeader?(this.eFilterToolPanelHeader.classList.toggle("ag-hidden",!0),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,agGridCommunity.Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))},ToolPanelFilterComp.prototype.getColumn=function(){return this.column},ToolPanelFilterComp.prototype.getColumnFilterName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)},ToolPanelFilterComp.prototype.addCssClassToTitleBar=function(cssClass){this.eFilterToolPanelHeader.classList.add(cssClass)},ToolPanelFilterComp.prototype.addInIcon=function(iconName,eParent,column){if(null!=eParent){var eIcon=agGridCommunity._.createIconNoSpan(iconName,this.gridOptionsWrapper,column);eParent.appendChild(eIcon)}},ToolPanelFilterComp.prototype.isFilterActive=function(){return this.filterManager.isFilterActive(this.column)},ToolPanelFilterComp.prototype.onFilterChanged=function(){this.eFilterIcon.classList.toggle("ag-hidden",!this.isFilterActive()),this.dispatchEvent({type:agGridCommunity.Column.EVENT_FILTER_CHANGED})},ToolPanelFilterComp.prototype.toggleExpanded=function(){this.expanded?this.collapse():this.expand()},ToolPanelFilterComp.prototype.expand=function(){var _a,_this=this;if(!this.expanded){this.expanded=!0,agGridCommunity._.setAriaExpanded(this.eFilterToolPanelHeader,!0);var container=agGridCommunity._.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),filterPromise=null===(_a=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR"))||void 0===_a?void 0:_a.filterPromise;filterPromise&&filterPromise.then((function(filter){_this.underlyingFilter=filter,filter&&(container.appendChild(filter.getGui()),_this.agFilterToolPanelBody.appendChild(container),filter.afterGuiAttached&&filter.afterGuiAttached({container:"toolPanel"}))})),agGridCommunity._.setDisplayed(this.eExpandChecked,!0),agGridCommunity._.setDisplayed(this.eExpandUnchecked,!1)}},ToolPanelFilterComp.prototype.collapse=function(){this.expanded&&(this.expanded=!1,agGridCommunity._.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.agFilterToolPanelBody.removeChild(this.agFilterToolPanelBody.children[0]),agGridCommunity._.setDisplayed(this.eExpandChecked,!1),agGridCommunity._.setDisplayed(this.eExpandUnchecked,!0))},ToolPanelFilterComp.prototype.refreshFilter=function(){if(this.expanded){var filter=this.underlyingFilter;filter&&"function"==typeof filter.refreshVirtualList&&filter.refreshVirtualList()}},ToolPanelFilterComp.prototype.onFilterOpened=function(event){"COLUMN_MENU"===event.source&&event.column===this.column&&this.expanded&&this.collapse()},ToolPanelFilterComp.TEMPLATE='\n        <div class="ag-filter-toolpanel-instance">\n            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <span ref="eFilterName" class="ag-header-cell-text"></span>\n                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>\n            </div>\n            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>\n        </div>',__decorate$z([agGridCommunity.RefSelector("eFilterToolPanelHeader")],ToolPanelFilterComp.prototype,"eFilterToolPanelHeader",void 0),__decorate$z([agGridCommunity.RefSelector("eFilterName")],ToolPanelFilterComp.prototype,"eFilterName",void 0),__decorate$z([agGridCommunity.RefSelector("agFilterToolPanelBody")],ToolPanelFilterComp.prototype,"agFilterToolPanelBody",void 0),__decorate$z([agGridCommunity.RefSelector("eFilterIcon")],ToolPanelFilterComp.prototype,"eFilterIcon",void 0),__decorate$z([agGridCommunity.RefSelector("eExpand")],ToolPanelFilterComp.prototype,"eExpand",void 0),__decorate$z([agGridCommunity.Autowired("filterManager")],ToolPanelFilterComp.prototype,"filterManager",void 0),__decorate$z([agGridCommunity.Autowired("columnModel")],ToolPanelFilterComp.prototype,"columnModel",void 0),__decorate$z([agGridCommunity.PostConstruct],ToolPanelFilterComp.prototype,"postConstruct",null),ToolPanelFilterComp}(agGridCommunity.Component),__extends$D=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$A=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ToolPanelFilterGroupComp=function(_super){function ToolPanelFilterGroupComp(columnGroup,childFilterComps,expandedCallback,depth,showingColumn){var _this=_super.call(this)||this;return _this.columnGroup=columnGroup,_this.childFilterComps=childFilterComps,_this.depth=depth,_this.expandedCallback=expandedCallback,_this.showingColumn=showingColumn,_this}return __extends$D(ToolPanelFilterGroupComp,_super),ToolPanelFilterGroupComp.prototype.preConstruct=function(){this.setTemplate(ToolPanelFilterGroupComp.TEMPLATE,{filterGroupComp:{cssIdentifier:"filter-toolpanel",direction:"vertical"}})},ToolPanelFilterGroupComp.prototype.init=function(){var _this=this;this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass("ag-filter-toolpanel-group-level-"+this.depth),this.filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+this.depth+"-header"),this.childFilterComps.forEach((function(filterComp){_this.filterGroupComp.addItem(filterComp),filterComp.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+(_this.depth+1)+"-header")})),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip()},ToolPanelFilterGroupComp.prototype.setupTooltip=function(){var _this=this;if(this.showingColumn){var refresh=function(){var newTooltipText=_this.columnGroup.getColDef().headerTooltip;_this.setTooltip(newTooltipText)};refresh(),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,refresh)}},ToolPanelFilterGroupComp.prototype.getTooltipParams=function(){var res=_super.prototype.getTooltipParams.call(this);return res.location="filterToolPanelColumnGroup",res},ToolPanelFilterGroupComp.prototype.addCssClassToTitleBar=function(cssClass){this.filterGroupComp.addCssClassToTitleBar(cssClass)},ToolPanelFilterGroupComp.prototype.refreshFilters=function(){this.childFilterComps.forEach((function(filterComp){filterComp instanceof ToolPanelFilterGroupComp?filterComp.refreshFilters():filterComp.refreshFilter()}))},ToolPanelFilterGroupComp.prototype.isColumnGroup=function(){return this.columnGroup instanceof agGridCommunity.ProvidedColumnGroup},ToolPanelFilterGroupComp.prototype.isExpanded=function(){return this.filterGroupComp.isExpanded()},ToolPanelFilterGroupComp.prototype.getChildren=function(){return this.childFilterComps},ToolPanelFilterGroupComp.prototype.getFilterGroupName=function(){return this.filterGroupName?this.filterGroupName:""},ToolPanelFilterGroupComp.prototype.getFilterGroupId=function(){return this.columnGroup.getId()},ToolPanelFilterGroupComp.prototype.hideGroupItem=function(hide,index){this.filterGroupComp.hideItem(hide,index)},ToolPanelFilterGroupComp.prototype.hideGroup=function(hide){this.addOrRemoveCssClass("ag-hidden",hide)},ToolPanelFilterGroupComp.prototype.forEachToolPanelFilterChild=function(action){this.childFilterComps.forEach((function(filterComp){filterComp instanceof ToolPanelFilterComp&&action(filterComp)}))},ToolPanelFilterGroupComp.prototype.addExpandCollapseListeners=function(){var _this=this,expandListener=this.isColumnGroup()?function(){return _this.expandedCallback()}:function(){return _this.forEachToolPanelFilterChild((function(filterComp){return filterComp.expand()}))},collapseListener=this.isColumnGroup()?function(){return _this.expandedCallback()}:function(){return _this.forEachToolPanelFilterChild((function(filterComp){return filterComp.collapse()}))};this.addManagedListener(this.filterGroupComp,agGridCommunity.AgGroupComponent.EVENT_EXPANDED,expandListener),this.addManagedListener(this.filterGroupComp,agGridCommunity.AgGroupComponent.EVENT_COLLAPSED,collapseListener)},ToolPanelFilterGroupComp.prototype.getColumns=function(){return this.columnGroup instanceof agGridCommunity.ProvidedColumnGroup?this.columnGroup.getLeafColumns():[this.columnGroup]},ToolPanelFilterGroupComp.prototype.addFilterChangedListeners=function(){var _this=this;this.getColumns().forEach((function(column){_this.addManagedListener(column,agGridCommunity.Column.EVENT_FILTER_CHANGED,(function(){return _this.refreshFilterClass()}))})),this.columnGroup instanceof agGridCommunity.ProvidedColumnGroup||this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))},ToolPanelFilterGroupComp.prototype.refreshFilterClass=function(){var columns=this.getColumns();this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",columns.some((function(col){return col.isFilterActive()})))},ToolPanelFilterGroupComp.prototype.onFilterOpened=function(event){"COLUMN_MENU"===event.source&&event.column===this.columnGroup&&this.isExpanded()&&this.collapse()},ToolPanelFilterGroupComp.prototype.expand=function(){this.filterGroupComp.toggleGroupExpand(!0)},ToolPanelFilterGroupComp.prototype.collapse=function(){this.filterGroupComp.toggleGroupExpand(!1)},ToolPanelFilterGroupComp.prototype.setGroupTitle=function(){this.filterGroupName=this.columnGroup instanceof agGridCommunity.ProvidedColumnGroup?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")},ToolPanelFilterGroupComp.prototype.getColumnGroupName=function(columnGroup){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,columnGroup,"filterToolPanel")},ToolPanelFilterGroupComp.prototype.getColumnName=function(column){return this.columnModel.getDisplayNameForColumn(column,"filterToolPanel",!1)},ToolPanelFilterGroupComp.prototype.destroyFilters=function(){this.childFilterComps=this.destroyBeans(this.childFilterComps),agGridCommunity._.clearElement(this.getGui())},ToolPanelFilterGroupComp.prototype.destroy=function(){this.destroyFilters(),_super.prototype.destroy.call(this)},ToolPanelFilterGroupComp.TEMPLATE='<div class="ag-filter-toolpanel-group-wrapper">\n            <ag-group-component ref="filterGroupComp"></ag-group-component>\n        </div>',__decorate$A([agGridCommunity.RefSelector("filterGroupComp")],ToolPanelFilterGroupComp.prototype,"filterGroupComp",void 0),__decorate$A([agGridCommunity.Autowired("columnModel")],ToolPanelFilterGroupComp.prototype,"columnModel",void 0),__decorate$A([agGridCommunity.PreConstruct],ToolPanelFilterGroupComp.prototype,"preConstruct",null),__decorate$A([agGridCommunity.PostConstruct],ToolPanelFilterGroupComp.prototype,"init",null),ToolPanelFilterGroupComp}(agGridCommunity.Component),__extends$E=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$B=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FiltersToolPanelListPanel=function(_super){function FiltersToolPanelListPanel(){var _this=_super.call(this,FiltersToolPanelListPanel.TEMPLATE)||this;return _this.initialised=!1,_this.filterGroupComps=[],_this}return __extends$E(FiltersToolPanelListPanel,_super),FiltersToolPanelListPanel.prototype.init=function(params){var _this=this;this.initialised=!0;var defaultParams={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};agGridCommunity._.mergeDeep(defaultParams,params),this.params=defaultParams,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_MOVED,(function(){return _this.onColumnsChanged()})),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,(function(){return _this.onColumnsChanged()})),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,(function(event){"filters"===event.source&&_this.refreshFilters()})),this.columnModel.isReady()&&this.onColumnsChanged()},FiltersToolPanelListPanel.prototype.onColumnsChanged=function(){var pivotModeActive=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!pivotModeActive?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs()},FiltersToolPanelListPanel.prototype.syncFilterLayout=function(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this))},FiltersToolPanelListPanel.prototype.buildTreeFromProvidedColumnDefs=function(){var _this=this;this.destroyFilters();var columnTree=this.columnModel.getPrimaryColumnTree();this.filterGroupComps=this.recursivelyAddComps(columnTree,0);var len=this.filterGroupComps.length;len&&(this.filterGroupComps.forEach((function(comp){return _this.appendChild(comp)})),this.setFirstAndLastVisible(0,len-1)),agGridCommunity._.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent()},FiltersToolPanelListPanel.prototype.setFiltersLayout=function(colDefs){var _this=this;this.destroyFilters();var columnTree=this.toolPanelColDefService.createColumnTree(colDefs);this.filterGroupComps=this.recursivelyAddComps(columnTree,0);var len=this.filterGroupComps.length;len&&(this.filterGroupComps.forEach((function(comp){return _this.appendChild(comp)})),this.setFirstAndLastVisible(0,len-1)),agGridCommunity._.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent()},FiltersToolPanelListPanel.prototype.recursivelyAddComps=function(tree,depth){var _this=this;return agGridCommunity._.flatten(tree.map((function(child){if(child instanceof agGridCommunity.ProvidedColumnGroup)return agGridCommunity._.flatten(_this.recursivelyAddFilterGroupComps(child,depth));var column=child;if(!_this.shouldDisplayFilter(column))return[];var filterComp=new ToolPanelFilterComp(0===depth);if(_this.getContext().createBean(filterComp),filterComp.setColumn(column),depth>0)return filterComp;var filterGroupComp=_this.createBean(new ToolPanelFilterGroupComp(column,[filterComp],_this.onGroupExpanded.bind(_this),depth,!0));return filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-header"),filterGroupComp.collapse(),filterGroupComp})))},FiltersToolPanelListPanel.prototype.recursivelyAddFilterGroupComps=function(columnGroup,depth){if(this.filtersExistInChildren(columnGroup.getChildren())){var colGroupDef=columnGroup.getColGroupDef();if(colGroupDef&&colGroupDef.suppressFiltersToolPanel)return[];var newDepth=columnGroup.isPadding()?depth:depth+1,childFilterComps=agGridCommunity._.flatten(this.recursivelyAddComps(columnGroup.getChildren(),newDepth));if(columnGroup.isPadding())return childFilterComps;var filterGroupComp=new ToolPanelFilterGroupComp(columnGroup,childFilterComps,this.onGroupExpanded.bind(this),depth,!1);return this.getContext().createBean(filterGroupComp),filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-header"),[filterGroupComp]}},FiltersToolPanelListPanel.prototype.filtersExistInChildren=function(tree){var _this=this;return tree.some((function(child){return child instanceof agGridCommunity.ProvidedColumnGroup?_this.filtersExistInChildren(child.getChildren()):_this.shouldDisplayFilter(child)}))},FiltersToolPanelListPanel.prototype.shouldDisplayFilter=function(column){var suppressFiltersToolPanel=column.getColDef()&&column.getColDef().suppressFiltersToolPanel;return column.isFilterAllowed()&&!suppressFiltersToolPanel},FiltersToolPanelListPanel.prototype.refresh=function(){},FiltersToolPanelListPanel.prototype.setVisible=function(visible){_super.prototype.setDisplayed.call(this,visible),visible&&!this.initialised&&this.init(this.params)},FiltersToolPanelListPanel.prototype.expandFilterGroups=function(expand,groupIds){var updatedGroupIds=[],updateGroupExpandState=function(filterGroup){var groupId=filterGroup.getFilterGroupId();(!groupIds||agGridCommunity._.includes(groupIds,groupId))&&(expand&&filterGroup.isColumnGroup()?filterGroup.expand():filterGroup.collapse(),updatedGroupIds.push(groupId)),filterGroup.getChildren().forEach((function(child){child instanceof ToolPanelFilterGroupComp&&updateGroupExpandState(child)}))};if(this.filterGroupComps.forEach(updateGroupExpandState),this.onGroupExpanded(),groupIds){var unrecognisedGroupIds=groupIds.filter((function(groupId){return updatedGroupIds.indexOf(groupId)<0}));unrecognisedGroupIds.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",unrecognisedGroupIds)}},FiltersToolPanelListPanel.prototype.expandFilters=function(expand,colIds){var updatedColIds=[],updateGroupExpandState=function(filterComp){if(filterComp instanceof ToolPanelFilterGroupComp){var anyChildrenChanged_1=!1;return filterComp.getChildren().forEach((function(child){updateGroupExpandState(child)&&(expand?(filterComp.expand(),anyChildrenChanged_1=!0):filterComp.isColumnGroup()||filterComp.collapse())})),anyChildrenChanged_1}var colId=filterComp.getColumn().getColId(),updateFilterExpandState=!colIds||agGridCommunity._.includes(colIds,colId);return updateFilterExpandState&&(expand?filterComp.expand():filterComp.collapse(),updatedColIds.push(colId)),updateFilterExpandState};if(this.filterGroupComps.forEach(updateGroupExpandState),this.onGroupExpanded(),colIds){var unrecognisedColIds=colIds.filter((function(colId){return updatedColIds.indexOf(colId)<0}));unrecognisedColIds.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",unrecognisedColIds)}},FiltersToolPanelListPanel.prototype.onGroupExpanded=function(){this.fireExpandedEvent()},FiltersToolPanelListPanel.prototype.fireExpandedEvent=function(){var state,expandedCount=0,notExpandedCount=0,updateExpandCounts=function(filterGroup){filterGroup.isColumnGroup()&&(filterGroup.isExpanded()?expandedCount++:notExpandedCount++,filterGroup.getChildren().forEach((function(child){child instanceof ToolPanelFilterGroupComp&&updateExpandCounts(child)})))};this.filterGroupComps.forEach(updateExpandCounts),state=expandedCount>0&&notExpandedCount>0?EXPAND_STATE.INDETERMINATE:notExpandedCount>0?EXPAND_STATE.COLLAPSED:EXPAND_STATE.EXPANDED,this.dispatchEvent({type:"groupExpanded",state})},FiltersToolPanelListPanel.prototype.performFilterSearch=function(searchText){this.searchFilterText=agGridCommunity._.exists(searchText)?searchText.toLowerCase():null,this.searchFilters(this.searchFilterText)},FiltersToolPanelListPanel.prototype.searchFilters=function(searchFilter){var firstVisible,lastVisible,passesFilter=function(groupName){return!agGridCommunity._.exists(searchFilter)||-1!==groupName.toLowerCase().indexOf(searchFilter)},recursivelySearch=function(filterItem,parentPasses){if(!(filterItem instanceof ToolPanelFilterGroupComp))return passesFilter(filterItem.getColumnFilterName()||"");var children=filterItem.getChildren(),groupNamePasses=passesFilter(filterItem.getFilterGroupName()),alreadyPassed=parentPasses||groupNamePasses;if(alreadyPassed){filterItem.hideGroup(!1);for(var i=0;i<children.length;i++)recursivelySearch(children[i],alreadyPassed),filterItem.hideGroupItem(!1,i);return!0}var anyChildPasses=!1;return children.forEach((function(child,index){var childPasses=recursivelySearch(child,parentPasses);filterItem.hideGroupItem(!childPasses,index),childPasses&&(anyChildPasses=!0)})),filterItem.hideGroup(!anyChildPasses),anyChildPasses};this.filterGroupComps.forEach((function(filterGroup,idx){recursivelySearch(filterGroup,!1),void 0===firstVisible?filterGroup.containsCssClass("ag-hidden")||(firstVisible=idx,lastVisible=idx):filterGroup.containsCssClass("ag-hidden")||lastVisible===idx||(lastVisible=idx)})),this.setFirstAndLastVisible(firstVisible,lastVisible)},FiltersToolPanelListPanel.prototype.setFirstAndLastVisible=function(firstIdx,lastIdx){this.filterGroupComps.forEach((function(filterGroup,idx){filterGroup.removeCssClass("ag-first-group-visible"),filterGroup.removeCssClass("ag-last-group-visible"),idx===firstIdx&&filterGroup.addCssClass("ag-first-group-visible"),idx===lastIdx&&filterGroup.addCssClass("ag-last-group-visible")}))},FiltersToolPanelListPanel.prototype.refreshFilters=function(){this.filterGroupComps.forEach((function(filterGroupComp){return filterGroupComp.refreshFilters()}))},FiltersToolPanelListPanel.prototype.destroyFilters=function(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),agGridCommunity._.clearElement(this.getGui())},FiltersToolPanelListPanel.prototype.destroy=function(){this.destroyFilters(),_super.prototype.destroy.call(this)},FiltersToolPanelListPanel.TEMPLATE='<div class="ag-filter-list-panel"></div>',__decorate$B([agGridCommunity.Autowired("gridApi")],FiltersToolPanelListPanel.prototype,"gridApi",void 0),__decorate$B([agGridCommunity.Autowired("columnApi")],FiltersToolPanelListPanel.prototype,"columnApi",void 0),__decorate$B([agGridCommunity.Autowired("toolPanelColDefService")],FiltersToolPanelListPanel.prototype,"toolPanelColDefService",void 0),__decorate$B([agGridCommunity.Autowired("columnModel")],FiltersToolPanelListPanel.prototype,"columnModel",void 0),FiltersToolPanelListPanel}(agGridCommunity.Component),__extends$F=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$C=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FiltersToolPanel=function(_super){function FiltersToolPanel(){var _this=_super.call(this,FiltersToolPanel.TEMPLATE)||this;return _this.initialised=!1,_this.listenerDestroyFuncs=[],_this}return __extends$F(FiltersToolPanel,_super),FiltersToolPanel.prototype.init=function(params){this.initialised&&(this.listenerDestroyFuncs.forEach((function(func){return func()})),this.listenerDestroyFuncs=[]),this.initialised=!0;var defaultParams={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};agGridCommunity._.mergeDeep(defaultParams,params),this.params=defaultParams,this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);var hideExpand=this.params.suppressExpandAll,hideSearch=this.params.suppressFilterSearch;hideExpand&&hideSearch&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))},FiltersToolPanel.prototype.setVisible=function(visible){_super.prototype.setDisplayed.call(this,visible),visible&&!this.initialised&&this.init(this.params)},FiltersToolPanel.prototype.onExpandAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!0)},FiltersToolPanel.prototype.onCollapseAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!1)},FiltersToolPanel.prototype.onSearchChanged=function(event){this.filtersToolPanelListPanel.performFilterSearch(event.searchText)},FiltersToolPanel.prototype.setFilterLayout=function(colDefs){this.filtersToolPanelListPanel.setFiltersLayout(colDefs)},FiltersToolPanel.prototype.onGroupExpanded=function(event){this.filtersToolPanelHeaderPanel.setExpandState(event.state)},FiltersToolPanel.prototype.expandFilterGroups=function(groupIds){this.filtersToolPanelListPanel.expandFilterGroups(!0,groupIds)},FiltersToolPanel.prototype.collapseFilterGroups=function(groupIds){this.filtersToolPanelListPanel.expandFilterGroups(!1,groupIds)},FiltersToolPanel.prototype.expandFilters=function(colIds){this.filtersToolPanelListPanel.expandFilters(!0,colIds)},FiltersToolPanel.prototype.collapseFilters=function(colIds){this.filtersToolPanelListPanel.expandFilters(!1,colIds)},FiltersToolPanel.prototype.syncLayoutWithGrid=function(){this.filtersToolPanelListPanel.syncFilterLayout()},FiltersToolPanel.prototype.refresh=function(){this.init(this.params)},FiltersToolPanel.prototype.destroy=function(){_super.prototype.destroy.call(this)},FiltersToolPanel.TEMPLATE='<div class="ag-filter-toolpanel">\n            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>\n            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>\n         </div>',__decorate$C([agGridCommunity.RefSelector("filtersToolPanelHeaderPanel")],FiltersToolPanel.prototype,"filtersToolPanelHeaderPanel",void 0),__decorate$C([agGridCommunity.RefSelector("filtersToolPanelListPanel")],FiltersToolPanel.prototype,"filtersToolPanelListPanel",void 0),__decorate$C([agGridCommunity.Autowired("gridApi")],FiltersToolPanel.prototype,"gridApi",void 0),__decorate$C([agGridCommunity.Autowired("columnApi")],FiltersToolPanel.prototype,"columnApi",void 0),FiltersToolPanel}(agGridCommunity.Component),FiltersToolPanelModule={moduleName:agGridCommunity.ModuleNames.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:FiltersToolPanelHeaderPanel},{componentName:"AgFiltersToolPanelList",componentClass:FiltersToolPanelListPanel}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:FiltersToolPanel}],dependantModules:[SideBarModule,EnterpriseCoreModule]},BBox=function(){function BBox(x,y,width,height){this.x=x,this.y=y,this.width=width,this.height=height}return BBox.prototype.isValid=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},BBox.prototype.dilate=function(value){this.x-=value,this.y-=value,this.width+=2*value,this.height+=2*value},BBox.prototype.containsPoint=function(x,y){return x>=this.x&&x<=this.x+this.width&&y>=this.y&&y<=this.y+this.height},BBox.prototype.render=function(ctx,params){void 0===params&&(params=BBox.noParams),ctx.save(),params.resetTransform&&ctx.setTransform(1,0,0,1,0,0),ctx.strokeStyle=params.strokeStyle||"cyan",ctx.lineWidth=params.lineWidth||1,ctx.strokeRect(this.x,this.y,this.width,this.height),params.label&&(ctx.fillStyle=params.fillStyle||"black",ctx.textBaseline="bottom",ctx.fillText(params.label,this.x,this.y)),ctx.restore()},BBox.noParams={},BBox}(),__read$b=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},Matrix=function(){function Matrix(elements){void 0===elements&&(elements=[1,0,0,1,0,0]),this.elements=elements}return Matrix.prototype.setElements=function(elements){var e=this.elements;return e[0]=elements[0],e[1]=elements[1],e[2]=elements[2],e[3]=elements[3],e[4]=elements[4],e[5]=elements[5],this},Matrix.prototype.setIdentityElements=function(){var e=this.elements;return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,this},Object.defineProperty(Matrix.prototype,"identity",{get:function(){var e=this.elements;return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix.prototype,"a",{get:function(){return this.elements[0]},set:function(value){this.elements[0]=value},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix.prototype,"b",{get:function(){return this.elements[1]},set:function(value){this.elements[1]=value},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix.prototype,"c",{get:function(){return this.elements[2]},set:function(value){this.elements[2]=value},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix.prototype,"d",{get:function(){return this.elements[3]},set:function(value){this.elements[3]=value},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix.prototype,"e",{get:function(){return this.elements[4]},set:function(value){this.elements[4]=value},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix.prototype,"f",{get:function(){return this.elements[5]},set:function(value){this.elements[5]=value},enumerable:!0,configurable:!0}),Matrix.prototype.AxB=function(A,B,C){var _a=__read$b(A,6),m11=_a[0],m12=_a[1],m21=_a[2],m22=_a[3],m31=_a[4],m32=_a[5],_b=__read$b(B,6),o11=_b[0],o12=_b[1],o21=_b[2],o22=_b[3],o31=_b[4],o32=_b[5];(C=C||A)[0]=m11*o11+m21*o12,C[1]=m12*o11+m22*o12,C[2]=m11*o21+m21*o22,C[3]=m12*o21+m22*o22,C[4]=m11*o31+m21*o32+m31,C[5]=m12*o31+m22*o32+m32},Matrix.prototype.multiplySelf=function(other){return this.AxB(this.elements,other.elements),this},Matrix.prototype.multiply=function(other){var elements=new Array(6);return this.AxB(this.elements,other.elements,elements),new Matrix(elements)},Matrix.prototype.preMultiplySelf=function(other){return this.AxB(other.elements,this.elements,this.elements),this},Matrix.prototype.inverse=function(){var _a=__read$b(this.elements,6),a=_a[0],b=_a[1],c=_a[2],d=_a[3],e=_a[4],f=_a[5],rD=1/(a*d-b*c);return new Matrix([d*=rD,-(b*=rD),-(c*=rD),a*=rD,c*f-d*e,b*e-a*f])},Matrix.prototype.inverseTo=function(other){var _a=__read$b(this.elements,6),a=_a[0],b=_a[1],c=_a[2],d=_a[3],e=_a[4],f=_a[5],rD=1/(a*d-b*c);return a*=rD,b*=rD,c*=rD,d*=rD,other.setElements([d,-b,-c,a,c*f-d*e,b*e-a*f]),this},Matrix.prototype.invertSelf=function(){var elements=this.elements,_a=__read$b(elements,6),a=_a[0],b=_a[1],c=_a[2],d=_a[3],e=_a[4],f=_a[5],rD=1/(a*d-b*c);return a*=rD,b*=rD,c*=rD,d*=rD,elements[0]=d,elements[1]=-b,elements[2]=-c,elements[3]=a,elements[4]=c*f-d*e,elements[5]=b*e-a*f,this},Matrix.prototype.clone=function(){return new Matrix(this.elements.slice())},Matrix.prototype.transformPoint=function(x,y){var e=this.elements;return{x:x*e[0]+y*e[2]+e[4],y:x*e[1]+y*e[3]+e[5]}},Matrix.prototype.transformBBox=function(bbox,radius,target){void 0===radius&&(radius=0);var w,h,elements=this.elements,xx=elements[0],xy=elements[1],yx=elements[2],yy=elements[3],h_w=.5*bbox.width,h_h=.5*bbox.height,cx=bbox.x+h_w,cy=bbox.y+h_h;if(radius){h_w-=radius,h_h-=radius;var sx=Math.sqrt(xx*xx+yx*yx),sy=Math.sqrt(xy*xy+yy*yy);w=Math.abs(h_w*xx)+Math.abs(h_h*yx)+Math.abs(sx*radius),h=Math.abs(h_w*xy)+Math.abs(h_h*yy)+Math.abs(sy*radius)}else w=Math.abs(h_w*xx)+Math.abs(h_h*yx),h=Math.abs(h_w*xy)+Math.abs(h_h*yy);return target||(target=new BBox(0,0,0,0)),target.x=cx*xx+cy*yx+elements[4]-w,target.y=cx*xy+cy*yy+elements[5]-h,target.width=w+w,target.height=h+h,target},Matrix.prototype.toContext=function(ctx){if(!this.identity){var e=this.elements;ctx.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},Matrix.flyweight=function(elements){return elements?elements instanceof Matrix?Matrix.matrix.setElements(elements.elements):Matrix.matrix.setElements(elements):Matrix.matrix.setIdentityElements(),Matrix.matrix},Matrix.matrix=new Matrix,Matrix}();function createId(instance){var constructor=instance.constructor,className=constructor.className;if(!className)throw new Error("The "+constructor+" is missing the 'className' property.");return className+"-"+(constructor.id=(constructor.id||0)+1)}var PointerEvents,__read$c=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};!function(PointerEvents){PointerEvents[PointerEvents.All=0]="All",PointerEvents[PointerEvents.None=1]="None"}(PointerEvents||(PointerEvents={}));var Node=function(){function Node(){this.id=createId(this),this.tag=NaN,this.isContainerNode=!1,this._children=[],this.childSet={},this.matrix=new Matrix,this.inverseMatrix=new Matrix,this._dirtyTransform=!1,this._scalingX=1,this._scalingY=1,this._scalingCenterX=null,this._scalingCenterY=null,this._rotationCenterX=null,this._rotationCenterY=null,this._rotation=0,this._translationX=0,this._translationY=0,this._dirty=!0,this._visible=!0,this.pointerEvents=PointerEvents.All}return Node.isNode=function(node){return!!node&&void 0!==node.matrix},Node.prototype._setScene=function(value){this._scene=value;for(var children=this.children,n=children.length,i=0;i<n;i++)children[i]._setScene(value)},Object.defineProperty(Node.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Node.prototype._setParent=function(value){this._parent=value},Object.defineProperty(Node.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Node.prototype.countChildren=function(depth){if(void 0===depth&&(depth=Node.MAX_SAFE_INTEGER),depth<=0)return 0;for(var children=this.children,n=children.length,size=n,i=0;i<n;i++)size+=children[i].countChildren(depth-1);return size},Node.prototype.append=function(nodes){Node.isNode(nodes)&&(nodes=[nodes]);for(var n=nodes.length,i=0;i<n;i++){var node=nodes[i];if(node.parent)throw new Error(node+" already belongs to another parent: "+node.parent+".");if(node.scene)throw new Error(node+" already belongs a scene: "+node.scene+".");if(this.childSet[node.id])throw new Error("Duplicate "+node.constructor.name+" node: "+node);this._children.push(node),this.childSet[node.id]=!0,node._setParent(this),node._setScene(this.scene)}this.dirty=!0},Node.prototype.appendChild=function(node){if(node.parent)throw new Error(node+" already belongs to another parent: "+node.parent+".");if(node.scene)throw new Error(node+" already belongs to a scene: "+node.scene+".");if(this.childSet[node.id])throw new Error("Duplicate "+node.constructor.name+" node: "+node);return this._children.push(node),this.childSet[node.id]=!0,node._setParent(this),node._setScene(this.scene),this.dirty=!0,node},Node.prototype.removeChild=function(node){if(node.parent===this){var i=this.children.indexOf(node);if(i>=0)return this._children.splice(i,1),delete this.childSet[node.id],node._setParent(),node._setScene(),this.dirty=!0,node}throw new Error("The node to be removed is not a child of this node.")},Node.prototype.insertBefore=function(node,nextNode){var parent=node.parent;if(node.parent&&node.parent.removeChild(node),nextNode&&nextNode.parent===this){var i=this.children.indexOf(nextNode);if(!(i>=0))throw new Error(nextNode+" has "+parent+" as the parent, but is not in its list of children.");this._children.splice(i,0,node),this.childSet[node.id]=!0,node._setParent(this),node._setScene(this.scene),this.dirty=!0}else this.append(node);return node},Object.defineProperty(Node.prototype,"nextSibling",{get:function(){var parent=this.parent;if(parent){var children=parent.children,index=children.indexOf(this);if(index>=0&&index<=children.length-1)return children[index+1]}},enumerable:!0,configurable:!0}),Node.prototype.transformPoint=function(x,y){for(var matrix=Matrix.flyweight(this.matrix),parent=this.parent;parent;)matrix.preMultiplySelf(parent.matrix),parent=parent.parent;return matrix.invertSelf().transformPoint(x,y)},Node.prototype.inverseTransformPoint=function(x,y){for(var matrix=Matrix.flyweight(this.matrix),parent=this.parent;parent;)matrix.preMultiplySelf(parent.matrix),parent=parent.parent;return matrix.transformPoint(x,y)},Object.defineProperty(Node.prototype,"dirtyTransform",{get:function(){return this._dirtyTransform},set:function(value){this._dirtyTransform=value,value&&(this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"scalingX",{get:function(){return this._scalingX},set:function(value){this._scalingX!==value&&(this._scalingX=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"scalingY",{get:function(){return this._scalingY},set:function(value){this._scalingY!==value&&(this._scalingY=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"scalingCenterX",{get:function(){return this._scalingCenterX},set:function(value){this._scalingCenterX!==value&&(this._scalingCenterX=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"scalingCenterY",{get:function(){return this._scalingCenterY},set:function(value){this._scalingCenterY!==value&&(this._scalingCenterY=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"rotationCenterX",{get:function(){return this._rotationCenterX},set:function(value){this._rotationCenterX!==value&&(this._rotationCenterX=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"rotationCenterY",{get:function(){return this._rotationCenterY},set:function(value){this._rotationCenterY!==value&&(this._rotationCenterY=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"rotation",{get:function(){return this._rotation},set:function(value){this._rotation!==value&&(this._rotation=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"rotationDeg",{get:function(){return this.rotation/Math.PI*180},set:function(value){this.rotation=value/180*Math.PI},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"translationX",{get:function(){return this._translationX},set:function(value){this._translationX!==value&&(this._translationX=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"translationY",{get:function(){return this._translationY},set:function(value){this._translationY!==value&&(this._translationY=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Node.prototype.containsPoint=function(x,y){return!1},Node.prototype.pickNode=function(x,y){if(this.visible&&this.pointerEvents!==PointerEvents.None&&this.containsPoint(x,y)){var children=this.children;if(children.length)for(var i=children.length-1;i>=0;i--){var hit=children[i].pickNode(x,y);if(hit)return hit}else if(!this.isContainerNode)return this}},Node.prototype.computeBBox=function(){},Node.prototype.computeBBoxCenter=function(){var bbox=this.computeBBox&&this.computeBBox();return bbox?[bbox.x+.5*bbox.width,bbox.y+.5*bbox.height]:[0,0]},Node.prototype.computeTransformMatrix=function(){var scx,scy,_a=__read$c([0,0],2),bbcx=_a[0],bbcy=_a[1],sx=this.scalingX,sy=this.scalingY;1===sx&&1===sy?(scx=0,scy=0):(scx=null===this.scalingCenterX?bbcx:this.scalingCenterX,scy=null===this.scalingCenterY?bbcy:this.scalingCenterY);var rcx,rcy,r=this.rotation,cos=Math.cos(r),sin=Math.sin(r);0===r?(rcx=0,rcy=0):(rcx=null===this.rotationCenterX?bbcx:this.rotationCenterX,rcy=null===this.rotationCenterY?bbcy:this.rotationCenterY);var tx=this.translationX,ty=this.translationY,tx4=scx*(1-sx)-rcx,ty4=scy*(1-sy)-rcy;this.dirtyTransform=!1,this.matrix.setElements([cos*sx,sin*sx,-sin*sy,cos*sy,cos*tx4-sin*ty4+rcx+tx,sin*tx4+cos*ty4+rcy+ty]).inverseTo(this.inverseMatrix)},Object.defineProperty(Node.prototype,"dirty",{get:function(){return this._dirty},set:function(value){this._dirty=value,value&&(this.parent?this.parent.dirty=!0:this.scene&&(this.scene.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"visible",{get:function(){return this._visible},set:function(value){this._visible!==value&&(this._visible=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Node.MAX_SAFE_INTEGER=Math.pow(2,53)-1,Node}(),__extends$G=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Group=function(_super){function Group(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.isContainerNode=!0,_this._opacity=1,_this}return __extends$G(Group,_super),Object.defineProperty(Group.prototype,"opacity",{get:function(){return this._opacity},set:function(value){value=Math.min(1,Math.max(0,value)),this._opacity!==value&&(this._opacity=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Group.prototype.containsPoint=function(x,y){return!0},Group.prototype.computeBBox=function(){var left=1/0,right=-1/0,top=1/0,bottom=-1/0;return this.dirtyTransform&&this.computeTransformMatrix(),this.children.forEach((function(child){if(child.visible){var bbox=child.computeBBox();if(bbox){if(!(child instanceof Group)){child.dirtyTransform&&child.computeTransformMatrix();for(var matrix=Matrix.flyweight(child.matrix),parent_1=child.parent;parent_1;)matrix.preMultiplySelf(parent_1.matrix),parent_1=parent_1.parent;matrix.transformBBox(bbox,0,bbox)}var x=bbox.x,y=bbox.y;x<left&&(left=x),y<top&&(top=y),x+bbox.width>right&&(right=x+bbox.width),y+bbox.height>bottom&&(bottom=y+bbox.height)}}})),new BBox(left,top,right-left,bottom-top)},Group.prototype.render=function(ctx){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx);var children=this.children,n=children.length;ctx.globalAlpha*=this.opacity;for(var i=0;i<n;i++){var child=children[i];child.visible&&(ctx.save(),child.render(ctx),ctx.restore())}},Group.className="Group",Group}(Node);function chainObjects(parent,child){var obj=Object.create(parent);for(var prop in child)child.hasOwnProperty(prop)&&(obj[prop]=child[prop]);return obj}var __extends$H=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Shape=function(_super){function Shape(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.lastInstanceId=0,_this._fillOpacity=1,_this._strokeOpacity=1,_this._fill=Shape.defaultStyles.fill,_this._stroke=Shape.defaultStyles.stroke,_this._strokeWidth=Shape.defaultStyles.strokeWidth,_this._lineDash=Shape.defaultStyles.lineDash,_this._lineDashOffset=Shape.defaultStyles.lineDashOffset,_this._lineCap=Shape.defaultStyles.lineCap,_this._lineJoin=Shape.defaultStyles.lineJoin,_this._opacity=Shape.defaultStyles.opacity,_this.onShadowChange=function(){_this.dirty=!0},_this._fillShadow=Shape.defaultStyles.fillShadow,_this._strokeShadow=Shape.defaultStyles.strokeShadow,_this}return __extends$H(Shape,_super),Shape.createInstance=function(template){var shape=Object.create(template);return shape._setParent(void 0),shape.id=template.id+"-Instance-"+String(++template.lastInstanceId),shape},Shape.prototype.restoreOwnStyles=function(){for(var styles=this.constructor.defaultStyles,keys=Object.getOwnPropertyNames(styles),i=0,n=keys.length;i<n;i++){var key=keys[i];this[key]=styles[key]}},Shape.prototype.restoreAllStyles=function(){var styles=this.constructor.defaultStyles;for(var property in styles)this[property]=styles[property]},Shape.prototype.restoreOverriddenStyles=function(){var styles=this.constructor.defaultStyles,protoStyles=Object.getPrototypeOf(styles);for(var property in styles)styles.hasOwnProperty(property)&&protoStyles.hasOwnProperty(property)&&(this[property]=styles[property])},Object.defineProperty(Shape.prototype,"fillOpacity",{get:function(){return this._fillOpacity},set:function(value){this._fillOpacity!==value&&(this._fillOpacity=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"strokeOpacity",{get:function(){return this._strokeOpacity},set:function(value){this._strokeOpacity!==value&&(this._strokeOpacity=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"fill",{get:function(){return this._fill},set:function(value){this._fill!==value&&(this._fill=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"stroke",{get:function(){return this._stroke},set:function(value){this._stroke!==value&&(this._stroke=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(value){this._strokeWidth!==value&&(this._strokeWidth=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"alignment",{get:function(){return Math.floor(this.strokeWidth)%2/2},enumerable:!0,configurable:!0}),Shape.prototype.align=function(alignment,start,length){return null!=length?Math.floor(length)+Math.floor(start%1+length%1):Math.floor(start)+alignment},Object.defineProperty(Shape.prototype,"lineDash",{get:function(){return this._lineDash},set:function(value){var oldValue=this._lineDash;if(oldValue!==value){if(oldValue&&value&&oldValue.length===value.length){for(var identical=!0,n=value.length,i=0;i<n;i++)if(oldValue[i]!==value[i]){identical=!1;break}if(identical)return}this._lineDash=value,this.dirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"lineDashOffset",{get:function(){return this._lineDashOffset},set:function(value){this._lineDashOffset!==value&&(this._lineDashOffset=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"lineCap",{get:function(){return this._lineCap},set:function(value){this._lineCap!==value&&(this._lineCap=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(value){this._lineJoin!==value&&(this._lineJoin=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"opacity",{get:function(){return this._opacity},set:function(value){value=Math.min(1,Math.max(0,value)),this._opacity!==value&&(this._opacity=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"fillShadow",{get:function(){return this._fillShadow},set:function(value){var oldValue=this._fillShadow;oldValue!==value&&(oldValue&&oldValue.removeEventListener("change",this.onShadowChange),value&&value.addEventListener("change",this.onShadowChange),this._fillShadow=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"strokeShadow",{get:function(){return this._strokeShadow},set:function(value){var oldValue=this._strokeShadow;oldValue!==value&&(oldValue&&oldValue.removeEventListener("change",this.onShadowChange),value&&value.addEventListener("change",this.onShadowChange),this._strokeShadow=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Shape.prototype.fillStroke=function(ctx){if(this.scene){var pixelRatio=this.scene.canvas.pixelRatio||1,globalAlpha=ctx.globalAlpha;if(this.fill){ctx.fillStyle=this.fill,ctx.globalAlpha=globalAlpha*this.opacity*this.fillOpacity;var fillShadow=this.fillShadow;fillShadow&&fillShadow.enabled&&(ctx.shadowColor=fillShadow.color,ctx.shadowOffsetX=fillShadow.xOffset*pixelRatio,ctx.shadowOffsetY=fillShadow.yOffset*pixelRatio,ctx.shadowBlur=fillShadow.blur*pixelRatio),ctx.fill()}if(ctx.shadowColor="rgba(0, 0, 0, 0)",this.stroke&&this.strokeWidth){ctx.strokeStyle=this.stroke,ctx.globalAlpha=globalAlpha*this.opacity*this.strokeOpacity,ctx.lineWidth=this.strokeWidth,this.lineDash&&ctx.setLineDash(this.lineDash),this.lineDashOffset&&(ctx.lineDashOffset=this.lineDashOffset),this.lineCap&&(ctx.lineCap=this.lineCap),this.lineJoin&&(ctx.lineJoin=this.lineJoin);var strokeShadow=this.strokeShadow;strokeShadow&&strokeShadow.enabled&&(ctx.shadowColor=strokeShadow.color,ctx.shadowOffsetX=strokeShadow.xOffset*pixelRatio,ctx.shadowOffsetY=strokeShadow.yOffset*pixelRatio,ctx.shadowBlur=strokeShadow.blur*pixelRatio),ctx.stroke()}}},Shape.prototype.containsPoint=function(x,y){return this.isPointInPath(x,y)},Shape.defaultStyles=chainObjects({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0,strokeShadow:void 0}),Shape}(Node),sign=Math.sign?Math.sign:function(x){return 0===(x=+x)||isNaN(x)?x:x>0?1:-1};function cubicRoots(a,b,c,d){if(0===a)return function quadraticRoots(a,b,c){if(0===a)return function linearRoot(a,b){var t=-b/a;return 0!==a&&t>=0&&t<=1?[t]:[]}(b,c);var D=b*b-4*a*c,roots=[];if(0===D){var t=-b/(2*a);t>=0&&t<=1&&roots.push(t)}else if(D>0){var rD=Math.sqrt(D),t1=(-b-rD)/(2*a),t2=(-b+rD)/(2*a);t1>=0&&t1<=1&&roots.push(t1),t2>=0&&t2<=1&&roots.push(t2)}return roots}(b,c,d);var A=b/a,B=c/a,Q=(3*B-A*A)/9,R=(9*A*B-27*(d/a)-2*A*A*A)/54,D=Q*Q*Q+R*R,third=1/3,roots=[];if(D>=0){var rD=Math.sqrt(D),S=sign(R+rD)*Math.pow(Math.abs(R+rD),third),T=sign(R-rD)*Math.pow(Math.abs(R-rD),third),Im=Math.abs(Math.sqrt(3)*(S-T)/2),t=-third*A+(S+T);if(t>=0&&t<=1&&roots.push(t),0===Im){var t_1=-third*A-(S+T)/2;t_1>=0&&t_1<=1&&roots.push(t_1)}}else{var theta=Math.acos(R/Math.sqrt(-Q*Q*Q)),thirdA=third*A,twoSqrtQ=2*Math.sqrt(-Q),t1=twoSqrtQ*Math.cos(third*theta)-thirdA,t2=twoSqrtQ*Math.cos(third*(theta+2*Math.PI))-thirdA,t3=twoSqrtQ*Math.cos(third*(theta+4*Math.PI))-thirdA;t1>=0&&t1<=1&&roots.push(t1),t2>=0&&t2<=1&&roots.push(t2),t3>=0&&t3<=1&&roots.push(t3)}return roots}function segmentIntersection(ax1,ay1,ax2,ay2,bx1,by1,bx2,by2){var d=(ax2-ax1)*(by2-by1)-(ay2-ay1)*(bx2-bx1);if(0===d)return null;var ua=((bx2-bx1)*(ay1-by1)-(ax1-bx1)*(by2-by1))/d,ub=((ax2-ax1)*(ay1-by1)-(ay2-ay1)*(ax1-bx1))/d;return ua>=0&&ua<=1&&ub>=0&&ub<=1?{x:ax1+ua*(ax2-ax1),y:ay1+ua*(ay2-ay1)}:null}function cubicSegmentIntersections(px1,py1,px2,py2,px3,py3,px4,py4,x1,y1,x2,y2){for(var intersections=[],A=y1-y2,B=x2-x1,C=x1*(y2-y1)-y1*(x2-x1),bx=bezierCoefficients(px1,px2,px3,px4),by=bezierCoefficients(py1,py2,py3,py4),roots=cubicRoots(A*bx[0]+B*by[0],A*bx[1]+B*by[1],A*bx[2]+B*by[2],A*bx[3]+B*by[3]+C),i=0;i<roots.length;i++){var t=roots[i],tt=t*t,ttt=t*tt,x=bx[0]*ttt+bx[1]*tt+bx[2]*t+bx[3],y=by[0]*ttt+by[1]*tt+by[2]*t+by[3],s=void 0;(s=x1!==x2?(x-x1)/(x2-x1):(y-y1)/(y2-y1))>=0&&s<=1&&intersections.push({x,y})}return intersections}function bezierCoefficients(P1,P2,P3,P4){return[3*P2-P1-3*P3+P4,3*P1-6*P2+3*P3,-3*P1+3*P2,P1]}var Path2D=function(){function Path2D(){this.commands=[],this.params=[],this._closedPath=!1}return Path2D.prototype.moveTo=function(x,y){this.xy?(this.xy[0]=x,this.xy[1]=y):this.xy=[x,y],this.commands.push("M"),this.params.push(x,y)},Path2D.prototype.lineTo=function(x,y){this.xy?(this.commands.push("L"),this.params.push(x,y),this.xy[0]=x,this.xy[1]=y):this.moveTo(x,y)},Path2D.prototype.rect=function(x,y,width,height){this.moveTo(x,y),this.lineTo(x+width,y),this.lineTo(x+width,y+height),this.lineTo(x,y+height),this.closePath()},Path2D.prototype.arcTo=function(rx,ry,rotation,fA,fS,x2,y2){var xy=this.xy;if(xy){rx<0&&(rx=-rx),ry<0&&(ry=-ry);var x1=xy[0],y1=xy[1],hdx=(x1-x2)/2,hdy=(y1-y2)/2,sinPhi=Math.sin(rotation),cosPhi=Math.cos(rotation),xp=cosPhi*hdx+sinPhi*hdy,yp=-sinPhi*hdx+cosPhi*hdy,ratX=xp/rx,ratY=yp/ry,lambda=ratX*ratX+ratY*ratY,cx=(x1+x2)/2,cy=(y1+y2)/2,cpx=0,cpy=0;lambda>=1?(rx*=lambda=Math.sqrt(lambda),ry*=lambda):(lambda=Math.sqrt(1/lambda-1),fA===fS&&(lambda=-lambda),cx+=cosPhi*(cpx=lambda*rx*ratY)-sinPhi*(cpy=-lambda*ry*ratX),cy+=sinPhi*cpx+cosPhi*cpy);var theta1=Math.atan2((yp-cpy)/ry,(xp-cpx)/rx),deltaTheta=Math.atan2((-yp-cpy)/ry,(-xp-cpx)/rx)-theta1;this.cubicArc(cx,cy,rx,ry,rotation,theta1,theta1+deltaTheta,1-fS)}},Path2D.cubicArc=function(commands,params,cx,cy,rx,ry,phi,theta1,theta2,anticlockwise){if(anticlockwise){var temp=theta1;theta1=theta2,theta2=temp}var start=params.length,f90=.5522847498307935,sinTheta1=Math.sin(theta1),cosTheta1=Math.cos(theta1),sinPhi=Math.sin(phi),cosPhi=Math.cos(phi),rightAngle=Math.PI/2,xx=cosPhi*cosTheta1*rx-sinPhi*sinTheta1*ry,yx=sinPhi*cosTheta1*rx+cosPhi*sinTheta1*ry,xy=-cosPhi*sinTheta1*rx-sinPhi*cosTheta1*ry,yy=-sinPhi*sinTheta1*rx+cosPhi*cosTheta1*ry;for((theta2-=theta1)<0&&(theta2+=2*Math.PI),commands.push("M"),params.push(xx+cx,yx+cy);theta2>=rightAngle;){theta2-=rightAngle,commands.push("C");var lastX=xy+cx;params.push(xx+xy*f90+cx,yx+yy*f90+cy,xx*f90+xy+cx,yx*f90+yy+cy,Math.abs(lastX)<1e-8?0:lastX,yy+cy);temp=xx;xx=xy,xy=-temp,temp=yx,yx=yy,yy=-temp}if(theta2){var f=4/3*Math.tan(theta2/4),sinPhi2=Math.sin(theta2),cosPhi2=Math.cos(theta2),C2x=cosPhi2+f*sinPhi2,C2y=sinPhi2-f*cosPhi2;commands.push("C");lastX=xx*cosPhi2+xy*sinPhi2+cx;params.push(xx+xy*f+cx,yx+yy*f+cy,xx*C2x+xy*C2y+cx,yx*C2x+yy*C2y+cy,Math.abs(lastX)<1e-8?0:lastX,yx*cosPhi2+yy*sinPhi2+cy)}if(anticlockwise)for(var i=start,j=params.length-2;i<j;i+=2,j-=2){temp=params[i];params[i]=params[j],params[j]=temp,temp=params[i+1],params[i+1]=params[j+1],params[j+1]=temp}},Path2D.prototype.cubicArc=function(cx,cy,rx,ry,phi,theta1,theta2,anticlockwise){var commands=this.commands,params=this.params,start=commands.length;Path2D.cubicArc(commands,params,cx,cy,rx,ry,phi,theta1,theta2,anticlockwise);var x=params[params.length-2],y=params[params.length-1];this.xy?(commands[start]="L",this.xy[0]=x,this.xy[1]=y):this.xy=[x,y]},Path2D.prototype.deCasteljau=function(points,t){var n=points.length;if(n<2||n%2==1)throw new Error("Fewer than two points or not an even count.");if(2===n||0===t)return points.slice(0,2);if(1===t)return points.slice(-2);for(var newPoints=[],last=n-2,i=0;i<last;i+=2)newPoints.push((1-t)*points[i]+t*points[i+2],(1-t)*points[i+1]+t*points[i+3]);return this.deCasteljau(newPoints,t)},Path2D.prototype.approximateCurve=function(points,n){var xy=this.deCasteljau(points,0);this.moveTo(xy[0],xy[1]);for(var step=1/n,t=step;t<=1;t+=step){var xy_1=this.deCasteljau(points,t);this.lineTo(xy_1[0],xy_1[1])}},Path2D.prototype.quadraticCurveTo=function(cx,cy,x,y){this.xy||this.moveTo(cx,cy),this.cubicCurveTo((this.xy[0]+2*cx)/3,(this.xy[1]+2*cy)/3,(2*cx+x)/3,(2*cy+y)/3,x,y)},Path2D.prototype.cubicCurveTo=function(cx1,cy1,cx2,cy2,x,y){this.xy||this.moveTo(cx1,cy1),this.commands.push("C"),this.params.push(cx1,cy1,cx2,cy2,x,y),this.xy[0]=x,this.xy[1]=y},Object.defineProperty(Path2D.prototype,"closedPath",{get:function(){return this._closedPath},enumerable:!0,configurable:!0}),Path2D.prototype.closePath=function(){this.xy&&(this.xy=void 0,this.commands.push("Z"),this._closedPath=!0)},Path2D.prototype.clear=function(){this.commands.length=0,this.params.length=0,this.xy=void 0,this._closedPath=!1},Path2D.prototype.isPointInPath=function(x,y){for(var commands=this.commands,params=this.params,cn=commands.length,ox=-1e4,oy=-1e4,sx=NaN,sy=NaN,px=0,py=0,intersectionCount=0,ci=0,pi=0;ci<cn;ci++)switch(commands[ci]){case"M":isNaN(sx)||segmentIntersection(sx,sy,px,py,ox,oy,x,y)&&intersectionCount++,sx=px=params[pi++],sy=py=params[pi++];break;case"L":segmentIntersection(px,py,px=params[pi++],py=params[pi++],ox,oy,x,y)&&intersectionCount++;break;case"C":intersectionCount+=cubicSegmentIntersections(px,py,params[pi++],params[pi++],params[pi++],params[pi++],px=params[pi++],py=params[pi++],ox,oy,x,y).length;break;case"Z":isNaN(sx)||segmentIntersection(sx,sy,px,py,ox,oy,x,y)&&intersectionCount++}return intersectionCount%2==1},Path2D.fromString=function(value){var path=new Path2D;return path.setFromString(value),path},Path2D.parseSvgPath=function(value){return value.trim().split(Path2D.splitCommandsRe).map((function(part){var strParams=part.match(Path2D.matchParamsRe);return{command:part.substr(0,1),params:strParams?strParams.map(parseFloat):[]}}))},Path2D.prettifySvgPath=function(value){return Path2D.parseSvgPath(value).map((function(d){return d.command+d.params.join(",")})).join("\n")},Path2D.prototype.setFromString=function(value){var x,y,cpx,cpy,lastCommand,_this=this;function checkQuadraticCP(){lastCommand.match(Path2D.quadraticCommandRe)||(cpx=x,cpy=y)}function checkCubicCP(){lastCommand.match(Path2D.cubicCommandRe)||(cpx=x,cpy=y)}this.clear(),Path2D.parseSvgPath(value).forEach((function(part){var p=part.params,n=p.length,i=0;switch(part.command){case"M":for(_this.moveTo(x=p[i++],y=p[i++]);i<n;)_this.lineTo(x=p[i++],y=p[i++]);break;case"m":for(_this.moveTo(x+=p[i++],y+=p[i++]);i<n;)_this.lineTo(x+=p[i++],y+=p[i++]);break;case"L":for(;i<n;)_this.lineTo(x=p[i++],y=p[i++]);break;case"l":for(;i<n;)_this.lineTo(x+=p[i++],y+=p[i++]);break;case"C":for(;i<n;)_this.cubicCurveTo(p[i++],p[i++],cpx=p[i++],cpy=p[i++],x=p[i++],y=p[i++]);break;case"c":for(;i<n;)_this.cubicCurveTo(x+p[i++],y+p[i++],cpx=x+p[i++],cpy=y+p[i++],x+=p[i++],y+=p[i++]);break;case"S":for(checkCubicCP();i<n;)_this.cubicCurveTo(x+x-cpx,y+y-cpy,cpx=p[i++],cpy=p[i++],x=p[i++],y=p[i++]);break;case"s":for(checkCubicCP();i<n;)_this.cubicCurveTo(x+x-cpx,y+y-cpy,cpx=x+p[i++],cpy=y+p[i++],x+=p[i++],y+=p[i++]);break;case"Q":for(;i<n;)_this.quadraticCurveTo(cpx=p[i++],cpy=p[i++],x=p[i++],y=p[i++]);break;case"q":for(;i<n;)_this.quadraticCurveTo(cpx=x+p[i++],cpy=y+p[i++],x+=p[i++],y+=p[i++]);break;case"T":for(checkQuadraticCP();i<n;)_this.quadraticCurveTo(cpx=x+x-cpx,cpy=y+y-cpy,x=p[i++],y=p[i++]);break;case"t":for(checkQuadraticCP();i<n;)_this.quadraticCurveTo(cpx=x+x-cpx,cpy=y+y-cpy,x+=p[i++],y+=p[i++]);break;case"A":for(;i<n;)_this.arcTo(p[i++],p[i++],p[i++]*Math.PI/180,p[i++],p[i++],x=p[i++],y=p[i++]);break;case"a":for(;i<n;)_this.arcTo(p[i++],p[i++],p[i++]*Math.PI/180,p[i++],p[i++],x+=p[i++],y+=p[i++]);break;case"Z":case"z":_this.closePath();break;case"H":for(;i<n;)_this.lineTo(x=p[i++],y);break;case"h":for(;i<n;)_this.lineTo(x+=p[i++],y);break;case"V":for(;i<n;)_this.lineTo(x,y=p[i++]);break;case"v":for(;i<n;)_this.lineTo(x,y+=p[i++])}lastCommand=part.command}))},Path2D.prototype.toString=function(){for(var c=this.commands,p=this.params,cn=c.length,out=[],ci=0,pi=0;ci<cn;ci++)switch(c[ci]){case"M":out.push("M"+p[pi++]+","+p[pi++]);break;case"L":out.push("L"+p[pi++]+","+p[pi++]);break;case"C":out.push("C"+p[pi++]+","+p[pi++]+" "+p[pi++]+","+p[pi++]+" "+p[pi++]+","+p[pi++]);break;case"Z":out.push("Z")}return out.join("")},Path2D.prototype.toPrettyString=function(){return Path2D.prettifySvgPath(this.toString())},Path2D.prototype.toSvg=function(){return Path2D.xmlDeclaration+'\n<svg width="100%" height="100%" viewBox="0 0 50 50" version="1.1" xmlns="'+Path2D.xmlns+'">\n    <path d="'+this.toString()+'" style="fill:none;stroke:#000;stroke-width:0.5;"/>\n</svg>'},Path2D.prototype.toDebugSvg=function(){var d=Path2D.prettifySvgPath(this.toString());return Path2D.xmlDeclaration+'\n<svg width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="'+Path2D.xmlns+'">\n    <path d="'+d+'" style="fill:none;stroke:#000;stroke-width:0.5;"/>\n</svg>'},Path2D.prototype.toCubicPaths=function(){var path,sx,sy,px,py,paths=[],params=this.params,i=0;return this.commands.forEach((function(command){switch(command){case"M":path=[sx=px=params[i++],sy=py=params[i++]],paths.push(path);break;case"L":var x=params[i++],y=params[i++];path.push((px+px+x)/3,(py+py+y)/3,(px+x+x)/3,(py+y+y)/3,px=x,py=y);break;case"C":path.push(params[i++],params[i++],params[i++],params[i++],px=params[i++],py=params[i++]);break;case"Z":path.push((px+px+sx)/3,(py+py+sy)/3,(px+sx+sx)/3,(py+sy+sy)/3,px=sx,py=sy)}})),paths},Path2D.cubicPathToString=function(path){var n=path.length;if(!(n%2==0&&(n/2-1)/2>=1))throw new Error("Invalid path.");return"M"+path.slice(0,2).join(",")+"C"+path.slice(2).join(",")},Path2D.splitCommandsRe=/(?=[AaCcHhLlMmQqSsTtVvZz])/g,Path2D.matchParamsRe=/-?[0-9]*\.?\d+/g,Path2D.quadraticCommandRe=/[QqTt]/,Path2D.cubicCommandRe=/[CcSs]/,Path2D.xmlDeclaration='<?xml version="1.0" encoding="UTF-8"?>',Path2D.xmlns="http://www.w3.org/2000/svg",Path2D}(),__extends$I=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Path=function(_super){function Path(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.path=new Path2D,_this._dirtyPath=!0,_this._svgPath="",_this}return __extends$I(Path,_super),Object.defineProperty(Path.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(value){this._dirtyPath!==value&&(this._dirtyPath=value,value&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(Path.prototype,"svgPath",{get:function(){return this._svgPath},set:function(value){this._svgPath!==value&&(this._svgPath=value,this.path.setFromString(value),this.dirty=!0)},enumerable:!0,configurable:!0}),Path.prototype.isPointInPath=function(x,y){var point=this.transformPoint(x,y);return this.path.closedPath&&this.path.isPointInPath(point.x,point.y)},Path.prototype.isPointInStroke=function(x,y){return!1},Path.prototype.updatePath=function(){},Path.prototype.render=function(ctx){var scene=this.scene;this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx),this.dirtyPath&&(this.updatePath(),this.dirtyPath=!1),scene.appendPath(this.path),this.fillStroke(ctx),this.dirty=!1},Path.className="Path",Path}(Shape),__extends$J=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Line=function(_super){function Line(){var _this=_super.call(this)||this;return _this._x1=0,_this._y1=0,_this._x2=0,_this._y2=0,_this.restoreOwnStyles(),_this}return __extends$J(Line,_super),Object.defineProperty(Line.prototype,"x1",{get:function(){return this._x1},set:function(value){this._x1!==value&&(this._x1=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Line.prototype,"y1",{get:function(){return this._y1},set:function(value){this._y1!==value&&(this._y1=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Line.prototype,"x2",{get:function(){return this._x2},set:function(value){this._x2!==value&&(this._x2=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Line.prototype,"y2",{get:function(){return this._y2},set:function(value){this._y2!==value&&(this._y2=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Line.prototype.computeBBox=function(){return new BBox(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},Line.prototype.isPointInPath=function(x,y){return!1},Line.prototype.isPointInStroke=function(x,y){return!1},Line.prototype.render=function(ctx){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx);var x1=this.x1,y1=this.y1,x2=this.x2,y2=this.y2;if(x1===x2){var x=Math.round(x1)+Math.floor(this.strokeWidth)%2/2;x1=x,x2=x}else if(y1===y2){var y=Math.round(y1)+Math.floor(this.strokeWidth)%2/2;y1=y,y2=y}ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),this.fillStroke(ctx),this.dirty=!1},Line.className="Line",Line.defaultStyles=chainObjects(Shape.defaultStyles,{fill:void 0,strokeWidth:1}),Line}(Shape),__read$d=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},BandScale=function(){function BandScale(){this.type="band",this.index=new Map,this.ordinalRange=[],this._domain=[],this._range=[0,1],this._bandwidth=1,this._paddingInner=0,this._paddingOuter=0,this._round=!1,this._align=.5}return Object.defineProperty(BandScale.prototype,"domain",{get:function(){return this._domain},set:function(values){var domain=this._domain;domain.length=0,this.index=new Map;var index=this.index;values.forEach((function(value){void 0===index.get(value)&&index.set(value,domain.push(value)-1)})),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(BandScale.prototype,"range",{get:function(){return this._range},set:function(values){this._range[0]=values[0],this._range[1]=values[1],this.rescale()},enumerable:!0,configurable:!0}),BandScale.prototype.ticks=function(){return this._domain},BandScale.prototype.convert=function(d){var i=this.index.get(d);if(void 0===i)return NaN;var r=this.ordinalRange[i];return void 0===r?NaN:r},Object.defineProperty(BandScale.prototype,"bandwidth",{get:function(){return this._bandwidth},enumerable:!0,configurable:!0}),Object.defineProperty(BandScale.prototype,"padding",{get:function(){return this._paddingInner},set:function(value){value=Math.max(0,Math.min(1,value)),this._paddingInner=value,this._paddingOuter=value,this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(BandScale.prototype,"paddingInner",{get:function(){return this._paddingInner},set:function(value){this._paddingInner=Math.max(0,Math.min(1,value)),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(BandScale.prototype,"paddingOuter",{get:function(){return this._paddingOuter},set:function(value){this._paddingOuter=Math.max(0,Math.min(1,value)),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(BandScale.prototype,"round",{get:function(){return this._round},set:function(value){this._round=value,this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(BandScale.prototype,"align",{get:function(){return this._align},set:function(value){this._align=Math.max(0,Math.min(1,value)),this.rescale()},enumerable:!0,configurable:!0}),BandScale.prototype.rescale=function(){var _a,n=this._domain.length;if(n){var _b=__read$d(this._range,2),a=_b[0],b=_b[1],reversed=b<a;reversed&&(a=(_a=__read$d([b,a],2))[0],b=_a[1]);var step=(b-a)/Math.max(1,n-this._paddingInner+2*this._paddingOuter);this._round&&(step=Math.floor(step)),a+=(b-a-step*(n-this._paddingInner))*this._align,this._bandwidth=step*(1-this._paddingInner),this._round&&(a=Math.round(a),this._bandwidth=Math.round(this._bandwidth));for(var values=[],i=0;i<n;i++)values.push(a+step*i);this.ordinalRange=reversed?values.reverse():values}},BandScale}(),EnterNode=function(){function EnterNode(parent,datum){this.next=null,this.scene=parent.scene,this.parent=parent,this.datum=datum}return EnterNode.prototype.appendChild=function(node){if(null===this.next)return this.parent.insertBefore(node,null);if(!Node.isNode(this.next))throw new Error(this.next+" is not a Node.");return this.parent.insertBefore(node,this.next)},EnterNode.prototype.insertBefore=function(node,nextNode){return this.parent.insertBefore(node,nextNode)},EnterNode}(),Selection=function(){function Selection(groups,parents){this.groups=groups,this.parents=parents}return Selection.select=function(node){return new Selection([["function"==typeof node?node():node]],[void 0])},Selection.selectAll=function(nodes){return new Selection([null==nodes?[]:nodes],[void 0])},Selection.prototype.append=function(Class){return this.select((function(node){return node.appendChild(new Class)}))},Selection.prototype.appendFn=function(creator){return this.select((function(node,data,index,group){return node.appendChild(creator(node,data,index,group))}))},Selection.prototype.select=function(selector){for(var groups=this.groups,numGroups=groups.length,subgroups=[],j=0;j<numGroups;j++)for(var group=groups[j],groupSize=group.length,subgroup=subgroups[j]=new Array(groupSize),i=0;i<groupSize;i++){var node=group[i];if(node){var subnode=selector(node,node.datum,i,group);subnode&&(subnode.datum=node.datum),subgroup[i]=subnode}}return new Selection(subgroups,this.parents)},Selection.prototype.selectByClass=function(Class){return this.select((function(node){if(Node.isNode(node))for(var children=node.children,n=children.length,i=0;i<n;i++){var child=children[i];if(child instanceof Class)return child}}))},Selection.prototype.selectByTag=function(tag){return this.select((function(node){if(Node.isNode(node))for(var children=node.children,n=children.length,i=0;i<n;i++){var child=children[i];if(child.tag===tag)return child}}))},Selection.prototype.selectAllByClass=function(Class){return this.selectAll((function(node){var nodes=[];if(Node.isNode(node))for(var children=node.children,n=children.length,i=0;i<n;i++){var child=children[i];child instanceof Class&&nodes.push(child)}return nodes}))},Selection.prototype.selectAllByTag=function(tag){return this.selectAll((function(node){var nodes=[];if(Node.isNode(node))for(var children=node.children,n=children.length,i=0;i<n;i++){var child=children[i];child.tag===tag&&nodes.push(child)}return nodes}))},Selection.prototype.selectNone=function(){return[]},Selection.prototype.selectAll=function(selectorAll){selectorAll||(selectorAll=this.selectNone);for(var subgroups=[],parents=[],groups=this.groups,groupCount=groups.length,j=0;j<groupCount;j++)for(var group=groups[j],groupLength=group.length,i=0;i<groupLength;i++){var node=group[i];node&&(subgroups.push(selectorAll(node,node.datum,i,group)),parents.push(node))}return new Selection(subgroups,parents)},Selection.prototype.each=function(cb){for(var groups=this.groups,numGroups=groups.length,j=0;j<numGroups;j++)for(var group=groups[j],groupSize=group.length,i=0;i<groupSize;i++){var node=group[i];node&&cb(node,node.datum,i,group)}return this},Selection.prototype.remove=function(){return this.each((function(node){if(Node.isNode(node)){var parent_1=node.parent;parent_1&&parent_1.removeChild(node)}}))},Selection.prototype.merge=function(other){for(var groups0=this.groups,groups1=other.groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;j++)for(var group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;i++){var node=group0[i]||group1[i];merge[i]=node||void 0}for(;j<m0;j++)merges[j]=groups0[j];return new Selection(merges,this.parents)},Selection.prototype.node=function(){for(var groups=this.groups,numGroups=groups.length,j=0;j<numGroups;j++)for(var group=groups[j],groupSize=group.length,i=0;i<groupSize;i++){var node=group[i];if(node)return node}return null},Selection.prototype.attr=function(name,value){return this.each((function(node){node[name]=value})),this},Selection.prototype.attrFn=function(name,value){return this.each((function(node,datum,index,group){node[name]=value(node,datum,index,group)})),this},Selection.prototype.call=function(cb){return cb(this),this},Object.defineProperty(Selection.prototype,"size",{get:function(){var size=0;return this.each((function(){return size++})),size},enumerable:!0,configurable:!0}),Object.defineProperty(Selection.prototype,"data",{get:function(){var data=[];return this.each((function(_,datum){return data.push(datum)})),data},enumerable:!0,configurable:!0}),Object.defineProperty(Selection.prototype,"enter",{get:function(){return new Selection(this.enterGroups?this.enterGroups:[[]],this.parents)},enumerable:!0,configurable:!0}),Object.defineProperty(Selection.prototype,"exit",{get:function(){return new Selection(this.exitGroups?this.exitGroups:[[]],this.parents)},enumerable:!0,configurable:!0}),Selection.prototype.setDatum=function(value){return this.each((function(node){node.datum=value}))},Object.defineProperty(Selection.prototype,"datum",{get:function(){var node=this.node();return node?node.datum:null},enumerable:!0,configurable:!0}),Selection.prototype.setData=function(values,key){if("function"!=typeof values){var data_1=values;values=function(){return data_1}}for(var groups=this.groups,parents=this.parents,numGroups=groups.length,updateGroups=new Array(numGroups),enterGroups=new Array(numGroups),exitGroups=new Array(numGroups),j=0;j<numGroups;j++){var group=groups[j],parent_2=parents[j];if(!parent_2)throw new Error("Group #"+j+" has no parent: "+group);var groupSize=group.length,data=values(parent_2,parent_2.datum,j,parents),dataSize=data.length,enterGroup=enterGroups[j]=new Array(dataSize),updateGroup=updateGroups[j]=new Array(dataSize),exitGroup=exitGroups[j]=new Array(groupSize);key?this.bindKey(parent_2,group,enterGroup,updateGroup,exitGroup,data,key):this.bindIndex(parent_2,group,enterGroup,updateGroup,exitGroup,data);for(var i0=0,i1=0;i0<dataSize;i0++){var previous=enterGroup[i0];if(previous){i0>=i1&&(i1=i0+1);for(var next=void 0;!(next=updateGroup[i1])&&i1<dataSize;)i1++;previous.next=next||null}}}var result=new Selection(updateGroups,parents);return result.enterGroups=enterGroups,result.exitGroups=exitGroups,result},Selection.prototype.bindIndex=function(parent,group,enter,update,exit,data){for(var groupSize=group.length,dataSize=data.length,i=0;i<dataSize;i++){(node=group[i])?(node.datum=data[i],update[i]=node):enter[i]=new EnterNode(parent,data[i])}for(;i<groupSize;i++){var node;(node=group[i])&&(exit[i]=node)}},Selection.prototype.bindKey=function(parent,group,enter,update,exit,data,key){for(var groupSize=group.length,dataSize=data.length,keyValues=new Array(groupSize),nodeByKeyValue={},i=0;i<groupSize;i++){if(node=group[i])(keyValue=keyValues[i]=Selection.keyPrefix+key(node,node.datum,i,group))in nodeByKeyValue?exit[i]=node:nodeByKeyValue[keyValue]=node}for(i=0;i<dataSize;i++){var keyValue;(node=nodeByKeyValue[keyValue=Selection.keyPrefix+key(parent,data[i],i,data)])?(update[i]=node,node.datum=data[i],nodeByKeyValue[keyValue]=void 0):enter[i]=new EnterNode(parent,data[i])}for(i=0;i<groupSize;i++){var node;(node=group[i])&&nodeByKeyValue[keyValues[i]]===node&&(exit[i]=node)}},Selection.keyPrefix="$",Selection}(),HdpiCanvas=function(){function HdpiCanvas(document,width,height){void 0===document&&(document=window.document),void 0===width&&(width=600),void 0===height&&(height=300),this._container=void 0,this._pixelRatio=NaN,this._width=100,this._height=100,this.document=document,this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.element.style.userSelect="none",this.element.style.display="block",this.setPixelRatio(),this.resize(width,height)}return Object.defineProperty(HdpiCanvas.prototype,"container",{get:function(){return this._container},set:function(value){this._container!==value&&(this.remove(),value&&value.appendChild(this.element),this._container=value)},enumerable:!0,configurable:!0}),HdpiCanvas.prototype.remove=function(){var parentNode=this.element.parentNode;null!=parentNode&&parentNode.removeChild(this.element)},HdpiCanvas.prototype.destroy=function(){this.element.remove(),this._canvas=void 0,Object.freeze(this)},HdpiCanvas.prototype.toImage=function(){var img=this.document.createElement("img");return img.src=this.getDataURL(),img},HdpiCanvas.prototype.getDataURL=function(type){return this.element.toDataURL(type)},HdpiCanvas.prototype.download=function(fileName){fileName=((fileName||"").trim()||"image")+".png";var dataUrl=this.getDataURL("image/png"),document=this.document,a=document.createElement("a");a.href=dataUrl,a.download=fileName,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},Object.defineProperty(HdpiCanvas.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!0,configurable:!0}),HdpiCanvas.prototype.setPixelRatio=function(ratio){var pixelRatio=ratio||window.devicePixelRatio;pixelRatio!==this.pixelRatio&&(HdpiCanvas.overrideScale(this.context,pixelRatio),this._pixelRatio=pixelRatio,this.resize(this.width,this.height))},Object.defineProperty(HdpiCanvas.prototype,"pixelated",{get:function(){return"pixelated"===this.element.style.imageRendering},set:function(value){this.element.style.imageRendering=value?"pixelated":"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(HdpiCanvas.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(HdpiCanvas.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),HdpiCanvas.prototype.resize=function(width,height){if(width>0&&height>0){var element=this.element,context=this.context,pixelRatio=this.pixelRatio;element.width=Math.round(width*pixelRatio),element.height=Math.round(height*pixelRatio),element.style.width=width+"px",element.style.height=height+"px",context.resetTransform(),this._width=width,this._height=height}},Object.defineProperty(HdpiCanvas,"textMeasuringContext",{get:function(){if(this._textMeasuringContext)return this._textMeasuringContext;var canvas=document.createElement("canvas");return this._textMeasuringContext=canvas.getContext("2d")},enumerable:!0,configurable:!0}),Object.defineProperty(HdpiCanvas,"svgText",{get:function(){if(this._svgText)return this._svgText;var xmlns="http://www.w3.org/2000/svg",svg=document.createElementNS(xmlns,"svg");svg.setAttribute("width","100"),svg.setAttribute("height","100"),svg.classList?svg.classList.add("text-measuring-svg"):svg.setAttribute("class","text-measuring-svg"),svg.style.position="absolute",svg.style.top="-1000px",svg.style.visibility="hidden";var svgText=document.createElementNS(xmlns,"text");return svgText.setAttribute("x","0"),svgText.setAttribute("y","30"),svgText.setAttribute("text","black"),svg.appendChild(svgText),document.body.appendChild(svg),this._svgText=svgText,svgText},enumerable:!0,configurable:!0}),Object.defineProperty(HdpiCanvas,"has",{get:function(){if(this._has)return this._has;var isChrome=navigator.userAgent.indexOf("Chrome")>-1,isFirefox=navigator.userAgent.indexOf("Firefox")>-1,isSafari=!isChrome&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!isFirefox&&!isSafari,getTransform:void 0!==this.textMeasuringContext.getTransform})},enumerable:!0,configurable:!0}),HdpiCanvas.measureText=function(text,font,textBaseline,textAlign){var ctx=this.textMeasuringContext;return ctx.font=font,ctx.textBaseline=textBaseline,ctx.textAlign=textAlign,ctx.measureText(text)},HdpiCanvas.getTextSize=function(text,font){if(this.has.textMetrics){var ctx=this.textMeasuringContext;ctx.font=font;var metrics=ctx.measureText(text);return{width:metrics.width,height:metrics.actualBoundingBoxAscent+metrics.actualBoundingBoxDescent}}return this.measureSvgText(text,font)},HdpiCanvas.measureSvgText=function(text,font){var cache=this.textSizeCache,fontCache=cache[font];if(fontCache){var size_1=fontCache[text];if(size_1)return size_1}else cache[font]={};var svgText=this.svgText;svgText.style.font=font,svgText.textContent=text;var bbox=svgText.getBBox(),size={width:bbox.width,height:bbox.height};return cache[font][text]=size,size},HdpiCanvas.overrideScale=function(ctx,scale){var depth=0,overrides={save:function(){this.$save(),depth++},restore:function(){depth>0&&(this.$restore(),depth--)},setTransform:function(a,b,c,d,e,f){this.$setTransform(a*scale,b*scale,c*scale,d*scale,e*scale,f*scale)},resetTransform:function(){this.$setTransform(scale,0,0,scale,0,0),this.save(),depth=0}};for(var name_1 in overrides)overrides.hasOwnProperty(name_1)&&(ctx["$"+name_1]||(ctx["$"+name_1]=ctx[name_1]),ctx[name_1]=overrides[name_1])},HdpiCanvas.textSizeCache={},HdpiCanvas}(),__read$e=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$7=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$e(arguments[i]));return ar},Scene=function(){function Scene(document,width,height){var _this=this;void 0===document&&(document=window.document),this.id=createId(this),this._dirty=!1,this.animationFrameId=0,this._root=null,this.debug={renderFrameIndex:!1,renderBoundingBoxes:!1},this._frameIndex=0,this.render=function(){var _a,_b=_this,ctx=_b.ctx,root=_b.root,pendingSize=_b.pendingSize;_this.animationFrameId=0,pendingSize&&((_a=_this.canvas).resize.apply(_a,__spread$7(pendingSize)),_this.pendingSize=void 0),!root||root.visible?(ctx.clearRect(0,0,_this.width,_this.height),root&&(ctx.save(),root.visible&&root.render(ctx),ctx.restore()),_this._frameIndex++,_this.debug.renderFrameIndex&&(ctx.fillStyle="white",ctx.fillRect(0,0,40,15),ctx.fillStyle="black",ctx.fillText(_this.frameIndex.toString(),2,10)),_this.dirty=!1):_this.dirty=!1},this.canvas=new HdpiCanvas(document,width,height),this.ctx=this.canvas.context}return Object.defineProperty(Scene.prototype,"container",{get:function(){return this.canvas.container},set:function(value){this.canvas.container=value},enumerable:!0,configurable:!0}),Scene.prototype.download=function(fileName){this.canvas.download(fileName)},Scene.prototype.getDataURL=function(type){return this.canvas.getDataURL(type)},Object.defineProperty(Scene.prototype,"width",{get:function(){return this.pendingSize?this.pendingSize[0]:this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(Scene.prototype,"height",{get:function(){return this.pendingSize?this.pendingSize[1]:this.canvas.height},enumerable:!0,configurable:!0}),Scene.prototype.resize=function(width,height){width=Math.round(width),height=Math.round(height),width===this.width&&height===this.height||(this.pendingSize=[width,height],this.dirty=!0)},Object.defineProperty(Scene.prototype,"dirty",{get:function(){return this._dirty},set:function(dirty){dirty&&!this._dirty&&(this.animationFrameId=requestAnimationFrame(this.render)),this._dirty=dirty},enumerable:!0,configurable:!0}),Scene.prototype.cancelRender=function(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0,this._dirty=!1)},Object.defineProperty(Scene.prototype,"root",{get:function(){return this._root},set:function(node){node!==this._root&&(this._root&&this._root._setScene(),this._root=node,node&&(null===node.parent&&node.scene&&node.scene!==this&&(node.scene.root=null),node._setScene(this)),this.dirty=!0)},enumerable:!0,configurable:!0}),Scene.prototype.appendPath=function(path){var ctx=this.ctx,commands=path.commands,params=path.params,n=commands.length,j=0;ctx.beginPath();for(var i=0;i<n;i++)switch(commands[i]){case"M":ctx.moveTo(params[j++],params[j++]);break;case"L":ctx.lineTo(params[j++],params[j++]);break;case"C":ctx.bezierCurveTo(params[j++],params[j++],params[j++],params[j++],params[j++],params[j++]);break;case"Z":ctx.closePath()}},Object.defineProperty(Scene.prototype,"frameIndex",{get:function(){return this._frameIndex},enumerable:!0,configurable:!0}),Scene.className="Scene",Scene}(),__assign$4=function(){return __assign$4=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$4.apply(this,arguments)},Observable=function(){function Observable(){this.allPropertyListeners=new Map,this.allEventListeners=new Map}return Observable.prototype.addPropertyListener=function(name,listener,scope){void 0===scope&&(scope=this);var allPropertyListeners=this.allPropertyListeners,propertyListeners=allPropertyListeners.get(name);if(propertyListeners||(propertyListeners=new Map,allPropertyListeners.set(name,propertyListeners)),!propertyListeners.has(listener)){var scopes_1=new Set;propertyListeners.set(listener,scopes_1)}var scopes=propertyListeners.get(listener);scopes&&scopes.add(scope)},Observable.prototype.removePropertyListener=function(name,listener,scope){void 0===scope&&(scope=this);var propertyListeners=this.allPropertyListeners.get(name);if(propertyListeners)if(listener){var scopes=propertyListeners.get(listener);scopes&&(scopes.delete(scope),scopes.size||propertyListeners.delete(listener))}else propertyListeners.clear()},Observable.prototype.notifyPropertyListeners=function(name,oldValue,value){var _this=this,propertyListeners=this.allPropertyListeners.get(name);propertyListeners&&propertyListeners.forEach((function(scopes,listener){scopes.forEach((function(scope){return listener.call(scope,{type:name,source:_this,value,oldValue})}))}))},Observable.prototype.addEventListener=function(type,listener,scope){void 0===scope&&(scope=this);var allEventListeners=this.allEventListeners,eventListeners=allEventListeners.get(type);if(eventListeners||(eventListeners=new Map,allEventListeners.set(type,eventListeners)),!eventListeners.has(listener)){var scopes_2=new Set;eventListeners.set(listener,scopes_2)}var scopes=eventListeners.get(listener);scopes&&scopes.add(scope)},Observable.prototype.removeEventListener=function(type,listener,scope){void 0===scope&&(scope=this);var eventListeners=this.allEventListeners.get(type);if(eventListeners)if(listener){var scopes=eventListeners.get(listener);scopes&&(scopes.delete(scope),scopes.size||eventListeners.delete(listener))}else eventListeners.clear()},Observable.prototype.notifyEventListeners=function(types){var _this=this,allEventListeners=this.allEventListeners;types.forEach((function(type){var listeners=allEventListeners.get(type);listeners&&listeners.forEach((function(scopes,listener){scopes.forEach((function(scope){return listener.call(scope,{type,source:_this})}))}))}))},Observable.prototype.fireEvent=function(event){var _this=this,listeners=this.allEventListeners.get(event.type);listeners&&listeners.forEach((function(scopes,listener){scopes.forEach((function(scope){return listener.call(scope,__assign$4(__assign$4({},event),{source:_this}))}))}))},Observable.privateKeyPrefix="_",Observable}();function reactive(){for(var events=[],_i=0;_i<arguments.length;_i++)events[_i]=arguments[_i];events.indexOf("debugger");return function(target,key){var privateKey=Observable.privateKeyPrefix+key,privateKeyEvents=privateKey+"Events";target[key]||(events&&(target[privateKeyEvents]=events),Object.defineProperty(target,key,{set:function(value){var oldValue=this[privateKey];if(value!==oldValue||"object"==typeof value&&null!==value){this[privateKey]=value,this.notifyPropertyListeners(key,oldValue,value);var events_1=this[privateKeyEvents];events_1&&this.notifyEventListeners(events_1)}},get:function(){return this[privateKey]},enumerable:!0,configurable:!0}))}}var Padding=function(){function Padding(top,right,bottom,left){void 0===top&&(top=0),void 0===right&&(right=top),void 0===bottom&&(bottom=top),void 0===left&&(left=right),this.top=top,this.right=right,this.bottom=bottom,this.left=left}return Padding.prototype.clear=function(){this.top=this.right=this.bottom=this.left=0},Padding}();function isNumber(value){return"number"==typeof value&&Number.isFinite(value)}function isNumeric(value){return isNumber(value)||function isNumberObject(value){return!!value&&value.hasOwnProperty("valueOf")&&isNumber(value.valueOf())}(value)}function isDate(value){return value instanceof Date&&!isNaN(+value)}function isString(value){return"string"==typeof value}function isContinuous(value){return isNumeric(value)||isDate(value)}var constant=function(x){return function(){return x}};function interpolateNumber(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}var __read$f=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},Color=function(){function Color(r,g,b,a){void 0===a&&(a=1),this.r=Math.min(1,Math.max(0,r||0)),this.g=Math.min(1,Math.max(0,g||0)),this.b=Math.min(1,Math.max(0,b||0)),this.a=Math.min(1,Math.max(0,a||0))}return Color.fromString=function(str){if(str.indexOf("#")>=0)return Color.fromHexString(str);var hex=Color.nameToHex[str];if(hex)return Color.fromHexString(hex);if(str.indexOf("rgb")>=0)return Color.fromRgbaString(str);throw new Error("Invalid color string: '"+str+"'")},Color.parseHex=function(input){var parts;switch((input=input.replace(/ /g,"").slice(1)).length){case 6:case 8:parts=[];for(var i=0;i<input.length;i+=2)parts.push(parseInt(""+input[i]+input[i+1],16));break;case 3:case 4:parts=input.split("").map((function(p){return parseInt(p,16)})).map((function(p){return p+16*p}))}if(parts.length>=3&&parts.every((function(p){return p>=0})))return 3===parts.length&&parts.push(255),parts},Color.fromHexString=function(str){var values=Color.parseHex(str);if(values){var _a=__read$f(values,4);return new Color(_a[0]/255,_a[1]/255,_a[2]/255,_a[3]/255)}throw new Error("Malformed hexadecimal color string: '"+str+"'")},Color.stringToRgba=function(str){for(var _a=__read$f([NaN,NaN],2),po=_a[0],pc=_a[1],i=0;i<str.length;i++){var c=str[i];if(po||"("!==c){if(")"===c){pc=i;break}}else po=i}var contents=po&&pc&&str.substring(po+1,pc);if(contents){var parts=contents.split(","),rgba=[];for(i=0;i<parts.length;i++){var part=parts[i],value=parseFloat(part);if(isNaN(value))return;part.indexOf("%")>=0?(value=Math.max(0,Math.min(100,value)),value/=100):3===i?value=Math.max(0,Math.min(1,value)):(value=Math.max(0,Math.min(255,value)),value/=255),rgba.push(value)}return rgba}},Color.fromRgbaString=function(str){var rgba=Color.stringToRgba(str);if(rgba){if(3===rgba.length)return new Color(rgba[0],rgba[1],rgba[2]);if(4===rgba.length)return new Color(rgba[0],rgba[1],rgba[2],rgba[3])}throw new Error("Malformed rgb/rgba color string: '"+str+"'")},Color.fromArray=function(arr){if(4===arr.length)return new Color(arr[0],arr[1],arr[2],arr[3]);if(3===arr.length)return new Color(arr[0],arr[1],arr[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},Color.fromHSB=function(h,s,b,alpha){void 0===alpha&&(alpha=1);var rgb=Color.HSBtoRGB(h,s,b);return new Color(rgb[0],rgb[1],rgb[2],alpha)},Color.padHex=function(str){return 1===str.length?"0"+str:str},Color.prototype.toHexString=function(){var hex="#"+Color.padHex(Math.round(255*this.r).toString(16))+Color.padHex(Math.round(255*this.g).toString(16))+Color.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(hex+=Color.padHex(Math.round(255*this.a).toString(16))),hex},Color.prototype.toRgbaString=function(fractionDigits){void 0===fractionDigits&&(fractionDigits=3);var components=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],k=Math.pow(10,fractionDigits);return 1!==this.a?(components.push(Math.round(this.a*k)/k),"rgba("+components.join(", ")+")"):"rgb("+components.join(", ")+")"},Color.prototype.toString=function(){return 1===this.a?this.toHexString():this.toRgbaString()},Color.prototype.toHSB=function(){return Color.RGBtoHSB(this.r,this.g,this.b)},Color.RGBtoHSB=function(r,g,b){var min=Math.min(r,g,b),max=Math.max(r,g,b),H=NaN;if(min!==max){var delta=max-min,rc=(max-r)/delta,gc=(max-g)/delta,bc=(max-b)/delta;H=r===max?bc-gc:g===max?2+rc-bc:4+gc-rc,(H/=6)<0&&(H+=1)}return[360*H,0!==max?(max-min)/max:0,max]},Color.HSBtoRGB=function(H,S,B){isNaN(H)&&(H=0),H=(H%360+360)%360/360;var r=0,g=0,b=0;if(0===S)r=g=b=B;else{var h=6*(H-Math.floor(H)),f=h-Math.floor(h),p=B*(1-S),q=B*(1-S*f),t=B*(1-S*(1-f));switch(h|0){case 0:r=B,g=t,b=p;break;case 1:r=q,g=B,b=p;break;case 2:r=p,g=B,b=t;break;case 3:r=p,g=q,b=B;break;case 4:r=t,g=p,b=B;break;case 5:r=B,g=p,b=q}}return[r,g,b]},Color.prototype.derive=function(hueShift,saturationFactor,brightnessFactor,opacityFactor){var hsb=Color.RGBtoHSB(this.r,this.g,this.b),b=hsb[2];0==b&&brightnessFactor>1&&(b=.05);var h=((hsb[0]+hueShift)%360+360)%360,s=Math.max(Math.min(hsb[1]*saturationFactor,1),0);b=Math.max(Math.min(b*brightnessFactor,1),0);var a=Math.max(Math.min(this.a*opacityFactor,1),0),rgba=Color.HSBtoRGB(h,s,b);return rgba.push(a),Color.fromArray(rgba)},Color.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},Color.prototype.darker=function(){return this.derive(0,1,.7,1)},Color.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),Color}();function color(a,b){if("string"==typeof a)try{a=Color.fromString(a)}catch(e){a=Color.fromArray([0,0,0])}if("string"==typeof b)try{b=Color.fromString(b)}catch(e){b=Color.fromArray([0,0,0])}var red=interpolateNumber(a.r,b.r),green=interpolateNumber(a.g,b.g),blue=interpolateNumber(a.b,b.b),alpha=interpolateNumber(a.a,b.a);return function(t){return Color.fromArray([red(t),green(t),blue(t),alpha(t)]).toRgbaString()}}function interpolateValue(a,b){var t=typeof b;if(null==b||"boolean"===t)return constant(b);if("number"===t)return interpolateNumber(a,b);if("string"===t)try{return color(a,b=Color.fromString(b))}catch(e){}return b instanceof Color?color(a,b):b instanceof Date?function date(a,b){var date=new Date,msA=+a,msB=+b;return function(t){return date.setTime(msA*(1-t)+msB*t),date}}(a,b):Array.isArray(b)?function array(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=interpolateValue(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}(a,b):"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?function object(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=interpolateValue(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}(a,b):interpolateNumber(a,b)}var __read$g=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},identity=function(x){return x};function clamper(domain){var _a,a=domain[0],b=domain[domain.length-1];return a>b&&(_a=__read$g([b,a],2),a=_a[0],b=_a[1]),function(x){return Math.max(a,Math.min(b,x))}}var ContinuousScale=function(){function ContinuousScale(){this.unknown=void 0,this._clamp=identity,this._domain=[0,1],this._range=[0,1],this.transform=identity,this.untransform=identity,this._interpolate=interpolateValue,this.rescale()}return Object.defineProperty(ContinuousScale.prototype,"clamp",{get:function(){return this._clamp!==identity},set:function(value){this._clamp=value?clamper(this.domain):identity},enumerable:!0,configurable:!0}),ContinuousScale.prototype.setDomain=function(values){this._domain=Array.prototype.map.call(values,(function(v){return+v})),this._clamp!==identity&&(this._clamp=clamper(this.domain)),this.rescale()},ContinuousScale.prototype.getDomain=function(){return this._domain.slice()},Object.defineProperty(ContinuousScale.prototype,"domain",{get:function(){return this.getDomain()},set:function(values){this.setDomain(values)},enumerable:!0,configurable:!0}),Object.defineProperty(ContinuousScale.prototype,"range",{get:function(){return this._range.slice()},set:function(values){this._range=Array.prototype.slice.call(values),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(ContinuousScale.prototype,"interpolate",{get:function(){return this._interpolate},set:function(value){this._interpolate=value,this.rescale()},enumerable:!0,configurable:!0}),ContinuousScale.prototype.rescale=function(){this.piecewise=this.bimap,this.output=void 0,this.input=void 0},ContinuousScale.prototype.normalize=function(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:(x=isNaN(b)?NaN:.5,function(){return x});var x},ContinuousScale.prototype.bimap=function(domain,range,interpolate){var xt,ty,x0=domain[0],x1=domain[1],y0=range[0],y1=range[1];return x1<x0?(xt=this.normalize(x1,x0),ty=interpolate(y1,y0)):(xt=this.normalize(x0,x1),ty=interpolate(y0,y1)),function(x){return ty(xt(x))}},ContinuousScale.prototype.convert=function(x){return x=+x,isNaN(x)?this.unknown:(this.output||(this.output=this.piecewise(this.domain.map(this.transform),this.range,this.interpolate)),this.output(this.transform(this._clamp(x))))},ContinuousScale.prototype.invert=function(y){return this.input||(this.input=this.piecewise(this.range,this.domain.map(this.transform),interpolateNumber)),this._clamp(this.untransform(this.input(y)))},ContinuousScale}(),__extends$K=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();function ticks(a,b,count){var step=tickStep(a,b,count);return function range(a,b,step){void 0===step&&(step=1);for(var absStep=Math.abs(step),fractionDigits=absStep>0&&absStep<1?Math.abs(Math.floor(Math.log(absStep)/Math.LN10)):0,f=Math.pow(10,fractionDigits),n=Math.max(0,Math.ceil((b-a)/step))||0,values=new NumericTicks(fractionDigits),i=0;i<n;i++){var value=a+step*i;values[i]=Math.round(value*f)/f}return values}(a=Math.ceil(a/step)*step,b=Math.floor(b/step)*step+step/2,step)}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickStep(a,b,count){var rawStep=Math.abs(b-a)/Math.max(0,count),step=Math.pow(10,Math.floor(Math.log(rawStep)/Math.LN10)),error=rawStep/step;return error>=e10?step*=10:error>=e5?step*=5:error>=e2&&(step*=2),b<a?-step:step}function tickIncrement(a,b,count){var rawStep=(b-a)/Math.max(0,count),power=Math.floor(Math.log(rawStep)/Math.LN10),error=rawStep/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}var NumericTicks=function(_super){function NumericTicks(fractionDigits,elements){var _this=_super.call(this)||this;if(elements)for(var i=0,n=elements.length;i<n;i++)_this[i]=elements[i];return _this.fractionDigits=fractionDigits,_this}return __extends$K(NumericTicks,_super),NumericTicks}(Array);var prefixExponent,formatDefaultLocale,format,formatPrefix,formatTypes={"":function formatDefault(x,p){var xs=x.toPrecision(p);out:for(var n=xs.length,i=1,i0=-1,i1=0;i<n;++i)switch(xs[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;case"e":break out;default:i0>0&&(i0=0)}return i0>0?xs.slice(0,i0)+xs.slice(i1+1):xs},"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return String(x)},d:function formatDecimal(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(100*x,p)},r:formatRounded,s:function formatPrefixAuto(x,p){void 0===p&&(p=0);var d=formatDecimalParts(x,p);if(!d)return String(x);var coefficient=d[0],exponent=d[1];prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3)));var i=exponent-prefixExponent+1,n=coefficient.length;if(i===n)return coefficient;if(i>n)return coefficient+new Array(i-n+1).join("0");if(i>0)return coefficient.slice(0,i)+"."+coefficient.slice(i);var parts=formatDecimalParts(x,Math.max(0,p+i-1));return"0."+new Array(1-i).join("0")+parts[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}},prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],FormatSpecifier=function FormatSpecifier(specifier){specifier instanceof FormatSpecifier?(this.fill=specifier.fill,this.align=specifier.align,this.sign=specifier.sign,this.symbol=specifier.symbol,this.zero=specifier.zero,this.width=specifier.width,this.comma=specifier.comma,this.precision=specifier.precision,this.trim=specifier.trim,this.type=specifier.type,this.string=specifier.string):(this.fill=void 0===specifier.fill?" ":String(specifier.fill),this.align=void 0===specifier.align?">":String(specifier.align),this.sign=void 0===specifier.sign?"-":String(specifier.sign),this.symbol=void 0===specifier.symbol?"":String(specifier.symbol),this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":String(specifier.type),this.string=specifier.string)},formatRegEx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i,interpolateRegEx=/(#\{(.*?)\})/g;function makeFormatSpecifier(specifier){if(specifier instanceof FormatSpecifier)return new FormatSpecifier(specifier);var found=!1,string=specifier.replace(interpolateRegEx,(function(){return found||(specifier=arguments[2],found=!0),"#{}"})),match=formatRegEx.exec(specifier);if(!match)throw new Error("Invalid format: "+specifier);return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10],string:found?string:void 0})}function tickFormat(start,stop,count,specifier){var precision,step=tickStep(start,stop,count),formatSpecifier=makeFormatSpecifier(null==specifier?",f":specifier);switch(formatSpecifier.type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=formatSpecifier.precision||isNaN(precision=function precisionPrefix(step,value){var x=Math.floor(exponent(value)/3);return x=Math.min(8,x),x=Math.max(-8,x),Math.max(0,3*x-exponent(Math.abs(step)))}(step,value))||(formatSpecifier.precision=precision),formatPrefix(formatSpecifier,value);case"":case"e":case"g":case"p":case"r":null!=formatSpecifier.precision||isNaN(precision=function precisionRound(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,exponent(max)-exponent(step))+1}(step,Math.max(Math.abs(start),Math.abs(stop))))||(formatSpecifier.precision=precision-+("e"===formatSpecifier.type));break;case"f":case"%":null!=formatSpecifier.precision||isNaN(precision=function precisionFixed(step){return Math.max(0,-exponent(Math.abs(step)))}(step))||(formatSpecifier.precision=precision-2*+("%"===formatSpecifier.type))}return format(formatSpecifier)}function formatRounded(x,p){var d=formatDecimalParts(x,p);if(!d)return String(x);var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}function formatDecimalParts(x,p){var sx=p?x.toExponential(p-1):x.toExponential(),i=sx.indexOf("e");if(!(i<0)){var coefficient=sx.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+sx.slice(i+1)]}}function identity$1(x){return x}function exponent(x){var parts=formatDecimalParts(Math.abs(x));return parts?parts[1]:NaN}!function defaultLocale(definition){formatDefaultLocale=function formatLocale(locale){var group=void 0===locale.grouping||void 0===locale.thousands?identity$1:function formatGroup(grouping,thousands){return function(value,width){for(var t=[],i=value.length,j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}}(Array.prototype.map.call(locale.grouping,Number),String(locale.thousands)),currencyPrefix=void 0===locale.currency?"":String(locale.currency[0]),currencySuffix=void 0===locale.currency?"":String(locale.currency[1]),decimal=void 0===locale.decimal?".":String(locale.decimal),numerals=void 0===locale.numerals?identity$1:function formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(Array.prototype.map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":String(locale.percent),minus=void 0===locale.minus?"−":String(locale.minus),nan=void 0===locale.nan?"NaN":String(locale.nan);function newFormat(specifier){var formatSpecifier=makeFormatSpecifier(specifier),fill=formatSpecifier.fill,align=formatSpecifier.align,sign=formatSpecifier.sign,symbol=formatSpecifier.symbol,zero=formatSpecifier.zero,width=formatSpecifier.width,comma=formatSpecifier.comma,precision=formatSpecifier.precision,trim=formatSpecifier.trim,type=formatSpecifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(x){var value,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(+x)+valueSuffix,value="";else{var nx=+x,valueNegative=x<0||1/nx<0;value=isNaN(nx)?nan:formatType(Math.abs(nx),precision),trim&&(value=function formatTrim(s){out:for(var n=s.length,i=1,i0=-1,i1=0;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(!+s[i])break out;i0>0&&(i0=0)}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0==+value&&"+"!==sign&&(valueNegative=!1);var signSuffix=valueNegative&&"("===sign?")":"";if(valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+signSuffix,maybeSuffix)for(var i=0,n=value.length;i<n;i++){var c=value.charCodeAt(i);if(48>c||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}var string=formatSpecifier.string;return string?string.replace(interpolateRegEx,(function(){return numerals(value)})):numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format}function formatPrefix(specifier,value){var formatSpecifier=makeFormatSpecifier(specifier);formatSpecifier.type="f";var f=newFormat(formatSpecifier),e=3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*+value)+prefix}}return{format:newFormat,formatPrefix}}(definition),format=formatDefaultLocale.format,formatPrefix=formatDefaultLocale.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var __extends$L=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),LinearScale=function(_super){function LinearScale(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type="linear",_this}return __extends$L(LinearScale,_super),LinearScale.prototype.ticks=function(count){void 0===count&&(count=10);var d=this._domain;return ticks(d[0],d[d.length-1],count)},LinearScale.prototype.nice=function(count){void 0===count&&(count=10);var step,d=this.domain,i0=0,i1=d.length-1,start=d[i0],stop=d[i1];stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step),(step=tickIncrement(start,stop,count))>0?step=tickIncrement(start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step,count):step<0&&(step=tickIncrement(start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step,count)),step>0?(d[i0]=Math.floor(start/step)*step,d[i1]=Math.ceil(stop/step)*step,this.domain=d):step<0&&(d[i0]=Math.ceil(start*step)/step,d[i1]=Math.floor(stop*step)/step,this.domain=d)},LinearScale.prototype.tickFormat=function(count,specifier){var d=this.domain;return tickFormat(d[0],d[d.length-1],null==count?10:count,specifier)},LinearScale}(ContinuousScale),__extends$M=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),t0=new Date,t1=new Date,TimeInterval=function(){function TimeInterval(floor,offset){this._floor=floor,this._offset=offset}return TimeInterval.prototype.floor=function(date){return date=new Date(+date),this._floor(date),date},TimeInterval.prototype.ceil=function(date){return date=new Date(+date-1),this._floor(date),this._offset(date,1),this._floor(date),date},TimeInterval.prototype.round=function(date){var d0=this.floor(date),d1=this.ceil(date),ms=+date;return ms-d0.getTime()<d1.getTime()-ms?d0:d1},TimeInterval.prototype.offset=function(date,step){return void 0===step&&(step=1),date=new Date(+date),this._offset(date,Math.floor(step)),date},TimeInterval.prototype.range=function(start,stop,step){void 0===step&&(step=1);var previous,range=[];if(start=this.ceil(start),step=Math.floor(step),start>stop||step<=0)return range;do{previous=new Date(+start),range.push(previous),this._offset(start,step),this._floor(start)}while(previous<start&&start<stop);return range},TimeInterval.prototype.filter=function(test){var _this=this;return new TimeInterval((function(date){if(date instanceof Date)for(_this._floor(date);!test(date);)date.setTime(date.getTime()-1),_this._floor(date);return date}),(function(date,step){if(date instanceof Date)if(step<0)for(;++step<=0;)do{_this._offset(date,-1)}while(!test(date));else for(;--step>=0;)do{_this._offset(date,1)}while(!test(date));return date}))},TimeInterval}(),CountableTimeInterval=function(_super){function CountableTimeInterval(floor,offset,count,field){var _this=_super.call(this,floor,offset)||this;return _this._count=count,_this._field=field,_this}return __extends$M(CountableTimeInterval,_super),CountableTimeInterval.prototype.count=function(start,end){return t0.setTime(+start),t1.setTime(+end),this._floor(t0),this._floor(t1),Math.floor(this._count(t0,t1))},CountableTimeInterval.prototype.every=function(step){var result,_this=this;if(step=Math.floor(step),isFinite(step)&&step>0)if(step>1){var field_1=this._field;result=field_1?this.filter((function(d){return field_1(d)%step==0})):this.filter((function(d){return _this.count(0,d)%step==0}))}else result=this;return result},CountableTimeInterval}(TimeInterval);var millisecond=new CountableTimeInterval((function floor(date){return date}),(function offset(date,milliseconds){date.setTime(date.getTime()+milliseconds)}),(function count(start,end){return end.getTime()-start.getTime()}));var second=new CountableTimeInterval((function floor$1(date){date.setTime(date.getTime()-date.getMilliseconds())}),(function offset$1(date,seconds){date.setTime(date.getTime()+1e3*seconds)}),(function count$1(start,end){return(end.getTime()-start.getTime())/1e3}));var minute=new CountableTimeInterval((function floor$2(date){date.setTime(date.getTime()-date.getMilliseconds()-1e3*date.getSeconds())}),(function offset$2(date,minutes){date.setTime(date.getTime()+6e4*minutes)}),(function count$2(start,end){return(end.getTime()-start.getTime())/6e4}),(function field(date){return date.getMinutes()}));var hour=new CountableTimeInterval((function floor$3(date){date.setTime(date.getTime()-date.getMilliseconds()-1e3*date.getSeconds()-6e4*date.getMinutes())}),(function offset$3(date,hours){date.setTime(date.getTime()+36e5*hours)}),(function count$3(start,end){return(end.getTime()-start.getTime())/36e5}),(function field$1(date){return date.getHours()}));var day=new CountableTimeInterval((function floor$4(date){date.setHours(0,0,0,0)}),(function offset$4(date,days){date.setDate(date.getDate()+days)}),(function count$4(start,end){var tzMinuteDelta=end.getTimezoneOffset()-start.getTimezoneOffset();return(end.getTime()-start.getTime()-6e4*tzMinuteDelta)/864e5}),(function field$2(date){return date.getDate()-1}));function weekday(n){return new CountableTimeInterval((function floor(date){date.setDate(date.getDate()-(date.getDay()+7-n)%7),date.setHours(0,0,0,0)}),(function offset(date,weeks){date.setDate(date.getDate()+7*weeks)}),(function count(start,end){return(end.getTime()-start.getTime()-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/6048e5}))}var sunday=weekday(0),monday=weekday(1),thursday=(weekday(2),weekday(3),weekday(4));weekday(5),weekday(6);var month=new CountableTimeInterval((function floor$5(date){date.setDate(1),date.setHours(0,0,0,0)}),(function offset$5(date,months){date.setMonth(date.getMonth()+months)}),(function count$5(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())}),(function field$3(date){return date.getMonth()}));var year=new CountableTimeInterval((function floor$6(date){date.setMonth(0,1),date.setHours(0,0,0,0)}),(function offset$6(date,years){date.setFullYear(date.getFullYear()+years)}),(function count$6(start,end){return end.getFullYear()-start.getFullYear()}),(function field$4(date){return date.getFullYear()}));function complexBisectRight(list,x,map,lo,hi){void 0===lo&&(lo=0),void 0===hi&&(hi=list.length);for(var comparator=function ascendingComparator(map){return function(item,x){return function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}(map(item),x)}}(map);lo<hi;){var mid=lo+hi>>>1;comparator(list[mid],x)<0?lo=mid+1:hi=mid}return lo}var utcDay=new CountableTimeInterval((function floor$7(date){date.setUTCHours(0,0,0,0)}),(function offset$7(date,days){date.setUTCDate(date.getUTCDate()+days)}),(function count$7(start,end){return(end.getTime()-start.getTime())/864e5}),(function field$5(date){return date.getUTCDate()-1}));var utcYear=new CountableTimeInterval((function floor$8(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function offset$8(date,years){date.setUTCFullYear(date.getUTCFullYear()+years)}),(function count$8(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),(function field$6(date){return date.getUTCFullYear()}));function weekday$1(n){return new CountableTimeInterval((function floor(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-n)%7),date.setHours(0,0,0,0)}),(function offset(date,weeks){date.setUTCDate(date.getUTCDate()+7*weeks)}),(function count(start,end){return(end.getTime()-start.getTime())/6048e5}))}var utcSunday=weekday$1(0),utcMonday=weekday$1(1),utcThursday=(weekday$1(2),weekday$1(3),weekday$1(4));weekday$1(5),weekday$1(6);function localDate(d){if(d.y>=0&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(d.y>=0&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function formatLookup(names){for(var map={},i=0,n=names.length;i<n;i++)map[names[i].toLowerCase()]=i;return map}function newYear(y){return{y,m:0,d:1,H:0,M:0,S:0,L:0}}var locale,percentCharCode=37,numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g,requote=function(s){return s.replace(requoteRe,"\\$&")},formatRe=function(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")},pads={"-":"",_:" ",0:"0"};function pad(value,fill,width){var sign=value<0?"-":"",string=String(sign?-value:value),length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}!function setDefaultLocale(definition){return locale=function formatLocale$1(timeLocale){var lDateTime=timeLocale.dateTime,lDate=timeLocale.date,lTime=timeLocale.time,lPeriods=timeLocale.periods,lWeekdays=timeLocale.days,lShortWeekdays=timeLocale.shortDays,lMonths=timeLocale.months,lShortMonths=timeLocale.shortMonths,periodRe=formatRe(lPeriods),periodLookup=formatLookup(lPeriods),weekdayRe=formatRe(lWeekdays),weekdayLookup=formatLookup(lWeekdays),shortWeekdayRe=formatRe(lShortWeekdays),shortWeekdayLookup=formatLookup(lShortWeekdays),monthRe=formatRe(lMonths),monthLookup=formatLookup(lMonths),shortMonthRe=formatRe(lShortMonths),shortMonthLookup=formatLookup(lShortMonths),formats={a:function formatShortWeekday(date){return lShortWeekdays[date.getDay()]},A:function formatWeekday(date){return lWeekdays[date.getDay()]},b:function formatShortMonth(date){return lShortMonths[date.getMonth()]},B:function formatMonth(date){return lMonths[date.getMonth()]},c:void 0,d:formatDayOfMonth,e:formatDayOfMonth,f:function formatMicroseconds(date,fill){return formatMilliseconds(date,fill)+"000"},H:function formatHour24(date,fill){return pad(date.getHours(),fill,2)},I:function formatHour12(date,fill){return pad(date.getHours()%12||12,fill,2)},j:function formatDayOfYear(date,fill){return pad(1+day.count(year.floor(date),date),fill,3)},L:formatMilliseconds,m:function formatMonthNumber(date,fill){return pad(date.getMonth()+1,fill,2)},M:function formatMinutes(date,fill){return pad(date.getMinutes(),fill,2)},p:function formatPeriod(date){return lPeriods[date.getHours()>=12?1:0]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:function formatSeconds(date,fill){return pad(date.getSeconds(),fill,2)},u:function formatWeekdayNumberMonday(date){var dayOfWeek=date.getDay();return 0===dayOfWeek?7:dayOfWeek},U:function formatWeekNumberSunday(date,fill){return pad(sunday.count(year.floor(date),date),fill,2)},V:function formatWeekNumberISO(date,fill){var day=date.getDay();date=day>=4||0===day?thursday.floor(date):thursday.ceil(date);var yearStart=year.floor(date);return pad(thursday.count(yearStart,date)+(4===yearStart.getDay()?1:0),fill,2)},w:function formatWeekdayNumberSunday(date){return date.getDay()},W:function formatWeekNumberMonday(date,fill){return pad(monday.count(year.floor(date),date),fill,2)},x:void 0,X:void 0,y:function formatYear(date,fill){return pad(date.getFullYear()%100,fill,2)},Y:function formatFullYear(date,fill){return pad(date.getFullYear()%1e4,fill,4)},Z:function formatZone(date){var z=date.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad(Math.floor(z/60),"0",2)+pad(z%60,"0",2)},"%":formatLiteralPercent},utcFormats={a:function formatUTCShortWeekday(date){return lShortWeekdays[date.getUTCDay()]},A:function formatUTCWeekday(date){return lWeekdays[date.getUTCDay()]},b:function formatUTCShortMonth(date){return lShortMonths[date.getUTCMonth()]},B:function formatUTCMonth(date){return lMonths[date.getUTCMonth()]},c:void 0,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:function formatUTCMicroseconds(date,fill){return formatUTCMilliseconds(date,fill)+"000"},H:function formatUTCHour24(date,fill){return pad(date.getUTCHours(),fill,2)},I:function formatUTCHour12(date,fill){return pad(date.getUTCHours()%12||12,fill,2)},j:function formatUTCDayOfYear(date,fill){return pad(1+utcDay.count(utcYear.floor(date),date),fill,3)},L:formatUTCMilliseconds,m:function formatUTCMonthNumber(date,fill){return pad(date.getUTCMonth()+1,fill,2)},M:function formatUTCMinutes(date,fill){return pad(date.getUTCMinutes(),fill,2)},p:function formatUTCPeriod(date){return lPeriods[date.getUTCHours()>=12?1:0]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:function formatUTCSeconds(date,fill){return pad(date.getUTCSeconds(),fill,2)},u:function formatUTCWeekdayNumberMonday(date){var dayOfWeek=date.getUTCDay();return 0===dayOfWeek?7:dayOfWeek},U:function formatUTCWeekNumberSunday(date,fill){return pad(utcSunday.count(utcYear.floor(date),date),fill,2)},V:function formatUTCWeekNumberISO(date,fill){var day=date.getUTCDay();date=day>=4||0===day?utcThursday.floor(date):utcThursday.ceil(date);var yearStart=utcYear.floor(date);return pad(utcThursday.count(yearStart,date)+(4===yearStart.getUTCDay()?1:0),fill,4)},w:function formatUTCWeekdayNumberSunday(date){return date.getUTCDay()},W:function formatUTCWeekNumberMonday(date,fill){return pad(utcMonday.count(utcYear.floor(date),date),fill,2)},x:void 0,X:void 0,y:function formatUTCYear(date,fill){return pad(date.getUTCFullYear()%100,fill,2)},Y:function formatUTCFullYear(date,fill){return pad(date.getUTCFullYear()%1e4,fill,4)},Z:function formatUTCZone(){return"+0000"},"%":formatLiteralPercent},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,lDateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(parseFloat(n[0])/1e3),i+n[0].length):-1},H:parseHour24,I:parseHour24,j:function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1},L:function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1},m:function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=parseFloat(n[0])-1,i+n[0].length):-1},M:function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1},p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1},Q:function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1},s:function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=1e3*+n[0],i+n[0].length):-1},S:function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1},u:function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1},U:function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1},V:function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1},w:function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1},W:function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1},x:function parseLocaleDate(d,string,i){return parseSpecifier(d,lDate,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,lTime,string,i)},y:function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1},Y:function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1},Z:function parseZone(d,string,i){var n=/^(Z)|^([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1},"%":function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}};function newParse(specifier,newDate){return function(str){var d=newYear(1900);if(parseSpecifier(d,specifier,str+="",0)==str.length){if("Q"in d)return new Date(d.Q);if("p"in d&&(d.H=d.H%12+12*d.p),"V"in d){if(d.V<1||d.V>53)return;if("w"in d||(d.w=1),"Z"in d){var day$1=(week=utcDate(newYear(d.y))).getUTCDay();week=day$1>4||0===day$1?utcMonday.ceil(week):utcMonday.floor(week),week=utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7}else{var week;day$1=(week=newDate(newYear(d.y))).getDay(),week=day$1>4||0===day$1?monday.ceil(week):monday.floor(week),week=day.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7}}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day$1="Z"in d?utcDate(newYear(d.y)).getUTCDay():newDate(newYear(d.y)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day$1+5)%7:d.w+7*d.U-(day$1+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate(d)):newDate(d)}}}function newFormat(specifier,formats){return function(date){var string=[],n=specifier.length,i=-1,j=0;for(date instanceof Date||(date=new Date(+date));++i<n;)if(specifier.charCodeAt(i)===percentCharCode){string.push(specifier.slice(j,i));var c=specifier.charAt(++i),pad_1=pads[c];null!=pad_1?c=specifier.charAt(++i):pad_1="e"===c?" ":"0";var format=formats[c];format&&(c=format(date,pad_1)),string.push(c),j=i+1}return string.push(specifier.slice(j,i)),string.join("")}}function parseSpecifier(d,specifier,string,j){for(var i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;var code=specifier.charCodeAt(i++);if(code===percentCharCode){var char=specifier.charAt(i++),parse=parses[char in pads?specifier.charAt(i++):char];if(!parse||(j=parse(d,string,j))<0)return-1}else if(code!=string.charCodeAt(j++))return-1}return j}function formatMilliseconds(date,fill){return pad(date.getMilliseconds(),fill,3)}function formatDayOfMonth(date,fill){return pad(date.getDate(),fill,2)}function formatUTCMilliseconds(date,fill){return pad(date.getUTCMilliseconds(),fill,3)}function formatUTCDayOfMonth(date,fill){return pad(date.getUTCDate(),fill,2)}function formatLiteralPercent(date){return"%"}function formatUnixTimestamp(date){return date.getTime()}function formatUnixTimestampSeconds(date){return Math.floor(date.getTime()/1e3)}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}return formats.x=newFormat(lDate,formats),formats.X=newFormat(lTime,formats),formats.c=newFormat(lDateTime,formats),utcFormats.x=newFormat(lDate,utcFormats),utcFormats.X=newFormat(lTime,utcFormats),utcFormats.c=newFormat(lDateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier,formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier,localDate);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier,utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier,utcDate);return p.toString=function(){return specifier},p}}}(definition)}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var __extends$N=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$h=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},TimeScale=function(_super){function TimeScale(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type="time",_this.year=year,_this.month=month,_this.week=sunday,_this.day=day,_this.hour=hour,_this.minute=minute,_this.second=second,_this.millisecond=millisecond,_this.format=locale.format,_this.tickIntervals=[[_this.second,1,1e3],[_this.second,5,5e3],[_this.second,15,15e3],[_this.second,30,3e4],[_this.minute,1,6e4],[_this.minute,5,3e5],[_this.minute,15,9e5],[_this.minute,30,18e5],[_this.hour,1,36e5],[_this.hour,3,108e5],[_this.hour,6,216e5],[_this.hour,12,432e5],[_this.day,1,864e5],[_this.day,2,1728e5],[_this.week,1,6048e5],[_this.month,1,2592e6],[_this.month,3,7776e6],[_this.year,1,31536e6]],_this.formatMillisecond=_this.format(".%L"),_this.formatSecond=_this.format(":%S"),_this.formatMinute=_this.format("%I:%M"),_this.formatHour=_this.format("%I %p"),_this.formatDay=_this.format("%a %d"),_this.formatWeek=_this.format("%b %d"),_this.formatMonth=_this.format("%B"),_this.formatYear=_this.format("%Y"),_this._domain=[new Date(2e3,0,1),new Date(2e3,0,2)],_this}return __extends$N(TimeScale,_super),TimeScale.prototype.defaultTickFormat=function(date){return(this.second.floor(date)<date?this.formatMillisecond:this.minute.floor(date)<date?this.formatSecond:this.hour.floor(date)<date?this.formatMinute:this.day.floor(date)<date?this.formatHour:this.month.floor(date)<date?this.week.floor(date)<date?this.formatDay:this.formatWeek:this.year.floor(date)<date?this.formatMonth:this.formatYear)(date)},TimeScale.prototype.tickInterval=function(interval,start,stop,step){var _a;if("number"==typeof interval){var tickCount=interval,tickIntervals=this.tickIntervals,target=Math.abs(stop-start)/tickCount,i=complexBisectRight(tickIntervals,target,(function(interval){return interval[2]}));i===tickIntervals.length?(step=tickStep(start/31536e6,stop/31536e6,tickCount),interval=this.year):i?(interval=(_a=__read$h(tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i],2))[0],step=_a[1]):(step=Math.max(tickStep(start,stop,interval),1),interval=this.millisecond)}return null==step?interval:interval.every(step)},Object.defineProperty(TimeScale.prototype,"domain",{get:function(){return _super.prototype.getDomain.call(this).map((function(t){return new Date(t)}))},set:function(values){_super.prototype.setDomain.call(this,Array.prototype.map.call(values,(function(t){return t instanceof Date?+t:+new Date(+t)})))},enumerable:!0,configurable:!0}),TimeScale.prototype.invert=function(y){return new Date(_super.prototype.invert.call(this,y))},TimeScale.prototype.ticks=function(interval){void 0===interval&&(interval=10);var d=_super.prototype.getDomain.call(this),t0=d[0],t1=d[d.length-1],reverse=t1<t0;if(reverse){var _=t0;t0=t1,t1=_}var t=this.tickInterval(interval,t0,t1),i=t?t.range(t0,t1+1):[];return reverse?i.reverse():i},TimeScale.prototype.tickFormat=function(count,specifier){return null==specifier?this.defaultTickFormat.bind(this):this.format(specifier)},TimeScale.prototype.nice=function(interval){void 0===interval&&(interval=10);var d=_super.prototype.getDomain.call(this),i=this.tickInterval(interval,d[0],d[d.length-1]);i&&(this.domain=this._nice(d,i))},TimeScale.prototype._nice=function(domain,interval){var _a,_b,i0=0,i1=(domain=domain.slice()).length-1,x0=domain[i0],x1=domain[i1];return x1<x0&&(i0=(_a=__read$h([i1,i0],2))[0],i1=_a[1],x0=(_b=__read$h([x1,x0],2))[0],x1=_b[1]),domain[i0]=interval.floor(x0),domain[i1]=interval.ceil(x1),domain},TimeScale}(ContinuousScale);function identity$2(value){return value}function extent(values,predicate,map){for(var value,min,max,transform=map||identity$2,n=values.length,i=-1;++i<n;)if(predicate(value=values[i]))for(min=max=value;++i<n;)predicate(value=values[i])&&(min>value&&(min=value),max<value&&(max=value));return void 0===min||void 0===max?void 0:[transform(min),transform(max)]}var __extends$O=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__values$3=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},SparklineAxis=function(_super){function SparklineAxis(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type="category",_this.stroke="rgb(204, 214, 235)",_this.strokeWidth=1,_this}return __extends$O(SparklineAxis,_super),SparklineAxis}(Observable),Sparkline=function(_super){function Sparkline(){var _this=_super.call(this)||this;_this.id=createId(_this),_this.seriesRect={x:0,y:0,width:0,height:0},_this._context=void 0,_this._container=void 0,_this._data=void 0,_this.padding=new Padding(3),_this.xKey="x",_this.yKey="y",_this.dataType=void 0,_this.xData=[],_this.yData=[],_this.min=void 0,_this.max=void 0,_this.yScale=new LinearScale,_this.axis=new SparklineAxis,_this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},_this._width=100,_this._height=100,_this.smallestInterval=void 0,_this.layoutId=0,_this.defaultDateFormatter=locale.format("%m/%d/%y, %H:%M:%S"),_this._onMouseMove=_this.onMouseMove.bind(_this),_this._onMouseOut=_this.onMouseOut.bind(_this);var root=new Group;_this.rootGroup=root;var element=document.createElement("div");element.setAttribute("class","ag-sparkline-wrapper");var scene=new Scene(document);if(_this.scene=scene,_this.canvasElement=scene.canvas.element,scene.root=root,scene.container=element,scene.resize(_this.width,_this.height),_this.seriesRect.width=_this.width,_this.seriesRect.height=_this.height,-1===Sparkline.tooltipDocuments.indexOf(document)){var styleElement=document.createElement("style");styleElement.innerHTML="\n.ag-sparkline-tooltip-wrapper {\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n}\n\n.ag-sparkline-tooltip {\n    position: relative;\n    font: 12px arial,sans-serif;\n    border-radius: 2px;\n    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);\n    line-height: 1.7em;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    background-color: rgb(255, 255, 255);\n    color: rgba(0,0,0, 0.67);\n}\n\n.ag-sparkline-tooltip-content {\n    padding: 0 7px;\n}\n\n.ag-sparkline-tooltip-title {\n    padding-left: 7px;\n}\n\n.ag-sparkline-tooltip-wrapper-hidden {\n    top: -10000px !important;\n}\n\n.ag-sparkline-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n",document.head.insertBefore(styleElement,document.head.querySelector("style")),Sparkline.tooltipDocuments.push(document)}return _this.setupDomEventListeners(_this.scene.canvas.element),_this}return __extends$O(Sparkline,_super),Object.defineProperty(Sparkline.prototype,"context",{get:function(){return this._context},set:function(value){this._context!==value&&(this._context=value)},enumerable:!0,configurable:!0}),Object.defineProperty(Sparkline.prototype,"container",{get:function(){return this._container},set:function(value){if(this._container!==value){var parentNode=this.canvasElement.parentNode;null!=parentNode&&parentNode.removeChild(this.canvasElement),value&&value.appendChild(this.canvasElement),this._container=value}},enumerable:!0,configurable:!0}),Object.defineProperty(Sparkline.prototype,"data",{get:function(){return this._data},set:function(value){this._data!==value&&(this._data=value,this.processData())},enumerable:!0,configurable:!0}),Object.defineProperty(Sparkline.prototype,"width",{get:function(){return this._width},set:function(value){this._width!==value&&(this._width=value,this.scene.resize(value,this.height),this.scheduleLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(Sparkline.prototype,"height",{get:function(){return this._height},set:function(value){this._height!==value&&(this._height=value,this.scene.resize(this.width,value),this.scheduleLayout())},enumerable:!0,configurable:!0}),Sparkline.prototype.update=function(){},Sparkline.prototype.updateYScale=function(){this.updateYScaleRange(),this.updateYScaleDomain()},Sparkline.prototype.updateYScaleDomain=function(){},Sparkline.prototype.updateYScaleRange=function(){var yScale=this.yScale,seriesRect=this.seriesRect;yScale.range=[seriesRect.height,0]},Sparkline.prototype.updateXScale=function(){var type=this.axis.type;this.xScale=this.getXScale(type),this.updateXScaleRange(),this.updateXScaleDomain()},Sparkline.prototype.updateXScaleRange=function(){this.xScale.range=[0,this.seriesRect.width]},Sparkline.prototype.updateXScaleDomain=function(){var xMinMax,xData=this.xData,xScale=this.xScale;xScale instanceof LinearScale?xMinMax=extent(xData,isNumber):xScale instanceof TimeScale&&(xMinMax=extent(xData,isContinuous)),this.xScale.domain=xMinMax?xMinMax.slice():xData},Sparkline.prototype.getXScale=function(type){switch(void 0===type&&(type="category"),type){case"number":return new LinearScale;case"time":return new TimeScale;default:return new BandScale}},Sparkline.prototype.updateAxisLine=function(){},Sparkline.prototype.updateAxes=function(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()},Sparkline.prototype.updateCrosshairs=function(){this.updateXCrosshairLine(),this.updateYCrosshairLine()},Sparkline.prototype.generateNodeData=function(){return[]},Sparkline.prototype.getNodeData=function(){return[]},Sparkline.prototype.updateNodes=function(){},Sparkline.prototype.updateXCrosshairLine=function(){},Sparkline.prototype.updateYCrosshairLine=function(){},Sparkline.prototype.highlightDatum=function(closestDatum){this.updateNodes()},Sparkline.prototype.dehighlightDatum=function(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()},Sparkline.prototype.onMouseMove=function(event){var closestDatum=this.pickClosestSeriesNodeDatum(event.offsetX,event.offsetY);if(closestDatum){var oldHighlightedDatum=this.highlightedDatum;this.highlightedDatum=closestDatum,(this.highlightedDatum&&!oldHighlightedDatum||this.highlightedDatum&&oldHighlightedDatum&&this.highlightedDatum!==oldHighlightedDatum)&&(this.highlightDatum(closestDatum),this.updateCrosshairs()),this.tooltip.enabled&&this.handleTooltip(event,closestDatum)}},Sparkline.prototype.onMouseOut=function(event){this.dehighlightDatum(),this.tooltip.toggle(!1)},Sparkline.prototype.processData=function(){var _this=this,data=this.data,yData=this.yData,xData=this.xData;if(data&&!this.invalidData(this.data)){yData.length=0,xData.length=0;var n=data.length,dataType=this.getDataType(data);this.dataType=dataType;var prevX,xValueType=this.axis.type,xType="number"!==xValueType&&"time"!==xValueType?"category":xValueType,isContinuousX="number"===xType||"time"===xType,setSmallestXInterval=function(curr,prev){null==_this.smallestInterval&&(_this.smallestInterval={x:1/0,y:1/0});var x=_this.smallestInterval.x,interval=Math.abs(curr-prev);interval>0&&interval<x&&(_this.smallestInterval.x=interval)};if("number"===dataType)for(var i=0;i<n;i++){var xDatum=i,yDatum=data[i],x=this.getDatum(xDatum,xType),y=this.getDatum(yDatum,"number");isContinuousX&&setSmallestXInterval(x,prevX),xData.push(x),yData.push(y),prevX=x}else if("array"===dataType)for(i=0;i<n;i++){var datum=data[i];if(Array.isArray(datum)){xDatum=datum[0],yDatum=datum[1],x=this.getDatum(xDatum,xType),y=this.getDatum(yDatum,"number");if(null==x)continue;isContinuousX&&setSmallestXInterval(x,prevX),xData.push(x),yData.push(y),prevX=x}}else if("object"===dataType){var yKey=this.yKey,xKey=this.xKey;for(i=0;i<n;i++){if("object"==typeof(datum=data[i])&&!Array.isArray(datum)){xDatum=datum[xKey],yDatum=datum[yKey],x=this.getDatum(xDatum,xType),y=this.getDatum(yDatum,"number");if(null==x)continue;isContinuousX&&setSmallestXInterval(x,prevX),xData.push(x),yData.push(y),prevX=x}}}this.updateAxes(),this.update()}},Sparkline.prototype.getDataType=function(data){var e_1,_a;try{for(var data_1=__values$3(data),data_1_1=data_1.next();!data_1_1.done;data_1_1=data_1.next()){var datum=data_1_1.value;if(null!=datum){if(isNumber(datum))return"number";if(Array.isArray(datum))return"array";if("object"==typeof datum)return"object"}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{data_1_1&&!data_1_1.done&&(_a=data_1.return)&&_a.call(data_1)}finally{if(e_1)throw e_1.error}}},Sparkline.prototype.getDatum=function(value,type){if("number"===type&&isNumber(value)||"time"===type&&(isNumber(value)||isDate(value)))return value;if("category"===type){if(isString(value)||isDate(value)||isNumber(value))return{toString:function(){return String(value)}};if(function isStringObject(value){return!!value&&value.hasOwnProperty("toString")&&isString(value.toString())}(value))return value}},Object.defineProperty(Sparkline.prototype,"layoutScheduled",{get:function(){return!!this.layoutId},enumerable:!0,configurable:!0}),Sparkline.prototype.scheduleLayout=function(){var _this=this;this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame((function(){_this.setSparklineDimensions(),_this.invalidData(_this.data)||(_this.updateXScaleRange(),_this.updateYScaleRange(),_this.updateAxisLine(),_this.update(),_this.layoutId=0)}))},Sparkline.prototype.setSparklineDimensions=function(){var _a=this,width=_a.width,height=_a.height,padding=_a.padding,seriesRect=_a.seriesRect,rootGroup=_a.rootGroup,shrunkWidth=width-padding.left-padding.right,shrunkHeight=height-padding.top-padding.bottom;seriesRect.width=shrunkWidth,seriesRect.height=shrunkHeight,seriesRect.x=padding.left,seriesRect.y=padding.top,rootGroup.translationX=seriesRect.x,rootGroup.translationY=seriesRect.y},Sparkline.prototype.pickClosestSeriesNodeDatum=function(x,y){for(var closestDatum,minDistance=1/0,hitPoint=this.rootGroup.transformPoint(x,y),nodeData=this.getNodeData(),i=0;i<nodeData.length;i++){var datum=nodeData[i];if(!datum.point)return;var distance=this.getDistance(hitPoint,datum.point);if(!(distance<=minDistance))return closestDatum;minDistance=distance,closestDatum=datum}return closestDatum},Sparkline.prototype.getDistance=function(p1,p2){return Math.abs(p1.x-p2.x)},Sparkline.prototype.handleTooltip=function(event,datum){var seriesDatum=datum.seriesDatum,canvasElement=this.canvasElement,clientX=event.clientX,clientY=event.clientY;null==this.tooltip.container&&(this.tooltip.container=canvasElement);var meta={pageX:clientX,pageY:clientY},yValue=seriesDatum.y,xValue=seriesDatum.x,enabled=this.tooltip.enabled;if(this.tooltip.renderer){var tooltipRendererResult=this.tooltip.renderer({context:this.context,datum:seriesDatum,yValue,xValue});enabled="string"!=typeof tooltipRendererResult&&void 0!==tooltipRendererResult.enabled?tooltipRendererResult.enabled:enabled}var html=enabled&&void 0!==seriesDatum.y&&this.getTooltipHtml(datum);html&&this.tooltip.show(meta,html)},Sparkline.prototype.formatNumericDatum=function(datum){return String(Math.round(10*datum)/10)},Sparkline.prototype.formatDatum=function(datum){var type=this.axis.type||"category";return"number"===type&&"number"==typeof datum?this.formatNumericDatum(datum):"time"===type&&(datum instanceof Date||isNumber(datum))?this.defaultDateFormatter(datum):String(datum)},Sparkline.prototype.setupDomEventListeners=function(chartElement){chartElement.addEventListener("mousemove",this._onMouseMove),chartElement.addEventListener("mouseout",this._onMouseOut)},Sparkline.prototype.cleanupDomEventListeners=function(chartElement){chartElement.removeEventListener("mousemove",this._onMouseMove),chartElement.removeEventListener("mouseout",this._onMouseOut)},Sparkline.prototype.invalidData=function(data){return!data||!Array.isArray(data)||0===data.length},Sparkline.prototype.destroy=function(){this.scene.container=void 0,this.container=void 0,this.cleanupDomEventListeners(this.scene.canvas.element)},Sparkline.tooltipDocuments=[],Sparkline}(Observable),__extends$P=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();function toTooltipHtml(input,defaults){if("string"==typeof input)return input;defaults=defaults||{};var titleHtml,contentHtml,_a=input.content,content=void 0===_a?defaults.content||"":_a,_b=input.title,title=void 0===_b?defaults.title||void 0:_b,_c=input.color,color=void 0===_c?defaults.color:_c,_d=input.backgroundColor,backgroundColor=void 0===_d?defaults.backgroundColor:_d,_e=input.opacity,opacity=void 0===_e?defaults.opacity||1:_e;if(color?(titleHtml=title?'<span class="'+SparklineTooltip.class+'-title"; style="color: '+color+'">'+title+"</span>":"",contentHtml='<span class="'+SparklineTooltip.class+'-content" style="color: '+color+'">'+content+"</span>"):(titleHtml=title?'<span class="'+SparklineTooltip.class+'-title">'+title+"</span>":"",contentHtml='<span class="'+SparklineTooltip.class+'-content">'+content+"</span>"),backgroundColor){var bgColor=Color.fromString(backgroundColor.toLowerCase()),r=bgColor.r,g=bgColor.g,b=bgColor.b,alpha=(bgColor.a,opacity),bgColorRgbaString=Color.fromArray([r,g,b,alpha]).toRgbaString();return'<div class="'+SparklineTooltip.class+'" style="background-color: '+bgColorRgbaString+'">\n                    '+titleHtml+"\n                    "+contentHtml+"\n                </div>"}return'<div class="'+SparklineTooltip.class+'">\n                    '+titleHtml+"\n                    "+contentHtml+"\n                </div>"}var SparklineTooltip=function(_super){function SparklineTooltip(){var _this=_super.call(this)||this;return _this.element=document.createElement("div"),_this.enabled=!0,_this.container=void 0,_this.xOffset=10,_this.yOffset=0,_this.renderer=void 0,document.body.appendChild(_this.element),_this}return __extends$P(SparklineTooltip,_super),SparklineTooltip.prototype.isVisible=function(){var element=this.element;if(element.classList)return!element.classList.contains(SparklineTooltip.class+"-wrapper-hidden");var classes=element.getAttribute("class");return!!classes&&classes.split(" ").indexOf(SparklineTooltip.class+"-wrapper-hidden")<0},SparklineTooltip.prototype.updateClass=function(visible){var classList=[SparklineTooltip.class+"-wrapper"];!0!==visible&&classList.push(SparklineTooltip.class+"-wrapper-hidden"),this.element.setAttribute("class",classList.join(" "))},SparklineTooltip.prototype.show=function(meta,html){this.toggle(!1);var element=this.element;if(void 0!==html)element.innerHTML=html;else if(!element.innerHTML)return;var left=meta.pageX+this.xOffset,top=meta.pageY+this.yOffset,tooltipRect=element.getBoundingClientRect(),maxLeft=window.innerWidth-tooltipRect.width;if(this.container){var containerRect=this.container.getBoundingClientRect();maxLeft=containerRect.left+(containerRect.width-tooltipRect.width)}left>maxLeft&&(left=meta.pageX-element.clientWidth-this.xOffset),element.style.left=Math.round(left)+"px",element.style.top=Math.round(top)+"px",this.toggle(!0)},SparklineTooltip.prototype.toggle=function(visible){this.updateClass(visible)},SparklineTooltip.prototype.destroy=function(){var parentNode=this.element.parentNode;parentNode&&parentNode.removeChild(this.element)},SparklineTooltip.class="ag-sparkline-tooltip",SparklineTooltip}(Observable),__extends$Q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Marker=function(_super){function Marker(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._x=0,_this._y=0,_this._size=3,_this}return __extends$Q(Marker,_super),Object.defineProperty(Marker.prototype,"x",{get:function(){return this._x},set:function(value){this._x!==value&&(this._x=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Marker.prototype,"y",{get:function(){return this._y},set:function(value){this._y!==value&&(this._y=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Marker.prototype,"size",{get:function(){return this._size},set:function(value){this._size!==value&&(this._size=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Marker}(Shape),__extends$R=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Circle=function(_super){function Circle(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$R(Circle,_super),Circle.prototype.isPointInPath=function(x,y){return!1},Circle.prototype.isPointInStroke=function(x,y){return!1},Circle.prototype.render=function(ctx){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx);var x=this.x,y=this.y,radius=this.size/2;ctx.beginPath(),ctx.arc(x,y,radius,0,2*Math.PI,!1),this.fillStroke(ctx),this.dirty=!1},Circle.className="Circle",Circle}(Marker),__extends$S=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Diamond=function(_super){function Diamond(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$S(Diamond,_super),Diamond.prototype.isPointInStroke=function(x,y){return!1},Diamond.prototype.isPointInPath=function(x,y){return!1},Diamond.prototype.render=function(ctx){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx);var x=this.x,y=this.y,hs=this.size/2;ctx.beginPath(),ctx.moveTo(x,y-=hs),ctx.lineTo(x+=hs,y+=hs),ctx.lineTo(x-=hs,y+=hs),ctx.lineTo(x-=hs,y-=hs),ctx.lineTo(x+=hs,y-=hs),ctx.closePath(),this.fillStroke(ctx),this.dirty=!1},Diamond.className="Diamond",Diamond}(Marker),__extends$T=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Square=function(_super){function Square(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$T(Square,_super),Square.prototype.isPointInStroke=function(x,y){return!1},Square.prototype.isPointInPath=function(x,y){return!1},Square.prototype.render=function(ctx){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx);var x=this.x,y=this.y,size=this.size,hs=size/2;ctx.beginPath(),ctx.moveTo(x-=hs,y-=hs),ctx.lineTo(x+=size,y),ctx.lineTo(x,y+=size),ctx.lineTo(x-=size,y),ctx.lineTo(x,y-=size),ctx.closePath(),this.fillStroke(ctx),this.dirty=!1},Square.className="Square",Square}(Marker);function getMarker(shape){switch(shape){case"circle":default:return Circle;case"square":return Square;case"diamond":return Diamond}}function getLineDash(lineCap,lineDash){void 0===lineDash&&(lineDash="solid");var buttOrNull={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},roundOrSquare={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return"round"===lineCap||"square"===lineCap?null==roundOrSquare[lineDash]?(console.warn("'"+lineDash+"' is not a valid 'lineDash' option."),roundOrSquare.solid):roundOrSquare[lineDash]:null==buttOrNull[lineDash]?(console.warn("'"+lineDash+"' is not a valid 'lineDash' option."),buttOrNull.solid):buttOrNull[lineDash]}var __extends$U=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),SparklineMarker=function SparklineMarker(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0},SparklineLine=function SparklineLine(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1},SparklineCrosshairs=function SparklineCrosshairs(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}},AreaSparkline=function(_super){function AreaSparkline(){var _this=_super.call(this)||this;return _this.fill="rgba(124, 181, 236, 0.25)",_this.strokePath=new Path,_this.fillPath=new Path,_this.xCrosshairLine=new Line,_this.yCrosshairLine=new Line,_this.areaSparklineGroup=new Group,_this.fillPathData=[],_this.strokePathData=[],_this.xAxisLine=new Line,_this.markers=new Group,_this.markerSelection=Selection.select(_this.markers).selectAll(),_this.markerSelectionData=[],_this.marker=new SparklineMarker,_this.line=new SparklineLine,_this.crosshairs=new SparklineCrosshairs,_this.rootGroup.append(_this.areaSparklineGroup),_this.areaSparklineGroup.append([_this.fillPath,_this.xAxisLine,_this.strokePath,_this.xCrosshairLine,_this.yCrosshairLine,_this.markers]),_this}return __extends$U(AreaSparkline,_super),AreaSparkline.prototype.getNodeData=function(){return this.markerSelectionData},AreaSparkline.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.setData([]),this.markerSelection.exit.remove(),this.scheduleLayout()},AreaSparkline.prototype.update=function(){var data=this.generateNodeData();if(data){var nodeData=data.nodeData,fillData=data.fillData,strokeData=data.strokeData;this.markerSelectionData=nodeData,this.fillPathData=fillData,this.strokePathData=strokeData,this.updateSelection(nodeData),this.updateNodes(),this.updateStroke(strokeData),this.updateFill(fillData)}},AreaSparkline.prototype.updateYScaleDomain=function(){var yData=this.yData,yScale=this.yScale,yMinMax=extent(yData,isNumber),yMin=0,yMax=1;void 0!==yMinMax&&(yMin=this.min=yMinMax[0],yMax=this.max=yMinMax[1]),yMin=yMin<0?yMin:0,yMax=yMax<0?0:yMax,yScale.domain=[yMin,yMax]},AreaSparkline.prototype.generateNodeData=function(){var _a=this,data=_a.data,yData=_a.yData,xData=_a.xData,xScale=_a.xScale,yScale=_a.yScale;if(data){for(var firstValidX,lastValidX,previousX,nextX,offsetX=xScale instanceof BandScale?xScale.bandwidth/2:0,n=yData.length,nodeData=[],fillData=[],strokeData=[],yZero=yScale.convert(0),i=0;i<n;i++){var yDatum=yData[i],xDatum=xData[i],x=xScale.convert(xDatum)+offsetX,y=yScale.convert(yDatum);i+1<n&&(nextX=xScale.convert(xData[i+1])+offsetX),strokeData.push({seriesDatum:{x:xDatum,y:yDatum},point:{x,y}}),void 0===yDatum&&void 0!==previousX?(fillData.push({seriesDatum:void 0,point:{x:previousX,y:yZero}}),void 0!==nextX&&fillData.push({seriesDatum:void 0,point:{x:nextX,y:yZero}})):void 0!==yDatum&&(fillData.push({seriesDatum:{x:xDatum,y:yDatum},point:{x,y}}),nodeData.push({seriesDatum:{x:xDatum,y:yDatum},point:{x,y}}),firstValidX=void 0!==firstValidX?firstValidX:x,lastValidX=x),previousX=x}return fillData.push({seriesDatum:void 0,point:{x:lastValidX,y:yZero}},{seriesDatum:void 0,point:{x:firstValidX,y:yZero}}),{nodeData,fillData,strokeData}}},AreaSparkline.prototype.updateAxisLine=function(){var xScale=this.xScale,yScale=this.yScale,axis=this.axis,xAxisLine=this.xAxisLine;xAxisLine.x1=xScale.range[0],xAxisLine.x2=xScale.range[1],xAxisLine.y1=xAxisLine.y2=0,xAxisLine.stroke=axis.stroke,xAxisLine.strokeWidth=axis.strokeWidth;var yZero=yScale.convert(0);xAxisLine.translationY=yZero},AreaSparkline.prototype.updateSelection=function(selectionData){var shape=getMarker(this.marker.shape),updateMarkerSelection=this.markerSelection.setData(selectionData),enterMarkerSelection=updateMarkerSelection.enter.append(shape);updateMarkerSelection.exit.remove(),this.markerSelection=updateMarkerSelection.merge(enterMarkerSelection)},AreaSparkline.prototype.updateNodes=function(){var _this=this,highlightedDatum=this.highlightedDatum,highlightStyle=this.highlightStyle,marker=this.marker,highlightSize=highlightStyle.size,highlightFill=highlightStyle.fill,highlightStroke=highlightStyle.stroke,highlightStrokeWidth=highlightStyle.strokeWidth,markerFormatter=marker.formatter;this.markerSelection.each((function(node,datum,index){var point=datum.point,seriesDatum=datum.seriesDatum;if(point){var markerFormat,highlighted=datum===highlightedDatum,markerFill=highlighted&&void 0!==highlightFill?highlightFill:marker.fill,markerStroke=highlighted&&void 0!==highlightStroke?highlightStroke:marker.stroke,markerStrokeWidth=highlighted&&void 0!==highlightStrokeWidth?highlightStrokeWidth:marker.strokeWidth,markerSize=highlighted&&void 0!==highlightSize?highlightSize:marker.size;if(markerFormatter){var first=0===index,last=index===_this.markerSelectionData.length-1,min=seriesDatum.y===_this.min,max=seriesDatum.y===_this.max;markerFormat=markerFormatter({datum,xValue:seriesDatum.x,yValue:seriesDatum.y,min,max,first,last,fill:markerFill,stroke:markerStroke,strokeWidth:markerStrokeWidth,size:markerSize,highlighted})}node.size=markerFormat&&null!=markerFormat.size?markerFormat.size:markerSize,node.fill=markerFormat&&null!=markerFormat.fill?markerFormat.fill:markerFill,node.stroke=markerFormat&&null!=markerFormat.stroke?markerFormat.stroke:markerStroke,node.strokeWidth=markerFormat&&null!=markerFormat.strokeWidth?markerFormat.strokeWidth:markerStrokeWidth,node.translationX=point.x,node.translationY=point.y,node.visible=markerFormat&&null!=markerFormat.enabled?markerFormat.enabled:marker.enabled&&node.size>0}}))},AreaSparkline.prototype.updateStroke=function(strokeData){var strokePath=this.strokePath,yData=this.yData,line=this.line;if(!(yData.length<2)){var path=strokePath.path,n=strokeData.length,moveTo=!0;path.clear();for(var i=0;i<n;i++){var _b=strokeData[i],point=_b.point,seriesDatum=_b.seriesDatum,x=point.x,y=point.y;null==seriesDatum.y?moveTo=!0:moveTo?(path.moveTo(x,y),moveTo=!1):path.lineTo(x,y)}strokePath.lineJoin=strokePath.lineCap="round",strokePath.fill=void 0,strokePath.stroke=line.stroke,strokePath.strokeWidth=line.strokeWidth}},AreaSparkline.prototype.updateFill=function(areaData){var fillPath=this.fillPath,yData=this.yData,fill=this.fill,path=fillPath.path,n=areaData.length;if(path.clear(),!(yData.length<2)){for(var i=0;i<n;i++){var point=areaData[i].point,x=point.x,y=point.y;i>0?path.lineTo(x,y):path.moveTo(x,y)}path.closePath(),fillPath.lineJoin="round",fillPath.stroke=void 0,fillPath.fill=fill}},AreaSparkline.prototype.updateXCrosshairLine=function(){var yScale=this.yScale,xCrosshairLine=this.xCrosshairLine,highlightedDatum=this.highlightedDatum,xLine=this.crosshairs.xLine;if(xLine.enabled&&null!=highlightedDatum){xCrosshairLine.y1=yScale.range[0],xCrosshairLine.y2=yScale.range[1],xCrosshairLine.x1=xCrosshairLine.x2=0,xCrosshairLine.stroke=xLine.stroke,xCrosshairLine.strokeWidth=xLine.strokeWidth||1,xCrosshairLine.lineCap="round"===xLine.lineCap||"square"===xLine.lineCap?xLine.lineCap:void 0;var lineDash=xLine.lineDash;xCrosshairLine.lineDash=Array.isArray(lineDash)?lineDash:getLineDash(xCrosshairLine.lineCap,xLine.lineDash),xCrosshairLine.translationX=highlightedDatum.point.x}else xCrosshairLine.strokeWidth=0},AreaSparkline.prototype.updateYCrosshairLine=function(){var xScale=this.xScale,yCrosshairLine=this.yCrosshairLine,highlightedDatum=this.highlightedDatum,yLine=this.crosshairs.yLine;if(yLine.enabled&&null!=highlightedDatum){yCrosshairLine.x1=xScale.range[0],yCrosshairLine.x2=xScale.range[1],yCrosshairLine.y1=yCrosshairLine.y2=0,yCrosshairLine.stroke=yLine.stroke,yCrosshairLine.strokeWidth=yLine.strokeWidth||1,yCrosshairLine.lineCap="round"===yLine.lineCap||"square"===yLine.lineCap?yLine.lineCap:void 0;var lineDash=yLine.lineDash;yCrosshairLine.lineDash=Array.isArray(lineDash)?lineDash:getLineDash(yCrosshairLine.lineCap,yLine.lineDash),yCrosshairLine.translationY=highlightedDatum.point.y}else yCrosshairLine.strokeWidth=0},AreaSparkline.prototype.getTooltipHtml=function(datum){var dataType=this.dataType,seriesDatum=datum.seriesDatum,yValue=seriesDatum.y,xValue=seriesDatum.x,defaults={content:this.formatNumericDatum(yValue),title:"array"===dataType||"object"===dataType?this.formatDatum(xValue):void 0};return this.tooltip.renderer?toTooltipHtml(this.tooltip.renderer({context:this.context,datum:seriesDatum,yValue,xValue}),defaults):toTooltipHtml(defaults)},AreaSparkline.className="AreaSparkline",AreaSparkline}(Sparkline),__extends$V=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),SparklineMarker$1=function SparklineMarker(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0},SparklineLine$1=function SparklineLine(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1},SparklineCrosshairs$1=function SparklineCrosshairs(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}},LineSparkline=function(_super){function LineSparkline(){var _this=_super.call(this)||this;return _this.linePath=new Path,_this.xCrosshairLine=new Line,_this.yCrosshairLine=new Line,_this.lineSparklineGroup=new Group,_this.markers=new Group,_this.markerSelection=Selection.select(_this.markers).selectAll(),_this.markerSelectionData=[],_this.marker=new SparklineMarker$1,_this.line=new SparklineLine$1,_this.crosshairs=new SparklineCrosshairs$1,_this.rootGroup.append(_this.lineSparklineGroup),_this.lineSparklineGroup.append([_this.linePath,_this.xCrosshairLine,_this.yCrosshairLine,_this.markers]),_this}return __extends$V(LineSparkline,_super),LineSparkline.prototype.getNodeData=function(){return this.markerSelectionData},LineSparkline.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.setData([]),this.markerSelection.exit.remove(),this.scheduleLayout()},LineSparkline.prototype.update=function(){var nodeData=this.generateNodeData();nodeData&&(this.markerSelectionData=nodeData,this.updateSelection(nodeData),this.updateNodes(),this.updateLine())},LineSparkline.prototype.updateYScaleDomain=function(){var yData=this.yData,yScale=this.yScale,yMinMax=extent(yData,isNumber),yMin=0,yMax=1;if(void 0!==yMinMax&&(yMin=this.min=yMinMax[0],yMax=this.max=yMinMax[1]),yMin===yMax){var padding=Math.abs(.01*yMin);yMin-=padding,yMax+=padding}yScale.domain=[yMin,yMax]},LineSparkline.prototype.generateNodeData=function(){var _a=this,data=_a.data,yData=_a.yData,xData=_a.xData,xScale=_a.xScale,yScale=_a.yScale;if(data){for(var offsetX=xScale instanceof BandScale?xScale.bandwidth/2:0,nodeData=[],i=0;i<yData.length;i++){var yDatum=yData[i],xDatum=xData[i];if(null!=yDatum){var x=xScale.convert(xDatum)+offsetX,y=yScale.convert(yDatum);nodeData.push({seriesDatum:{x:xDatum,y:yDatum},point:{x,y}})}}return nodeData}},LineSparkline.prototype.updateSelection=function(selectionData){var shape=getMarker(this.marker.shape),updateMarkerSelection=this.markerSelection.setData(selectionData),enterMarkerSelection=updateMarkerSelection.enter.append(shape);updateMarkerSelection.exit.remove(),this.markerSelection=updateMarkerSelection.merge(enterMarkerSelection)},LineSparkline.prototype.updateNodes=function(){var _this=this,highlightedDatum=this.highlightedDatum,highlightStyle=this.highlightStyle,marker=this.marker,highlightSize=highlightStyle.size,highlightFill=highlightStyle.fill,highlightStroke=highlightStyle.stroke,highlightStrokeWidth=highlightStyle.strokeWidth,markerFormatter=marker.formatter;this.markerSelection.each((function(node,datum,index){var markerFormat,highlighted=datum===highlightedDatum,markerFill=highlighted&&void 0!==highlightFill?highlightFill:marker.fill,markerStroke=highlighted&&void 0!==highlightStroke?highlightStroke:marker.stroke,markerStrokeWidth=highlighted&&void 0!==highlightStrokeWidth?highlightStrokeWidth:marker.strokeWidth,markerSize=highlighted&&void 0!==highlightSize?highlightSize:marker.size,seriesDatum=datum.seriesDatum,point=datum.point;if(markerFormatter){var first=0===index,last=index===_this.markerSelectionData.length-1,min=seriesDatum.y===_this.min,max=seriesDatum.y===_this.max;markerFormat=markerFormatter({datum,xValue:seriesDatum.x,yValue:seriesDatum.y,min,max,first,last,fill:markerFill,stroke:markerStroke,strokeWidth:markerStrokeWidth,size:markerSize,highlighted})}node.size=markerFormat&&null!=markerFormat.size?markerFormat.size:markerSize,node.fill=markerFormat&&null!=markerFormat.fill?markerFormat.fill:markerFill,node.stroke=markerFormat&&null!=markerFormat.stroke?markerFormat.stroke:markerStroke,node.strokeWidth=markerFormat&&null!=markerFormat.strokeWidth?markerFormat.strokeWidth:markerStrokeWidth,node.translationX=point.x,node.translationY=point.y,node.visible=markerFormat&&null!=markerFormat.enabled?markerFormat.enabled:marker.enabled&&node.size>0}))},LineSparkline.prototype.updateLine=function(){var _a=this,linePath=_a.linePath,yData=_a.yData,xData=_a.xData,xScale=_a.xScale,yScale=_a.yScale,line=_a.line;if(!(yData.length<2)){var path=linePath.path,n=yData.length,offsetX=xScale instanceof BandScale?xScale.bandwidth/2:0,moveTo=!0;path.clear();for(var i=0;i<n;i++){var xDatum=xData[i],yDatum=yData[i],x=xScale.convert(xDatum)+offsetX,y=yScale.convert(yDatum);null==yDatum?moveTo=!0:moveTo?(path.moveTo(x,y),moveTo=!1):path.lineTo(x,y)}linePath.fill=void 0,linePath.stroke=line.stroke,linePath.strokeWidth=line.strokeWidth}},LineSparkline.prototype.updateXCrosshairLine=function(){var yScale=this.yScale,xCrosshairLine=this.xCrosshairLine,highlightedDatum=this.highlightedDatum,xLine=this.crosshairs.xLine;if(xLine.enabled&&null!=highlightedDatum){xCrosshairLine.y1=yScale.range[0],xCrosshairLine.y2=yScale.range[1],xCrosshairLine.x1=xCrosshairLine.x2=0,xCrosshairLine.stroke=xLine.stroke,xCrosshairLine.strokeWidth=xLine.strokeWidth||1,xCrosshairLine.lineCap="round"===xLine.lineCap||"square"===xLine.lineCap?xLine.lineCap:void 0;var lineDash=xLine.lineDash;xCrosshairLine.lineDash=Array.isArray(lineDash)?lineDash:getLineDash(xCrosshairLine.lineCap,xLine.lineDash),xCrosshairLine.translationX=highlightedDatum.point.x}else xCrosshairLine.strokeWidth=0},LineSparkline.prototype.updateYCrosshairLine=function(){var xScale=this.xScale,yCrosshairLine=this.yCrosshairLine,highlightedDatum=this.highlightedDatum,yLine=this.crosshairs.yLine;if(yLine.enabled&&null!=highlightedDatum){yCrosshairLine.x1=xScale.range[0],yCrosshairLine.x2=xScale.range[1],yCrosshairLine.y1=yCrosshairLine.y2=0,yCrosshairLine.stroke=yLine.stroke,yCrosshairLine.strokeWidth=yLine.strokeWidth||1,yCrosshairLine.lineCap="round"===yLine.lineCap||"square"===yLine.lineCap?yLine.lineCap:void 0;var lineDash=yLine.lineDash;yCrosshairLine.lineDash=Array.isArray(lineDash)?lineDash:getLineDash(yCrosshairLine.lineCap,yLine.lineDash),yCrosshairLine.translationY=highlightedDatum.point.y}else yCrosshairLine.strokeWidth=0},LineSparkline.prototype.getTooltipHtml=function(datum){var dataType=this.dataType,seriesDatum=datum.seriesDatum,yValue=seriesDatum.y,xValue=seriesDatum.x,defaults={content:this.formatNumericDatum(yValue),title:"array"===dataType||"object"===dataType?this.formatDatum(xValue):void 0};return this.tooltip.renderer?toTooltipHtml(this.tooltip.renderer({context:this.context,datum:seriesDatum,yValue,xValue}),defaults):toTooltipHtml(defaults)},LineSparkline.className="LineSparkline",LineSparkline}(Sparkline),__extends$W=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Rectangle=function(_super){function Rectangle(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._x=0,_this._y=0,_this._width=0,_this._height=0,_this._crisp=!1,_this}return __extends$W(Rectangle,_super),Object.defineProperty(Rectangle.prototype,"x",{get:function(){return this._x},set:function(value){this._x!==value&&(this._x=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle.prototype,"y",{get:function(){return this._y},set:function(value){this._y!==value&&(this._y=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle.prototype,"width",{get:function(){return this._width},set:function(value){this._width!==value&&(this._width=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle.prototype,"height",{get:function(){return this._height},set:function(value){this._height!==value&&(this._height=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle.prototype,"crisp",{get:function(){return this._crisp},set:function(value){this._crisp!==value&&(this._crisp=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Rectangle.prototype.isPointInStroke=function(x,y){return!1},Rectangle.prototype.isPointInPath=function(x,y){return!1},Rectangle.prototype.render=function(ctx){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx);var _a=this,x=_a.x,y=_a.y,width=_a.width,height=_a.height,crisp=_a.crisp;if(ctx.beginPath(),crisp){var a=this.alignment,al=this.align;ctx.rect(al(a,x),al(a,y),al(a,x,width),al(a,y,height))}else ctx.rect(x,y,width,height);this.fillStroke(ctx),this.dirty=!1},Rectangle.className="Column",Rectangle}(Shape),__extends$X=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(_super){function Text(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._x=0,_this._y=0,_this.lineBreakRegex=/\r?\n/g,_this.lines=[],_this._text="",_this._dirtyFont=!0,_this._fontSize=10,_this._fontFamily="sans-serif",_this._textAlign=Text.defaultStyles.textAlign,_this._textBaseline=Text.defaultStyles.textBaseline,_this._lineHeight=14,_this}__extends$X(Text,_super),Object.defineProperty(Text.prototype,"x",{get:function(){return this._x},set:function(value){this._x!==value&&(this._x=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"y",{get:function(){return this._y},set:function(value){this._y!==value&&(this._y=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Text.prototype.splitText=function(){this.lines=this._text.split(this.lineBreakRegex)},Object.defineProperty(Text.prototype,"text",{get:function(){return this._text},set:function(value){var str=String(value);this._text!==str&&(this._text=str,this.splitText(),this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"font",{get:function(){return this.dirtyFont&&(this.dirtyFont=!1,this._font=getFont$1(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)),this._font},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"dirtyFont",{get:function(){return this._dirtyFont},set:function(value){this._dirtyFont!==value&&(this._dirtyFont=value,value&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(value){this._fontStyle!==value&&(this._fontStyle=value,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(value){this._fontWeight!==value&&(this._fontWeight=value,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"fontSize",{get:function(){return this._fontSize},set:function(value){isFinite(value)||(value=10),this._fontSize!==value&&(this._fontSize=value,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(value){this._fontFamily!==value&&(this._fontFamily=value,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"textAlign",{get:function(){return this._textAlign},set:function(value){this._textAlign!==value&&(this._textAlign=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(value){this._textBaseline!==value&&(this._textBaseline=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(value){this._lineHeight!==value&&(this._lineHeight=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Text.prototype.computeBBox=function(){return HdpiCanvas.has.textMetrics?this.getPreciseBBox():this.getApproximateBBox()},Text.prototype.getPreciseBBox=function(){var metrics=HdpiCanvas.measureText(this.text,this.font,this.textBaseline,this.textAlign);return new BBox(this.x-metrics.actualBoundingBoxLeft,this.y-metrics.actualBoundingBoxAscent,metrics.width,metrics.actualBoundingBoxAscent+metrics.actualBoundingBoxDescent)},Text.prototype.getApproximateBBox=function(){var size=HdpiCanvas.getTextSize(this.text,this.font),x=this.x,y=this.y;switch(this.textAlign){case"end":case"right":x-=size.width;break;case"center":x-=size.width/2}switch(this.textBaseline){case"alphabetic":y-=.7*size.height;break;case"middle":y-=.45*size.height;break;case"ideographic":case"bottom":y-=size.height;break;case"hanging":y-=.2*size.height}return new BBox(x,y,size.width,size.height)},Text.prototype.isPointInPath=function(x,y){var point=this.transformPoint(x,y),bbox=this.computeBBox();return!!bbox&&bbox.containsPoint(point.x,point.y)},Text.prototype.isPointInStroke=function(x,y){return!1},Text.prototype.render=function(ctx){if(this.lines.length&&this.scene){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx);var fill=this.fill,stroke=this.stroke,strokeWidth=this.strokeWidth;ctx.font=this.font,ctx.textAlign=this.textAlign,ctx.textBaseline=this.textBaseline;var pixelRatio=this.scene.canvas.pixelRatio||1,globalAlpha=ctx.globalAlpha;if(fill){ctx.fillStyle=fill,ctx.globalAlpha=globalAlpha*this.opacity*this.fillOpacity;var fillShadow=this.fillShadow,text=this.text,x=this.x,y=this.y;fillShadow&&fillShadow.enabled&&(ctx.shadowColor=fillShadow.color,ctx.shadowOffsetX=fillShadow.xOffset*pixelRatio,ctx.shadowOffsetY=fillShadow.yOffset*pixelRatio,ctx.shadowBlur=fillShadow.blur*pixelRatio),ctx.fillText(text,x,y)}if(stroke&&strokeWidth){ctx.strokeStyle=stroke,ctx.lineWidth=strokeWidth,ctx.globalAlpha=globalAlpha*this.opacity*this.strokeOpacity;var _c=this,lineDash=_c.lineDash,lineDashOffset=_c.lineDashOffset,lineCap=_c.lineCap,lineJoin=_c.lineJoin,strokeShadow=_c.strokeShadow;text=_c.text,x=_c.x,y=_c.y;lineDash&&ctx.setLineDash(lineDash),lineDashOffset&&(ctx.lineDashOffset=lineDashOffset),lineCap&&(ctx.lineCap=lineCap),lineJoin&&(ctx.lineJoin=lineJoin),strokeShadow&&strokeShadow.enabled&&(ctx.shadowColor=strokeShadow.color,ctx.shadowOffsetX=strokeShadow.xOffset*pixelRatio,ctx.shadowOffsetY=strokeShadow.yOffset*pixelRatio,ctx.shadowBlur=strokeShadow.blur*pixelRatio),ctx.strokeText(text,x,y)}this.dirty=!1}},Text.className="Text",Text.defaultStyles=chainObjects(Shape.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"})}(Shape);function getFont$1(fontSize,fontFamily,fontStyle,fontWeight){return[fontStyle||"",fontWeight||"",fontSize+"px",fontFamily].join(" ").trim()}var __extends$Y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$D=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},Label=function(_super){function Label(){var _this=_super.call(this)||this;return _this.enabled=!0,_this.fontSize=8,_this.fontFamily="Verdana, sans-serif",_this.color="rgba(70, 70, 70, 1)",_this}return __extends$Y(Label,_super),Label.prototype.getFont=function(){return getFont$1(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)},__decorate$D([reactive("change","dataChange")],Label.prototype,"enabled",void 0),__decorate$D([reactive("change")],Label.prototype,"fontSize",void 0),__decorate$D([reactive("change")],Label.prototype,"fontFamily",void 0),__decorate$D([reactive("change")],Label.prototype,"fontStyle",void 0),__decorate$D([reactive("change")],Label.prototype,"fontWeight",void 0),__decorate$D([reactive("change")],Label.prototype,"color",void 0),Label}(Observable),__extends$Z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Text$1=function(_super){function Text(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._x=0,_this._y=0,_this.lineBreakRegex=/\r?\n/g,_this.lines=[],_this._text="",_this._dirtyFont=!0,_this._fontSize=10,_this._fontFamily="sans-serif",_this._textAlign=Text.defaultStyles.textAlign,_this._textBaseline=Text.defaultStyles.textBaseline,_this._lineHeight=14,_this}return __extends$Z(Text,_super),Object.defineProperty(Text.prototype,"x",{get:function(){return this._x},set:function(value){this._x!==value&&(this._x=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"y",{get:function(){return this._y},set:function(value){this._y!==value&&(this._y=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Text.prototype.splitText=function(){this.lines=this._text.split(this.lineBreakRegex)},Object.defineProperty(Text.prototype,"text",{get:function(){return this._text},set:function(value){var str=String(value);this._text!==str&&(this._text=str,this.splitText(),this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"font",{get:function(){return this.dirtyFont&&(this.dirtyFont=!1,this._font=function getFont$2(fontSize,fontFamily,fontStyle,fontWeight){return[fontStyle||"",fontWeight||"",fontSize+"px",fontFamily].join(" ").trim()}(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)),this._font},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"dirtyFont",{get:function(){return this._dirtyFont},set:function(value){this._dirtyFont!==value&&(this._dirtyFont=value,value&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(value){this._fontStyle!==value&&(this._fontStyle=value,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(value){this._fontWeight!==value&&(this._fontWeight=value,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"fontSize",{get:function(){return this._fontSize},set:function(value){isFinite(value)||(value=10),this._fontSize!==value&&(this._fontSize=value,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(value){this._fontFamily!==value&&(this._fontFamily=value,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"textAlign",{get:function(){return this._textAlign},set:function(value){this._textAlign!==value&&(this._textAlign=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(value){this._textBaseline!==value&&(this._textBaseline=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(value){this._lineHeight!==value&&(this._lineHeight=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Text.prototype.computeBBox=function(){return HdpiCanvas.has.textMetrics?this.getPreciseBBox():this.getApproximateBBox()},Text.prototype.getPreciseBBox=function(){var metrics=HdpiCanvas.measureText(this.text,this.font,this.textBaseline,this.textAlign);return new BBox(this.x-metrics.actualBoundingBoxLeft,this.y-metrics.actualBoundingBoxAscent,metrics.width,metrics.actualBoundingBoxAscent+metrics.actualBoundingBoxDescent)},Text.prototype.getApproximateBBox=function(){var size=HdpiCanvas.getTextSize(this.text,this.font),x=this.x,y=this.y;switch(this.textAlign){case"end":case"right":x-=size.width;break;case"center":x-=size.width/2}switch(this.textBaseline){case"alphabetic":y-=.7*size.height;break;case"middle":y-=.45*size.height;break;case"ideographic":case"bottom":y-=size.height;break;case"hanging":y-=.2*size.height}return new BBox(x,y,size.width,size.height)},Text.prototype.isPointInPath=function(x,y){var point=this.transformPoint(x,y),bbox=this.computeBBox();return!!bbox&&bbox.containsPoint(point.x,point.y)},Text.prototype.isPointInStroke=function(x,y){return!1},Text.prototype.render=function(ctx){if(this.lines.length&&this.scene){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx);var fill=this.fill,stroke=this.stroke,strokeWidth=this.strokeWidth;ctx.font=this.font,ctx.textAlign=this.textAlign,ctx.textBaseline=this.textBaseline;var pixelRatio=this.scene.canvas.pixelRatio||1,globalAlpha=ctx.globalAlpha;if(fill){ctx.fillStyle=fill,ctx.globalAlpha=globalAlpha*this.opacity*this.fillOpacity;var fillShadow=this.fillShadow,text=this.text,x=this.x,y=this.y;fillShadow&&fillShadow.enabled&&(ctx.shadowColor=fillShadow.color,ctx.shadowOffsetX=fillShadow.xOffset*pixelRatio,ctx.shadowOffsetY=fillShadow.yOffset*pixelRatio,ctx.shadowBlur=fillShadow.blur*pixelRatio),ctx.fillText(text,x,y)}if(stroke&&strokeWidth){ctx.strokeStyle=stroke,ctx.lineWidth=strokeWidth,ctx.globalAlpha=globalAlpha*this.opacity*this.strokeOpacity;var _c=this,lineDash=_c.lineDash,lineDashOffset=_c.lineDashOffset,lineCap=_c.lineCap,lineJoin=_c.lineJoin,strokeShadow=_c.strokeShadow;text=_c.text,x=_c.x,y=_c.y;lineDash&&ctx.setLineDash(lineDash),lineDashOffset&&(ctx.lineDashOffset=lineDashOffset),lineCap&&(ctx.lineCap=lineCap),lineJoin&&(ctx.lineJoin=lineJoin),strokeShadow&&strokeShadow.enabled&&(ctx.shadowColor=strokeShadow.color,ctx.shadowOffsetX=strokeShadow.xOffset*pixelRatio,ctx.shadowOffsetY=strokeShadow.yOffset*pixelRatio,ctx.shadowBlur=strokeShadow.blur*pixelRatio),ctx.strokeText(text,x,y)}this.dirty=!1}},Text.className="Text",Text.defaultStyles=chainObjects(Shape.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),Text}(Shape);var BarColumnNodeTag,BarColumnLabelPlacement,__extends$_=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(BarColumnNodeTag){BarColumnNodeTag[BarColumnNodeTag.Rect=0]="Rect",BarColumnNodeTag[BarColumnNodeTag.Label=1]="Label"}(BarColumnNodeTag||(BarColumnNodeTag={})),function(BarColumnLabelPlacement){BarColumnLabelPlacement.InsideBase="insideBase",BarColumnLabelPlacement.InsideEnd="insideEnd",BarColumnLabelPlacement.Center="center",BarColumnLabelPlacement.OutsideEnd="outsideEnd"}(BarColumnLabelPlacement||(BarColumnLabelPlacement={}));var BarColumnLabel=function(_super){function BarColumnLabel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.formatter=void 0,_this.placement=BarColumnLabelPlacement.InsideEnd,_this}return __extends$_(BarColumnLabel,_super),BarColumnLabel}(Label),BarColumnSparkline=function(_super){function BarColumnSparkline(){var _this=_super.call(this)||this;return _this.fill="rgb(124, 181, 236)",_this.stroke="silver",_this.strokeWidth=0,_this.paddingInner=.1,_this.paddingOuter=.2,_this.valueAxisDomain=void 0,_this.formatter=void 0,_this.axisLine=new Line,_this.bandWidth=0,_this.sparklineGroup=new Group,_this.rectGroup=new Group,_this.labelGroup=new Group,_this.rectSelection=Selection.select(_this.rectGroup).selectAll(),_this.labelSelection=Selection.select(_this.labelGroup).selectAll(),_this.nodeSelectionData=[],_this.label=new BarColumnLabel,_this.rootGroup.append(_this.sparklineGroup),_this.sparklineGroup.append([_this.rectGroup,_this.axisLine,_this.labelGroup]),_this.axisLine.lineCap="round",_this.label.enabled=!1,_this}return __extends$_(BarColumnSparkline,_super),BarColumnSparkline.prototype.getNodeData=function(){return this.nodeSelectionData},BarColumnSparkline.prototype.update=function(){this.updateSelections(),this.updateNodes()},BarColumnSparkline.prototype.updateSelections=function(){var nodeData=this.generateNodeData();nodeData&&(this.nodeSelectionData=nodeData,this.updateRectSelection(nodeData),this.updateLabelSelection(nodeData))},BarColumnSparkline.prototype.updateNodes=function(){this.updateRectNodes(),this.updateLabelNodes()},BarColumnSparkline.prototype.calculateStep=function(range){var _a,_b,xScale=this.xScale,paddingInner=this.paddingInner,paddingOuter=this.paddingOuter,smallestInterval=this.smallestInterval,intervals=(xScale.domain[1]-xScale.domain[0])/(null!=(_b=null===(_a=smallestInterval)||void 0===_a?void 0:_a.x)?_b:1)+1,bands=Math.min(intervals,50),gaps=bands-1;return range/Math.max(1,2*paddingOuter+gaps*paddingInner+bands)},BarColumnSparkline.prototype.updateYScaleDomain=function(){var yScale=this.yScale,yData=this.yData,valueAxisDomain=this.valueAxisDomain,yMinMax=extent(yData,isNumber),yMin=0,yMax=1;void 0!==yMinMax&&(yMin=this.min=yMinMax[0],yMax=this.max=yMinMax[1]),yMin=yMin<0?yMin:0,yMax=yMax<0?0:yMax,valueAxisDomain&&(valueAxisDomain[1]<yMax&&(valueAxisDomain[1]=yMax),valueAxisDomain[0]>yMin&&(valueAxisDomain[0]=yMin)),yScale.domain=valueAxisDomain||[yMin,yMax]},BarColumnSparkline.prototype.updateRectSelection=function(selectionData){var updateRectSelection=this.rectSelection.setData(selectionData),enterRectSelection=updateRectSelection.enter.append(Rectangle);updateRectSelection.exit.remove(),this.rectSelection=updateRectSelection.merge(enterRectSelection)},BarColumnSparkline.prototype.updateRectNodes=function(){var _this=this,_a=this,highlightedDatum=_a.highlightedDatum,nodeFormatter=_a.formatter,fill=_a.fill,stroke=_a.stroke,strokeWidth=_a.strokeWidth,_b=this.highlightStyle,highlightFill=_b.fill,highlightStroke=_b.stroke,highlightStrokeWidth=_b.strokeWidth;this.rectSelection.each((function(node,datum,index){var nodeFormat,highlighted=datum===highlightedDatum,nodeFill=highlighted&&void 0!==highlightFill?highlightFill:fill,nodeStroke=highlighted&&void 0!==highlightStroke?highlightStroke:stroke,nodeStrokeWidth=highlighted&&void 0!==highlightStrokeWidth?highlightStrokeWidth:strokeWidth,x=datum.x,y=datum.y,width=datum.width,height=datum.height,seriesDatum=datum.seriesDatum;if(nodeFormatter){var first=0===index,last=index===_this.nodeSelectionData.length-1,min=seriesDatum.y===_this.min,max=seriesDatum.y===_this.max;nodeFormat=nodeFormatter({datum,xValue:seriesDatum.x,yValue:seriesDatum.y,width,height,min,max,first,last,fill:nodeFill,stroke:nodeStroke,strokeWidth:nodeStrokeWidth,highlighted})}node.fill=nodeFormat&&nodeFormat.fill||nodeFill,node.stroke=nodeFormat&&nodeFormat.stroke||nodeStroke,node.strokeWidth=nodeFormat&&nodeFormat.strokeWidth||nodeStrokeWidth,node.x=node.y=0,node.width=width,node.height=height,node.visible=node.height>0,node.translationX=x,node.translationY=y}))},BarColumnSparkline.prototype.updateLabelSelection=function(selectionData){var updateLabels=this.labelSelection.setData(selectionData),enterLabels=updateLabels.enter.append(Text$1).each((function(text){text.tag=BarColumnNodeTag.Label,text.pointerEvents=PointerEvents.None}));updateLabels.exit.remove(),this.labelSelection=updateLabels.merge(enterLabels)},BarColumnSparkline.prototype.updateLabelNodes=function(){var _a=this.label,labelEnabled=_a.enabled,fontStyle=_a.fontStyle,fontWeight=_a.fontWeight,fontSize=_a.fontSize,fontFamily=_a.fontFamily,color=_a.color;this.labelSelection.each((function(text,datum){var label=datum.label;label&&labelEnabled?(text.fontStyle=fontStyle,text.fontWeight=fontWeight,text.fontSize=fontSize,text.fontFamily=fontFamily,text.textAlign=label.textAlign,text.textBaseline=label.textBaseline,text.text=label.text,text.x=label.x,text.y=label.y,text.fill=color,text.visible=!0):text.visible=!1}))},BarColumnSparkline.prototype.getTooltipHtml=function(datum){var dataType=this.dataType,seriesDatum=datum.seriesDatum,yValue=seriesDatum.y,xValue=seriesDatum.x,defaults={content:this.formatNumericDatum(yValue),title:"array"===dataType||"object"===dataType?this.formatDatum(xValue):void 0};return this.tooltip.renderer?toTooltipHtml(this.tooltip.renderer({context:this.context,datum:seriesDatum,yValue,xValue}),defaults):toTooltipHtml(defaults)},BarColumnSparkline.prototype.formatLabelValue=function(value){return value%1!=0?value.toFixed(1):value.toFixed(0)},BarColumnSparkline}(Sparkline),__extends$$=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),BarSparkline=function(_super){function BarSparkline(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$$(BarSparkline,_super),BarSparkline.prototype.updateYScaleRange=function(){var seriesRect=this.seriesRect;this.yScale.range=[0,seriesRect.width]},BarSparkline.prototype.updateXScaleRange=function(){var xScale=this.xScale,seriesRect=this.seriesRect,paddingOuter=this.paddingOuter,paddingInner=this.paddingInner;if(xScale instanceof BandScale)xScale.range=[0,seriesRect.height],xScale.paddingInner=paddingInner,xScale.paddingOuter=paddingOuter;else{var step=this.calculateStep(seriesRect.height),padding=step*paddingOuter;this.bandWidth=step*(1-paddingInner),xScale.range=[padding,seriesRect.height-padding-this.bandWidth]}},BarSparkline.prototype.updateAxisLine=function(){var yScale=this.yScale,axis=this.axis,axisLine=this.axisLine,seriesRect=this.seriesRect,strokeWidth=axis.strokeWidth;axisLine.x1=0,axisLine.x2=0,axisLine.y1=0,axisLine.y2=seriesRect.height,axisLine.stroke=axis.stroke,axisLine.strokeWidth=strokeWidth+(strokeWidth%2==1?1:0);var yZero=yScale.convert(0);axisLine.translationX=yZero},BarSparkline.prototype.generateNodeData=function(){var _a=this,data=_a.data,yData=_a.yData,xData=_a.xData,xScale=_a.xScale,yScale=_a.yScale,fill=_a.fill,stroke=_a.stroke,strokeWidth=_a.strokeWidth,label=_a.label;if(data){for(var labelFontStyle=label.fontStyle,labelFontWeight=label.fontWeight,labelFontSize=label.fontSize,labelFontFamily=label.fontFamily,labelColor=label.color,labelFormatter=label.formatter,labelPlacement=label.placement,nodeData=[],yZero=yScale.convert(0),i=0,n=yData.length;i<n;i++){var yDatum=yData[i],xDatum=xData[i],invalidDatum=void 0===yDatum;invalidDatum&&(yDatum=0);var y=xScale.convert(xDatum),x=Math.min(yScale.convert(yDatum),yZero),bottom=Math.max(yScale.convert(yDatum),yZero),height=xScale instanceof BandScale?xScale.bandwidth:this.bandWidth,width=bottom-x,midPoint={x:yZero,y},labelText=void 0;labelText=labelFormatter?labelFormatter({value:yDatum}):void 0!==yDatum&&isNumber(yDatum)?this.formatLabelValue(yDatum):"";var labelY=y+height/2,labelX=void 0,labelTextAlign=void 0,isPositiveY=void 0!==yDatum&&yDatum>=0;if(labelPlacement===BarColumnLabelPlacement.Center)labelX=x+width/2,labelTextAlign="center";else if(labelPlacement===BarColumnLabelPlacement.OutsideEnd)labelX=x+(isPositiveY?width+4:-4),labelTextAlign=isPositiveY?"start":"end";else if(labelPlacement===BarColumnLabelPlacement.InsideEnd){labelX=x+(isPositiveY?width-4:4),labelTextAlign=isPositiveY?"end":"start";var textWidth=HdpiCanvas.getTextSize(labelText,labelFontFamily).width||20;(isPositiveY&&labelX<yZero+textWidth||!isPositiveY&&labelX>yZero-textWidth)&&(labelX=yZero+4*(isPositiveY?1:-1),labelTextAlign=isPositiveY?"start":"end")}else labelX=yZero+4*(isPositiveY?1:-1),labelTextAlign=isPositiveY?"start":"end";nodeData.push({x,y,width,height,fill,stroke,strokeWidth,seriesDatum:{x:xDatum,y:invalidDatum?void 0:yDatum},point:midPoint,label:{x:labelX,y:labelY,text:labelText,fontStyle:labelFontStyle,fontWeight:labelFontWeight,fontSize:labelFontSize,fontFamily:labelFontFamily,textAlign:labelTextAlign,textBaseline:"middle",fill:labelColor}})}return nodeData}},BarSparkline.prototype.getDistance=function(p1,p2){return Math.abs(p1.y-p2.y)},BarSparkline.className="BarSparkline",BarSparkline}(BarColumnSparkline),__extends$10=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ColumnSparkline=function(_super){function ColumnSparkline(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$10(ColumnSparkline,_super),ColumnSparkline.prototype.updateYScaleRange=function(){var seriesRect=this.seriesRect;this.yScale.range=[seriesRect.height,0]},ColumnSparkline.prototype.updateXScaleRange=function(){var xScale=this.xScale,seriesRect=this.seriesRect,paddingOuter=this.paddingOuter,paddingInner=this.paddingInner;if(xScale instanceof BandScale)xScale.range=[0,seriesRect.width],xScale.paddingInner=paddingInner,xScale.paddingOuter=paddingOuter;else{var step=this.calculateStep(seriesRect.width),padding=step*paddingOuter;this.bandWidth=step*(1-paddingInner),xScale.range=[padding,seriesRect.width-padding-this.bandWidth]}},ColumnSparkline.prototype.updateAxisLine=function(){var yScale=this.yScale,axis=this.axis,axisLine=this.axisLine,seriesRect=this.seriesRect,strokeWidth=axis.strokeWidth;axisLine.x1=0,axisLine.x2=seriesRect.width,axisLine.y1=0,axisLine.y2=0,axisLine.stroke=axis.stroke,axisLine.strokeWidth=strokeWidth+(strokeWidth%2==1?1:0);var yZero=yScale.convert(0);axisLine.translationY=yZero},ColumnSparkline.prototype.generateNodeData=function(){var _a=this,data=_a.data,yData=_a.yData,xData=_a.xData,xScale=_a.xScale,yScale=_a.yScale,fill=_a.fill,stroke=_a.stroke,strokeWidth=_a.strokeWidth,label=_a.label;if(data){for(var labelFontStyle=label.fontStyle,labelFontWeight=label.fontWeight,labelFontSize=label.fontSize,labelFontFamily=label.fontFamily,labelColor=label.color,labelFormatter=label.formatter,labelPlacement=label.placement,nodeData=[],yZero=yScale.convert(0),i=0,n=yData.length;i<n;i++){var yDatum=yData[i],xDatum=xData[i],invalidDatum=void 0===yDatum;invalidDatum&&(yDatum=0);var y=Math.min(yScale.convert(yDatum),yZero),x=xScale.convert(xDatum),bottom=Math.max(yScale.convert(yDatum),yZero),width=xScale instanceof BandScale?xScale.bandwidth:this.bandWidth,height=bottom-y,midPoint={x:x+width/2,y:yZero},labelText=void 0;labelText=labelFormatter?labelFormatter({value:yDatum}):void 0!==yDatum&&isNumber(yDatum)?this.formatLabelValue(yDatum):"";var labelX=x+width/2,labelY=void 0,labelTextBaseline=void 0,isPositiveY=void 0!==yDatum&&yDatum>=0;if(labelPlacement===BarColumnLabelPlacement.Center)labelY=y+height/2,labelTextBaseline="middle";else if(labelPlacement===BarColumnLabelPlacement.OutsideEnd)labelY=y+(isPositiveY?-2:height+2),labelTextBaseline=isPositiveY?"bottom":"top";else if(labelPlacement===BarColumnLabelPlacement.InsideEnd){labelY=y+(isPositiveY?2:height-2),labelTextBaseline=isPositiveY?"top":"bottom";var textHeight=HdpiCanvas.getTextSize(labelText,labelFontFamily).height||10;(isPositiveY&&labelY>yZero-textHeight||!isPositiveY&&labelY<yZero+textHeight)&&(labelY=yZero+2*(isPositiveY?-1:1),labelTextBaseline=isPositiveY?"bottom":"top")}else labelY=yZero+2*(isPositiveY?-1:1),labelTextBaseline=isPositiveY?"bottom":"top";nodeData.push({x,y,width,height,fill,stroke,strokeWidth,seriesDatum:{x:xDatum,y:invalidDatum?void 0:yDatum},point:midPoint,label:{x:labelX,y:labelY,text:labelText,fontStyle:labelFontStyle,fontWeight:labelFontWeight,fontSize:labelFontSize,fontFamily:labelFontFamily,textAlign:"center",textBaseline:labelTextBaseline,fill:labelColor}})}return nodeData}},ColumnSparkline.className="ColumnSparkline",ColumnSparkline}(BarColumnSparkline),AgSparkline=function(){function AgSparkline(){}return AgSparkline.create=function(options,tooltip){var sparkline=function getSparklineInstance(type){void 0===type&&(type="line");switch(type){case"column":return new ColumnSparkline;case"bar":return new BarSparkline;case"area":return new AreaSparkline;default:return new LineSparkline}}((options=Object.create(options)).type);return tooltip&&(sparkline.tooltip=tooltip),function initSparkline(sparkline,options){setValueIfPropertyExists(sparkline,"context",options.context,options),setValueIfPropertyExists(sparkline,"width",options.width,options),setValueIfPropertyExists(sparkline,"height",options.height,options),setValueIfPropertyExists(sparkline,"container",options.container,options),setValueIfPropertyExists(sparkline,"xKey",options.xKey,options),setValueIfPropertyExists(sparkline,"yKey",options.yKey,options),options.padding&&function initPaddingOptions(target,options){setValueIfPropertyExists(target,"top",options.top,options),setValueIfPropertyExists(target,"right",options.right,options),setValueIfPropertyExists(target,"bottom",options.bottom,options),setValueIfPropertyExists(target,"left",options.left,options)}(sparkline.padding,options.padding);options.axis&&function initAxisOptions(target,options){setValueIfPropertyExists(target,"type",options.type,options),setValueIfPropertyExists(target,"stroke",options.stroke,options),setValueIfPropertyExists(target,"strokeWidth",options.strokeWidth,options)}(sparkline.axis,options.axis);options.highlightStyle&&function initHighlightStyleOptions(target,options){setValueIfPropertyExists(target,"fill",options.fill,options),setValueIfPropertyExists(target,"size",options.size,options),setValueIfPropertyExists(target,"stroke",options.stroke,options),setValueIfPropertyExists(target,"strokeWidth",options.strokeWidth,options)}(sparkline.highlightStyle,options.highlightStyle);options.tooltip&&sparkline.tooltip&&function initTooltipOptions(target,options){setValueIfPropertyExists(target,"enabled",options.enabled,options),setValueIfPropertyExists(target,"container",options.container,options),setValueIfPropertyExists(target,"xOffset",options.xOffset,options),setValueIfPropertyExists(target,"yOffset",options.yOffset,options),setValueIfPropertyExists(target,"renderer",options.renderer,options)}(sparkline.tooltip,options.tooltip)}(sparkline,options),function initSparklineByType(sparkline,options){switch(options.type){case"bar":case"column":initBarColumnSparkline(sparkline,options);break;case"area":!function initAreaSparkline(sparkline,options){setValueIfPropertyExists(sparkline,"fill",options.fill,options),options.marker&&initMarkerOptions(sparkline.marker,options.marker);options.line&&initLineOptions(sparkline.line,options.line);options.crosshairs&&initCrosshairsOptions(sparkline.crosshairs,options.crosshairs)}(sparkline,options);break;default:!function initLineSparkline(sparkline,options){options.marker&&initMarkerOptions(sparkline.marker,options.marker);options.line&&initLineOptions(sparkline.line,options.line);options.crosshairs&&initCrosshairsOptions(sparkline.crosshairs,options.crosshairs)}(sparkline,options)}}(sparkline,options),options.data&&(sparkline.data=options.data),sparkline},AgSparkline}();function initBarColumnSparkline(sparkline,options){setValueIfPropertyExists(sparkline,"valueAxisDomain",options.valueAxisDomain,options),setValueIfPropertyExists(sparkline,"fill",options.fill,options),setValueIfPropertyExists(sparkline,"stroke",options.stroke,options),setValueIfPropertyExists(sparkline,"strokeWidth",options.strokeWidth,options),setValueIfPropertyExists(sparkline,"paddingInner",options.paddingInner,options),setValueIfPropertyExists(sparkline,"paddingOuter",options.paddingOuter,options),setValueIfPropertyExists(sparkline,"formatter",options.formatter,options),options.label&&function initLabelOptions(target,options){setValueIfPropertyExists(target,"enabled",options.enabled,options),setValueIfPropertyExists(target,"fontStyle",options.fontStyle,options),setValueIfPropertyExists(target,"fontWeight",options.fontWeight,options),setValueIfPropertyExists(target,"fontSize",options.fontSize,options),setValueIfPropertyExists(target,"fontFamily",options.fontFamily,options),setValueIfPropertyExists(target,"textAlign",options.textAlign,options),setValueIfPropertyExists(target,"textBaseline",options.textBaseline,options),setValueIfPropertyExists(target,"color",options.color,options),setValueIfPropertyExists(target,"formatter",options.formatter,options),setValueIfPropertyExists(target,"placement",options.placement,options)}(sparkline.label,options.label)}function initMarkerOptions(target,options){setValueIfPropertyExists(target,"enabled",options.enabled,options),setValueIfPropertyExists(target,"size",options.size,options),setValueIfPropertyExists(target,"shape",options.shape,options),setValueIfPropertyExists(target,"fill",options.fill,options),setValueIfPropertyExists(target,"stroke",options.stroke,options),setValueIfPropertyExists(target,"strokeWidth",options.strokeWidth,options),setValueIfPropertyExists(target,"formatter",options.formatter,options)}function initLineOptions(target,options){setValueIfPropertyExists(target,"stroke",options.stroke,options),setValueIfPropertyExists(target,"strokeWidth",options.strokeWidth,options)}function initCrosshairsOptions(target,options){target.xLine&&options.xLine&&initCrosshairLineOptions(target.xLine,options.xLine),target.yLine&&options.yLine&&initCrosshairLineOptions(target.yLine,options.yLine)}function initCrosshairLineOptions(target,options){setValueIfPropertyExists(target,"enabled",options.enabled,options),setValueIfPropertyExists(target,"stroke",options.stroke,options),setValueIfPropertyExists(target,"strokeWidth",options.strokeWidth,options),setValueIfPropertyExists(target,"lineDash",options.lineDash,options),setValueIfPropertyExists(target,"lineCap",options.lineCap,options)}var doOnceFlags={};var offsetValidator=function(property,value,defaultOffset){if(isNumber(value))return!0;var message="AG Charts: "+property+" must be a number, the value you provided is not a valid number. Using the default of "+defaultOffset+"px.";return function doOnce(func,key){doOnceFlags[key]||(func(),doOnceFlags[key]=!0)}((function(){return console.warn(message)}),property+" not a number"),!1},validators={xOffset:offsetValidator,yOffset:offsetValidator};function setValueIfPropertyExists(target,property,value,options){if(property in options)if(property in target){var validator=validators[property];(!validator||validator(property,value,target[property]))&&target[property]!==value&&(target[property]=value)}else console.warn("Property "+property+" does not exist on the target object.")}var __extends$11=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$5=function(){return __assign$5=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$5.apply(this,arguments)},__decorate$E=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SparklineCellRenderer=function(_super){function SparklineCellRenderer(){return _super.call(this,SparklineCellRenderer.TEMPLATE)||this}return __extends$11(SparklineCellRenderer,_super),SparklineCellRenderer.prototype.init=function(params){var _this=this,firstTimeIn=!0,unsubscribeFromResize=this.resizeObserverService.observeResize(this.getGui(),(function(){var _a=_this.getGui(),clientWidth=_a.clientWidth,clientHeight=_a.clientHeight;if(0!==clientWidth&&0!==clientHeight)if(firstTimeIn){var options=__assign$5({data:params.value,width:clientWidth,height:clientHeight,context:{data:params.data}},params.sparklineOptions);_this.sparkline=AgSparkline.create(options,_this.sparklineTooltipSingleton.getSparklineTooltip()),_this.eSparkline.appendChild(_this.sparkline.canvasElement),firstTimeIn=!1}else _this.sparkline.width=clientWidth,_this.sparkline.height=clientHeight}));this.addDestroyFunc((function(){return unsubscribeFromResize()}))},SparklineCellRenderer.prototype.refresh=function(params){return!!this.sparkline&&(this.sparkline.data=params.value,!0)},SparklineCellRenderer.prototype.destroy=function(){this.sparkline&&this.sparkline.destroy(),_super.prototype.destroy.call(this)},SparklineCellRenderer.TEMPLATE='<div class="ag-sparkline-wrapper">\n            <span ref="eSparkline"></span>\n        </div>',__decorate$E([agGridCommunity.RefSelector("eSparkline")],SparklineCellRenderer.prototype,"eSparkline",void 0),__decorate$E([agGridCommunity.Autowired("resizeObserverService")],SparklineCellRenderer.prototype,"resizeObserverService",void 0),__decorate$E([agGridCommunity.Autowired("sparklineTooltipSingleton")],SparklineCellRenderer.prototype,"sparklineTooltipSingleton",void 0),SparklineCellRenderer}(agGridCommunity.Component),__extends$12=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$F=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SparklineTooltipSingleton=function(_super){function SparklineTooltipSingleton(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$12(SparklineTooltipSingleton,_super),SparklineTooltipSingleton.prototype.postConstruct=function(){this.tooltip=new SparklineTooltip},SparklineTooltipSingleton.prototype.getSparklineTooltip=function(){return this.tooltip},SparklineTooltipSingleton.prototype.destroyTooltip=function(){this.tooltip&&this.tooltip.destroy()},__decorate$F([agGridCommunity.PostConstruct],SparklineTooltipSingleton.prototype,"postConstruct",null),__decorate$F([agGridCommunity.PreDestroy],SparklineTooltipSingleton.prototype,"destroyTooltip",null),SparklineTooltipSingleton=__decorate$F([agGridCommunity.Bean("sparklineTooltipSingleton")],SparklineTooltipSingleton)}(agGridCommunity.BeanStub),SparklinesModule={moduleName:agGridCommunity.ModuleNames.SparklinesModule,beans:[SparklineTooltipSingleton],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:SparklineCellRenderer}],dependantModules:[EnterpriseCoreModule]},__extends$13=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$G=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ChartDatasource=function(_super){function ChartDatasource(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$13(ChartDatasource,_super),ChartDatasource.prototype.getData=function(params){if(params.crossFiltering){if(params.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsWrapper.isRowModelDefault())return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gridOptionsWrapper.isRowModelServerSide()&&params.pivoting&&this.updatePivotKeysForSSRM();var result=this.extractRowsFromGridRowModel(params);return result.chartData=this.aggregateRowsByDimension(params,result.chartData),result},ChartDatasource.prototype.extractRowsFromGridRowModel=function(params){var numRows,_this=this,extractedRowData=[],columnNames={},groupNodeIndexes={},groupsToRemove={},filteredNodes={},allRowNodes=[];if(params.crossFiltering)filteredNodes=this.getFilteredRowNodes(),numRows=(allRowNodes=this.getAllRowNodes()).length;else{var modelLastRow=this.gridRowModel.getRowCount()-1;numRows=(params.endRow>=0?Math.min(params.endRow,modelLastRow):modelLastRow)-params.startRow+1}for(var _loop_1=function(i){var data={},rowNode=params.crossFiltering?allRowNodes[i]:this_1.gridRowModel.getRow(i+params.startRow);params.dimensionCols.forEach((function(col){var colId=col.colId,column=_this.columnModel.getGridColumn(colId);if(column){var valueObject=_this.valueService.getValue(column,rowNode);if(params.grouping){var valueString=valueObject&&valueObject.toString?String(valueObject.toString()):"",labels=ChartDatasource.getGroupLabels(rowNode,valueString);data[colId]={labels,toString:function(){return this.labels.filter((function(l){return!!l})).reverse().join(" - ")}},rowNode.group&&(groupNodeIndexes[labels.toString()]=i);var groupKey=labels.slice(1,labels.length).toString();groupKey&&(groupsToRemove[groupKey]=groupNodeIndexes[groupKey])}else data[colId]=valueObject}else data[ChartDataModel.DEFAULT_CATEGORY]=i+1})),params.valueCols.forEach((function(col){var columnNamesArr=[],pivotKeys=col.getColDef().pivotKeys;pivotKeys&&(columnNamesArr=pivotKeys.slice());var headerName=col.getColDef().headerName;headerName&&columnNamesArr.push(headerName),columnNamesArr.length>0&&(columnNames[col.getId()]=columnNamesArr);var colId=col.getColId();if(params.crossFiltering){var filteredOutColId=colId+"-filtered-out",actualValue=null!=(value=_this.valueService.getValue(col,rowNode))&&"function"==typeof value.toNumber?value.toNumber():value;filteredNodes[rowNode.id]?(data[colId]=actualValue,data[filteredOutColId]=params.aggFunc||params.isScatter?void 0:0):(data[colId]=params.aggFunc||params.isScatter?void 0:0,data[filteredOutColId]=actualValue)}else{var value=_this.valueService.getValue(col,rowNode);data[colId]=null!=value&&"function"==typeof value.toNumber?value.toNumber():value}})),rowNode.footer&&(data.footer=!0),extractedRowData.push(data)},this_1=this,i=0;i<numRows;i++)_loop_1(i);if(params.grouping){var groupIndexesToRemove_1=agGridCommunity._.values(groupsToRemove);extractedRowData=extractedRowData.filter((function(data,index){return!data.footer&&!agGridCommunity._.includes(groupIndexesToRemove_1,index)}))}return{chartData:extractedRowData,columnNames}},ChartDatasource.prototype.aggregateRowsByDimension=function(params,dataFromGrid){var _this=this,dimensionCols=params.dimensionCols;if(!params.aggFunc||0===dimensionCols.length)return dataFromGrid;var lastCol=agGridCommunity._.last(dimensionCols),lastColId=lastCol&&lastCol.colId,map={},dataAggregated=[];return dataFromGrid.forEach((function(data){var currentMap=map;dimensionCols.forEach((function(col){var colId=col.colId,key=data[colId];if(colId===lastColId){var groupItem_1=currentMap[key];groupItem_1||(groupItem_1={__children:[]},dimensionCols.forEach((function(dimCol){var dimColId=dimCol.colId;groupItem_1[dimColId]=data[dimColId]})),currentMap[key]=groupItem_1,dataAggregated.push(groupItem_1)),groupItem_1.__children.push(data)}else currentMap[key]||(currentMap[key]={}),currentMap=currentMap[key]}))})),agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.RowGroupingModule,"Charting Aggregation")&&dataAggregated.forEach((function(groupItem){return params.valueCols.forEach((function(col){if(params.crossFiltering)params.valueCols.forEach((function(valueCol){var colId=valueCol.getColId(),dataToAgg=groupItem.__children.filter((function(child){return void 0!==child[colId]})).map((function(child){return child[colId]})),aggResult=_this.aggregationStage.aggregateValues(dataToAgg,params.aggFunc);groupItem[valueCol.getId()]=aggResult&&void 0!==aggResult.value?aggResult.value:aggResult;var filteredOutColId=colId+"-filtered-out",dataToAggFiltered=groupItem.__children.filter((function(child){return void 0!==child[filteredOutColId]})).map((function(child){return child[filteredOutColId]})),aggResultFiltered=_this.aggregationStage.aggregateValues(dataToAggFiltered,params.aggFunc);groupItem[filteredOutColId]=aggResultFiltered&&void 0!==aggResultFiltered.value?aggResultFiltered.value:aggResultFiltered}));else{var dataToAgg=groupItem.__children.map((function(child){return child[col.getId()]})),aggResult=0;agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.RowGroupingModule,"Charting Aggregation")&&(aggResult=_this.aggregationStage.aggregateValues(dataToAgg,params.aggFunc)),groupItem[col.getId()]=aggResult&&void 0!==aggResult.value?aggResult.value:aggResult}}))})),dataAggregated},ChartDatasource.prototype.updatePivotKeysForSSRM=function(){var secondaryColumns=this.columnModel.getSecondaryColumns();if(secondaryColumns){var pivotKeySeparator=this.extractPivotKeySeparator(secondaryColumns);secondaryColumns.forEach((function(col){var keys=col.getColId().split(pivotKeySeparator);col.getColDef().pivotKeys=keys.slice(0,keys.length-1)}))}},ChartDatasource.prototype.extractPivotKeySeparator=function(secondaryColumns){if(0===secondaryColumns.length)return"";var extractSeparator=function(columnGroup,childId){var groupId=columnGroup.getGroupId();return columnGroup.getParent()?extractSeparator(columnGroup.getParent(),groupId):childId.split(groupId)[1][0]},firstSecondaryCol=secondaryColumns[0];return extractSeparator(firstSecondaryCol.getParent(),firstSecondaryCol.getColId())},ChartDatasource.getGroupLabels=function(rowNode,initialLabel){for(var labels=[initialLabel];rowNode&&0!==rowNode.level;)(rowNode=rowNode.parent)&&labels.push(rowNode.key);return labels},ChartDatasource.prototype.getFilteredRowNodes=function(){var filteredNodes={};return this.gridRowModel.forEachNodeAfterFilterAndSort((function(rowNode){filteredNodes[rowNode.id]=rowNode})),filteredNodes},ChartDatasource.prototype.getAllRowNodes=function(){var allRowNodes=[];return this.gridRowModel.forEachNode((function(rowNode){allRowNodes.push(rowNode)})),this.sortRowNodes(allRowNodes)},ChartDatasource.prototype.sortRowNodes=function(rowNodes){var sortOptions=this.sortController.getSortOptions();return!sortOptions||0==sortOptions.length?rowNodes:this.rowNodeSorter.doFullSort(rowNodes,sortOptions)},__decorate$G([agGridCommunity.Autowired("rowModel")],ChartDatasource.prototype,"gridRowModel",void 0),__decorate$G([agGridCommunity.Autowired("valueService")],ChartDatasource.prototype,"valueService",void 0),__decorate$G([agGridCommunity.Autowired("columnModel")],ChartDatasource.prototype,"columnModel",void 0),__decorate$G([agGridCommunity.Autowired("rowNodeSorter")],ChartDatasource.prototype,"rowNodeSorter",void 0),__decorate$G([agGridCommunity.Autowired("sortController")],ChartDatasource.prototype,"sortController",void 0),__decorate$G([agGridCommunity.Optional("aggregationStage")],ChartDatasource.prototype,"aggregationStage",void 0),ChartDatasource}(agGridCommunity.BeanStub),__extends$14=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$H=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$i=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$8=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$i(arguments[i]));return ar},ChartDataModel=function(_super){function ChartDataModel(params){var _this=_super.call(this)||this;return _this.unlinked=!1,_this.chartData=[],_this.valueColState=[],_this.dimensionColState=[],_this.columnNames={},_this.grouping=!1,_this.crossFiltering=!1,_this.suppressComboChartWarnings=!1,_this.chartId=params.chartId,_this.chartType=params.chartType,_this.pivotChart=params.pivotChart,_this.chartThemeName=params.chartThemeName,_this.aggFunc=params.aggFunc,_this.referenceCellRange=params.cellRange,_this.suppliedCellRange=params.cellRange,_this.suppressChartRanges=params.suppressChartRanges,_this.unlinked=!!params.unlinkChart,_this.crossFiltering=!!params.crossFiltering,_this.seriesChartTypes=params.seriesChartTypes||[],_this.initComboCharts(params),_this}return __extends$14(ChartDataModel,_super),ChartDataModel.prototype.initComboCharts=function(params){var seriesChartTypesExist=this.seriesChartTypes&&this.seriesChartTypes.length>0;("customCombo"===params.chartType||seriesChartTypesExist)&&(this.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])},ChartDataModel.prototype.init=function(){this.datasource=this.createManagedBean(new ChartDatasource),this.updateCellRanges()},ChartDataModel.prototype.updateCellRanges=function(updatedColState){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);var _a=this.getAllChartColumns(),dimensionCols=_a.dimensionCols,valueCols=_a.valueCols,allColsFromRanges=this.getAllColumnsFromRanges();updatedColState&&this.updateColumnState(updatedColState),this.setDimensionCellRange(dimensionCols,allColsFromRanges,updatedColState),this.setValueCellRange(valueCols,allColsFromRanges,updatedColState),updatedColState||(this.resetColumnState(),this.syncDimensionCellRange()),this.updateSeriesChartTypes(),this.updateData()},ChartDataModel.prototype.updateSeriesChartTypes=function(){this.isComboChart()&&(this.seriesChartTypes=this.seriesChartTypes.map((function(seriesChartType){var primaryOnly=["groupedColumn","stackedColumn","stackedArea"].includes(seriesChartType.chartType);return seriesChartType.secondaryAxis=!primaryOnly&&seriesChartType.secondaryAxis,seriesChartType})),"customCombo"!==this.chartType?this.updateChartSeriesTypesForBuiltInCombos():this.updateSeriesChartTypesForCustomCombo())},ChartDataModel.prototype.updateSeriesChartTypesForCustomCombo=function(){var _this=this;this.seriesChartTypes&&this.seriesChartTypes.length>0||this.suppressComboChartWarnings||console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map((function(s){return ChartDataModel.SUPPORTED_COMBO_CHART_TYPES.includes(s.chartType)||(console.warn("AG Grid: invalid chartType '"+s.chartType+"' supplied in 'seriesChartTypes', converting to 'line' instead."),s.chartType="line"),s}));var updatedSeriesChartTypes=this.valueColState.map((function(valueCol){_this.savedCustomSeriesChartTypes&&0!==_this.savedCustomSeriesChartTypes.length||(_this.savedCustomSeriesChartTypes=_this.seriesChartTypes);var providedSeriesChartType=_this.savedCustomSeriesChartTypes.find((function(s){return s.colId===valueCol.colId}));return providedSeriesChartType||(valueCol.selected&&!_this.suppressComboChartWarnings&&console.warn("AG Grid: no 'seriesChartType' found for colId = '"+valueCol.colId+"', defaulting to 'line'."),{colId:valueCol.colId,chartType:"line",secondaryAxis:!1})}));this.seriesChartTypes=updatedSeriesChartTypes,this.savedCustomSeriesChartTypes=updatedSeriesChartTypes,this.suppressComboChartWarnings=!0},ChartDataModel.prototype.updateChartSeriesTypesForBuiltInCombos=function(){var primaryChartType="columnLineCombo"===this.chartType?"groupedColumn":"stackedArea",secondaryChartType="columnLineCombo"===this.chartType?"line":"groupedColumn",selectedCols=this.valueColState.filter((function(cs){return cs.selected})),lineIndex=Math.ceil(selectedCols.length/2);this.seriesChartTypes=selectedCols.map((function(valueCol,i){var seriesType=i>=lineIndex?secondaryChartType:primaryChartType;return{colId:valueCol.colId,chartType:seriesType,secondaryAxis:!1}}))},ChartDataModel.prototype.updateData=function(){var _a=this.getRowIndexes(),startRow=_a.startRow,endRow=_a.endRow;this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();var params={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow,endRow,isScatter:agGridCommunity._.includes(["scatter","bubble"],this.chartType)},_b=this.datasource.getData(params),chartData=_b.chartData,columnNames=_b.columnNames;this.chartData=chartData,this.columnNames=columnNames},ChartDataModel.prototype.isGrouping=function(){var usingTreeData=this.gridOptionsWrapper.isTreeData(),groupedCols=usingTreeData?null:this.columnModel.getRowGroupColumns(),isGroupActive=usingTreeData||groupedCols&&groupedCols.length>0,colId=this.getSelectedDimension().colId,groupDimensionSelected=this.columnModel.getGroupDisplayColumns().map((function(col){return col.getColId()})).some((function(id){return id===colId}));return!!isGroupActive&&groupDimensionSelected},ChartDataModel.prototype.getSelectedValueCols=function(){return this.valueColState.filter((function(cs){return cs.selected})).map((function(cs){return cs.column}))},ChartDataModel.prototype.getSelectedDimension=function(){return this.dimensionColState.filter((function(cs){return cs.selected}))[0]},ChartDataModel.prototype.getColDisplayName=function(col){return this.columnModel.getDisplayNameForColumn(col,"chart")},ChartDataModel.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},ChartDataModel.prototype.isPivotActive=function(){return this.columnModel.isPivotActive()},ChartDataModel.prototype.createCellRange=function(type){for(var columns=[],_i=1;_i<arguments.length;_i++)columns[_i-1]=arguments[_i];return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns,startColumn:type===agGridCommunity.CellRangeType.DIMENSION?columns[0]:this.referenceCellRange.startColumn,type}},ChartDataModel.prototype.getAllColumnsFromRanges=function(){if(this.pivotChart)return agGridCommunity._.convertToSet(this.columnModel.getAllDisplayedColumns());var columns=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&columns.push.apply(columns,__spread$8(this.dimensionCellRange.columns)),this.valueCellRange&&columns.push.apply(columns,__spread$8(this.valueCellRange.columns)),agGridCommunity._.convertToSet(columns)},ChartDataModel.prototype.getRowIndexes=function(){var startRow=0,endRow=0,rangeService=this.rangeService,range=this.valueCellRange;if(rangeService&&range){startRow=rangeService.getRangeStartRow(range).rowIndex;var endRowPosition=rangeService.getRangeEndRow(range);endRow=endRowPosition.rowPinned===agGridCommunity.Constants.PINNED_BOTTOM?-1:endRowPosition.rowIndex}return{startRow,endRow}},ChartDataModel.prototype.getAllChartColumns=function(){var _this=this,displayedCols=this.columnModel.getAllDisplayedColumns(),dimensionCols=new Set,valueCols=new Set;return displayedCols.forEach((function(col){var colDef=col.getColDef(),chartDataType=colDef.chartDataType;if(chartDataType)switch(chartDataType){case"category":case"time":return void dimensionCols.add(col);case"series":return void valueCols.add(col);case"excluded":return;default:console.warn("AG Grid: unexpected chartDataType value '"+chartDataType+"' supplied, instead use 'category', 'series' or 'excluded'")}"ag-Grid-AutoColumn"!==colDef.colId?col.isPrimary()?(_this.isNumberCol(col)?valueCols:dimensionCols).add(col):valueCols.add(col):dimensionCols.add(col)})),{dimensionCols,valueCols}},ChartDataModel.prototype.isNumberCol=function(col){if("ag-Grid-AutoColumn"===col.getColId())return!1;var row=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!row)return!1;var cellValue=this.valueService.getValue(col,row);return null==cellValue&&(cellValue=this.extractLeafData(row,col)),null!=cellValue&&"function"==typeof cellValue.toNumber&&(cellValue=cellValue.toNumber()),"number"==typeof cellValue},ChartDataModel.prototype.extractLeafData=function(row,col){if(!row.allLeafChildren)return null;for(var i=0;i<row.allLeafChildren.length;i++){var childRow=row.allLeafChildren[i],value=this.valueService.getValue(col,childRow);if(null!=value)return value}return null},ChartDataModel.prototype.resetColumnState=function(){var _this=this,_a=this.getAllChartColumns(),dimensionCols=_a.dimensionCols,valueCols=_a.valueCols,allCols=this.getAllColumnsFromRanges(),isInitialising=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];var hasSelectedDimension=!1,order=1,aggFuncDimension=this.suppliedCellRange.columns[0];dimensionCols.forEach((function(column){var isAutoGroupCol="ag-Grid-AutoColumn"===column.getColId(),selected=!1;_this.crossFiltering&&_this.aggFunc?aggFuncDimension.getColId()===column.getColId()&&(selected=!0):selected=!!isAutoGroupCol||!hasSelectedDimension&&allCols.has(column),_this.dimensionColState.push({column,colId:column.getColId(),displayName:_this.getColDisplayName(column),selected,order:order++}),selected&&(hasSelectedDimension=!0)}));var defaultCategory={colId:ChartDataModel.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!hasSelectedDimension,order:0};this.dimensionColState.unshift(defaultCategory);var valueColumnsFromReferenceRange=this.referenceCellRange.columns.filter((function(c){return valueCols.has(c)}));valueCols.forEach((function(column){isInitialising&&agGridCommunity._.includes(_this.referenceCellRange.columns,column)&&(column=valueColumnsFromReferenceRange.shift()),_this.valueColState.push({column,colId:column.getColId(),displayName:_this.getColDisplayName(column),selected:allCols.has(column),order:order++})}))},ChartDataModel.prototype.updateColumnState=function(updatedCol){var idsMatch=function(cs){return cs.colId===updatedCol.colId},dimensionColState=this.dimensionColState,valueColState=this.valueColState;dimensionColState.filter(idsMatch).length>0?dimensionColState.forEach((function(cs){return cs.selected=idsMatch(cs)})):valueColState.filter(idsMatch).forEach((function(cs){return cs.selected=updatedCol.selected}));var allColumns=__spread$8(dimensionColState,valueColState),orderedColIds=[];allColumns.forEach((function(col,i){i===updatedCol.order&&orderedColIds.push(updatedCol.colId),col.colId!==updatedCol.colId&&orderedColIds.push(col.colId)})),allColumns.forEach((function(col){var order=orderedColIds.indexOf(col.colId);col.order=order>=0?orderedColIds.indexOf(col.colId):allColumns.length-1})),this.reorderColState()},ChartDataModel.prototype.reorderColState=function(){var ascColStateOrder=function(a,b){return a.order-b.order};this.dimensionColState.sort(ascColStateOrder),this.valueColState.sort(ascColStateOrder)},ChartDataModel.prototype.setDimensionCellRange=function(dimensionCols,colsInRange,updatedColState){var _this=this;if(this.dimensionCellRange=void 0,updatedColState||this.dimensionColState.length){var selectedDimensionColState=updatedColState;if(this.crossFiltering&&this.aggFunc){var aggFuncDimension_1=this.suppliedCellRange.columns[0];selectedDimensionColState=this.dimensionColState.filter((function(cs){return cs.colId===aggFuncDimension_1.getColId()}))[0]}else selectedDimensionColState&&dimensionCols.has(selectedDimensionColState.column)||(selectedDimensionColState=this.dimensionColState.filter((function(cs){return cs.selected}))[0]);selectedDimensionColState&&selectedDimensionColState.colId!==ChartDataModel.DEFAULT_CATEGORY&&(this.dimensionCellRange=this.createCellRange(agGridCommunity.CellRangeType.DIMENSION,selectedDimensionColState.column))}else dimensionCols.forEach((function(col){!_this.dimensionCellRange&&colsInRange.has(col)&&(_this.dimensionCellRange=_this.createCellRange(agGridCommunity.CellRangeType.DIMENSION,col))}))},ChartDataModel.prototype.setValueCellRange=function(valueCols,colsInRange,updatedColState){this.valueCellRange=void 0;var selectedValueCols=[];if(valueCols.forEach((function(col){updatedColState&&updatedColState.colId===col.getColId()?updatedColState.selected&&selectedValueCols.push(updatedColState.column):colsInRange.has(col)&&selectedValueCols.push(col)})),selectedValueCols.length>0){var orderedColIds_1=[];this.valueColState.length>0?orderedColIds_1=this.valueColState.map((function(c){return c.colId})):colsInRange.forEach((function(c){return orderedColIds_1.push(c.getColId())})),selectedValueCols.sort((function(a,b){return orderedColIds_1.indexOf(a.getColId())-orderedColIds_1.indexOf(b.getColId())})),this.valueCellRange=this.createCellRange.apply(this,__spread$8([agGridCommunity.CellRangeType.VALUE],selectedValueCols))}},ChartDataModel.prototype.syncDimensionCellRange=function(){var selectedDimension=this.getSelectedDimension();selectedDimension&&selectedDimension.column&&(this.dimensionCellRange=this.createCellRange(agGridCommunity.CellRangeType.DIMENSION,selectedDimension.column))},ChartDataModel.prototype.isComboChart=function(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)},ChartDataModel.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",ChartDataModel.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],__decorate$H([agGridCommunity.Autowired("columnModel")],ChartDataModel.prototype,"columnModel",void 0),__decorate$H([agGridCommunity.Autowired("valueService")],ChartDataModel.prototype,"valueService",void 0),__decorate$H([agGridCommunity.Autowired("rangeService")],ChartDataModel.prototype,"rangeService",void 0),__decorate$H([agGridCommunity.Autowired("rowRenderer")],ChartDataModel.prototype,"rowRenderer",void 0),__decorate$H([agGridCommunity.Autowired("chartTranslationService")],ChartDataModel.prototype,"chartTranslationService",void 0),__decorate$H([agGridCommunity.PostConstruct],ChartDataModel.prototype,"init",null),ChartDataModel}(agGridCommunity.BeanStub),__assign$6=function(){return __assign$6=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$6.apply(this,arguments)},Observable$1=function(){function Observable(){this.allPropertyListeners=new Map,this.allEventListeners=new Map}return Observable.prototype.addPropertyListener=function(name,listener,scope){void 0===scope&&(scope=this);var allPropertyListeners=this.allPropertyListeners,propertyListeners=allPropertyListeners.get(name);if(propertyListeners||(propertyListeners=new Map,allPropertyListeners.set(name,propertyListeners)),!propertyListeners.has(listener)){var scopes_1=new Set;propertyListeners.set(listener,scopes_1)}var scopes=propertyListeners.get(listener);scopes&&scopes.add(scope)},Observable.prototype.removePropertyListener=function(name,listener,scope){void 0===scope&&(scope=this);var propertyListeners=this.allPropertyListeners.get(name);if(propertyListeners)if(listener){var scopes=propertyListeners.get(listener);scopes&&(scopes.delete(scope),scopes.size||propertyListeners.delete(listener))}else propertyListeners.clear()},Observable.prototype.notifyPropertyListeners=function(name,oldValue,value){var _this=this,propertyListeners=this.allPropertyListeners.get(name);propertyListeners&&propertyListeners.forEach((function(scopes,listener){scopes.forEach((function(scope){return listener.call(scope,{type:name,source:_this,value,oldValue})}))}))},Observable.prototype.addEventListener=function(type,listener,scope){void 0===scope&&(scope=this);var allEventListeners=this.allEventListeners,eventListeners=allEventListeners.get(type);if(eventListeners||(eventListeners=new Map,allEventListeners.set(type,eventListeners)),!eventListeners.has(listener)){var scopes_2=new Set;eventListeners.set(listener,scopes_2)}var scopes=eventListeners.get(listener);scopes&&scopes.add(scope)},Observable.prototype.removeEventListener=function(type,listener,scope){void 0===scope&&(scope=this);var eventListeners=this.allEventListeners.get(type);if(eventListeners)if(listener){var scopes=eventListeners.get(listener);scopes&&(scopes.delete(scope),scopes.size||eventListeners.delete(listener))}else eventListeners.clear()},Observable.prototype.notifyEventListeners=function(types){var _this=this,allEventListeners=this.allEventListeners;types.forEach((function(type){var listeners=allEventListeners.get(type);listeners&&listeners.forEach((function(scopes,listener){scopes.forEach((function(scope){return listener.call(scope,{type,source:_this})}))}))}))},Observable.prototype.fireEvent=function(event){var _this=this,listeners=this.allEventListeners.get(event.type);listeners&&listeners.forEach((function(scopes,listener){scopes.forEach((function(scope){return listener.call(scope,__assign$6(__assign$6({},event),{source:_this}))}))}))},Observable.privateKeyPrefix="_",Observable}();function reactive$1(){for(var events=[],_i=0;_i<arguments.length;_i++)events[_i]=arguments[_i];events.indexOf("debugger");return function(target,key){var privateKey=Observable$1.privateKeyPrefix+key,privateKeyEvents=privateKey+"Events";target[key]||(events&&(target[privateKeyEvents]=events),Object.defineProperty(target,key,{set:function(value){var oldValue=this[privateKey];if(value!==oldValue||"object"==typeof value&&null!==value){this[privateKey]=value,this.notifyPropertyListeners(key,oldValue,value);var events_1=this[privateKeyEvents];events_1&&this.notifyEventListeners(events_1)}},get:function(){return this[privateKey]},enumerable:!0,configurable:!0}))}}var __extends$15=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$I=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},Padding$1=function(_super){function Padding(top,right,bottom,left){void 0===top&&(top=0),void 0===right&&(right=top),void 0===bottom&&(bottom=top),void 0===left&&(left=right);var _this=_super.call(this)||this;return _this.top=top,_this.right=right,_this.bottom=bottom,_this.left=left,_this}return __extends$15(Padding,_super),Padding.prototype.clear=function(){this.top=this.right=this.bottom=this.left=0},__decorate$I([reactive$1("layoutChange")],Padding.prototype,"top",void 0),__decorate$I([reactive$1("layoutChange")],Padding.prototype,"right",void 0),__decorate$I([reactive$1("layoutChange")],Padding.prototype,"bottom",void 0),__decorate$I([reactive$1("layoutChange")],Padding.prototype,"left",void 0),Padding}(Observable$1),BBox$1=function(){function BBox(x,y,width,height){this.x=x,this.y=y,this.width=width,this.height=height}return BBox.prototype.isValid=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},BBox.prototype.dilate=function(value){this.x-=value,this.y-=value,this.width+=2*value,this.height+=2*value},BBox.prototype.containsPoint=function(x,y){return x>=this.x&&x<=this.x+this.width&&y>=this.y&&y<=this.y+this.height},BBox.prototype.render=function(ctx,params){void 0===params&&(params=BBox.noParams),ctx.save(),params.resetTransform&&ctx.setTransform(1,0,0,1,0,0),ctx.strokeStyle=params.strokeStyle||"cyan",ctx.lineWidth=params.lineWidth||1,ctx.strokeRect(this.x,this.y,this.width,this.height),params.label&&(ctx.fillStyle=params.fillStyle||"black",ctx.textBaseline="bottom",ctx.fillText(params.label,this.x,this.y)),ctx.restore()},BBox.noParams={},BBox}(),__read$j=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},Matrix$1=function(){function Matrix(elements){void 0===elements&&(elements=[1,0,0,1,0,0]),this.elements=elements}return Matrix.prototype.setElements=function(elements){var e=this.elements;return e[0]=elements[0],e[1]=elements[1],e[2]=elements[2],e[3]=elements[3],e[4]=elements[4],e[5]=elements[5],this},Matrix.prototype.setIdentityElements=function(){var e=this.elements;return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,this},Object.defineProperty(Matrix.prototype,"identity",{get:function(){var e=this.elements;return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix.prototype,"a",{get:function(){return this.elements[0]},set:function(value){this.elements[0]=value},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix.prototype,"b",{get:function(){return this.elements[1]},set:function(value){this.elements[1]=value},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix.prototype,"c",{get:function(){return this.elements[2]},set:function(value){this.elements[2]=value},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix.prototype,"d",{get:function(){return this.elements[3]},set:function(value){this.elements[3]=value},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix.prototype,"e",{get:function(){return this.elements[4]},set:function(value){this.elements[4]=value},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix.prototype,"f",{get:function(){return this.elements[5]},set:function(value){this.elements[5]=value},enumerable:!0,configurable:!0}),Matrix.prototype.AxB=function(A,B,C){var _a=__read$j(A,6),m11=_a[0],m12=_a[1],m21=_a[2],m22=_a[3],m31=_a[4],m32=_a[5],_b=__read$j(B,6),o11=_b[0],o12=_b[1],o21=_b[2],o22=_b[3],o31=_b[4],o32=_b[5];(C=C||A)[0]=m11*o11+m21*o12,C[1]=m12*o11+m22*o12,C[2]=m11*o21+m21*o22,C[3]=m12*o21+m22*o22,C[4]=m11*o31+m21*o32+m31,C[5]=m12*o31+m22*o32+m32},Matrix.prototype.multiplySelf=function(other){return this.AxB(this.elements,other.elements),this},Matrix.prototype.multiply=function(other){var elements=new Array(6);return this.AxB(this.elements,other.elements,elements),new Matrix(elements)},Matrix.prototype.preMultiplySelf=function(other){return this.AxB(other.elements,this.elements,this.elements),this},Matrix.prototype.inverse=function(){var _a=__read$j(this.elements,6),a=_a[0],b=_a[1],c=_a[2],d=_a[3],e=_a[4],f=_a[5],rD=1/(a*d-b*c);return new Matrix([d*=rD,-(b*=rD),-(c*=rD),a*=rD,c*f-d*e,b*e-a*f])},Matrix.prototype.inverseTo=function(other){var _a=__read$j(this.elements,6),a=_a[0],b=_a[1],c=_a[2],d=_a[3],e=_a[4],f=_a[5],rD=1/(a*d-b*c);return a*=rD,b*=rD,c*=rD,d*=rD,other.setElements([d,-b,-c,a,c*f-d*e,b*e-a*f]),this},Matrix.prototype.invertSelf=function(){var elements=this.elements,_a=__read$j(elements,6),a=_a[0],b=_a[1],c=_a[2],d=_a[3],e=_a[4],f=_a[5],rD=1/(a*d-b*c);return a*=rD,b*=rD,c*=rD,d*=rD,elements[0]=d,elements[1]=-b,elements[2]=-c,elements[3]=a,elements[4]=c*f-d*e,elements[5]=b*e-a*f,this},Matrix.prototype.clone=function(){return new Matrix(this.elements.slice())},Matrix.prototype.transformPoint=function(x,y){var e=this.elements;return{x:x*e[0]+y*e[2]+e[4],y:x*e[1]+y*e[3]+e[5]}},Matrix.prototype.transformBBox=function(bbox,radius,target){void 0===radius&&(radius=0);var w,h,elements=this.elements,xx=elements[0],xy=elements[1],yx=elements[2],yy=elements[3],h_w=.5*bbox.width,h_h=.5*bbox.height,cx=bbox.x+h_w,cy=bbox.y+h_h;if(radius){h_w-=radius,h_h-=radius;var sx=Math.sqrt(xx*xx+yx*yx),sy=Math.sqrt(xy*xy+yy*yy);w=Math.abs(h_w*xx)+Math.abs(h_h*yx)+Math.abs(sx*radius),h=Math.abs(h_w*xy)+Math.abs(h_h*yy)+Math.abs(sy*radius)}else w=Math.abs(h_w*xx)+Math.abs(h_h*yx),h=Math.abs(h_w*xy)+Math.abs(h_h*yy);return target||(target=new BBox$1(0,0,0,0)),target.x=cx*xx+cy*yx+elements[4]-w,target.y=cx*xy+cy*yy+elements[5]-h,target.width=w+w,target.height=h+h,target},Matrix.prototype.toContext=function(ctx){if(!this.identity){var e=this.elements;ctx.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},Matrix.flyweight=function(elements){return elements?elements instanceof Matrix?Matrix.matrix.setElements(elements.elements):Matrix.matrix.setElements(elements):Matrix.matrix.setIdentityElements(),Matrix.matrix},Matrix.matrix=new Matrix,Matrix}();function createId$1(instance){var constructor=instance.constructor,className=constructor.className;if(!className)throw new Error("The "+constructor+" is missing the 'className' property.");return className+"-"+(constructor.id=(constructor.id||0)+1)}var PointerEvents$1,__read$k=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};!function(PointerEvents){PointerEvents[PointerEvents.All=0]="All",PointerEvents[PointerEvents.None=1]="None"}(PointerEvents$1||(PointerEvents$1={}));var Node$1=function(){function Node(){this.id=createId$1(this),this.tag=NaN,this.isContainerNode=!1,this._children=[],this.childSet={},this.matrix=new Matrix$1,this.inverseMatrix=new Matrix$1,this._dirtyTransform=!1,this._scalingX=1,this._scalingY=1,this._scalingCenterX=null,this._scalingCenterY=null,this._rotationCenterX=null,this._rotationCenterY=null,this._rotation=0,this._translationX=0,this._translationY=0,this._dirty=!0,this._visible=!0,this.dirtyZIndex=!1,this._zIndex=0,this.pointerEvents=PointerEvents$1.All}return Node.isNode=function(node){return!!node&&void 0!==node.matrix},Node.prototype._setScene=function(value){this._scene=value;for(var children=this.children,n=children.length,i=0;i<n;i++)children[i]._setScene(value)},Object.defineProperty(Node.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Node.prototype._setParent=function(value){this._parent=value},Object.defineProperty(Node.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Node.prototype.countChildren=function(depth){if(void 0===depth&&(depth=Node.MAX_SAFE_INTEGER),depth<=0)return 0;for(var children=this.children,n=children.length,size=n,i=0;i<n;i++)size+=children[i].countChildren(depth-1);return size},Node.prototype.append=function(nodes){Node.isNode(nodes)&&(nodes=[nodes]);for(var n=nodes.length,i=0;i<n;i++){var node=nodes[i];if(node.parent)throw new Error(node+" already belongs to another parent: "+node.parent+".");if(node.scene)throw new Error(node+" already belongs a scene: "+node.scene+".");if(this.childSet[node.id])throw new Error("Duplicate "+node.constructor.name+" node: "+node);this._children.push(node),this.childSet[node.id]=!0,node._setParent(this),node._setScene(this.scene)}this.dirty=!0},Node.prototype.appendChild=function(node){if(node.parent)throw new Error(node+" already belongs to another parent: "+node.parent+".");if(node.scene)throw new Error(node+" already belongs to a scene: "+node.scene+".");if(this.childSet[node.id])throw new Error("Duplicate "+node.constructor.name+" node: "+node);return this._children.push(node),this.childSet[node.id]=!0,node._setParent(this),node._setScene(this.scene),this.dirty=!0,node},Node.prototype.removeChild=function(node){if(node.parent===this){var i=this.children.indexOf(node);if(i>=0)return this._children.splice(i,1),delete this.childSet[node.id],node._setParent(),node._setScene(),this.dirty=!0,node}throw new Error("The node to be removed is not a child of this node.")},Node.prototype.insertBefore=function(node,nextNode){var parent=node.parent;if(node.parent&&node.parent.removeChild(node),nextNode&&nextNode.parent===this){var i=this.children.indexOf(nextNode);if(!(i>=0))throw new Error(nextNode+" has "+parent+" as the parent, but is not in its list of children.");this._children.splice(i,0,node),this.childSet[node.id]=!0,node._setParent(this),node._setScene(this.scene),this.dirty=!0}else this.append(node);return node},Object.defineProperty(Node.prototype,"nextSibling",{get:function(){var parent=this.parent;if(parent){var children=parent.children,index=children.indexOf(this);if(index>=0&&index<=children.length-1)return children[index+1]}},enumerable:!0,configurable:!0}),Node.prototype.transformPoint=function(x,y){for(var matrix=Matrix$1.flyweight(this.matrix),parent=this.parent;parent;)matrix.preMultiplySelf(parent.matrix),parent=parent.parent;return matrix.invertSelf().transformPoint(x,y)},Node.prototype.inverseTransformPoint=function(x,y){for(var matrix=Matrix$1.flyweight(this.matrix),parent=this.parent;parent;)matrix.preMultiplySelf(parent.matrix),parent=parent.parent;return matrix.transformPoint(x,y)},Object.defineProperty(Node.prototype,"dirtyTransform",{get:function(){return this._dirtyTransform},set:function(value){this._dirtyTransform=value,value&&(this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"scalingX",{get:function(){return this._scalingX},set:function(value){this._scalingX!==value&&(this._scalingX=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"scalingY",{get:function(){return this._scalingY},set:function(value){this._scalingY!==value&&(this._scalingY=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"scalingCenterX",{get:function(){return this._scalingCenterX},set:function(value){this._scalingCenterX!==value&&(this._scalingCenterX=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"scalingCenterY",{get:function(){return this._scalingCenterY},set:function(value){this._scalingCenterY!==value&&(this._scalingCenterY=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"rotationCenterX",{get:function(){return this._rotationCenterX},set:function(value){this._rotationCenterX!==value&&(this._rotationCenterX=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"rotationCenterY",{get:function(){return this._rotationCenterY},set:function(value){this._rotationCenterY!==value&&(this._rotationCenterY=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"rotation",{get:function(){return this._rotation},set:function(value){this._rotation!==value&&(this._rotation=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"rotationDeg",{get:function(){return this.rotation/Math.PI*180},set:function(value){this.rotation=value/180*Math.PI},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"translationX",{get:function(){return this._translationX},set:function(value){this._translationX!==value&&(this._translationX=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"translationY",{get:function(){return this._translationY},set:function(value){this._translationY!==value&&(this._translationY=value,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Node.prototype.containsPoint=function(x,y){return!1},Node.prototype.pickNode=function(x,y){if(this.visible&&this.pointerEvents!==PointerEvents$1.None&&this.containsPoint(x,y)){var children=this.children;if(children.length)for(var i=children.length-1;i>=0;i--){var hit=children[i].pickNode(x,y);if(hit)return hit}else if(!this.isContainerNode)return this}},Node.prototype.computeBBox=function(){},Node.prototype.computeBBoxCenter=function(){var bbox=this.computeBBox&&this.computeBBox();return bbox?[bbox.x+.5*bbox.width,bbox.y+.5*bbox.height]:[0,0]},Node.prototype.computeTransformMatrix=function(){var scx,scy,_a=__read$k([0,0],2),bbcx=_a[0],bbcy=_a[1],sx=this.scalingX,sy=this.scalingY;1===sx&&1===sy?(scx=0,scy=0):(scx=null===this.scalingCenterX?bbcx:this.scalingCenterX,scy=null===this.scalingCenterY?bbcy:this.scalingCenterY);var rcx,rcy,r=this.rotation,cos=Math.cos(r),sin=Math.sin(r);0===r?(rcx=0,rcy=0):(rcx=null===this.rotationCenterX?bbcx:this.rotationCenterX,rcy=null===this.rotationCenterY?bbcy:this.rotationCenterY);var tx=this.translationX,ty=this.translationY,tx4=scx*(1-sx)-rcx,ty4=scy*(1-sy)-rcy;this.dirtyTransform=!1,this.matrix.setElements([cos*sx,sin*sx,-sin*sy,cos*sy,cos*tx4-sin*ty4+rcx+tx,sin*tx4+cos*ty4+rcy+ty]).inverseTo(this.inverseMatrix)},Object.defineProperty(Node.prototype,"dirty",{get:function(){return this._dirty},set:function(value){this._dirty=value,value&&(this.parent?this.parent.dirty=!0:this.scene&&(this.scene.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"visible",{get:function(){return this._visible},set:function(value){this._visible!==value&&(this._visible=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Node.prototype,"zIndex",{get:function(){return this._zIndex},set:function(value){this._zIndex!==value&&(this._zIndex=value,this.parent&&(this.parent.dirtyZIndex=!0),this.dirty=!0)},enumerable:!0,configurable:!0}),Node.MAX_SAFE_INTEGER=Math.pow(2,53)-1,Node}();function chainObjects$1(parent,child){var obj=Object.create(parent);for(var prop in child)child.hasOwnProperty(prop)&&(obj[prop]=child[prop]);return obj}function cloneUnlessOtherwiseSpecified(value,options){return!1!==options.clone&&options.isMergeableObject(value)?deepMerge(function emptyTarget(value){return Array.isArray(value)?[]:{}}(value),value,options):value}function defaultArrayMerge(target,source,options){return target.concat(source).map((function(element){return cloneUnlessOtherwiseSpecified(element,options)}))}function getKeys(target){return Object.keys(target).concat(function getEnumerableOwnPropertySymbols(target){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(target).filter((function(symbol){return target.propertyIsEnumerable(symbol)})):[]}(target))}function propertyIsOnObject(object,property){try{return property in object}catch(_){return!1}}function mergeObject(target,source,options){var destination={};return options.isMergeableObject(target)&&getKeys(target).forEach((function(key){destination[key]=cloneUnlessOtherwiseSpecified(target[key],options)})),getKeys(source).forEach((function(key){(function propertyIsUnsafe(target,key){return propertyIsOnObject(target,key)&&!(Object.hasOwnProperty.call(target,key)&&Object.propertyIsEnumerable.call(target,key))})(target,key)||(propertyIsOnObject(target,key)&&options.isMergeableObject(source[key])?destination[key]=function getMergeFunction(key,options){if(!options.customMerge)return deepMerge;var customMerge=options.customMerge(key);return"function"==typeof customMerge?customMerge:deepMerge}(key,options)(target[key],source[key],options):destination[key]=cloneUnlessOtherwiseSpecified(source[key],options))})),destination}function defaultIsMergeableObject(value){return function isNonNullObject(value){return!!value&&"object"==typeof value}(value)&&!function isSpecial(value){var stringValue=Object.prototype.toString.call(value);return"[object RegExp]"===stringValue||"[object Date]"===stringValue}(value)}function deepMerge(target,source,options){(options=options||{}).arrayMerge=options.arrayMerge||defaultArrayMerge,options.isMergeableObject=options.isMergeableObject||defaultIsMergeableObject,options.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var sourceIsArray=Array.isArray(source);return sourceIsArray===Array.isArray(target)?sourceIsArray?options.arrayMerge(target,source,options):mergeObject(target,source,options):cloneUnlessOtherwiseSpecified(source,options)}var __extends$16=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Shape$1=function(_super){function Shape(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.lastInstanceId=0,_this._fillOpacity=1,_this._strokeOpacity=1,_this._fill=Shape.defaultStyles.fill,_this._stroke=Shape.defaultStyles.stroke,_this._strokeWidth=Shape.defaultStyles.strokeWidth,_this._lineDash=Shape.defaultStyles.lineDash,_this._lineDashOffset=Shape.defaultStyles.lineDashOffset,_this._lineCap=Shape.defaultStyles.lineCap,_this._lineJoin=Shape.defaultStyles.lineJoin,_this._opacity=Shape.defaultStyles.opacity,_this.onShadowChange=function(){_this.dirty=!0},_this._fillShadow=Shape.defaultStyles.fillShadow,_this._strokeShadow=Shape.defaultStyles.strokeShadow,_this}return __extends$16(Shape,_super),Shape.createInstance=function(template){var shape=Object.create(template);return shape._setParent(void 0),shape.id=template.id+"-Instance-"+String(++template.lastInstanceId),shape},Shape.prototype.restoreOwnStyles=function(){for(var styles=this.constructor.defaultStyles,keys=Object.getOwnPropertyNames(styles),i=0,n=keys.length;i<n;i++){var key=keys[i];this[key]=styles[key]}},Shape.prototype.restoreAllStyles=function(){var styles=this.constructor.defaultStyles;for(var property in styles)this[property]=styles[property]},Shape.prototype.restoreOverriddenStyles=function(){var styles=this.constructor.defaultStyles,protoStyles=Object.getPrototypeOf(styles);for(var property in styles)styles.hasOwnProperty(property)&&protoStyles.hasOwnProperty(property)&&(this[property]=styles[property])},Object.defineProperty(Shape.prototype,"fillOpacity",{get:function(){return this._fillOpacity},set:function(value){this._fillOpacity!==value&&(this._fillOpacity=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"strokeOpacity",{get:function(){return this._strokeOpacity},set:function(value){this._strokeOpacity!==value&&(this._strokeOpacity=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"fill",{get:function(){return this._fill},set:function(value){this._fill!==value&&(this._fill=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"stroke",{get:function(){return this._stroke},set:function(value){this._stroke!==value&&(this._stroke=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(value){this._strokeWidth!==value&&(this._strokeWidth=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"alignment",{get:function(){return Math.floor(this.strokeWidth)%2/2},enumerable:!0,configurable:!0}),Shape.prototype.align=function(alignment,start,length){return null!=length?Math.floor(length)+Math.floor(start%1+length%1):Math.floor(start)+alignment},Object.defineProperty(Shape.prototype,"lineDash",{get:function(){return this._lineDash},set:function(value){var oldValue=this._lineDash;if(oldValue!==value){if(oldValue&&value&&oldValue.length===value.length){for(var identical=!0,n=value.length,i=0;i<n;i++)if(oldValue[i]!==value[i]){identical=!1;break}if(identical)return}this._lineDash=value,this.dirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"lineDashOffset",{get:function(){return this._lineDashOffset},set:function(value){this._lineDashOffset!==value&&(this._lineDashOffset=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"lineCap",{get:function(){return this._lineCap},set:function(value){this._lineCap!==value&&(this._lineCap=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(value){this._lineJoin!==value&&(this._lineJoin=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"opacity",{get:function(){return this._opacity},set:function(value){value=Math.min(1,Math.max(0,value)),this._opacity!==value&&(this._opacity=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"fillShadow",{get:function(){return this._fillShadow},set:function(value){var oldValue=this._fillShadow;oldValue!==value&&(oldValue&&oldValue.removeEventListener("change",this.onShadowChange),value&&value.addEventListener("change",this.onShadowChange),this._fillShadow=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Shape.prototype,"strokeShadow",{get:function(){return this._strokeShadow},set:function(value){var oldValue=this._strokeShadow;oldValue!==value&&(oldValue&&oldValue.removeEventListener("change",this.onShadowChange),value&&value.addEventListener("change",this.onShadowChange),this._strokeShadow=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Shape.prototype.fillStroke=function(ctx){if(this.scene){var pixelRatio=this.scene.canvas.pixelRatio||1,globalAlpha=ctx.globalAlpha;if(this.fill){ctx.fillStyle=this.fill,ctx.globalAlpha=globalAlpha*this.opacity*this.fillOpacity;var fillShadow=this.fillShadow;fillShadow&&fillShadow.enabled&&(ctx.shadowColor=fillShadow.color,ctx.shadowOffsetX=fillShadow.xOffset*pixelRatio,ctx.shadowOffsetY=fillShadow.yOffset*pixelRatio,ctx.shadowBlur=fillShadow.blur*pixelRatio),ctx.fill()}if(ctx.shadowColor="rgba(0, 0, 0, 0)",this.stroke&&this.strokeWidth){ctx.strokeStyle=this.stroke,ctx.globalAlpha=globalAlpha*this.opacity*this.strokeOpacity,ctx.lineWidth=this.strokeWidth,this.lineDash&&ctx.setLineDash(this.lineDash),this.lineDashOffset&&(ctx.lineDashOffset=this.lineDashOffset),this.lineCap&&(ctx.lineCap=this.lineCap),this.lineJoin&&(ctx.lineJoin=this.lineJoin);var strokeShadow=this.strokeShadow;strokeShadow&&strokeShadow.enabled&&(ctx.shadowColor=strokeShadow.color,ctx.shadowOffsetX=strokeShadow.xOffset*pixelRatio,ctx.shadowOffsetY=strokeShadow.yOffset*pixelRatio,ctx.shadowBlur=strokeShadow.blur*pixelRatio),ctx.stroke()}}},Shape.prototype.containsPoint=function(x,y){return this.isPointInPath(x,y)},Shape.defaultStyles=chainObjects$1({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0,strokeShadow:void 0}),Shape}(Node$1),HdpiCanvas$1=function(){function HdpiCanvas(document,width,height){void 0===document&&(document=window.document),void 0===width&&(width=600),void 0===height&&(height=300),this._container=void 0,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=document,this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.element.style.userSelect="none",this.element.style.display="block",this.setPixelRatio(),this.resize(width,height)}return Object.defineProperty(HdpiCanvas.prototype,"container",{get:function(){return this._container},set:function(value){this._container!==value&&(this.remove(),value&&value.appendChild(this.element),this._container=value)},enumerable:!0,configurable:!0}),HdpiCanvas.prototype.remove=function(){var parentNode=this.element.parentNode;null!=parentNode&&parentNode.removeChild(this.element)},HdpiCanvas.prototype.destroy=function(){this.element.remove(),this._canvas=void 0,Object.freeze(this)},HdpiCanvas.prototype.toImage=function(){var img=this.document.createElement("img");return img.src=this.getDataURL(),img},HdpiCanvas.prototype.getDataURL=function(type){return this.element.toDataURL(type)},HdpiCanvas.prototype.download=function(fileName){fileName=((fileName||"").trim()||"image")+".png";var dataUrl=this.getDataURL("image/png"),document=this.document,a=document.createElement("a");a.href=dataUrl,a.download=fileName,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},Object.defineProperty(HdpiCanvas.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!0,configurable:!0}),HdpiCanvas.prototype.setPixelRatio=function(ratio){var pixelRatio=ratio||window.devicePixelRatio;pixelRatio!==this.pixelRatio&&(HdpiCanvas.overrideScale(this.context,pixelRatio),this._pixelRatio=pixelRatio,this.resize(this.width,this.height))},Object.defineProperty(HdpiCanvas.prototype,"pixelated",{get:function(){return"pixelated"===this.element.style.imageRendering},set:function(value){this.element.style.imageRendering=value?"pixelated":"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(HdpiCanvas.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(HdpiCanvas.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),HdpiCanvas.prototype.resize=function(width,height){if(width>0&&height>0){var element=this.element,context=this.context,pixelRatio=this.pixelRatio;element.width=Math.round(width*pixelRatio),element.height=Math.round(height*pixelRatio),element.style.width=width+"px",element.style.height=height+"px",context.resetTransform(),this._width=width,this._height=height}},Object.defineProperty(HdpiCanvas,"textMeasuringContext",{get:function(){if(this._textMeasuringContext)return this._textMeasuringContext;var canvas=document.createElement("canvas");return this._textMeasuringContext=canvas.getContext("2d")},enumerable:!0,configurable:!0}),Object.defineProperty(HdpiCanvas,"svgText",{get:function(){if(this._svgText)return this._svgText;var xmlns="http://www.w3.org/2000/svg",svg=document.createElementNS(xmlns,"svg");svg.setAttribute("width","100"),svg.setAttribute("height","100"),svg.classList?svg.classList.add("text-measuring-svg"):svg.setAttribute("class","text-measuring-svg"),svg.style.position="absolute",svg.style.top="-1000px",svg.style.visibility="hidden";var svgText=document.createElementNS(xmlns,"text");return svgText.setAttribute("x","0"),svgText.setAttribute("y","30"),svgText.setAttribute("text","black"),svg.appendChild(svgText),document.body.appendChild(svg),this._svgText=svgText,svgText},enumerable:!0,configurable:!0}),Object.defineProperty(HdpiCanvas,"has",{get:function(){if(this._has)return this._has;var isChrome=navigator.userAgent.indexOf("Chrome")>-1,isFirefox=navigator.userAgent.indexOf("Firefox")>-1,isSafari=!isChrome&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!isFirefox&&!isSafari,getTransform:void 0!==this.textMeasuringContext.getTransform})},enumerable:!0,configurable:!0}),HdpiCanvas.measureText=function(text,font,textBaseline,textAlign){var ctx=this.textMeasuringContext;return ctx.font=font,ctx.textBaseline=textBaseline,ctx.textAlign=textAlign,ctx.measureText(text)},HdpiCanvas.getTextSize=function(text,font){if(this.has.textMetrics){var ctx=this.textMeasuringContext;ctx.font=font;var metrics=ctx.measureText(text);return{width:metrics.width,height:metrics.actualBoundingBoxAscent+metrics.actualBoundingBoxDescent}}return this.measureSvgText(text,font)},HdpiCanvas.measureSvgText=function(text,font){var cache=this.textSizeCache,fontCache=cache[font];if(fontCache){var size_1=fontCache[text];if(size_1)return size_1}else cache[font]={};var svgText=this.svgText;svgText.style.font=font,svgText.textContent=text;var bbox=svgText.getBBox(),size={width:bbox.width,height:bbox.height};return cache[font][text]=size,size},HdpiCanvas.overrideScale=function(ctx,scale){var depth=0,overrides={save:function(){this.$save(),depth++},restore:function(){depth>0&&(this.$restore(),depth--)},setTransform:function(a,b,c,d,e,f){this.$setTransform(a*scale,b*scale,c*scale,d*scale,e*scale,f*scale)},resetTransform:function(){this.$setTransform(scale,0,0,scale,0,0),this.save(),depth=0}};for(var name_1 in overrides)overrides.hasOwnProperty(name_1)&&(ctx["$"+name_1]||(ctx["$"+name_1]=ctx[name_1]),ctx[name_1]=overrides[name_1])},HdpiCanvas.textSizeCache={},HdpiCanvas}(),__extends$17=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Text$2=function(_super){function Text(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._x=0,_this._y=0,_this.lineBreakRegex=/\r?\n/g,_this.lines=[],_this._text="",_this._dirtyFont=!0,_this._fontSize=10,_this._fontFamily="sans-serif",_this._textAlign=Text.defaultStyles.textAlign,_this._textBaseline=Text.defaultStyles.textBaseline,_this._lineHeight=14,_this}return __extends$17(Text,_super),Object.defineProperty(Text.prototype,"x",{get:function(){return this._x},set:function(value){this._x!==value&&(this._x=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"y",{get:function(){return this._y},set:function(value){this._y!==value&&(this._y=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Text.prototype.splitText=function(){this.lines=this._text.split(this.lineBreakRegex)},Object.defineProperty(Text.prototype,"text",{get:function(){return this._text},set:function(value){var str=String(value);this._text!==str&&(this._text=str,this.splitText(),this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"font",{get:function(){return this.dirtyFont&&(this.dirtyFont=!1,this._font=getFont$3(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)),this._font},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"dirtyFont",{get:function(){return this._dirtyFont},set:function(value){this._dirtyFont!==value&&(this._dirtyFont=value,value&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(value){this._fontStyle!==value&&(this._fontStyle=value,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(value){this._fontWeight!==value&&(this._fontWeight=value,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"fontSize",{get:function(){return this._fontSize},set:function(value){isFinite(value)||(value=10),this._fontSize!==value&&(this._fontSize=value,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(value){this._fontFamily!==value&&(this._fontFamily=value,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"textAlign",{get:function(){return this._textAlign},set:function(value){this._textAlign!==value&&(this._textAlign=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(value){this._textBaseline!==value&&(this._textBaseline=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(value){this._lineHeight!==value&&(this._lineHeight=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Text.prototype.computeBBox=function(){return HdpiCanvas$1.has.textMetrics?this.getPreciseBBox():this.getApproximateBBox()},Text.prototype.getPreciseBBox=function(){var metrics=HdpiCanvas$1.measureText(this.text,this.font,this.textBaseline,this.textAlign);return new BBox$1(this.x-metrics.actualBoundingBoxLeft,this.y-metrics.actualBoundingBoxAscent,metrics.width,metrics.actualBoundingBoxAscent+metrics.actualBoundingBoxDescent)},Text.prototype.getApproximateBBox=function(){var size=HdpiCanvas$1.getTextSize(this.text,this.font),x=this.x,y=this.y;switch(this.textAlign){case"end":case"right":x-=size.width;break;case"center":x-=size.width/2}switch(this.textBaseline){case"alphabetic":y-=.7*size.height;break;case"middle":y-=.45*size.height;break;case"ideographic":case"bottom":y-=size.height;break;case"hanging":y-=.2*size.height}return new BBox$1(x,y,size.width,size.height)},Text.prototype.isPointInPath=function(x,y){var point=this.transformPoint(x,y),bbox=this.computeBBox();return!!bbox&&bbox.containsPoint(point.x,point.y)},Text.prototype.isPointInStroke=function(x,y){return!1},Text.prototype.render=function(ctx){if(this.lines.length&&this.scene){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx);var fill=this.fill,stroke=this.stroke,strokeWidth=this.strokeWidth;ctx.font=this.font,ctx.textAlign=this.textAlign,ctx.textBaseline=this.textBaseline;var pixelRatio=this.scene.canvas.pixelRatio||1,globalAlpha=ctx.globalAlpha;if(fill){ctx.fillStyle=fill,ctx.globalAlpha=globalAlpha*this.opacity*this.fillOpacity;var fillShadow=this.fillShadow,text=this.text,x=this.x,y=this.y;fillShadow&&fillShadow.enabled&&(ctx.shadowColor=fillShadow.color,ctx.shadowOffsetX=fillShadow.xOffset*pixelRatio,ctx.shadowOffsetY=fillShadow.yOffset*pixelRatio,ctx.shadowBlur=fillShadow.blur*pixelRatio),ctx.fillText(text,x,y)}if(stroke&&strokeWidth){ctx.strokeStyle=stroke,ctx.lineWidth=strokeWidth,ctx.globalAlpha=globalAlpha*this.opacity*this.strokeOpacity;var _c=this,lineDash=_c.lineDash,lineDashOffset=_c.lineDashOffset,lineCap=_c.lineCap,lineJoin=_c.lineJoin,strokeShadow=_c.strokeShadow;text=_c.text,x=_c.x,y=_c.y;lineDash&&ctx.setLineDash(lineDash),lineDashOffset&&(ctx.lineDashOffset=lineDashOffset),lineCap&&(ctx.lineCap=lineCap),lineJoin&&(ctx.lineJoin=lineJoin),strokeShadow&&strokeShadow.enabled&&(ctx.shadowColor=strokeShadow.color,ctx.shadowOffsetX=strokeShadow.xOffset*pixelRatio,ctx.shadowOffsetY=strokeShadow.yOffset*pixelRatio,ctx.shadowBlur=strokeShadow.blur*pixelRatio),ctx.strokeText(text,x,y)}this.dirty=!1}},Text.className="Text",Text.defaultStyles=chainObjects$1(Shape$1.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),Text}(Shape$1);function getFont$3(fontSize,fontFamily,fontStyle,fontWeight){return[fontStyle||"",fontWeight||"",fontSize+"px",fontFamily].join(" ").trim()}var __extends$18=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$J=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},Caption=function(_super){function Caption(){var _this=_super.call(this)||this;_this.node=new Text$2,_this.enabled=!1,_this.padding=new Padding$1(10);var node=_this.node;return node.textAlign="center",node.textBaseline="top",node.pointerEvents=PointerEvents$1.None,_this}return __extends$18(Caption,_super),Object.defineProperty(Caption.prototype,"text",{get:function(){return this.node.text},set:function(value){this.node.text!==value&&(this.node.text=value,this.fireEvent({type:"change"}))},enumerable:!0,configurable:!0}),Object.defineProperty(Caption.prototype,"fontStyle",{get:function(){return this.node.fontStyle},set:function(value){this.node.fontStyle!==value&&(this.node.fontStyle=value,this.fireEvent({type:"change"}))},enumerable:!0,configurable:!0}),Object.defineProperty(Caption.prototype,"fontWeight",{get:function(){return this.node.fontWeight},set:function(value){this.node.fontWeight!==value&&(this.node.fontWeight=value,this.fireEvent({type:"change"}))},enumerable:!0,configurable:!0}),Object.defineProperty(Caption.prototype,"fontSize",{get:function(){return this.node.fontSize},set:function(value){this.node.fontSize!==value&&(this.node.fontSize=value,this.fireEvent({type:"change"}))},enumerable:!0,configurable:!0}),Object.defineProperty(Caption.prototype,"fontFamily",{get:function(){return this.node.fontFamily},set:function(value){this.node.fontFamily!==value&&(this.node.fontFamily=value,this.fireEvent({type:"change"}))},enumerable:!0,configurable:!0}),Object.defineProperty(Caption.prototype,"color",{get:function(){return this.node.fill},set:function(value){this.node.fill!==value&&(this.node.fill=value,this.fireEvent({type:"change"}))},enumerable:!0,configurable:!0}),__decorate$J([reactive$1("change")],Caption.prototype,"enabled",void 0),__decorate$J([reactive$1("change")],Caption.prototype,"padding",void 0),Caption}(Observable$1),__extends$19=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();function ticks$1(a,b,count){var step=tickStep$1(a,b,count);return function range$1(a,b,step){void 0===step&&(step=1);for(var absStep=Math.abs(step),fractionDigits=absStep>0&&absStep<1?Math.abs(Math.floor(Math.log(absStep)/Math.LN10)):0,f=Math.pow(10,fractionDigits),n=Math.max(0,Math.ceil((b-a)/step))||0,values=new NumericTicks$1(fractionDigits),i=0;i<n;i++){var value=a+step*i;values[i]=Math.round(value*f)/f}return values}(a=Math.ceil(a/step)*step,b=Math.floor(b/step)*step+step/2,step)}var e10$1=Math.sqrt(50),e5$1=Math.sqrt(10),e2$1=Math.sqrt(2);function tickStep$1(a,b,count){var rawStep=Math.abs(b-a)/Math.max(0,count),step=Math.pow(10,Math.floor(Math.log(rawStep)/Math.LN10)),error=rawStep/step;return error>=e10$1?step*=10:error>=e5$1?step*=5:error>=e2$1&&(step*=2),b<a?-step:step}function tickIncrement$1(a,b,count){var rawStep=(b-a)/Math.max(0,count),power=Math.floor(Math.log(rawStep)/Math.LN10),error=rawStep/Math.pow(10,power);return power>=0?(error>=e10$1?10:error>=e5$1?5:error>=e2$1?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10$1?10:error>=e5$1?5:error>=e2$1?2:1)}var NumericTicks$1=function(_super){function NumericTicks(fractionDigits,elements){var _this=_super.call(this)||this;if(elements)for(var i=0,n=elements.length;i<n;i++)_this[i]=elements[i];return _this.fractionDigits=fractionDigits,_this}return __extends$19(NumericTicks,_super),NumericTicks}(Array);function calculateNiceSecondaryAxis(domain,primaryTickCount){var start=Math.floor(domain[0]),stop=domain[1];start=function calculateNiceStart(a,b,count){var rawStep=Math.abs(b-a)/(count-1),order=Math.floor(Math.log10(rawStep)),magnitude=Math.pow(10,order);return Math.floor(a/magnitude)*magnitude}(start,stop,primaryTickCount);var step=function getTickStep(start,stop,count){var segments=count-1,rawStep=(stop-start)/segments;return function calculateNextNiceStep(rawStep){var order=Math.floor(Math.log10(rawStep)),magnitude=Math.pow(10,order),step=rawStep/magnitude*10;if(step>0&&step<=1)return magnitude/10;if(step>1&&step<=2)return 2*magnitude/10;if(step>1&&step<=5)return 5*magnitude/10;if(step>5&&step<=10)return 10*magnitude/10;if(step>10&&step<=20)return 20*magnitude/10;if(step>20&&step<=40)return 40*magnitude/10;if(step>40&&step<=50)return 50*magnitude/10;if(step>50&&step<=100)return 100*magnitude/10;return step}(rawStep)}(start,stop,primaryTickCount),d=[start,stop=start+(primaryTickCount-1)*step],ticks=function getTicks(start,step,count){for(var stepPower=Math.floor(Math.log10(step)),fractionDigits=step>0&&step<1?Math.abs(stepPower):0,f=Math.pow(10,fractionDigits),ticks=new NumericTicks$1(fractionDigits),i=0;i<count;i++){var tick=start+step*i;ticks[i]=Math.round(tick*f)/f}return ticks}(start,step,primaryTickCount);return[d,ticks]}var constant$2=function(x){return function(){return x}};function interpolateNumber$1(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}var __read$l=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},Color$1=function(){function Color(r,g,b,a){void 0===a&&(a=1),this.r=Math.min(1,Math.max(0,r||0)),this.g=Math.min(1,Math.max(0,g||0)),this.b=Math.min(1,Math.max(0,b||0)),this.a=Math.min(1,Math.max(0,a||0))}return Color.fromString=function(str){if(str.indexOf("#")>=0)return Color.fromHexString(str);var hex=Color.nameToHex[str];if(hex)return Color.fromHexString(hex);if(str.indexOf("rgb")>=0)return Color.fromRgbaString(str);throw new Error("Invalid color string: '"+str+"'")},Color.parseHex=function(input){var parts;switch((input=input.replace(/ /g,"").slice(1)).length){case 6:case 8:parts=[];for(var i=0;i<input.length;i+=2)parts.push(parseInt(""+input[i]+input[i+1],16));break;case 3:case 4:parts=input.split("").map((function(p){return parseInt(p,16)})).map((function(p){return p+16*p}))}if(parts.length>=3&&parts.every((function(p){return p>=0})))return 3===parts.length&&parts.push(255),parts},Color.fromHexString=function(str){var values=Color.parseHex(str);if(values){var _a=__read$l(values,4);return new Color(_a[0]/255,_a[1]/255,_a[2]/255,_a[3]/255)}throw new Error("Malformed hexadecimal color string: '"+str+"'")},Color.stringToRgba=function(str){for(var _a=__read$l([NaN,NaN],2),po=_a[0],pc=_a[1],i=0;i<str.length;i++){var c=str[i];if(po||"("!==c){if(")"===c){pc=i;break}}else po=i}var contents=po&&pc&&str.substring(po+1,pc);if(contents){var parts=contents.split(","),rgba=[];for(i=0;i<parts.length;i++){var part=parts[i],value=parseFloat(part);if(isNaN(value))return;part.indexOf("%")>=0?(value=Math.max(0,Math.min(100,value)),value/=100):3===i?value=Math.max(0,Math.min(1,value)):(value=Math.max(0,Math.min(255,value)),value/=255),rgba.push(value)}return rgba}},Color.fromRgbaString=function(str){var rgba=Color.stringToRgba(str);if(rgba){if(3===rgba.length)return new Color(rgba[0],rgba[1],rgba[2]);if(4===rgba.length)return new Color(rgba[0],rgba[1],rgba[2],rgba[3])}throw new Error("Malformed rgb/rgba color string: '"+str+"'")},Color.fromArray=function(arr){if(4===arr.length)return new Color(arr[0],arr[1],arr[2],arr[3]);if(3===arr.length)return new Color(arr[0],arr[1],arr[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},Color.fromHSB=function(h,s,b,alpha){void 0===alpha&&(alpha=1);var rgb=Color.HSBtoRGB(h,s,b);return new Color(rgb[0],rgb[1],rgb[2],alpha)},Color.padHex=function(str){return 1===str.length?"0"+str:str},Color.prototype.toHexString=function(){var hex="#"+Color.padHex(Math.round(255*this.r).toString(16))+Color.padHex(Math.round(255*this.g).toString(16))+Color.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(hex+=Color.padHex(Math.round(255*this.a).toString(16))),hex},Color.prototype.toRgbaString=function(fractionDigits){void 0===fractionDigits&&(fractionDigits=3);var components=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],k=Math.pow(10,fractionDigits);return 1!==this.a?(components.push(Math.round(this.a*k)/k),"rgba("+components.join(", ")+")"):"rgb("+components.join(", ")+")"},Color.prototype.toString=function(){return 1===this.a?this.toHexString():this.toRgbaString()},Color.prototype.toHSB=function(){return Color.RGBtoHSB(this.r,this.g,this.b)},Color.RGBtoHSB=function(r,g,b){var min=Math.min(r,g,b),max=Math.max(r,g,b),H=NaN;if(min!==max){var delta=max-min,rc=(max-r)/delta,gc=(max-g)/delta,bc=(max-b)/delta;H=r===max?bc-gc:g===max?2+rc-bc:4+gc-rc,(H/=6)<0&&(H+=1)}return[360*H,0!==max?(max-min)/max:0,max]},Color.HSBtoRGB=function(H,S,B){isNaN(H)&&(H=0),H=(H%360+360)%360/360;var r=0,g=0,b=0;if(0===S)r=g=b=B;else{var h=6*(H-Math.floor(H)),f=h-Math.floor(h),p=B*(1-S),q=B*(1-S*f),t=B*(1-S*(1-f));switch(h|0){case 0:r=B,g=t,b=p;break;case 1:r=q,g=B,b=p;break;case 2:r=p,g=B,b=t;break;case 3:r=p,g=q,b=B;break;case 4:r=t,g=p,b=B;break;case 5:r=B,g=p,b=q}}return[r,g,b]},Color.prototype.derive=function(hueShift,saturationFactor,brightnessFactor,opacityFactor){var hsb=Color.RGBtoHSB(this.r,this.g,this.b),b=hsb[2];0==b&&brightnessFactor>1&&(b=.05);var h=((hsb[0]+hueShift)%360+360)%360,s=Math.max(Math.min(hsb[1]*saturationFactor,1),0);b=Math.max(Math.min(b*brightnessFactor,1),0);var a=Math.max(Math.min(this.a*opacityFactor,1),0),rgba=Color.HSBtoRGB(h,s,b);return rgba.push(a),Color.fromArray(rgba)},Color.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},Color.prototype.darker=function(){return this.derive(0,1,.7,1)},Color.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),Color}();function color$1(a,b){if("string"==typeof a)try{a=Color$1.fromString(a)}catch(e){a=Color$1.fromArray([0,0,0])}if("string"==typeof b)try{b=Color$1.fromString(b)}catch(e){b=Color$1.fromArray([0,0,0])}var red=interpolateNumber$1(a.r,b.r),green=interpolateNumber$1(a.g,b.g),blue=interpolateNumber$1(a.b,b.b),alpha=interpolateNumber$1(a.a,b.a);return function(t){return Color$1.fromArray([red(t),green(t),blue(t),alpha(t)]).toRgbaString()}}function interpolateValue$1(a,b){var t=typeof b;if(null==b||"boolean"===t)return constant$2(b);if("number"===t)return interpolateNumber$1(a,b);if("string"===t)try{return color$1(a,b=Color$1.fromString(b))}catch(e){}return b instanceof Color$1?color$1(a,b):b instanceof Date?function date$1(a,b){var date=new Date,msA=+a,msB=+b;return function(t){return date.setTime(msA*(1-t)+msB*t),date}}(a,b):Array.isArray(b)?function array$1(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=interpolateValue$1(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}(a,b):"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?function object$1(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=interpolateValue$1(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}(a,b):interpolateNumber$1(a,b)}function ascending$1(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function complexBisectRight$1(list,x,map,lo,hi){void 0===lo&&(lo=0),void 0===hi&&(hi=list.length);for(var comparator=function ascendingComparator$1(map){return function(item,x){return ascending$1(map(item),x)}}(map);lo<hi;){var mid=lo+hi>>>1;comparator(list[mid],x)<0?lo=mid+1:hi=mid}return lo}var __read$m=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},identity$3=function(x){return x};function clamper$1(domain){var _a,a=domain[0],b=domain[domain.length-1];return a>b&&(_a=__read$m([b,a],2),a=_a[0],b=_a[1]),function(x){return Math.max(a,Math.min(b,x))}}var ContinuousScale$1=function(){function ContinuousScale(){this.unknown=void 0,this.clamper=clamper$1,this._clamp=identity$3,this._domain=[0,1],this._range=[0,1],this.transform=identity$3,this.untransform=identity$3,this._interpolate=interpolateValue$1,this.rescale()}return Object.defineProperty(ContinuousScale.prototype,"clamp",{get:function(){return this._clamp!==identity$3},set:function(value){this._clamp=value?this.clamper(this.domain):identity$3},enumerable:!0,configurable:!0}),ContinuousScale.prototype.setDomain=function(values){this._domain=Array.prototype.map.call(values,(function(v){return+v})),this._clamp!==identity$3&&(this._clamp=this.clamper(this.domain)),this.rescale()},ContinuousScale.prototype.getDomain=function(){return this._domain.slice()},Object.defineProperty(ContinuousScale.prototype,"domain",{get:function(){return this.getDomain()},set:function(values){this.setDomain(values)},enumerable:!0,configurable:!0}),Object.defineProperty(ContinuousScale.prototype,"range",{get:function(){return this._range.slice()},set:function(values){this._range=Array.prototype.slice.call(values),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(ContinuousScale.prototype,"interpolate",{get:function(){return this._interpolate},set:function(value){this._interpolate=value,this.rescale()},enumerable:!0,configurable:!0}),ContinuousScale.prototype.rescale=function(){Math.min(this.domain.length,this.range.length)>2?this.piecewise=this.polymap:this.piecewise=this.bimap,this.output=void 0,this.input=void 0},ContinuousScale.prototype.normalize=function(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:(x=isNaN(b)?NaN:.5,function(){return x});var x},ContinuousScale.prototype.bimap=function(domain,range,interpolate){var xt,ty,x0=domain[0],x1=domain[1],y0=range[0],y1=range[1];return x1<x0?(xt=this.normalize(x1,x0),ty=interpolate(y1,y0)):(xt=this.normalize(x0,x1),ty=interpolate(y0,y1)),function(x){return ty(xt(x))}},ContinuousScale.prototype.polymap=function(domain,range,interpolate){var _this=this,n=Math.min(domain.length,range.length)-1;domain[n]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());var dt=Array.from({length:n},(function(_,i){return _this.normalize(domain[i],domain[i+1])})),tr=Array.from({length:n},(function(_,i){return interpolate(range[i],range[i+1])}));return function(x){var i=function bisectRight(list,x,comparator,lo,hi){for(void 0===lo&&(lo=0),void 0===hi&&(hi=list.length);lo<hi;){var mid=lo+hi>>>1;comparator(list[mid],x)>0?hi=mid:lo=mid+1}return lo}(domain,x,ascending$1,1,n)-1;return tr[i](dt[i](x))}},ContinuousScale.prototype.convert=function(x,clamper){if(x=+x,isNaN(x))return this.unknown;this.output||(this.output=this.piecewise(this.domain.map(this.transform),this.range,this.interpolate));var clamp=clamper?clamper(this.domain):this._clamp;return this.output(this.transform(clamp(x)))},ContinuousScale.prototype.invert=function(y){return this.input||(this.input=this.piecewise(this.range,this.domain.map(this.transform),interpolateNumber$1)),this._clamp(this.untransform(this.input(y)))},ContinuousScale}();var prefixExponent$1,formatDefaultLocale$1,format$1,formatPrefix$1,formatTypes$1={"":function formatDefault$1(x,p){var xs=x.toPrecision(p);out:for(var n=xs.length,i=1,i0=-1,i1=0;i<n;++i)switch(xs[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;case"e":break out;default:i0>0&&(i0=0)}return i0>0?xs.slice(0,i0)+xs.slice(i1+1):xs},"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return String(x)},d:function formatDecimal$1(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded$1(100*x,p)},r:formatRounded$1,s:function formatPrefixAuto$1(x,p){void 0===p&&(p=0);var d=formatDecimalParts$1(x,p);if(!d)return String(x);var coefficient=d[0],exponent=d[1];prefixExponent$1=3*Math.max(-8,Math.min(8,Math.floor(exponent/3)));var i=exponent-prefixExponent$1+1,n=coefficient.length;if(i===n)return coefficient;if(i>n)return coefficient+new Array(i-n+1).join("0");if(i>0)return coefficient.slice(0,i)+"."+coefficient.slice(i);var parts=formatDecimalParts$1(x,Math.max(0,p+i-1));return"0."+new Array(1-i).join("0")+parts[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}},prefixes$1=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],FormatSpecifier$1=function FormatSpecifier(specifier){specifier instanceof FormatSpecifier?(this.fill=specifier.fill,this.align=specifier.align,this.sign=specifier.sign,this.symbol=specifier.symbol,this.zero=specifier.zero,this.width=specifier.width,this.comma=specifier.comma,this.precision=specifier.precision,this.trim=specifier.trim,this.type=specifier.type,this.string=specifier.string):(this.fill=void 0===specifier.fill?" ":String(specifier.fill),this.align=void 0===specifier.align?">":String(specifier.align),this.sign=void 0===specifier.sign?"-":String(specifier.sign),this.symbol=void 0===specifier.symbol?"":String(specifier.symbol),this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":String(specifier.type),this.string=specifier.string)},formatRegEx$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i,interpolateRegEx$1=/(#\{(.*?)\})/g;function makeFormatSpecifier$1(specifier){if(specifier instanceof FormatSpecifier$1)return new FormatSpecifier$1(specifier);var found=!1,string=specifier.replace(interpolateRegEx$1,(function(){return found||(specifier=arguments[2],found=!0),"#{}"})),match=formatRegEx$1.exec(specifier);if(!match)throw new Error("Invalid format: "+specifier);return new FormatSpecifier$1({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10],string:found?string:void 0})}function tickFormat$1(start,stop,count,specifier){var precision,step=tickStep$1(start,stop,count),formatSpecifier=makeFormatSpecifier$1(null==specifier?",f":specifier);switch(formatSpecifier.type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=formatSpecifier.precision||isNaN(precision=function precisionPrefix$1(step,value){var x=Math.floor(exponent$1(value)/3);return x=Math.min(8,x),x=Math.max(-8,x),Math.max(0,3*x-exponent$1(Math.abs(step)))}(step,value))||(formatSpecifier.precision=precision),formatPrefix$1(formatSpecifier,value);case"":case"e":case"g":case"p":case"r":null!=formatSpecifier.precision||isNaN(precision=function precisionRound$1(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,exponent$1(max)-exponent$1(step))+1}(step,Math.max(Math.abs(start),Math.abs(stop))))||(formatSpecifier.precision=precision-+("e"===formatSpecifier.type));break;case"f":case"%":null!=formatSpecifier.precision||isNaN(precision=function precisionFixed$1(step){return Math.max(0,-exponent$1(Math.abs(step)))}(step))||(formatSpecifier.precision=precision-2*+("%"===formatSpecifier.type))}return format$1(formatSpecifier)}function formatRounded$1(x,p){var d=formatDecimalParts$1(x,p);if(!d)return String(x);var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}function formatDecimalParts$1(x,p){var sx=p?x.toExponential(p-1):x.toExponential(),i=sx.indexOf("e");if(!(i<0)){var coefficient=sx.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+sx.slice(i+1)]}}function identity$4(x){return x}function exponent$1(x){var parts=formatDecimalParts$1(Math.abs(x));return parts?parts[1]:NaN}!function defaultLocale$1(definition){formatDefaultLocale$1=function formatLocale$2(locale){var group=void 0===locale.grouping||void 0===locale.thousands?identity$4:function formatGroup$1(grouping,thousands){return function(value,width){for(var t=[],i=value.length,j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}}(Array.prototype.map.call(locale.grouping,Number),String(locale.thousands)),currencyPrefix=void 0===locale.currency?"":String(locale.currency[0]),currencySuffix=void 0===locale.currency?"":String(locale.currency[1]),decimal=void 0===locale.decimal?".":String(locale.decimal),numerals=void 0===locale.numerals?identity$4:function formatNumerals$1(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(Array.prototype.map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":String(locale.percent),minus=void 0===locale.minus?"−":String(locale.minus),nan=void 0===locale.nan?"NaN":String(locale.nan);function newFormat(specifier){var formatSpecifier=makeFormatSpecifier$1(specifier),fill=formatSpecifier.fill,align=formatSpecifier.align,sign=formatSpecifier.sign,symbol=formatSpecifier.symbol,zero=formatSpecifier.zero,width=formatSpecifier.width,comma=formatSpecifier.comma,precision=formatSpecifier.precision,trim=formatSpecifier.trim,type=formatSpecifier.type;"n"===type?(comma=!0,type="g"):formatTypes$1[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes$1[type],maybeSuffix=/[defgprs%]/.test(type);function format(x){var value,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(+x)+valueSuffix,value="";else{var nx=+x,valueNegative=x<0||1/nx<0;value=isNaN(nx)?nan:formatType(Math.abs(nx),precision),trim&&(value=function formatTrim$1(s){out:for(var n=s.length,i=1,i0=-1,i1=0;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(!+s[i])break out;i0>0&&(i0=0)}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0==+value&&"+"!==sign&&(valueNegative=!1);var signSuffix=valueNegative&&"("===sign?")":"";if(valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes$1[8+prefixExponent$1/3]:"")+valueSuffix+signSuffix,maybeSuffix)for(var i=0,n=value.length;i<n;i++){var c=value.charCodeAt(i);if(48>c||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}var string=formatSpecifier.string;return string?string.replace(interpolateRegEx$1,(function(){return numerals(value)})):numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format}function formatPrefix(specifier,value){var formatSpecifier=makeFormatSpecifier$1(specifier);formatSpecifier.type="f";var f=newFormat(formatSpecifier),e=3*Math.max(-8,Math.min(8,Math.floor(exponent$1(value)/3))),k=Math.pow(10,-e),prefix=prefixes$1[8+e/3];return function(value){return f(k*+value)+prefix}}return{format:newFormat,formatPrefix}}(definition),format$1=formatDefaultLocale$1.format,formatPrefix$1=formatDefaultLocale$1.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var __extends$1a=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),LinearScale$1=function(_super){function LinearScale(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type="linear",_this}return __extends$1a(LinearScale,_super),LinearScale.prototype.ticks=function(count){void 0===count&&(count=10);var d=this._domain;return ticks$1(d[0],d[d.length-1],count)},LinearScale.prototype.nice=function(count){void 0===count&&(count=10);var step,d=this.domain,i0=0,i1=d.length-1,start=d[i0],stop=d[i1];stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step),(step=tickIncrement$1(start,stop,count))>0?step=tickIncrement$1(start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step,count):step<0&&(step=tickIncrement$1(start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step,count)),step>0?(d[i0]=Math.floor(start/step)*step,d[i1]=Math.ceil(stop/step)*step,this.domain=d):step<0&&(d[i0]=Math.ceil(start*step)/step,d[i1]=Math.floor(stop*step)/step,this.domain=d)},LinearScale.prototype.tickFormat=function(count,specifier){var d=this.domain;return tickFormat$1(d[0],d[d.length-1],null==count?10:count,specifier)},LinearScale}(ContinuousScale$1),__values$4=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};function find(arr,predicate){for(var i=0;i<arr.length;i++){var value=arr[i];if(predicate(value,i,arr))return value}}function identity$5(value){return value}function extent$1(values,predicate,map){for(var value,min,max,transform=map||identity$5,n=values.length,i=-1;++i<n;)if(predicate(value=values[i]))for(min=max=value;++i<n;)predicate(value=values[i])&&(min>value&&(min=value),max<value&&(max=value));return void 0===min||void 0===max?void 0:[transform(min),transform(max)]}function isNumber$1(value){return"number"==typeof value&&Number.isFinite(value)}function isNumeric$1(value){return isNumber$1(value)||function isNumberObject$1(value){return!!value&&value.hasOwnProperty("valueOf")&&isNumber$1(value.valueOf())}(value)}function isString$1(value){return"string"==typeof value}function isDiscrete(value){return isString$1(value)||function isStringObject$1(value){return!!value&&value.hasOwnProperty("toString")&&isString$1(value.toString())}(value)}function isContinuous$1(value){return isNumeric$1(value)||function isDate$1(value){return value instanceof Date&&!isNaN(+value)}(value)}var __extends$1b=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Group$1=function(_super){function Group(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.isContainerNode=!0,_this._opacity=1,_this}return __extends$1b(Group,_super),Object.defineProperty(Group.prototype,"opacity",{get:function(){return this._opacity},set:function(value){value=Math.min(1,Math.max(0,value)),this._opacity!==value&&(this._opacity=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Group.prototype.containsPoint=function(x,y){return!0},Group.prototype.computeBBox=function(){var left=1/0,right=-1/0,top=1/0,bottom=-1/0;return this.dirtyTransform&&this.computeTransformMatrix(),this.children.forEach((function(child){if(child.visible){var bbox=child.computeBBox();if(bbox){if(!(child instanceof Group)){child.dirtyTransform&&child.computeTransformMatrix();for(var matrix=Matrix$1.flyweight(child.matrix),parent_1=child.parent;parent_1;)matrix.preMultiplySelf(parent_1.matrix),parent_1=parent_1.parent;matrix.transformBBox(bbox,0,bbox)}var x=bbox.x,y=bbox.y;x<left&&(left=x),y<top&&(top=y),x+bbox.width>right&&(right=x+bbox.width),y+bbox.height>bottom&&(bottom=y+bbox.height)}}})),new BBox$1(left,top,right-left,bottom-top)},Group.prototype.render=function(ctx){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx);var children=this.children,n=children.length;ctx.globalAlpha*=this.opacity,this.dirtyZIndex&&(this.dirtyZIndex=!1,children.sort((function(a,b){return a.zIndex-b.zIndex})));for(var i=0;i<n;i++){var child=children[i];child.visible&&(ctx.save(),child.render(ctx),ctx.restore())}},Group.className="Group",Group}(Node$1),EnterNode$1=function(){function EnterNode(parent,datum){this.next=null,this.scene=parent.scene,this.parent=parent,this.datum=datum}return EnterNode.prototype.appendChild=function(node){if(null===this.next)return this.parent.insertBefore(node,null);if(!Node$1.isNode(this.next))throw new Error(this.next+" is not a Node.");return this.parent.insertBefore(node,this.next)},EnterNode.prototype.insertBefore=function(node,nextNode){return this.parent.insertBefore(node,nextNode)},EnterNode}(),Selection$1=function(){function Selection(groups,parents){this.groups=groups,this.parents=parents}return Selection.select=function(node){return new Selection([["function"==typeof node?node():node]],[void 0])},Selection.selectAll=function(nodes){return new Selection([null==nodes?[]:nodes],[void 0])},Selection.prototype.append=function(Class){return this.select((function(node){return node.appendChild(new Class)}))},Selection.prototype.appendFn=function(creator){return this.select((function(node,data,index,group){return node.appendChild(creator(node,data,index,group))}))},Selection.prototype.select=function(selector){for(var groups=this.groups,numGroups=groups.length,subgroups=[],j=0;j<numGroups;j++)for(var group=groups[j],groupSize=group.length,subgroup=subgroups[j]=new Array(groupSize),i=0;i<groupSize;i++){var node=group[i];if(node){var subnode=selector(node,node.datum,i,group);subnode&&(subnode.datum=node.datum),subgroup[i]=subnode}}return new Selection(subgroups,this.parents)},Selection.prototype.selectByClass=function(Class){return this.select((function(node){if(Node$1.isNode(node))for(var children=node.children,n=children.length,i=0;i<n;i++){var child=children[i];if(child instanceof Class)return child}}))},Selection.prototype.selectByTag=function(tag){return this.select((function(node){if(Node$1.isNode(node))for(var children=node.children,n=children.length,i=0;i<n;i++){var child=children[i];if(child.tag===tag)return child}}))},Selection.prototype.selectAllByClass=function(Class){return this.selectAll((function(node){var nodes=[];if(Node$1.isNode(node))for(var children=node.children,n=children.length,i=0;i<n;i++){var child=children[i];child instanceof Class&&nodes.push(child)}return nodes}))},Selection.prototype.selectAllByTag=function(tag){return this.selectAll((function(node){var nodes=[];if(Node$1.isNode(node))for(var children=node.children,n=children.length,i=0;i<n;i++){var child=children[i];child.tag===tag&&nodes.push(child)}return nodes}))},Selection.prototype.selectNone=function(){return[]},Selection.prototype.selectAll=function(selectorAll){selectorAll||(selectorAll=this.selectNone);for(var subgroups=[],parents=[],groups=this.groups,groupCount=groups.length,j=0;j<groupCount;j++)for(var group=groups[j],groupLength=group.length,i=0;i<groupLength;i++){var node=group[i];node&&(subgroups.push(selectorAll(node,node.datum,i,group)),parents.push(node))}return new Selection(subgroups,parents)},Selection.prototype.each=function(cb){for(var groups=this.groups,numGroups=groups.length,j=0;j<numGroups;j++)for(var group=groups[j],groupSize=group.length,i=0;i<groupSize;i++){var node=group[i];node&&cb(node,node.datum,i,group)}return this},Selection.prototype.remove=function(){return this.each((function(node){if(Node$1.isNode(node)){var parent_1=node.parent;parent_1&&parent_1.removeChild(node)}}))},Selection.prototype.merge=function(other){for(var groups0=this.groups,groups1=other.groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;j++)for(var group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;i++){var node=group0[i]||group1[i];merge[i]=node||void 0}for(;j<m0;j++)merges[j]=groups0[j];return new Selection(merges,this.parents)},Selection.prototype.node=function(){for(var groups=this.groups,numGroups=groups.length,j=0;j<numGroups;j++)for(var group=groups[j],groupSize=group.length,i=0;i<groupSize;i++){var node=group[i];if(node)return node}return null},Selection.prototype.attr=function(name,value){return this.each((function(node){node[name]=value})),this},Selection.prototype.attrFn=function(name,value){return this.each((function(node,datum,index,group){node[name]=value(node,datum,index,group)})),this},Selection.prototype.call=function(cb){return cb(this),this},Object.defineProperty(Selection.prototype,"size",{get:function(){var size=0;return this.each((function(){return size++})),size},enumerable:!0,configurable:!0}),Object.defineProperty(Selection.prototype,"data",{get:function(){var data=[];return this.each((function(_,datum){return data.push(datum)})),data},enumerable:!0,configurable:!0}),Object.defineProperty(Selection.prototype,"enter",{get:function(){return new Selection(this.enterGroups?this.enterGroups:[[]],this.parents)},enumerable:!0,configurable:!0}),Object.defineProperty(Selection.prototype,"exit",{get:function(){return new Selection(this.exitGroups?this.exitGroups:[[]],this.parents)},enumerable:!0,configurable:!0}),Selection.prototype.setDatum=function(value){return this.each((function(node){node.datum=value}))},Object.defineProperty(Selection.prototype,"datum",{get:function(){var node=this.node();return node?node.datum:null},enumerable:!0,configurable:!0}),Selection.prototype.setData=function(values,key){if("function"!=typeof values){var data_1=values;values=function(){return data_1}}for(var groups=this.groups,parents=this.parents,numGroups=groups.length,updateGroups=new Array(numGroups),enterGroups=new Array(numGroups),exitGroups=new Array(numGroups),j=0;j<numGroups;j++){var group=groups[j],parent_2=parents[j];if(!parent_2)throw new Error("Group #"+j+" has no parent: "+group);var groupSize=group.length,data=values(parent_2,parent_2.datum,j,parents),dataSize=data.length,enterGroup=enterGroups[j]=new Array(dataSize),updateGroup=updateGroups[j]=new Array(dataSize),exitGroup=exitGroups[j]=new Array(groupSize);key?this.bindKey(parent_2,group,enterGroup,updateGroup,exitGroup,data,key):this.bindIndex(parent_2,group,enterGroup,updateGroup,exitGroup,data);for(var i0=0,i1=0;i0<dataSize;i0++){var previous=enterGroup[i0];if(previous){i0>=i1&&(i1=i0+1);for(var next=void 0;!(next=updateGroup[i1])&&i1<dataSize;)i1++;previous.next=next||null}}}var result=new Selection(updateGroups,parents);return result.enterGroups=enterGroups,result.exitGroups=exitGroups,result},Selection.prototype.bindIndex=function(parent,group,enter,update,exit,data){for(var groupSize=group.length,dataSize=data.length,i=0;i<dataSize;i++){(node=group[i])?(node.datum=data[i],update[i]=node):enter[i]=new EnterNode$1(parent,data[i])}for(;i<groupSize;i++){var node;(node=group[i])&&(exit[i]=node)}},Selection.prototype.bindKey=function(parent,group,enter,update,exit,data,key){for(var groupSize=group.length,dataSize=data.length,keyValues=new Array(groupSize),nodeByKeyValue={},i=0;i<groupSize;i++){if(node=group[i])(keyValue=keyValues[i]=Selection.keyPrefix+key(node,node.datum,i,group))in nodeByKeyValue?exit[i]=node:nodeByKeyValue[keyValue]=node}for(i=0;i<dataSize;i++){var keyValue;(node=nodeByKeyValue[keyValue=Selection.keyPrefix+key(parent,data[i],i,data)])?(update[i]=node,node.datum=data[i],nodeByKeyValue[keyValue]=void 0):enter[i]=new EnterNode$1(parent,data[i])}for(i=0;i<groupSize;i++){var node;(node=group[i])&&nodeByKeyValue[keyValues[i]]===node&&(exit[i]=node)}},Selection.keyPrefix="$",Selection}(),__extends$1c=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Line$1=function(_super){function Line(){var _this=_super.call(this)||this;return _this._x1=0,_this._y1=0,_this._x2=0,_this._y2=0,_this.restoreOwnStyles(),_this}return __extends$1c(Line,_super),Object.defineProperty(Line.prototype,"x1",{get:function(){return this._x1},set:function(value){this._x1!==value&&(this._x1=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Line.prototype,"y1",{get:function(){return this._y1},set:function(value){this._y1!==value&&(this._y1=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Line.prototype,"x2",{get:function(){return this._x2},set:function(value){this._x2!==value&&(this._x2=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Line.prototype,"y2",{get:function(){return this._y2},set:function(value){this._y2!==value&&(this._y2=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Line.prototype.computeBBox=function(){return new BBox$1(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},Line.prototype.isPointInPath=function(x,y){return!1},Line.prototype.isPointInStroke=function(x,y){return!1},Line.prototype.render=function(ctx){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx);var x1=this.x1,y1=this.y1,x2=this.x2,y2=this.y2;if(x1===x2){var x=Math.round(x1)+Math.floor(this.strokeWidth)%2/2;x1=x,x2=x}else if(y1===y2){var y=Math.round(y1)+Math.floor(this.strokeWidth)%2/2;y1=y,y2=y}ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),this.fillStroke(ctx),this.dirty=!1},Line.className="Line",Line.defaultStyles=chainObjects$1(Shape$1.defaultStyles,{fill:void 0,strokeWidth:1}),Line}(Shape$1),sign$1=Math.sign?Math.sign:function(x){return 0===(x=+x)||isNaN(x)?x:x>0?1:-1};function cubicRoots$1(a,b,c,d){if(0===a)return function quadraticRoots$1(a,b,c){if(0===a)return function linearRoot$1(a,b){var t=-b/a;return 0!==a&&t>=0&&t<=1?[t]:[]}(b,c);var D=b*b-4*a*c,roots=[];if(0===D){var t=-b/(2*a);t>=0&&t<=1&&roots.push(t)}else if(D>0){var rD=Math.sqrt(D),t1=(-b-rD)/(2*a),t2=(-b+rD)/(2*a);t1>=0&&t1<=1&&roots.push(t1),t2>=0&&t2<=1&&roots.push(t2)}return roots}(b,c,d);var A=b/a,B=c/a,Q=(3*B-A*A)/9,R=(9*A*B-27*(d/a)-2*A*A*A)/54,D=Q*Q*Q+R*R,third=1/3,roots=[];if(D>=0){var rD=Math.sqrt(D),S=sign$1(R+rD)*Math.pow(Math.abs(R+rD),third),T=sign$1(R-rD)*Math.pow(Math.abs(R-rD),third),Im=Math.abs(Math.sqrt(3)*(S-T)/2),t=-third*A+(S+T);if(t>=0&&t<=1&&roots.push(t),0===Im){var t_1=-third*A-(S+T)/2;t_1>=0&&t_1<=1&&roots.push(t_1)}}else{var theta=Math.acos(R/Math.sqrt(-Q*Q*Q)),thirdA=third*A,twoSqrtQ=2*Math.sqrt(-Q),t1=twoSqrtQ*Math.cos(third*theta)-thirdA,t2=twoSqrtQ*Math.cos(third*(theta+2*Math.PI))-thirdA,t3=twoSqrtQ*Math.cos(third*(theta+4*Math.PI))-thirdA;t1>=0&&t1<=1&&roots.push(t1),t2>=0&&t2<=1&&roots.push(t2),t3>=0&&t3<=1&&roots.push(t3)}return roots}function segmentIntersection$1(ax1,ay1,ax2,ay2,bx1,by1,bx2,by2){var d=(ax2-ax1)*(by2-by1)-(ay2-ay1)*(bx2-bx1);if(0===d)return null;var ua=((bx2-bx1)*(ay1-by1)-(ax1-bx1)*(by2-by1))/d,ub=((ax2-ax1)*(ay1-by1)-(ay2-ay1)*(ax1-bx1))/d;return ua>=0&&ua<=1&&ub>=0&&ub<=1?{x:ax1+ua*(ax2-ax1),y:ay1+ua*(ay2-ay1)}:null}function cubicSegmentIntersections$1(px1,py1,px2,py2,px3,py3,px4,py4,x1,y1,x2,y2){for(var intersections=[],A=y1-y2,B=x2-x1,C=x1*(y2-y1)-y1*(x2-x1),bx=bezierCoefficients$1(px1,px2,px3,px4),by=bezierCoefficients$1(py1,py2,py3,py4),roots=cubicRoots$1(A*bx[0]+B*by[0],A*bx[1]+B*by[1],A*bx[2]+B*by[2],A*bx[3]+B*by[3]+C),i=0;i<roots.length;i++){var t=roots[i],tt=t*t,ttt=t*tt,x=bx[0]*ttt+bx[1]*tt+bx[2]*t+bx[3],y=by[0]*ttt+by[1]*tt+by[2]*t+by[3],s=void 0;(s=x1!==x2?(x-x1)/(x2-x1):(y-y1)/(y2-y1))>=0&&s<=1&&intersections.push({x,y})}return intersections}function bezierCoefficients$1(P1,P2,P3,P4){return[3*P2-P1-3*P3+P4,3*P1-6*P2+3*P3,-3*P1+3*P2,P1]}var Path2D$1=function(){function Path2D(){this.commands=[],this.params=[],this._closedPath=!1}return Path2D.prototype.draw=function(ctx){var commands=this.commands,params=this.params,n=commands.length,j=0;ctx.beginPath();for(var i=0;i<n;i++)switch(commands[i]){case"M":ctx.moveTo(params[j++],params[j++]);break;case"L":ctx.lineTo(params[j++],params[j++]);break;case"C":ctx.bezierCurveTo(params[j++],params[j++],params[j++],params[j++],params[j++],params[j++]);break;case"Z":ctx.closePath()}},Path2D.prototype.moveTo=function(x,y){this.xy?(this.xy[0]=x,this.xy[1]=y):this.xy=[x,y],this.commands.push("M"),this.params.push(x,y)},Path2D.prototype.lineTo=function(x,y){this.xy?(this.commands.push("L"),this.params.push(x,y),this.xy[0]=x,this.xy[1]=y):this.moveTo(x,y)},Path2D.prototype.rect=function(x,y,width,height){this.moveTo(x,y),this.lineTo(x+width,y),this.lineTo(x+width,y+height),this.lineTo(x,y+height),this.closePath()},Path2D.prototype.arcTo=function(rx,ry,rotation,fA,fS,x2,y2){var xy=this.xy;if(xy){rx<0&&(rx=-rx),ry<0&&(ry=-ry);var x1=xy[0],y1=xy[1],hdx=(x1-x2)/2,hdy=(y1-y2)/2,sinPhi=Math.sin(rotation),cosPhi=Math.cos(rotation),xp=cosPhi*hdx+sinPhi*hdy,yp=-sinPhi*hdx+cosPhi*hdy,ratX=xp/rx,ratY=yp/ry,lambda=ratX*ratX+ratY*ratY,cx=(x1+x2)/2,cy=(y1+y2)/2,cpx=0,cpy=0;lambda>=1?(rx*=lambda=Math.sqrt(lambda),ry*=lambda):(lambda=Math.sqrt(1/lambda-1),fA===fS&&(lambda=-lambda),cx+=cosPhi*(cpx=lambda*rx*ratY)-sinPhi*(cpy=-lambda*ry*ratX),cy+=sinPhi*cpx+cosPhi*cpy);var theta1=Math.atan2((yp-cpy)/ry,(xp-cpx)/rx),deltaTheta=Math.atan2((-yp-cpy)/ry,(-xp-cpx)/rx)-theta1;this.cubicArc(cx,cy,rx,ry,rotation,theta1,theta1+deltaTheta,1-fS)}},Path2D.cubicArc=function(commands,params,cx,cy,rx,ry,phi,theta1,theta2,anticlockwise){if(anticlockwise){var temp=theta1;theta1=theta2,theta2=temp}var start=params.length,f90=.5522847498307935,sinTheta1=Math.sin(theta1),cosTheta1=Math.cos(theta1),sinPhi=Math.sin(phi),cosPhi=Math.cos(phi),rightAngle=Math.PI/2,xx=cosPhi*cosTheta1*rx-sinPhi*sinTheta1*ry,yx=sinPhi*cosTheta1*rx+cosPhi*sinTheta1*ry,xy=-cosPhi*sinTheta1*rx-sinPhi*cosTheta1*ry,yy=-sinPhi*sinTheta1*rx+cosPhi*cosTheta1*ry;for((theta2-=theta1)<0&&(theta2+=2*Math.PI),commands.push("M"),params.push(xx+cx,yx+cy);theta2>=rightAngle;){theta2-=rightAngle,commands.push("C");var lastX=xy+cx;params.push(xx+xy*f90+cx,yx+yy*f90+cy,xx*f90+xy+cx,yx*f90+yy+cy,Math.abs(lastX)<1e-8?0:lastX,yy+cy);temp=xx;xx=xy,xy=-temp,temp=yx,yx=yy,yy=-temp}if(theta2){var f=4/3*Math.tan(theta2/4),sinPhi2=Math.sin(theta2),cosPhi2=Math.cos(theta2),C2x=cosPhi2+f*sinPhi2,C2y=sinPhi2-f*cosPhi2;commands.push("C");lastX=xx*cosPhi2+xy*sinPhi2+cx;params.push(xx+xy*f+cx,yx+yy*f+cy,xx*C2x+xy*C2y+cx,yx*C2x+yy*C2y+cy,Math.abs(lastX)<1e-8?0:lastX,yx*cosPhi2+yy*sinPhi2+cy)}if(anticlockwise)for(var i=start,j=params.length-2;i<j;i+=2,j-=2){temp=params[i];params[i]=params[j],params[j]=temp,temp=params[i+1],params[i+1]=params[j+1],params[j+1]=temp}},Path2D.prototype.cubicArc=function(cx,cy,rx,ry,phi,theta1,theta2,anticlockwise){var commands=this.commands,params=this.params,start=commands.length;Path2D.cubicArc(commands,params,cx,cy,rx,ry,phi,theta1,theta2,anticlockwise);var x=params[params.length-2],y=params[params.length-1];this.xy?(commands[start]="L",this.xy[0]=x,this.xy[1]=y):this.xy=[x,y]},Path2D.prototype.deCasteljau=function(points,t){var n=points.length;if(n<2||n%2==1)throw new Error("Fewer than two points or not an even count.");if(2===n||0===t)return points.slice(0,2);if(1===t)return points.slice(-2);for(var newPoints=[],last=n-2,i=0;i<last;i+=2)newPoints.push((1-t)*points[i]+t*points[i+2],(1-t)*points[i+1]+t*points[i+3]);return this.deCasteljau(newPoints,t)},Path2D.prototype.approximateCurve=function(points,n){var xy=this.deCasteljau(points,0);this.moveTo(xy[0],xy[1]);for(var step=1/n,t=step;t<=1;t+=step){var xy_1=this.deCasteljau(points,t);this.lineTo(xy_1[0],xy_1[1])}},Path2D.prototype.quadraticCurveTo=function(cx,cy,x,y){this.xy||this.moveTo(cx,cy),this.cubicCurveTo((this.xy[0]+2*cx)/3,(this.xy[1]+2*cy)/3,(2*cx+x)/3,(2*cy+y)/3,x,y)},Path2D.prototype.cubicCurveTo=function(cx1,cy1,cx2,cy2,x,y){this.xy||this.moveTo(cx1,cy1),this.commands.push("C"),this.params.push(cx1,cy1,cx2,cy2,x,y),this.xy[0]=x,this.xy[1]=y},Object.defineProperty(Path2D.prototype,"closedPath",{get:function(){return this._closedPath},enumerable:!0,configurable:!0}),Path2D.prototype.closePath=function(){this.xy&&(this.xy=void 0,this.commands.push("Z"),this._closedPath=!0)},Path2D.prototype.clear=function(){this.commands.length=0,this.params.length=0,this.xy=void 0,this._closedPath=!1},Path2D.prototype.isPointInPath=function(x,y){for(var commands=this.commands,params=this.params,cn=commands.length,ox=-1e4,oy=-1e4,sx=NaN,sy=NaN,px=0,py=0,intersectionCount=0,ci=0,pi=0;ci<cn;ci++)switch(commands[ci]){case"M":isNaN(sx)||segmentIntersection$1(sx,sy,px,py,ox,oy,x,y)&&intersectionCount++,sx=px=params[pi++],sy=py=params[pi++];break;case"L":segmentIntersection$1(px,py,px=params[pi++],py=params[pi++],ox,oy,x,y)&&intersectionCount++;break;case"C":intersectionCount+=cubicSegmentIntersections$1(px,py,params[pi++],params[pi++],params[pi++],params[pi++],px=params[pi++],py=params[pi++],ox,oy,x,y).length;break;case"Z":isNaN(sx)||segmentIntersection$1(sx,sy,px,py,ox,oy,x,y)&&intersectionCount++}return intersectionCount%2==1},Path2D.fromString=function(value){var path=new Path2D;return path.setFromString(value),path},Path2D.parseSvgPath=function(value){return value.trim().split(Path2D.splitCommandsRe).map((function(part){var strParams=part.match(Path2D.matchParamsRe);return{command:part.substr(0,1),params:strParams?strParams.map(parseFloat):[]}}))},Path2D.prettifySvgPath=function(value){return Path2D.parseSvgPath(value).map((function(d){return d.command+d.params.join(",")})).join("\n")},Path2D.prototype.setFromString=function(value){var x,y,cpx,cpy,lastCommand,_this=this;function checkQuadraticCP(){lastCommand.match(Path2D.quadraticCommandRe)||(cpx=x,cpy=y)}function checkCubicCP(){lastCommand.match(Path2D.cubicCommandRe)||(cpx=x,cpy=y)}this.clear(),Path2D.parseSvgPath(value).forEach((function(part){var p=part.params,n=p.length,i=0;switch(part.command){case"M":for(_this.moveTo(x=p[i++],y=p[i++]);i<n;)_this.lineTo(x=p[i++],y=p[i++]);break;case"m":for(_this.moveTo(x+=p[i++],y+=p[i++]);i<n;)_this.lineTo(x+=p[i++],y+=p[i++]);break;case"L":for(;i<n;)_this.lineTo(x=p[i++],y=p[i++]);break;case"l":for(;i<n;)_this.lineTo(x+=p[i++],y+=p[i++]);break;case"C":for(;i<n;)_this.cubicCurveTo(p[i++],p[i++],cpx=p[i++],cpy=p[i++],x=p[i++],y=p[i++]);break;case"c":for(;i<n;)_this.cubicCurveTo(x+p[i++],y+p[i++],cpx=x+p[i++],cpy=y+p[i++],x+=p[i++],y+=p[i++]);break;case"S":for(checkCubicCP();i<n;)_this.cubicCurveTo(x+x-cpx,y+y-cpy,cpx=p[i++],cpy=p[i++],x=p[i++],y=p[i++]);break;case"s":for(checkCubicCP();i<n;)_this.cubicCurveTo(x+x-cpx,y+y-cpy,cpx=x+p[i++],cpy=y+p[i++],x+=p[i++],y+=p[i++]);break;case"Q":for(;i<n;)_this.quadraticCurveTo(cpx=p[i++],cpy=p[i++],x=p[i++],y=p[i++]);break;case"q":for(;i<n;)_this.quadraticCurveTo(cpx=x+p[i++],cpy=y+p[i++],x+=p[i++],y+=p[i++]);break;case"T":for(checkQuadraticCP();i<n;)_this.quadraticCurveTo(cpx=x+x-cpx,cpy=y+y-cpy,x=p[i++],y=p[i++]);break;case"t":for(checkQuadraticCP();i<n;)_this.quadraticCurveTo(cpx=x+x-cpx,cpy=y+y-cpy,x+=p[i++],y+=p[i++]);break;case"A":for(;i<n;)_this.arcTo(p[i++],p[i++],p[i++]*Math.PI/180,p[i++],p[i++],x=p[i++],y=p[i++]);break;case"a":for(;i<n;)_this.arcTo(p[i++],p[i++],p[i++]*Math.PI/180,p[i++],p[i++],x+=p[i++],y+=p[i++]);break;case"Z":case"z":_this.closePath();break;case"H":for(;i<n;)_this.lineTo(x=p[i++],y);break;case"h":for(;i<n;)_this.lineTo(x+=p[i++],y);break;case"V":for(;i<n;)_this.lineTo(x,y=p[i++]);break;case"v":for(;i<n;)_this.lineTo(x,y+=p[i++])}lastCommand=part.command}))},Path2D.prototype.toString=function(){for(var c=this.commands,p=this.params,cn=c.length,out=[],ci=0,pi=0;ci<cn;ci++)switch(c[ci]){case"M":out.push("M"+p[pi++]+","+p[pi++]);break;case"L":out.push("L"+p[pi++]+","+p[pi++]);break;case"C":out.push("C"+p[pi++]+","+p[pi++]+" "+p[pi++]+","+p[pi++]+" "+p[pi++]+","+p[pi++]);break;case"Z":out.push("Z")}return out.join("")},Path2D.prototype.toPrettyString=function(){return Path2D.prettifySvgPath(this.toString())},Path2D.prototype.toSvg=function(){return Path2D.xmlDeclaration+'\n<svg width="100%" height="100%" viewBox="0 0 50 50" version="1.1" xmlns="'+Path2D.xmlns+'">\n    <path d="'+this.toString()+'" style="fill:none;stroke:#000;stroke-width:0.5;"/>\n</svg>'},Path2D.prototype.toDebugSvg=function(){var d=Path2D.prettifySvgPath(this.toString());return Path2D.xmlDeclaration+'\n<svg width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="'+Path2D.xmlns+'">\n    <path d="'+d+'" style="fill:none;stroke:#000;stroke-width:0.5;"/>\n</svg>'},Path2D.prototype.toCubicPaths=function(){var path,sx,sy,px,py,paths=[],params=this.params,i=0;return this.commands.forEach((function(command){switch(command){case"M":path=[sx=px=params[i++],sy=py=params[i++]],paths.push(path);break;case"L":var x=params[i++],y=params[i++];path.push((px+px+x)/3,(py+py+y)/3,(px+x+x)/3,(py+y+y)/3,px=x,py=y);break;case"C":path.push(params[i++],params[i++],params[i++],params[i++],px=params[i++],py=params[i++]);break;case"Z":path.push((px+px+sx)/3,(py+py+sy)/3,(px+sx+sx)/3,(py+sy+sy)/3,px=sx,py=sy)}})),paths},Path2D.cubicPathToString=function(path){var n=path.length;if(!(n%2==0&&(n/2-1)/2>=1))throw new Error("Invalid path.");return"M"+path.slice(0,2).join(",")+"C"+path.slice(2).join(",")},Path2D.splitCommandsRe=/(?=[AaCcHhLlMmQqSsTtVvZz])/g,Path2D.matchParamsRe=/-?[0-9]*\.?\d+/g,Path2D.quadraticCommandRe=/[QqTt]/,Path2D.cubicCommandRe=/[CcSs]/,Path2D.xmlDeclaration='<?xml version="1.0" encoding="UTF-8"?>',Path2D.xmlns="http://www.w3.org/2000/svg",Path2D}(),__extends$1d=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Path$1=function(_super){function Path(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.path=new Path2D$1,_this._dirtyPath=!0,_this._svgPath="",_this}return __extends$1d(Path,_super),Object.defineProperty(Path.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(value){this._dirtyPath!==value&&(this._dirtyPath=value,value&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(Path.prototype,"svgPath",{get:function(){return this._svgPath},set:function(value){this._svgPath!==value&&(this._svgPath=value,this.path.setFromString(value),this.dirty=!0)},enumerable:!0,configurable:!0}),Path.prototype.isPointInPath=function(x,y){var point=this.transformPoint(x,y);return this.path.closedPath&&this.path.isPointInPath(point.x,point.y)},Path.prototype.isPointInStroke=function(x,y){return!1},Path.prototype.updatePath=function(){},Path.prototype.render=function(ctx){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx),this.dirtyPath&&(this.updatePath(),this.dirtyPath=!1),this.path.draw(ctx),this.fillStroke(ctx),this.dirty=!1},Path.className="Path",Path}(Shape$1),twoPi=2*Math.PI;function normalizeAngle360(radians){return radians%=twoPi,radians+=twoPi,radians%=twoPi}function toRadians(degrees){return degrees/180*Math.PI}function isEqual(a,b,epsilon){return void 0===epsilon&&(epsilon=1e-10),Math.abs(a-b)<epsilon}function toFixed(value,fractionOrSignificantDigits){void 0===fractionOrSignificantDigits&&(fractionOrSignificantDigits=2);var power=Math.floor(Math.log(Math.abs(value))/Math.LN10);return power>=0||!isFinite(power)?value.toFixed(fractionOrSignificantDigits):value.toFixed(Math.abs(power)-1+fractionOrSignificantDigits)}var ArcType,__extends$1e=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(ArcType){ArcType[ArcType.Open=0]="Open",ArcType[ArcType.Chord=1]="Chord",ArcType[ArcType.Round=2]="Round"}(ArcType||(ArcType={}));var Arc=function(_super){function Arc(){var _this=_super.call(this)||this;return _this._centerX=0,_this._centerY=0,_this._radiusX=10,_this._radiusY=10,_this._startAngle=0,_this._endAngle=2*Math.PI,_this._counterClockwise=!1,_this._type=ArcType.Open,_this.restoreOwnStyles(),_this}return __extends$1e(Arc,_super),Object.defineProperty(Arc.prototype,"centerX",{get:function(){return this._centerX},set:function(value){this._centerX!==value&&(this._centerX=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Arc.prototype,"centerY",{get:function(){return this._centerY},set:function(value){this._centerY!==value&&(this._centerY=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Arc.prototype,"radiusX",{get:function(){return this._radiusX},set:function(value){this._radiusX!==value&&(this._radiusX=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Arc.prototype,"radiusY",{get:function(){return this._radiusY},set:function(value){this._radiusY!==value&&(this._radiusY=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Arc.prototype,"startAngle",{get:function(){return this._startAngle},set:function(value){this._startAngle!==value&&(this._startAngle=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Arc.prototype,"endAngle",{get:function(){return this._endAngle},set:function(value){this._endAngle!==value&&(this._endAngle=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Arc.prototype,"fullPie",{get:function(){return isEqual(normalizeAngle360(this.startAngle),normalizeAngle360(this.endAngle))},enumerable:!0,configurable:!0}),Object.defineProperty(Arc.prototype,"counterClockwise",{get:function(){return this._counterClockwise},set:function(value){this._counterClockwise!==value&&(this._counterClockwise=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Arc.prototype,"type",{get:function(){return this._type},set:function(value){this._type!==value&&(this._type=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Arc.prototype.updatePath=function(){var path=this.path;path.clear(),path.cubicArc(this.centerX,this.centerY,this.radiusX,this.radiusY,0,this.startAngle,this.endAngle,this.counterClockwise?1:0),this.type===ArcType.Chord?path.closePath():this.type!==ArcType.Round||this.fullPie||(path.lineTo(this.centerX,this.centerY),path.closePath())},Arc.prototype.computeBBox=function(){return new BBox$1(this.centerX-this.radiusX,this.centerY-this.radiusY,2*this.radiusX,2*this.radiusY)},Arc.prototype.isPointInPath=function(x,y){var point=this.transformPoint(x,y),bbox=this.computeBBox();return this.type!==ArcType.Open&&bbox.containsPoint(point.x,point.y)&&this.path.isPointInPath(point.x,point.y)},Arc.className="Arc",Arc.defaultStyles=chainObjects$1(Shape$1.defaultStyles,{lineWidth:1,fillStyle:null}),Arc}(Path$1),doOnceFlags$1={};function doOnce$1(func,key){doOnceFlags$1[key]||(func(),doOnceFlags$1[key]=!0)}var Tags,__read$n=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__values$5=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(Tags){Tags[Tags.Tick=0]="Tick",Tags[Tags.GridLine=1]="GridLine"}(Tags||(Tags={}));var ChartAxisDirection,ChartAxisPosition,AxisTick=function AxisTick(){this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0},AxisLabel=function(){function AxisLabel(){this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.onFormatChange=void 0}return Object.defineProperty(AxisLabel.prototype,"format",{get:function(){return this._format},set:function(value){this._format!==value&&(this._format=value,this.onFormatChange&&this.onFormatChange(value))},enumerable:!0,configurable:!0}),AxisLabel}(),Axis=function(){function Axis(scale){this.id=createId$1(this),this.lineNode=new Line$1,this.group=new Group$1,this.line={width:1,color:"rgba(195, 195, 195, 1)"},this.tick=new AxisTick,this.label=new AxisLabel,this.translation={x:0,y:0},this.rotation=0,this._labelAutoRotated=!1,this._calculatedTickCount=void 0,this.requestedRange=[0,1],this._visibleRange=[0,1],this._title=void 0,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this._radialGrid=!1,this.fractionDigits=0,this.thickness=0,this.scale=scale,this.groupSelection=Selection$1.select(this.group).selectAll(),this.label.onFormatChange=this.onLabelFormatChange.bind(this),this.group.append(this.lineNode)}return Object.defineProperty(Axis.prototype,"scale",{get:function(){return this._scale},set:function(value){this._scale=value,this.requestedRange=value.range.slice(),this.onLabelFormatChange()},enumerable:!0,configurable:!0}),Object.defineProperty(Axis.prototype,"ticks",{get:function(){return this._ticks},set:function(values){this._ticks=values},enumerable:!0,configurable:!0}),Object.defineProperty(Axis.prototype,"labelAutoRotated",{get:function(){return this._labelAutoRotated},enumerable:!0,configurable:!0}),Object.defineProperty(Axis.prototype,"calculatedTickCount",{get:function(){var _a;return null!=(_a=this._calculatedTickCount)?_a:this.tick.count},enumerable:!0,configurable:!0}),Axis.prototype.calculateTickCount=function(availableRange){},Axis.prototype.getMeta=function(){},Axis.prototype.updateRange=function(){var rr=this.requestedRange,vr=this.visibleRange,scale=this.scale,span=(rr[1]-rr[0])/(vr[1]-vr[0]),shift=span*vr[0],start=rr[0]-shift;scale.range=[start,start+span]},Axis.prototype.inRange=function(x,width,tolerance){return void 0===width&&(width=0),void 0===tolerance&&(tolerance=0),0===this.inRangeEx(x,width,tolerance)},Axis.prototype.inRangeEx=function(x,width,tolerance){void 0===width&&(width=0),void 0===tolerance&&(tolerance=0);var range=this.range,min=Math.min(range[0],range[1]),max=Math.max(range[0],range[1]);return x+width<min-tolerance?-1:x>max+tolerance?1:0},Object.defineProperty(Axis.prototype,"range",{get:function(){return this.requestedRange.slice()},set:function(value){this.requestedRange=value.slice(),this.updateRange()},enumerable:!0,configurable:!0}),Object.defineProperty(Axis.prototype,"visibleRange",{get:function(){return this._visibleRange.slice()},set:function(value){if(value&&2===value.length){var _a=__read$n(value,2),min=_a[0],max=_a[1];min=Math.max(0,min),max=Math.min(1,max),min=Math.min(min,max),max=Math.max(min,max),this._visibleRange=[min,max],this.updateRange()}},enumerable:!0,configurable:!0}),Object.defineProperty(Axis.prototype,"domain",{get:function(){return this.scale.domain.slice()},set:function(value){this.scale.domain=value.slice(),this.onLabelFormatChange(this.label.format)},enumerable:!0,configurable:!0}),Axis.prototype.onLabelFormatChange=function(format){if(format&&this.scale&&this.scale.tickFormat)try{this.labelFormatter=this.scale.tickFormat(this.calculatedTickCount,format)}catch(e){this.labelFormatter=void 0,doOnce$1((function(){return console.warn("AG Charts - the axis label format string "+format+" is invalid. No formatting will be applied")}),"invalid axis label format string "+format)}else this.labelFormatter=void 0},Object.defineProperty(Axis.prototype,"title",{get:function(){return this._title},set:function(value){var oldTitle=this._title;oldTitle!==value&&(oldTitle&&this.group.removeChild(oldTitle.node),value&&(value.node.rotation=-Math.PI/2,this.group.appendChild(value.node)),this._title=value,this.positionTitle())},enumerable:!0,configurable:!0}),Object.defineProperty(Axis.prototype,"gridLength",{get:function(){return this._gridLength},set:function(value){(this._gridLength&&!value||!this._gridLength&&value)&&(this.groupSelection=this.groupSelection.remove().setData([])),this._gridLength=value},enumerable:!0,configurable:!0}),Object.defineProperty(Axis.prototype,"radialGrid",{get:function(){return this._radialGrid},set:function(value){this._radialGrid!==value&&(this._radialGrid=value,this.groupSelection=this.groupSelection.remove().setData([]))},enumerable:!0,configurable:!0}),Axis.prototype.update=function(){var _this=this,_a=this,group=_a.group,scale=_a.scale,tick=_a.tick,label=_a.label,gridStyle=_a.gridStyle,requestedRange=_a.requestedRange,requestedRangeMin=Math.min(requestedRange[0],requestedRange[1]),requestedRangeMax=Math.max(requestedRange[0],requestedRange[1]),rotation=toRadians(this.rotation),labelRotation=label.rotation?normalizeAngle360(toRadians(label.rotation)):0,parallelLabels=label.parallel,labelAutoRotation=0;group.translationX=this.translation.x,group.translationY=this.translation.y,group.rotation=rotation;var halfBandwidth=(scale.bandwidth||0)/2,sideFlag=label.mirrored?1:-1,parallelFlipRotation=normalizeAngle360(rotation),parallelFlipFlag=!labelRotation&&parallelFlipRotation>=0&&parallelFlipRotation<=Math.PI?-1:1,regularFlipRotation=normalizeAngle360(rotation-Math.PI/2),regularFlipFlag=!labelRotation&&regularFlipRotation>=0&&regularFlipRotation<=Math.PI?-1:1,ticks=this.ticks||scale.ticks(this.calculatedTickCount),update=this.groupSelection.setData(ticks);update.exit.remove();var enter=update.enter.append(Group$1);enter.append(Line$1).each((function(node){return node.tag=Tags.Tick})),this.gridLength&&(this.radialGrid?enter.append(Arc).each((function(node){return node.tag=Tags.GridLine})):enter.append(Line$1).each((function(node){return node.tag=Tags.GridLine}))),enter.append(Text$2);var groupSelection=update.merge(enter),anyVisible=!1;if(groupSelection.attrFn("translationY",(function(_,datum){return Math.round(scale.convert(datum)+halfBandwidth)})).attrFn("visible",(function(node){var min=Math.floor(requestedRangeMin),max=Math.ceil(requestedRangeMax),visible=min!==max&&node.translationY>=min&&node.translationY<=max;return anyVisible=visible||anyVisible,visible})),this.group.visible=anyVisible,anyVisible){this.fractionDigits=ticks.fractionDigits>=0?ticks.fractionDigits:0;var labelBboxes=new Map,labelCount=0,halfFirstLabelLength=!1,halfLastLabelLength=!1,availableRange=requestedRangeMax-requestedRangeMin,labelSelection=groupSelection.selectByClass(Text$2).each((function(node,datum,index){node.fontStyle=label.fontStyle,node.fontWeight=label.fontWeight,node.fontSize=label.fontSize,node.fontFamily=label.fontFamily,node.fill=label.color,node.text=_this.formatTickDatum(datum,index),node.visible=node.parent.visible,!0===node.visible&&(labelBboxes.set(index,node.computeBBox()),""!==node.text&&null!=node.text&&(labelCount++,0===index&&node.translationY===scale.range[0]?halfFirstLabelLength=!0:index===ticks.length-1&&node.translationY===scale.range[1]&&(halfLastLabelLength=!0)))})),labelX=sideFlag*(tick.size+label.padding),step=availableRange/labelCount,calculateLabelsLength=function(bboxes,useWidth){var e_1,_a,totalLength=0,rotate=!1,lastIdx=bboxes.size-1;try{for(var _b=__values$5(bboxes.entries()),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read$n(_c.value,2),i=_d[0],bbox=_d[1],divideBy=0===i&&halfFirstLabelLength||i===lastIdx&&halfLastLabelLength?2:1,length_1=useWidth?bbox.width/divideBy:bbox.height/divideBy,lengthWithPadding=length_1<=0?0:length_1+12;totalLength+=lengthWithPadding,lengthWithPadding>step&&(rotate=!0)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return{totalLength,rotate}},useWidth=parallelLabels,_b=calculateLabelsLength(labelBboxes,useWidth),totalLabelLength=_b.totalLength,rotate=_b.rotate;this._labelAutoRotated=!1,void 0===label.rotation&&!0===label.autoRotate&&rotate&&(labelAutoRotation=normalizeAngle360(toRadians(label.autoRotateAngle)),this._labelAutoRotated=!0),(labelRotation||labelAutoRotation)&&(useWidth=parallelLabels?labelRotation===Math.PI||labelAutoRotation===Math.PI:labelRotation===Math.PI/2||labelRotation===Math.PI+Math.PI/2||labelAutoRotation===Math.PI/2||labelAutoRotation===Math.PI+Math.PI/2,totalLabelLength=calculateLabelsLength(labelBboxes,useWidth).totalLength);var autoRotation=parallelLabels?parallelFlipFlag*Math.PI/2:-1===regularFlipFlag?Math.PI:0,labelTextBaseline=parallelLabels&&!labelRotation?sideFlag*parallelFlipFlag==-1?"hanging":"bottom":"middle",alignFlag=labelRotation>0&&labelRotation<=Math.PI||labelAutoRotation>0&&labelAutoRotation<=Math.PI?-1:1,labelTextAlign=parallelLabels?labelRotation||labelAutoRotation?sideFlag*alignFlag==-1?"end":"start":"center":sideFlag*regularFlipFlag==-1?"end":"start";if(labelSelection.each((function(label){""!==label.text&&null!=label.text?(label.textBaseline=labelTextBaseline,label.textAlign=labelTextAlign,label.x=labelX,label.rotationCenterX=labelX,label.rotation=autoRotation+labelRotation+labelAutoRotation):label.visible=!1})),totalLabelLength>availableRange){var isContinuous_1=scale instanceof ContinuousScale$1,averageLabelLength=totalLabelLength/labelCount,labelsToShow=Math.floor(availableRange/averageLabelLength),showEvery_1=labelsToShow>2?Math.ceil(labelCount/labelsToShow):labelCount,visibleLabelIndex_1=0;labelSelection.each((function(label,_,index){if(!0===label.visible){var forceVisible=!(!isContinuous_1||void 0!==_this.tick.count)&&(0===index||index===labelCount-1);label.visible=!(!forceVisible&&visibleLabelIndex_1%showEvery_1!=0),visibleLabelIndex_1++,label.visible||labelBboxes.delete(index)}}))}if(groupSelection.selectByTag(Tags.Tick).each((function(line,_,index){line.strokeWidth=tick.width,line.stroke=tick.color,line.visible=labelBboxes.has(index)})).attr("x1",sideFlag*tick.size).attr("x2",0).attr("y1",0).attr("y2",0),this.gridLength&&gridStyle.length){var styleCount_1=gridStyle.length,gridLines=void 0;if(this.radialGrid){var angularGridLength_1=function normalizeAngle360Inclusive(radians){return radians%=twoPi,(radians+=twoPi)!==twoPi&&(radians%=twoPi),radians}(toRadians(this.gridLength));gridLines=groupSelection.selectByTag(Tags.GridLine).each((function(arc,datum,index){var radius=Math.round(scale.convert(datum)+halfBandwidth);arc.centerX=0,arc.centerY=scale.range[0]-radius,arc.endAngle=angularGridLength_1,arc.radiusX=radius,arc.radiusY=radius,arc.visible=labelBboxes.has(index)}))}else gridLines=groupSelection.selectByTag(Tags.GridLine).each((function(line,_,index){line.x1=0,line.x2=-sideFlag*_this.gridLength,line.y1=0,line.y2=0,line.visible=Math.abs(line.parent.translationY-scale.range[0])>1&&labelBboxes.has(index)}));gridLines.each((function(gridLine,_,index){var style=gridStyle[index%styleCount_1];gridLine.stroke=style.stroke,gridLine.strokeWidth=tick.width,gridLine.lineDash=style.lineDash,gridLine.fill=void 0}))}this.groupSelection=groupSelection;var lineNode=this.lineNode;lineNode.x1=0,lineNode.x2=0,lineNode.y1=requestedRange[0],lineNode.y2=requestedRange[1],lineNode.strokeWidth=this.line.width,lineNode.stroke=this.line.color,lineNode.visible=ticks.length>0,this.positionTitle()}else this.groupSelection=groupSelection},Axis.prototype.positionTitle=function(){var title=this.title,lineNode=this.lineNode;if(title){var titleVisible=!1;if(title.enabled&&lineNode.visible){titleVisible=!0;var label=this.label,rotation=this.rotation,requestedRange=this.requestedRange,sideFlag=label.mirrored?1:-1,parallelFlipRotation=normalizeAngle360(rotation),padding=title.padding.bottom,titleNode=title.node,bbox=this.computeBBox({excludeTitle:!0}),titleRotationFlag=-1===sideFlag&&parallelFlipRotation>Math.PI&&parallelFlipRotation<2*Math.PI?-1:1;titleNode.rotation=titleRotationFlag*sideFlag*Math.PI/2,titleNode.x=titleRotationFlag*sideFlag*(requestedRange[0]+requestedRange[1])/2,titleNode.y=-1===sideFlag?titleRotationFlag*(-padding-bbox.width+Math.max(bbox.x+bbox.width,0)):-padding-bbox.width-Math.min(bbox.x,0),titleNode.textBaseline=1===titleRotationFlag?"bottom":"top"}title.node.visible=titleVisible}},Axis.prototype.formatTickDatum=function(datum,index){var label=this.label,labelFormatter=this.labelFormatter,fractionDigits=this.fractionDigits,meta=this.getMeta();return label.formatter?label.formatter({value:fractionDigits>=0?datum:String(datum),index,fractionDigits,formatter:labelFormatter,axis:meta}):labelFormatter?labelFormatter(datum):"number"==typeof datum&&fractionDigits>=0?datum.toFixed(fractionDigits):String(datum)},Axis.prototype.formatDatum=function(datum){return String(datum)},Axis.prototype.computeBBox=function(options){var title=this.title,lineNode=this.lineNode,labels=this.groupSelection.selectByClass(Text$2),left=1/0,right=-1/0,top=1/0,bottom=-1/0;if(labels.each((function(label){label.computeTransformMatrix();var matrix=Matrix$1.flyweight(label.matrix),group=label.parent;group.computeTransformMatrix(),matrix.preMultiplySelf(group.matrix);var labelBBox=label.computeBBox();if(labelBBox){var bbox=matrix.transformBBox(labelBBox);left=Math.min(left,bbox.x),right=Math.max(right,bbox.x+bbox.width),top=Math.min(top,bbox.y),bottom=Math.max(bottom,bbox.y+bbox.height)}})),title&&title.enabled&&lineNode.visible&&(!options||!options.excludeTitle)){var label=title.node;label.computeTransformMatrix();var matrix=Matrix$1.flyweight(label.matrix),labelBBox=label.computeBBox();if(labelBBox){var bbox=matrix.transformBBox(labelBBox);left=Math.min(left,bbox.x),right=Math.max(right,bbox.x+bbox.width),top=Math.min(top,bbox.y),bottom=Math.max(bottom,bbox.y+bbox.height)}}return left=Math.min(left,0),right=Math.max(right,0),top=Math.min(top,lineNode.y1,lineNode.y2),bottom=Math.max(bottom,lineNode.y1,lineNode.y2),new BBox$1(left,top,right-left,bottom-top)},Axis}(),__extends$1f=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();function flipChartAxisDirection(direction){return direction===ChartAxisDirection.X?ChartAxisDirection.Y:ChartAxisDirection.X}!function(ChartAxisDirection){ChartAxisDirection.X="x",ChartAxisDirection.Y="y"}(ChartAxisDirection||(ChartAxisDirection={})),function(ChartAxisPosition){ChartAxisPosition.Top="top",ChartAxisPosition.Right="right",ChartAxisPosition.Bottom="bottom",ChartAxisPosition.Left="left",ChartAxisPosition.Angle="angle",ChartAxisPosition.Radius="radius"}(ChartAxisPosition||(ChartAxisPosition={}));var ChartAxis=function(_super){function ChartAxis(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.keys=[],_this.direction=ChartAxisDirection.Y,_this.boundSeries=[],_this._position=ChartAxisPosition.Left,_this}return __extends$1f(ChartAxis,_super),Object.defineProperty(ChartAxis.prototype,"type",{get:function(){return this.constructor.type||""},enumerable:!0,configurable:!0}),ChartAxis.prototype.getMeta=function(){return{id:this.id,direction:this.direction,boundSeries:this.boundSeries}},ChartAxis.prototype.useCalculatedTickCount=function(){return this.scale instanceof LinearScale$1},ChartAxis.prototype.calculateTickCount=function(availableRange){if(this.useCalculatedTickCount()){var tickInterval=70*Math.pow(Math.log(availableRange)/Math.log(600),2);this._calculatedTickCount=this.tick.count||Math.max(2,Math.floor(availableRange/tickInterval))}},Object.defineProperty(ChartAxis.prototype,"position",{get:function(){return this._position},set:function(value){if(this._position!==value)switch(this._position=value,value){case ChartAxisPosition.Top:this.direction=ChartAxisDirection.X,this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case ChartAxisPosition.Right:this.direction=ChartAxisDirection.Y,this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case ChartAxisPosition.Bottom:this.direction=ChartAxisDirection.X,this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case ChartAxisPosition.Left:this.direction=ChartAxisDirection.Y,this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}},enumerable:!0,configurable:!0}),ChartAxis}(Axis),__extends$1g=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$o=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};function clamper$2(domain){var _a,a=domain[0],b=domain[domain.length-1];return a>b&&(_a=__read$o([b,a],2),a=_a[0],b=_a[1]),function(x){return x>=a&&x<=b?x:NaN}}var NumberAxis=function(_super){function NumberAxis(){var _this=_super.call(this,new LinearScale$1)||this;return _this._nice=!0,_this._min=NaN,_this._max=NaN,_this.scale.clamper=clamper$2,_this}return __extends$1g(NumberAxis,_super),Object.defineProperty(NumberAxis.prototype,"nice",{get:function(){return this._nice},set:function(value){this._nice!==value&&(this._nice=value,value&&this.scale.nice&&this.scale.nice("number"==typeof this.calculatedTickCount?this.calculatedTickCount:void 0))},enumerable:!0,configurable:!0}),NumberAxis.prototype.setDomain=function(domain,primaryTickCount){var scale=this.scale,min=this.min,max=this.max;if(domain.length>2&&(domain=extent$1(domain,isContinuous$1,Number)||[0,1]),domain=[isNaN(min)?domain[0]:min,isNaN(max)?domain[1]:max],primaryTickCount){var _b=__read$o(calculateNiceSecondaryAxis(domain,primaryTickCount),2),d=_b[0],ticks=_b[1];return scale.domain=d,void(this.ticks=ticks)}scale.domain=domain,this.onLabelFormatChange(this.label.format),this.scale.clamp=!0,this.nice&&this.scale.nice&&this.scale.nice("number"==typeof this.calculatedTickCount?this.calculatedTickCount:void 0)},Object.defineProperty(NumberAxis.prototype,"domain",{get:function(){return this.scale.domain},set:function(domain){this.setDomain(domain)},enumerable:!0,configurable:!0}),Object.defineProperty(NumberAxis.prototype,"min",{get:function(){return this._min},set:function(value){this._min!==value&&(this._min=value,isNaN(value)||(this.scale.domain=[value,this.scale.domain[1]]))},enumerable:!0,configurable:!0}),Object.defineProperty(NumberAxis.prototype,"max",{get:function(){return this._max},set:function(value){this._max!==value&&(this._max=value,isNaN(value)||(this.scale.domain=[this.scale.domain[0],value]))},enumerable:!0,configurable:!0}),NumberAxis.prototype.formatDatum=function(datum){return"number"==typeof datum?datum.toFixed(2):(doOnce$1((function(){return console.warn("AG Charts - Data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers.")}),"number axis config used with Date objects"),String(datum))},NumberAxis.className="NumberAxis",NumberAxis.type="number",NumberAxis}(ChartAxis),__read$p=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},BandScale$1=function(){function BandScale(){this.type="band",this.index=new Map,this.ordinalRange=[],this._domain=[],this._range=[0,1],this._bandwidth=1,this._paddingInner=0,this._paddingOuter=0,this._round=!1,this._align=.5}return Object.defineProperty(BandScale.prototype,"domain",{get:function(){return this._domain},set:function(values){var domain=this._domain;domain.length=0,this.index=new Map;var index=this.index;values.forEach((function(value){void 0===index.get(value)&&index.set(value,domain.push(value)-1)})),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(BandScale.prototype,"range",{get:function(){return this._range},set:function(values){this._range[0]=values[0],this._range[1]=values[1],this.rescale()},enumerable:!0,configurable:!0}),BandScale.prototype.ticks=function(){return this._domain},BandScale.prototype.convert=function(d){var i=this.index.get(d);if(void 0===i)return NaN;var r=this.ordinalRange[i];return void 0===r?NaN:r},Object.defineProperty(BandScale.prototype,"bandwidth",{get:function(){return this._bandwidth},enumerable:!0,configurable:!0}),Object.defineProperty(BandScale.prototype,"padding",{get:function(){return this._paddingInner},set:function(value){value=Math.max(0,Math.min(1,value)),this._paddingInner=value,this._paddingOuter=value,this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(BandScale.prototype,"paddingInner",{get:function(){return this._paddingInner},set:function(value){this._paddingInner=Math.max(0,Math.min(1,value)),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(BandScale.prototype,"paddingOuter",{get:function(){return this._paddingOuter},set:function(value){this._paddingOuter=Math.max(0,Math.min(1,value)),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(BandScale.prototype,"round",{get:function(){return this._round},set:function(value){this._round=value,this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(BandScale.prototype,"align",{get:function(){return this._align},set:function(value){this._align=Math.max(0,Math.min(1,value)),this.rescale()},enumerable:!0,configurable:!0}),BandScale.prototype.rescale=function(){var _a,n=this._domain.length;if(n){var _b=__read$p(this._range,2),a=_b[0],b=_b[1],reversed=b<a;reversed&&(a=(_a=__read$p([b,a],2))[0],b=_a[1]);var step=(b-a)/Math.max(1,n-this._paddingInner+2*this._paddingOuter);this._round&&(step=Math.floor(step)),a+=(b-a-step*(n-this._paddingInner))*this._align,this._bandwidth=step*(1-this._paddingInner),this._round&&(a=Math.round(a),this._bandwidth=Math.round(this._bandwidth));for(var values=[],i=0;i<n;i++)values.push(a+step*i);this.ordinalRange=reversed?values.reverse():values}},BandScale}(),__extends$1h=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CategoryAxis=function(_super){function CategoryAxis(){var _this=_super.call(this,new BandScale$1)||this;return _this.scale.paddingInner=.2,_this.scale.paddingOuter=.3,_this}return __extends$1h(CategoryAxis,_super),Object.defineProperty(CategoryAxis.prototype,"paddingInner",{get:function(){return this.scale.paddingInner},set:function(value){this.scale.paddingInner=value},enumerable:!0,configurable:!0}),Object.defineProperty(CategoryAxis.prototype,"paddingOuter",{get:function(){return this.scale.paddingOuter},set:function(value){this.scale.paddingOuter=value},enumerable:!0,configurable:!0}),Object.defineProperty(CategoryAxis.prototype,"domain",{get:function(){return this.scale.domain.slice()},set:function(values){this.scale.domain=values.filter((function(s,i,arr){return arr.indexOf(s)===i}))},enumerable:!0,configurable:!0}),CategoryAxis.className="CategoryAxis",CategoryAxis.type="category",CategoryAxis}(ChartAxis),TreeNode=function(){function TreeNode(label,parent,number){void 0===label&&(label=""),void 0===number&&(number=0),this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=label,this.parent=parent,this.depth=parent?parent.depth+1:0,this.number=number}return TreeNode.prototype.getLeftSibling=function(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0},TreeNode.prototype.getLeftmostSibling=function(){return this.number>0&&this.parent?this.parent.children[0]:void 0},TreeNode.prototype.nextLeft=function(){return this.children?this.children[0]:this.thread},TreeNode.prototype.nextRight=function(){return this.children?this.children[this.children.length-1]:this.thread},TreeNode.prototype.getSiblings=function(){var _this=this;return this.parent?this.parent.children.filter((function(_,i){return i!==_this.number})):[]},TreeNode}();function ticksToTree(ticks,pad){void 0===pad&&(pad=!0);var root=new TreeNode,depth=0;return pad&&ticks.forEach((function(tick){return depth=Math.max(depth,tick.labels.length)})),ticks.forEach((function(tick){if(pad)for(;tick.labels.length<depth;)tick.labels.unshift("");!function insertTick(root,tick){var pathParts=tick.labels.slice().reverse(),lastPartIndex=pathParts.length-1;pathParts.forEach((function(pathPart,partIndex){var children=root.children,existingNode=find(children,(function(child){return child.label===pathPart})),isNotLeaf=partIndex!==lastPartIndex;if(existingNode&&isNotLeaf)root=existingNode;else{var node=new TreeNode(pathPart,root);node.number=children.length,children.push(node),isNotLeaf&&(root=node)}}))}(root,tick)})),root}function moveSubtree(wm,wp,shift){var ratio=shift/(wp.number-wm.number);wp.change-=ratio,wp.shift+=shift,wm.change+=ratio,wp.prelim+=shift,wp.mod+=shift}function ancestor(vim,v,defaultAncestor){return v.getSiblings().indexOf(vim.ancestor)>=0?vim.ancestor:defaultAncestor}function firstWalk(node,distance){var children=node.children;if(children.length){var defaultAncestor_1=children[0];children.forEach((function(child){firstWalk(child,distance),defaultAncestor_1=function apportion(v,defaultAncestor,distance){var w=v.getLeftSibling();if(w){for(var vop=v,vip=v,vim=w,vom=vip.getLeftmostSibling(),sip=vip.mod,sop=vop.mod,sim=vim.mod,som=vom.mod;vim.nextRight()&&vip.nextLeft();){vim=vim.nextRight(),vip=vip.nextLeft(),vom=vom.nextLeft(),(vop=vop.nextRight()).ancestor=v;var shift=vim.prelim+sim-(vip.prelim+sip)+distance;shift>0&&(moveSubtree(ancestor(vim,v,defaultAncestor),v,shift),sip+=shift,sop+=shift),sim+=vim.mod,sip+=vip.mod,som+=vom.mod,sop+=vop.mod}vim.nextRight()&&!vop.nextRight()?(vop.thread=vim.nextRight(),vop.mod+=sim-sop):(vip.nextLeft()&&!vom.nextLeft()&&(vom.thread=vip.nextLeft(),vom.mod+=sip-som),defaultAncestor=v)}return defaultAncestor}(child,defaultAncestor_1,distance)})),function executeShifts(v){var children=v.children;if(children)for(var shift=0,change=0,i=children.length-1;i>=0;i--){var w=children[i];w.prelim+=shift,w.mod+=shift,change+=w.change,shift+=w.shift+change}}(node);var midpoint=(children[0].prelim+children[children.length-1].prelim)/2;(leftSibling=node.getLeftSibling())?(node.prelim=leftSibling.prelim+distance,node.mod=node.prelim-midpoint):node.prelim=midpoint}else{var leftSibling=node.getLeftSibling();node.prelim=leftSibling?leftSibling.prelim+distance:0}}var Dimensions=function(){function Dimensions(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}return Dimensions.prototype.update=function(node,xy){var _a=xy(node),x=_a.x,y=_a.y;x>this.right&&(this.right=x),x<this.left&&(this.left=x),y>this.bottom&&(this.bottom=y),y<this.top&&(this.top=y)},Dimensions}();function secondWalk(v,m,layout){v.x=v.prelim+m,v.y=v.depth,layout.update(v),v.children.forEach((function(w){return secondWalk(w,m+v.mod,layout)}))}function thirdWalk(v){var children=v.children,leafCount=0;children.forEach((function(w){thirdWalk(w),w.children.length?leafCount+=w.leafCount:leafCount++})),v.leafCount=leafCount,children.length?(v.subtreeLeft=children[0].subtreeLeft,v.subtreeRight=children[v.children.length-1].subtreeRight,v.x=(v.subtreeLeft+v.subtreeRight)/2):(v.subtreeLeft=v.x,v.subtreeRight=v.x)}function treeLayout(root){var layout=new TreeLayout;return firstWalk(root,1),secondWalk(root,-root.prelim,layout),thirdWalk(root),layout}var TreeLayout=function(){function TreeLayout(){this.dimensions=new Dimensions,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}return TreeLayout.prototype.update=function(node){this.dimensions.update(node,(function(node){return{x:node.x,y:node.y}})),node.children.length?this.nonLeafNodes.push(node):(this.leafCount++,this.leafNodes.push(node)),node.depth>this.depth&&(this.depth=node.depth),this.nodes.push(node)},TreeLayout.prototype.resize=function(width,height,shiftX,shiftY,flipX){void 0===shiftX&&(shiftX=0),void 0===shiftY&&(shiftY=0),void 0===flipX&&(flipX=!1);var xSteps=this.leafCount-1,ySteps=this.depth,dimensions=this.dimensions,scalingX=1,scalingY=1;if(width>0&&xSteps){var existingSpacingX=(dimensions.right-dimensions.left)/xSteps;scalingX=width/xSteps/existingSpacingX,flipX&&(scalingX=-scalingX)}if(height>0&&ySteps){var existingSpacingY=(dimensions.bottom-dimensions.top)/ySteps;scalingY=height/ySteps/existingSpacingY}var screenDimensions=new Dimensions;this.nodes.forEach((function(node){node.screenX=node.x*scalingX,node.screenY=node.y*scalingY,screenDimensions.update(node,(function(node){return{x:node.screenX,y:node.screenY}}))}));var offsetX=-screenDimensions.left,offsetY=-screenDimensions.top;this.nodes.forEach((function(node){node.screenX+=offsetX+shiftX,node.screenY+=offsetY+shiftY}))},TreeLayout}(),__extends$1i=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),GroupedCategoryAxisLabel=function(_super){function GroupedCategoryAxisLabel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.grid=!1,_this}return __extends$1i(GroupedCategoryAxisLabel,_super),GroupedCategoryAxisLabel}(AxisLabel),GroupedCategoryAxis=function(_super){function GroupedCategoryAxis(){var _this=_super.call(this,new BandScale$1)||this;_this.tickScale=new BandScale$1,_this.longestSeparatorLength=0,_this.translation={x:0,y:0},_this.rotation=0,_this.line={width:1,color:"rgba(195, 195, 195, 1)"},_this.label=new GroupedCategoryAxisLabel,_this.labelColor="rgba(87, 87, 87, 1)";var _a=_this,group=_a.group,tickScale=_a.tickScale,scale=_a.scale;return scale.paddingOuter=.1,scale.paddingInner=2*scale.paddingOuter,_this.requestedRange=scale.range.slice(),_this.scale=scale,tickScale.paddingInner=1,tickScale.paddingOuter=0,_this.gridLineSelection=Selection$1.select(group).selectAll(),_this.axisLineSelection=Selection$1.select(group).selectAll(),_this.separatorSelection=Selection$1.select(group).selectAll(),_this.labelSelection=Selection$1.select(group).selectAll(),_this}return __extends$1i(GroupedCategoryAxis,_super),Object.defineProperty(GroupedCategoryAxis.prototype,"domain",{get:function(){return this.scale.domain},set:function(domainValues){var values=domainValues.filter((function(s,i,arr){return arr.indexOf(s)===i}));this.scale.domain=values;var tickTree=ticksToTree(values);this.tickTreeLayout=treeLayout(tickTree);var domain=values.slice();domain.push(""),this.tickScale.domain=domain,this.resizeTickTree()},enumerable:!0,configurable:!0}),Object.defineProperty(GroupedCategoryAxis.prototype,"range",{get:function(){return this.requestedRange.slice()},set:function(value){this.requestedRange=value.slice(),this.updateRange()},enumerable:!0,configurable:!0}),GroupedCategoryAxis.prototype.updateRange=function(){var rr=this.requestedRange,vr=this.visibleRange,scale=this.scale,span=(rr[1]-rr[0])/(vr[1]-vr[0]),shift=span*vr[0],start=rr[0]-shift;this.tickScale.range=scale.range=[start,start+span],this.resizeTickTree()},GroupedCategoryAxis.prototype.resizeTickTree=function(){var s=this.scale,range=s.domain.length?[s.convert(s.domain[0]),s.convert(s.domain[s.domain.length-1])]:s.range,layout=this.tickTreeLayout,lineHeight=this.lineHeight;layout&&layout.resize(Math.abs(range[1]-range[0]),layout.depth*lineHeight,(Math.min(range[0],range[1])||0)+(s.bandwidth||0)/2,-layout.depth*lineHeight,range[1]-range[0]<0)},Object.defineProperty(GroupedCategoryAxis.prototype,"lineHeight",{get:function(){return 1.5*this.label.fontSize},enumerable:!0,configurable:!0}),Object.defineProperty(GroupedCategoryAxis.prototype,"gridLength",{get:function(){return this._gridLength},set:function(value){(this._gridLength&&!value||!this._gridLength&&value)&&(this.gridLineSelection=this.gridLineSelection.remove().setData([]),this.labelSelection=this.labelSelection.remove().setData([])),this._gridLength=value},enumerable:!0,configurable:!0}),GroupedCategoryAxis.prototype.update=function(){var _this=this,_a=this,group=_a.group,scale=_a.scale,label=_a.label,tickScale=_a.tickScale,requestedRange=_a.requestedRange,rangeStart=scale.range[0],rangeEnd=scale.range[1],bandwidth=Math.abs(rangeEnd-rangeStart)/scale.domain.length||0,parallelLabels=label.parallel,rotation=toRadians(this.rotation),isHorizontal=Math.abs(Math.cos(rotation))<1e-8,labelRotation=this.label.rotation?normalizeAngle360(toRadians(this.label.rotation)):0;group.translationX=this.translation.x,group.translationY=this.translation.y,group.rotation=rotation;var title=this.title;title&&(title.node.visible=!1);var lineHeight=this.lineHeight,tickTreeLayout=this.tickTreeLayout,labels=scale.ticks(),treeLabels=tickTreeLayout?tickTreeLayout.nodes:[],isLabelTree=!!tickTreeLayout&&tickTreeLayout.depth>1,ticks=tickScale.ticks(),sideFlag=label.mirrored?1:-1,parallelFlipRotation=normalizeAngle360(rotation),parallelFlipFlag=!labelRotation&&parallelFlipRotation>=0&&parallelFlipRotation<=Math.PI?-1:1,regularFlipRotation=normalizeAngle360(rotation-Math.PI/2),regularFlipFlag=!labelRotation&&regularFlipRotation>=0&&regularFlipRotation<=Math.PI?-1:1,updateGridLines=this.gridLineSelection.setData(this.gridLength?ticks:[]);updateGridLines.exit.remove();var enterGridLines=updateGridLines.enter.append(Line$1),gridLineSelection=updateGridLines.merge(enterGridLines),updateLabels=this.labelSelection.setData(treeLabels);updateLabels.exit.remove();var enterLabels=updateLabels.enter.append(Text$2),labelSelection=updateLabels.merge(enterLabels),labelFormatter=label.formatter,labelBBoxes=new Map,maxLeafLabelWidth=0;labelSelection.each((function(node,datum,index){node.fontStyle=label.fontStyle,node.fontWeight=label.fontWeight,node.fontSize=label.fontSize,node.fontFamily=label.fontFamily,node.fill=label.color,node.textBaseline=-1===parallelFlipFlag?"bottom":"hanging",node.textAlign="center",node.translationX=datum.screenY-.25*label.fontSize,node.translationY=datum.screenX,0===index?title&&title.enabled&&labels.length>0?(node.visible=!0,node.text=title.text,node.fontSize=title.fontSize,node.fontStyle=title.fontStyle,node.fontWeight=title.fontWeight,node.fontFamily=title.fontFamily,node.textBaseline="hanging"):node.visible=!1:(node.text=labelFormatter?labelFormatter({value:String(datum.label),index}):String(datum.label),node.visible=datum.screenX>=requestedRange[0]&&datum.screenX<=requestedRange[1]);var bbox=node.computeBBox();labelBBoxes.set(node.id,bbox),bbox.width>maxLeafLabelWidth&&(maxLeafLabelWidth=bbox.width)}));var labelX=sideFlag*label.padding,autoRotation=parallelLabels?parallelFlipFlag*Math.PI/2:-1===regularFlipFlag?Math.PI:0,labelGrid=this.label.grid,separatorData=[];labelSelection.each((function(label,datum,index){if(label.x=labelX,label.rotationCenterX=labelX,datum.children.length){label.translationX-=maxLeafLabelWidth-lineHeight+_this.label.padding;var availableRange=datum.leafCount*bandwidth;(bbox=labelBBoxes.get(label.id))&&bbox.width>availableRange?label.visible=!1:label.rotation=isHorizontal?autoRotation:-Math.PI/2}else{var bbox;label.rotation=labelRotation,label.textAlign="end",label.textBaseline="middle",(bbox=labelBBoxes.get(label.id))&&bbox.height>bandwidth&&(label.visible=!1)}if(datum.parent&&isLabelTree){var y=datum.children.length?datum.screenX-datum.leafCount*bandwidth/2:datum.screenX-bandwidth/2;if(datum.children.length){var x=-maxLeafLabelWidth-2*_this.label.padding+datum.screenY;separatorData.push({y,x1:x+lineHeight,x2:x,toString:function(){return String(index)}})}else(datum.number!==datum.children.length-1||labelGrid)&&separatorData.push({y,x1:0,x2:-maxLeafLabelWidth-2*_this.label.padding,toString:function(){return String(index)}})}}));var minX=0;separatorData.forEach((function(d){return minX=Math.min(minX,d.x2)})),this.longestSeparatorLength=Math.abs(minX),separatorData.push({y:Math.max(rangeStart,rangeEnd),x1:0,x2:minX,toString:function(){return String(separatorData.length)}});var updateSeparators=this.separatorSelection.setData(separatorData);updateSeparators.exit.remove();var enterSeparators=updateSeparators.enter.append(Line$1),separatorSelection=updateSeparators.merge(enterSeparators);this.separatorSelection=separatorSelection;separatorSelection.each((function(line,datum,i){line.x1=datum.x1,line.x2=datum.x2,line.y1=datum.y,line.y2=datum.y,line.visible=datum.y>=requestedRange[0]-1e-7&&datum.y<=requestedRange[1]+1e-7,line.stroke=_this.tick.color,line.fill=void 0,line.strokeWidth=1})),this.gridLineSelection=gridLineSelection,this.labelSelection=labelSelection;for(var lineCount=tickTreeLayout?tickTreeLayout.depth+1:1,lines=[],i=0;i<lineCount;i++)lines.push(i);var updateAxisLines=this.axisLineSelection.setData(lines);updateAxisLines.exit.remove();var enterAxisLines=updateAxisLines.enter.append(Line$1),axisLineSelection=updateAxisLines.merge(enterAxisLines);if(this.axisLineSelection=axisLineSelection,axisLineSelection.each((function(line,_,index){var x=index>0?-maxLeafLabelWidth-2*_this.label.padding-(index-1)*lineHeight:0;line.x1=x,line.x2=x,line.y1=requestedRange[0],line.y2=requestedRange[1],line.strokeWidth=_this.line.width,line.stroke=_this.line.color,line.visible=labels.length>0&&(0===index||labelGrid&&isLabelTree)})),this.gridLength){var styles_1=this.gridStyle,styleCount_1=styles_1.length;gridLineSelection.each((function(line,datum,index){var y=Math.round(tickScale.convert(datum));line.x1=0,line.x2=-sideFlag*_this.gridLength,line.y1=y,line.y2=y,line.visible=y>=requestedRange[0]&&y<=requestedRange[1]&&Math.abs(line.parent.translationY-rangeStart)>1;var style=styles_1[index%styleCount_1];line.stroke=style.stroke,line.strokeWidth=_this.tick.width,line.lineDash=style.lineDash,line.fill=void 0}))}},GroupedCategoryAxis.prototype.computeBBox=function(options){var includeTitle=!options||!options.excludeTitle,left=1/0,right=-1/0,top=1/0,bottom=-1/0;return this.labelSelection.each((function(label,_,index){if(index>0||includeTitle){label.computeTransformMatrix();var matrix=Matrix$1.flyweight(label.matrix),labelBBox=label.computeBBox();if(labelBBox){var bbox=matrix.transformBBox(labelBBox);left=Math.min(left,bbox.x),right=Math.max(right,bbox.x+bbox.width),top=Math.min(top,bbox.y),bottom=Math.max(bottom,bbox.y+bbox.height)}}})),new BBox$1(left,top,Math.max(right-left,this.longestSeparatorLength),bottom-top)},GroupedCategoryAxis.className="GroupedCategoryAxis",GroupedCategoryAxis.type="groupedCategory",GroupedCategoryAxis}(ChartAxis),__extends$1j=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),t0$1=new Date,t1$1=new Date,TimeInterval$1=function(){function TimeInterval(floor,offset){this._floor=floor,this._offset=offset}return TimeInterval.prototype.floor=function(date){return date=new Date(+date),this._floor(date),date},TimeInterval.prototype.ceil=function(date){return date=new Date(+date-1),this._floor(date),this._offset(date,1),this._floor(date),date},TimeInterval.prototype.round=function(date){var d0=this.floor(date),d1=this.ceil(date),ms=+date;return ms-d0.getTime()<d1.getTime()-ms?d0:d1},TimeInterval.prototype.offset=function(date,step){return void 0===step&&(step=1),date=new Date(+date),this._offset(date,Math.floor(step)),date},TimeInterval.prototype.range=function(start,stop,step){void 0===step&&(step=1);var previous,range=[];if(start=this.ceil(start),step=Math.floor(step),start>stop||step<=0)return range;do{previous=new Date(+start),range.push(previous),this._offset(start,step),this._floor(start)}while(previous<start&&start<stop);return range},TimeInterval.prototype.filter=function(test){var _this=this;return new TimeInterval((function(date){if(date>=date)for(;_this._floor(date),!test(date);)date.setTime(date.getTime()-1);return date}),(function(date,step){if(date>=date)if(step<0)for(;++step<=0;)do{_this._offset(date,-1)}while(!test(date));else for(;--step>=0;)do{_this._offset(date,1)}while(!test(date));return date}))},TimeInterval}(),CountableTimeInterval$1=function(_super){function CountableTimeInterval(floor,offset,count,field){var _this=_super.call(this,floor,offset)||this;return _this._count=count,_this._field=field,_this}return __extends$1j(CountableTimeInterval,_super),CountableTimeInterval.prototype.count=function(start,end){return t0$1.setTime(+start),t1$1.setTime(+end),this._floor(t0$1),this._floor(t1$1),Math.floor(this._count(t0$1,t1$1))},CountableTimeInterval.prototype.every=function(step){var result,_this=this;if(step=Math.floor(step),isFinite(step)&&step>0)if(step>1){var field_1=this._field;result=field_1?this.filter((function(d){return field_1(d)%step==0})):this.filter((function(d){return _this.count(0,d)%step==0}))}else result=this;return result},CountableTimeInterval}(TimeInterval$1);var millisecond$1=new CountableTimeInterval$1((function floor$9(date){return date}),(function offset$9(date,milliseconds){date.setTime(date.getTime()+milliseconds)}),(function count$9(start,end){return end.getTime()-start.getTime()}));var second$1=new CountableTimeInterval$1((function floor$a(date){date.setTime(date.getTime()-date.getMilliseconds())}),(function offset$a(date,seconds){date.setTime(date.getTime()+1e3*seconds)}),(function count$a(start,end){return(end.getTime()-start.getTime())/1e3}));var minute$1=new CountableTimeInterval$1((function floor$b(date){date.setTime(date.getTime()-date.getMilliseconds()-1e3*date.getSeconds())}),(function offset$b(date,minutes){date.setTime(date.getTime()+6e4*minutes)}),(function count$b(start,end){return(end.getTime()-start.getTime())/6e4}),(function field$7(date){return date.getMinutes()}));var hour$1=new CountableTimeInterval$1((function floor$c(date){date.setTime(date.getTime()-date.getMilliseconds()-1e3*date.getSeconds()-6e4*date.getMinutes())}),(function offset$c(date,hours){date.setTime(date.getTime()+36e5*hours)}),(function count$c(start,end){return(end.getTime()-start.getTime())/36e5}),(function field$8(date){return date.getHours()}));var day$1=new CountableTimeInterval$1((function floor$d(date){date.setHours(0,0,0,0)}),(function offset$d(date,days){date.setDate(date.getDate()+days)}),(function count$d(start,end){var tzMinuteDelta=end.getTimezoneOffset()-start.getTimezoneOffset();return(end.getTime()-start.getTime()-6e4*tzMinuteDelta)/864e5}),(function field$9(date){return date.getDate()-1}));function weekday$2(n){return new CountableTimeInterval$1((function floor(date){date.setDate(date.getDate()-(date.getDay()+7-n)%7),date.setHours(0,0,0,0)}),(function offset(date,weeks){date.setDate(date.getDate()+7*weeks)}),(function count(start,end){return(end.getTime()-start.getTime()-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/6048e5}))}var sunday$1=weekday$2(0),monday$1=weekday$2(1),thursday$1=(weekday$2(2),weekday$2(3),weekday$2(4));weekday$2(5),weekday$2(6);var month$1=new CountableTimeInterval$1((function floor$e(date){date.setDate(1),date.setHours(0,0,0,0)}),(function offset$e(date,months){date.setMonth(date.getMonth()+months)}),(function count$e(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())}),(function field$a(date){return date.getMonth()}));var year$1=new CountableTimeInterval$1((function floor$f(date){date.setMonth(0,1),date.setHours(0,0,0,0)}),(function offset$f(date,years){date.setFullYear(date.getFullYear()+years)}),(function count$f(start,end){return end.getFullYear()-start.getFullYear()}),(function field$b(date){return date.getFullYear()}));var utcDay$1=new CountableTimeInterval$1((function floor$g(date){date.setUTCHours(0,0,0,0)}),(function offset$g(date,days){date.setUTCDate(date.getUTCDate()+days)}),(function count$g(start,end){return(end.getTime()-start.getTime())/864e5}),(function field$c(date){return date.getUTCDate()-1}));var utcYear$1=new CountableTimeInterval$1((function floor$h(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function offset$h(date,years){date.setUTCFullYear(date.getUTCFullYear()+years)}),(function count$h(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),(function field$d(date){return date.getUTCFullYear()}));function weekday$3(n){return new CountableTimeInterval$1((function floor(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-n)%7),date.setHours(0,0,0,0)}),(function offset(date,weeks){date.setUTCDate(date.getUTCDate()+7*weeks)}),(function count(start,end){return(end.getTime()-start.getTime())/6048e5}))}var utcSunday$1=weekday$3(0),utcMonday$1=weekday$3(1),utcThursday$1=(weekday$3(2),weekday$3(3),weekday$3(4));weekday$3(5),weekday$3(6);function localDate$1(d){if(d.y>=0&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate$1(d){if(d.y>=0&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function formatLookup$1(names){for(var map={},i=0,n=names.length;i<n;i++)map[names[i].toLowerCase()]=i;return map}function newYear$1(y){return{y,m:0,d:1,H:0,M:0,S:0,L:0}}var locale$1,percentCharCode$1=37,numberRe$1=/^\s*\d+/,percentRe$1=/^%/,requoteRe$1=/[\\^$*+?|[\]().{}]/g,requote$1=function(s){return s.replace(requoteRe$1,"\\$&")},formatRe$1=function(names){return new RegExp("^(?:"+names.map(requote$1).join("|")+")","i")},pads$1={"-":"",_:" ",0:"0"};function pad$1(value,fill,width){var sign=value<0?"-":"",string=String(sign?-value:value),length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}!function setDefaultLocale$1(definition){return locale$1=function formatLocale$3(timeLocale){var lDateTime=timeLocale.dateTime,lDate=timeLocale.date,lTime=timeLocale.time,lPeriods=timeLocale.periods,lWeekdays=timeLocale.days,lShortWeekdays=timeLocale.shortDays,lMonths=timeLocale.months,lShortMonths=timeLocale.shortMonths,periodRe=formatRe$1(lPeriods),periodLookup=formatLookup$1(lPeriods),weekdayRe=formatRe$1(lWeekdays),weekdayLookup=formatLookup$1(lWeekdays),shortWeekdayRe=formatRe$1(lShortWeekdays),shortWeekdayLookup=formatLookup$1(lShortWeekdays),monthRe=formatRe$1(lMonths),monthLookup=formatLookup$1(lMonths),shortMonthRe=formatRe$1(lShortMonths),shortMonthLookup=formatLookup$1(lShortMonths),formats={a:function formatShortWeekday(date){return lShortWeekdays[date.getDay()]},A:function formatWeekday(date){return lWeekdays[date.getDay()]},b:function formatShortMonth(date){return lShortMonths[date.getMonth()]},B:function formatMonth(date){return lMonths[date.getMonth()]},c:void 0,d:formatDayOfMonth,e:formatDayOfMonth,f:function formatMicroseconds(date,fill){return formatMilliseconds(date,fill)+"000"},H:function formatHour24(date,fill){return pad$1(date.getHours(),fill,2)},I:function formatHour12(date,fill){return pad$1(date.getHours()%12||12,fill,2)},j:function formatDayOfYear(date,fill){return pad$1(1+day$1.count(year$1.floor(date),date),fill,3)},L:formatMilliseconds,m:function formatMonthNumber(date,fill){return pad$1(date.getMonth()+1,fill,2)},M:function formatMinutes(date,fill){return pad$1(date.getMinutes(),fill,2)},p:function formatPeriod(date){return lPeriods[date.getHours()>=12?1:0]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:function formatSeconds(date,fill){return pad$1(date.getSeconds(),fill,2)},u:function formatWeekdayNumberMonday(date){var dayOfWeek=date.getDay();return 0===dayOfWeek?7:dayOfWeek},U:function formatWeekNumberSunday(date,fill){return pad$1(sunday$1.count(year$1.floor(date),date),fill,2)},V:function formatWeekNumberISO(date,fill){var day=date.getDay();date=day>=4||0===day?thursday$1.floor(date):thursday$1.ceil(date);var yearStart=year$1.floor(date);return pad$1(thursday$1.count(yearStart,date)+(4===yearStart.getDay()?1:0),fill,2)},w:function formatWeekdayNumberSunday(date){return date.getDay()},W:function formatWeekNumberMonday(date,fill){return pad$1(monday$1.count(year$1.floor(date),date),fill,2)},x:void 0,X:void 0,y:function formatYear(date,fill){return pad$1(date.getFullYear()%100,fill,2)},Y:function formatFullYear(date,fill){return pad$1(date.getFullYear()%1e4,fill,4)},Z:function formatZone(date){var z=date.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad$1(Math.floor(z/60),"0",2)+pad$1(z%60,"0",2)},"%":formatLiteralPercent},utcFormats={a:function formatUTCShortWeekday(date){return lShortWeekdays[date.getUTCDay()]},A:function formatUTCWeekday(date){return lWeekdays[date.getUTCDay()]},b:function formatUTCShortMonth(date){return lShortMonths[date.getUTCMonth()]},B:function formatUTCMonth(date){return lMonths[date.getUTCMonth()]},c:void 0,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:function formatUTCMicroseconds(date,fill){return formatUTCMilliseconds(date,fill)+"000"},H:function formatUTCHour24(date,fill){return pad$1(date.getUTCHours(),fill,2)},I:function formatUTCHour12(date,fill){return pad$1(date.getUTCHours()%12||12,fill,2)},j:function formatUTCDayOfYear(date,fill){return pad$1(1+utcDay$1.count(utcYear$1.floor(date),date),fill,3)},L:formatUTCMilliseconds,m:function formatUTCMonthNumber(date,fill){return pad$1(date.getUTCMonth()+1,fill,2)},M:function formatUTCMinutes(date,fill){return pad$1(date.getUTCMinutes(),fill,2)},p:function formatUTCPeriod(date){return lPeriods[date.getUTCHours()>=12?1:0]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:function formatUTCSeconds(date,fill){return pad$1(date.getUTCSeconds(),fill,2)},u:function formatUTCWeekdayNumberMonday(date){var dayOfWeek=date.getUTCDay();return 0===dayOfWeek?7:dayOfWeek},U:function formatUTCWeekNumberSunday(date,fill){return pad$1(utcSunday$1.count(utcYear$1.floor(date),date),fill,2)},V:function formatUTCWeekNumberISO(date,fill){var day=date.getUTCDay();date=day>=4||0===day?utcThursday$1.floor(date):utcThursday$1.ceil(date);var yearStart=utcYear$1.floor(date);return pad$1(utcThursday$1.count(yearStart,date)+(4===yearStart.getUTCDay()?1:0),fill,4)},w:function formatUTCWeekdayNumberSunday(date){return date.getUTCDay()},W:function formatUTCWeekNumberMonday(date,fill){return pad$1(utcMonday$1.count(utcYear$1.floor(date),date),fill,2)},x:void 0,X:void 0,y:function formatUTCYear(date,fill){return pad$1(date.getUTCFullYear()%100,fill,2)},Y:function formatUTCFullYear(date,fill){return pad$1(date.getUTCFullYear()%1e4,fill,4)},Z:function formatUTCZone(){return"+0000"},"%":formatLiteralPercent},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,lDateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:function parseMicroseconds(d,string,i){var n=numberRe$1.exec(string.slice(i,i+6));return n?(d.L=Math.floor(parseFloat(n[0])/1e3),i+n[0].length):-1},H:parseHour24,I:parseHour24,j:function parseDayOfYear(d,string,i){var n=numberRe$1.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1},L:function parseMilliseconds(d,string,i){var n=numberRe$1.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1},m:function parseMonthNumber(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.m=parseFloat(n[0])-1,i+n[0].length):-1},M:function parseMinutes(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1},p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1},Q:function parseUnixTimestamp(d,string,i){var n=numberRe$1.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1},s:function parseUnixTimestampSeconds(d,string,i){var n=numberRe$1.exec(string.slice(i));return n?(d.Q=1e3*+n[0],i+n[0].length):-1},S:function parseSeconds(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1},u:function parseWeekdayNumberMonday(d,string,i){var n=numberRe$1.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1},U:function parseWeekNumberSunday(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1},V:function parseWeekNumberISO(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1},w:function parseWeekdayNumberSunday(d,string,i){var n=numberRe$1.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1},W:function parseWeekNumberMonday(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1},x:function parseLocaleDate(d,string,i){return parseSpecifier(d,lDate,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,lTime,string,i)},y:function parseYear(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1},Y:function parseFullYear(d,string,i){var n=numberRe$1.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1},Z:function parseZone(d,string,i){var n=/^(Z)|^([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1},"%":function parseLiteralPercent(d,string,i){var n=percentRe$1.exec(string.slice(i,i+1));return n?i+n[0].length:-1}};function newParse(specifier,newDate){return function(str){var d=newYear$1(1900);if(parseSpecifier(d,specifier,str+="",0)==str.length){if("Q"in d)return new Date(d.Q);if("p"in d&&(d.H=d.H%12+12*d.p),"V"in d){if(d.V<1||d.V>53)return;if("w"in d||(d.w=1),"Z"in d){var day=(week=utcDate$1(newYear$1(d.y))).getUTCDay();week=day>4||0===day?utcMonday$1.ceil(week):utcMonday$1.floor(week),week=utcDay$1.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7}else{var week;day=(week=newDate(newYear$1(d.y))).getDay(),week=day>4||0===day?monday$1.ceil(week):monday$1.floor(week),week=day$1.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7}}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?utcDate$1(newYear$1(d.y)).getUTCDay():newDate(newYear$1(d.y)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate$1(d)):newDate(d)}}}function newFormat(specifier,formats){return function(date){var string=[],n=specifier.length,i=-1,j=0;for(date instanceof Date||(date=new Date(+date));++i<n;)if(specifier.charCodeAt(i)===percentCharCode$1){string.push(specifier.slice(j,i));var c=specifier.charAt(++i),pad_1=pads$1[c];null!=pad_1?c=specifier.charAt(++i):pad_1="e"===c?" ":"0";var format=formats[c];format&&(c=format(date,pad_1)),string.push(c),j=i+1}return string.push(specifier.slice(j,i)),string.join("")}}function parseSpecifier(d,specifier,string,j){for(var i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;var code=specifier.charCodeAt(i++);if(code===percentCharCode$1){var char=specifier.charAt(i++),parse=parses[char in pads$1?specifier.charAt(i++):char];if(!parse||(j=parse(d,string,j))<0)return-1}else if(code!=string.charCodeAt(j++))return-1}return j}function formatMilliseconds(date,fill){return pad$1(date.getMilliseconds(),fill,3)}function formatDayOfMonth(date,fill){return pad$1(date.getDate(),fill,2)}function formatUTCMilliseconds(date,fill){return pad$1(date.getUTCMilliseconds(),fill,3)}function formatUTCDayOfMonth(date,fill){return pad$1(date.getUTCDate(),fill,2)}function formatLiteralPercent(date){return"%"}function formatUnixTimestamp(date){return date.getTime()}function formatUnixTimestampSeconds(date){return Math.floor(date.getTime()/1e3)}function parseHour24(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}return formats.x=newFormat(lDate,formats),formats.X=newFormat(lTime,formats),formats.c=newFormat(lDateTime,formats),utcFormats.x=newFormat(lDate,utcFormats),utcFormats.X=newFormat(lTime,utcFormats),utcFormats.c=newFormat(lDateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier,formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier,localDate$1);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier,utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier,utcDate$1);return p.toString=function(){return specifier},p}}}(definition)}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var RectSizing,__extends$1k=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$q=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},TimeScale$1=function(_super){function TimeScale(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type="time",_this.year=year$1,_this.month=month$1,_this.week=sunday$1,_this.day=day$1,_this.hour=hour$1,_this.minute=minute$1,_this.second=second$1,_this.millisecond=millisecond$1,_this.format=locale$1.format,_this.tickIntervals=[[_this.second,1,1e3],[_this.second,5,5e3],[_this.second,15,15e3],[_this.second,30,3e4],[_this.minute,1,6e4],[_this.minute,5,3e5],[_this.minute,15,9e5],[_this.minute,30,18e5],[_this.hour,1,36e5],[_this.hour,3,108e5],[_this.hour,6,216e5],[_this.hour,12,432e5],[_this.day,1,864e5],[_this.day,2,1728e5],[_this.week,1,6048e5],[_this.month,1,2592e6],[_this.month,3,7776e6],[_this.year,1,31536e6]],_this.formatMillisecond=_this.format(".%L"),_this.formatSecond=_this.format(":%S"),_this.formatMinute=_this.format("%I:%M"),_this.formatHour=_this.format("%I %p"),_this.formatDay=_this.format("%a %d"),_this.formatWeek=_this.format("%b %d"),_this.formatMonth=_this.format("%B"),_this.formatYear=_this.format("%Y"),_this._domain=[new Date(2e3,0,1),new Date(2e3,0,2)],_this}return __extends$1k(TimeScale,_super),TimeScale.prototype.defaultTickFormat=function(date){return(this.second.floor(date)<date?this.formatMillisecond:this.minute.floor(date)<date?this.formatSecond:this.hour.floor(date)<date?this.formatMinute:this.day.floor(date)<date?this.formatHour:this.month.floor(date)<date?this.week.floor(date)<date?this.formatDay:this.formatWeek:this.year.floor(date)<date?this.formatMonth:this.formatYear)(date)},TimeScale.prototype.tickInterval=function(interval,start,stop,step){var _a;if("number"==typeof interval){var tickCount=interval,tickIntervals=this.tickIntervals,target=Math.abs(stop-start)/tickCount,i=complexBisectRight$1(tickIntervals,target,(function(interval){return interval[2]}));i===tickIntervals.length?(step=tickStep$1(start/31536e6,stop/31536e6,tickCount),interval=this.year):i?(interval=(_a=__read$q(tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i],2))[0],step=_a[1]):(step=Math.max(tickStep$1(start,stop,interval),1),interval=this.millisecond)}return null==step?interval:interval.every(step)},Object.defineProperty(TimeScale.prototype,"domain",{get:function(){return _super.prototype.getDomain.call(this).map((function(t){return new Date(t)}))},set:function(values){_super.prototype.setDomain.call(this,Array.prototype.map.call(values,(function(t){return t instanceof Date?+t:+new Date(+t)})))},enumerable:!0,configurable:!0}),TimeScale.prototype.invert=function(y){return new Date(_super.prototype.invert.call(this,y))},TimeScale.prototype.ticks=function(interval){void 0===interval&&(interval=10);var d=_super.prototype.getDomain.call(this),t0=d[0],t1=d[d.length-1],reverse=t1<t0;if(reverse){var _=t0;t0=t1,t1=_}var t=this.tickInterval(interval,t0,t1),i=t?t.range(t0,t1+1):[];return reverse?i.reverse():i},TimeScale.prototype.tickFormat=function(count,specifier){return null==specifier?this.defaultTickFormat.bind(this):this.format(specifier)},TimeScale.prototype.nice=function(interval){void 0===interval&&(interval=10);var d=_super.prototype.getDomain.call(this),i=this.tickInterval(interval,d[0],d[d.length-1]);i&&(this.domain=this._nice(d,i))},TimeScale.prototype._nice=function(domain,interval){var _a,_b,i0=0,i1=(domain=domain.slice()).length-1,x0=domain[i0],x1=domain[i1];return x1<x0&&(i0=(_a=__read$q([i1,i0],2))[0],i1=_a[1],x0=(_b=__read$q([x1,x0],2))[0],x1=_b[1]),domain[i0]=interval.floor(x0),domain[i1]=interval.ceil(x1),domain},TimeScale}(ContinuousScale$1),__extends$1l=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TimeAxis=function(_super){function TimeAxis(){var _this=_super.call(this,new TimeScale$1)||this;_this.datumFormat="%m/%d/%y, %H:%M:%S",_this._nice=!0;var scale=_this.scale;return scale.clamp=!0,_this.scale=scale,_this.datumFormatter=scale.tickFormat(_this.calculatedTickCount,_this.datumFormat),_this}return __extends$1l(TimeAxis,_super),Object.defineProperty(TimeAxis.prototype,"nice",{get:function(){return this._nice},set:function(value){this._nice!==value&&(this._nice=value,value&&this.scale.nice&&this.scale.nice(10))},enumerable:!0,configurable:!0}),Object.defineProperty(TimeAxis.prototype,"domain",{get:function(){return this.scale.domain},set:function(domain){domain.length>2&&(domain=(extent$1(domain,isContinuous$1,Number)||[0,1e3]).map((function(x){return new Date(x)}))),this.scale.domain=domain,this.nice&&this.scale.nice&&this.scale.nice(10)},enumerable:!0,configurable:!0}),TimeAxis.prototype.onLabelFormatChange=function(format){format?_super.prototype.onLabelFormatChange.call(this,format):this.labelFormatter=this.scale.tickFormat(this.calculatedTickCount,void 0)},TimeAxis.prototype.formatDatum=function(datum){return this.datumFormatter(datum)},TimeAxis.className="TimeAxis",TimeAxis.type="time",TimeAxis}(ChartAxis),__read$r=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$9=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$r(arguments[i]));return ar},Scene$1=function(){function Scene(document,width,height){var _this=this;void 0===document&&(document=window.document),this.id=createId$1(this),this._dirty=!1,this.animationFrameId=0,this._root=null,this.debug={renderFrameIndex:!1,renderBoundingBoxes:!1},this._frameIndex=0,this.render=function(){var _a,_b=_this,ctx=_b.ctx,root=_b.root,pendingSize=_b.pendingSize;_this.animationFrameId=0,pendingSize&&((_a=_this.canvas).resize.apply(_a,__spread$9(pendingSize)),_this.pendingSize=void 0),!root||root.visible?(ctx.clearRect(0,0,_this.width,_this.height),root&&(ctx.save(),root.visible&&root.render(ctx),ctx.restore()),_this._frameIndex++,_this.debug.renderFrameIndex&&(ctx.fillStyle="white",ctx.fillRect(0,0,40,15),ctx.fillStyle="black",ctx.fillText(_this.frameIndex.toString(),2,10)),_this.dirty=!1):_this.dirty=!1},this.canvas=new HdpiCanvas$1(document,width,height),this.ctx=this.canvas.context}return Object.defineProperty(Scene.prototype,"container",{get:function(){return this.canvas.container},set:function(value){this.canvas.container=value},enumerable:!0,configurable:!0}),Scene.prototype.download=function(fileName){this.canvas.download(fileName)},Scene.prototype.getDataURL=function(type){return this.canvas.getDataURL(type)},Object.defineProperty(Scene.prototype,"width",{get:function(){return this.pendingSize?this.pendingSize[0]:this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(Scene.prototype,"height",{get:function(){return this.pendingSize?this.pendingSize[1]:this.canvas.height},enumerable:!0,configurable:!0}),Scene.prototype.resize=function(width,height){width=Math.round(width),height=Math.round(height),width===this.width&&height===this.height||(this.pendingSize=[width,height],this.dirty=!0)},Object.defineProperty(Scene.prototype,"dirty",{get:function(){return this._dirty},set:function(dirty){dirty?this._dirty||(this.animationFrameId=requestAnimationFrame(this.render)):this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0),this._dirty=dirty},enumerable:!0,configurable:!0}),Object.defineProperty(Scene.prototype,"root",{get:function(){return this._root},set:function(node){node!==this._root&&(this._root&&this._root._setScene(),this._root=node,node&&(null===node.parent&&node.scene&&node.scene!==this&&(node.scene.root=null),node._setScene(this)),this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Scene.prototype,"frameIndex",{get:function(){return this._frameIndex},enumerable:!0,configurable:!0}),Scene.className="Scene",Scene}(),Gradient=function Gradient(){this.stops=[]},__extends$1m=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),LinearGradient=function(_super){function LinearGradient(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.angle=0,_this}return __extends$1m(LinearGradient,_super),LinearGradient.prototype.createGradient=function(ctx,bbox){var stops=this.stops,radians=this.angle%360*Math.PI/180,cos=Math.cos(radians),sin=Math.sin(radians),w=bbox.width,h=bbox.height,cx=bbox.x+.5*w,cy=bbox.y+.5*h;if(w>0&&h>0){var l=Math.sqrt(h*h+w*w)*Math.abs(Math.cos(radians-Math.atan(h/w)))/2,gradient_1=ctx.createLinearGradient(cx+cos*l,cy+sin*l,cx-cos*l,cy-sin*l);return stops.forEach((function(stop){gradient_1.addColorStop(stop.offset,stop.color)})),gradient_1}return"black"},LinearGradient}(Gradient),__extends$1n=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(RectSizing){RectSizing[RectSizing.Content=0]="Content",RectSizing[RectSizing.Border=1]="Border"}(RectSizing||(RectSizing={}));var Rect=function(_super){function Rect(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._x=0,_this._y=0,_this._width=10,_this._height=10,_this._radius=0,_this._crisp=!1,_this._gradient=!1,_this.effectiveStrokeWidth=Shape$1.defaultStyles.strokeWidth,_this._sizing=RectSizing.Content,_this}return __extends$1n(Rect,_super),Object.defineProperty(Rect.prototype,"x",{get:function(){return this._x},set:function(value){this._x!==value&&(this._x=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Rect.prototype,"y",{get:function(){return this._y},set:function(value){this._y!==value&&(this._y=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Rect.prototype,"width",{get:function(){return this._width},set:function(value){this._width!==value&&(this._width=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Rect.prototype,"height",{get:function(){return this._height},set:function(value){this._height!==value&&(this._height=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Rect.prototype,"radius",{get:function(){return this._radius},set:function(value){this._radius!==value&&(this._radius=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Rect.prototype,"crisp",{get:function(){return this._crisp},set:function(value){this._crisp!==value&&(this._crisp=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Rect.prototype,"gradient",{get:function(){return this._gradient},set:function(value){this._gradient!==value&&(this._gradient=value,this.updateGradientInstance(),this.dirty=!0)},enumerable:!0,configurable:!0}),Rect.prototype.updateGradientInstance=function(){if(this.gradient){var fill=this.fill;if(fill){var gradient=new LinearGradient;gradient.angle=270,gradient.stops=[{offset:0,color:Color$1.fromString(fill).brighter().toString()},{offset:1,color:Color$1.fromString(fill).darker().toString()}],this.gradientInstance=gradient}}else this.gradientInstance=void 0},Object.defineProperty(Rect.prototype,"fill",{get:function(){return this._fill},set:function(value){this._fill!==value&&(this._fill=value,this.updateGradientInstance(),this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Rect.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(value){this._strokeWidth!==value&&(this._strokeWidth=value,this.crisp||this.sizing===RectSizing.Border?this.dirtyPath=!0:(this.effectiveStrokeWidth=value,this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(Rect.prototype,"sizing",{get:function(){return this._sizing},set:function(value){this._sizing!==value&&(this._sizing=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Rect.prototype.updatePath=function(){var borderSizing=this.sizing===RectSizing.Border,path=this.path;path.clear();var strokeWidth,x=this.x,y=this.y,width=this.width,height=this.height;if(borderSizing){var halfWidth=width/2,halfHeight=height/2;strokeWidth=Math.min(this.strokeWidth,halfWidth,halfHeight),x=Math.min(x+strokeWidth/2,x+halfWidth),y=Math.min(y+strokeWidth/2,y+halfHeight),width=Math.max(width-strokeWidth,0),height=Math.max(height-strokeWidth,0)}else strokeWidth=this.strokeWidth;if(this.effectiveStrokeWidth=strokeWidth,this.crisp&&!borderSizing){var a=this.alignment,al=this.align;path.rect(al(a,x),al(a,y),al(a,x,width),al(a,y,height))}else path.rect(x,y,width,height)},Rect.prototype.computeBBox=function(){var x=this.x,y=this.y,width=this.width,height=this.height;return new BBox$1(x,y,width,height)},Rect.prototype.isPointInPath=function(x,y){var point=this.transformPoint(x,y);return this.computeBBox().containsPoint(point.x,point.y)},Rect.prototype.isPointInStroke=function(x,y){return!1},Rect.prototype.fillStroke=function(ctx){if(this.scene){var pixelRatio=this.scene.canvas.pixelRatio||1;if(this.fill){this.gradientInstance?ctx.fillStyle=this.gradientInstance.createGradient(ctx,this.computeBBox()):ctx.fillStyle=this.fill,ctx.globalAlpha=this.opacity*this.fillOpacity;var fillShadow=this.fillShadow;fillShadow&&fillShadow.enabled&&(ctx.shadowColor=fillShadow.color,ctx.shadowOffsetX=fillShadow.xOffset*pixelRatio,ctx.shadowOffsetY=fillShadow.yOffset*pixelRatio,ctx.shadowBlur=fillShadow.blur*pixelRatio),ctx.fill()}if(ctx.shadowColor="rgba(0, 0, 0, 0)",this.stroke&&this.effectiveStrokeWidth){ctx.strokeStyle=this.stroke,ctx.globalAlpha=this.opacity*this.strokeOpacity,ctx.lineWidth=this.effectiveStrokeWidth,this.lineDash&&ctx.setLineDash(this.lineDash),this.lineDashOffset&&(ctx.lineDashOffset=this.lineDashOffset),this.lineCap&&(ctx.lineCap=this.lineCap),this.lineJoin&&(ctx.lineJoin=this.lineJoin);var strokeShadow=this.strokeShadow;strokeShadow&&strokeShadow.enabled&&(ctx.shadowColor=strokeShadow.color,ctx.shadowOffsetX=strokeShadow.xOffset*pixelRatio,ctx.shadowOffsetY=strokeShadow.yOffset*pixelRatio,ctx.shadowBlur=strokeShadow.blur*pixelRatio),ctx.stroke()}}},Rect.className="Rect",Rect}(Path$1),__extends$1o=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Marker$1=function(_super){function Marker(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._x=0,_this._y=0,_this._size=12,_this}return __extends$1o(Marker,_super),Object.defineProperty(Marker.prototype,"x",{get:function(){return this._x},set:function(value){this._x!==value&&(this._x=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Marker.prototype,"y",{get:function(){return this._y},set:function(value){this._y!==value&&(this._y=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Marker.prototype,"size",{get:function(){return this._size},set:function(value){this._size!==value&&(this._size=Math.abs(value),this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Marker.prototype.computeBBox=function(){var x=this.x,y=this.y,size=this.size,half=size/2;return new BBox$1(x-half,y-half,size,size)},Marker}(Path$1),__extends$1p=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Square$1=function(_super){function Square(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1p(Square,_super),Square.prototype.updatePath=function(){var path=this.path,x=this.x,y=this.y,hs=this.size/2,a=this.alignment,al=this.align;path.clear(),path.moveTo(al(a,x-hs),al(a,y-hs)),path.lineTo(al(a,x+hs),al(a,y-hs)),path.lineTo(al(a,x+hs),al(a,y+hs)),path.lineTo(al(a,x-hs),al(a,y+hs)),path.closePath()},Square.className="Square",Square}(Marker$1),__extends$1q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MarkerLabel=function(_super){function MarkerLabel(){var _this=_super.call(this)||this;_this.label=new Text$2,_this._marker=new Square$1,_this._markerSize=15,_this._spacing=8;var label=_this.label;return label.textBaseline="middle",label.fontSize=12,label.fontFamily="Verdana, sans-serif",label.fill="black",label.y=HdpiCanvas$1.has.textMetrics?1:0,_this.append([_this.marker,label]),_this.update(),_this}return __extends$1q(MarkerLabel,_super),Object.defineProperty(MarkerLabel.prototype,"text",{get:function(){return this.label.text},set:function(value){this.label.text=value},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"fontStyle",{get:function(){return this.label.fontStyle},set:function(value){this.label.fontStyle=value},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"fontWeight",{get:function(){return this.label.fontWeight},set:function(value){this.label.fontWeight=value},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"fontSize",{get:function(){return this.label.fontSize},set:function(value){this.label.fontSize=value},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"fontFamily",{get:function(){return this.label.fontFamily},set:function(value){this.label.fontFamily=value},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"color",{get:function(){return this.label.fill},set:function(value){this.label.fill=value},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"marker",{get:function(){return this._marker},set:function(value){this._marker!==value&&(this.removeChild(this._marker),this._marker=value,this.appendChild(value),this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"markerSize",{get:function(){return this._markerSize},set:function(value){this._markerSize!==value&&(this._markerSize=value,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"markerFill",{get:function(){return this.marker.fill},set:function(value){this.marker.fill=value},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"markerStroke",{get:function(){return this.marker.stroke},set:function(value){this.marker.stroke=value},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"markerStrokeWidth",{get:function(){return this.marker.strokeWidth},set:function(value){this.marker.strokeWidth=value},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"markerFillOpacity",{get:function(){return this.marker.fillOpacity},set:function(value){this.marker.fillOpacity=value},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"markerStrokeOpacity",{get:function(){return this.marker.strokeOpacity},set:function(value){this.marker.strokeOpacity=value},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"opacity",{get:function(){return this.marker.opacity},set:function(value){this.marker.opacity=value,this.label.opacity=value},enumerable:!0,configurable:!0}),Object.defineProperty(MarkerLabel.prototype,"spacing",{get:function(){return this._spacing},set:function(value){this._spacing!==value&&(this._spacing=value,this.update())},enumerable:!0,configurable:!0}),MarkerLabel.prototype.update=function(){var marker=this.marker,markerSize=this.markerSize;marker.size=markerSize,this.label.x=markerSize/2+this.spacing},MarkerLabel.className="MarkerLabel",MarkerLabel}(Group$1),__extends$1r=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Circle$1=function(_super){function Circle(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1r(Circle,_super),Circle.prototype.updatePath=function(){var x=this.x,y=this.y,path=this.path,r=this.size/2;path.clear(),path.cubicArc(x,y,r,r,0,0,2*Math.PI,0),path.closePath()},Circle.className="Circle",Circle}(Marker$1),__extends$1s=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Cross=function(_super){function Cross(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1s(Cross,_super),Cross.prototype.updatePath=function(){var x=this.x,y=this.y,path=this.path,s=this.size/4.2;path.clear(),path.moveTo(x-=s,y),path.lineTo(x-=s,y-=s),path.lineTo(x+=s,y-=s),path.lineTo(x+=s,y+=s),path.lineTo(x+=s,y-=s),path.lineTo(x+=s,y+=s),path.lineTo(x-=s,y+=s),path.lineTo(x+=s,y+=s),path.lineTo(x-=s,y+=s),path.lineTo(x-=s,y-=s),path.lineTo(x-=s,y+=s),path.lineTo(x-=s,y-=s),path.closePath()},Cross.className="Cross",Cross}(Marker$1),__extends$1t=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Diamond$1=function(_super){function Diamond(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1t(Diamond,_super),Diamond.prototype.updatePath=function(){var x=this.x,y=this.y,path=this.path,s=this.size/2;path.clear(),path.moveTo(x,y-=s),path.lineTo(x+=s,y+=s),path.lineTo(x-=s,y+=s),path.lineTo(x-=s,y-=s),path.lineTo(x+=s,y-=s),path.closePath()},Diamond.className="Diamond",Diamond}(Marker$1),__extends$1u=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Heart=function(_super){function Heart(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1u(Heart,_super),Heart.prototype.rad=function(degree){return degree/180*Math.PI},Heart.prototype.updatePath=function(){var x=this.x,path=this.path,size=this.size,rad=this.rad,r=size/4,y=this.y+r/2;path.clear(),path.cubicArc(x-r,y-r,r,r,0,rad(130),rad(330),0),path.cubicArc(x+r,y-r,r,r,0,rad(220),rad(50),0),path.lineTo(x,y+r),path.closePath()},Heart.className="Heart",Heart}(Marker$1),__extends$1v=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Plus=function(_super){function Plus(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1v(Plus,_super),Plus.prototype.updatePath=function(){var x=this.x,y=this.y,path=this.path,s=this.size/3,hs=s/2;path.clear(),path.moveTo(x-=hs,y-=hs),path.lineTo(x,y-=s),path.lineTo(x+=s,y),path.lineTo(x,y+=s),path.lineTo(x+=s,y),path.lineTo(x,y+=s),path.lineTo(x-=s,y),path.lineTo(x,y+=s),path.lineTo(x-=s,y),path.lineTo(x,y-=s),path.lineTo(x-=s,y),path.lineTo(x,y-=s),path.closePath()},Plus.className="Plus",Plus}(Marker$1),__extends$1w=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Triangle=function(_super){function Triangle(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1w(Triangle,_super),Triangle.prototype.updatePath=function(){var x=this.x,y=this.y,path=this.path,s=1.1*this.size;path.clear(),path.moveTo(x,y-=.48*s),path.lineTo(x+=.5*s,y+=.87*s),path.lineTo(x-=s,y),path.closePath()},Triangle.className="Triangle",Triangle}(Marker$1);function getMarker$1(shape){if(void 0===shape&&(shape=Square$1),"string"==typeof shape)switch(shape){case"circle":return Circle$1;case"cross":return Cross;case"diamond":return Diamond$1;case"heart":return Heart;case"plus":return Plus;case"triangle":return Triangle;default:return Square$1}return"function"==typeof shape?shape:Square$1}var LegendOrientation,LegendPosition,__extends$1x=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$K=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(LegendOrientation){LegendOrientation[LegendOrientation.Vertical=0]="Vertical",LegendOrientation[LegendOrientation.Horizontal=1]="Horizontal"}(LegendOrientation||(LegendOrientation={})),function(LegendPosition){LegendPosition.Top="top",LegendPosition.Right="right",LegendPosition.Bottom="bottom",LegendPosition.Left="left"}(LegendPosition||(LegendPosition={}));var LegendLabel=function(_super){function LegendLabel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.color="black",_this.fontSize=12,_this.fontFamily="Verdana, sans-serif",_this}return __extends$1x(LegendLabel,_super),__decorate$K([reactive$1("change")],LegendLabel.prototype,"color",void 0),__decorate$K([reactive$1("layoutChange")],LegendLabel.prototype,"fontStyle",void 0),__decorate$K([reactive$1("layoutChange")],LegendLabel.prototype,"fontWeight",void 0),__decorate$K([reactive$1("layoutChange")],LegendLabel.prototype,"fontSize",void 0),__decorate$K([reactive$1("layoutChange")],LegendLabel.prototype,"fontFamily",void 0),__decorate$K([reactive$1()],LegendLabel.prototype,"formatter",void 0),LegendLabel}(Observable$1),LegendMarker=function(_super){function LegendMarker(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.size=15,_this.padding=8,_this.strokeWidth=1,_this}return __extends$1x(LegendMarker,_super),__decorate$K([reactive$1("layoutChange")],LegendMarker.prototype,"size",void 0),__decorate$K([reactive$1("layoutChange")],LegendMarker.prototype,"shape",void 0),__decorate$K([reactive$1("layoutChange")],LegendMarker.prototype,"padding",void 0),__decorate$K([reactive$1("change")],LegendMarker.prototype,"strokeWidth",void 0),LegendMarker}(Observable$1),LegendItem=function(_super){function LegendItem(){var _this=_super.call(this)||this;_this.marker=new LegendMarker,_this.label=new LegendLabel,_this.paddingX=16,_this.paddingY=8;var changeListener=function(){return _this.fireEvent({type:"change"})};_this.marker.addEventListener("change",changeListener),_this.label.addEventListener("change",changeListener);var layoutChangeListener=function(){return _this.fireEvent({type:"layoutChange"})};return _this.marker.addEventListener("layoutChange",layoutChangeListener),_this.label.addEventListener("layoutChange",layoutChangeListener),_this}return __extends$1x(LegendItem,_super),__decorate$K([reactive$1("layoutChange")],LegendItem.prototype,"paddingX",void 0),__decorate$K([reactive$1("layoutChange")],LegendItem.prototype,"paddingY",void 0),LegendItem}(Observable$1),Legend=function(_super){function Legend(){var _this=_super.call(this)||this;return _this.id=createId$1(_this),_this.group=new Group$1,_this.itemSelection=Selection$1.select(_this.group).selectAll(),_this.oldSize=[0,0],_this.item=new LegendItem,_this.data=[],_this.enabled=!0,_this.orientation=LegendOrientation.Vertical,_this.position=LegendPosition.Right,_this.spacing=20,_this._size=[0,0],_this.addPropertyListener("data",_this.onDataChange),_this.addPropertyListener("enabled",_this.onEnabledChange),_this.addPropertyListener("position",_this.onPositionChange),_this.item.marker.addPropertyListener("shape",_this.onMarkerShapeChange,_this),_this.addEventListener("change",_this.update),_this.item.addEventListener("change",(function(){return _this.fireEvent({type:"change"})})),_this.item.addEventListener("layoutChange",(function(){return _this.fireEvent({type:"layoutChange"})})),_this}return __extends$1x(Legend,_super),Object.defineProperty(Legend.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Legend.prototype.onDataChange=function(event){this.group.visible=event.value.length>0&&this.enabled},Legend.prototype.onEnabledChange=function(event){this.group.visible=event.value&&this.data.length>0},Legend.prototype.onPositionChange=function(event){switch(event.value){case"right":case"left":this.orientation=LegendOrientation.Vertical;break;case"bottom":case"top":this.orientation=LegendOrientation.Horizontal}},Legend.prototype.onMarkerShapeChange=function(){this.itemSelection=this.itemSelection.setData([]),this.itemSelection.exit.remove(),this.group.scene&&(this.group.scene.dirty=!1)},Legend.prototype.performLayout=function(width,height){var item=this.item,marker=item.marker,paddingX=item.paddingX,paddingY=item.paddingY,updateSelection=this.itemSelection.setData(this.data,(function(_,datum){var MarkerShape=getMarker$1(marker.shape||datum.marker.shape);return datum.id+"-"+datum.itemId+"-"+MarkerShape.name}));updateSelection.exit.remove();var enterSelection=updateSelection.enter.append(MarkerLabel).each((function(node,datum){var MarkerShape=getMarker$1(marker.shape||datum.marker.shape);node.marker=new MarkerShape})),itemSelection=this.itemSelection=updateSelection.merge(enterSelection),itemCount=itemSelection.size,bboxes=[],itemMarker=this.item.marker,itemLabel=this.item.label;itemSelection.each((function(markerLabel,datum){markerLabel.markerSize=itemMarker.size,markerLabel.spacing=itemMarker.padding,markerLabel.fontStyle=itemLabel.fontStyle,markerLabel.fontWeight=itemLabel.fontWeight,markerLabel.fontSize=itemLabel.fontSize,markerLabel.fontFamily=itemLabel.fontFamily;var text=datum.label.text;text.length>25&&(text=text.substring(0,22)+"..."),markerLabel.text=text,bboxes.push(markerLabel.computeBBox())}));var itemHeight=bboxes.length&&bboxes[0].height,rowCount=0,columnWidth=0,paddedItemsWidth=0,paddedItemsHeight=0;switch(width=Math.max(1,width),height=Math.max(1,height),this.orientation){case LegendOrientation.Horizontal:if(!(isFinite(width)&&width>0))return!1;rowCount=0;var columnCount=0;do{var itemsWidth=0;columnCount=0,columnWidth=0,rowCount++;for(var i=0;i<itemCount;){(bbox=bboxes[i]).width>columnWidth&&(columnWidth=bbox.width),++i%rowCount==0&&(itemsWidth+=columnWidth,columnWidth=0,columnCount++)}i%rowCount!=0&&(itemsWidth+=columnWidth,columnCount++),paddedItemsWidth=itemsWidth+(columnCount-1)*paddingX}while(paddedItemsWidth>width&&columnCount>1);paddedItemsHeight=itemHeight*rowCount+(rowCount-1)*paddingY;break;case LegendOrientation.Vertical:if(!(isFinite(height)&&height>0))return!1;rowCount=2*itemCount;do{rowCount=(rowCount>>1)+rowCount%2,columnWidth=0;itemsWidth=0;var itemsHeight=0,columnCount_1=0;for(i=0;i<itemCount;){var bbox=bboxes[i];columnCount_1||(itemsHeight+=bbox.height),bbox.width>columnWidth&&(columnWidth=bbox.width),++i%rowCount==0&&(itemsWidth+=columnWidth,columnWidth=0,columnCount_1++)}i%rowCount!=0&&(itemsWidth+=columnWidth,columnCount_1++),paddedItemsWidth=itemsWidth+(columnCount_1-1)*paddingX,paddedItemsHeight=itemsHeight+(rowCount-1)*paddingY}while(paddedItemsHeight>height&&rowCount>1)}var startX=(width-paddedItemsWidth)/2,startY=(height-paddedItemsHeight)/2,x=0,y=0;columnWidth=0,itemSelection.each((function(markerLabel,datum,i){markerLabel.translationX=Math.floor(startX+x),markerLabel.translationY=Math.floor(startY+y);var bbox=bboxes[i];bbox.width>columnWidth&&(columnWidth=bbox.width),(i+1)%rowCount==0?(x+=columnWidth+paddingX,y=0,columnWidth=0):y+=bbox.height+paddingY})),this.update();var size=this._size,oldSize=this.oldSize;size[0]=paddedItemsWidth,size[1]=paddedItemsHeight,size[0]===oldSize[0]&&size[1]===oldSize[1]||(oldSize[0]=size[0],oldSize[1]=size[1])},Legend.prototype.update=function(){var _this=this;this.itemSelection.each((function(markerLabel,datum){var marker=datum.marker;markerLabel.markerFill=marker.fill,markerLabel.markerStroke=marker.stroke,markerLabel.markerStrokeWidth=_this.item.marker.strokeWidth,markerLabel.markerFillOpacity=marker.fillOpacity,markerLabel.markerStrokeOpacity=marker.strokeOpacity,markerLabel.opacity=datum.enabled?1:.5,markerLabel.color=_this.item.label.color}))},Legend.prototype.getDatumForPoint=function(x,y){var node=this.group.pickNode(x,y);if(node&&node.parent)return node.parent.datum},Legend.className="Legend",__decorate$K([reactive$1("layoutChange")],Legend.prototype,"data",void 0),__decorate$K([reactive$1("layoutChange")],Legend.prototype,"enabled",void 0),__decorate$K([reactive$1("layoutChange")],Legend.prototype,"orientation",void 0),__decorate$K([reactive$1("layoutChange")],Legend.prototype,"position",void 0),__decorate$K([reactive$1("layoutChange")],Legend.prototype,"spacing",void 0),Legend}(Observable$1),__values$6=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},SizeMonitor=function(){function SizeMonitor(){}return SizeMonitor.init=function(){var _this=this,NativeResizeObserver=window.ResizeObserver;if(NativeResizeObserver)this.resizeObserver=new NativeResizeObserver((function(entries){var e_1,_a;try{for(var entries_1=__values$6(entries),entries_1_1=entries_1.next();!entries_1_1.done;entries_1_1=entries_1.next()){var entry=entries_1_1.value,_b=entry.contentRect,width=_b.width,height=_b.height;_this.checkSize(_this.elements.get(entry.target),entry.target,width,height)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{entries_1_1&&!entries_1_1.done&&(_a=entries_1.return)&&_a.call(entries_1)}finally{if(e_1)throw e_1.error}}}));else{window.setInterval((function(){_this.elements.forEach((function(entry,element){_this.checkClientSize(element,entry)}))}),100)}this.ready=!0},SizeMonitor.checkSize=function(entry,element,width,height){entry&&(entry.size&&width===entry.size.width&&height===entry.size.height||(entry.size={width,height},entry.cb(entry.size,element)))},SizeMonitor.observe=function(element,cb){this.ready||this.init(),this.unobserve(element),this.resizeObserver&&this.resizeObserver.observe(element),this.elements.set(element,{cb}),this.checkClientSize(element,{cb})},SizeMonitor.unobserve=function(element){this.resizeObserver&&this.resizeObserver.unobserve(element),this.elements.delete(element)},SizeMonitor.checkClientSize=function(element,entry){var width=element.clientWidth?element.clientWidth:0,height=element.clientHeight?element.clientHeight:0;this.checkSize(entry,element,width,height)},SizeMonitor.elements=new Map,SizeMonitor.ready=!1,SizeMonitor}();function circleRectOverlap(cx,cy,r,x,y,w,h){var dx=cx-(cx<x?x:cx>x+w?x+w:cx),dy=cy-(cy<y?y:cy>y+h?y+h:cy);return Math.sqrt(dx*dx+dy*dy)<=r}var __extends$1y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$7=function(){return __assign$7=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$7.apply(this,arguments)},__decorate$L=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__values$7=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};function toTooltipHtml$1(input,defaults){if("string"==typeof input)return input;defaults=defaults||{};var _a=input.content,content=void 0===_a?defaults.content||"":_a,_b=input.title,title=void 0===_b?defaults.title||void 0:_b,_c=input.color,color=void 0===_c?defaults.color||"white":_c,_d=input.backgroundColor,backgroundColor=void 0===_d?defaults.backgroundColor||"#888":_d;return(title?'<div class="'+Chart.defaultTooltipClass+'-title"\n        style="color: '+color+"; background-color: "+backgroundColor+'">'+title+"</div>":"")+'<div class="'+Chart.defaultTooltipClass+'-content">'+content+"</div>"}var ChartTooltip=function(_super){function ChartTooltip(chart,document){var _this=_super.call(this)||this;_this.enabled=!0,_this.class=Chart.defaultTooltipClass,_this.delay=0,_this.tracking=!0,_this.showTimeout=0,_this.constrained=!1,_this.chart=chart,_this.class="";var tooltipRoot=document.body,element=document.createElement("div");if(_this.element=tooltipRoot.appendChild(element),window.IntersectionObserver){var target_1=_this.chart.scene.canvas.element,observer=new IntersectionObserver((function(entries){var e_1,_a;try{for(var entries_1=__values$7(entries),entries_1_1=entries_1.next();!entries_1_1.done;entries_1_1=entries_1.next()){var entry=entries_1_1.value;entry.target===target_1&&0===entry.intersectionRatio&&_this.toggle(!1)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{entries_1_1&&!entries_1_1.done&&(_a=entries_1.return)&&_a.call(entries_1)}finally{if(e_1)throw e_1.error}}}),{root:tooltipRoot});observer.observe(target_1),_this.observer=observer}return _this}return __extends$1y(ChartTooltip,_super),ChartTooltip.prototype.destroy=function(){var parentNode=this.element.parentNode;parentNode&&parentNode.removeChild(this.element),this.observer&&this.observer.unobserve(this.chart.scene.canvas.element)},ChartTooltip.prototype.isVisible=function(){var element=this.element;if(element.classList)return!element.classList.contains(Chart.defaultTooltipClass+"-hidden");var classes=element.getAttribute("class");return!!classes&&classes.split(" ").indexOf(Chart.defaultTooltipClass+"-hidden")<0},ChartTooltip.prototype.updateClass=function(visible,constrained){var classList=[Chart.defaultTooltipClass,this.class];!0!==visible&&classList.push(Chart.defaultTooltipClass+"-hidden"),!0!==constrained&&classList.push(Chart.defaultTooltipClass+"-arrow"),this.element.setAttribute("class",classList.join(" "))},ChartTooltip.prototype.show=function(meta,html,instantly){var _this=this;void 0===instantly&&(instantly=!1);var el=this.element;if(void 0!==html)el.innerHTML=html;else if(!el.innerHTML)return;var left=meta.pageX-el.clientWidth/2,top=meta.pageY-el.clientHeight-8;if(this.constrained=!1,this.chart.container){var tooltipRect=el.getBoundingClientRect(),maxLeft=window.innerWidth-tooltipRect.width-1;left<0?(left=0,this.updateClass(!0,this.constrained=!0)):left>maxLeft&&(left=maxLeft,this.updateClass(!0,this.constrained=!0)),top<window.pageYOffset&&(top=meta.pageY+20,this.updateClass(!0,this.constrained=!0))}if(el.style.left=Math.round(left)+"px",el.style.top=Math.round(top)+"px",this.delay>0&&!instantly)return this.toggle(!1),void(this.showTimeout=window.setTimeout((function(){_this.toggle(!0)}),this.delay));this.toggle(!0)},ChartTooltip.prototype.toggle=function(visible){visible||(window.clearTimeout(this.showTimeout),this.chart.lastPick&&!this.delay&&(this.chart.dehighlightDatum(),this.chart.lastPick=void 0)),this.updateClass(visible,this.constrained)},__decorate$L([reactive$1()],ChartTooltip.prototype,"enabled",void 0),__decorate$L([reactive$1()],ChartTooltip.prototype,"class",void 0),__decorate$L([reactive$1()],ChartTooltip.prototype,"delay",void 0),__decorate$L([reactive$1()],ChartTooltip.prototype,"tracking",void 0),ChartTooltip}(Observable$1),Chart=function(_super){function Chart(document){void 0===document&&(document=window.document);var _this=_super.call(this)||this;_this.id=createId$1(_this),_this.background=new Rect,_this.legend=new Legend,_this.legendAutoPadding=new Padding$1,_this.captionAutoPadding=0,_this._container=void 0,_this._data=[],_this._autoSize=!1,_this.padding=new Padding$1(20),_this._axes=[],_this._series=[],_this._axesChanged=!1,_this._seriesChanged=!1,_this.layoutCallbackId=0,_this._performLayout=function(){_this.layoutCallbackId=0,_this.background.width=_this.width,_this.background.height=_this.height,_this.performLayout(),_this.layoutPending||_this.fireEvent({type:"layoutDone"})},_this.dataCallbackId=0,_this.nodeData=new Map,_this.updateCallbackId=0,_this.legendBBox=new BBox$1(0,0,0,0),_this._onMouseDown=_this.onMouseDown.bind(_this),_this._onMouseMove=_this.onMouseMove.bind(_this),_this._onMouseUp=_this.onMouseUp.bind(_this),_this._onMouseOut=_this.onMouseOut.bind(_this),_this._onClick=_this.onClick.bind(_this),_this.pointerInsideLegend=!1,_this.pointerOverLegendDatum=!1;var root=new Group$1,background=_this.background;background.fill="white",root.appendChild(background);var element=_this._element=document.createElement("div");element.setAttribute("class","ag-chart-wrapper");var scene=new Scene$1(document);_this.scene=scene,_this.autoSize=!0,scene.root=root,scene.container=element,_this.padding.addEventListener("layoutChange",_this.scheduleLayout,_this);var legend=_this.legend;if(legend.addEventListener("layoutChange",_this.scheduleLayout,_this),legend.item.label.addPropertyListener("formatter",_this.updateLegend,_this),legend.addPropertyListener("position",_this.onLegendPositionChange,_this),_this.tooltip=new ChartTooltip(_this,document),_this.tooltip.addPropertyListener("class",(function(){return _this.tooltip.toggle()})),Chart.tooltipDocuments.indexOf(document)<0){var styleElement=document.createElement("style");styleElement.innerHTML='\n.ag-chart-tooltip {\n    display: table;\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: black;\n    background: rgb(244, 244, 244);\n    border-radius: 5px;\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\n}\n\n.ag-chart-tooltip-hidden {\n    top: -10000px !important;\n}\n\n.ag-chart-tooltip-title {\n    font-weight: bold;\n    padding: 7px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    color: white;\n    background-color: #888888;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n.ag-chart-tooltip-content {\n    padding: 7px;\n    line-height: 1.7em;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    overflow: hidden;\n}\n\n.ag-chart-tooltip-content:empty {\n    padding: 0;\n    height: 7px;\n}\n\n.ag-chart-tooltip-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 6px solid #989898;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: #989898;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid black;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: rgb(244, 244, 244);\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n',document.head.insertBefore(styleElement,document.head.querySelector("style")),Chart.tooltipDocuments.push(document)}return _this.setupDomListeners(scene.canvas.element),_this.addPropertyListener("title",_this.onCaptionChange),_this.addPropertyListener("subtitle",_this.onCaptionChange),_this.addEventListener("layoutChange",_this.scheduleLayout),_this}return __extends$1y(Chart,_super),Object.defineProperty(Chart.prototype,"container",{get:function(){return this._container},set:function(value){if(this._container!==value){var parentNode=this.element.parentNode;null!=parentNode&&parentNode.removeChild(this.element),value&&value.appendChild(this.element),this._container=value}},enumerable:!0,configurable:!0}),Object.defineProperty(Chart.prototype,"data",{get:function(){return this._data},set:function(data){this._data=data,this.series.forEach((function(series){return series.data=data}))},enumerable:!0,configurable:!0}),Object.defineProperty(Chart.prototype,"width",{get:function(){return this.scene.width},set:function(value){this.autoSize=!1,this.width!==value&&(this.scene.resize(value,this.height),this.fireEvent({type:"layoutChange"}))},enumerable:!0,configurable:!0}),Object.defineProperty(Chart.prototype,"height",{get:function(){return this.scene.height},set:function(value){this.autoSize=!1,this.height!==value&&(this.scene.resize(this.width,value),this.fireEvent({type:"layoutChange"}))},enumerable:!0,configurable:!0}),Object.defineProperty(Chart.prototype,"autoSize",{get:function(){return this._autoSize},set:function(value){if(this._autoSize!==value){this._autoSize=value;var style=this.element.style;if(value){var chart_1=this;SizeMonitor.observe(this.element,(function(size){size.width===chart_1.width&&size.height===chart_1.height||(chart_1.scene.resize(size.width,size.height),chart_1.fireEvent({type:"layoutChange"}))})),style.display="block",style.width="100%",style.height="100%"}else SizeMonitor.unobserve(this.element),style.display="inline-block",style.width="auto",style.height="auto"}},enumerable:!0,configurable:!0}),Chart.prototype.download=function(fileName){this.scene.download(fileName)},Chart.prototype.destroy=function(){this.tooltip.destroy(),SizeMonitor.unobserve(this.element),this.container=void 0,this.cleanupDomListeners(this.scene.canvas.element),this.scene.container=void 0},Chart.prototype.onLegendPositionChange=function(){this.legendAutoPadding.clear(),this.layoutPending=!0},Chart.prototype.onCaptionChange=function(event){var value=event.value,oldValue=event.oldValue;oldValue&&(oldValue.removeEventListener("change",this.scheduleLayout,this),this.scene.root.removeChild(oldValue.node)),value&&(value.addEventListener("change",this.scheduleLayout,this),this.scene.root.appendChild(value.node))},Object.defineProperty(Chart.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(Chart.prototype,"axes",{get:function(){return this._axes},set:function(values){var _this=this;this._axes.forEach((function(axis){return _this.detachAxis(axis)})),this._axes=values.filter((function(a){return!a.linkedTo})).concat(values.filter((function(a){return a.linkedTo}))),this._axes.forEach((function(axis){return _this.attachAxis(axis)})),this.axesChanged=!0},enumerable:!0,configurable:!0}),Chart.prototype.attachAxis=function(axis){this.scene.root.insertBefore(axis.group,this.seriesRoot)},Chart.prototype.detachAxis=function(axis){this.scene.root.removeChild(axis.group)},Object.defineProperty(Chart.prototype,"series",{get:function(){return this._series},set:function(values){var _this=this;this.removeAllSeries(),values.forEach((function(series){return _this.addSeries(series)}))},enumerable:!0,configurable:!0}),Chart.prototype.scheduleLayout=function(){this.layoutPending=!0},Chart.prototype.scheduleData=function(){this.dehighlightDatum(),this.dataPending=!0},Chart.prototype.addSeries=function(series,before){var allSeries=this.series,seriesRoot=this.seriesRoot;if(allSeries.indexOf(series)<0){var beforeIndex=before?allSeries.indexOf(before):-1;return beforeIndex>=0?(allSeries.splice(beforeIndex,0,series),seriesRoot.insertBefore(series.group,before.group)):(allSeries.push(series),seriesRoot.append(series.group)),this.initSeries(series),this.seriesChanged=!0,this.axesChanged=!0,!0}return!1},Chart.prototype.initSeries=function(series){series.chart=this,series.data||(series.data=this.data),series.addEventListener("layoutChange",this.scheduleLayout,this),series.addEventListener("dataChange",this.scheduleData,this),series.addEventListener("legendChange",this.updateLegend,this),series.addEventListener("nodeClick",this.onSeriesNodeClick,this)},Chart.prototype.freeSeries=function(series){series.chart=void 0,series.removeEventListener("layoutChange",this.scheduleLayout,this),series.removeEventListener("dataChange",this.scheduleData,this),series.removeEventListener("legendChange",this.updateLegend,this),series.removeEventListener("nodeClick",this.onSeriesNodeClick,this)},Chart.prototype.addSeriesAfter=function(series,after){var allSeries=this.series,seriesRoot=this.seriesRoot;if(allSeries.indexOf(series)<0){var afterIndex=after?this.series.indexOf(after):-1;afterIndex>=0?(afterIndex+1<allSeries.length?seriesRoot.insertBefore(series.group,allSeries[afterIndex+1].group):seriesRoot.append(series.group),this.initSeries(series),allSeries.splice(afterIndex+1,0,series)):(allSeries.length>0?seriesRoot.insertBefore(series.group,allSeries[0].group):seriesRoot.append(series.group),this.initSeries(series),allSeries.unshift(series)),this.seriesChanged=!0,this.axesChanged=!0}return!1},Chart.prototype.removeSeries=function(series){var index=this.series.indexOf(series);return index>=0&&(this.series.splice(index,1),this.freeSeries(series),this.seriesRoot.removeChild(series.group),this.seriesChanged=!0,!0)},Chart.prototype.removeAllSeries=function(){var _this=this;this.series.forEach((function(series){_this.freeSeries(series),_this.seriesRoot.removeChild(series.group)})),this._series=[],this.seriesChanged=!0},Chart.prototype.assignSeriesToAxes=function(){var _this=this;this.axes.forEach((function(axis){var axisName=axis.direction+"Axis",boundSeries=[];_this.series.forEach((function(series){series[axisName]===axis&&boundSeries.push(series)})),axis.boundSeries=boundSeries})),this.seriesChanged=!1},Chart.prototype.assignAxesToSeries=function(force){var _this=this;void 0===force&&(force=!1);var directionToAxesMap={};this.axes.forEach((function(axis){var direction=axis.direction;(directionToAxesMap[direction]||(directionToAxesMap[direction]=[])).push(axis)})),this.series.forEach((function(series){series.directions.forEach((function(direction){var axisName=direction+"Axis";if(!series[axisName]||force){var directionAxes=directionToAxesMap[direction];if(directionAxes){var axis=_this.findMatchingAxis(directionAxes,series.getKeys(direction));axis&&(series[axisName]=axis)}}}))})),this.axesChanged=!1},Chart.prototype.findMatchingAxis=function(directionAxes,directionKeys){for(var i=0;i<directionAxes.length;i++){var axis=directionAxes[i],axisKeys=axis.keys;if(!axisKeys.length)return axis;if(directionKeys)for(var j=0;j<directionKeys.length;j++)if(axisKeys.indexOf(directionKeys[j])>=0)return axis}},Object.defineProperty(Chart.prototype,"axesChanged",{get:function(){return this._axesChanged},set:function(value){this._axesChanged=value},enumerable:!0,configurable:!0}),Object.defineProperty(Chart.prototype,"seriesChanged",{get:function(){return this._seriesChanged},set:function(value){this._seriesChanged=value,value&&(this.dataPending=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Chart.prototype,"layoutPending",{get:function(){return!!this.layoutCallbackId},set:function(value){value?this.layoutCallbackId||this.dataPending||(this.layoutCallbackId=requestAnimationFrame(this._performLayout),this.series.forEach((function(s){return s.nodeDataPending=!0}))):this.layoutCallbackId&&(cancelAnimationFrame(this.layoutCallbackId),this.layoutCallbackId=0)},enumerable:!0,configurable:!0}),Object.defineProperty(Chart.prototype,"dataPending",{get:function(){return!!this.dataCallbackId},set:function(value){var _this=this;this.dataCallbackId&&(clearTimeout(this.dataCallbackId),this.dataCallbackId=0),value&&(this.dataCallbackId=window.setTimeout((function(){_this.dataPending=!1,_this.processData()}),0))},enumerable:!0,configurable:!0}),Chart.prototype.processData=function(){this.layoutPending=!1,this.axesChanged&&(this.assignAxesToSeries(!0),this.assignSeriesToAxes()),this.seriesChanged&&this.assignSeriesToAxes(),this.series.forEach((function(s){return s.processData()})),this.updateLegend(),this.layoutPending=!0},Chart.prototype.createNodeData=function(){var _this=this;this.nodeData.clear(),this.series.forEach((function(s){var data=s.visible?s.createNodeData():[];_this.nodeData.set(s,data)}))},Chart.prototype.placeLabels=function(){var series=[],data=[];this.nodeData.forEach((function(d,s){s.visible&&s.label.enabled&&(series.push(s),data.push(s.getLabelData()))}));var seriesRect=this.seriesRect,labels=seriesRect?function placeLabels(data,bounds,padding){void 0===padding&&(padding=5);var result=[];data=data.map((function(d){return d.slice().sort((function(a,b){return b.size-a.size}))}));for(var j=0;j<data.length;j++){var labels=result[j]=[],datum=data[j];if(datum&&datum.length&&datum[0].label)for(var _loop_1=function(i,ln){var r1x,r1y,r1w,r1h,r2x,r2y,d=datum[i],l=d.label,r=.5*d.size,x=d.point.x-.5*l.width,y=d.point.y-r-l.height-padding,width=l.width,height=l.height;if(bounds&&(r1x=bounds.x,r1y=bounds.y,r1w=bounds.width,r1h=bounds.height,r2y=y,!((r2x=x)+width<r1x+r1w&&r2x>r1x&&r2y>r1y&&r2y+height<r1y+r1h)))return"continue";var overlapPoints=data.some((function(datum){return datum.some((function(d){return circleRectOverlap(d.point.x,d.point.y,.5*d.size,x,y,width,height)}))}));if(overlapPoints)return"continue";var overlapLabels=result.some((function(labels){return labels.some((function(l){return x1=l.x,y1=l.y,w1=l.width,h1=l.height,y2=y,x1+w1>(x2=x)&&x1<x2+width&&y1+h1>y2&&y1<y2+height;var x1,y1,w1,h1,x2,y2}))}));if(overlapLabels)return"continue";labels.push({index:i,text:l.text,x,y,width,height})},i=0,ln=datum.length;i<ln;i++)_loop_1(i)}return result}(data,{x:0,y:0,width:seriesRect.width,height:seriesRect.height}):[];return new Map(labels.map((function(l,i){return[series[i],l]})))},Chart.prototype.updateLegend=function(){var legendData=[];this.series.filter((function(s){return s.showInLegend})).forEach((function(series){return series.listSeriesItems(legendData)}));var formatter=this.legend.item.label.formatter;formatter&&legendData.forEach((function(datum){return datum.label.text=formatter({id:datum.id,itemId:datum.itemId,value:datum.label.text})})),this.legend.data=legendData},Object.defineProperty(Chart.prototype,"updatePending",{get:function(){return!!this.updateCallbackId},set:function(value){var _this=this;this.updateCallbackId&&(clearTimeout(this.updateCallbackId),this.updateCallbackId=0),value&&!this.layoutPending&&(this.updateCallbackId=window.setTimeout((function(){_this.update()}),0))},enumerable:!0,configurable:!0}),Chart.prototype.update=function(){this.updatePending=!1,this.series.forEach((function(series){series.updatePending&&series.update()}))},Chart.prototype.positionCaptions=function(){var title=this.title,subtitle=this.subtitle,titleVisible=!1,subtitleVisible=!1,paddingTop=10;if(title&&title.enabled){title.node.x=this.width/2,title.node.y=paddingTop,titleVisible=!0;var titleBBox=title.node.computeBBox();if(titleBBox&&(paddingTop=titleBBox.y+titleBBox.height),subtitle&&subtitle.enabled){subtitle.node.x=this.width/2,subtitle.node.y=paddingTop+10,subtitleVisible=!0;var subtitleBBox=subtitle.node.computeBBox();subtitleBBox&&(paddingTop=subtitleBBox.y+subtitleBBox.height)}}title&&(title.node.visible=titleVisible),subtitle&&(subtitle.node.visible=subtitleVisible),this.captionAutoPadding=Math.floor(paddingTop)},Chart.prototype.positionLegend=function(){if(this.legend.enabled&&this.legend.data.length){var legendBBox,legend=this.legend,captionAutoPadding=this.captionAutoPadding,legendAutoPadding=this.legendAutoPadding,width=this.width,height=this.height-captionAutoPadding,legendGroup=legend.group,legendSpacing=legend.spacing,translationX=0,translationY=0;switch(legend.position){case"bottom":legend.performLayout(width-2*legendSpacing,0),legendBBox=legendGroup.computeBBox(),legendGroup.visible=legendBBox.height<Math.floor(.5*height),legendGroup.visible?(translationX=(width-legendBBox.width)/2-legendBBox.x,translationY=captionAutoPadding+height-legendBBox.height-legendBBox.y-legendSpacing,legendAutoPadding.bottom=legendBBox.height):legendAutoPadding.bottom=0;break;case"top":legend.performLayout(width-2*legendSpacing,0),legendBBox=legendGroup.computeBBox(),legendGroup.visible=legendBBox.height<Math.floor(.5*height),legendGroup.visible?(translationX=(width-legendBBox.width)/2-legendBBox.x,translationY=captionAutoPadding+legendSpacing-legendBBox.y,legendAutoPadding.top=legendBBox.height):legendAutoPadding.top=0;break;case"left":legend.performLayout(0,height-2*legendSpacing),legendBBox=legendGroup.computeBBox(),legendGroup.visible=legendBBox.width<Math.floor(.5*width),legendGroup.visible?(translationX=legendSpacing-legendBBox.x,translationY=captionAutoPadding+(height-legendBBox.height)/2-legendBBox.y,legendAutoPadding.left=legendBBox.width):legendAutoPadding.left=0;break;default:legend.performLayout(0,height-2*legendSpacing),legendBBox=legendGroup.computeBBox(),legendGroup.visible=legendBBox.width<Math.floor(.5*width),legendGroup.visible?(translationX=width-legendBBox.width-legendBBox.x-legendSpacing,translationY=captionAutoPadding+(height-legendBBox.height)/2-legendBBox.y,legendAutoPadding.right=legendBBox.width):legendAutoPadding.right=0}legendGroup.visible&&(legendGroup.translationX=Math.floor(translationX+legendGroup.translationX),legendGroup.translationY=Math.floor(translationY+legendGroup.translationY),this.legendBBox=legendGroup.computeBBox())}},Chart.prototype.setupDomListeners=function(chartElement){chartElement.addEventListener("mousedown",this._onMouseDown),chartElement.addEventListener("mousemove",this._onMouseMove),chartElement.addEventListener("mouseup",this._onMouseUp),chartElement.addEventListener("mouseout",this._onMouseOut),chartElement.addEventListener("click",this._onClick)},Chart.prototype.cleanupDomListeners=function(chartElement){chartElement.removeEventListener("mousedown",this._onMouseDown),chartElement.removeEventListener("mousemove",this._onMouseMove),chartElement.removeEventListener("mouseup",this._onMouseUp),chartElement.removeEventListener("mouseout",this._onMouseOut),chartElement.removeEventListener("click",this._onClick)},Chart.prototype.getSeriesRect=function(){return this.seriesRect},Chart.prototype.pickSeriesNode=function(x,y){if(this.seriesRect&&this.seriesRect.containsPoint(x,y))for(var allSeries=this.series,node=void 0,i=allSeries.length-1;i>=0;i--){var series=allSeries[i];if(series.visible&&series.group.visible&&(node=series.pickGroup.pickNode(x,y)))return{series,node}}},Chart.prototype.pickClosestSeriesNodeDatum=function(x,y){if(this.seriesRect&&this.seriesRect.containsPoint(x,y)){for(var closestDatum,allSeries=this.series,minDistance=1/0,_loop_1=function(i){var series=allSeries[i];if(!series.visible||!series.group.visible)return"continue";var hitPoint=series.group.transformPoint(x,y);series.getNodeData().forEach((function(datum){var _a,_b;if(datum.point){var xAxis=series.xAxis,yAxis=series.yAxis;if((null===(_a=xAxis)||void 0===_a?void 0:_a.inRange(datum.point.x))&&(null===(_b=yAxis)||void 0===_b?void 0:_b.inRange(datum.point.y))){var distance=function getDistance(p1,p2){return Math.sqrt(Math.pow(p1.x-p2.x,2)+Math.pow(p1.y-p2.y,2))}(hitPoint,datum.point);distance<minDistance&&(minDistance=distance,closestDatum=datum)}}}))},i=allSeries.length-1;i>=0;i--)_loop_1(i);return closestDatum}},Chart.prototype.onMouseMove=function(event){this.handleLegendMouseMove(event),this.tooltip.enabled&&(this.tooltip.delay>0&&this.tooltip.toggle(!1),this.handleTooltip(event))},Chart.prototype.handleTooltip=function(event){var nodeDatum,lastPick=this.lastPick,tooltipTracking=this.tooltip.tracking,offsetX=event.offsetX,offsetY=event.offsetY,pick=this.pickSeriesNode(offsetX,offsetY);if(pick&&pick.node instanceof Shape$1){var node=pick.node;if(nodeDatum=node.datum,lastPick&&lastPick.datum===nodeDatum&&(lastPick.node=node,lastPick.event=event),!node.datum.point||!tooltipTracking)return void(lastPick&&lastPick.node===node?pick.series.tooltip.enabled&&this.tooltip.show(event):this.onSeriesDatumPick(event,node.datum,node,event))}var hideTooltip=!1;if(tooltipTracking){var closestDatum=this.pickClosestSeriesNodeDatum(offsetX,offsetY);if(closestDatum&&closestDatum.point){var _b=closestDatum.point,x=_b.x,y=_b.y,canvas=this.scene.canvas,point=closestDatum.series.group.inverseTransformPoint(x,y),canvasRect=canvas.element.getBoundingClientRect();this.onSeriesDatumPick({pageX:Math.round(canvasRect.left+window.pageXOffset+point.x),pageY:Math.round(canvasRect.top+window.pageYOffset+point.y)},closestDatum,nodeDatum===closestDatum&&pick?pick.node:void 0,event)}else hideTooltip=!0}!lastPick||!hideTooltip&&tooltipTracking||(this.dehighlightDatum(),this.tooltip.toggle(!1),this.lastPick=void 0)},Chart.prototype.onMouseDown=function(event){},Chart.prototype.onMouseUp=function(event){},Chart.prototype.onMouseOut=function(event){this.tooltip.toggle(!1)},Chart.prototype.onClick=function(event){this.checkSeriesNodeClick()||this.checkLegendClick(event)||this.fireEvent({type:"click",event})},Chart.prototype.checkSeriesNodeClick=function(){var lastPick=this.lastPick;if(lastPick&&lastPick.event&&lastPick.node){var event_1=lastPick.event,datum=lastPick.datum;return datum.series.fireNodeClickEvent(event_1,datum),!0}return!1},Chart.prototype.onSeriesNodeClick=function(event){this.fireEvent(__assign$7(__assign$7({},event),{type:"seriesNodeClick"}))},Chart.prototype.checkLegendClick=function(event){var datum=this.legend.getDatumForPoint(event.offsetX,event.offsetY);if(datum){var id_1=datum.id,itemId=datum.itemId,enabled=datum.enabled,series=find(this.series,(function(series){return series.id===id_1}));if(series)return series.toggleSeriesItem(itemId,!enabled),enabled&&this.tooltip.toggle(!1),this.legend.fireEvent({type:"click",event,itemId,enabled:!enabled}),!0}return!1},Chart.prototype.handleLegendMouseMove=function(event){if(this.legend.enabled){var offsetX=event.offsetX,offsetY=event.offsetY,datum=this.legend.getDatumForPoint(offsetX,offsetY),pointerInsideLegend=this.legendBBox.containsPoint(offsetX,offsetY),pointerOverLegendDatum=pointerInsideLegend&&void 0!==datum;if(!pointerInsideLegend&&this.pointerInsideLegend)return this.pointerInsideLegend=!1,this.element.style.cursor="default",void this.dehighlightDatum();pointerOverLegendDatum&&!this.pointerOverLegendDatum&&(this.element.style.cursor="pointer"),!pointerOverLegendDatum&&this.pointerOverLegendDatum&&(this.element.style.cursor="default"),this.pointerInsideLegend=pointerInsideLegend,this.pointerOverLegendDatum=pointerOverLegendDatum;var oldHighlightedDatum=this.highlightedDatum;if(datum){var id_2=datum.id,itemId=datum.itemId;if(datum.enabled){var series=find(this.series,(function(series){return series.id===id_2}));series&&(this.highlightedDatum={series,itemId,datum:void 0})}}(this.highlightedDatum&&!oldHighlightedDatum||this.highlightedDatum&&oldHighlightedDatum&&(this.highlightedDatum.series!==oldHighlightedDatum.series||this.highlightedDatum.itemId!==oldHighlightedDatum.itemId))&&this.series.forEach((function(s){return s.updatePending=!0}))}},Chart.prototype.onSeriesDatumPick=function(meta,datum,node,event){var lastPick=this.lastPick;if(lastPick){if(lastPick.datum===datum)return;this.dehighlightDatum()}this.lastPick={datum,node,event},this.highlightDatum(datum);var html=datum.series.tooltip.enabled&&datum.series.getTooltipHtml(datum);html&&this.tooltip.show(meta,html)},Chart.prototype.highlightDatum=function(datum){this.element.style.cursor=datum.series.cursor,this.highlightedDatum=datum,this.series.forEach((function(s){return s.updatePending=!0}))},Chart.prototype.dehighlightDatum=function(){this.highlightedDatum&&(this.highlightedDatum=void 0,this.series.forEach((function(s){return s.updatePending=!0})))},Chart.defaultTooltipClass="ag-chart-tooltip",Chart.tooltipDocuments=[],__decorate$L([reactive$1("layoutChange")],Chart.prototype,"title",void 0),__decorate$L([reactive$1("layoutChange")],Chart.prototype,"subtitle",void 0),Chart}(Observable$1),__extends$1z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ClipRect=function(_super){function ClipRect(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.isContainerNode=!0,_this.path=new Path2D$1,_this._enabled=!0,_this._dirtyPath=!0,_this._x=0,_this._y=0,_this._width=10,_this._height=10,_this}return __extends$1z(ClipRect,_super),ClipRect.prototype.containsPoint=function(x,y){var point=this.transformPoint(x,y);return point.x>=this.x&&point.x<=this.x+this.width&&point.y>=this.y&&point.y<=this.y+this.height},Object.defineProperty(ClipRect.prototype,"enabled",{get:function(){return this._enabled},set:function(value){this._enabled!==value&&(this._enabled=value,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(ClipRect.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(value){this._dirtyPath!==value&&(this._dirtyPath=value,value&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(ClipRect.prototype,"x",{get:function(){return this._x},set:function(value){this._x!==value&&(this._x=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(ClipRect.prototype,"y",{get:function(){return this._y},set:function(value){this._y!==value&&(this._y=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(ClipRect.prototype,"width",{get:function(){return this._width},set:function(value){this._width!==value&&(this._width=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(ClipRect.prototype,"height",{get:function(){return this._height},set:function(value){this._height!==value&&(this._height=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),ClipRect.prototype.updatePath=function(){var path=this.path;path.clear(),path.rect(this.x,this.y,this.width,this.height),this.dirtyPath=!1},ClipRect.prototype.computeBBox=function(){var x=this.x,y=this.y,width=this.width,height=this.height;return new BBox$1(x,y,width,height)},ClipRect.prototype.render=function(ctx){this.enabled&&(this.dirtyPath&&this.updatePath(),this.path.draw(ctx),ctx.clip());for(var children=this.children,n=children.length,i=0;i<n;i++){ctx.save();var child=children[i];child.visible&&child.render(ctx),ctx.restore()}},ClipRect.className="ClipRect",ClipRect}(Node$1),__extends$1A=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),RangeHandle=function(_super){function RangeHandle(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._fill="#f2f2f2",_this._stroke="#999999",_this._strokeWidth=1,_this._lineCap="square",_this._centerX=0,_this._centerY=0,_this._width=8,_this._gripLineGap=2,_this._gripLineLength=8,_this._height=16,_this}return __extends$1A(RangeHandle,_super),Object.defineProperty(RangeHandle.prototype,"centerX",{get:function(){return this._centerX},set:function(value){this._centerX!==value&&(this._centerX=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeHandle.prototype,"centerY",{get:function(){return this._centerY},set:function(value){this._centerY!==value&&(this._centerY=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeHandle.prototype,"width",{get:function(){return this._width},set:function(value){this._width!==value&&(this._width=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeHandle.prototype,"gripLineGap",{get:function(){return this._gripLineGap},set:function(value){this._gripLineGap!==value&&(this._gripLineGap=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeHandle.prototype,"gripLineLength",{get:function(){return this._gripLineLength},set:function(value){this._gripLineLength!==value&&(this._gripLineLength=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeHandle.prototype,"height",{get:function(){return this._height},set:function(value){this._height!==value&&(this._height=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),RangeHandle.prototype.computeBBox=function(){var centerX=this.centerX,centerY=this.centerY,width=this.width,height=this.height;return new BBox$1(centerX-width/2,centerY-height/2,width,height)},RangeHandle.prototype.isPointInPath=function(x,y){var point=this.transformPoint(x,y);return this.computeBBox().containsPoint(point.x,point.y)},RangeHandle.prototype.updatePath=function(){var _a=this,path=_a.path,centerX=_a.centerX,centerY=_a.centerY,width=_a.width,height=_a.height,a=this.alignment,al=this.align;path.clear();var x=centerX-width/2,y=centerY-height/2,ax=al(a,x),ay=al(a,y),axw=ax+al(a,x,width),ayh=ay+al(a,y,height);path.moveTo(ax,ay),path.lineTo(axw,ay),path.lineTo(axw,ayh),path.lineTo(ax,ayh),path.lineTo(ax,ay);var dx=this.gripLineGap/2,dy=this.gripLineLength/2;path.moveTo(al(a,centerX-dx),al(a,centerY-dy)),path.lineTo(al(a,centerX-dx),al(a,centerY+dy)),path.moveTo(al(a,centerX+dx),al(a,centerY-dy)),path.lineTo(al(a,centerX+dx),al(a,centerY+dy))},RangeHandle.className="RangeHandle",RangeHandle}(Path$1),__extends$1B=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),RangeMask=function(_super){function RangeMask(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._stroke="#999999",_this._strokeWidth=1,_this._fill="#999999",_this._fillOpacity=.2,_this._lineCap="square",_this._x=0,_this._y=0,_this._width=200,_this._height=30,_this.minRange=.05,_this._min=0,_this._max=1,_this}return __extends$1B(RangeMask,_super),Object.defineProperty(RangeMask.prototype,"x",{get:function(){return this._x},set:function(value){this._x!==value&&(this._x=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeMask.prototype,"y",{get:function(){return this._y},set:function(value){this._y!==value&&(this._y=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeMask.prototype,"width",{get:function(){return this._width},set:function(value){this._width!==value&&(this._width=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeMask.prototype,"height",{get:function(){return this._height},set:function(value){this._height!==value&&(this._height=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeMask.prototype,"min",{get:function(){return this._min},set:function(value){value=Math.min(Math.max(value,0),this.max-this.minRange),isNaN(value)||this._min!==value&&(this._min=value,this.dirtyPath=!0,this.onRangeChange&&this.onRangeChange(value,this.max))},enumerable:!0,configurable:!0}),Object.defineProperty(RangeMask.prototype,"max",{get:function(){return this._max},set:function(value){value=Math.max(Math.min(value,1),this.min+this.minRange),isNaN(value)||this._max!==value&&(this._max=value,this.dirtyPath=!0,this.onRangeChange&&this.onRangeChange(this.min,value))},enumerable:!0,configurable:!0}),RangeMask.prototype.computeBBox=function(){var x=this.x,y=this.y,width=this.width,height=this.height;return new BBox$1(x,y,width,height)},RangeMask.prototype.computeVisibleRangeBBox=function(){var _a=this,x=_a.x,y=_a.y,width=_a.width,height=_a.height,min=_a.min,max=_a.max,minX=x+width*min;return new BBox$1(minX,y,x+width*max-minX,height)},RangeMask.prototype.updatePath=function(){var _a=this,path=_a.path,x=_a.x,y=_a.y,width=_a.width,height=_a.height,min=_a.min,max=_a.max,a=this.alignment,al=this.align;path.clear();var ax=al(a,x),ay=al(a,y),axw=ax+al(a,x,width),ayh=ay+al(a,y,height);path.moveTo(ax,ay),path.lineTo(axw,ay),path.lineTo(axw,ayh),path.lineTo(ax,ayh),path.lineTo(ax,ay);var minX=al(a,x+width*min),maxX=al(a,x+width*max);path.moveTo(minX,ay),path.lineTo(minX,ayh),path.lineTo(maxX,ayh),path.lineTo(maxX,ay),path.lineTo(minX,ay)},RangeMask.className="RangeMask",RangeMask}(Path$1),__extends$1C=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),RangeSelector=function(_super){function RangeSelector(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.isContainerNode=!0,_this.minHandle=new RangeHandle,_this.maxHandle=new RangeHandle,_this.mask=function(){var _a=RangeSelector.defaults,x=_a.x,y=_a.y,width=_a.width,height=_a.height,min=_a.min,max=_a.max,mask=new RangeMask;mask.x=x,mask.y=y,mask.width=width,mask.height=height,mask.min=min,mask.max=max;var _b=_this,minHandle=_b.minHandle,maxHandle=_b.maxHandle;return minHandle.centerX=x,maxHandle.centerX=x+width,minHandle.centerY=maxHandle.centerY=y+height/2,_this.append([mask,minHandle,maxHandle]),mask.onRangeChange=function(min,max){_this.updateHandles(),_this.onRangeChange&&_this.onRangeChange(min,max)},mask}(),_this._x=RangeSelector.defaults.x,_this._y=RangeSelector.defaults.y,_this._width=RangeSelector.defaults.width,_this._height=RangeSelector.defaults.height,_this._min=RangeSelector.defaults.min,_this._max=RangeSelector.defaults.max,_this}return __extends$1C(RangeSelector,_super),Object.defineProperty(RangeSelector.prototype,"x",{get:function(){return this.mask.x},set:function(value){this.mask.x=value,this.updateHandles()},enumerable:!0,configurable:!0}),Object.defineProperty(RangeSelector.prototype,"y",{get:function(){return this.mask.y},set:function(value){this.mask.y=value,this.updateHandles()},enumerable:!0,configurable:!0}),Object.defineProperty(RangeSelector.prototype,"width",{get:function(){return this.mask.width},set:function(value){this.mask.width=value,this.updateHandles()},enumerable:!0,configurable:!0}),Object.defineProperty(RangeSelector.prototype,"height",{get:function(){return this.mask.height},set:function(value){this.mask.height=value,this.updateHandles()},enumerable:!0,configurable:!0}),Object.defineProperty(RangeSelector.prototype,"min",{get:function(){return this.mask.min},set:function(value){this.mask.min=value},enumerable:!0,configurable:!0}),Object.defineProperty(RangeSelector.prototype,"max",{get:function(){return this.mask.max},set:function(value){this.mask.max=value},enumerable:!0,configurable:!0}),RangeSelector.prototype.updateHandles=function(){var _a=this,minHandle=_a.minHandle,maxHandle=_a.maxHandle,x=_a.x,y=_a.y,width=_a.width,height=_a.height,mask=_a.mask;minHandle.centerX=x+width*mask.min,maxHandle.centerX=x+width*mask.max,minHandle.centerY=maxHandle.centerY=y+height/2},RangeSelector.prototype.computeBBox=function(){return this.mask.computeBBox()},RangeSelector.prototype.computeVisibleRangeBBox=function(){return this.mask.computeVisibleRangeBBox()},RangeSelector.prototype.render=function(ctx){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(ctx);[this.mask,this.minHandle,this.maxHandle].forEach((function(child){ctx.save(),child.visible&&child.render(ctx),ctx.restore()}))},RangeSelector.className="Range",RangeSelector.defaults={x:0,y:0,width:200,height:30,min:0,max:1},RangeSelector}(Group$1),NavigatorMask=function(){function NavigatorMask(rangeMask){this.rm=rangeMask}return Object.defineProperty(NavigatorMask.prototype,"fill",{get:function(){return this.rm.fill},set:function(value){this.rm.fill=value},enumerable:!0,configurable:!0}),Object.defineProperty(NavigatorMask.prototype,"stroke",{get:function(){return this.rm.stroke},set:function(value){this.rm.stroke=value},enumerable:!0,configurable:!0}),Object.defineProperty(NavigatorMask.prototype,"strokeWidth",{get:function(){return this.rm.strokeWidth},set:function(value){this.rm.strokeWidth=value},enumerable:!0,configurable:!0}),Object.defineProperty(NavigatorMask.prototype,"fillOpacity",{get:function(){return this.rm.fillOpacity},set:function(value){this.rm.fillOpacity=value},enumerable:!0,configurable:!0}),NavigatorMask}(),NavigatorHandle=function(){function NavigatorHandle(rangeHandle){this.rh=rangeHandle}return Object.defineProperty(NavigatorHandle.prototype,"fill",{get:function(){return this.rh.fill},set:function(value){this.rh.fill=value},enumerable:!0,configurable:!0}),Object.defineProperty(NavigatorHandle.prototype,"stroke",{get:function(){return this.rh.stroke},set:function(value){this.rh.stroke=value},enumerable:!0,configurable:!0}),Object.defineProperty(NavigatorHandle.prototype,"strokeWidth",{get:function(){return this.rh.strokeWidth},set:function(value){this.rh.strokeWidth=value},enumerable:!0,configurable:!0}),Object.defineProperty(NavigatorHandle.prototype,"width",{get:function(){return this.rh.width},set:function(value){this.rh.width=value},enumerable:!0,configurable:!0}),Object.defineProperty(NavigatorHandle.prototype,"height",{get:function(){return this.rh.height},set:function(value){this.rh.height=value},enumerable:!0,configurable:!0}),Object.defineProperty(NavigatorHandle.prototype,"gripLineGap",{get:function(){return this.rh.gripLineGap},set:function(value){this.rh.gripLineGap=value},enumerable:!0,configurable:!0}),Object.defineProperty(NavigatorHandle.prototype,"gripLineLength",{get:function(){return this.rh.gripLineLength},set:function(value){this.rh.gripLineLength=value},enumerable:!0,configurable:!0}),NavigatorHandle}(),Navigator=function(){function Navigator(chart){var _this=this;this.rs=new RangeSelector,this.mask=new NavigatorMask(this.rs.mask),this.minHandle=new NavigatorHandle(this.rs.minHandle),this.maxHandle=new NavigatorHandle(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.changedCursor=!1,this._margin=10,this.chart=chart,chart.scene.root.append(this.rs),this.rs.onRangeChange=function(min,max){return _this.updateAxes(min,max)}}return Object.defineProperty(Navigator.prototype,"enabled",{get:function(){return this.rs.visible},set:function(value){this.rs.visible=value,this.chart.layoutPending=!0},enumerable:!0,configurable:!0}),Object.defineProperty(Navigator.prototype,"x",{get:function(){return this.rs.x},set:function(value){this.rs.x=value},enumerable:!0,configurable:!0}),Object.defineProperty(Navigator.prototype,"y",{get:function(){return this.rs.y},set:function(value){this.rs.y=value},enumerable:!0,configurable:!0}),Object.defineProperty(Navigator.prototype,"width",{get:function(){return this.rs.width},set:function(value){this.rs.width=value},enumerable:!0,configurable:!0}),Object.defineProperty(Navigator.prototype,"height",{get:function(){return this.rs.height},set:function(value){this.rs.height=value,this.chart.layoutPending=!0},enumerable:!0,configurable:!0}),Object.defineProperty(Navigator.prototype,"margin",{get:function(){return this._margin},set:function(value){this._margin=value,this.chart.layoutPending=!0},enumerable:!0,configurable:!0}),Object.defineProperty(Navigator.prototype,"min",{get:function(){return this.rs.min},set:function(value){this.rs.min=value},enumerable:!0,configurable:!0}),Object.defineProperty(Navigator.prototype,"max",{get:function(){return this.rs.max},set:function(value){this.rs.max=value},enumerable:!0,configurable:!0}),Navigator.prototype.updateAxes=function(min,max){var _this=this,chart=this.chart,clipSeries=!1;chart.axes.forEach((function(axis){if(axis.direction===ChartAxisDirection.X){!clipSeries&&(min>0||max<1)&&(clipSeries=!0),axis.visibleRange=[min,max];var oldLabelAutoRotated=axis.labelAutoRotated;axis.update(),axis.labelAutoRotated!==oldLabelAutoRotated&&(_this.chart.layoutPending=!0)}})),chart.seriesRoot.enabled=clipSeries,chart.series.forEach((function(s){return s.nodeDataPending=!0}))},Navigator.prototype.onDragStart=function(offset){if(this.enabled){var offsetX=offset.offsetX,offsetY=offset.offsetY,rs=this.rs,minHandle=rs.minHandle,maxHandle=rs.maxHandle,x=rs.x,width=rs.width,min=rs.min,visibleRange=rs.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(minHandle.containsPoint(offsetX,offsetY)?this.minHandleDragging=!0:maxHandle.containsPoint(offsetX,offsetY)?this.maxHandleDragging=!0:visibleRange.containsPoint(offsetX,offsetY)&&(this.panHandleOffset=(offsetX-x)/width-min))}},Navigator.prototype.onDrag=function(offset){if(this.enabled){var rs=this.rs,panHandleOffset=this.panHandleOffset,x=rs.x,y=rs.y,width=rs.width,height=rs.height,minHandle=rs.minHandle,maxHandle=rs.maxHandle,style=this.chart.element.style,offsetX=offset.offsetX,offsetY=offset.offsetY,minX=x+width*rs.min,maxX=x+width*rs.max,visibleRange=new BBox$1(minX,y,maxX-minX,height);if(minHandle.containsPoint(offsetX,offsetY)||maxHandle.containsPoint(offsetX,offsetY)?(this.changedCursor=!0,style.cursor="ew-resize"):visibleRange.containsPoint(offsetX,offsetY)?(this.changedCursor=!0,style.cursor="grab"):this.changedCursor&&(this.changedCursor=!1,style.cursor="default"),this.minHandleDragging)rs.min=getRatio();else if(this.maxHandleDragging)rs.max=getRatio();else if(!isNaN(panHandleOffset)){var span=rs.max-rs.min,min=Math.min(getRatio()-panHandleOffset,1-span);min<=rs.min?(rs.min=min,rs.max=rs.min+span):(rs.max=min+span,rs.min=rs.max-span)}}function getRatio(){return Math.min(Math.max((offsetX-x)/width,0),1)}},Navigator.prototype.onDragStop=function(){this.stopHandleDragging()},Navigator.prototype.stopHandleDragging=function(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN},Navigator}(),__extends$1D=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$s=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$a=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$s(arguments[i]));return ar},CartesianChart=function(_super){function CartesianChart(document){void 0===document&&(document=window.document);var _this=_super.call(this,document)||this;_this._seriesRoot=new ClipRect,_this.navigator=new Navigator(_this),_this.scene.root.visible=!1;var root=_this.scene.root;return root.append(_this.seriesRoot),root.append(_this.legend.group),_this.navigator.enabled=!1,_this}return __extends$1D(CartesianChart,_super),Object.defineProperty(CartesianChart.prototype,"seriesRoot",{get:function(){return this._seriesRoot},enumerable:!0,configurable:!0}),CartesianChart.prototype.performLayout=function(){if(!this.dataPending){this.scene.root.visible=!0;var _a=this,width=_a.width,height=_a.height,axes=_a.axes,legend=_a.legend,navigator=_a.navigator,shrinkRect=new BBox$1(0,0,width,height);if(this.positionCaptions(),this.positionLegend(),legend.enabled&&legend.data.length){var legendAutoPadding=this.legendAutoPadding,legendPadding=this.legend.spacing;switch(shrinkRect.x+=legendAutoPadding.left,shrinkRect.y+=legendAutoPadding.top,shrinkRect.width-=legendAutoPadding.left+legendAutoPadding.right,shrinkRect.height-=legendAutoPadding.top+legendAutoPadding.bottom,this.legend.position){case"right":shrinkRect.width-=legendPadding;break;case"bottom":shrinkRect.height-=legendPadding;break;case"left":shrinkRect.x+=legendPadding,shrinkRect.width-=legendPadding;break;case"top":shrinkRect.y+=legendPadding,shrinkRect.height-=legendPadding}}var captionAutoPadding=this.captionAutoPadding,padding=this.padding;shrinkRect.x+=padding.left,shrinkRect.width-=padding.left+padding.right,shrinkRect.y+=padding.top+captionAutoPadding,shrinkRect.height-=padding.top+captionAutoPadding+padding.bottom,navigator.enabled&&(shrinkRect.height-=navigator.height+navigator.margin),axes.forEach((function(axis){var availableRange=0;switch(axis.position){case ChartAxisPosition.Top:case ChartAxisPosition.Bottom:availableRange=shrinkRect.width;break;case ChartAxisPosition.Left:case ChartAxisPosition.Right:availableRange=shrinkRect.height}axis.calculateTickCount(availableRange)})),this.updateAxes();var bottomAxesHeight=0,axisPositionVisited={top:!1,right:!1,bottom:!1,left:!1,angle:!1,radius:!1};axes.forEach((function(axis){axis.group.visible=!0;var axisThickness=Math.floor(axis.thickness||axis.computeBBox().width),axisPadding=axis.title&&axis.title.padding.top||15;switch(axisPositionVisited[axis.position]&&(axisThickness+=axisPadding),axis.position){case ChartAxisPosition.Top:axisPositionVisited[ChartAxisPosition.Top]=!0,shrinkRect.y+=axisThickness,shrinkRect.height-=axisThickness,axis.translation.y=Math.floor(shrinkRect.y+1),axis.label.mirrored=!0;break;case ChartAxisPosition.Right:axisPositionVisited[ChartAxisPosition.Right]=!0,shrinkRect.width-=axisThickness,axis.translation.x=Math.max(Math.floor(shrinkRect.x),Math.floor(shrinkRect.x+shrinkRect.width)),axis.label.mirrored=!0;break;case ChartAxisPosition.Bottom:axisPositionVisited[ChartAxisPosition.Bottom]=!0,shrinkRect.height-=axisThickness,bottomAxesHeight+=axisThickness,axis.translation.y=Math.max(Math.floor(shrinkRect.y),Math.floor(shrinkRect.y+shrinkRect.height+1));break;case ChartAxisPosition.Left:axisPositionVisited[ChartAxisPosition.Left]=!0,shrinkRect.x+=axisThickness,shrinkRect.width-=axisThickness,axis.translation.x=Math.floor(shrinkRect.x)}})),shrinkRect.width=Math.max(0,shrinkRect.width),shrinkRect.height=Math.max(0,shrinkRect.height),axes.forEach((function(axis){switch(axis.position){case ChartAxisPosition.Top:case ChartAxisPosition.Bottom:axis.translation.x=Math.floor(shrinkRect.x),axis.range=[0,shrinkRect.width],axis.gridLength=shrinkRect.height;break;case ChartAxisPosition.Left:case ChartAxisPosition.Right:axis.translation.y=Math.floor(shrinkRect.y),axis.range=axis instanceof CategoryAxis||axis instanceof GroupedCategoryAxis?[0,shrinkRect.height]:[shrinkRect.height,0],axis.gridLength=shrinkRect.width}})),this.createNodeData(),this.seriesRect=shrinkRect,this.series.forEach((function(series){series.group.translationX=Math.floor(shrinkRect.x),series.group.translationY=Math.floor(shrinkRect.y),series.update()}));var seriesRoot=this.seriesRoot;seriesRoot.x=shrinkRect.x,seriesRoot.y=shrinkRect.y,seriesRoot.width=shrinkRect.width,seriesRoot.height=shrinkRect.height,navigator.enabled&&(navigator.x=shrinkRect.x,navigator.y=shrinkRect.y+shrinkRect.height+bottomAxesHeight+navigator.margin,navigator.width=shrinkRect.width),this.axes.forEach((function(axis){return axis.update()}))}},CartesianChart.prototype.initSeries=function(series){_super.prototype.initSeries.call(this,series)},CartesianChart.prototype.freeSeries=function(series){_super.prototype.freeSeries.call(this,series)},CartesianChart.prototype.setupDomListeners=function(chartElement){_super.prototype.setupDomListeners.call(this,chartElement),this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchEnd=this.onTouchEnd.bind(this),this._onTouchCancel=this.onTouchCancel.bind(this),chartElement.addEventListener("touchstart",this._onTouchStart,{passive:!0}),chartElement.addEventListener("touchmove",this._onTouchMove,{passive:!0}),chartElement.addEventListener("touchend",this._onTouchEnd,{passive:!0}),chartElement.addEventListener("touchcancel",this._onTouchCancel,{passive:!0})},CartesianChart.prototype.cleanupDomListeners=function(chartElement){_super.prototype.cleanupDomListeners.call(this,chartElement),chartElement.removeEventListener("touchstart",this._onTouchStart),chartElement.removeEventListener("touchmove",this._onTouchMove),chartElement.removeEventListener("touchend",this._onTouchEnd),chartElement.removeEventListener("touchcancel",this._onTouchCancel)},CartesianChart.prototype.getTouchOffset=function(event){var rect=this.scene.canvas.element.getBoundingClientRect(),touch=event.touches[0];return touch?{offsetX:touch.clientX-rect.left,offsetY:touch.clientY-rect.top}:void 0},CartesianChart.prototype.onTouchStart=function(event){var offset=this.getTouchOffset(event);offset&&this.navigator.onDragStart(offset)},CartesianChart.prototype.onTouchMove=function(event){var offset=this.getTouchOffset(event);offset&&this.navigator.onDrag(offset)},CartesianChart.prototype.onTouchEnd=function(event){this.navigator.onDragStop()},CartesianChart.prototype.onTouchCancel=function(event){this.navigator.onDragStop()},CartesianChart.prototype.onMouseDown=function(event){_super.prototype.onMouseDown.call(this,event),this.navigator.onDragStart(event)},CartesianChart.prototype.onMouseMove=function(event){_super.prototype.onMouseMove.call(this,event),this.navigator.onDrag(event)},CartesianChart.prototype.onMouseUp=function(event){_super.prototype.onMouseUp.call(this,event),this.navigator.onDragStop()},CartesianChart.prototype.onMouseOut=function(event){_super.prototype.onMouseOut.call(this,event),this.navigator.onDragStop()},CartesianChart.prototype.assignAxesToSeries=function(force){void 0===force&&(force=!1),_super.prototype.assignAxesToSeries.call(this,force),this.series.forEach((function(series){series.xAxis||console.warn("Could not find a matching xAxis for the "+series.id+" series."),series.yAxis||console.warn("Could not find a matching yAxis for the "+series.id+" series.")}))},CartesianChart.prototype.updateAxes=function(){var primaryTickCount,_this=this,navigator=this.navigator,clipSeries=!1;this.axes.forEach((function(axis){var _a,direction=axis.direction,boundSeries=axis.boundSeries;if(0===boundSeries.length&&_this._series.length>0&&console.warn("AG Charts - chart series not initialised; check series and axes configuration."),axis.linkedTo)axis.domain=axis.linkedTo.domain;else{var domains_1=[];boundSeries.filter((function(s){return s.visible})).forEach((function(series){domains_1.push(series.getDomain(direction))}));var domain=(_a=new Array).concat.apply(_a,__spread$a(domains_1)),isYAxis="y"===axis.direction;axis instanceof NumberAxis&&isYAxis?(axis.setDomain(domain,primaryTickCount),primaryTickCount=primaryTickCount||axis.scale.ticks(axis.calculatedTickCount).length):axis.domain=domain}axis.direction===ChartAxisDirection.X&&(axis.visibleRange=[navigator.min,navigator.max]),!clipSeries&&(axis.visibleRange[0]>0||axis.visibleRange[1]<1)&&(clipSeries=!0),axis.update()})),this.seriesRoot.enabled=clipSeries},CartesianChart.className="CartesianChart",CartesianChart.type="cartesian",CartesianChart}(Chart),__extends$1E=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),HierarchyChart=function(_super){function HierarchyChart(document){void 0===document&&(document=window.document);var _this=_super.call(this,document)||this;_this._data={},_this._seriesRoot=new ClipRect,_this.scene.root.visible=!1;var root=_this.scene.root;return root.append(_this.seriesRoot),root.append(_this.legend.group),_this}return __extends$1E(HierarchyChart,_super),Object.defineProperty(HierarchyChart.prototype,"seriesRoot",{get:function(){return this._seriesRoot},enumerable:!0,configurable:!0}),HierarchyChart.prototype.performLayout=function(){if(!this.dataPending){this.scene.root.visible=!0;var width=this.width,height=this.height,legend=this.legend,shrinkRect=new BBox$1(0,0,width,height);if(this.positionCaptions(),this.positionLegend(),legend.enabled&&legend.data.length){var legendAutoPadding=this.legendAutoPadding,legendPadding=this.legend.spacing;switch(shrinkRect.x+=legendAutoPadding.left,shrinkRect.y+=legendAutoPadding.top,shrinkRect.width-=legendAutoPadding.left+legendAutoPadding.right,shrinkRect.height-=legendAutoPadding.top+legendAutoPadding.bottom,this.legend.position){case"right":shrinkRect.width-=legendPadding;break;case"bottom":shrinkRect.height-=legendPadding;break;case"left":shrinkRect.x+=legendPadding,shrinkRect.width-=legendPadding;break;case"top":shrinkRect.y+=legendPadding,shrinkRect.height-=legendPadding}}var captionAutoPadding=this.captionAutoPadding,padding=this.padding;shrinkRect.x+=padding.left,shrinkRect.width-=padding.left+padding.right,shrinkRect.y+=padding.top+captionAutoPadding,shrinkRect.height-=padding.top+captionAutoPadding+padding.bottom,this.seriesRect=shrinkRect,this.series.forEach((function(series){series.group.translationX=Math.floor(shrinkRect.x),series.group.translationY=Math.floor(shrinkRect.y),series.update()}));var seriesRoot=this.seriesRoot;seriesRoot.x=shrinkRect.x,seriesRoot.y=shrinkRect.y,seriesRoot.width=shrinkRect.width,seriesRoot.height=shrinkRect.height}},HierarchyChart.className="HierarchyChart",HierarchyChart.type="hierarchy",HierarchyChart}(Chart),__extends$1F=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$t=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$b=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$t(arguments[i]));return ar},GroupedCategoryChart=function(_super){function GroupedCategoryChart(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1F(GroupedCategoryChart,_super),GroupedCategoryChart.prototype.updateAxes=function(){this.axes.forEach((function(axis){var _a,direction=axis.direction,boundSeries=axis.boundSeries,domains=[],isNumericX=void 0;boundSeries.filter((function(s){return s.visible})).forEach((function(series){if(direction===ChartAxisDirection.X)if(void 0===isNumericX){var domain_1=series.getDomain(direction);domains.push(domain_1),isNumericX="number"==typeof domain_1[0]}else isNumericX&&domains.push(series.getDomain(direction));else domains.push(series.getDomain(direction))}));var domain=(_a=new Array).concat.apply(_a,__spread$b(domains));axis.domain=extent$1(domain,isContinuous$1)||domain,axis.update()}))},GroupedCategoryChart.className="GroupedCategoryChart",GroupedCategoryChart.type="groupedCategory",GroupedCategoryChart}(CartesianChart),__extends$1G=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$M=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},Label$1=function(_super){function Label(){var _this=_super.call(this)||this;return _this.enabled=!0,_this.fontSize=12,_this.fontFamily="Verdana, sans-serif",_this.color="rgba(70, 70, 70, 1)",_this}return __extends$1G(Label,_super),Label.prototype.getFont=function(){return getFont$3(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)},__decorate$M([reactive$1("change","dataChange")],Label.prototype,"enabled",void 0),__decorate$M([reactive$1("change")],Label.prototype,"fontSize",void 0),__decorate$M([reactive$1("change")],Label.prototype,"fontFamily",void 0),__decorate$M([reactive$1("change")],Label.prototype,"fontStyle",void 0),__decorate$M([reactive$1("change")],Label.prototype,"fontWeight",void 0),__decorate$M([reactive$1("change")],Label.prototype,"color",void 0),Label}(Observable$1),__extends$1H=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$N=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$u=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$c=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$u(arguments[i]));return ar},SeriesItemHighlightStyle=function SeriesItemHighlightStyle(){this.fill="yellow",this.stroke=void 0,this.strokeWidth=void 0},SeriesHighlightStyle=function SeriesHighlightStyle(){this.strokeWidth=void 0,this.dimOpacity=void 0},HighlightStyle=function HighlightStyle(){this.fill=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.item=new SeriesItemHighlightStyle,this.series=new SeriesHighlightStyle},SeriesTooltip=function(_super){function SeriesTooltip(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.enabled=!0,_this}return __extends$1H(SeriesTooltip,_super),__decorate$N([reactive$1("change")],SeriesTooltip.prototype,"enabled",void 0),SeriesTooltip}(Observable$1),Series=function(_super){function Series(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.id=createId$1(_this),_this.group=new Group$1,_this.pickGroup=_this.group.appendChild(new Group$1),_this.directions=[ChartAxisDirection.X,ChartAxisDirection.Y],_this.directionKeys={},_this.label=new Label$1,_this.data=void 0,_this.visible=!0,_this.showInLegend=!0,_this.cursor="default",_this._nodeDataPending=!0,_this._updatePending=!1,_this.highlightStyle=new HighlightStyle,_this.scheduleLayout=function(){_this.fireEvent({type:"layoutChange"})},_this.scheduleData=function(){_this.fireEvent({type:"dataChange"})},_this}return __extends$1H(Series,_super),Object.defineProperty(Series.prototype,"type",{get:function(){return this.constructor.type||""},enumerable:!0,configurable:!0}),Object.defineProperty(Series.prototype,"grouped",{set:function(g){if(!0===g)throw new Error("AG Charts - grouped: true is unsupported for series of type: "+this.type)},enumerable:!0,configurable:!0}),Series.prototype.setColors=function(fills,strokes){},Series.prototype.getKeys=function(direction){var _this=this,directionKeys=this.directionKeys,keys=directionKeys&&directionKeys[direction],values=[];return keys&&keys.forEach((function(key){var value=_this[key];value&&(Array.isArray(value)?values.push.apply(values,__spread$c(value)):values.push(value))})),values},Series.prototype.createNodeData=function(){return[]},Series.prototype.getNodeData=function(){return[]},Series.prototype.getLabelData=function(){return[]},Object.defineProperty(Series.prototype,"nodeDataPending",{get:function(){return this._nodeDataPending},set:function(value){this._nodeDataPending!==value&&(this._nodeDataPending=value,this.updatePending=!0,value&&this.chart&&(this.chart.updatePending=value))},enumerable:!0,configurable:!0}),Series.prototype.scheduleNodeDate=function(){this.nodeDataPending=!0},Object.defineProperty(Series.prototype,"updatePending",{get:function(){return this._updatePending},set:function(value){this._updatePending!==value&&(this._updatePending=value,value&&this.chart&&(this.chart.updatePending=value))},enumerable:!0,configurable:!0}),Series.prototype.scheduleUpdate=function(){this.updatePending=!0},Series.prototype.getOpacity=function(datum){var chart=this.chart,_b=this.highlightStyle.series.dimOpacity,dimOpacity=void 0===_b?1:_b;return chart&&chart.highlightedDatum&&(chart.highlightedDatum.series!==this||datum&&chart.highlightedDatum.itemId!==datum.itemId)?dimOpacity:1},Series.prototype.getStrokeWidth=function(defaultStrokeWidth,datum){var chart=this.chart,strokeWidth=this.highlightStyle.series.strokeWidth;return!chart||!chart.highlightedDatum||chart.highlightedDatum.series!==this||datum&&chart.highlightedDatum.itemId!==datum.itemId||void 0===strokeWidth?defaultStrokeWidth:strokeWidth},Series.prototype.fireNodeClickEvent=function(event,datum){},Series.prototype.toggleSeriesItem=function(itemId,enabled){this.visible=enabled},Series.prototype.onHighlightChange=function(){},Series.prototype.fixNumericExtent=function(extent,type,axis){if(!extent)return[0,1];var _a=__read$u(extent,2),min=_a[0],max=_a[1];if(max=+max,0===(min=+min)&&0===max)return[0,1];if(min===max)if(axis instanceof TimeAxis)min-=1,max+=1;else{var padding=Math.abs(.01*min);min-=padding,max+=padding}return isNumber$1(min)&&isNumber$1(max)?[min,max]:[0,1]},Series.highlightedZIndex=1e12,__decorate$N([reactive$1("dataChange")],Series.prototype,"data",void 0),__decorate$N([reactive$1("dataChange")],Series.prototype,"visible",void 0),__decorate$N([reactive$1("layoutChange")],Series.prototype,"showInLegend",void 0),Series}(Observable$1),__extends$1I=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$O=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SeriesMarker=function(_super){function SeriesMarker(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.enabled=!0,_this.shape=Circle$1,_this.size=6,_this.maxSize=30,_this.strokeWidth=1,_this}return __extends$1I(SeriesMarker,_super),__decorate$O([reactive$1("change")],SeriesMarker.prototype,"enabled",void 0),__decorate$O([reactive$1("change")],SeriesMarker.prototype,"shape",void 0),__decorate$O([reactive$1("change")],SeriesMarker.prototype,"size",void 0),__decorate$O([reactive$1("change")],SeriesMarker.prototype,"maxSize",void 0),__decorate$O([reactive$1("change")],SeriesMarker.prototype,"domain",void 0),__decorate$O([reactive$1("change")],SeriesMarker.prototype,"fill",void 0),__decorate$O([reactive$1("change")],SeriesMarker.prototype,"stroke",void 0),__decorate$O([reactive$1("change")],SeriesMarker.prototype,"strokeWidth",void 0),__decorate$O([reactive$1("change")],SeriesMarker.prototype,"fillOpacity",void 0),__decorate$O([reactive$1("change")],SeriesMarker.prototype,"strokeOpacity",void 0),SeriesMarker}(Observable$1),__extends$1J=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),PolarSeries=function(_super){function PolarSeries(){var _a,_this=null!==_super&&_super.apply(this,arguments)||this;return _this.directionKeys=((_a={})[ChartAxisDirection.X]=["angleKey"],_a[ChartAxisDirection.Y]=["radiusKey"],_a),_this.centerX=0,_this.centerY=0,_this.radius=0,_this}return __extends$1J(PolarSeries,_super),PolarSeries}(Series),__extends$1K=(function(_super){function PolarSeriesMarker(){return null!==_super&&_super.apply(this,arguments)||this}__extends$1J(PolarSeriesMarker,_super)}(SeriesMarker),function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),PolarChart=function(_super){function PolarChart(document){void 0===document&&(document=window.document);var _this=_super.call(this,document)||this;return _this.padding=new Padding$1(40),_this.scene.root.append(_this.legend.group),_this.padding.addEventListener("layoutChange",_this.scheduleLayout,_this),_this}return __extends$1K(PolarChart,_super),Object.defineProperty(PolarChart.prototype,"seriesRoot",{get:function(){return this.scene.root},enumerable:!0,configurable:!0}),PolarChart.prototype.performLayout=function(){var shrinkRect=new BBox$1(0,0,this.width,this.height);this.positionCaptions(),this.positionLegend();var captionAutoPadding=this.captionAutoPadding;if(shrinkRect.y+=captionAutoPadding,shrinkRect.height-=captionAutoPadding,this.legend.enabled&&this.legend.data.length){var legendAutoPadding=this.legendAutoPadding;shrinkRect.x+=legendAutoPadding.left,shrinkRect.y+=legendAutoPadding.top,shrinkRect.width-=legendAutoPadding.left+legendAutoPadding.right,shrinkRect.height-=legendAutoPadding.top+legendAutoPadding.bottom;var legendPadding=this.legend.spacing;switch(this.legend.position){case"right":shrinkRect.width-=legendPadding;break;case"bottom":shrinkRect.height-=legendPadding;break;case"left":shrinkRect.x+=legendPadding,shrinkRect.width-=legendPadding;break;case"top":shrinkRect.y+=legendPadding,shrinkRect.height-=legendPadding}}var padding=this.padding;shrinkRect.x+=padding.left,shrinkRect.y+=padding.top,shrinkRect.width-=padding.left+padding.right,shrinkRect.height-=padding.top+padding.bottom,this.seriesRect=shrinkRect;var centerX=shrinkRect.x+shrinkRect.width/2,centerY=shrinkRect.y+shrinkRect.height/2,radius=Math.max(0,Math.min(shrinkRect.width,shrinkRect.height)/2);this.series.forEach((function(series){series instanceof PolarSeries&&(series.centerX=centerX,series.centerY=centerY,series.radius=radius,series.update())}))},PolarChart.className="PolarChart",PolarChart.type="polar",PolarChart}(Chart),__extends$1L=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CartesianSeries=function(_super){function CartesianSeries(){var _a,_this=null!==_super&&_super.apply(this,arguments)||this;return _this.directionKeys=((_a={})[ChartAxisDirection.X]=["xKey"],_a[ChartAxisDirection.Y]=["yKey"],_a),_this}return __extends$1L(CartesianSeries,_super),CartesianSeries.prototype.checkDomainXY=function(x,y,isContinuousX,isContinuousY){return(isContinuousX&&isContinuous$1(x)||!isContinuousX&&isDiscrete(x))&&(isContinuousY&&isContinuous$1(y)||!isContinuousY&&isDiscrete(y))?[x,y]:void 0},CartesianSeries.prototype.checkDatum=function(value,isContinuousScale){return isContinuousScale&&isContinuous$1(value)?value:isContinuousScale?void 0:isDiscrete(value)?value:String(value)},CartesianSeries.prototype.checkRangeXY=function(x,y,xAxis,yAxis){return!isNaN(x)&&!isNaN(y)&&xAxis.inRange(x)&&yAxis.inRange(y)},CartesianSeries}(Series),CartesianSeriesMarker=function(_super){function CartesianSeriesMarker(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.formatter=void 0,_this}return __extends$1L(CartesianSeriesMarker,_super),CartesianSeriesMarker}(SeriesMarker);function equal(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;var length_1,i=void 0;if(Array.isArray(a)){if((length_1=a.length)!=b.length)return!1;for(i=length_1;0!=i--;)if(!equal(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();var keys=Object.keys(a);if((length_1=keys.length)!==Object.keys(b).length)return!1;for(i=length_1;0!=i--;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=length_1;0!=i--;){var key=keys[i];if(!equal(a[key],b[key]))return!1}return!0}return a!=a&&b!=b}var __read$v=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},interpolatePattern=/(#\{(.*?)\})/g;function interpolate(input,values,formats){return input.replace(interpolatePattern,(function(){var _a=__read$v(arguments[2].split(":"),2),valueName=_a[0],formatName=_a[1],value=values[valueName];if("number"==typeof value){var format;if(format=formatName&&formats&&formats[formatName]){var _b=format,locales=_b.locales,options=_b.options;return value.toLocaleString(locales,options)}return String(value)}return value instanceof Date?"string"==typeof(format=formatName&&formats&&formats[formatName])?locale$1.format(format)(value):value.toDateString():"string"==typeof value||value&&value.toString?String(value):""}))}var element=null;function sanitizeHtml(text){return element=element||document.createElement("div"),text?(element.innerText=text,element.innerHTML):""}var BarSeriesNodeTag,BarLabelPlacement,__extends$1M=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$P=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__values$8=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$w=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$d=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$w(arguments[i]));return ar},AreaSeriesLabel=function(_super){function AreaSeriesLabel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1M(AreaSeriesLabel,_super),__decorate$P([reactive$1("change")],AreaSeriesLabel.prototype,"formatter",void 0),AreaSeriesLabel}(Label$1),AreaSeriesTooltip=function(_super){function AreaSeriesTooltip(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1M(AreaSeriesTooltip,_super),__decorate$P([reactive$1("change")],AreaSeriesTooltip.prototype,"renderer",void 0),__decorate$P([reactive$1("change")],AreaSeriesTooltip.prototype,"format",void 0),AreaSeriesTooltip}(SeriesTooltip),AreaSeries=function(_super){function AreaSeries(){var _this=_super.call(this)||this;_this.tooltip=new AreaSeriesTooltip,_this.areaGroup=_this.group.insertBefore(new Group$1,_this.pickGroup),_this.strokeGroup=_this.group.insertBefore(new Group$1,_this.pickGroup),_this.markerGroup=_this.pickGroup.appendChild(new Group$1),_this.labelGroup=_this.group.appendChild(new Group$1),_this.fillSelection=Selection$1.select(_this.areaGroup).selectAll(),_this.strokeSelection=Selection$1.select(_this.strokeGroup).selectAll(),_this.markerSelection=Selection$1.select(_this.markerGroup).selectAll(),_this.labelSelection=Selection$1.select(_this.labelGroup).selectAll(),_this.seriesItemEnabled=new Map,_this.xData=[],_this.yData=[],_this.fillSelectionData=[],_this.strokeSelectionData=[],_this.markerSelectionData=[],_this.labelSelectionData=[],_this.yDomain=[],_this.xDomain=[],_this.directionKeys={x:["xKey"],y:["yKeys"]},_this.marker=new CartesianSeriesMarker,_this.label=new AreaSeriesLabel,_this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],_this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],_this.fillOpacity=1,_this.strokeOpacity=1,_this.lineDash=[0],_this.lineDashOffset=0,_this._xKey="",_this.xName="",_this._yKeys=[],_this.yNames=[],_this.strokeWidth=2,_this.addEventListener("update",_this.scheduleUpdate);var _a=_this,marker=_a.marker,label=_a.label;return marker.enabled=!1,marker.addPropertyListener("shape",_this.onMarkerShapeChange,_this),marker.addEventListener("change",_this.scheduleUpdate,_this),label.enabled=!1,label.addEventListener("change",_this.scheduleUpdate,_this),_this}return __extends$1M(AreaSeries,_super),AreaSeries.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.setData([]),this.markerSelection.exit.remove(),this.fireEvent({type:"legendChange"})},Object.defineProperty(AreaSeries.prototype,"xKey",{get:function(){return this._xKey},set:function(value){this._xKey!==value&&(this._xKey=value,this.xData=[],this.scheduleData())},enumerable:!0,configurable:!0}),Object.defineProperty(AreaSeries.prototype,"yKeys",{get:function(){return this._yKeys},set:function(values){if(!equal(this._yKeys,values)){this._yKeys=values,this.yData=[];var seriesItemEnabled_1=this.seriesItemEnabled;seriesItemEnabled_1.clear(),values.forEach((function(key){return seriesItemEnabled_1.set(key,!0)})),this.scheduleData()}},enumerable:!0,configurable:!0}),AreaSeries.prototype.setColors=function(fills,strokes){this.fills=fills,this.strokes=strokes},Object.defineProperty(AreaSeries.prototype,"normalizedTo",{get:function(){return this._normalizedTo},set:function(value){var absValue=value?Math.abs(value):void 0;this._normalizedTo!==absValue&&(this._normalizedTo=absValue,this.scheduleData())},enumerable:!0,configurable:!0}),AreaSeries.prototype.processData=function(){var e_1,_a,e_2,_b,e_3,_c,_this=this,_d=this,xKey=_d.xKey,yKeys=_d.yKeys,seriesItemEnabled=_d.seriesItemEnabled,xAxis=_d.xAxis,yAxis=_d.yAxis,normalizedTo=_d.normalizedTo,data=xKey&&yKeys.length&&this.data?this.data:[];if(!xAxis||!yAxis)return!1;var isContinuousX=xAxis.scale instanceof ContinuousScale$1,isContinuousY=yAxis.scale instanceof ContinuousScale$1,normalized=normalizedTo&&isFinite(normalizedTo),yData=[],xData=[],xValues=[],_loop_1=function(datum){if(!(xKey in datum))return doOnce$1((function(){return console.warn("The key '"+xKey+"' was not found in the data: ",datum)}),xKey+" not found in data"),"continue";var xDatum=this_1.checkDatum(datum[xKey],isContinuousX);if(isContinuousX&&void 0===xDatum)return"continue";xValues.push(xDatum),xData.push({xDatum,seriesDatum:datum}),yKeys.forEach((function(yKey,i){if(yKey in datum){var value=datum[yKey],seriesYs=yData[i]||(yData[i]=[]);if(seriesItemEnabled.get(yKey)){var yDatum=_this.checkDatum(value,isContinuousY);seriesYs.push(yDatum)}else seriesYs.push(0)}else doOnce$1((function(){return console.warn("The key '"+yKey+"' was not found in the data: ",datum)}),yKey+" not found in data")}))},this_1=this;try{for(var data_1=__values$8(data),data_1_1=data_1.next();!data_1_1.done;data_1_1=data_1.next()){_loop_1(data_1_1.value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{data_1_1&&!data_1_1.done&&(_a=data_1.return)&&_a.call(data_1)}finally{if(e_1)throw e_1.error}}this.yData=yData,this.xData=xData,this.xDomain=isContinuousX?this.fixNumericExtent(extent$1(xValues,isContinuous$1),"x",xAxis):xValues;for(var yMin=0,yMax=0,i=0;i<xData.length;i++){var total={sum:0,absSum:0};try{for(var yData_1=(e_2=void 0,__values$8(yData)),yData_1_1=yData_1.next();!yData_1_1.done;yData_1_1=yData_1.next()){if(void 0!==(seriesYs=yData_1_1.value)[i]){var y=+seriesYs[i];total.absSum+=Math.abs(y),total.sum+=y,total.sum>yMax?yMax=total.sum:total.sum<yMin&&(yMin=total.sum)}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{yData_1_1&&!yData_1_1.done&&(_b=yData_1.return)&&_b.call(yData_1)}finally{if(e_2)throw e_2.error}}if(normalized&&normalizedTo){var normalizedTotal=0;try{for(var yData_2=(e_3=void 0,__values$8(yData)),yData_2_1=yData_2.next();!yData_2_1.done;yData_2_1=yData_2.next()){var seriesYs,normalizedY=+(seriesYs=yData_2_1.value)[i]/total.absSum*normalizedTo;seriesYs[i]=normalizedY,(normalizedTotal+=normalizedY)>yMax?yMax=normalizedTotal:normalizedTotal<yMin&&(yMin=normalizedTotal)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{yData_2_1&&!yData_2_1.done&&(_c=yData_2.return)&&_c.call(yData_2)}finally{if(e_3)throw e_3.error}}}}if(normalized&&normalizedTo){yMin=yMin<.5*-normalizedTo?-normalizedTo:yMin,yMax=yMax>.5*normalizedTo?normalizedTo:yMax}return this.yDomain=this.fixNumericExtent([yMin,yMax],"y",yAxis),this.fireEvent({type:"dataProcessed"}),!0},AreaSeries.prototype.findLargestMinMax=function(totals){var e_4,_a,min=0,max=0;try{for(var totals_1=__values$8(totals),totals_1_1=totals_1.next();!totals_1_1.done;totals_1_1=totals_1.next()){var total=totals_1_1.value;total.min<min&&(min=total.min),total.max>max&&(max=total.max)}}catch(e_4_1){e_4={error:e_4_1}}finally{try{totals_1_1&&!totals_1_1.done&&(_a=totals_1.return)&&_a.call(totals_1)}finally{if(e_4)throw e_4.error}}return{min,max}},AreaSeries.prototype.getDomain=function(direction){return direction===ChartAxisDirection.X?this.xDomain:this.yDomain},AreaSeries.prototype.update=function(){this.updatePending=!1,this.updateSelections(),this.updateNodes()},AreaSeries.prototype.updateSelections=function(){this.nodeDataPending&&(this.nodeDataPending=!1,this.createSelectionData(),this.updateFillSelection(),this.updateStrokeSelection(),this.updateMarkerSelection(),this.updateLabelSelection())},AreaSeries.prototype.updateNodes=function(){this.group.visible=this.visible&&this.xData.length>0&&this.yData.length>0,this.updateFillNodes(),this.updateStrokeNodes(),this.updateMarkerNodes(),this.updateLabelNodes()},AreaSeries.prototype.createSelectionData=function(){var _this=this,_a=this,data=_a.data,xAxis=_a.xAxis,yAxis=_a.yAxis,xData=_a.xData,yData=_a.yData,labelSelectionData=_a.labelSelectionData,markerSelectionData=_a.markerSelectionData,strokeSelectionData=_a.strokeSelectionData,fillSelectionData=_a.fillSelectionData;_a.xKey;if(data&&xAxis&&yAxis&&xData.length&&yData.length){var _b=this,yKeys=_b.yKeys,marker=_b.marker,label=_b.label,fills=_b.fills,strokes=_b.strokes,xScale=xAxis.scale,yScale=yAxis.scale,continuousY=yScale instanceof ContinuousScale$1,xOffset=(xScale.bandwidth||0)/2;markerSelectionData.length=0,labelSelectionData.length=0,strokeSelectionData.length=0,fillSelectionData.length=0;var cumulativePathValues=new Array(xData.length).fill(null).map((function(){return{left:0,right:0}})),cumulativeMarkerValues=new Array(xData.length).fill(0),createPathCoordinates=function(xDatum,yDatum,idx,side){var x=xScale.convert(xDatum)+xOffset,prevY=cumulativePathValues[idx][side],currY=cumulativePathValues[idx][side]+yDatum,prevYCoordinate=yScale.convert(prevY,continuousY?clamper$1:void 0),currYCoordinate=yScale.convert(currY,continuousY?clamper$1:void 0);return cumulativePathValues[idx][side]=currY,[{x,y:currYCoordinate},{x,y:prevYCoordinate}]};yData.forEach((function(seriesYs,seriesIdx){var yKey=yKeys[seriesIdx],fillPoints=(fillSelectionData[seriesIdx]||(fillSelectionData[seriesIdx]={itemId:yKey,points:[]})).points,fillPhantomPoints=[],strokeDatum=strokeSelectionData[seriesIdx]||(strokeSelectionData[seriesIdx]={itemId:yKey,points:[],yValues:[]}),strokePoints=strokeDatum.points,yValues=strokeDatum.yValues;seriesYs.forEach((function(yDatum,datumIdx){var _a,labelText,_b=xData[datumIdx],xDatum=_b.xDatum,seriesDatum=_b.seriesDatum,nextXDatum=null===(_a=xData[datumIdx+1])||void 0===_a?void 0:_a.xDatum,nextYDatum=seriesYs[datumIdx+1],point=function(xDatum,yDatum,idx,rawYDatum){var currY,normalized=_this.normalizedTo&&isFinite(_this.normalizedTo),normalizedAndValid=normalized&&continuousY&&isContinuous$1(rawYDatum);return(!normalized&&!isNaN(yDatum)||normalizedAndValid)&&(currY=cumulativeMarkerValues[idx]+=yDatum),{x:xScale.convert(xDatum)+xOffset,y:yScale.convert(currY,continuousY?clamper$1:void 0)}}(xDatum,+yDatum,datumIdx,seriesDatum[yKey]);marker&&markerSelectionData.push({index:datumIdx,series:_this,itemId:yKey,datum:seriesDatum,yValue:yDatum,yKey,point,fill:fills[seriesIdx%fills.length],stroke:strokes[seriesIdx%strokes.length]}),labelText=label.formatter?label.formatter({value:yDatum}):isNumber$1(yDatum)?Number(yDatum).toFixed(2):String(yDatum),label&&labelSelectionData.push({index:datumIdx,itemId:yKey,point,label:_this.seriesItemEnabled.get(yKey)&&labelText?{text:labelText,fontStyle:label.fontStyle,fontWeight:label.fontWeight,fontSize:label.fontSize,fontFamily:label.fontFamily,textAlign:"center",textBaseline:"bottom",fill:label.color}:void 0});var windowX=[xDatum,nextXDatum],windowY=[yDatum,nextYDatum];if(!windowX.some((function(v){return null==v}))){windowY.some((function(v){return null==v}))&&(windowY[0]=0,windowY[1]=0);var currCoordinates=createPathCoordinates(windowX[0],+windowY[0],datumIdx,"right");fillPoints.push(currCoordinates[0]),fillPhantomPoints.push(currCoordinates[1]);var nextCoordinates=createPathCoordinates(windowX[1],+windowY[1],datumIdx,"left");fillPoints.push(nextCoordinates[0]),fillPhantomPoints.push(nextCoordinates[1]),strokePoints.push({x:NaN,y:NaN}),yValues.push(void 0),strokePoints.push(currCoordinates[0]),yValues.push(yDatum),void 0!==nextYDatum&&(strokePoints.push(nextCoordinates[0]),yValues.push(yDatum))}})),fillPoints.push.apply(fillPoints,__spread$d(fillPhantomPoints.slice().reverse()))}))}},AreaSeries.prototype.updateFillSelection=function(){var updateFills=this.fillSelection.setData(this.fillSelectionData);updateFills.exit.remove();var enterFills=updateFills.enter.append(Path$1).each((function(path){path.lineJoin="round",path.stroke=void 0,path.pointerEvents=PointerEvents$1.None}));this.fillSelection=updateFills.merge(enterFills)},AreaSeries.prototype.updateFillNodes=function(){var _this=this,_a=this,fills=_a.fills,fillOpacity=_a.fillOpacity,strokeOpacity=_a.strokeOpacity,strokeWidth=_a.strokeWidth,shadow=_a.shadow,seriesItemEnabled=_a.seriesItemEnabled;this.fillSelection.each((function(shape,datum,index){shape.fill=fills[index%fills.length],shape.fillOpacity=fillOpacity,shape.strokeOpacity=strokeOpacity,shape.strokeWidth=strokeWidth,shape.lineDash=_this.lineDash,shape.lineDashOffset=_this.lineDashOffset,shape.fillShadow=shadow,shape.visible=!!seriesItemEnabled.get(datum.itemId),shape.opacity=_this.getOpacity(datum);var points=datum.points,path=shape.path;path.clear(),points.forEach((function(_a,i){var x=_a.x,y=_a.y;i>0?path.lineTo(x,y):path.moveTo(x,y)})),path.closePath()}))},AreaSeries.prototype.updateStrokeSelection=function(){var updateStrokes=this.strokeSelection.setData(this.strokeSelectionData);updateStrokes.exit.remove();var enterStrokes=updateStrokes.enter.append(Path$1).each((function(path){path.fill=void 0,path.lineJoin=path.lineCap="round",path.pointerEvents=PointerEvents$1.None}));this.strokeSelection=updateStrokes.merge(enterStrokes)},AreaSeries.prototype.updateStrokeNodes=function(){var _this=this;if(this.data){var strokes=this.strokes,strokeOpacity=this.strokeOpacity,seriesItemEnabled=this.seriesItemEnabled,moveTo=!0;this.strokeSelection.each((function(shape,datum,index){shape.visible=!!seriesItemEnabled.get(datum.itemId),shape.opacity=_this.getOpacity(datum),shape.stroke=strokes[index%strokes.length],shape.strokeWidth=_this.getStrokeWidth(_this.strokeWidth,datum),shape.strokeOpacity=strokeOpacity,shape.lineDash=_this.lineDash,shape.lineDashOffset=_this.lineDashOffset;var points=datum.points,yValues=datum.yValues,path=shape.path;path.clear();for(var i=0;i<points.length;i++){var _a=points[i],x=_a.x,y=_a.y;void 0===yValues[i]?moveTo=!0:moveTo?(path.moveTo(x,y),moveTo=!1):path.lineTo(x,y)}}))}},AreaSeries.prototype.updateMarkerSelection=function(){var MarkerShape=getMarker$1(this.marker.shape),data=MarkerShape?this.markerSelectionData:[],updateMarkers=this.markerSelection.setData(data);updateMarkers.exit.remove();var enterMarkers=updateMarkers.enter.append(MarkerShape);this.markerSelection=updateMarkers.merge(enterMarkers)},AreaSeries.prototype.updateMarkerNodes=function(){var _this=this;if(this.chart){var _a=this,xKey=_a.xKey,marker=_a.marker,seriesItemEnabled=_a.seriesItemEnabled,yKeys=_a.yKeys,fills=_a.fills,strokes=_a.strokes,highlightedDatum=_a.chart.highlightedDatum,_b=_a.highlightStyle,deprecatedFill=_b.fill,deprecatedStroke=_b.stroke,deprecatedStrokeWidth=_b.strokeWidth,_c=_b.item,_d=_c.fill,highlightedFill=void 0===_d?deprecatedFill:_d,_e=_c.stroke,highlightedStroke=void 0===_e?deprecatedStroke:_e,_f=_c.strokeWidth,highlightedDatumStrokeWidth=void 0===_f?deprecatedStrokeWidth:_f,size=marker.size,formatter=marker.formatter,markerStrokeWidth=void 0!==marker.strokeWidth?marker.strokeWidth:this.strokeWidth;this.markerSelection.each((function(node,datum){var yKeyIndex=yKeys.indexOf(datum.yKey),isDatumHighlighted=datum===highlightedDatum,fill=isDatumHighlighted&&void 0!==highlightedFill?highlightedFill:marker.fill||fills[yKeyIndex%fills.length],stroke=isDatumHighlighted&&void 0!==highlightedStroke?highlightedStroke:marker.stroke||strokes[yKeyIndex%fills.length],strokeWidth=isDatumHighlighted&&void 0!==highlightedDatumStrokeWidth?highlightedDatumStrokeWidth:markerStrokeWidth,format=void 0;formatter&&(format=formatter({datum:datum.datum,xKey,yKey:datum.yKey,fill,stroke,strokeWidth,size,highlighted:isDatumHighlighted})),node.fill=format&&format.fill||fill,node.stroke=format&&format.stroke||stroke,node.strokeWidth=format&&void 0!==format.strokeWidth?format.strokeWidth:strokeWidth,node.size=format&&void 0!==format.size?format.size:size,node.translationX=datum.point.x,node.translationY=datum.point.y,node.visible=marker.enabled&&node.size>0&&!!seriesItemEnabled.get(datum.yKey)&&!isNaN(datum.point.x)&&!isNaN(datum.point.y),node.opacity=_this.getOpacity(datum)}))}},AreaSeries.prototype.updateLabelSelection=function(){var updateLabels=this.labelSelection.setData(this.labelSelectionData);updateLabels.exit.remove();var enterLabels=updateLabels.enter.append(Text$2);this.labelSelection=updateLabels.merge(enterLabels)},AreaSeries.prototype.updateLabelNodes=function(){var _this=this;if(this.chart){var _a=this.label,labelEnabled=_a.enabled,fontStyle=_a.fontStyle,fontWeight=_a.fontWeight,fontSize=_a.fontSize,fontFamily=_a.fontFamily,color=_a.color;this.labelSelection.each((function(text,datum){var point=datum.point,label=datum.label;label&&labelEnabled?(text.fontStyle=fontStyle,text.fontWeight=fontWeight,text.fontSize=fontSize,text.fontFamily=fontFamily,text.textAlign=label.textAlign,text.textBaseline=label.textBaseline,text.text=label.text,text.x=point.x,text.y=point.y-10,text.fill=color,text.visible=!0,text.opacity=_this.getOpacity(datum)):text.visible=!1}))}},AreaSeries.prototype.getNodeData=function(){return this.markerSelectionData},AreaSeries.prototype.fireNodeClickEvent=function(event,datum){this.fireEvent({type:"nodeClick",event,series:this,datum:datum.datum,xKey:this.xKey,yKey:datum.yKey})},AreaSeries.prototype.getTooltipHtml=function(nodeDatum){var xKey=this.xKey,yKey=nodeDatum.yKey;if(!xKey||!yKey||!this.seriesItemEnabled.get(yKey))return"";var datum=nodeDatum.datum,xValue=datum[xKey],yValue=datum[yKey],xAxis=this.xAxis,yAxis=this.yAxis;if(!(xAxis&&yAxis&&isNumber$1(yValue)))return"";var _b=this,xName=_b.xName,yKeys=_b.yKeys,yNames=_b.yNames,yData=_b.yData,fills=_b.fills,strokes=_b.strokes,tooltip=_b.tooltip,marker=_b.marker,size=marker.size,markerFormatter=marker.formatter,markerStrokeWidth=marker.strokeWidth,markerFill=marker.fill,markerStroke=marker.stroke,xString=xAxis.formatDatum(xValue),yString=yAxis.formatDatum(yValue),yKeyIndex=yKeys.indexOf(yKey),processedYValue=yData[yKeyIndex][nodeDatum.index],yName=yNames[yKeyIndex],title=sanitizeHtml(yName),content=sanitizeHtml(xString+": "+yString),strokeWidth=void 0!==markerStrokeWidth?markerStrokeWidth:this.strokeWidth,fill=markerFill||fills[yKeyIndex%fills.length],stroke=markerStroke||strokes[yKeyIndex%fills.length],format=void 0;markerFormatter&&(format=markerFormatter({datum,xKey,yKey,fill,stroke,strokeWidth,size,highlighted:!1}));var color=format&&format.fill||fill,defaults={title,backgroundColor:color,content},tooltipRenderer=tooltip.renderer,tooltipFormat=tooltip.format;if(tooltipFormat||tooltipRenderer){var params={datum,xKey,xName,xValue,yKey,yValue,processedYValue,yName,color};if(tooltipFormat)return toTooltipHtml$1({content:interpolate(tooltipFormat,params)},defaults);if(tooltipRenderer)return toTooltipHtml$1(tooltipRenderer(params),defaults)}return toTooltipHtml$1(defaults)},AreaSeries.prototype.listSeriesItems=function(legendData){var _a=this,data=_a.data,id=_a.id,xKey=_a.xKey,yKeys=_a.yKeys,yNames=_a.yNames,seriesItemEnabled=_a.seriesItemEnabled,marker=_a.marker,fills=_a.fills,strokes=_a.strokes,fillOpacity=_a.fillOpacity,strokeOpacity=_a.strokeOpacity;data&&data.length&&xKey&&yKeys.length&&yKeys.forEach((function(yKey,index){legendData.push({id,itemId:yKey,enabled:seriesItemEnabled.get(yKey)||!1,label:{text:yNames[index]||yKeys[index]},marker:{shape:marker.shape,fill:marker.fill||fills[index%fills.length],stroke:marker.stroke||strokes[index%strokes.length],fillOpacity,strokeOpacity}})}))},AreaSeries.prototype.toggleSeriesItem=function(itemId,enabled){this.seriesItemEnabled.set(itemId,enabled),this.scheduleData()},AreaSeries.className="AreaSeries",AreaSeries.type="area",__decorate$P([reactive$1("dataChange")],AreaSeries.prototype,"fills",void 0),__decorate$P([reactive$1("dataChange")],AreaSeries.prototype,"strokes",void 0),__decorate$P([reactive$1("update")],AreaSeries.prototype,"fillOpacity",void 0),__decorate$P([reactive$1("update")],AreaSeries.prototype,"strokeOpacity",void 0),__decorate$P([reactive$1("update")],AreaSeries.prototype,"lineDash",void 0),__decorate$P([reactive$1("update")],AreaSeries.prototype,"lineDashOffset",void 0),__decorate$P([reactive$1("update")],AreaSeries.prototype,"xName",void 0),__decorate$P([reactive$1("update")],AreaSeries.prototype,"yNames",void 0),__decorate$P([reactive$1("update")],AreaSeries.prototype,"strokeWidth",void 0),__decorate$P([reactive$1("update")],AreaSeries.prototype,"shadow",void 0),AreaSeries}(CartesianSeries),__extends$1N=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__values$9=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(BarSeriesNodeTag){BarSeriesNodeTag[BarSeriesNodeTag.Bar=0]="Bar",BarSeriesNodeTag[BarSeriesNodeTag.Label=1]="Label"}(BarSeriesNodeTag||(BarSeriesNodeTag={})),function(BarLabelPlacement){BarLabelPlacement.Inside="inside",BarLabelPlacement.Outside="outside"}(BarLabelPlacement||(BarLabelPlacement={}));var BarSeriesLabel=function(_super){function BarSeriesLabel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.placement=BarLabelPlacement.Inside,_this}return __extends$1N(BarSeriesLabel,_super),__decorate$Q([reactive$1("change")],BarSeriesLabel.prototype,"formatter",void 0),__decorate$Q([reactive$1("change")],BarSeriesLabel.prototype,"placement",void 0),BarSeriesLabel}(Label$1),BarSeriesTooltip=function(_super){function BarSeriesTooltip(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1N(BarSeriesTooltip,_super),__decorate$Q([reactive$1("change")],BarSeriesTooltip.prototype,"renderer",void 0),BarSeriesTooltip}(SeriesTooltip);function flat(arr,target){return void 0===target&&(target=[]),arr.forEach((function(v){Array.isArray(v)?flat(v,target):target.push(v)})),target}var HistogramSeriesNodeTag,BarSeries=function(_super){function BarSeries(){var _a,_this=_super.call(this)||this;return _this.rectGroup=_this.pickGroup.appendChild(new Group$1),_this.labelGroup=_this.group.appendChild(new Group$1),_this.rectSelection=Selection$1.select(_this.rectGroup).selectAll(),_this.labelSelection=Selection$1.select(_this.labelGroup).selectAll(),_this.nodeData=[],_this.xData=[],_this.yData=[],_this.yDomain=[],_this.label=new BarSeriesLabel,_this.seriesItemEnabled=new Map,_this.tooltip=new BarSeriesTooltip,_this.flipXY=!1,_this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],_this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],_this.fillOpacity=1,_this.strokeOpacity=1,_this.lineDash=[0],_this.lineDashOffset=0,_this.groupScale=new BandScale$1,_this.directionKeys=((_a={})[ChartAxisDirection.X]=["xKey"],_a[ChartAxisDirection.Y]=["yKeys"],_a),_this._xKey="",_this._xName="",_this.cumYKeyCount=[],_this.flatYKeys=void 0,_this.hideInLegend=[],_this._yKeys=[],_this._grouped=!1,_this._yNames={},_this._strokeWidth=1,_this.addEventListener("update",_this.scheduleUpdate),_this.label.enabled=!1,_this.label.addEventListener("change",_this.scheduleUpdate,_this),_this}return __extends$1N(BarSeries,_super),BarSeries.prototype.getKeys=function(direction){var _this=this,directionKeys=this.directionKeys,keys=directionKeys&&directionKeys[this.flipXY?flipChartAxisDirection(direction):direction],values=[];return keys&&keys.forEach((function(key){var value=_this[key];value&&(Array.isArray(value)?values=values.concat(flat(value)):values.push(value))})),values},Object.defineProperty(BarSeries.prototype,"xKey",{get:function(){return this._xKey},set:function(value){this._xKey!==value&&(this._xKey=value,this.xData=[],this.scheduleData())},enumerable:!0,configurable:!0}),Object.defineProperty(BarSeries.prototype,"xName",{get:function(){return this._xName},set:function(value){this._xName!==value&&(this._xName=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(BarSeries.prototype,"yKeys",{get:function(){return this._yKeys},set:function(yKeys){var _this=this,flatYKeys=void 0;if(function is2dArray(array){return array.length>0&&Array.isArray(array[0])}(yKeys)||(flatYKeys=yKeys,yKeys=this.grouped?flatYKeys.map((function(k){return[k]})):[flatYKeys]),!equal(this._yKeys,yKeys)){this.flatYKeys=flatYKeys||void 0,this._yKeys=yKeys;var prevYKeyCount_1=0;this.cumYKeyCount=[];var visibleStacks_1=[];yKeys.forEach((function(stack,index){stack.length>0&&visibleStacks_1.push(String(index)),_this.cumYKeyCount.push(prevYKeyCount_1),prevYKeyCount_1+=stack.length})),this.yData=[];var seriesItemEnabled_1=this.seriesItemEnabled;seriesItemEnabled_1.clear(),yKeys.forEach((function(stack){stack.forEach((function(yKey){return seriesItemEnabled_1.set(yKey,!0)}))}));var groupScale=this.groupScale;groupScale.domain=visibleStacks_1,groupScale.padding=.1,groupScale.round=!0,this.scheduleData()}},enumerable:!0,configurable:!0}),Object.defineProperty(BarSeries.prototype,"grouped",{get:function(){return this._grouped},set:function(value){this._grouped!==value&&(this._grouped=value,this.flatYKeys&&(this.yKeys=this.flatYKeys))},enumerable:!0,configurable:!0}),Object.defineProperty(BarSeries.prototype,"yNames",{get:function(){return this._yNames},set:function(values){if(Array.isArray(values)&&this.flatYKeys){var map_1={};this.flatYKeys.forEach((function(k,i){map_1[k]=values[i]})),values=map_1}this._yNames=values,this.scheduleData()},enumerable:!0,configurable:!0}),BarSeries.prototype.setColors=function(fills,strokes){this.fills=fills,this.strokes=strokes},Object.defineProperty(BarSeries.prototype,"normalizedTo",{get:function(){return this._normalizedTo},set:function(value){var absValue=value?Math.abs(value):void 0;this._normalizedTo!==absValue&&(this._normalizedTo=absValue,this.scheduleData())},enumerable:!0,configurable:!0}),Object.defineProperty(BarSeries.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(value){this._strokeWidth!==value&&(this._strokeWidth=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(BarSeries.prototype,"shadow",{get:function(){return this._shadow},set:function(value){this._shadow!==value&&(this._shadow=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),BarSeries.prototype.onHighlightChange=function(){this.updateRectNodes()},BarSeries.prototype.processData=function(){var _this=this,xKey=this.xKey,yKeys=this.yKeys,seriesItemEnabled=this.seriesItemEnabled,xAxis=this.xAxis,data=xKey&&yKeys.length&&this.data?this.data:[];if(!xAxis)return!1;var keysFound=!0;this.xData=data.map((function(datum){return keysFound&&!(xKey in datum)&&(keysFound=!1,console.warn("The key '"+xKey+"' was not found in the data: ",datum)),_this.checkDatum(datum[xKey],!1)})),this.yData=data.map((function(datum){return yKeys.map((function(stack){return stack.map((function(yKey){keysFound&&!(yKey in datum)&&(keysFound=!1,console.warn("The key '"+yKey+"' was not found in the data: ",datum));var yDatum=_this.checkDatum(datum[yKey],!0);return seriesItemEnabled.get(yKey)&&void 0!==yDatum?yDatum:0}))}))}));var yMin,yMax,yMinMax=this.yData.map((function(group){return group.map((function(stack){return function findMinMax(values){var e_1,_a,min=0,max=0;try{for(var values_1=__values$4(values),values_1_1=values_1.next();!values_1_1.done;values_1_1=values_1.next()){var value=values_1_1.value;value<0?min+=value:max+=value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{values_1_1&&!values_1_1.done&&(_a=values_1.return)&&_a.call(values_1)}finally{if(e_1)throw e_1.error}}return{min,max}}(stack)}))})),yData=this.yData,normalizedTo=this.normalizedTo,yAbsTotal=this.yData.map((function(group){return group.map((function(stack){return stack.reduce((function(acc,stack){return acc+=Math.abs(stack)}),0)}))})),yLargestMinMax=this.findLargestMinMax(yMinMax);return normalizedTo&&isFinite(normalizedTo)?(yMin=yLargestMinMax.min<0?-normalizedTo:0,yMax=yLargestMinMax.max>0?normalizedTo:0,yData.forEach((function(group,i){group.forEach((function(stack,j){stack.forEach((function(y,k){stack[k]=y/yAbsTotal[i][j]*normalizedTo}))}))}))):(yMin=yLargestMinMax.min,yMax=yLargestMinMax.max),this.yDomain=this.fixNumericExtent([yMin,yMax],"y",this.yAxis),this.fireEvent({type:"dataProcessed"}),!0},BarSeries.prototype.findLargestMinMax=function(groups){var e_1,_a,e_2,_b,tallestStackMin=0,tallestStackMax=0;try{for(var groups_1=__values$9(groups),groups_1_1=groups_1.next();!groups_1_1.done;groups_1_1=groups_1.next()){var group=groups_1_1.value;try{for(var group_1=(e_2=void 0,__values$9(group)),group_1_1=group_1.next();!group_1_1.done;group_1_1=group_1.next()){var stack=group_1_1.value;stack.min<tallestStackMin&&(tallestStackMin=stack.min),stack.max>tallestStackMax&&(tallestStackMax=stack.max)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{group_1_1&&!group_1_1.done&&(_b=group_1.return)&&_b.call(group_1)}finally{if(e_2)throw e_2.error}}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{groups_1_1&&!groups_1_1.done&&(_a=groups_1.return)&&_a.call(groups_1)}finally{if(e_1)throw e_1.error}}return{min:tallestStackMin,max:tallestStackMax}},BarSeries.prototype.getDomain=function(direction){return this.flipXY&&(direction=flipChartAxisDirection(direction)),direction===ChartAxisDirection.X?this.xData:this.yDomain},BarSeries.prototype.fireNodeClickEvent=function(event,datum){this.fireEvent({type:"nodeClick",event,series:this,datum:datum.datum,xKey:this.xKey,yKey:datum.yKey})},BarSeries.prototype.getCategoryAxis=function(){return this.flipXY?this.yAxis:this.xAxis},BarSeries.prototype.getValueAxis=function(){return this.flipXY?this.xAxis:this.yAxis},BarSeries.prototype.createNodeData=function(){var _this=this,chart=this.chart,data=this.data,visible=this.visible,xAxis=this.getCategoryAxis(),yAxis=this.getValueAxis();if(!(chart&&data&&visible&&xAxis&&yAxis)||chart.layoutPending||chart.dataPending)return[];var flipXY=this.flipXY,xScale=xAxis.scale,yScale=yAxis.scale,_b=this,groupScale=_b.groupScale,yKeys=_b.yKeys,cumYKeyCount=_b.cumYKeyCount,fills=_b.fills,strokes=_b.strokes,strokeWidth=_b.strokeWidth,seriesItemEnabled=_b.seriesItemEnabled,xData=_b.xData,yData=_b.yData,label=_b.label,labelFontStyle=label.fontStyle,labelFontWeight=label.fontWeight,labelFontSize=label.fontSize,labelFontFamily=label.fontFamily,labelColor=label.color,labelFormatter=label.formatter,labelPlacement=label.placement;groupScale.range=[0,xScale.bandwidth];var barWidth=groupScale.bandwidth,nodeData=[];return xData.forEach((function(group,groupIndex){for(var seriesDatum=data[groupIndex],x=xScale.convert(group),groupYs=yData[groupIndex],stackIndex=0;stackIndex<groupYs.length;stackIndex++)for(var stackYs=groupYs[stackIndex],prevMinY=0,prevMaxY=0,levelIndex=0;levelIndex<stackYs.length;levelIndex++){var currY=+stackYs[levelIndex],yKey=yKeys[stackIndex][levelIndex],barX=x+groupScale.convert(String(stackIndex));if(xAxis.inRange(barX,barWidth)){var prevY=currY<0?prevMinY:prevMaxY,continuousY=yScale instanceof ContinuousScale$1,y=yScale.convert(prevY+currY,continuousY?clamper$1:void 0),bottomY=yScale.convert(prevY,continuousY?clamper$1:void 0),yValue=seriesDatum[yKey],labelText=void 0;labelText=labelFormatter?labelFormatter({value:isNumber$1(yValue)?yValue:void 0}):isNumber$1(yValue)?yValue.toFixed(2):"";var labelX=void 0,labelY=void 0;flipXY?(labelY=barX+barWidth/2,labelX=labelPlacement===BarLabelPlacement.Inside?y+(yValue>=0?-1:1)*Math.abs(bottomY-y)/2:y+4*(yValue>=0?1:-1)):(labelX=barX+barWidth/2,labelY=labelPlacement===BarLabelPlacement.Inside?y+(yValue>=0?1:-1)*Math.abs(bottomY-y)/2:y+(yValue>=0?-3:4));var labelTextAlign=void 0,labelTextBaseline=void 0;labelPlacement===BarLabelPlacement.Inside?(labelTextAlign="center",labelTextBaseline="middle"):(labelTextAlign=flipXY?yValue>=0?"start":"end":"center",labelTextBaseline=flipXY?"middle":yValue>=0?"bottom":"top");var colorIndex=cumYKeyCount[stackIndex]+levelIndex;nodeData.push({index:groupIndex,series:_this,itemId:yKey,datum:seriesDatum,yValue,yKey,x:flipXY?Math.min(y,bottomY):barX,y:flipXY?barX:Math.min(y,bottomY),width:flipXY?Math.abs(bottomY-y):barWidth,height:flipXY?barWidth:Math.abs(bottomY-y),fill:fills[colorIndex%fills.length],stroke:strokes[colorIndex%strokes.length],strokeWidth,label:seriesItemEnabled.get(yKey)&&labelText?{text:labelText,fontStyle:labelFontStyle,fontWeight:labelFontWeight,fontSize:labelFontSize,fontFamily:labelFontFamily,textAlign:labelTextAlign,textBaseline:labelTextBaseline,fill:labelColor,x:labelX,y:labelY}:void 0}),currY<0?prevMinY+=currY:prevMaxY+=currY}}})),this.nodeData=nodeData},BarSeries.prototype.update=function(){this.updatePending=!1,this.updateSelections(),this.updateNodes()},BarSeries.prototype.updateSelections=function(){this.nodeDataPending&&(this.nodeDataPending=!1,this.createNodeData(),this.updateRectSelection(),this.updateLabelSelection())},BarSeries.prototype.updateNodes=function(){this.group.visible=this.visible,this.updateRectNodes(),this.updateLabelNodes()},BarSeries.prototype.updateRectSelection=function(){var updateRects=this.rectSelection.setData(this.nodeData);updateRects.exit.remove();var enterRects=updateRects.enter.append(Rect).each((function(rect){rect.tag=BarSeriesNodeTag.Bar,rect.crisp=!0}));this.rectSelection=updateRects.merge(enterRects)},BarSeries.prototype.updateRectNodes=function(){var _this=this;if(this.chart){var _a=this,fills=_a.fills,strokes=_a.strokes,fillOpacity=_a.fillOpacity,strokeOpacity=_a.strokeOpacity,shadow=_a.shadow,formatter=_a.formatter,xKey=_a.xKey,flipXY=_a.flipXY,yKeys=_a.yKeys,highlightedDatum=_a.chart.highlightedDatum,_b=_a.highlightStyle,deprecatedFill=_b.fill,deprecatedStroke=_b.stroke,deprecatedStrokeWidth=_b.strokeWidth,_c=_b.item,_d=_c.fill,highlightedFill=void 0===_d?deprecatedFill:_d,_e=_c.stroke,highlightedStroke=void 0===_e?deprecatedStroke:_e,_f=_c.strokeWidth,highlightedDatumStrokeWidth=void 0===_f?deprecatedStrokeWidth:_f;this.rectSelection.each((function(rect,datum,index){for(var colorIndex=0,i=0,j=0;j<yKeys.length;j++){var stack=yKeys[j];if((i=stack.indexOf(datum.yKey))>=0){colorIndex+=i;break}colorIndex+=stack.length}var isDatumHighlighted=datum===highlightedDatum,fill=isDatumHighlighted&&void 0!==highlightedFill?highlightedFill:fills[colorIndex%fills.length],stroke=isDatumHighlighted&&void 0!==highlightedStroke?highlightedStroke:strokes[colorIndex%fills.length],strokeWidth=isDatumHighlighted&&void 0!==highlightedDatumStrokeWidth?highlightedDatumStrokeWidth:_this.getStrokeWidth(_this.strokeWidth,datum),format=void 0;formatter&&(format=formatter({datum:datum.datum,fill,stroke,strokeWidth,highlighted:isDatumHighlighted,xKey,yKey:datum.yKey})),rect.x=datum.x,rect.y=datum.y,rect.width=datum.width,rect.height=datum.height,rect.fill=format&&format.fill||fill,rect.stroke=format&&format.stroke||stroke,rect.strokeWidth=format&&void 0!==format.strokeWidth?format.strokeWidth:strokeWidth,rect.fillOpacity=fillOpacity,rect.strokeOpacity=strokeOpacity,rect.lineDash=_this.lineDash,rect.lineDashOffset=_this.lineDashOffset,rect.fillShadow=shadow,rect.visible=flipXY?datum.width>0:datum.height>0,rect.zIndex=isDatumHighlighted?Series.highlightedZIndex:index,rect.opacity=_this.getOpacity(datum)}))}},BarSeries.prototype.updateLabelSelection=function(){var updateLabels=this.labelSelection.setData(this.nodeData);updateLabels.exit.remove();var enterLabels=updateLabels.enter.append(Text$2).each((function(text){text.tag=BarSeriesNodeTag.Label,text.pointerEvents=PointerEvents$1.None}));this.labelSelection=updateLabels.merge(enterLabels)},BarSeries.prototype.updateLabelNodes=function(){var _this=this;if(this.chart){this.chart.highlightedDatum;var _b=this.label,labelEnabled=_b.enabled,fontStyle=_b.fontStyle,fontWeight=_b.fontWeight,fontSize=_b.fontSize,fontFamily=_b.fontFamily,color=_b.color;this.labelSelection.each((function(text,datum,index){var label=datum.label;label&&labelEnabled?(text.fontStyle=fontStyle,text.fontWeight=fontWeight,text.fontSize=fontSize,text.fontFamily=fontFamily,text.textAlign=label.textAlign,text.textBaseline=label.textBaseline,text.text=label.text,text.x=label.x,text.y=label.y,text.fill=color,text.visible=!0,text.opacity=_this.getOpacity(datum)):text.visible=!1}))}},BarSeries.prototype.getTooltipHtml=function(nodeDatum){var xKey=this.xKey,yKeys=this.yKeys,yData=this.yData,xAxis=this.getCategoryAxis(),yAxis=this.getValueAxis(),yKey=nodeDatum.yKey;if(!(yData.length&&xKey&&yKey&&xAxis&&yAxis))return"";for(var yGroup=yData[nodeDatum.index],fillIndex=0,i=0,j=0;j<yKeys.length;j++){var stack=yKeys[j];if((i=stack.indexOf(yKey))>=0){fillIndex+=i;break}fillIndex+=stack.length}var _b=this,xName=_b.xName,yNames=_b.yNames,fills=_b.fills,strokes=_b.strokes,tooltip=_b.tooltip,formatter=_b.formatter,tooltipRenderer=tooltip.renderer,datum=nodeDatum.datum,yName=yNames[yKey],fill=fills[fillIndex%fills.length],stroke=strokes[fillIndex%fills.length],strokeWidth=this.getStrokeWidth(this.strokeWidth,datum),xValue=datum[xKey],yValue=datum[yKey],processedYValue=yGroup[j][i],xString=sanitizeHtml(xAxis.formatDatum(xValue)),yString=sanitizeHtml(yAxis.formatDatum(yValue)),title=sanitizeHtml(yName),content=xString+": "+yString,format=void 0;formatter&&(format=formatter({datum,fill,stroke,strokeWidth,highlighted:!1,xKey,yKey}));var color=format&&format.fill||fill,defaults={title,backgroundColor:color,content};return tooltipRenderer?toTooltipHtml$1(tooltipRenderer({datum,xKey,xValue,xName,yKey,yValue,processedYValue,yName,color}),defaults):toTooltipHtml$1(defaults)},BarSeries.prototype.listSeriesItems=function(legendData){var _a=this,id=_a.id,data=_a.data,xKey=_a.xKey,yKeys=_a.yKeys,yNames=_a.yNames,cumYKeyCount=_a.cumYKeyCount,seriesItemEnabled=_a.seriesItemEnabled,hideInLegend=_a.hideInLegend,fills=_a.fills,strokes=_a.strokes,fillOpacity=_a.fillOpacity,strokeOpacity=_a.strokeOpacity;data&&data.length&&xKey&&yKeys.length&&this.yKeys.forEach((function(stack,stackIndex){stack.forEach((function(yKey,levelIndex){if(hideInLegend.indexOf(yKey)<0){var colorIndex=cumYKeyCount[stackIndex]+levelIndex;legendData.push({id,itemId:yKey,enabled:seriesItemEnabled.get(yKey)||!1,label:{text:yNames[yKey]||yKey},marker:{fill:fills[colorIndex%fills.length],stroke:strokes[colorIndex%strokes.length],fillOpacity,strokeOpacity}})}}))}))},BarSeries.prototype.toggleSeriesItem=function(itemId,enabled){var seriesItemEnabled=this.seriesItemEnabled;seriesItemEnabled.set(itemId,enabled);var yKeys=this.yKeys.map((function(stack){return stack.slice()}));seriesItemEnabled.forEach((function(enabled,yKey){enabled||yKeys.forEach((function(stack){var index=stack.indexOf(yKey);index>=0&&stack.splice(index,1)}))}));var visibleStacks=[];yKeys.forEach((function(stack,index){stack.length>0&&visibleStacks.push(String(index))})),this.groupScale.domain=visibleStacks,this.scheduleData()},BarSeries.className="BarSeries",BarSeries.type="bar",__decorate$Q([reactive$1("dataChange")],BarSeries.prototype,"flipXY",void 0),__decorate$Q([reactive$1("dataChange")],BarSeries.prototype,"fills",void 0),__decorate$Q([reactive$1("dataChange")],BarSeries.prototype,"strokes",void 0),__decorate$Q([reactive$1("update")],BarSeries.prototype,"fillOpacity",void 0),__decorate$Q([reactive$1("update")],BarSeries.prototype,"strokeOpacity",void 0),__decorate$Q([reactive$1("update")],BarSeries.prototype,"lineDash",void 0),__decorate$Q([reactive$1("update")],BarSeries.prototype,"lineDashOffset",void 0),__decorate$Q([reactive$1("update")],BarSeries.prototype,"formatter",void 0),__decorate$Q([reactive$1("layoutChange")],BarSeries.prototype,"hideInLegend",void 0),BarSeries}(CartesianSeries),__extends$1O=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$R=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$x=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},LineSeriesLabel=function(_super){function LineSeriesLabel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1O(LineSeriesLabel,_super),__decorate$R([reactive$1("change")],LineSeriesLabel.prototype,"formatter",void 0),LineSeriesLabel}(Label$1),LineSeriesTooltip=function(_super){function LineSeriesTooltip(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1O(LineSeriesTooltip,_super),__decorate$R([reactive$1("change")],LineSeriesTooltip.prototype,"renderer",void 0),__decorate$R([reactive$1("change")],LineSeriesTooltip.prototype,"format",void 0),LineSeriesTooltip}(SeriesTooltip),LineSeries=function(_super){function LineSeries(){var _this=_super.call(this)||this;_this.xDomain=[],_this.yDomain=[],_this.xData=[],_this.yData=[],_this.lineNode=new Path$1,_this.nodeSelection=Selection$1.select(_this.pickGroup).selectAll(),_this.nodeData=[],_this.marker=new CartesianSeriesMarker,_this.label=new LineSeriesLabel,_this.stroke="#874349",_this.lineDash=[0],_this.lineDashOffset=0,_this.strokeWidth=2,_this.strokeOpacity=1,_this.tooltip=new LineSeriesTooltip,_this._xKey="",_this.xName="",_this._yKey="",_this.yName="";var lineNode=_this.lineNode;lineNode.fill=void 0,lineNode.lineJoin="round",lineNode.pointerEvents=PointerEvents$1.None,_this.group.insertBefore(lineNode,_this.pickGroup),_this.addEventListener("update",_this.scheduleUpdate);var _a=_this,marker=_a.marker,label=_a.label;return marker.fill="#c16068",marker.stroke="#874349",marker.addPropertyListener("shape",_this.onMarkerShapeChange,_this),marker.addEventListener("change",_this.scheduleUpdate,_this),label.enabled=!1,label.addEventListener("change",_this.scheduleUpdate,_this),_this}return __extends$1O(LineSeries,_super),LineSeries.prototype.onMarkerShapeChange=function(){this.nodeSelection=this.nodeSelection.setData([]),this.nodeSelection.exit.remove(),this.fireEvent({type:"legendChange"})},LineSeries.prototype.setColors=function(fills,strokes){this.stroke=fills[0],this.marker.stroke=strokes[0],this.marker.fill=fills[0]},Object.defineProperty(LineSeries.prototype,"xKey",{get:function(){return this._xKey},set:function(value){this._xKey!==value&&(this._xKey=value,this.xData=[],this.scheduleData())},enumerable:!0,configurable:!0}),Object.defineProperty(LineSeries.prototype,"yKey",{get:function(){return this._yKey},set:function(value){this._yKey!==value&&(this._yKey=value,this.yData=[],this.scheduleData())},enumerable:!0,configurable:!0}),LineSeries.prototype.processData=function(){var _a=this,xAxis=_a.xAxis,yAxis=_a.yAxis,xKey=_a.xKey,yKey=_a.yKey,xData=_a.xData,yData=_a.yData,data=xKey&&yKey&&this.data?this.data:[];if(!xAxis||!yAxis)return!1;var isContinuousX=xAxis.scale instanceof ContinuousScale$1,isContinuousY=yAxis.scale instanceof ContinuousScale$1;xData.length=0,yData.length=0;for(var i=0,n=data.length;i<n;i++){var datum=data[i],x=datum[xKey],y=datum[yKey],xDatum=this.checkDatum(x,isContinuousX);if(!isContinuousX||void 0!==xDatum){xData.push(xDatum);var yDatum=this.checkDatum(y,isContinuousY);yData.push(yDatum)}}return this.xDomain=isContinuousX?this.fixNumericExtent(extent$1(xData,isContinuous$1),"x",xAxis):xData,this.yDomain=isContinuousY?this.fixNumericExtent(extent$1(yData,isContinuous$1),"y",yAxis):yData,!0},LineSeries.prototype.getDomain=function(direction){return direction===ChartAxisDirection.X?this.xDomain:this.yDomain},LineSeries.prototype.onHighlightChange=function(){this.updateNodes()},LineSeries.prototype.resetHighlight=function(){this.lineNode.strokeWidth=this.strokeWidth},LineSeries.prototype.update=function(){this.updatePending=!1,this.updateSelections(),this.updateNodes()},LineSeries.prototype.updateSelections=function(){this.nodeDataPending&&(this.nodeDataPending=!1,this.updateLinePath(),this.updateNodeSelection())},LineSeries.prototype.updateLinePath=function(){var _a,data=this.data,xAxis=this.xAxis,yAxis=this.yAxis;if(data&&xAxis&&yAxis){var _c=this,xData=_c.xData,yData=_c.yData,lineNode=_c.lineNode,label=_c.label,xKey=_c.xKey,yKey=_c.yKey,xScale=xAxis.scale,yScale=yAxis.scale,xOffset=(xScale.bandwidth||0)/2,yOffset=(yScale.bandwidth||0)/2,linePath=lineNode.path,nodeData=[];linePath.clear();for(var moveTo=!0,prevXInRange=void 0,nextXYDatums=void 0,i=0;i<xData.length;i++){var xyDatums=nextXYDatums||[xData[i],yData[i]];if(void 0===xyDatums[1])prevXInRange=void 0,moveTo=!0;else{var _d=__read$x(xyDatums,2),xDatum=_d[0],yDatum=_d[1],x=xScale.convert(xDatum)+xOffset;if(isNaN(x)){prevXInRange=void 0,moveTo=!0;continue}var tolerance=(xScale.bandwidth||.5*this.marker.size+(this.marker.strokeWidth||0))+1;nextXYDatums=void 0===yData[i+1]?void 0:[xData[i+1],yData[i+1]];var xInRange=xAxis.inRangeEx(x,0,tolerance),nextXInRange=nextXYDatums&&xAxis.inRangeEx(xScale.convert(nextXYDatums[0])+xOffset,0,tolerance);if(-1===xInRange&&-1===nextXInRange){moveTo=!0;continue}if(1===xInRange&&1===prevXInRange){moveTo=!0;continue}prevXInRange=xInRange;var y=yScale.convert(yDatum)+yOffset;moveTo?(linePath.moveTo(x,y),moveTo=!1):linePath.lineTo(x,y);var labelText=void 0;labelText=label.formatter?label.formatter({value:yDatum}):"number"==typeof yDatum&&isFinite(yDatum)?yDatum.toFixed(2):yDatum?String(yDatum):"";var seriesDatum=((_a={})[xKey]=xDatum,_a[yKey]=yDatum,_a);nodeData.push({series:this,datum:seriesDatum,point:{x,y},label:labelText?{text:labelText,fontStyle:label.fontStyle,fontWeight:label.fontWeight,fontSize:label.fontSize,fontFamily:label.fontFamily,textAlign:"center",textBaseline:"bottom",fill:label.color}:void 0})}}this.nodeData=nodeData}},LineSeries.prototype.updateNodeSelection=function(){var marker=this.marker,nodeData=marker.shape?this.nodeData:[],MarkerShape=getMarker$1(marker.shape),updateSelection=this.nodeSelection.setData(nodeData);updateSelection.exit.remove();var enterSelection=updateSelection.enter.append(Group$1);enterSelection.append(MarkerShape),enterSelection.append(Text$2),this.nodeSelection=updateSelection.merge(enterSelection)},LineSeries.prototype.updateNodes=function(){this.group.visible=this.visible,this.updateLineNode(),this.updateMarkerNodes(),this.updateTextNodes()},LineSeries.prototype.updateLineNode=function(){var lineNode=this.lineNode;lineNode.stroke=this.stroke,lineNode.strokeWidth=this.getStrokeWidth(this.strokeWidth),lineNode.strokeOpacity=this.strokeOpacity,lineNode.lineDash=this.lineDash,lineNode.lineDashOffset=this.lineDashOffset,lineNode.opacity=this.getOpacity()},LineSeries.prototype.updateMarkerNodes=function(){var _this=this;if(this.chart){var _a=this,marker=_a.marker,xKey=_a.xKey,yKey=_a.yKey,lineStroke=_a.stroke,highlightedDatum=_a.chart.highlightedDatum,_b=_a.highlightStyle,deprecatedFill=_b.fill,deprecatedStroke=_b.stroke,deprecatedStrokeWidth=_b.strokeWidth,_c=_b.item,_d=_c.fill,highlightedFill=void 0===_d?deprecatedFill:_d,_e=_c.stroke,highlightedStroke=void 0===_e?deprecatedStroke:_e,_f=_c.strokeWidth,highlightedDatumStrokeWidth=void 0===_f?deprecatedStrokeWidth:_f,size=marker.size,formatter=marker.formatter,markerStrokeWidth=void 0!==marker.strokeWidth?marker.strokeWidth:this.strokeWidth,MarkerShape=getMarker$1(marker.shape);this.nodeSelection.selectByClass(MarkerShape).each((function(node,datum){var isDatumHighlighted=datum===highlightedDatum,fill=isDatumHighlighted&&void 0!==highlightedFill?highlightedFill:marker.fill,stroke=isDatumHighlighted&&void 0!==highlightedStroke?highlightedStroke:marker.stroke||lineStroke,strokeWidth=isDatumHighlighted&&void 0!==highlightedDatumStrokeWidth?highlightedDatumStrokeWidth:markerStrokeWidth,format=void 0;formatter&&(format=formatter({datum:datum.datum,xKey,yKey,fill,stroke,strokeWidth,size,highlighted:isDatumHighlighted})),node.fill=format&&format.fill||fill,node.stroke=format&&format.stroke||stroke,node.strokeWidth=format&&void 0!==format.strokeWidth?format.strokeWidth:strokeWidth,node.size=format&&void 0!==format.size?format.size:size,node.translationX=datum.point.x,node.translationY=datum.point.y,node.opacity=_this.getOpacity(datum),node.visible=marker.enabled&&node.size>0}))}},LineSeries.prototype.updateTextNodes=function(){var _this=this;this.nodeSelection.selectByClass(Text$2).each((function(text,datum){var point=datum.point,label=datum.label,_a=_this.label,labelEnabled=_a.enabled,fontStyle=_a.fontStyle,fontWeight=_a.fontWeight,fontSize=_a.fontSize,fontFamily=_a.fontFamily,color=_a.color;label&&labelEnabled?(text.fontStyle=fontStyle,text.fontWeight=fontWeight,text.fontSize=fontSize,text.fontFamily=fontFamily,text.textAlign=label.textAlign,text.textBaseline=label.textBaseline,text.text=label.text,text.x=point.x,text.y=point.y-10,text.fill=color,text.visible=!0):text.visible=!1}))},LineSeries.prototype.getNodeData=function(){return this.nodeData},LineSeries.prototype.fireNodeClickEvent=function(event,datum){this.fireEvent({type:"nodeClick",event,series:this,datum:datum.datum,xKey:this.xKey,yKey:this.yKey})},LineSeries.prototype.getTooltipHtml=function(nodeDatum){var xKey=this.xKey,yKey=this.yKey,xAxis=this.xAxis,yAxis=this.yAxis;if(!(xKey&&yKey&&xAxis&&yAxis))return"";var xName=this.xName,yName=this.yName,tooltip=this.tooltip,marker=this.marker,tooltipRenderer=tooltip.renderer,tooltipFormat=tooltip.format,datum=nodeDatum.datum,xValue=datum[xKey],yValue=datum[yKey],xString=xAxis.formatDatum(xValue),yString=yAxis.formatDatum(yValue),title=sanitizeHtml(this.title||yName),content=sanitizeHtml(xString+": "+yString),markerFormatter=marker.formatter,fill=marker.fill,stroke=marker.stroke,markerStrokeWidth=marker.strokeWidth,size=marker.size,strokeWidth=void 0!==markerStrokeWidth?markerStrokeWidth:this.strokeWidth,format=void 0;markerFormatter&&(format=markerFormatter({datum,xKey,yKey,fill,stroke,strokeWidth,size,highlighted:!1}));var color=format&&format.fill||fill,defaults={title,backgroundColor:color,content};if(tooltipFormat||tooltipRenderer){var params={datum,xKey,xValue,xName,yKey,yValue,yName,title,color};if(tooltipFormat)return toTooltipHtml$1({content:interpolate(tooltipFormat,params)},defaults);if(tooltipRenderer)return toTooltipHtml$1(tooltipRenderer(params),defaults)}return toTooltipHtml$1(defaults)},LineSeries.prototype.listSeriesItems=function(legendData){var _a=this,id=_a.id,data=_a.data,xKey=_a.xKey,yKey=_a.yKey,yName=_a.yName,visible=_a.visible,title=_a.title,marker=_a.marker,stroke=_a.stroke,strokeOpacity=_a.strokeOpacity;data&&data.length&&xKey&&yKey&&legendData.push({id,itemId:void 0,enabled:visible,label:{text:title||yName||yKey},marker:{shape:marker.shape,fill:marker.fill||"rgba(0, 0, 0, 0)",stroke:marker.stroke||stroke||"rgba(0, 0, 0, 0)",fillOpacity:1,strokeOpacity}})},LineSeries.className="LineSeries",LineSeries.type="line",__decorate$R([reactive$1("layoutChange")],LineSeries.prototype,"title",void 0),__decorate$R([reactive$1("update")],LineSeries.prototype,"stroke",void 0),__decorate$R([reactive$1("update")],LineSeries.prototype,"lineDash",void 0),__decorate$R([reactive$1("update")],LineSeries.prototype,"lineDashOffset",void 0),__decorate$R([reactive$1("update")],LineSeries.prototype,"strokeWidth",void 0),__decorate$R([reactive$1("update")],LineSeries.prototype,"strokeOpacity",void 0),__decorate$R([reactive$1("update")],LineSeries.prototype,"xName",void 0),__decorate$R([reactive$1("update")],LineSeries.prototype,"yName",void 0),LineSeries}(CartesianSeries),__extends$1P=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$8=function(){return __assign$8=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$8.apply(this,arguments)},__decorate$S=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ScatterSeriesTooltip=function(_super){function ScatterSeriesTooltip(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1P(ScatterSeriesTooltip,_super),__decorate$S([reactive$1("change")],ScatterSeriesTooltip.prototype,"renderer",void 0),ScatterSeriesTooltip}(SeriesTooltip),ScatterSeries=function(_super){function ScatterSeries(){var _this=_super.call(this)||this;_this.xDomain=[],_this.yDomain=[],_this.xData=[],_this.yData=[],_this.validData=[],_this.sizeData=[],_this.sizeScale=new LinearScale$1,_this.nodeData=[],_this.markerSelection=Selection$1.select(_this.pickGroup).selectAll(),_this.labelSelection=Selection$1.select(_this.group).selectAll(),_this.marker=new CartesianSeriesMarker,_this.label=new Label$1,_this._fill="#c16068",_this._stroke="#874349",_this._strokeWidth=2,_this._fillOpacity=1,_this._strokeOpacity=1,_this.xKey="",_this.yKey="",_this.xName="",_this.yName="",_this.sizeName="Size",_this.labelName="Label",_this.tooltip=new ScatterSeriesTooltip;var _a=_this,marker=_a.marker,label=_a.label;return marker.addPropertyListener("shape",_this.onMarkerShapeChange,_this),marker.addEventListener("change",_this.scheduleUpdate,_this),_this.addPropertyListener("xKey",(function(){return _this.xData=[]})),_this.addPropertyListener("yKey",(function(){return _this.yData=[]})),_this.addPropertyListener("sizeKey",(function(){return _this.sizeData=[]})),label.enabled=!1,label.addEventListener("change",_this.scheduleUpdate,_this),label.addEventListener("dataChange",_this.scheduleData,_this),_this}return __extends$1P(ScatterSeries,_super),Object.defineProperty(ScatterSeries.prototype,"fill",{get:function(){return this._fill},set:function(value){this._fill!==value&&(this._fill=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(ScatterSeries.prototype,"stroke",{get:function(){return this._stroke},set:function(value){this._stroke!==value&&(this._stroke=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(ScatterSeries.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(value){this._strokeWidth!==value&&(this._strokeWidth=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(ScatterSeries.prototype,"fillOpacity",{get:function(){return this._fillOpacity},set:function(value){this._fillOpacity!==value&&(this._fillOpacity=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(ScatterSeries.prototype,"strokeOpacity",{get:function(){return this._strokeOpacity},set:function(value){this._strokeOpacity!==value&&(this._strokeOpacity=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),ScatterSeries.prototype.onHighlightChange=function(){this.updateMarkerNodes()},ScatterSeries.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.setData([]),this.markerSelection.exit.remove(),this.fireEvent({type:"legendChange"})},ScatterSeries.prototype.setColors=function(fills,strokes){this.fill=fills[0],this.stroke=strokes[0],this.marker.fill=fills[0],this.marker.stroke=strokes[0]},ScatterSeries.prototype.processData=function(){var _this=this,_a=this,xKey=_a.xKey,yKey=_a.yKey,sizeKey=_a.sizeKey,xAxis=(_a.labelKey,_a.xAxis),yAxis=_a.yAxis,marker=_a.marker;_a.label;if(!xAxis||!yAxis)return!1;var data=xKey&&yKey&&this.data?this.data:[],xScale=xAxis.scale,yScale=yAxis.scale,isContinuousX=xScale instanceof ContinuousScale$1,isContinuousY=yScale instanceof ContinuousScale$1;return this.validData=data.filter((function(d){return void 0!==_this.checkDatum(d[xKey],isContinuousX)&&void 0!==_this.checkDatum(d[yKey],isContinuousY)})),this.xData=this.validData.map((function(d){return d[xKey]})),this.yData=this.validData.map((function(d){return d[yKey]})),this.sizeData=sizeKey?this.validData.map((function(d){return d[sizeKey]})):[],this.sizeScale.domain=marker.domain?marker.domain:extent$1(this.sizeData,isContinuous$1)||[1,1],xAxis.scale instanceof ContinuousScale$1?this.xDomain=this.fixNumericExtent(extent$1(this.xData,isContinuous$1),"x",xAxis):this.xDomain=this.xData,yAxis.scale instanceof ContinuousScale$1?this.yDomain=this.fixNumericExtent(extent$1(this.yData,isContinuous$1),"y",yAxis):this.yDomain=this.yData,!0},ScatterSeries.prototype.getDomain=function(direction){return direction===ChartAxisDirection.X?this.xDomain:this.yDomain},ScatterSeries.prototype.getNodeData=function(){return this.nodeData},ScatterSeries.prototype.getLabelData=function(){return this.nodeData},ScatterSeries.prototype.fireNodeClickEvent=function(event,datum){this.fireEvent({type:"nodeClick",event,series:this,datum:datum.datum,xKey:this.xKey,yKey:this.yKey,sizeKey:this.sizeKey})},ScatterSeries.prototype.createNodeData=function(){var _a=this,chart=_a.chart,data=_a.data,visible=_a.visible,xAxis=_a.xAxis,yAxis=_a.yAxis,label=_a.label,labelKey=_a.labelKey;if(!(chart&&data&&visible&&xAxis&&yAxis)||chart.layoutPending||chart.dataPending)return[];var xScale=xAxis.scale,yScale=yAxis.scale,isContinuousX=xScale instanceof ContinuousScale$1,isContinuousY=yScale instanceof ContinuousScale$1,xOffset=(xScale.bandwidth||0)/2,yOffset=(yScale.bandwidth||0)/2,_b=this,xData=_b.xData,yData=_b.yData,validData=_b.validData,sizeData=_b.sizeData,sizeScale=_b.sizeScale,marker=_b.marker,nodeData=[];sizeScale.range=[marker.size,marker.maxSize];for(var font=label.getFont(),i=0;i<xData.length;i++){var xy=this.checkDomainXY(xData[i],yData[i],isContinuousX,isContinuousY);if(xy){var x=xScale.convert(xy[0])+xOffset,y=yScale.convert(xy[1])+yOffset;if(this.checkRangeXY(x,y,xAxis,yAxis)){var text=labelKey?String(validData[i][labelKey]):"",size=HdpiCanvas$1.getTextSize(text,font);nodeData.push({series:this,datum:validData[i],point:{x,y},size:sizeData.length?sizeScale.convert(sizeData[i]):marker.size,label:__assign$8({text},size)})}}}return this.nodeData=nodeData},ScatterSeries.prototype.update=function(){this.updatePending=!1,this.updateSelections(),this.updateNodes()},ScatterSeries.prototype.updateSelections=function(){this.nodeDataPending&&(this.nodeDataPending=!1,this.createNodeData(),this.updateMarkerSelection(),this.updateLabelSelection())},ScatterSeries.prototype.updateNodes=function(){this.group.visible=this.visible,this.updateMarkerNodes(),this.updateLabelNodes()},ScatterSeries.prototype.updateLabelSelection=function(){var placedLabels=this.chart&&this.chart.placeLabels().get(this)||[],updateLabels=this.labelSelection.setData(placedLabels);updateLabels.exit.remove();var enterLabels=updateLabels.enter.append(Text$2);this.labelSelection=updateLabels.merge(enterLabels)},ScatterSeries.prototype.updateMarkerSelection=function(){var MarkerShape=getMarker$1(this.marker.shape),updateMarkers=this.markerSelection.setData(this.nodeData);updateMarkers.exit.remove();var enterMarkers=updateMarkers.enter.append(MarkerShape);this.markerSelection=updateMarkers.merge(enterMarkers)},ScatterSeries.prototype.updateLabelNodes=function(){var label=this.label;this.labelSelection.each((function(text,datum){text.text=datum.text,text.fill=label.color,text.x=datum.x,text.y=datum.y,text.fontStyle=label.fontStyle,text.fontWeight=label.fontWeight,text.fontSize=label.fontSize,text.fontFamily=label.fontFamily,text.textAlign="left",text.textBaseline="top"}))},ScatterSeries.prototype.updateMarkerNodes=function(){var _this=this;if(this.chart){var _a=this,marker=_a.marker,xKey=_a.xKey,yKey=_a.yKey,strokeWidth=_a.strokeWidth,fillOpacity=_a.fillOpacity,strokeOpacity=_a.strokeOpacity,seriesFill=_a.fill,seriesStroke=_a.stroke,highlightedDatum=_a.chart.highlightedDatum,sizeScale=_a.sizeScale,sizeData=_a.sizeData,_b=_a.highlightStyle,deprecatedFill=_b.fill,deprecatedStroke=_b.stroke,deprecatedStrokeWidth=_b.strokeWidth,_c=_b.item,_d=_c.fill,highlightedFill=void 0===_d?deprecatedFill:_d,_e=_c.stroke,highlightedStroke=void 0===_e?deprecatedStroke:_e,_f=_c.strokeWidth,highlightedDatumStrokeWidth=void 0===_f?deprecatedStrokeWidth:_f,markerStrokeWidth=void 0!==marker.strokeWidth?marker.strokeWidth:strokeWidth,formatter=marker.formatter;sizeScale.range=[marker.size,marker.maxSize],this.markerSelection.each((function(node,datum,index){var isDatumHighlighted=datum===highlightedDatum,fill=isDatumHighlighted&&void 0!==highlightedFill?highlightedFill:marker.fill||seriesFill,stroke=isDatumHighlighted&&void 0!==highlightedStroke?highlightedStroke:marker.stroke||seriesStroke,strokeWidth=isDatumHighlighted&&void 0!==highlightedDatumStrokeWidth?highlightedDatumStrokeWidth:_this.getStrokeWidth(markerStrokeWidth,datum),size=sizeData.length?sizeScale.convert(sizeData[index]):marker.size,format=void 0;formatter&&(format=formatter({datum:datum.datum,xKey,yKey,fill,stroke,strokeWidth,size,highlighted:isDatumHighlighted})),node.fill=format&&format.fill||fill,node.stroke=format&&format.stroke||stroke,node.strokeWidth=format&&void 0!==format.strokeWidth?format.strokeWidth:strokeWidth,node.size=format&&void 0!==format.size?format.size:size,node.fillOpacity=void 0!==marker.fillOpacity?marker.fillOpacity:fillOpacity,node.strokeOpacity=void 0!==marker.strokeOpacity?marker.strokeOpacity:strokeOpacity,node.translationX=datum.point.x,node.translationY=datum.point.y,node.opacity=_this.getOpacity(datum),node.zIndex=isDatumHighlighted?Series.highlightedZIndex:index,node.visible=marker.enabled&&node.size>0}))}},ScatterSeries.prototype.getTooltipHtml=function(nodeDatum){var xKey=this.xKey,yKey=this.yKey,xAxis=this.xAxis,yAxis=this.yAxis;if(!(xKey&&yKey&&xAxis&&yAxis))return"";var _b=this,seriesFill=_b.fill,seriesStroke=_b.stroke,marker=_b.marker,tooltip=_b.tooltip,xName=_b.xName,yName=_b.yName,sizeKey=_b.sizeKey,sizeName=_b.sizeName,labelKey=_b.labelKey,labelName=_b.labelName,fill=marker.fill||seriesFill,stroke=marker.stroke||seriesStroke,strokeWidth=this.getStrokeWidth(marker.strokeWidth||this.strokeWidth,nodeDatum),formatter=this.marker.formatter,format=void 0;formatter&&(format=formatter({datum:nodeDatum,xKey,yKey,fill,stroke,strokeWidth,size:nodeDatum.size,highlighted:!1}));var color=format&&format.fill||fill||"gray",title=this.title||yName,datum=nodeDatum.datum,xValue=datum[xKey],yValue=datum[yKey],xString=sanitizeHtml(xAxis.formatDatum(xValue)),yString=sanitizeHtml(yAxis.formatDatum(yValue)),content="<b>"+sanitizeHtml(xName||xKey)+"</b>: "+xString+"<br><b>"+sanitizeHtml(yName||yKey)+"</b>: "+yString;sizeKey&&(content+="<br><b>"+sanitizeHtml(sizeName||sizeKey)+"</b>: "+sanitizeHtml(datum[sizeKey])),labelKey&&(content="<b>"+sanitizeHtml(labelName||labelKey)+"</b>: "+sanitizeHtml(datum[labelKey])+"<br>"+content);var defaults={title,backgroundColor:color,content},tooltipRenderer=tooltip.renderer;return tooltipRenderer?toTooltipHtml$1(tooltipRenderer({datum,xKey,xValue,xName,yKey,yValue,yName,sizeKey,sizeName,labelKey,labelName,title,color}),defaults):toTooltipHtml$1(defaults)},ScatterSeries.prototype.listSeriesItems=function(legendData){var _a=this,id=_a.id,data=_a.data,xKey=_a.xKey,yKey=_a.yKey,yName=_a.yName,title=_a.title,visible=_a.visible,marker=_a.marker,fill=_a.fill,stroke=_a.stroke,fillOpacity=_a.fillOpacity,strokeOpacity=_a.strokeOpacity;data&&data.length&&xKey&&yKey&&legendData.push({id,itemId:void 0,enabled:visible,label:{text:title||yName||yKey},marker:{shape:marker.shape,fill:marker.fill||fill||"rgba(0, 0, 0, 0)",stroke:marker.stroke||stroke||"rgba(0, 0, 0, 0)",fillOpacity:void 0!==marker.fillOpacity?marker.fillOpacity:fillOpacity,strokeOpacity:void 0!==marker.strokeOpacity?marker.strokeOpacity:strokeOpacity}})},ScatterSeries.className="ScatterSeries",ScatterSeries.type="scatter",__decorate$S([reactive$1("layoutChange")],ScatterSeries.prototype,"title",void 0),__decorate$S([reactive$1("dataChange")],ScatterSeries.prototype,"xKey",void 0),__decorate$S([reactive$1("dataChange")],ScatterSeries.prototype,"yKey",void 0),__decorate$S([reactive$1("dataChange")],ScatterSeries.prototype,"sizeKey",void 0),__decorate$S([reactive$1("dataChange")],ScatterSeries.prototype,"labelKey",void 0),ScatterSeries}(CartesianSeries),__extends$1Q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$T=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$y=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$e=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$y(arguments[i]));return ar};!function(HistogramSeriesNodeTag){HistogramSeriesNodeTag[HistogramSeriesNodeTag.Bin=0]="Bin",HistogramSeriesNodeTag[HistogramSeriesNodeTag.Label=1]="Label"}(HistogramSeriesNodeTag||(HistogramSeriesNodeTag={}));var HistogramSeriesLabel=function(_super){function HistogramSeriesLabel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1Q(HistogramSeriesLabel,_super),__decorate$T([reactive$1("change")],HistogramSeriesLabel.prototype,"formatter",void 0),HistogramSeriesLabel}(Label$1),aggregationFunctions={count:function(bin){return bin.data.length},sum:function(bin,yKey){return bin.data.reduce((function(acc,datum){return acc+datum[yKey]}),0)},mean:function(bin,yKey){return aggregationFunctions.sum(bin,yKey)/aggregationFunctions.count(bin,yKey)}},HistogramBin=function(){function HistogramBin(_a){var _b=__read$y(_a,2),domainMin=_b[0],domainMax=_b[1];this.data=[],this.aggregatedValue=0,this.frequency=0,this.domain=[domainMin,domainMax]}return HistogramBin.prototype.addDatum=function(datum){this.data.push(datum),this.frequency++},Object.defineProperty(HistogramBin.prototype,"domainWidth",{get:function(){var _a=__read$y(this.domain,2),domainMin=_a[0];return _a[1]-domainMin},enumerable:!0,configurable:!0}),Object.defineProperty(HistogramBin.prototype,"relativeHeight",{get:function(){return this.aggregatedValue/this.domainWidth},enumerable:!0,configurable:!0}),HistogramBin.prototype.calculateAggregatedValue=function(aggregationName,yKey){yKey||(aggregationName="count");var aggregationFunction=aggregationFunctions[aggregationName];this.aggregatedValue=aggregationFunction(this,yKey)},HistogramBin.prototype.getY=function(areaPlot){return areaPlot?this.relativeHeight:this.aggregatedValue},HistogramBin}(),HistogramSeriesTooltip=function(_super){function HistogramSeriesTooltip(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1Q(HistogramSeriesTooltip,_super),__decorate$T([reactive$1("change")],HistogramSeriesTooltip.prototype,"renderer",void 0),HistogramSeriesTooltip}(SeriesTooltip),HistogramSeries=function(_super){function HistogramSeries(){var _a,_this=_super.call(this)||this;return _this.rectGroup=_this.pickGroup.appendChild(new Group$1),_this.textGroup=_this.group.appendChild(new Group$1),_this.rectSelection=Selection$1.select(_this.rectGroup).selectAll(),_this.textSelection=Selection$1.select(_this.textGroup).selectAll(),_this.binnedData=[],_this.xDomain=[],_this.yDomain=[],_this.label=new HistogramSeriesLabel,_this.seriesItemEnabled=!0,_this.tooltip=new HistogramSeriesTooltip,_this.fill=void 0,_this.stroke=void 0,_this.fillOpacity=1,_this.strokeOpacity=1,_this.lineDash=[0],_this.lineDashOffset=0,_this.directionKeys=((_a={})[ChartAxisDirection.X]=["xKey"],_a[ChartAxisDirection.Y]=["yKey"],_a),_this._xKey="",_this._areaPlot=!1,_this._bins=void 0,_this._aggregation="count",_this._binCount=void 0,_this._xName="",_this._yKey="",_this._yName="",_this._strokeWidth=1,_this.label.enabled=!1,_this.label.addEventListener("change",_this.scheduleUpdate,_this),_this}return __extends$1Q(HistogramSeries,_super),HistogramSeries.prototype.getKeys=function(direction){var _this=this,directionKeys=this.directionKeys,keys=directionKeys&&directionKeys[direction],values=[];return keys&&keys.forEach((function(key){var value=_this[key];value&&(Array.isArray(value)?values.push.apply(values,__spread$e(value)):values.push(value))})),values},Object.defineProperty(HistogramSeries.prototype,"xKey",{get:function(){return this._xKey},set:function(value){this._xKey!==value&&(this._xKey=value,this.scheduleData())},enumerable:!0,configurable:!0}),Object.defineProperty(HistogramSeries.prototype,"areaPlot",{get:function(){return this._areaPlot},set:function(c){this._areaPlot=c,this.scheduleData()},enumerable:!0,configurable:!0}),Object.defineProperty(HistogramSeries.prototype,"bins",{get:function(){return this._bins},set:function(bins){this._bins=bins,this.scheduleData()},enumerable:!0,configurable:!0}),Object.defineProperty(HistogramSeries.prototype,"aggregation",{get:function(){return this._aggregation},set:function(aggregation){this._aggregation=aggregation,this.scheduleData()},enumerable:!0,configurable:!0}),Object.defineProperty(HistogramSeries.prototype,"binCount",{get:function(){return this._binCount},set:function(binCount){this._binCount=binCount,this.scheduleData()},enumerable:!0,configurable:!0}),Object.defineProperty(HistogramSeries.prototype,"xName",{get:function(){return this._xName},set:function(value){this._xName!==value&&(this._xName=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(HistogramSeries.prototype,"yKey",{get:function(){return this._yKey},set:function(yKey){this._yKey=yKey,this.seriesItemEnabled=!0,this.scheduleData()},enumerable:!0,configurable:!0}),Object.defineProperty(HistogramSeries.prototype,"yName",{get:function(){return this._yName},set:function(values){this._yName=values,this.scheduleData()},enumerable:!0,configurable:!0}),Object.defineProperty(HistogramSeries.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(value){this._strokeWidth!==value&&(this._strokeWidth=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(HistogramSeries.prototype,"shadow",{get:function(){return this._shadow},set:function(value){this._shadow!==value&&(this._shadow=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),HistogramSeries.prototype.onHighlightChange=function(){this.updateRectNodes()},HistogramSeries.prototype.setColors=function(fills,strokes){this.fill=fills[0],this.stroke=strokes[0]},HistogramSeries.prototype.deriveBins=function(){var _this=this,bins=this.bins;this.binCount;if(!this.data)return[];if(bins)return bins;var xData=this.data.map((function(datum){return datum[_this.xKey]})),xDomain=this.fixNumericExtent(extent$1(xData,isContinuous$1),"x"),binStarts=ticks$1(xDomain[0],xDomain[1],this.binCount||10),binSize=tickStep$1(xDomain[0],xDomain[1],this.binCount||10),firstBinEnd=binStarts[0];return __spread$e([[firstBinEnd-binSize,firstBinEnd]],binStarts.map((function(n){return[n,n+binSize]})))},HistogramSeries.prototype.placeDataInBins=function(data){var _this=this,xKey=this.xKey,derivedBins=this.deriveBins(),sortedData=data.slice().sort((function(a,b){return a[xKey]<b[xKey]?-1:a[xKey]>b[xKey]?1:0})),currentBin=0,bins=[new HistogramBin(derivedBins[0])];loop:for(var i=0,ln=sortedData.length;i<ln;i++){for(var datum=sortedData[i];datum[xKey]>derivedBins[currentBin][1];){var bin=derivedBins[++currentBin];if(!bin)break loop;bins.push(new HistogramBin(bin))}bins[currentBin].addDatum(datum)}return bins.forEach((function(b){return b.calculateAggregatedValue(_this._aggregation,_this.yKey)})),bins},Object.defineProperty(HistogramSeries.prototype,"xMax",{get:function(){var _this=this;return this.data&&this.data.reduce((function(acc,datum){return Math.max(acc,datum[_this.xKey])}),Number.NEGATIVE_INFINITY)},enumerable:!0,configurable:!0}),HistogramSeries.prototype.processData=function(){var _this=this,xKey=this.xKey,data=this.data;this.binnedData=this.placeDataInBins(xKey&&data?data:[]);var yMinMax=extent$1(this.binnedData.map((function(b){return b.getY(_this.areaPlot)})),isContinuous$1);this.yDomain=this.fixNumericExtent([0,yMinMax?yMinMax[1]:1],"y");var firstBin=this.binnedData[0],lastBin=this.binnedData[this.binnedData.length-1],xMin=firstBin.domain[0],xMax=lastBin.domain[1];return this.xDomain=[xMin,xMax],this.fireEvent({type:"dataProcessed"}),!0},HistogramSeries.prototype.getDomain=function(direction){return direction===ChartAxisDirection.X?this.xDomain:this.yDomain},HistogramSeries.prototype.fireNodeClickEvent=function(event,datum){this.fireEvent({type:"nodeClick",event,series:this,datum:datum.datum,xKey:this.xKey})},HistogramSeries.prototype.update=function(){this.updatePending=!1,this.updateSelections(),this.updateNodes()},HistogramSeries.prototype.updateSelections=function(){if(this.nodeDataPending){this.nodeDataPending=!1;var nodeData=this.createNodeData();this.updateRectSelection(nodeData),this.updateTextSelection(nodeData)}},HistogramSeries.prototype.updateNodes=function(){this.group.visible=this.visible,this.updateRectNodes(),this.updateTextNodes()},HistogramSeries.prototype.createNodeData=function(){var _this=this,xAxis=this.xAxis,yAxis=this.yAxis;if(!this.seriesItemEnabled||!xAxis||!yAxis)return[];var xScale=xAxis.scale,yScale=yAxis.scale,fill=this.fill,stroke=this.stroke,strokeWidth=this.strokeWidth,nodeData=[],_c=this.label,_d=_c.formatter,labelFormatter=void 0===_d?function(params){return String(params.value)}:_d,labelFontStyle=_c.fontStyle,labelFontWeight=_c.fontWeight,labelFontSize=_c.fontSize,labelFontFamily=_c.fontFamily,labelColor=_c.color;return this.binnedData.forEach((function(binOfData){var total=binOfData.aggregatedValue,frequency=binOfData.frequency,_a=__read$y(binOfData.domain,2),xDomainMin=_a[0],xDomainMax=_a[1],relativeHeight=binOfData.relativeHeight,xMinPx=xScale.convert(xDomainMin),xMaxPx=xScale.convert(xDomainMax),y=_this.areaPlot?relativeHeight:_this.yKey?total:frequency,yZeroPx=yScale.convert(0),yMaxPx=yScale.convert(y),w=xMaxPx-xMinPx,h=Math.abs(yMaxPx-yZeroPx),selectionDatumLabel=0!==y?{text:labelFormatter({value:binOfData.aggregatedValue}),fontStyle:labelFontStyle,fontWeight:labelFontWeight,fontSize:labelFontSize,fontFamily:labelFontFamily,fill:labelColor,x:xMinPx+w/2,y:yMaxPx+h/2}:void 0;nodeData.push({series:_this,datum:binOfData,x:xMinPx,y:yMaxPx,width:w,height:h,fill,stroke,strokeWidth,label:selectionDatumLabel})})),nodeData},HistogramSeries.prototype.updateRectSelection=function(nodeData){var updateRects=this.rectSelection.setData(nodeData);updateRects.exit.remove();var enterRects=updateRects.enter.append(Rect).each((function(rect){rect.tag=HistogramSeriesNodeTag.Bin,rect.crisp=!0}));this.rectSelection=updateRects.merge(enterRects)},HistogramSeries.prototype.updateRectNodes=function(){var _this=this;if(this.chart){var _a=this,fillOpacity=_a.fillOpacity,strokeOpacity=_a.strokeOpacity,shadow=_a.shadow,highlightedDatum=_a.chart.highlightedDatum,_b=_a.highlightStyle,deprecatedFill=_b.fill,deprecatedStroke=_b.stroke,deprecatedStrokeWidth=_b.strokeWidth,_c=_b.item,_d=_c.fill,highlightedFill=void 0===_d?deprecatedFill:_d,_e=_c.stroke,highlightedStroke=void 0===_e?deprecatedStroke:_e,_f=_c.strokeWidth,highlightedDatumStrokeWidth=void 0===_f?deprecatedStrokeWidth:_f;this.rectSelection.each((function(rect,datum,index){var isDatumHighlighted=datum===highlightedDatum,strokeWidth=isDatumHighlighted&&void 0!==highlightedDatumStrokeWidth?highlightedDatumStrokeWidth:_this.getStrokeWidth(datum.strokeWidth,datum);rect.x=datum.x,rect.y=datum.y,rect.width=datum.width,rect.height=datum.height,rect.fill=isDatumHighlighted&&void 0!==highlightedFill?highlightedFill:datum.fill,rect.stroke=isDatumHighlighted&&void 0!==highlightedStroke?highlightedStroke:datum.stroke,rect.fillOpacity=fillOpacity,rect.strokeOpacity=strokeOpacity,rect.strokeWidth=strokeWidth,rect.lineDash=_this.lineDash,rect.lineDashOffset=_this.lineDashOffset,rect.fillShadow=shadow,rect.zIndex=isDatumHighlighted?Series.highlightedZIndex:index,rect.visible=datum.height>0,rect.opacity=_this.getOpacity(datum)}))}},HistogramSeries.prototype.updateTextSelection=function(nodeData){var updateTexts=this.textSelection.setData(nodeData);updateTexts.exit.remove();var enterTexts=updateTexts.enter.append(Text$2).each((function(text){text.tag=HistogramSeriesNodeTag.Label,text.pointerEvents=PointerEvents$1.None,text.textAlign="center",text.textBaseline="middle"}));this.textSelection=updateTexts.merge(enterTexts)},HistogramSeries.prototype.updateTextNodes=function(){var labelEnabled=this.label.enabled;this.textSelection.each((function(text,datum){var label=datum.label;label&&labelEnabled?(text.text=label.text,text.x=label.x,text.y=label.y,text.fontStyle=label.fontStyle,text.fontWeight=label.fontWeight,text.fontSize=label.fontSize,text.fontFamily=label.fontFamily,text.fill=label.fill,text.visible=!0):text.visible=!1}))},HistogramSeries.prototype.getTooltipHtml=function(nodeDatum){var xKey=this.xKey,yKey=this.yKey,xAxis=this.xAxis,yAxis=this.yAxis;if(!xKey||!xAxis||!yAxis)return"";var _b=this,xName=_b.xName,yName=_b.yName,color=_b.fill,tooltip=_b.tooltip,aggregation=_b.aggregation,tooltipRenderer=tooltip.renderer,bin=nodeDatum.datum,aggregatedValue=bin.aggregatedValue,frequency=bin.frequency,_c=__read$y(bin.domain,2),rangeMin=_c[0],rangeMax=_c[1],title=sanitizeHtml(xName||xKey)+": "+xAxis.formatDatum(rangeMin)+" - "+xAxis.formatDatum(rangeMax),content=yKey?"<b>"+sanitizeHtml(yName||yKey)+" ("+aggregation+")</b>: "+yAxis.formatDatum(aggregatedValue)+"<br>":"",defaults={title,backgroundColor:color,content:content+="<b>Frequency</b>: "+frequency};return tooltipRenderer?toTooltipHtml$1(tooltipRenderer({datum:bin,xKey,xValue:bin.domain,xName,yKey,yValue:bin.aggregatedValue,yName,color}),defaults):toTooltipHtml$1(defaults)},HistogramSeries.prototype.listSeriesItems=function(legendData){var _a=this,id=_a.id,data=_a.data,yKey=_a.yKey,yName=_a.yName,seriesItemEnabled=_a.seriesItemEnabled,fill=_a.fill,stroke=_a.stroke,fillOpacity=_a.fillOpacity,strokeOpacity=_a.strokeOpacity;data&&data.length&&legendData.push({id,itemId:yKey,enabled:seriesItemEnabled,label:{text:yName||yKey||"Frequency"},marker:{fill:fill||"rgba(0, 0, 0, 0)",stroke:stroke||"rgba(0, 0, 0, 0)",fillOpacity,strokeOpacity}})},HistogramSeries.prototype.toggleSeriesItem=function(itemId,enabled){itemId===this.yKey&&(this.seriesItemEnabled=enabled),this.scheduleData()},HistogramSeries.className="HistogramSeries",HistogramSeries.type="histogram",__decorate$T([reactive$1("dataChange")],HistogramSeries.prototype,"fill",void 0),__decorate$T([reactive$1("dataChange")],HistogramSeries.prototype,"stroke",void 0),__decorate$T([reactive$1("layoutChange")],HistogramSeries.prototype,"fillOpacity",void 0),__decorate$T([reactive$1("layoutChange")],HistogramSeries.prototype,"strokeOpacity",void 0),__decorate$T([reactive$1("update")],HistogramSeries.prototype,"lineDash",void 0),__decorate$T([reactive$1("update")],HistogramSeries.prototype,"lineDashOffset",void 0),HistogramSeries}(CartesianSeries),__extends$1R=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$U=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HierarchySeries=function(_super){function HierarchySeries(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.data=void 0,_this}return __extends$1R(HierarchySeries,_super),__decorate$U([reactive$1("dataChange")],HierarchySeries.prototype,"data",void 0),HierarchySeries}(Series),__extends$1S=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$V=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DropShadow=function(_super){function DropShadow(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.enabled=!0,_this.color="rgba(0, 0, 0, 0.5)",_this.xOffset=0,_this.yOffset=0,_this.blur=5,_this}return __extends$1S(DropShadow,_super),__decorate$V([reactive$1("change")],DropShadow.prototype,"enabled",void 0),__decorate$V([reactive$1("change")],DropShadow.prototype,"color",void 0),__decorate$V([reactive$1("change")],DropShadow.prototype,"xOffset",void 0),__decorate$V([reactive$1("change")],DropShadow.prototype,"yOffset",void 0),__decorate$V([reactive$1("change")],DropShadow.prototype,"blur",void 0),DropShadow}(Observable$1);function slice(parent,x0,y0,x1,y1){var nodes=parent.children,k=parent.value&&(y1-y0)/parent.value;nodes.forEach((function(node){node.x0=x0,node.x1=x1,node.y0=y0,node.y1=y0+=node.value*k}))}function dice(parent,x0,y0,x1,y1){var nodes=parent.children,k=parent.value&&(x1-x0)/parent.value;nodes.forEach((function(node){node.x0=x0,node.x1=x0+=node.value*k,node.y0=y0,node.y1=y1}))}function roundNode(node){node.x0=Math.round(node.x0),node.y0=Math.round(node.y0),node.x1=Math.round(node.x1),node.y1=Math.round(node.y1)}var squarify=function custom(ratio){function squarify(parent,x0,y0,x1,y1){!function squarifyRatio(ratio,parent,x0,y0,x1,y1){for(var dx,dy,nodeValue,sumValue,minValue,maxValue,newRatio,minRatio,alpha,beta,rows=[],nodes=parent.children,n=nodes.length,value=parent.value,i0=0,i1=0;i0<n;){dx=x1-x0,dy=y1-y0;do{sumValue=nodes[i1++].value}while(!sumValue&&i1<n);for(minValue=maxValue=sumValue,beta=sumValue*sumValue*(alpha=Math.max(dy/dx,dx/dy)/(value*ratio)),minRatio=Math.max(maxValue/beta,beta/minValue);i1<n;++i1){if((nodeValue=nodes[i1].value)<minValue&&(minValue=nodeValue),nodeValue>maxValue&&(maxValue=nodeValue),beta=(sumValue+=nodeValue)*sumValue*alpha,(newRatio=Math.max(maxValue/beta,beta/minValue))>minRatio){sumValue-=nodeValue;break}minRatio=newRatio}var row={value:sumValue,dice:dx<dy,children:nodes.slice(i0,i1)};rows.push(row),row.dice?dice(row,x0,y0,x1,value?y0+=dy*sumValue/value:y1):slice(row,x0,y0,value?x0+=dx*sumValue/value:x1,y1),value-=sumValue,i0=i1}return rows}(ratio,parent,x0,y0,x1,y1)}return squarify.ratio=function(x){return custom((x=+x)>1?x:1)},squarify}((1+Math.sqrt(5))/2),Treemap=function(){function Treemap(){this.paddingStack=[0],this.dx=1,this.dy=1,this.round=!0,this.tile=squarify,this.paddingInner=function(_){return 0},this.paddingTop=function(_){return 0},this.paddingRight=function(_){return 0},this.paddingBottom=function(_){return 0},this.paddingLeft=function(_){return 0}}return Object.defineProperty(Treemap.prototype,"size",{get:function(){return[this.dx,this.dy]},set:function(size){this.dx=size[0],this.dy=size[1]},enumerable:!0,configurable:!0}),Treemap.prototype.processData=function(root){return root.x0=0,root.y0=0,root.x1=this.dx,root.y1=this.dy,root.eachBefore(this.positionNode.bind(this)),this.paddingStack=[0],this.round&&root.eachBefore(roundNode),root},Treemap.prototype.positionNode=function(node){var p=this.paddingStack[node.depth],x0=node.x0+p,y0=node.y0+p,x1=node.x1-p,y1=node.y1-p;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1,node.children&&(p=this.paddingStack[node.depth+1]=this.paddingInner(node)/2,x0+=this.paddingLeft(node)-p,y0+=this.paddingTop(node)-p,(x1-=this.paddingRight(node)-p)<x0&&(x0=x1=(x0+x1)/2),(y1-=this.paddingBottom(node)-p)<y0&&(y0=y1=(y0+y1)/2),this.tile(node,x0,y0,x1,y1))},Treemap}(),HierarchyNode=function(){function HierarchyNode(datum){this.value=0,this.depth=0,this.height=0,this.parent=void 0,this.children=void 0,this.datum=datum}return HierarchyNode.prototype.countFn=function(node){var sum=0,children=node.children;if(children&&children.length)for(var i=children.length;--i>=0;)sum+=children[i].value;else sum=1;node.value=sum},HierarchyNode.prototype.count=function(){return this.eachAfter(this.countFn)},HierarchyNode.prototype.each=function(callback,scope){var _this=this,index=-1;return this.iterator((function(node){callback.call(scope,node,++index,_this)})),this},HierarchyNode.prototype.eachAfter=function(callback,scope){for(var node=this,nodes=[node],next=[];node=nodes.pop();){next.push(node);var children=node.children;if(children)for(var i=0,n=children.length;i<n;++i)nodes.push(children[i])}for(var index=-1;node=next.pop();)callback.call(scope,node,++index,this);return this},HierarchyNode.prototype.eachBefore=function(callback,scope){for(var node=this,nodes=[node],index=-1;node=nodes.pop();){callback.call(scope,node,++index,this);var children=node.children;if(children)for(var i=children.length-1;i>=0;--i){var child=children[i];nodes.push(child)}}return this},HierarchyNode.prototype.find=function(callback,scope){var result,_this=this,index=-1;return this.iterator((function(node){if(callback.call(scope,node,++index,_this))return result=node,!1})),result},HierarchyNode.prototype.sum=function(value){return this.eachAfter((function(node){var sum=+value(node.datum)||0,children=node.children;if(children)for(var i=children.length;--i>=0;)sum+=children[i].value;node.value=sum}))},HierarchyNode.prototype.sort=function(compare){return this.eachBefore((function(node){node.children&&node.children.sort(compare)}))},HierarchyNode.prototype.path=function(end){for(var start=this,ancestor=function leastCommonAncestor(a,b){if(!a||!b)return;if(a===b)return a;var aNodes=a.ancestors(),bNodes=b.ancestors(),c=void 0;a=aNodes.pop(),b=bNodes.pop();for(;a===b;)c=a,a=aNodes.pop(),b=bNodes.pop();return c}(start,end),nodes=[start];start!==ancestor;)start=start.parent,nodes.push(start);for(var k=nodes.length;end!==ancestor;)nodes.splice(k,0,end),end=end.parent;return nodes},HierarchyNode.prototype.ancestors=function(){for(var node=this,nodes=[node];node=node.parent;)nodes.push(node);return nodes},HierarchyNode.prototype.descendants=function(){var nodes=[];return this.iterator((function(node){return nodes.push(node)})),nodes},HierarchyNode.prototype.leaves=function(){var leaves=[];return this.eachBefore((function(node){node.children||leaves.push(node)})),leaves},HierarchyNode.prototype.links=function(){var root=this,links=[];return root.each((function(node){node!==root&&links.push({source:node.parent,target:node})})),links},HierarchyNode.prototype.copy=function(){},HierarchyNode.prototype.iterator=function(callback){var current,node=this,next=[node];doLoop:do{for(current=next.reverse(),next=[];node=current.pop();){if(!1===callback(node))break doLoop;var children=node.children;if(children)for(var i=0,n=children.length;i<n;++i)next.push(children[i])}}while(next.length)},HierarchyNode}();function hierarchy(data,children){data instanceof Map?(data=[void 0,data],void 0===children&&(children=mapChildren)):void 0===children&&(children=objectChildren);for(var node,child,childs,i,n,root=new HierarchyNode(data),nodes=[root];node=nodes.pop();)if((childs=children(node.datum))&&(n=(childs=Array.from(childs)).length))for(node.children=childs,i=n-1;i>=0;--i)nodes.push(child=childs[i]=new HierarchyNode(childs[i])),child.parent=node,child.depth=node.depth+1;return root.eachBefore(computeHeight)}function computeHeight(node){var height=0;do{node.height=height}while((node=node.parent)&&node.height<++height)}function mapChildren(d){return Array.isArray(d)?d[1]:void 0}function objectChildren(d){return d.children}var TextNodeTag,__extends$1T=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$W=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TreemapSeriesTooltip=function(_super){function TreemapSeriesTooltip(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1T(TreemapSeriesTooltip,_super),__decorate$W([reactive$1("change")],TreemapSeriesTooltip.prototype,"renderer",void 0),TreemapSeriesTooltip}(SeriesTooltip),TreemapSeriesLabel=function(_super){function TreemapSeriesLabel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.padding=10,_this}return __extends$1T(TreemapSeriesLabel,_super),__decorate$W([reactive$1("change")],TreemapSeriesLabel.prototype,"padding",void 0),TreemapSeriesLabel}(Label$1);!function(TextNodeTag){TextNodeTag[TextNodeTag.Name=0]="Name",TextNodeTag[TextNodeTag.Value=1]="Value"}(TextNodeTag||(TextNodeTag={}));var PieNodeTag,TreemapSeries=function(_super){function TreemapSeries(){var label,shadow,_this=_super.call(this)||this;return _this.groupSelection=Selection$1.select(_this.pickGroup).selectAll(),_this.labelMap=new Map,_this.layout=new Treemap,_this.title=((label=new TreemapSeriesLabel).color="white",label.fontWeight="bold",label.fontSize=12,label.fontFamily="Verdana, sans-serif",label.padding=15,label),_this.subtitle=function(){var label=new TreemapSeriesLabel;return label.color="white",label.fontSize=9,label.fontFamily="Verdana, sans-serif",label.padding=13,label}(),_this.labels={large:function(){var label=new Label$1;return label.color="white",label.fontWeight="bold",label.fontSize=18,label}(),medium:function(){var label=new Label$1;return label.color="white",label.fontWeight="bold",label.fontSize=14,label}(),small:function(){var label=new Label$1;return label.color="white",label.fontWeight="bold",label.fontSize=10,label}(),color:function(){var label=new Label$1;return label.color="white",label}()},_this._nodePadding=2,_this.labelKey="label",_this.sizeKey="size",_this.colorKey="color",_this.colorDomain=[-5,5],_this.colorRange=["#cb4b3f","#6acb64"],_this.colorParents=!1,_this.gradient=!0,_this.colorName="Change",_this.rootName="Root",_this._shadow=((shadow=new DropShadow).color="rgba(0, 0, 0, 0.4)",shadow.xOffset=1.5,shadow.yOffset=1.5,shadow),_this.tooltip=new TreemapSeriesTooltip,_this.shadow.addEventListener("change",_this.scheduleUpdate,_this),_this.title.addEventListener("change",_this.scheduleUpdate,_this),_this.subtitle.addEventListener("change",_this.scheduleUpdate,_this),_this.labels.small.addEventListener("change",_this.scheduleUpdate,_this),_this.labels.medium.addEventListener("change",_this.scheduleUpdate,_this),_this.labels.large.addEventListener("change",_this.scheduleUpdate,_this),_this.labels.color.addEventListener("change",_this.scheduleUpdate,_this),_this}return __extends$1T(TreemapSeries,_super),Object.defineProperty(TreemapSeries.prototype,"nodePadding",{get:function(){return this._nodePadding},set:function(value){this._nodePadding!==value&&(this._nodePadding=value,this.updateLayoutPadding(),this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(TreemapSeries.prototype,"shadow",{get:function(){return this._shadow},set:function(value){this._shadow!==value&&(this._shadow=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),TreemapSeries.prototype.onHighlightChange=function(){this.updateNodes()},TreemapSeries.prototype.updateLayoutPadding=function(){var title=this.title,subtitle=this.subtitle,nodePadding=this.nodePadding,labelKey=this.labelKey;this.layout.paddingRight=function(_){return nodePadding},this.layout.paddingBottom=function(_){return nodePadding},this.layout.paddingLeft=function(_){return nodePadding},this.layout.paddingTop=function(node){var name=node.datum[labelKey]||"";node.children&&(name=name.toUpperCase());var font=node.depth>1?subtitle:title,textSize=HdpiCanvas$1.getTextSize(name,[font.fontWeight,font.fontSize+"px",font.fontFamily].join(" ").trim()),innerNodeWidth=node.x1-node.x0-2*nodePadding,hasTitle=node.depth>0&&node.children&&textSize.width<=innerNodeWidth;return node.hasTitle=!!hasTitle,hasTitle?textSize.height+2*nodePadding:nodePadding}},TreemapSeries.prototype.processData=function(){if(!this.data)return!1;var dataRoot,_a=this,data=_a.data,sizeKey=_a.sizeKey,labelKey=_a.labelKey,colorKey=_a.colorKey,colorDomain=_a.colorDomain,colorRange=_a.colorRange,colorParents=_a.colorParents;dataRoot=sizeKey?hierarchy(data).sum((function(datum){return datum.children?1:datum[sizeKey]})):hierarchy(data).sum((function(datum){return datum.children?0:1})),this.dataRoot=dataRoot;var colorScale=new LinearScale$1;colorScale.domain=colorDomain,colorScale.range=colorRange;var series=this;return function traverse(root,depth){void 0===depth&&(depth=0);var children=root.children,datum=root.datum,label=datum[labelKey],colorValue=colorKey?datum[colorKey]:depth;root.series=series,root.fill=!children||colorParents?colorScale.convert(colorValue):"#272931",root.colorValue=colorValue,root.label=label?children?label.toUpperCase():label:"",children&&children.forEach((function(child){return traverse(child,depth+1)}))}(this.dataRoot),!0},TreemapSeries.prototype.getLabelCenterX=function(datum){return(datum.x0+datum.x1)/2},TreemapSeries.prototype.getLabelCenterY=function(datum){return(datum.y0+datum.y1)/2+2},TreemapSeries.prototype.update=function(){this.updatePending=!1,this.updateSelections(),this.updateNodes()},TreemapSeries.prototype.updateSelections=function(){if(this.nodeDataPending){this.nodeDataPending=!1;var chart=this.chart,dataRoot=this.dataRoot;if(chart&&dataRoot){var seriesRect=chart.getSeriesRect();if(seriesRect){this.layout.size=[seriesRect.width,seriesRect.height],this.updateLayoutPadding();var descendants=this.layout.processData(dataRoot).descendants(),updateGroups=this.groupSelection.setData(descendants);updateGroups.exit.remove();var enterGroups=updateGroups.enter.append(Group$1);enterGroups.append(Rect),enterGroups.append(Text$2).each((function(node){return node.tag=TextNodeTag.Name})),enterGroups.append(Text$2).each((function(node){return node.tag=TextNodeTag.Value})),this.groupSelection=updateGroups.merge(enterGroups)}}}},TreemapSeries.prototype.updateNodes=function(){var _this=this;if(this.chart){var _a=this,colorKey=_a.colorKey,labelMap=_a.labelMap,nodePadding=_a.nodePadding,title=_a.title,subtitle=_a.subtitle,labels=_a.labels,shadow=_a.shadow,gradient=_a.gradient,highlightedDatum=_a.chart.highlightedDatum,_b=_a.highlightStyle,deprecatedFill=_b.fill,deprecatedStroke=_b.stroke,deprecatedStrokeWidth=_b.strokeWidth,_c=_b.item,_d=_c.fill,highlightedFill=void 0===_d?deprecatedFill:_d,_e=_c.stroke,highlightedStroke=void 0===_e?deprecatedStroke:_e,_f=_c.strokeWidth,highlightedDatumStrokeWidth=void 0===_f?deprecatedStrokeWidth:_f;this.groupSelection.selectByClass(Rect).each((function(rect,datum){var isDatumHighlighted=datum===highlightedDatum,fill=isDatumHighlighted&&void 0!==highlightedFill?highlightedFill:datum.fill,stroke=isDatumHighlighted&&void 0!==highlightedStroke?highlightedStroke:datum.depth<2?void 0:"black",strokeWidth=isDatumHighlighted&&void 0!==highlightedDatumStrokeWidth?highlightedDatumStrokeWidth:_this.getStrokeWidth(1,datum);rect.fill=fill,rect.stroke=stroke,rect.strokeWidth=strokeWidth,rect.crisp=!0,rect.gradient=gradient,rect.x=datum.x0,rect.y=datum.y0,rect.width=datum.x1-datum.x0,rect.height=datum.y1-datum.y0})),this.groupSelection.selectByTag(TextNodeTag.Name).each((function(text,datum,index){var label,isLeaf=!datum.children,innerNodeWidth=datum.x1-datum.x0-2*nodePadding,innerNodeHeight=datum.y1-datum.y0-2*nodePadding,hasTitle=datum.hasTitle,highlighted=datum===highlightedDatum;label=isLeaf?innerNodeWidth>40&&innerNodeHeight>40?labels.large:innerNodeWidth>20&&innerNodeHeight>20?labels.medium:labels.small:datum.depth>1?subtitle:title,text.fontWeight=label.fontWeight,text.fontSize=label.fontSize,text.fontFamily=label.fontFamily,text.textBaseline=isLeaf?"bottom":hasTitle?"top":"middle",text.textAlign=hasTitle?"left":"center",text.text=datum.label;var textBBox=text.computeBBox(),hasLabel=isLeaf&&!!textBBox&&textBBox.width<=innerNodeWidth&&2*textBBox.height+8<=innerNodeHeight;labelMap.set(index,text),text.fill=highlighted?"black":label.color,text.fillShadow=hasLabel&&!highlighted?shadow:void 0,text.visible=hasTitle||hasLabel,hasTitle?(text.x=datum.x0+nodePadding,text.y=datum.y0+nodePadding):(text.x=_this.getLabelCenterX(datum),text.y=_this.getLabelCenterY(datum))})),this.groupSelection.selectByTag(TextNodeTag.Value).each((function(text,datum,index){var isLeaf=!datum.children,innerNodeWidth=datum.x1-datum.x0-2*nodePadding,highlighted=datum===highlightedDatum,value=datum.colorValue,label=labels.color;text.fontSize=label.fontSize,text.fontFamily=label.fontFamily,text.fontStyle=label.fontStyle,text.fontWeight=label.fontWeight,text.textBaseline="top",text.textAlign="center",text.text="number"==typeof value&&isFinite(value)?String(toFixed(datum.colorValue))+"%":"";var textBBox=text.computeBBox(),nameNode=labelMap.get(index),hasLabel=!!nameNode&&nameNode.visible,isVisible=isLeaf&&!!colorKey&&hasLabel&&!!textBBox&&textBBox.width<innerNodeWidth;text.fill=highlighted?"black":label.color,text.fillShadow=highlighted?void 0:shadow,text.visible=isVisible,isVisible?(text.x=_this.getLabelCenterX(datum),text.y=_this.getLabelCenterY(datum)):!nameNode||datum.children&&datum.children.length||(nameNode.textBaseline="middle",nameNode.y=_this.getLabelCenterY(datum))}))}},TreemapSeries.prototype.getDomain=function(direction){return[0,1]},TreemapSeries.prototype.fireNodeClickEvent=function(event,datum){this.fireEvent({type:"nodeClick",event,series:this,datum:datum.datum,labelKey:this.labelKey,sizeKey:this.sizeKey,colorKey:this.colorKey})},TreemapSeries.prototype.getTooltipHtml=function(nodeDatum){var _a=this,tooltip=_a.tooltip,sizeKey=_a.sizeKey,labelKey=_a.labelKey,colorKey=_a.colorKey,colorName=_a.colorName,rootName=_a.rootName,datum=nodeDatum.datum,tooltipRenderer=tooltip.renderer,title=nodeDatum.depth?datum[labelKey]:rootName||datum[labelKey],content=void 0,color=nodeDatum.fill||"gray";if(colorKey&&colorName){var colorValue=datum[colorKey];"number"==typeof colorValue&&isFinite(colorValue)&&(content="<b>"+colorName+"</b>: "+toFixed(datum[colorKey]))}var defaults={title,backgroundColor:color,content};return tooltipRenderer?toTooltipHtml$1(tooltipRenderer({datum:nodeDatum,sizeKey,labelKey,colorKey,title,color}),defaults):toTooltipHtml$1(defaults)},TreemapSeries.prototype.listSeriesItems=function(legendData){},TreemapSeries.className="TreemapSeries",TreemapSeries.type="treemap",__decorate$W([reactive$1("dataChange")],TreemapSeries.prototype,"labelKey",void 0),__decorate$W([reactive$1("dataChange")],TreemapSeries.prototype,"sizeKey",void 0),__decorate$W([reactive$1("dataChange")],TreemapSeries.prototype,"colorKey",void 0),__decorate$W([reactive$1("dataChange")],TreemapSeries.prototype,"colorDomain",void 0),__decorate$W([reactive$1("dataChange")],TreemapSeries.prototype,"colorRange",void 0),__decorate$W([reactive$1("dataChange")],TreemapSeries.prototype,"colorParents",void 0),__decorate$W([reactive$1("update")],TreemapSeries.prototype,"gradient",void 0),TreemapSeries}(HierarchySeries),__extends$1U=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Sector=function(_super){function Sector(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._centerX=0,_this._centerY=0,_this._centerOffset=0,_this._innerRadius=10,_this._outerRadius=20,_this._startAngle=0,_this._endAngle=2*Math.PI,_this._angleOffset=0,_this}return __extends$1U(Sector,_super),Object.defineProperty(Sector.prototype,"centerX",{get:function(){return this._centerX},set:function(value){this._centerX!==value&&(this._centerX=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Sector.prototype,"centerY",{get:function(){return this._centerY},set:function(value){this._centerY!==value&&(this._centerY=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Sector.prototype,"centerOffset",{get:function(){return this._centerOffset},set:function(value){this._centerOffset!==value&&(this._centerOffset=Math.max(0,value),this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Sector.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(value){this._innerRadius!==value&&(this._innerRadius=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Sector.prototype,"outerRadius",{get:function(){return this._outerRadius},set:function(value){this._outerRadius!==value&&(this._outerRadius=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Sector.prototype,"startAngle",{get:function(){return this._startAngle},set:function(value){this._startAngle!==value&&(this._startAngle=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Sector.prototype,"endAngle",{get:function(){return this._endAngle},set:function(value){this._endAngle!==value&&(this._endAngle=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Sector.prototype,"angleOffset",{get:function(){return this._angleOffset},set:function(value){this._angleOffset!==value&&(this._angleOffset=value,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Sector.prototype.computeBBox=function(){var radius=this.outerRadius;return new BBox$1(this.centerX-radius,this.centerY-radius,2*radius,2*radius)},Sector.prototype.isFullPie=function(){return isEqual(normalizeAngle360(this.startAngle),normalizeAngle360(this.endAngle))},Sector.prototype.updatePath=function(){var path=this.path,angleOffset=this.angleOffset,startAngle=Math.min(this.startAngle,this.endAngle)+angleOffset,endAngle=Math.max(this.startAngle,this.endAngle)+angleOffset,midAngle=.5*(startAngle+endAngle),innerRadius=Math.min(this.innerRadius,this.outerRadius),outerRadius=Math.max(this.innerRadius,this.outerRadius),centerOffset=this.centerOffset,fullPie=this.isFullPie(),centerX=this.centerX,centerY=this.centerY;if(path.clear(),centerOffset&&(centerX+=centerOffset*Math.cos(midAngle),centerY+=centerOffset*Math.sin(midAngle)),fullPie||(path.moveTo(centerX+innerRadius*Math.cos(startAngle),centerY+innerRadius*Math.sin(startAngle)),path.lineTo(centerX+outerRadius*Math.cos(startAngle),centerY+outerRadius*Math.sin(startAngle))),path.cubicArc(centerX,centerY,outerRadius,outerRadius,0,startAngle,endAngle,0),fullPie)path.moveTo(centerX+innerRadius*Math.cos(endAngle),centerY+innerRadius*Math.sin(endAngle));else{var x=centerX+innerRadius*Math.cos(endAngle);path.lineTo(Math.abs(x)<1e-8?0:x,centerY+innerRadius*Math.sin(endAngle))}path.cubicArc(centerX,centerY,innerRadius,innerRadius,0,endAngle,startAngle,1),path.closePath(),this.dirtyPath=!1},Sector.className="Sector",Sector}(Path$1),__extends$1V=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$X=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$z=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$f=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$z(arguments[i]));return ar},PieHighlightStyle=function(_super){function PieHighlightStyle(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1V(PieHighlightStyle,_super),PieHighlightStyle}(HighlightStyle);!function(PieNodeTag){PieNodeTag[PieNodeTag.Sector=0]="Sector",PieNodeTag[PieNodeTag.Callout=1]="Callout",PieNodeTag[PieNodeTag.Label=2]="Label"}(PieNodeTag||(PieNodeTag={}));var PieSeriesLabel=function(_super){function PieSeriesLabel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.offset=3,_this.minAngle=20,_this}return __extends$1V(PieSeriesLabel,_super),__decorate$X([reactive$1("change")],PieSeriesLabel.prototype,"offset",void 0),__decorate$X([reactive$1("dataChange")],PieSeriesLabel.prototype,"minAngle",void 0),__decorate$X([reactive$1("dataChange")],PieSeriesLabel.prototype,"formatter",void 0),PieSeriesLabel}(Label$1),PieSeriesCallout=function(_super){function PieSeriesCallout(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.colors=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],_this.length=10,_this.strokeWidth=1,_this}return __extends$1V(PieSeriesCallout,_super),__decorate$X([reactive$1("change")],PieSeriesCallout.prototype,"colors",void 0),__decorate$X([reactive$1("change")],PieSeriesCallout.prototype,"length",void 0),__decorate$X([reactive$1("change")],PieSeriesCallout.prototype,"strokeWidth",void 0),PieSeriesCallout}(Observable$1),PieSeriesTooltip=function(_super){function PieSeriesTooltip(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1V(PieSeriesTooltip,_super),__decorate$X([reactive$1("change")],PieSeriesTooltip.prototype,"renderer",void 0),PieSeriesTooltip}(SeriesTooltip),PieTitle=function(_super){function PieTitle(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.showInLegend=!1,_this}return __extends$1V(PieTitle,_super),__decorate$X([reactive$1()],PieTitle.prototype,"showInLegend",void 0),PieTitle}(Caption),PieSeries=function(_super){function PieSeries(){var scale,_this=_super.call(this)||this;return _this.radiusScale=new LinearScale$1,_this.groupSelection=Selection$1.select(_this.pickGroup).selectAll(),_this.groupSelectionData=[],_this.angleScale=((scale=new LinearScale$1).domain=[0,1],scale.range=[-Math.PI,Math.PI].map((function(angle){return angle+Math.PI/2})),scale),_this.seriesItemEnabled=[],_this.label=new PieSeriesLabel,_this.callout=new PieSeriesCallout,_this.tooltip=new PieSeriesTooltip,_this.angleKey="",_this.angleName="",_this._fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],_this._strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],_this.fillOpacity=1,_this.strokeOpacity=1,_this.lineDash=[0],_this.lineDashOffset=0,_this.rotation=0,_this.outerRadiusOffset=0,_this.innerRadiusOffset=0,_this.strokeWidth=1,_this.highlightStyle=new PieHighlightStyle,_this.addEventListener("update",_this.scheduleUpdate,_this),_this.label.addEventListener("change",_this.scheduleUpdate,_this),_this.label.addEventListener("dataChange",_this.scheduleData,_this),_this.callout.addEventListener("change",_this.scheduleLayout,_this),_this.addPropertyListener("data",(function(event){event.value&&(event.source.seriesItemEnabled=event.value.map((function(){return!0})))})),_this}return __extends$1V(PieSeries,_super),Object.defineProperty(PieSeries.prototype,"title",{get:function(){return this._title},set:function(value){var oldTitle=this._title;function updateLegend(){this.fireEvent({type:"legendChange"})}oldTitle!==value&&(oldTitle&&(oldTitle.removeEventListener("change",this.scheduleUpdate,this),oldTitle.removePropertyListener("showInLegend",updateLegend,this),this.group.removeChild(oldTitle.node)),value&&(value.node.textBaseline="bottom",value.addEventListener("change",this.scheduleUpdate,this),value.addPropertyListener("showInLegend",updateLegend,this),this.group.appendChild(value.node)),this._title=value,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(PieSeries.prototype,"fills",{get:function(){return this._fills},set:function(values){this._fills=values,this.scheduleUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(PieSeries.prototype,"strokes",{get:function(){return this._strokes},set:function(values){this._strokes=values,this.scheduleUpdate()},enumerable:!0,configurable:!0}),PieSeries.prototype.onHighlightChange=function(){this.updateNodes()},PieSeries.prototype.setColors=function(fills,strokes){this.fills=fills,this.strokes=strokes,this.callout.colors=strokes},PieSeries.prototype.getDomain=function(direction){return direction===ChartAxisDirection.X?this.angleScale.domain:this.radiusScale.domain},PieSeries.prototype.processData=function(){var sum,_this=this,_a=this,angleKey=_a.angleKey,radiusKey=_a.radiusKey,seriesItemEnabled=_a.seriesItemEnabled,angleScale=_a.angleScale,groupSelectionData=_a.groupSelectionData,label=_a.label,data=angleKey&&this.data?this.data:[],angleData=data.map((function(datum,index){return seriesItemEnabled[index]&&Math.abs(+datum[angleKey])||0})),angleDataTotal=angleData.reduce((function(a,b){return a+b}),0),angleDataRatios=(sum=0,angleData.map((function(datum){return sum+=datum/angleDataTotal}))),labelFormatter=label.formatter,labelKey=label.enabled&&this.labelKey,labelData=[],radiusData=[];if(labelKey&&(labelData=labelFormatter?data.map((function(datum){return labelFormatter({value:datum[labelKey]})})):data.map((function(datum){return String(datum[labelKey])}))),radiusKey){var radiusMin=this.radiusMin,radiusMax=this.radiusMax,radii=data.map((function(datum){return Math.abs(datum[radiusKey])})),min_1=void 0!==radiusMin?radiusMin:Math.min.apply(Math,__spread$f(radii)),delta_1=(void 0!==radiusMax?radiusMax:Math.max.apply(Math,__spread$f(radii)))-min_1;radiusData=radii.map((function(value){return delta_1?(value-min_1)/delta_1:1}))}groupSelectionData.length=0;var rotation=toRadians(this.rotation),halfPi=Math.PI/2,datumIndex=0,quadrantTextOpts=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],end=0;return angleDataRatios.forEach((function(start){if(!isNaN(start)){var radius=radiusKey?radiusData[datumIndex]:1,startAngle=angleScale.convert(start)+rotation,endAngle=angleScale.convert(end)+rotation,midAngle=(startAngle+endAngle)/2,span=Math.abs(endAngle-startAngle),midCos=Math.cos(midAngle),midSin=Math.sin(midAngle),labelMinAngle=toRadians(label.minAngle),labelVisible=labelKey&&span>labelMinAngle,quadrantOffset=function normalizeAngle180(radians){return(radians%=twoPi)<-Math.PI?radians+=twoPi:radians>=Math.PI&&(radians-=twoPi),radians}(midAngle)- -3*Math.PI/4,quadrantIndex=function mod(n,m){var remain=n%m;return remain>=0?remain:remain+m}(Math.floor(quadrantOffset/halfPi),quadrantTextOpts.length),_a=quadrantTextOpts[quadrantIndex],textAlign=_a.textAlign,textBaseline=_a.textBaseline;groupSelectionData.push({series:_this,datum:data[datumIndex],itemId:datumIndex,index:datumIndex,radius,startAngle,endAngle,midAngle,midCos,midSin,label:labelVisible?{text:labelData[datumIndex],textAlign,textBaseline}:void 0}),datumIndex++,end=start}})),!0},PieSeries.prototype.update=function(){this.updatePending=!1;var radius=this.radius,innerRadiusOffset=this.innerRadiusOffset,outerRadiusOffset=this.outerRadiusOffset,title=this.title;(this.radiusScale.range=[innerRadiusOffset?radius+innerRadiusOffset:0,radius+(outerRadiusOffset||0)],this.group.translationX=this.centerX,this.group.translationY=this.centerY,title)&&(0===Math.max(0,this.radiusScale.range[1])?title.node.visible=!1:(title.node.translationY=-radius-outerRadiusOffset-2,title.node.visible=title.enabled));this.updateSelections(),this.updateNodes()},PieSeries.prototype.updateSelections=function(){this.nodeDataPending&&(this.nodeDataPending=!1,this.updateGroupSelection())},PieSeries.prototype.updateGroupSelection=function(){var updateGroups=this.groupSelection.setData(this.groupSelectionData);updateGroups.exit.remove();var enterGroups=updateGroups.enter.append(Group$1);enterGroups.append(Sector).each((function(node){return node.tag=PieNodeTag.Sector})),enterGroups.append(Line$1).each((function(node){node.tag=PieNodeTag.Callout,node.pointerEvents=PointerEvents$1.None})),enterGroups.append(Text$2).each((function(node){node.tag=PieNodeTag.Label,node.pointerEvents=PointerEvents$1.None})),this.groupSelection=updateGroups.merge(enterGroups)},PieSeries.prototype.updateNodes=function(){var _this=this;if(this.chart){this.group.visible=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;var _a=this,fills=_a.fills,strokes=_a.strokes,fillOpacity=_a.fillOpacity,strokeOpacity=_a.strokeOpacity,radiusScale=_a.radiusScale,callout=_a.callout,shadow=_a.shadow,highlightedDatum=_a.chart.highlightedDatum,_b=_a.highlightStyle,deprecatedFill=_b.fill,deprecatedStroke=_b.stroke,deprecatedStrokeWidth=_b.strokeWidth,_c=_b.item,_d=_c.fill,highlightedFill=void 0===_d?deprecatedFill:_d,_e=_c.stroke,highlightedStroke=void 0===_e?deprecatedStroke:_e,_f=_c.strokeWidth,highlightedDatumStrokeWidth=void 0===_f?deprecatedStrokeWidth:_f,angleKey=_a.angleKey,radiusKey=_a.radiusKey,formatter=_a.formatter,centerOffsets=[],innerRadius=radiusScale.convert(0);this.groupSelection.selectByTag(PieNodeTag.Sector).each((function(sector,datum,index){var radius=radiusScale.convert(datum.radius),isDatumHighlighted=!!highlightedDatum&&highlightedDatum.series===_this&&datum.itemId===highlightedDatum.itemId,fill=isDatumHighlighted&&void 0!==highlightedFill?highlightedFill:fills[index%fills.length],stroke=isDatumHighlighted&&void 0!==highlightedStroke?highlightedStroke:strokes[index%strokes.length],strokeWidth=isDatumHighlighted&&void 0!==highlightedDatumStrokeWidth?highlightedDatumStrokeWidth:_this.getStrokeWidth(_this.strokeWidth),format=void 0;formatter&&(format=formatter({datum:datum.datum,angleKey,radiusKey,fill,stroke,strokeWidth,highlighted:isDatumHighlighted}));var parent=sector.parent&&sector.parent.parent;isDatumHighlighted&&parent&&(parent.removeChild(sector.parent),parent.appendChild(sector.parent)),sector.innerRadius=Math.max(0,innerRadius),sector.outerRadius=Math.max(0,radius),sector.startAngle=datum.startAngle,sector.endAngle=datum.endAngle,sector.fill=format&&format.fill||fill,sector.stroke=format&&format.stroke||stroke,sector.strokeWidth=format&&void 0!==format.strokeWidth?format.strokeWidth:strokeWidth,sector.fillOpacity=fillOpacity,sector.strokeOpacity=strokeOpacity,sector.lineDash=_this.lineDash,sector.lineDashOffset=_this.lineDashOffset,sector.fillShadow=shadow,sector.lineJoin="round",sector.opacity=_this.getOpacity(),centerOffsets.push(sector.centerOffset)}));var calloutColors=callout.colors,calloutLength=callout.length,calloutStrokeWidth=callout.strokeWidth;this.groupSelection.selectByTag(PieNodeTag.Callout).each((function(line,datum,index){var radius=radiusScale.convert(datum.radius),outerRadius=Math.max(0,radius);datum.label&&0!==outerRadius?(line.strokeWidth=calloutStrokeWidth,line.stroke=calloutColors[index%calloutColors.length],line.x1=datum.midCos*outerRadius,line.y1=datum.midSin*outerRadius,line.x2=datum.midCos*(outerRadius+calloutLength),line.y2=datum.midSin*(outerRadius+calloutLength)):line.stroke=void 0}));var _g=this.label,offset_1=_g.offset,fontStyle_1=_g.fontStyle,fontWeight_1=_g.fontWeight,fontSize_1=_g.fontSize,fontFamily_1=_g.fontFamily,color_1=_g.color;this.groupSelection.selectByTag(PieNodeTag.Label).each((function(text,datum,index){var label=datum.label,radius=radiusScale.convert(datum.radius),outerRadius=Math.max(0,radius);if(label&&0!==outerRadius){var labelRadius=centerOffsets[index]+outerRadius+calloutLength+offset_1;text.fontStyle=fontStyle_1,text.fontWeight=fontWeight_1,text.fontSize=fontSize_1,text.fontFamily=fontFamily_1,text.text=label.text,text.x=datum.midCos*labelRadius,text.y=datum.midSin*labelRadius,text.fill=color_1,text.textAlign=label.textAlign,text.textBaseline=label.textBaseline}else text.fill=void 0}))}},PieSeries.prototype.fireNodeClickEvent=function(event,datum){this.fireEvent({type:"nodeClick",event,series:this,datum:datum.datum,angleKey:this.angleKey,labelKey:this.labelKey,radiusKey:this.radiusKey})},PieSeries.prototype.getTooltipHtml=function(nodeDatum){var angleKey=this.angleKey;if(!angleKey)return"";var _a=this,fills=_a.fills,tooltip=_a.tooltip,angleName=_a.angleName,radiusKey=_a.radiusKey,radiusName=_a.radiusName,labelKey=_a.labelKey,labelName=_a.labelName,tooltipRenderer=tooltip.renderer,color=fills[nodeDatum.index%fills.length],datum=nodeDatum.datum,label=labelKey?datum[labelKey]+": ":"",angleValue=datum[angleKey],formattedAngleValue="number"==typeof angleValue?toFixed(angleValue):angleValue.toString(),title=this.title?this.title.text:void 0,defaults={title,backgroundColor:color,content:label+formattedAngleValue};return tooltipRenderer?toTooltipHtml$1(tooltipRenderer({datum,angleKey,angleValue,angleName,radiusKey,radiusValue:radiusKey?datum[radiusKey]:void 0,radiusName,labelKey,labelName,title,color}),defaults):toTooltipHtml$1(defaults)},PieSeries.prototype.listSeriesItems=function(legendData){var _this=this,labelKey=this.labelKey,data=this.data;if(data&&data.length&&labelKey){var fills_1=this.fills,strokes_1=this.strokes,id_1=this.id,titleText_1=this.title&&this.title.showInLegend&&this.title.text;data.forEach((function(datum,index){var labelParts=[];titleText_1&&labelParts.push(titleText_1),labelParts.push(String(datum[labelKey])),legendData.push({id:id_1,itemId:index,enabled:_this.seriesItemEnabled[index],label:{text:labelParts.join(" - ")},marker:{fill:fills_1[index%fills_1.length],stroke:strokes_1[index%strokes_1.length],fillOpacity:_this.fillOpacity,strokeOpacity:_this.strokeOpacity}})}))}},PieSeries.prototype.toggleSeriesItem=function(itemId,enabled){this.seriesItemEnabled[itemId]=enabled,this.scheduleData()},PieSeries.className="PieSeries",PieSeries.type="pie",__decorate$X([reactive$1("dataChange")],PieSeries.prototype,"angleKey",void 0),__decorate$X([reactive$1("update")],PieSeries.prototype,"angleName",void 0),__decorate$X([reactive$1("dataChange")],PieSeries.prototype,"radiusKey",void 0),__decorate$X([reactive$1("update")],PieSeries.prototype,"radiusName",void 0),__decorate$X([reactive$1("dataChange")],PieSeries.prototype,"radiusMin",void 0),__decorate$X([reactive$1("dataChange")],PieSeries.prototype,"radiusMax",void 0),__decorate$X([reactive$1("dataChange")],PieSeries.prototype,"labelKey",void 0),__decorate$X([reactive$1("update")],PieSeries.prototype,"labelName",void 0),__decorate$X([reactive$1("layoutChange")],PieSeries.prototype,"fillOpacity",void 0),__decorate$X([reactive$1("layoutChange")],PieSeries.prototype,"strokeOpacity",void 0),__decorate$X([reactive$1("update")],PieSeries.prototype,"lineDash",void 0),__decorate$X([reactive$1("update")],PieSeries.prototype,"lineDashOffset",void 0),__decorate$X([reactive$1("update")],PieSeries.prototype,"formatter",void 0),__decorate$X([reactive$1("dataChange")],PieSeries.prototype,"rotation",void 0),__decorate$X([reactive$1("layoutChange")],PieSeries.prototype,"outerRadiusOffset",void 0),__decorate$X([reactive$1("dataChange")],PieSeries.prototype,"innerRadiusOffset",void 0),__decorate$X([reactive$1("layoutChange")],PieSeries.prototype,"strokeWidth",void 0),__decorate$X([reactive$1("layoutChange")],PieSeries.prototype,"shadow",void 0),PieSeries}(PolarSeries);new CountableTimeInterval$1((function floor$i(date){date.setUTCSeconds(0,0)}),(function offset$i(date,minutes){date.setTime(date.getTime()+6e4*minutes)}),(function count$i(start,end){return(end.getTime()-start.getTime())/6e4}),(function field$e(date){return date.getUTCMinutes()}));new CountableTimeInterval$1((function floor$j(date){date.setUTCMinutes(0,0,0)}),(function offset$j(date,hours){date.setTime(date.getTime()+36e5*hours)}),(function count$j(start,end){return(end.getTime()-start.getTime())/36e5}),(function field$f(date){return date.getUTCHours()}));new CountableTimeInterval$1((function floor$k(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)}),(function offset$k(date,months){date.setUTCMonth(date.getUTCMonth()+months)}),(function count$k(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())}),(function field$g(date){return date.getUTCMonth()}));var __assign$9=function(){return __assign$9=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$9.apply(this,arguments)},__read$A=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},palette={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]};var mergeOptions={arrayMerge:function arrayMerge(target,source,options){return source},isMergeableObject:function isMergeableObject(value){return defaultIsMergeableObject(value)&&!(value instanceof TimeInterval$1)}},ChartTheme=function(){function ChartTheme(options){var _a=(options=deepMerge({},options||{},mergeOptions)).overrides,overrides=void 0===_a?null:_a,_b=options.palette,palette=void 0===_b?null:_b,defaults=this.createChartConfigPerSeries(this.getDefaults());if(overrides){var common=overrides.common,cartesian=overrides.cartesian,polar=overrides.polar,hierarchy=overrides.hierarchy,applyOverrides=function(type,seriesTypes,overrideOpts){overrideOpts&&(defaults[type]=deepMerge(defaults[type],overrideOpts,mergeOptions),seriesTypes.forEach((function(seriesType){defaults[seriesType]=deepMerge(defaults[seriesType],overrideOpts,mergeOptions)})))};applyOverrides("common",Object.keys(defaults),common),applyOverrides("cartesian",ChartTheme.cartesianSeriesTypes,cartesian),applyOverrides("polar",ChartTheme.polarSeriesTypes,polar),applyOverrides("hierarchy",ChartTheme.hierarchySeriesTypes,hierarchy);var seriesOverridesMap_1={};ChartTheme.seriesTypes.forEach((function(seriesType){var chartConfig=overrides[seriesType];chartConfig&&(chartConfig.series&&(seriesOverridesMap_1[seriesType]=chartConfig.series,chartConfig.series=seriesOverridesMap_1),defaults[seriesType]=deepMerge(defaults[seriesType],chartConfig,mergeOptions))}))}this.palette=null!=palette?palette:this.getPalette(),this.config=Object.freeze(defaults)}return ChartTheme.prototype.getPalette=function(){return palette},ChartTheme.getAxisDefaults=function(){return{top:{},right:{},bottom:{},left:{},thickness:0,title:{enabled:!1,padding:{top:10,right:10,bottom:10,left:10},text:"Axis Title",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}]}},ChartTheme.getSeriesDefaults=function(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,cursor:"default",highlightStyle:{item:{fill:"yellow"},series:{dimOpacity:1}}}},ChartTheme.getBarSeriesDefaults=function(){return __assign$9(__assign$9({},this.getSeriesDefaults()),{flipXY:!1,fillOpacity:1,strokeOpacity:1,xKey:"",xName:"",yKeys:[],yNames:[],grouped:!1,normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})},ChartTheme.getLineSeriesDefaults=function(){var seriesDefaults=this.getSeriesDefaults();return __assign$9(__assign$9({},seriesDefaults),{tooltip:__assign$9(__assign$9({},seriesDefaults.tooltip),{format:void 0})})},ChartTheme.getCartesianSeriesMarkerDefaults=function(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}},ChartTheme.getChartDefaults=function(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,padding:{top:10,right:10,bottom:10,left:10},text:"Title",fontStyle:void 0,fontWeight:"bold",fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},subtitle:{enabled:!1,padding:{top:10,right:10,bottom:10,left:10},text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)"},legend:{enabled:!0,position:"right",spacing:20,item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}}},tooltip:{enabled:!0,tracking:!0,delay:0,class:Chart.defaultTooltipClass}}},ChartTheme.prototype.createChartConfigPerSeries=function(config){var typeToAliases={cartesian:ChartTheme.cartesianSeriesTypes,polar:ChartTheme.polarSeriesTypes,hierarchy:ChartTheme.hierarchySeriesTypes,groupedCategory:[]};return Object.entries(typeToAliases).forEach((function(_a){var _b=__read$A(_a,2),type=_b[0];_b[1].forEach((function(alias){config[alias]||(config[alias]=deepMerge({},config[type],mergeOptions))}))})),config},ChartTheme.prototype.getConfig=function(path,defaultValue){var value=function getValue(object,path,defaultValue){var parts=Array.isArray(path)?path:path.split("."),value=object;try{parts.forEach((function(part){value=value[part]}))}catch(e){if(3!==arguments.length)throw e;value=defaultValue}return value}(this.config,path,defaultValue);return Array.isArray(value)?deepMerge([],value,mergeOptions):function isObject(value){return"object"==typeof value&&!Array.isArray(value)}(value)?deepMerge({},value,mergeOptions):value},ChartTheme.prototype.getDefaults=function(){return deepMerge({},ChartTheme.defaults,mergeOptions)},ChartTheme.prototype.mergeWithParentDefaults=function(parentDefaults,defaults){return deepMerge(parentDefaults,defaults,mergeOptions)},ChartTheme.fontFamily="Verdana, sans-serif",ChartTheme.cartesianDefaults=__assign$9(__assign$9({},ChartTheme.getChartDefaults()),{axes:{number:__assign$9({},ChartTheme.getAxisDefaults()),log:__assign$9(__assign$9({},ChartTheme.getAxisDefaults()),{base:10}),category:__assign$9(__assign$9({},ChartTheme.getAxisDefaults()),{label:__assign$9(__assign$9({},ChartTheme.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:__assign$9({},ChartTheme.getAxisDefaults()),time:__assign$9({},ChartTheme.getAxisDefaults())},series:{column:__assign$9(__assign$9({},ChartTheme.getBarSeriesDefaults()),{flipXY:!1}),bar:__assign$9(__assign$9({},ChartTheme.getBarSeriesDefaults()),{flipXY:!0}),line:__assign$9(__assign$9({},ChartTheme.getLineSeriesDefaults()),{title:void 0,xKey:"",xName:"",yKey:"",yName:"",strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:__assign$9({},ChartTheme.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ChartTheme.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:__assign$9(__assign$9({},ChartTheme.getSeriesDefaults()),{title:void 0,xKey:"",yKey:"",sizeKey:void 0,labelKey:void 0,xName:"",yName:"",sizeName:"Size",labelName:"Label",strokeWidth:2,fillOpacity:1,strokeOpacity:1,marker:__assign$9({},ChartTheme.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ChartTheme.fontFamily,color:"rgb(70, 70, 70)"}}),area:__assign$9(__assign$9({},ChartTheme.getSeriesDefaults()),{xKey:"",xName:"",yKeys:[],yNames:[],normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:__assign$9(__assign$9({},ChartTheme.getCartesianSeriesMarkerDefaults()),{enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ChartTheme.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:__assign$9(__assign$9({},ChartTheme.getSeriesDefaults()),{xKey:"",yKey:"",xName:"",yName:"",strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,binCount:10,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ChartTheme.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})},navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}),ChartTheme.polarDefaults=__assign$9(__assign$9({},ChartTheme.getChartDefaults()),{series:{pie:__assign$9(__assign$9({},ChartTheme.getSeriesDefaults()),{title:{enabled:!0,padding:{top:10,right:10,bottom:10,left:10},text:"",fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:ChartTheme.fontFamily,color:"rgb(70, 70, 70)"},angleKey:"",angleName:"",radiusKey:void 0,radiusName:void 0,labelKey:void 0,labelName:void 0,label:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ChartTheme.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:20},callout:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})}}),ChartTheme.hierarchyDefaults=__assign$9(__assign$9({},ChartTheme.getChartDefaults()),{series:{treemap:__assign$9(__assign$9({},ChartTheme.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],colorParents:!1,gradient:!0,nodePadding:2,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:15},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:13},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white"},color:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}})}}),ChartTheme.defaults={cartesian:ChartTheme.cartesianDefaults,groupedCategory:ChartTheme.cartesianDefaults,polar:ChartTheme.polarDefaults,hierarchy:ChartTheme.hierarchyDefaults},ChartTheme.cartesianSeriesTypes=["line","area","bar","column","scatter","histogram"],ChartTheme.polarSeriesTypes=["pie"],ChartTheme.hierarchySeriesTypes=["treemap"],ChartTheme.seriesTypes=ChartTheme.cartesianSeriesTypes.concat(ChartTheme.polarSeriesTypes).concat(ChartTheme.hierarchySeriesTypes),ChartTheme}(),__extends$1W=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$a=function(){return __assign$a=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$a.apply(this,arguments)},DarkTheme=function(_super){function DarkTheme(options){return _super.call(this,options)||this}return __extends$1W(DarkTheme,_super),DarkTheme.prototype.getDefaults=function(){var fontColor="rgb(200, 200, 200)",axisDefaults={title:{color:fontColor},label:{color:fontColor},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},seriesLabelDefaults={label:{color:fontColor}},chartAxesDefaults={axes:{number:__assign$a({},axisDefaults),category:__assign$a({},axisDefaults),time:__assign$a({},axisDefaults)}},chartDefaults={background:{fill:"rgb(34, 38, 41)"},title:{color:fontColor},subtitle:{color:"rgb(150, 150, 150)"},legend:{item:{label:{color:fontColor}}}};return this.mergeWithParentDefaults(_super.prototype.getDefaults.call(this),{cartesian:__assign$a(__assign$a(__assign$a({},chartDefaults),chartAxesDefaults),{series:{bar:__assign$a({},seriesLabelDefaults),column:__assign$a({},seriesLabelDefaults),histogram:__assign$a({},seriesLabelDefaults)}}),groupedCategory:__assign$a(__assign$a(__assign$a({},chartDefaults),chartAxesDefaults),{series:{bar:__assign$a({},seriesLabelDefaults),column:__assign$a({},seriesLabelDefaults),histogram:__assign$a({},seriesLabelDefaults)}}),polar:__assign$a(__assign$a({},chartDefaults),{series:{pie:__assign$a(__assign$a({},seriesLabelDefaults),{title:{color:fontColor}})}}),hierarchy:__assign$a(__assign$a({},chartDefaults),{series:{treemap:{title:{color:fontColor},subtitle:{color:"rgb(150, 150, 150)"},labels:{large:{color:fontColor},medium:{color:fontColor},small:{color:fontColor},color:{color:fontColor}}}}})})},DarkTheme}(ChartTheme),__extends$1X=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),palette$1={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},MaterialLight=function(_super){function MaterialLight(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1X(MaterialLight,_super),MaterialLight.prototype.getPalette=function(){return palette$1},MaterialLight}(ChartTheme),__extends$1Y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),palette$2={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},MaterialDark=function(_super){function MaterialDark(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1Y(MaterialDark,_super),MaterialDark.prototype.getPalette=function(){return palette$2},MaterialDark}(DarkTheme),__extends$1Z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),palette$3={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},PastelLight=function(_super){function PastelLight(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1Z(PastelLight,_super),PastelLight.prototype.getPalette=function(){return palette$3},PastelLight}(ChartTheme),__extends$1_=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),palette$4={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},PastelDark=function(_super){function PastelDark(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1_(PastelDark,_super),PastelDark.prototype.getPalette=function(){return palette$4},PastelDark}(DarkTheme),__extends$1$=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),palette$5={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},SolarLight=function(_super){function SolarLight(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1$(SolarLight,_super),SolarLight.prototype.getPalette=function(){return palette$5},SolarLight}(ChartTheme),__extends$20=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),palette$6={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},SolarDark=function(_super){function SolarDark(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$20(SolarDark,_super),SolarDark.prototype.getPalette=function(){return palette$6},SolarDark}(DarkTheme),__extends$21=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),palette$7={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},VividLight=function(_super){function VividLight(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$21(VividLight,_super),VividLight.prototype.getPalette=function(){return palette$7},VividLight}(ChartTheme),__extends$22=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),palette$8={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},VividDark=function(_super){function VividDark(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$22(VividDark,_super),VividDark.prototype.getPalette=function(){return palette$8},VividDark}(DarkTheme),__assign$b=function(){return __assign$b=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$b.apply(this,arguments)},lightTheme=new ChartTheme,darkTheme=new DarkTheme,lightThemes={undefined:lightTheme,null:lightTheme,"ag-default":lightTheme,"ag-material":new MaterialLight,"ag-pastel":new PastelLight,"ag-solar":new SolarLight,"ag-vivid":new VividLight},darkThemes={undefined:darkTheme,null:darkTheme,"ag-default-dark":darkTheme,"ag-material-dark":new MaterialDark,"ag-pastel-dark":new PastelDark,"ag-solar-dark":new SolarDark,"ag-vivid-dark":new VividDark},themes=__assign$b(__assign$b({},darkThemes),lightThemes);function getChartTheme(value){if(value instanceof ChartTheme)return value;var stockTheme=themes[value];return stockTheme||(value.baseTheme||value.overrides||value.palette?new(getChartTheme(value.baseTheme).constructor)(value):lightTheme)}var __extends$23=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$B=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},identity$6=function(x){return x},LogScale=function(_super){function LogScale(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type="log",_this._domain=[1,10],_this.baseLog=identity$6,_this.basePow=identity$6,_this._base=10,_this}return __extends$23(LogScale,_super),LogScale.prototype.setDomain=function(values){var df=values[0],dl=values[values.length-1];(0===df||0===dl||df<0&&dl>0||df>0&&dl<0)&&(console.warn("Log scale domain should not start at, end at or cross zero."),0===df&&dl>0?df=Number.EPSILON:0===dl&&df<0?dl=-Number.EPSILON:df<0&&dl>0?Math.abs(dl)>=Math.abs(df)?df=Number.EPSILON:dl=-Number.EPSILON:df>0&&dl<0&&(Math.abs(dl)>=Math.abs(df)?df=-Number.EPSILON:dl=Number.EPSILON),(values=values.slice())[0]=df,values[values.length-1]=dl),_super.prototype.setDomain.call(this,values)},LogScale.prototype.getDomain=function(){return _super.prototype.getDomain.call(this)},Object.defineProperty(LogScale.prototype,"base",{get:function(){return this._base},set:function(value){this._base!==value&&(this._base=value,this.rescale())},enumerable:!0,configurable:!0}),LogScale.prototype.rescale=function(){var base=this.base,baseLog=LogScale.makeLogFn(base),basePow=LogScale.makePowFn(base);this.domain[0]<0?(baseLog=this.reflect(baseLog),basePow=this.reflect(basePow),this.transform=function(x){return-Math.log(-x)},this.untransform=function(x){return-Math.exp(-x)}):(this.transform=function(x){return Math.log(x)},this.untransform=function(x){return Math.exp(x)}),this.baseLog=baseLog,this.basePow=basePow,_super.prototype.rescale.call(this)},LogScale.prototype.reflect=function(f){return function(x){return-f(-x)}},LogScale.prototype.nice=function(){var _a,_b,domain=this.domain,i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1];x1<x0&&(i0=(_a=__read$B([i1,i0],2))[0],i1=_a[1],x0=(_b=__read$B([x1,x0],2))[0],x1=_b[1]),domain[i0]=this.basePow(Math.floor(this.baseLog(x0))),domain[i1]=this.basePow(Math.ceil(this.baseLog(x1))),this.domain=domain},LogScale.pow10=function(x){return isFinite(x)?+("1e"+x):x<0?0:x},LogScale.makePowFn=function(base){return 10===base?LogScale.pow10:base===Math.E?Math.exp:function(x){return Math.pow(base,x)}},LogScale.makeLogFn=function(base){if(base===Math.E)return Math.log;if(10===base)return Math.log10;if(2===base)return Math.log2;var logBase=Math.log(base);return function(x){return Math.log(x)/logBase}},LogScale.prototype.ticks=function(count){var _a;void 0===count&&(count=10);var n=null==count?10:+count,base=this.base,domain=this.domain,d0=domain[0],d1=domain[domain.length-1],isReversed=d1<d0;isReversed&&(d0=(_a=__read$B([d1,d0],2))[0],d1=_a[1]);var p0=this.baseLog(d0),p1=this.baseLog(d1),z=[];if(!(base%1)&&p1-p0<n){if(p0=Math.round(p0)-1,p1=Math.round(p1)+1,d0>0)for(;p0<p1;++p0)for(var k=1,p=this.basePow(p0);k<base;++k){if(!((t=p*k)<d0)){if(t>d1)break;z.push(t)}}else for(;p0<p1;++p0)for(k=base-1,p=this.basePow(p0);k>=1;--k){var t;if(!((t=p*k)<d0)){if(t>d1)break;z.push(t)}}2*z.length<n&&(z=ticks$1(d0,d1,n))}else z=ticks$1(p0,p1,Math.min(p1-p0,n)).map(this.basePow);return isReversed?z.reverse():z},LogScale.prototype.tickFormat=function(count,specifier){var _this=this,base=this.base;if(null==specifier&&(specifier=10===base?".0e":","),"function"!=typeof specifier&&(specifier=format$1(specifier)),count===1/0)return specifier;null==count&&(count=10);var k=Math.max(1,base*count/this.ticks().length);return function(d){var i=d/_this.basePow(Math.round(_this.baseLog(d)));return i*base<base-.5&&(i*=base),i<=k?specifier(d):""}},LogScale}(ContinuousScale$1),__extends$24=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),LogAxis=function(_super){function LogAxis(){var _this=_super.call(this)||this;return _this.scale=new LogScale,_this.scale.clamper=clamper$2,_this}return __extends$24(LogAxis,_super),Object.defineProperty(LogAxis.prototype,"base",{get:function(){return this.scale.base},set:function(value){this.scale.base=value},enumerable:!0,configurable:!0}),LogAxis.className="LogAxis",LogAxis.type="log",LogAxis}(NumberAxis),__assign$c=function(){return __assign$c=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$c.apply(this,arguments)},__read$C=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$g=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$C(arguments[i]));return ar},__values$a=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};function jsonDiff(source,target,opts){var e_1,_a,_b=(opts||{}).stringify,stringify=void 0===_b?[]:_b,sourceType=classify(source);if("array"===classify(target))return"array"!==sourceType||source.length!==target.length||target.some((function(targetElement,i){var _a;return null!=jsonDiff(null===(_a=source)||void 0===_a?void 0:_a[i],targetElement)}))?__spread$g(target):null;var lhs=source||{},rhs=target||{},allProps=new Set(__spread$g(Object.keys(lhs),Object.keys(rhs))),propsChangedCount=0,result={},_loop_1=function(prop){if(lhs[prop]===rhs[prop])return"continue";var take=function(v){result[prop]=v,propsChangedCount++};if(stringify.includes(prop))return JSON.stringify(lhs[prop]!==JSON.stringify(rhs[prop]))&&take(rhs[prop]),"continue";var lhsType=classify(lhs[prop]),rhsType=classify(rhs[prop]);if(lhsType!==rhsType)return take(rhs[prop]),"continue";if("primitive"===rhsType||null===rhsType)return take(rhs[prop]),"continue";if("array"===rhsType&&lhs[prop].length!==rhs[prop].length)return take(rhs[prop]),"continue";if("class-instance"===rhsType)return take(rhs[prop]),"continue";if("function"===rhsType&&lhs[prop]!==rhs[prop])return take(rhs[prop]),"continue";var diff=jsonDiff(lhs[prop],rhs[prop],{stringify});null!==diff&&take(diff)};try{for(var allProps_1=__values$a(allProps),allProps_1_1=allProps_1.next();!allProps_1_1.done;allProps_1_1=allProps_1.next()){_loop_1(allProps_1_1.value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{allProps_1_1&&!allProps_1_1.done&&(_a=allProps_1.return)&&_a.call(allProps_1)}finally{if(e_1)throw e_1.error}}return 0===propsChangedCount?null:result}var DELETE=Symbol("<delete-property>"),NOT_SPECIFIED=Symbol("<unspecified-property>");function jsonMerge(){for(var e_2,_a,json=[],_i=0;_i<arguments.length;_i++)json[_i]=arguments[_i];if(json.map((function(v){return classify(v)})).some((function(v){return"array"===v}))){var finalValue=json[json.length-1];return finalValue instanceof Array?finalValue.map((function(v){var type=classify(v);return"array"===type?jsonMerge([],v):"object"===type?jsonMerge({},v):v})):finalValue}var result={},props=new Set(json.map((function(v){return null!=v?Object.keys(v):[]})).reduce((function(r,n){return r.concat(n)}),[])),_loop_2=function(nextProp){var values=json.map((function(j){return null!=j&&nextProp in j?j[nextProp]:NOT_SPECIFIED})).filter((function(v){return v!==NOT_SPECIFIED}));if(0===values.length)return"continue";var lastValue=values[values.length-1];if(lastValue===DELETE)return"continue";var types=values.map((function(v){return classify(v)})),type=types[0];if(types.some((function(t){return t!==type&&null!==t})))return result[nextProp]=lastValue,"continue";result[nextProp]="array"===type||"object"===type?jsonMerge.apply(void 0,__spread$g(values)):lastValue};try{for(var props_1=__values$a(props),props_1_1=props_1.next();!props_1_1.done;props_1_1=props_1.next()){_loop_2(props_1_1.value)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{props_1_1&&!props_1_1.done&&(_a=props_1.return)&&_a.call(props_1)}finally{if(e_2)throw e_2.error}}return result}function jsonApply(target,source,params){var _a,_b,_c;void 0===params&&(params={});var _d=params.path,path=void 0===_d?void 0:_d,_e=params.matcherPath,matcherPath=void 0===_e?path?path.replace(/(\[[0-9+]{1,}\])/i,"[]"):void 0:_e,_f=params.skip,skip=void 0===_f?[]:_f,_g=params.constructors,constructors=void 0===_g?{}:_g,_h=params.allowedTypes,allowedTypes=void 0===_h?{}:_h;if(null==target)throw new Error("AG Charts - target is uninitialised: "+(path||"<root>"));if(null==source)return target;var targetType=classify(target);for(var property in source)if(!(skip.indexOf(property)>=0)){var newValue=source[property],propertyPath=(path?path+".":"")+property,propertyMatcherPath=(matcherPath?matcherPath+".":"")+property,targetAny=target,targetClass=targetAny.constructor,currentValue=targetAny[property],ctr=constructors[property];try{var currentValueType=classify(currentValue),newValueType=classify(newValue);if("class-instance"===targetType&&!(property in target)&&!targetAny.hasOwnProperty(property)){console.warn("AG Charts - unable to set ["+propertyPath+"] in "+(null===(_a=targetClass)||void 0===_a?void 0:_a.name)+" - property is unknown");continue}var allowableTypes=allowedTypes[propertyMatcherPath]||[currentValueType];if("class-instance"===currentValueType&&"object"===newValueType);else if(null!=currentValueType&&null!=newValueType&&!allowableTypes.includes(newValueType)){console.warn("AG Charts - unable to set ["+propertyPath+"] in "+(null===(_b=targetClass)||void 0===_b?void 0:_b.name)+" - can't apply type of ["+newValueType+"], allowed types are: ["+allowableTypes+"]");continue}"array"===newValueType||"class-instance"===newValueType?targetAny[property]=newValue:"object"===newValueType?null!=currentValue?jsonApply(currentValue,newValue,__assign$c(__assign$c({},params),{path:propertyPath,matcherPath:propertyMatcherPath})):targetAny[property]=null!=ctr?jsonApply(new ctr,newValue,__assign$c(__assign$c({},params),{path:propertyPath,matcherPath:propertyMatcherPath})):newValue:targetAny[property]=newValue}catch(error){console.warn("AG Charts - unable to set ["+propertyPath+"] in ["+(null===(_c=targetClass)||void 0===_c?void 0:_c.name)+"]; nested error is: "+error.message);continue}}return target}function jsonWalk(json,visit,opts){for(var _a,jsons=[],_i=3;_i<arguments.length;_i++)jsons[_i-3]=arguments[_i];var jsonType=classify(json),skip=opts.skip||[];if("array"!==jsonType){if("object"===jsonType){visit.apply(void 0,__spread$g([jsonType,json],jsons));var _loop_3=function(property){if(skip.indexOf(property)>=0)return"continue";var value=json[property],otherValues=null===(_a=jsons)||void 0===_a?void 0:_a.map((function(o){var _a;return null===(_a=o)||void 0===_a?void 0:_a[property]})),valueType=classify(value);"object"!==valueType&&"array"!==valueType||jsonWalk.apply(void 0,__spread$g([value,visit,opts],otherValues))};for(var property in json)_loop_3(property)}}else json.forEach((function(element,index){var _a;jsonWalk.apply(void 0,__spread$g([element,visit,opts],null===(_a=jsons)||void 0===_a?void 0:_a.map((function(o){var _a;return null===(_a=o)||void 0===_a?void 0:_a[index]}))))}))}function classify(value){return null==value?null:value instanceof HTMLElement?"primitive":value instanceof Array?"array":value instanceof Date?"primitive":"object"==typeof value&&value.constructor===Object?"object":"function"==typeof value?"function":"object"==typeof value&&null!=value.constructor?"class-instance":"primitive"}var DEFAULT_CARTESIAN_CHART_OVERRIDES={type:"cartesian",axes:[{type:NumberAxis.type,position:ChartAxisPosition.Left},{type:CategoryAxis.type,position:ChartAxisPosition.Bottom}]},DEFAULT_BAR_CHART_OVERRIDES={axes:[{type:"number",position:ChartAxisPosition.Bottom},{type:"category",position:ChartAxisPosition.Left}]},DEFAULT_SCATTER_HISTOGRAM_CHART_OVERRIDES={axes:[{type:"number",position:ChartAxisPosition.Bottom},{type:"number",position:ChartAxisPosition.Left}]},__assign$d=function(){return __assign$d=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$d.apply(this,arguments)};function is2dArray$1(input){return null!=input&&input instanceof Array&&input[0]instanceof Array}function yNamesMapping(p,src){if(null==p)return{};if(!(p instanceof Array))return p;var yKeys=src.yKeys;if(null==yKeys||is2dArray$1(yKeys))throw new Error("AG Charts - yNames and yKeys mismatching configuration.");var result={};return yKeys.forEach((function(k,i){result[k]=p[i]})),result}function yKeysMapping(p,src){return null==p?[[]]:is2dArray$1(p)?p:src.grouped?p.map((function(v){return[v]})):[p]}function labelMapping(p){if(null!=p){var placement=p.placement;return __assign$d(__assign$d({},p),{placement:"inside"===placement?BarLabelPlacement.Inside:"outside"===placement?BarLabelPlacement.Outside:void 0})}}function barSeriesTransform(options){var result=__assign$d(__assign$d({},options),{yKeys:options.yKeys||[options.yKey]});return delete result.yKey,function transform(input,transforms){var result={};for(var p in input){var t=transforms[p]||function(x){return x};result[p]=t(input[p],input)}return result}(result,{yNames:yNamesMapping,yKeys:yKeysMapping,label:labelMapping})}function identityTransform(input){return input}var SERIES_TRANSFORMS={area:identityTransform,bar:barSeriesTransform,column:barSeriesTransform,histogram:identityTransform,line:identityTransform,pie:identityTransform,scatter:identityTransform,treemap:identityTransform};var __assign$e=function(){return __assign$e=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$e.apply(this,arguments)},__values$b=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$D=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$h=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$D(arguments[i]));return ar};function reduceSeries(series,enableBarSeriesSpecialCases){var e_2,_a,options={},arrayValueProperties=["yKeys","fills","strokes","yNames","hideInChart","hideInLegend"],stringValueProperties=["yKey","fill","stroke","yName"];try{for(var series_1=__values$b(series),series_1_1=series_1.next();!series_1_1.done;series_1_1=series_1.next()){var s=series_1_1.value;for(var property in s){var arrayValueProperty=arrayValueProperties.indexOf(property)>-1,stringValueProperty=stringValueProperties.indexOf(property)>-1;arrayValueProperty&&s[property].length>0?options[property]=__spread$h(options[property]||[],s[property]):stringValueProperty?options[property+"s"]=__spread$h(options[property+"s"]||[],[s[property]]):enableBarSeriesSpecialCases&&"showInLegend"===property?!1===s[property]&&(options.hideInLegend=__spread$h(options.hideInLegend||[],s.yKey?[s.yKey]:s.yKeys)):enableBarSeriesSpecialCases&&"grouped"===property?!0===s[property]&&(options[property]=s[property]):options[property]=s[property]}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{series_1_1&&!series_1_1.done&&(_a=series_1.return)&&_a.call(series_1)}finally{if(e_2)throw e_2.error}}return options}function processSeriesOptions(seriesOptions){var e_3,_a,result=[],preprocessed=seriesOptions.map((function(series){return"bar"!==series.type&&"column"!==series.type||null==series.yKey||series.stacked?series:__assign$e(__assign$e({},series),{grouped:null==series.grouped||series.grouped})}));try{for(var _b=__values$b(function groupSeriesByType(seriesOptions){var e_1,_a,indexMap={},result=[];try{for(var seriesOptions_1=__values$b(seriesOptions),seriesOptions_1_1=seriesOptions_1.next();!seriesOptions_1_1.done;seriesOptions_1_1=seriesOptions_1.next()){var s=seriesOptions_1_1.value;if("column"===s.type||"bar"===s.type||"area"===s.type&&!0===s.stacked){var seriesType=s.type||"line",groupingKey=s.stacked?"stacked":s.grouped?"grouped":s.yKeys?"stacked":"grouped",indexKey=seriesType+"-"+s.xKey+"-"+groupingKey;null==indexMap[indexKey]&&(indexMap[indexKey]=[],result.push(indexMap[indexKey])),indexMap[indexKey].push(s)}else result.push([s])}}catch(e_1_1){e_1={error:e_1_1}}finally{try{seriesOptions_1_1&&!seriesOptions_1_1.done&&(_a=seriesOptions_1.return)&&_a.call(seriesOptions_1)}finally{if(e_1)throw e_1.error}}return result}(preprocessed)),_c=_b.next();!_c.done;_c=_b.next()){var series=_c.value;switch(series[0].type){case"column":case"bar":result.push(reduceSeries(series,!0));break;case"area":result.push(reduceSeries(series,!1));break;default:series.length>1&&console.warn("AG Charts - unexpected grouping of series type: "+series[0].type),result.push(series[0])}}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_3)throw e_3.error}}return result}var __assign$f=function(){return __assign$f=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$f.apply(this,arguments)},__values$c=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$E=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$i=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$E(arguments[i]));return ar};function optionsType(input){var _a,_b;return input.type||(null===(_b=null===(_a=input.series)||void 0===_a?void 0:_a[0])||void 0===_b?void 0:_b.type)||"cartesian"}function isAgCartesianChartOptions(input){var specifiedType=optionsType(input);if(null==specifiedType)return!0;switch(specifiedType){case"cartesian":case"area":case"bar":case"column":case"groupedCategory":case"histogram":case"line":case"scatter":return!0;default:return!1}}function isAgHierarchyChartOptions(input){if(null==optionsType(input))return!1;switch(input.type){case"hierarchy":case"treemap":return!0;default:return!1}}function isAgPolarChartOptions(input){if(null==optionsType(input))return!1;switch(input.type){case"polar":case"pie":return!0;default:return!1}}function countArrayElements(input){var e_1,_a,count=0;try{for(var input_1=__values$c(input),input_1_1=input_1.next();!input_1_1.done;input_1_1=input_1.next()){var next=input_1_1.value;next instanceof Array&&(count+=countArrayElements(next)),null!=next&&count++}}catch(e_1_1){e_1={error:e_1_1}}finally{try{input_1_1&&!input_1_1.done&&(_a=input_1.return)&&_a.call(input_1)}finally{if(e_1)throw e_1.error}}return count}function takeColours(context,colours,maxCount){for(var result=[],count=0;count<maxCount;count++)result.push(colours[(count+context.colourIndex)%colours.length]);return result}function prepareOptions(newOptions,fallbackOptions){var options=null==fallbackOptions?newOptions:jsonMerge(fallbackOptions,newOptions);!function sanityCheckOptions(options){var _a,_b;(null===(_a=options.series)||void 0===_a?void 0:_a.some((function(s){return null!=s.yKeys&&null!=s.yKey})))&&console.warn("AG Charts - series options yKeys and yKey are mutually exclusive, please only use yKey for future compatibility.");(null===(_b=options.series)||void 0===_b?void 0:_b.some((function(s){return null!=s.yNames&&null!=s.yName})))&&console.warn("AG Charts - series options yNames and yName are mutually exclusive, please only use yName for future compatibility.")}(options);var userSuppliedOptionsType=options.type,type=optionsType(options),defaultSeriesType=isAgCartesianChartOptions(options=__assign$f(__assign$f({},options),{type}))?"line":isAgHierarchyChartOptions(options)?"treemap":isAgPolarChartOptions(options)?"pie":"line",_a=function prepareMainOptions(defaultOverrides,options){var _a=function prepareTheme(options){var theme=getChartTheme(options.theme),themeConfig=theme.getConfig(optionsType(options)||"cartesian");return{theme,axesThemes:themeConfig.axes||{},seriesThemes:themeConfig.series||{},cleanedTheme:jsonMerge(themeConfig,{axes:DELETE,series:DELETE})}}(options),theme=_a.theme,cleanedTheme=_a.cleanedTheme,axesThemes=_a.axesThemes,seriesThemes=_a.seriesThemes,context={colourIndex:0,palette:theme.palette},mergedOptions=jsonMerge(defaultOverrides,cleanedTheme,options);return{context,mergedOptions,axesThemes,seriesThemes}}("bar"===type?DEFAULT_BAR_CHART_OVERRIDES:"scatter"===type||"histogram"===type?DEFAULT_SCATTER_HISTOGRAM_CHART_OVERRIDES:isAgCartesianChartOptions(options)?DEFAULT_CARTESIAN_CHART_OVERRIDES:{},options),context=_a.context,mergedOptions=_a.mergedOptions,axesThemes=_a.axesThemes,seriesThemes=_a.seriesThemes;return mergedOptions.series=processSeriesOptions(mergedOptions.series||[]).map((function(s){var type=s.type?s.type:function isSeriesOptionType(input){return null!=input&&["line","bar","column","histogram","scatter","area","pie","treemap"].indexOf(input)>=0}(userSuppliedOptionsType)?userSuppliedOptionsType:defaultSeriesType,series=__assign$f(__assign$f({},s),{type});return function prepareSeries(context,input){for(var defaults=[],_i=2;_i<arguments.length;_i++)defaults[_i-2]=arguments[_i];var paletteOptions=function calculateSeriesPalette(context,input){var paletteOptions={},_a=context.palette,fills=_a.fills,strokes=_a.strokes,inputAny=input,colourCount=countArrayElements(inputAny.yKeys||[])||1;switch(input.type){case"pie":colourCount=Math.max(fills.length,strokes.length);case"area":case"bar":case"column":paletteOptions.fills=takeColours(context,fills,colourCount),paletteOptions.strokes=takeColours(context,strokes,colourCount);break;case"histogram":paletteOptions.fill=takeColours(context,fills,1)[0],paletteOptions.stroke=takeColours(context,strokes,1)[0];break;case"scatter":paletteOptions.fill=takeColours(context,fills,1)[0];case"line":paletteOptions.stroke=takeColours(context,fills,1)[0],paletteOptions.marker={stroke:takeColours(context,strokes,1)[0],fill:takeColours(context,fills,1)[0]};break;case"treemap":break;default:throw new Error("AG Charts - unknown series type: "+input.type)}return context.colourIndex+=colourCount,paletteOptions}(context,input),removeOptions={stacked:DELETE};return function applySeriesTransform(options){var type=options.type;return(0,SERIES_TRANSFORMS[type||"line"])(options)}(jsonMerge.apply(void 0,__spread$i(defaults,[paletteOptions,input,removeOptions])))}(context,series,seriesThemes[type]||{})})),isAgCartesianChartOptions(mergedOptions)&&(mergedOptions.axes||[]).forEach((function(a,i){var type=a.type||"number",axis=__assign$f(__assign$f({},a),{type}),axesTheme=jsonMerge(axesThemes[type],axesThemes[type][a.position||"unknown"]||{});mergedOptions.axes[i]=function prepareAxis(input){for(var defaults=[],_i=1;_i<arguments.length;_i++)defaults[_i-1]=arguments[_i];var removeOptions={top:DELETE,bottom:DELETE,left:DELETE,right:DELETE};return jsonMerge.apply(void 0,__spread$i(defaults,[input,removeOptions]))}(axis,axesTheme)})),function prepareEnabledOptions(options,mergedOptions){jsonWalk(options,(function(_,userOpts,mergedOpts){mergedOpts&&"enabled"in mergedOpts&&null==userOpts.enabled&&(mergedOpts.enabled=!0)}),{skip:["data"]},mergedOptions)}(options,mergedOptions),mergedOptions}var __assign$g=function(){return __assign$g=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$g.apply(this,arguments)},__read$F=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$j=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$F(arguments[i]));return ar},__values$d=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};function chartType(options){if(isAgCartesianChartOptions(options))return"cartesian";if(isAgPolarChartOptions(options))return"polar";if(isAgHierarchyChartOptions(options))return"hierarchy";throw new Error("AG Chart - unknown type of chart for options with type: "+options.type)}var AgChart=function(){function AgChart(){}return AgChart.createComponent=function(options,type){return type.indexOf(".series")>=0?createSeries([__assign$g(__assign$g({},options),{type:options.type||type.split(".")[0]})])[0]:null},AgChart.create=function(options,container,data){return AgChartV2.create(options)},AgChart.update=function(chart,options,container,data){return AgChartV2.update(chart,options)},AgChart}(),AgChartV2=function(){function AgChartV2(){}return AgChartV2.create=function(userOptions){debug("user options",userOptions);var mergedOptions=prepareOptions(userOptions),chart=isAgCartesianChartOptions(mergedOptions)?"groupedCategory"===mergedOptions.type?new GroupedCategoryChart(document):new CartesianChart(document):isAgHierarchyChartOptions(mergedOptions)?new HierarchyChart(document):isAgPolarChartOptions(mergedOptions)?new PolarChart(document):void 0;if(!chart)throw new Error("AG Charts - couldn't apply configuration, check type of options: "+mergedOptions.type);return AgChartV2.updateDelta(chart,mergedOptions,userOptions),chart},AgChartV2.update=function(chart,userOptions){debug("user options",userOptions);var mergedOptions=prepareOptions(userOptions,chart.userOptions);if(chartType(mergedOptions)!==chartType(chart.options))return chart.destroy(),void console.warn("AG Charts - options supplied require a different type of chart, please recreate the chart.");var deltaOptions=jsonDiff(chart.options,mergedOptions,{stringify:["data"]});null!=deltaOptions&&AgChartV2.updateDelta(chart,deltaOptions,userOptions)},AgChartV2.updateDelta=function(chart,update,userOptions){null==update.type&&(update=__assign$g(__assign$g({},update),{type:chart.options.type||optionsType(update)})),debug("delta update",update),function applyChartOptions(chart,options,userOptions){if(isAgCartesianChartOptions(options))applyOptionValues(chart,options,{skip:["type","data","series","axes","autoSize","listeners","theme"]});else if(isAgPolarChartOptions(options))applyOptionValues(chart,options,{skip:["type","data","series","autoSize","listeners","theme"]});else{if(!isAgHierarchyChartOptions(options))throw new Error("AG Charts - couldn't apply configuration, check type of options and chart: "+options.type);applyOptionValues(chart,options,{skip:["type","data","series","autoSize","listeners","theme"]})}var performProcessData=!1;options.series&&options.series.length>0&&function applySeries(chart,options){var optSeries=options.series;if(!optSeries)return;var matchingTypes=chart.series.length===optSeries.length&&chart.series.every((function(s,i){var _a;return s.type===(null===(_a=optSeries[i])||void 0===_a?void 0:_a.type)}));if(matchingTypes)return void chart.series.forEach((function(s,i){var _a,_b,seriesDiff=jsonDiff((null===(_b=null===(_a=chart.options)||void 0===_a?void 0:_a.series)||void 0===_b?void 0:_b[i])||{},optSeries[i]||{});debug("applying series diff idx "+i,seriesDiff),jsonApply(s,seriesDiff)}));chart.series=createSeries(optSeries)}(chart,options);isAgCartesianChartOptions(options)&&options.axes&&(performProcessData=function applyAxes(chart,options){var optAxes=options.axes;if(!optAxes)return!1;var matchingTypes=chart.axes.length===optAxes.length&&chart.axes.every((function(a,i){return a.type===optAxes[i].type}));if(matchingTypes){var oldOpts_1=chart.options;if(isAgCartesianChartOptions(oldOpts_1))return chart.axes.forEach((function(a,i){var _a,axisDiff=jsonDiff((null===(_a=oldOpts_1.axes)||void 0===_a?void 0:_a[i])||{},optAxes[i]);debug("applying axis diff idx "+i,axisDiff),jsonApply(a,axisDiff)})),!0}return chart.axes=function createAxis(options){var e_2,_a,axes=[],index=0;try{for(var _b=__values$d(options||[]),_c=_b.next();!_c.done;_c=_b.next()){var axisOptions=_c.value,path="axis["+index+++"]";switch(axisOptions.type){case"number":axes.push(applyAxisValues(new NumberAxis,axisOptions,{path}));break;case LogAxis.type:axes.push(applyAxisValues(new LogAxis,axisOptions,{path}));break;case CategoryAxis.type:axes.push(applyAxisValues(new CategoryAxis,axisOptions,{path}));break;case GroupedCategoryAxis.type:axes.push(applyAxisValues(new GroupedCategoryAxis,axisOptions,{path}));break;case TimeAxis.type:axes.push(applyAxisValues(new TimeAxis,axisOptions,{path}));break;default:throw new Error("AG Charts - unknown axis type: "+axisOptions.type)}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_2)throw e_2.error}}return axes}(optAxes),!0}(chart,options));options.data&&(chart.data=options.data,performProcessData=!0);null!=options.autoSize&&(chart.autoSize=options.autoSize);options.listeners&&registerListeners(chart,options.listeners);chart.layoutPending=!0,performProcessData&&chart.processData();chart.performLayout(),chart.options=jsonMerge(chart.options||{},options),chart.userOptions=jsonMerge(chart.userOptions||{},userOptions)}(chart,update,userOptions)},AgChartV2.DEBUG=!1,AgChartV2}();function debug(message){for(var optionalParams=[],_i=1;_i<arguments.length;_i++)optionalParams[_i-1]=arguments[_i];AgChartV2.DEBUG&&console.log.apply(console,__spread$j([message],optionalParams))}function createSeries(options){var e_1,_a,series=[],skip=["listeners"],index=0;try{for(var _b=__values$d(options||[]),_c=_b.next();!_c.done;_c=_b.next()){var seriesOptions=_c.value,path="series["+index+++"]";switch(seriesOptions.type){case"area":series.push(applySeriesValues(new AreaSeries,seriesOptions,{path,skip}));break;case"bar":case"column":series.push(applySeriesValues(new BarSeries,seriesOptions,{path,skip}));break;case"histogram":series.push(applySeriesValues(new HistogramSeries,seriesOptions,{path,skip}));break;case"line":series.push(applySeriesValues(new LineSeries,seriesOptions,{path,skip}));break;case"scatter":series.push(applySeriesValues(new ScatterSeries,seriesOptions,{path,skip}));break;case"pie":series.push(applySeriesValues(new PieSeries,seriesOptions,{path,skip}));break;case"treemap":series.push(applySeriesValues(new TreemapSeries,seriesOptions,{path,skip}));break;default:throw new Error("AG Charts - unknown series type: "+seriesOptions.type)}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return series.forEach((function(next,index){var _a,_b,listeners=null===(_b=null===(_a=options)||void 0===_a?void 0:_a[index])||void 0===_b?void 0:_b.listeners;null!=listeners&&registerListeners(next,listeners)})),series}function registerListeners(source,listeners){for(var property in listeners)source.addEventListener(property,listeners[property])}var JSON_APPLY_OPTIONS={constructors:{title:Caption,subtitle:Caption,shadow:DropShadow},allowedTypes:{"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function applyOptionValues(target,options,_a){var _b=void 0===_a?{}:_a,skip=_b.skip,path=_b.path;return jsonApply(target,options,__assign$g(__assign$g(__assign$g({},JSON_APPLY_OPTIONS),{skip:__spread$j(["type"],skip||[])}),path?{path}:{}))}function applySeriesValues(target,options,_a){var _c,_b=void 0===_a?{}:_a,skip=_b.skip,path=_b.path,ctrs=(null===(_c=JSON_APPLY_OPTIONS)||void 0===_c?void 0:_c.constructors)||{},seriesTypeOverrides={constructors:__assign$g(__assign$g({},ctrs),{title:"pie"===target.type?PieTitle:ctrs.title})};return jsonApply(target,options,__assign$g(__assign$g(__assign$g(__assign$g({},JSON_APPLY_OPTIONS),seriesTypeOverrides),{skip:__spread$j(["type"],skip||[])}),path?{path}:{}))}function applyAxisValues(target,options,_a){var _b=void 0===_a?{}:_a,skip=_b.skip,path=_b.path;return jsonApply(target,options,__assign$g(__assign$g(__assign$g({},JSON_APPLY_OPTIONS),{skip:__spread$j(["type"],skip||[])}),path?{path}:{}))}function getSeriesType(chartType){switch(chartType){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"column";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"scatter":case"bubble":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}var __extends$25=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ChartController=function(_super){function ChartController(model){var _this=_super.call(this)||this;return _this.model=model,_this}return __extends$25(ChartController,_super),ChartController.prototype.init=function(){var _this=this;this.setChartRange(),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_RANGE_SELECTION_CHANGED,(function(event){event.id&&event.id===_this.model.chartId&&_this.updateForRangeChange()})),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))},ChartController.prototype.updateForGridChange=function(){this.model.unlinked||(this.model.updateCellRanges(),this.setChartRange())},ChartController.prototype.updateForDataChange=function(){this.model.unlinked||(this.model.updateData(),this.raiseChartUpdatedEvent())},ChartController.prototype.updateForRangeChange=function(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()},ChartController.prototype.updateForPanelChange=function(updatedCol){this.model.updateCellRanges(updatedCol),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()},ChartController.prototype.getChartModel=function(){var modelType=this.model.pivotChart?"pivot":"range",seriesChartTypes=this.isComboChart()?this.model.seriesChartTypes:void 0;return{modelType,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.model.chartThemeName,chartOptions:this.chartProxy.getChartOptions(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes}},ChartController.prototype.getChartId=function(){return this.model.chartId},ChartController.prototype.getChartData=function(){return this.model.chartData},ChartController.prototype.getChartType=function(){return this.model.chartType},ChartController.prototype.setChartType=function(chartType){this.model.chartType=chartType,this.model.updateSeriesChartTypes(),this.raiseChartUpdatedEvent(),this.raiseChartOptionsChangedEvent()},ChartController.prototype.setChartThemeName=function(chartThemeName){this.model.chartThemeName=chartThemeName,this.raiseChartUpdatedEvent(),this.raiseChartOptionsChangedEvent()},ChartController.prototype.getChartThemeName=function(){return this.model.chartThemeName},ChartController.prototype.isPivotChart=function(){return this.model.pivotChart},ChartController.prototype.isPivotMode=function(){return this.model.isPivotMode()},ChartController.prototype.isGrouping=function(){return this.model.isGrouping()},ChartController.prototype.getThemes=function(){return this.gridOptionsWrapper.getChartThemes()},ChartController.prototype.getPalettes=function(){var _this=this;return this.gridOptionsWrapper.getChartThemes().map((function(themeName){return getChartTheme(_this.chartProxy.isStockTheme(themeName)?themeName:_this.chartProxy.lookupCustomChartTheme(themeName)).palette}))},ChartController.prototype.getValueColState=function(){return this.model.valueColState.map(this.displayNameMapper.bind(this))},ChartController.prototype.getSelectedValueColState=function(){return this.getValueColState().filter((function(cs){return cs.selected}))},ChartController.prototype.getDimensionColState=function(){return this.model.dimensionColState},ChartController.prototype.getSelectedDimension=function(){return this.model.getSelectedDimension()},ChartController.prototype.displayNameMapper=function(col){var columnNames=this.model.columnNames[col.colId];return col.displayName=columnNames?columnNames.join(" - "):this.model.getColDisplayName(col.column),col},ChartController.prototype.getColStateForMenu=function(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}},ChartController.prototype.isDefaultCategorySelected=function(){return this.model.getSelectedDimension().colId===ChartDataModel.DEFAULT_CATEGORY},ChartController.prototype.setChartRange=function(silent){void 0===silent&&(silent=!1),!this.rangeService||this.model.suppressChartRanges||this.model.unlinked||this.rangeService.setCellRanges(this.getCellRanges()),silent||this.raiseChartUpdatedEvent()},ChartController.prototype.detachChartRange=function(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()},ChartController.prototype.setChartProxy=function(chartProxy){this.chartProxy=chartProxy},ChartController.prototype.getChartProxy=function(){return this.chartProxy},ChartController.prototype.isActiveXYChart=function(){return agGridCommunity._.includes(["scatter","bubble"],this.getChartType())},ChartController.prototype.isChartLinked=function(){return!this.model.unlinked},ChartController.prototype.customComboExists=function(){return this.model.savedCustomSeriesChartTypes&&this.model.savedCustomSeriesChartTypes.length>0},ChartController.prototype.getSeriesChartTypes=function(){return this.model.seriesChartTypes},ChartController.prototype.isComboChart=function(){return this.model.isComboChart()},ChartController.prototype.updateSeriesChartType=function(colId,chartType,secondaryAxis){var seriesChartType=this.model.seriesChartTypes.find((function(s){return s.colId===colId}));if(seriesChartType){var updateChartType="customCombo"!==this.model.chartType;updateChartType&&(this.model.chartType="customCombo");var prevSeriesChartType=seriesChartType.chartType;null!=chartType&&(seriesChartType.chartType=chartType),null!=secondaryAxis&&(seriesChartType.secondaryAxis=secondaryAxis),this.model.savedCustomSeriesChartTypes=this.model.seriesChartTypes,this.model.updateSeriesChartTypes(),this.updateForDataChange(),updateChartType&&this.dispatchEvent(Object.freeze({type:ChartController.EVENT_CHART_TYPE_CHANGED})),prevSeriesChartType!==chartType&&this.dispatchEvent(Object.freeze({type:ChartController.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}))}},ChartController.prototype.getActiveSeriesChartTypes=function(){var selectedColIds=this.getSelectedValueColState().map((function(c){return c.colId}));return this.getSeriesChartTypes().filter((function(s){return selectedColIds.includes(s.colId)}))},ChartController.prototype.getChartSeriesTypes=function(){return this.isComboChart()?["line","column","area"]:[getSeriesType(this.getChartType())]},ChartController.prototype.getCellRanges=function(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter((function(r){return r}))},ChartController.prototype.getCellRangeParams=function(){var cellRanges=this.getCellRanges(),firstCellRange=cellRanges[0],startRow=firstCellRange&&firstCellRange.startRow||null,endRow=firstCellRange&&firstCellRange.endRow||null;return{rowStartIndex:startRow&&startRow.rowIndex,rowStartPinned:startRow&&startRow.rowPinned,rowEndIndex:endRow&&endRow.rowIndex,rowEndPinned:endRow&&endRow.rowPinned,columns:cellRanges.reduce((function(columns,value){return columns.concat(value.columns.map((function(c){return c.getId()})))}),[])}},ChartController.prototype.raiseChartUpdatedEvent=function(){var event=Object.freeze({type:ChartController.EVENT_CHART_UPDATED});this.dispatchEvent(event)},ChartController.prototype.raiseChartOptionsChangedEvent=function(){var _a=this.getChartModel(),chartId=_a.chartId,chartType=_a.chartType,event=Object.freeze({type:agGridCommunity.Events.EVENT_CHART_OPTIONS_CHANGED,chartId,chartType,chartThemeName:this.model.chartThemeName,chartOptions:this.chartProxy.getChartOptions(),api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(event)},ChartController.prototype.raiseChartRangeSelectionChangedEvent=function(){var event=Object.freeze({type:agGridCommunity.Events.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams(),api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(event)},ChartController.prototype.destroy=function(){_super.prototype.destroy.call(this),this.rangeService&&this.rangeService.setCellRanges([])},ChartController.EVENT_CHART_UPDATED="chartUpdated",ChartController.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",ChartController.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",__decorate$Y([agGridCommunity.Autowired("rangeService")],ChartController.prototype,"rangeService",void 0),__decorate$Y([agGridCommunity.Autowired("gridApi")],ChartController.prototype,"gridApi",void 0),__decorate$Y([agGridCommunity.Autowired("columnApi")],ChartController.prototype,"columnApi",void 0),__decorate$Y([agGridCommunity.PostConstruct],ChartController.prototype,"init",null),ChartController}(agGridCommunity.BeanStub),__extends$26=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$G=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$k=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$G(arguments[i]));return ar},__values$e=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},ChartDataPanel=function(_super){function ChartDataPanel(chartController,chartOptionsService){var _this=_super.call(this,ChartDataPanel.TEMPLATE)||this;return _this.chartController=chartController,_this.chartOptionsService=chartOptionsService,_this.columnComps=new Map,_this}return __extends$26(ChartDataPanel,_super),ChartDataPanel.prototype.init=function(){this.updatePanels(),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_UPDATED,this.updatePanels.bind(this)),this.createAutoScrollService()},ChartDataPanel.prototype.destroy=function(){this.clearComponents(),_super.prototype.destroy.call(this)},ChartDataPanel.prototype.updatePanels=function(){var _this=this,currentChartType=this.chartType,_a=this.chartController.getColStateForMenu(),dimensionCols=_a.dimensionCols,valueCols=_a.valueCols,colIds=dimensionCols.map((function(c){return c.colId})).concat(valueCols.map((function(c){return c.colId})));this.chartType=this.chartController.getChartType();var groupExpandedState=this.getGroupExpandedState();if(agGridCommunity._.areEqual(agGridCommunity._.keys(this.columnComps),colIds)&&this.chartType===currentChartType){if(__spread$k(dimensionCols,valueCols).forEach((function(col){_this.columnComps.get(col.colId).setValue(col.selected,!0)})),this.chartController.isActiveXYChart()){var getSeriesLabel_1=this.generateGetSeriesLabel();valueCols.forEach((function(col){_this.columnComps.get(col.colId).setLabel(getSeriesLabel_1(col))}))}agGridCommunity._.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.createSeriesChartTypeGroup(valueCols)}else this.clearComponents(),this.createCategoriesGroup(dimensionCols),this.createSeriesGroup(valueCols),this.createSeriesChartTypeGroup(valueCols);this.restoreGroupExpandedState(groupExpandedState)},ChartDataPanel.prototype.getGroupExpandedState=function(){return[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].map((function(group){return!group||group.isExpanded()}))},ChartDataPanel.prototype.restoreGroupExpandedState=function(groupExpandedState){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach((function(group,idx){group&&group.toggleGroupExpand(groupExpandedState[idx])}))},ChartDataPanel.prototype.createAutoScrollService=function(){var eGui=this.getGui();this.autoScrollService=new agGridCommunity.AutoScrollService({scrollContainer:eGui,scrollAxis:"y",getVerticalPosition:function(){return eGui.scrollTop},setVerticalPosition:function(position){return eGui.scrollTop=position}})},ChartDataPanel.prototype.addComponent=function(parent,component,id){var eDiv=document.createElement("div");eDiv.id=id,eDiv.className="ag-chart-data-section",eDiv.appendChild(component.getGui()),parent.appendChild(eDiv)},ChartDataPanel.prototype.addChangeListener=function(component,columnState){var _this=this;this.addManagedListener(component,agGridCommunity.AgAbstractField.EVENT_CHANGED,(function(){columnState.selected=component.getValue(),_this.chartController.updateForPanelChange(columnState)}))},ChartDataPanel.prototype.createCategoriesGroup=function(columns){var _this=this;this.categoriesGroupComp=this.createBean(new agGridCommunity.AgGroupComponent({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var inputName="chartDimension"+this.getCompId();columns.forEach((function(col){var comp=_this.categoriesGroupComp.createManagedBean(new agGridCommunity.AgRadioButton);comp.setLabel(agGridCommunity._.escapeString(col.displayName)),comp.setValue(col.selected),comp.setInputName(inputName),_this.addChangeListener(comp,col),_this.categoriesGroupComp.addItem(comp),_this.columnComps.set(col.colId,comp)})),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")},ChartDataPanel.prototype.createSeriesGroup=function(columns){var _this=this;if(this.seriesGroupComp=this.createManagedBean(new agGridCommunity.AgGroupComponent({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){var pairedModeToggle=this.seriesGroupComp.createManagedBean(new agGridCommunity.AgToggleButton);pairedModeToggle.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getPairedMode()).onValueChange((function(newValue){_this.chartOptionsService.setPairedMode(!!newValue),_this.chartController.updateForGridChange()})),this.seriesGroupComp.addItem(pairedModeToggle)}var getSeriesLabel=this.generateGetSeriesLabel();columns.forEach((function(col){var comp=_this.seriesGroupComp.createManagedBean(new agGridCommunity.AgCheckbox);comp.addCssClass("ag-data-select-checkbox");var label=getSeriesLabel(col);comp.setLabel(label),comp.setValue(col.selected),_this.addChangeListener(comp,col),_this.seriesGroupComp.addItem(comp),_this.columnComps.set(col.colId,comp),_this.addDragHandle(comp,col)})),this.addComponent(this.getGui(),this.seriesGroupComp,"seriesGroup");var dropTarget={getIconName:function(){return agGridCommunity.DragAndDropService.ICON_MOVE},getContainer:function(){return _this.seriesGroupComp.getGui()},onDragging:function(params){return _this.onDragging(params)},onDragLeave:function(){return _this.onDragLeave()},isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(dropTarget)},ChartDataPanel.prototype.createSeriesChartTypeGroup=function(columns){var _this=this;if(this.chartController.isComboChart()){this.seriesChartTypeGroupComp=this.createManagedBean(new agGridCommunity.AgGroupComponent({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var seriesChartTypes=this.chartController.getSeriesChartTypes();columns.forEach((function(col){if(col.selected){var seriesChartType=seriesChartTypes.filter((function(s){return s.colId===col.colId}))[0];if(seriesChartType){var seriesItemGroup=_this.seriesChartTypeGroupComp.createManagedBean(new agGridCommunity.AgGroupComponent({title:col.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),secondaryAxisComp=_this.seriesChartTypeGroupComp.createManagedBean(new agGridCommunity.AgCheckbox).setLabel(_this.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(seriesChartType.chartType)).setValue(!!seriesChartType.secondaryAxis).onValueChange((function(enabled){return _this.chartController.updateSeriesChartType(col.colId,void 0,enabled)}));seriesItemGroup.addItem(secondaryAxisComp);var translate=function(key,defaultText){return _this.chartTranslationService.translate(key,defaultText)},availableChartTypes=[{value:"line",text:translate("line","Line")},{value:"area",text:translate("area","Area")},{value:"stackedArea",text:translate("stackedArea","StackedArea")},{value:"groupedColumn",text:translate("groupedColumn","Grouped Column")},{value:"stackedColumn",text:translate("stackedColumn","Stacked Column")}],chartTypeComp=seriesItemGroup.createManagedBean(new agGridCommunity.AgSelect);chartTypeComp.setLabelAlignment("left").setLabelWidth("flex").addOptions(availableChartTypes).setValue(seriesChartType.chartType).onValueChange((function(chartType){return _this.chartController.updateSeriesChartType(col.colId,chartType)})),seriesItemGroup.addItem(chartTypeComp),_this.seriesChartTypeGroupComp.addItem(seriesItemGroup)}}})),this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup")}},ChartDataPanel.prototype.addDragHandle=function(comp,col){var _this=this,eDragHandle=agGridCommunity._.createIconNoSpan("columnDrag",this.gridOptionsWrapper);eDragHandle.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),comp.getGui().insertAdjacentElement("beforeend",eDragHandle);var dragSource={type:agGridCommunity.DragSourceType.ChartPanel,eElement:eDragHandle,dragItemName:col.displayName,getDragItem:function(){return{columns:[col.column]}},onDragStopped:function(){return _this.onDragStop()}};this.dragAndDropService.addDragSource(dragSource,!0),this.addDestroyFunc((function(){return _this.dragAndDropService.removeDragSource(dragSource)}))},ChartDataPanel.prototype.generateGetSeriesLabel=function(){if(!this.chartController.isActiveXYChart())return function(col){return agGridCommunity._.escapeString(col.displayName)};var isBubble="bubble"===this.chartType,isInPairedMode=this.isInPairedMode(),selectedValuesCount=0,indexToAxisLabel=new Map;return indexToAxisLabel.set(0,"X"),indexToAxisLabel.set(1,"Y"),indexToAxisLabel.set(2,"size"),function(col){var axisLabel,escapedLabel=agGridCommunity._.escapeString(col.displayName);return col.selected?(axisLabel=isInPairedMode?indexToAxisLabel.get(selectedValuesCount%(isBubble?3:2)):0===selectedValuesCount?"X":isBubble&&selectedValuesCount%2==0?"size":"Y",selectedValuesCount++,escapedLabel+" ("+axisLabel+")"):escapedLabel}},ChartDataPanel.prototype.getCategoryGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")},ChartDataPanel.prototype.getSeriesGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")},ChartDataPanel.prototype.isInPairedMode=function(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")},ChartDataPanel.prototype.clearComponents=function(){agGridCommunity._.clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()},ChartDataPanel.prototype.onDragging=function(draggingEvent){var itemHovered=this.checkHoveredItem(draggingEvent);if(itemHovered){this.lastDraggedColumn=draggingEvent.dragItem.columns[0];var comp=itemHovered.comp,position=itemHovered.position,_a=this.lastHoveredItem||{},lastHoveredComp=_a.comp,lastHoveredPosition=_a.position;if(comp!==lastHoveredComp||position!==lastHoveredPosition)this.autoScrollService.check(draggingEvent.event),this.clearHoveredItems(),this.lastHoveredItem={comp,position},comp.getGui().classList.add("ag-list-item-hovered","ag-item-highlight-"+position)}},ChartDataPanel.prototype.checkHoveredItem=function(draggingEvent){var e_1,_a;if(agGridCommunity._.missing(draggingEvent.vDirection))return null;var mouseEvent=draggingEvent.event;try{for(var _b=__values$e(this.columnComps.values()),_c=_b.next();!_c.done;_c=_b.next()){var comp=_c.value,eGui=comp.getGui();if(eGui.querySelector(".ag-chart-data-column-drag-handle")){var rect=eGui.getBoundingClientRect();if(mouseEvent.clientY>=rect.top&&mouseEvent.clientY<=rect.bottom){var height=eGui.clientHeight;return{comp,position:mouseEvent.clientY>rect.top+height/2?"bottom":"top"}}}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return null},ChartDataPanel.prototype.onDragLeave=function(){this.clearHoveredItems()},ChartDataPanel.prototype.onDragStop=function(){var _this=this;if(this.lastHoveredItem){var _a=this.chartController.getColStateForMenu(),dimensionCols=_a.dimensionCols,valueCols=_a.valueCols,draggedColumnState=__spread$k(dimensionCols,valueCols).find((function(state){return state.column===_this.lastDraggedColumn}));if(draggedColumnState){var targetIndex=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);"bottom"===this.lastHoveredItem.position&&targetIndex++,draggedColumnState.order=targetIndex,this.chartController.updateForPanelChange(draggedColumnState)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()},ChartDataPanel.prototype.clearHoveredItems=function(){this.columnComps.forEach((function(columnComp){columnComp.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")})),this.lastHoveredItem=void 0},ChartDataPanel.prototype.isInterestedIn=function(type){return type===agGridCommunity.DragSourceType.ChartPanel},ChartDataPanel.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',__decorate$Z([agGridCommunity.Autowired("dragAndDropService")],ChartDataPanel.prototype,"dragAndDropService",void 0),__decorate$Z([agGridCommunity.Autowired("chartTranslationService")],ChartDataPanel.prototype,"chartTranslationService",void 0),__decorate$Z([agGridCommunity.PostConstruct],ChartDataPanel.prototype,"init",null),ChartDataPanel}(agGridCommunity.Component),__extends$27=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$_=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FontPanel=function(_super){function FontPanel(params){var _this=_super.call(this)||this;return _this.activeComps=[],_this.params=params,_this}return __extends$27(FontPanel,_super),FontPanel.prototype.init=function(){this.setTemplate(FontPanel.TEMPLATE,{fontGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()},FontPanel.prototype.addCompToPanel=function(comp){this.fontGroup.addItem(comp),this.activeComps.push(comp)},FontPanel.prototype.setEnabled=function(enabled){this.fontGroup.setEnabled(enabled)},FontPanel.prototype.initGroup=function(){var _this=this;this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange((function(enabled){_this.params.setEnabled&&_this.params.setEnabled(enabled)}))},FontPanel.prototype.initFontFamilySelect=function(){var _this=this,families=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],family=this.params.initialFont.family,initialValue=families[0];if(family){var valueIndex=families.map((function(f){return f.toLowerCase()})).indexOf(family.toLowerCase());if(valueIndex>=0)initialValue=families[valueIndex];else{var capitalisedFontValue=agGridCommunity._.capitalise(family);families.push(capitalisedFontValue),initialValue=capitalisedFontValue}}var options=families.sort().map((function(value){return{value,text:value}}));this.familySelect.addOptions(options).setInputWidth("flex").setValue(""+initialValue).onValueChange((function(newValue){return _this.params.setFont({family:newValue})}))},FontPanel.prototype.initFontSizeSelect=function(){var _this=this,sizes=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],size=this.params.initialFont.size;agGridCommunity._.includes(sizes,size)||sizes.push(size);var options=sizes.sort((function(a,b){return a-b})).map((function(value){return{value:""+value,text:""+value}}));this.sizeSelect.addOptions(options).setInputWidth("flex").setValue(""+size).onValueChange((function(newValue){return _this.params.setFont({size:parseInt(newValue,10)})})),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))},FontPanel.prototype.initFontWeightStyleSelect=function(){var _this=this,_a=this.params.initialFont,_b=_a.weight,weight=void 0===_b?"normal":_b,_c=_a.style,style=void 0===_c?"normal":_c,weightStyles=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}],selectedOption=weightStyles.find((function(x){return x.weight===weight&&x.style===style}));selectedOption||(selectedOption={name:"predefined",weight,style},weightStyles.unshift(selectedOption));var options=weightStyles.map((function(ws){return{value:ws.name,text:_this.chartTranslationService.translate(ws.name)}}));this.weightStyleSelect.addOptions(options).setInputWidth("flex").setValue(selectedOption.name).onValueChange((function(newValue){var selectedWeightStyle=weightStyles.find((function(x){return x.name===newValue}));_this.params.setFont({weight:selectedWeightStyle.weight,style:selectedWeightStyle.style})}))},FontPanel.prototype.initFontColorPicker=function(){var _this=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth(45).setValue(""+this.params.initialFont.color).onValueChange((function(newColor){return _this.params.setFont({color:newColor})}))},FontPanel.prototype.destroyActiveComps=function(){var _this=this;this.activeComps.forEach((function(comp){agGridCommunity._.removeFromParent(comp.getGui()),_this.destroyBean(comp)}))},FontPanel.prototype.destroy=function(){this.destroyActiveComps(),_super.prototype.destroy.call(this)},FontPanel.TEMPLATE='<div class="ag-font-panel">\n            <ag-group-component ref="fontGroup">\n                <ag-select ref="familySelect"></ag-select>\n                <ag-select ref="weightStyleSelect"></ag-select>\n                <div class="ag-charts-font-size-color">\n                    <ag-select ref="sizeSelect"></ag-select>\n                    <ag-color-picker ref="colorPicker"></ag-color-picker>\n                </div>\n            </ag-group-component>\n        </div>',__decorate$_([agGridCommunity.RefSelector("fontGroup")],FontPanel.prototype,"fontGroup",void 0),__decorate$_([agGridCommunity.RefSelector("familySelect")],FontPanel.prototype,"familySelect",void 0),__decorate$_([agGridCommunity.RefSelector("weightStyleSelect")],FontPanel.prototype,"weightStyleSelect",void 0),__decorate$_([agGridCommunity.RefSelector("sizeSelect")],FontPanel.prototype,"sizeSelect",void 0),__decorate$_([agGridCommunity.RefSelector("colorPicker")],FontPanel.prototype,"colorPicker",void 0),__decorate$_([agGridCommunity.Autowired("chartTranslationService")],FontPanel.prototype,"chartTranslationService",void 0),__decorate$_([agGridCommunity.PostConstruct],FontPanel.prototype,"init",null),FontPanel}(agGridCommunity.Component),__extends$28=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$$=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},LegendPanel=function(_super){function LegendPanel(chartOptionsService){var _this=_super.call(this)||this;return _this.chartOptionsService=chartOptionsService,_this.activePanels=[],_this}return __extends$28(LegendPanel,_super),LegendPanel.prototype.init=function(){this.setTemplate(LegendPanel.TEMPLATE,{legendGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()},LegendPanel.prototype.initLegendGroup=function(){var _this=this;this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(!1).onEnableChange((function(enabled){_this.chartOptionsService.setChartOption("legend.enabled",enabled),_this.legendGroup.toggleGroupExpand(!0)}))},LegendPanel.prototype.initLegendPosition=function(){var _this=this,positions=[LegendPosition.Top,LegendPosition.Right,LegendPosition.Bottom,LegendPosition.Left];this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth(80).addOptions(positions.map((function(position){return{value:position,text:_this.chartTranslationService.translate(position)}}))).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange((function(newValue){return _this.chartOptionsService.setChartOption("legend.position",newValue)}))},LegendPanel.prototype.initLegendPadding=function(){var _this=this,currentValue=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(getMaxValue(currentValue,200)).setValue(""+currentValue).setTextFieldWidth(45).onValueChange((function(newValue){return _this.chartOptionsService.setChartOption("legend.spacing",newValue)}))},LegendPanel.prototype.initLegendItems=function(){var _this=this,initSlider=function(expression,labelKey,input,defaultMaxValue){var currentValue=_this.chartOptionsService.getChartOption("legend."+expression);input.setLabel(_this.chartTranslationService.translate(labelKey)).setMaxValue(getMaxValue(currentValue,defaultMaxValue)).setValue(""+currentValue).setTextFieldWidth(45).onValueChange((function(newValue){_this.chartOptionsService.setChartOption("legend."+expression,newValue)}))};initSlider("item.marker.size","markerSize",this.markerSizeSlider,40),initSlider("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),initSlider("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),initSlider("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),initSlider("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)},LegendPanel.prototype.initLabelPanel=function(){var _this=this,chartProxy=this.chartOptionsService,params={enabled:!0,suppressEnabledCheckbox:!0,initialFont:{family:chartProxy.getChartOption("legend.item.label.fontFamily"),style:chartProxy.getChartOption("legend.item.label.fontStyle"),weight:chartProxy.getChartOption("legend.item.label.fontWeight"),size:chartProxy.getChartOption("legend.item.label.fontSize"),color:chartProxy.getChartOption("legend.item.label.color")},setFont:function(font){var proxy=_this.chartOptionsService;font.family&&proxy.setChartOption("legend.item.label.fontFamily",font.family),font.weight&&proxy.setChartOption("legend.item.label.fontWeight",font.weight),font.style&&proxy.setChartOption("legend.item.label.fontStyle",font.style),font.size&&proxy.setChartOption("legend.item.label.fontSize",font.size),font.color&&proxy.setChartOption("legend.item.label.color",font.color)}},fontPanelComp=this.createBean(new FontPanel(params));this.legendGroup.addItem(fontPanelComp),this.activePanels.push(fontPanelComp)},LegendPanel.prototype.destroyActivePanels=function(){var _this=this;this.activePanels.forEach((function(panel){agGridCommunity._.removeFromParent(panel.getGui()),_this.destroyBean(panel)}))},LegendPanel.prototype.destroy=function(){this.destroyActivePanels(),_super.prototype.destroy.call(this)},LegendPanel.TEMPLATE='<div>\n            <ag-group-component ref="legendGroup">\n                <ag-select ref="legendPositionSelect"></ag-select>\n                <ag-slider ref="legendPaddingSlider"></ag-slider>\n                <ag-slider ref="markerSizeSlider"></ag-slider>\n                <ag-slider ref="markerStrokeSlider"></ag-slider>\n                <ag-slider ref="markerPaddingSlider"></ag-slider>\n                <ag-slider ref="itemPaddingXSlider"></ag-slider>\n                <ag-slider ref="itemPaddingYSlider"></ag-slider>\n            </ag-group-component>\n        </div>',__decorate$$([agGridCommunity.RefSelector("legendGroup")],LegendPanel.prototype,"legendGroup",void 0),__decorate$$([agGridCommunity.RefSelector("legendPositionSelect")],LegendPanel.prototype,"legendPositionSelect",void 0),__decorate$$([agGridCommunity.RefSelector("legendPaddingSlider")],LegendPanel.prototype,"legendPaddingSlider",void 0),__decorate$$([agGridCommunity.RefSelector("markerSizeSlider")],LegendPanel.prototype,"markerSizeSlider",void 0),__decorate$$([agGridCommunity.RefSelector("markerStrokeSlider")],LegendPanel.prototype,"markerStrokeSlider",void 0),__decorate$$([agGridCommunity.RefSelector("markerPaddingSlider")],LegendPanel.prototype,"markerPaddingSlider",void 0),__decorate$$([agGridCommunity.RefSelector("itemPaddingXSlider")],LegendPanel.prototype,"itemPaddingXSlider",void 0),__decorate$$([agGridCommunity.RefSelector("itemPaddingYSlider")],LegendPanel.prototype,"itemPaddingYSlider",void 0),__decorate$$([agGridCommunity.Autowired("chartTranslationService")],LegendPanel.prototype,"chartTranslationService",void 0),__decorate$$([agGridCommunity.PostConstruct],LegendPanel.prototype,"init",null),LegendPanel}(agGridCommunity.Component),__extends$29=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$10=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AxisTicksPanel=function(_super){function AxisTicksPanel(chartOptionsService){var _this=_super.call(this)||this;return _this.chartOptionsService=chartOptionsService,_this}return __extends$29(AxisTicksPanel,_super),AxisTicksPanel.prototype.init=function(){this.setTemplate(AxisTicksPanel.TEMPLATE,{axisTicksGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initAxisTicks()},AxisTicksPanel.prototype.initAxisTicks=function(){var _this=this;this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange((function(newColor){return _this.chartOptionsService.setAxisProperty("tick.color",newColor)}));var initInput=function(expression,input,label,defaultMaxValue){var currentValue=_this.chartOptionsService.getAxisProperty(expression);input.setLabel(label).setMaxValue(getMaxValue(currentValue,defaultMaxValue)).setValue(""+currentValue).setTextFieldWidth(45).onValueChange((function(newValue){return _this.chartOptionsService.setAxisProperty(expression,newValue)}))};initInput("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),initInput("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)},AxisTicksPanel.TEMPLATE='<div>\n            <ag-group-component ref="axisTicksGroup">\n                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>',__decorate$10([agGridCommunity.RefSelector("axisTicksGroup")],AxisTicksPanel.prototype,"axisTicksGroup",void 0),__decorate$10([agGridCommunity.RefSelector("axisTicksColorPicker")],AxisTicksPanel.prototype,"axisTicksColorPicker",void 0),__decorate$10([agGridCommunity.RefSelector("axisTicksWidthSlider")],AxisTicksPanel.prototype,"axisTicksWidthSlider",void 0),__decorate$10([agGridCommunity.RefSelector("axisTicksSizeSlider")],AxisTicksPanel.prototype,"axisTicksSizeSlider",void 0),__decorate$10([agGridCommunity.Autowired("chartTranslationService")],AxisTicksPanel.prototype,"chartTranslationService",void 0),__decorate$10([agGridCommunity.PostConstruct],AxisTicksPanel.prototype,"init",null),AxisTicksPanel}(agGridCommunity.Component),__extends$2a=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$11=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AxisPanel=function(_super){function AxisPanel(chartController,chartOptionsService){var _this=_super.call(this)||this;return _this.chartController=chartController,_this.chartOptionsService=chartOptionsService,_this.activePanels=[],_this.axisLabelUpdateFuncs=[],_this}return __extends$2a(AxisPanel,_super),AxisPanel.prototype.init=function(){var _this=this;this.setTemplate(AxisPanel.TEMPLATE,{axisGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels();this.addManagedListener(this.chartController,ChartController.EVENT_CHART_UPDATED,(function(){return _this.axisLabelUpdateFuncs.forEach((function(func){return func()}))}))},AxisPanel.prototype.initAxis=function(){var _this=this,chartTranslationService=this.chartTranslationService;this.axisGroup.setTitle(chartTranslationService.translate("axis")).toggleGroupExpand(!1).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange((function(newColor){return _this.chartOptionsService.setAxisProperty("line.color",newColor)}));var currentValue=this.chartOptionsService.getAxisProperty("line.width");if(this.axisLineWidthSlider.setMaxValue(getMaxValue(currentValue,10)).setLabel(chartTranslationService.translate("thickness")).setTextFieldWidth(45).setValue(""+currentValue).onValueChange((function(newValue){return _this.chartOptionsService.setAxisProperty("line.width",newValue)})),agGridCommunity._.includes(["line","scatter","bubble"],this.chartController.getChartType())&&!this.chartController.isGrouping()){var options_1=[{value:"",text:chartTranslationService.translate("automatic")}];["category","time","number"].forEach((function(type){options_1.push({value:type,text:chartTranslationService.translate(type)})})),this.xAxisTypeSelect.setLabel(chartTranslationService.translate("xType")).setLabelWidth("flex").addOptions(options_1).setValue(this.chartOptionsService.getChartOption("xAxis.type")||"").onValueChange((function(newValue){_this.chartOptionsService.setChartOption("xAxis.type","string"==typeof newValue&&newValue.length&&newValue),_this.chartController.updateForDataChange()}))}else this.xAxisTypeSelect.setDisplayed(!1)},AxisPanel.prototype.initAxisTicks=function(){var axisTicksComp=this.createBean(new AxisTicksPanel(this.chartOptionsService));this.axisGroup.addItem(axisTicksComp),this.activePanels.push(axisTicksComp)},AxisPanel.prototype.initAxisLabels=function(){var _this=this,params={enabled:!0,suppressEnabledCheckbox:!0,initialFont:{family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},setFont:function(font){font.family&&_this.chartOptionsService.setAxisProperty("label.fontFamily",font.family),font.weight&&_this.chartOptionsService.setAxisProperty("label.fontWeight",font.weight),font.style&&_this.chartOptionsService.setAxisProperty("label.fontStyle",font.style),font.size&&_this.chartOptionsService.setAxisProperty("label.fontSize",font.size),font.color&&_this.chartOptionsService.setAxisProperty("label.color",font.color),_this.chartController.getChartProxy().getChart().layoutPending=!0}},labelPanelComp=this.createBean(new FontPanel(params));this.axisGroup.addItem(labelPanelComp),this.activePanels.push(labelPanelComp),this.addAdditionalLabelComps(labelPanelComp)},AxisPanel.prototype.addAdditionalLabelComps=function(labelPanelComp){var _this=this,createAngleComp=function(label,axisType){var value=_this.chartOptionsService.getLabelRotation(axisType),angleSelect=(new agGridCommunity.AgAngleSelect).setLabel(label).setLabelWidth("flex").setValue(value||0).onValueChange((function(newValue){return _this.chartOptionsService.setLabelRotation(axisType,newValue)}));_this.axisLabelUpdateFuncs.push((function(){var value=_this.chartOptionsService.getLabelRotation(axisType);angleSelect.setValue(value)}));var rotationInput=_this.createBean(angleSelect);labelPanelComp.addCompToPanel(rotationInput)},degreesSymbol=String.fromCharCode(176),xRotationLabel=this.chartTranslationService.translate("xRotation")+" "+degreesSymbol,yRotationLabel=this.chartTranslationService.translate("yRotation")+" "+degreesSymbol;createAngleComp(xRotationLabel,"xAxis"),createAngleComp(yRotationLabel,"yAxis");var labelPaddingSlider=this.createBean(new agGridCommunity.AgSlider),currentValue=this.chartOptionsService.getAxisProperty("label.padding");labelPaddingSlider.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(getMaxValue(currentValue,30)).setValue(""+currentValue).setTextFieldWidth(45).onValueChange((function(newValue){return _this.chartOptionsService.setAxisProperty("label.padding",newValue)})),labelPanelComp.addCompToPanel(labelPaddingSlider)},AxisPanel.prototype.destroyActivePanels=function(){var _this=this;this.activePanels.forEach((function(panel){agGridCommunity._.removeFromParent(panel.getGui()),_this.destroyBean(panel)}))},AxisPanel.prototype.destroy=function(){this.destroyActivePanels(),_super.prototype.destroy.call(this)},AxisPanel.TEMPLATE='<div>\n            <ag-group-component ref="axisGroup">\n                <ag-color-picker ref="axisColorInput"></ag-color-picker>\n                <ag-slider ref="axisLineWidthSlider"></ag-slider>\n                <ag-select ref="xAxisTypeSelect"></ag-select>\n            </ag-group-component>\n        </div>',__decorate$11([agGridCommunity.RefSelector("axisGroup")],AxisPanel.prototype,"axisGroup",void 0),__decorate$11([agGridCommunity.RefSelector("axisColorInput")],AxisPanel.prototype,"axisColorInput",void 0),__decorate$11([agGridCommunity.RefSelector("axisLineWidthSlider")],AxisPanel.prototype,"axisLineWidthSlider",void 0),__decorate$11([agGridCommunity.RefSelector("xAxisTypeSelect")],AxisPanel.prototype,"xAxisTypeSelect",void 0),__decorate$11([agGridCommunity.Autowired("chartTranslationService")],AxisPanel.prototype,"chartTranslationService",void 0),__decorate$11([agGridCommunity.PostConstruct],AxisPanel.prototype,"init",null),AxisPanel}(agGridCommunity.Component),__extends$2b=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$12=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},NavigatorPanel=function(_super){function NavigatorPanel(chartOptionsService){var _this=_super.call(this)||this;return _this.chartOptionsService=chartOptionsService,_this}return __extends$2b(NavigatorPanel,_super),NavigatorPanel.prototype.init=function(){this.setTemplate(NavigatorPanel.TEMPLATE,{navigatorGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initNavigator()},NavigatorPanel.prototype.initNavigator=function(){var _this=this,chartTranslationService=this.chartTranslationService;this.navigatorGroup.setTitle(chartTranslationService.translate("navigator")).toggleGroupExpand(!1).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange((function(enabled){_this.chartOptionsService.setChartOption("navigator.enabled",enabled),_this.navigatorGroup.toggleGroupExpand(!0)}));var currentValue=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(chartTranslationService.translate("height")).setMinValue(10).setMaxValue(getMaxValue(currentValue,60)).setTextFieldWidth(45).setValue(""+(currentValue||30)).onValueChange((function(height){return _this.chartOptionsService.setChartOption("navigator.height",height)}))},NavigatorPanel.prototype.destroy=function(){_super.prototype.destroy.call(this)},NavigatorPanel.TEMPLATE='<div>\n            <ag-group-component ref="navigatorGroup">\n                <ag-slider ref="navigatorHeightSlider"></ag-slider>\n            </ag-group-component>\n        </div>',__decorate$12([agGridCommunity.RefSelector("navigatorGroup")],NavigatorPanel.prototype,"navigatorGroup",void 0),__decorate$12([agGridCommunity.RefSelector("navigatorHeightSlider")],NavigatorPanel.prototype,"navigatorHeightSlider",void 0),__decorate$12([agGridCommunity.Autowired("chartTranslationService")],NavigatorPanel.prototype,"chartTranslationService",void 0),__decorate$12([agGridCommunity.PostConstruct],NavigatorPanel.prototype,"init",null),NavigatorPanel}(agGridCommunity.Component),__extends$2c=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$13=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PaddingPanel=function(_super){function PaddingPanel(chartOptionsService){var _this=_super.call(this)||this;return _this.chartOptionsService=chartOptionsService,_this}return __extends$2c(PaddingPanel,_super),PaddingPanel.prototype.init=function(){this.setTemplate(PaddingPanel.TEMPLATE,{chartPaddingGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initChartPaddingItems()},PaddingPanel.prototype.initGroup=function(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)},PaddingPanel.prototype.initChartPaddingItems=function(){var _this=this,initInput=function(property,input){var currentValue=_this.chartOptionsService.getChartOption("padding."+property);input.setLabel(_this.chartTranslationService.translate(property)).setMaxValue(getMaxValue(currentValue,200)).setValue(""+currentValue).setTextFieldWidth(45).onValueChange((function(newValue){return _this.chartOptionsService.setChartOption("padding."+property,newValue)}))};initInput("top",this.paddingTopSlider),initInput("right",this.paddingRightSlider),initInput("bottom",this.paddingBottomSlider),initInput("left",this.paddingLeftSlider)},PaddingPanel.TEMPLATE='<div>\n            <ag-group-component ref="chartPaddingGroup">\n                <ag-slider ref="paddingTopSlider"></ag-slider>\n                <ag-slider ref="paddingRightSlider"></ag-slider>\n                <ag-slider ref="paddingBottomSlider"></ag-slider>\n                <ag-slider ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>',__decorate$13([agGridCommunity.RefSelector("chartPaddingGroup")],PaddingPanel.prototype,"chartPaddingGroup",void 0),__decorate$13([agGridCommunity.RefSelector("paddingTopSlider")],PaddingPanel.prototype,"paddingTopSlider",void 0),__decorate$13([agGridCommunity.RefSelector("paddingRightSlider")],PaddingPanel.prototype,"paddingRightSlider",void 0),__decorate$13([agGridCommunity.RefSelector("paddingBottomSlider")],PaddingPanel.prototype,"paddingBottomSlider",void 0),__decorate$13([agGridCommunity.RefSelector("paddingLeftSlider")],PaddingPanel.prototype,"paddingLeftSlider",void 0),__decorate$13([agGridCommunity.Autowired("chartTranslationService")],PaddingPanel.prototype,"chartTranslationService",void 0),__decorate$13([agGridCommunity.PostConstruct],PaddingPanel.prototype,"init",null),PaddingPanel}(agGridCommunity.Component),__extends$2d=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$14=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},BackgroundPanel=function(_super){function BackgroundPanel(chartOptionsService){var _this=_super.call(this)||this;return _this.chartOptionsService=chartOptionsService,_this}return __extends$2d(BackgroundPanel,_super),BackgroundPanel.prototype.init=function(){this.setTemplate(BackgroundPanel.TEMPLATE,{chartBackgroundGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initColorPicker()},BackgroundPanel.prototype.initGroup=function(){var _this=this;this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange((function(enabled){return _this.chartOptionsService.setChartOption("background.visible",enabled)}))},BackgroundPanel.prototype.initColorPicker=function(){var _this=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange((function(newColor){return _this.chartOptionsService.setChartOption("background.fill",newColor)}))},BackgroundPanel.TEMPLATE='<div>\n            <ag-group-component ref="chartBackgroundGroup">\n                <ag-color-picker ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>',__decorate$14([agGridCommunity.RefSelector("chartBackgroundGroup")],BackgroundPanel.prototype,"group",void 0),__decorate$14([agGridCommunity.RefSelector("colorPicker")],BackgroundPanel.prototype,"colorPicker",void 0),__decorate$14([agGridCommunity.Autowired("chartTranslationService")],BackgroundPanel.prototype,"chartTranslationService",void 0),__decorate$14([agGridCommunity.PostConstruct],BackgroundPanel.prototype,"init",null),BackgroundPanel}(agGridCommunity.Component),__extends$2e=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$15=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TitlePanel=function(_super){function TitlePanel(chartOptionsService){var _this=_super.call(this,TitlePanel.TEMPLATE)||this;return _this.chartOptionsService=chartOptionsService,_this.activePanels=[],_this}return __extends$2e(TitlePanel,_super),TitlePanel.prototype.init=function(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")},TitlePanel.prototype.hasTitle=function(){var title=this.getOption("title");return title&&title.enabled&&title.text&&title.text.length>0},TitlePanel.prototype.initFontPanel=function(){var _this=this,hasTitle=this.hasTitle,setFont=function(font){font.family&&_this.setOption("title.fontFamily",font.family),font.weight&&_this.setOption("title.fontWeight",font.weight),font.style&&_this.setOption("title.fontStyle",font.style),font.size&&_this.setOption("title.fontSize",font.size),font.color&&_this.setOption("title.color",font.color)},initialFont={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};hasTitle||setFont(initialFont);var fontPanelParams={name:this.chartTranslationService.translate("title"),enabled:this.hasTitle(),suppressEnabledCheckbox:!1,initialFont,setFont,setEnabled:function(enabled){_this.setOption("title.enabled",enabled);var currentTitleText=_this.getOption("title.text");enabled&&"Title"===currentTitleText&&_this.setOption("title.text",_this.titlePlaceholder)}},fontPanelComp=this.createBean(new FontPanel(fontPanelParams));this.getGui().appendChild(fontPanelComp.getGui()),this.activePanels.push(fontPanelComp),this.addManagedListener(this.eventService,"chartTitleEdit",(function(){fontPanelComp.setEnabled(_this.hasTitle())}))},TitlePanel.prototype.getOption=function(expression){return this.chartOptionsService.getChartOption(expression)},TitlePanel.prototype.setOption=function(property,value){this.chartOptionsService.setChartOption(property,value)},TitlePanel.prototype.destroyActivePanels=function(){var _this=this;this.activePanels.forEach((function(panel){agGridCommunity._.removeFromParent(panel.getGui()),_this.destroyBean(panel)}))},TitlePanel.prototype.destroy=function(){this.destroyActivePanels(),_super.prototype.destroy.call(this)},TitlePanel.TEMPLATE="<div></div>",__decorate$15([agGridCommunity.Autowired("chartTranslationService")],TitlePanel.prototype,"chartTranslationService",void 0),__decorate$15([agGridCommunity.PostConstruct],TitlePanel.prototype,"init",null),TitlePanel}(agGridCommunity.Component),__extends$2f=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$16=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ChartPanel=function(_super){function ChartPanel(chartOptionsService){var _this=_super.call(this)||this;return _this.chartOptionsService=chartOptionsService,_this.activePanels=[],_this}return __extends$2f(ChartPanel,_super),ChartPanel.prototype.init=function(){this.setTemplate(ChartPanel.TEMPLATE,{chartGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()},ChartPanel.prototype.initGroup=function(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(!1).hideEnabledCheckbox(!0)},ChartPanel.prototype.initTitles=function(){var titlePanelComp=this.createBean(new TitlePanel(this.chartOptionsService));this.chartGroup.addItem(titlePanelComp),this.activePanels.push(titlePanelComp)},ChartPanel.prototype.initPaddingPanel=function(){var paddingPanelComp=this.createBean(new PaddingPanel(this.chartOptionsService));this.chartGroup.addItem(paddingPanelComp),this.activePanels.push(paddingPanelComp)},ChartPanel.prototype.initBackgroundPanel=function(){var backgroundPanelComp=this.createBean(new BackgroundPanel(this.chartOptionsService));this.chartGroup.addItem(backgroundPanelComp),this.activePanels.push(backgroundPanelComp)},ChartPanel.prototype.destroyActivePanels=function(){var _this=this;this.activePanels.forEach((function(panel){agGridCommunity._.removeFromParent(panel.getGui()),_this.destroyBean(panel)}))},ChartPanel.prototype.destroy=function(){this.destroyActivePanels(),_super.prototype.destroy.call(this)},ChartPanel.TEMPLATE='<div>\n            <ag-group-component ref="chartGroup"></ag-group-component>\n        </div>',__decorate$16([agGridCommunity.RefSelector("chartGroup")],ChartPanel.prototype,"chartGroup",void 0),__decorate$16([agGridCommunity.Autowired("chartTranslationService")],ChartPanel.prototype,"chartTranslationService",void 0),__decorate$16([agGridCommunity.PostConstruct],ChartPanel.prototype,"init",null),ChartPanel}(agGridCommunity.Component),__extends$2g=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$17=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ShadowPanel=function(_super){function ShadowPanel(chartOptionsService,getSelectedSeries){var _this=_super.call(this)||this;return _this.chartOptionsService=chartOptionsService,_this.getSelectedSeries=getSelectedSeries,_this}return __extends$2g(ShadowPanel,_super),ShadowPanel.prototype.init=function(){this.setTemplate(ShadowPanel.TEMPLATE,{shadowGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()},ShadowPanel.prototype.initSeriesShadow=function(){var _this=this;this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange((function(newValue){return _this.chartOptionsService.setSeriesOption("shadow.enabled",newValue,_this.getSelectedSeries())})),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange((function(newValue){return _this.chartOptionsService.setSeriesOption("shadow.color",newValue,_this.getSelectedSeries())}));var initInput=function(input,property,minValue,defaultMaxValue){var currentValue=_this.chartOptionsService.getSeriesOption("shadow."+property,_this.getSelectedSeries());input.setLabel(_this.chartTranslationService.translate(property)).setMinValue(minValue).setMaxValue(getMaxValue(currentValue,defaultMaxValue)).setValue(""+currentValue).onValueChange((function(newValue){return _this.chartOptionsService.setSeriesOption("shadow."+property,newValue,_this.getSelectedSeries())}))};initInput(this.shadowBlurSlider,"blur",0,20),initInput(this.shadowXOffsetSlider,"xOffset",-10,10),initInput(this.shadowYOffsetSlider,"yOffset",-10,10)},ShadowPanel.TEMPLATE='<div>\n            <ag-group-component ref="shadowGroup">\n                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider ref="shadowBlurSlider"></ag-slider>\n                <ag-slider ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',__decorate$17([agGridCommunity.RefSelector("shadowGroup")],ShadowPanel.prototype,"shadowGroup",void 0),__decorate$17([agGridCommunity.RefSelector("shadowColorPicker")],ShadowPanel.prototype,"shadowColorPicker",void 0),__decorate$17([agGridCommunity.RefSelector("shadowBlurSlider")],ShadowPanel.prototype,"shadowBlurSlider",void 0),__decorate$17([agGridCommunity.RefSelector("shadowXOffsetSlider")],ShadowPanel.prototype,"shadowXOffsetSlider",void 0),__decorate$17([agGridCommunity.RefSelector("shadowYOffsetSlider")],ShadowPanel.prototype,"shadowYOffsetSlider",void 0),__decorate$17([agGridCommunity.Autowired("chartTranslationService")],ShadowPanel.prototype,"chartTranslationService",void 0),__decorate$17([agGridCommunity.PostConstruct],ShadowPanel.prototype,"init",null),ShadowPanel}(agGridCommunity.Component);var __extends$2h=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$18=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MarkersPanel=function(_super){function MarkersPanel(chartOptionsService,getSelectedSeries){var _this=_super.call(this)||this;return _this.chartOptionsService=chartOptionsService,_this.getSelectedSeries=getSelectedSeries,_this}return __extends$2h(MarkersPanel,_super),MarkersPanel.prototype.init=function(){this.setTemplate(MarkersPanel.TEMPLATE,{seriesMarkersGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initMarkers()},MarkersPanel.prototype.initMarkers=function(){var _this=this;this.seriesMarkerShapeSelect.addOptions([{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}]).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange((function(value){return _this.setSeriesOption("marker.shape",value)}));var chartType=this.chartOptionsService.getChartType(),shouldHideEnabledCheckbox=agGridCommunity._.includes(["scatter","bubble"],chartType);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(shouldHideEnabledCheckbox).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange((function(newValue){return _this.setSeriesOption("marker.enabled",newValue)}));var initInput=function(expression,input,labelKey,defaultMaxValue){var currentValue=_this.getSeriesOption(expression);input.setLabel(_this.chartTranslationService.translate(labelKey)).setMaxValue(getMaxValue(currentValue,defaultMaxValue)).setValue(""+currentValue).setTextFieldWidth(45).onValueChange((function(newValue){return _this.setSeriesOption(expression,newValue)}))};"bubble"===chartType?(initInput("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),initInput("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),initInput("marker.size",this.seriesMarkerSizeSlider,"size",60)),initInput("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)},MarkersPanel.prototype.getSeriesOption=function(expression){return this.chartOptionsService.getSeriesOption(expression,this.getSelectedSeries())},MarkersPanel.prototype.setSeriesOption=function(expression,newValue){this.chartOptionsService.setSeriesOption(expression,newValue,this.getSelectedSeries())},MarkersPanel.TEMPLATE='<div>\n            <ag-group-component ref="seriesMarkersGroup">\n                <ag-select ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',__decorate$18([agGridCommunity.RefSelector("seriesMarkersGroup")],MarkersPanel.prototype,"seriesMarkersGroup",void 0),__decorate$18([agGridCommunity.RefSelector("seriesMarkerShapeSelect")],MarkersPanel.prototype,"seriesMarkerShapeSelect",void 0),__decorate$18([agGridCommunity.RefSelector("seriesMarkerSizeSlider")],MarkersPanel.prototype,"seriesMarkerSizeSlider",void 0),__decorate$18([agGridCommunity.RefSelector("seriesMarkerMinSizeSlider")],MarkersPanel.prototype,"seriesMarkerMinSizeSlider",void 0),__decorate$18([agGridCommunity.RefSelector("seriesMarkerStrokeWidthSlider")],MarkersPanel.prototype,"seriesMarkerStrokeWidthSlider",void 0),__decorate$18([agGridCommunity.Autowired("chartTranslationService")],MarkersPanel.prototype,"chartTranslationService",void 0),__decorate$18([agGridCommunity.PostConstruct],MarkersPanel.prototype,"init",null),MarkersPanel}(agGridCommunity.Component),__extends$2i=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$19=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CalloutPanel=function(_super){function CalloutPanel(chartOptionsService,getSelectedSeries){var _this=_super.call(this)||this;return _this.chartOptionsService=chartOptionsService,_this.getSelectedSeries=getSelectedSeries,_this}return __extends$2i(CalloutPanel,_super),CalloutPanel.prototype.init=function(){this.setTemplate(CalloutPanel.TEMPLATE,{calloutGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initCalloutOptions()},CalloutPanel.prototype.initCalloutOptions=function(){var _this=this;this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);var initInput=function(expression,input,labelKey,defaultMaxValue){var currentValue=_this.chartOptionsService.getSeriesOption(expression,_this.getSelectedSeries());input.setLabel(_this.chartTranslationService.translate(labelKey)).setMaxValue(getMaxValue(currentValue,defaultMaxValue)).setValue(""+currentValue).setTextFieldWidth(45).onValueChange((function(newValue){return _this.chartOptionsService.setSeriesOption(expression,newValue,_this.getSelectedSeries())}))};initInput("callout.length",this.calloutLengthSlider,"length",40),initInput("callout.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),initInput("label.offset",this.labelOffsetSlider,"offset",30)},CalloutPanel.TEMPLATE='<div>\n            <ag-group-component ref="calloutGroup">\n                <ag-slider ref="calloutLengthSlider"></ag-slider>\n                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',__decorate$19([agGridCommunity.RefSelector("calloutGroup")],CalloutPanel.prototype,"calloutGroup",void 0),__decorate$19([agGridCommunity.RefSelector("calloutLengthSlider")],CalloutPanel.prototype,"calloutLengthSlider",void 0),__decorate$19([agGridCommunity.RefSelector("calloutStrokeWidthSlider")],CalloutPanel.prototype,"calloutStrokeWidthSlider",void 0),__decorate$19([agGridCommunity.RefSelector("labelOffsetSlider")],CalloutPanel.prototype,"labelOffsetSlider",void 0),__decorate$19([agGridCommunity.Autowired("chartTranslationService")],CalloutPanel.prototype,"chartTranslationService",void 0),__decorate$19([agGridCommunity.PostConstruct],CalloutPanel.prototype,"init",null),CalloutPanel}(agGridCommunity.Component),__extends$2j=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1a=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SeriesPanel=function(_super){function SeriesPanel(chartController,chartOptionsService,seriesType){var _this=_super.call(this)||this;return _this.chartController=chartController,_this.chartOptionsService=chartOptionsService,_this.activePanels=[],_this.widgetFuncs={lineWidth:function(){return _this.initLineWidth()},strokeWidth:function(){return _this.initStrokeWidth()},lineDash:function(){return _this.initLineDash()},lineOpacity:function(){return _this.initLineOpacity()},fillOpacity:function(){return _this.initFillOpacity()},markers:function(){return _this.initMarkers()},labels:function(){return _this.initLabels()},shadow:function(){return _this.initShadow()},tooltips:function(){return _this.initTooltips()},bins:function(){return _this.initBins()}},_this.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]},_this.seriesType=seriesType||_this.getChartSeriesType(),_this}return __extends$2j(SeriesPanel,_super),SeriesPanel.prototype.init=function(){this.setTemplate(SeriesPanel.TEMPLATE,{seriesGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(!1).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()},SeriesPanel.prototype.refreshWidgets=function(){var _this=this;this.destroyActivePanels(),this.chartController.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect()),this.seriesWidgetMappings[this.seriesType].forEach((function(w){return _this.widgetFuncs[w]()}))},SeriesPanel.prototype.initSeriesSelect=function(){var _this=this,seriesSelect=this.seriesGroup.createManagedBean(new agGridCommunity.AgSelect);seriesSelect.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(100).addOptions(this.getSeriesSelectOptions()).setValue(""+this.seriesType).onValueChange((function(newValue){_this.seriesType=newValue,_this.refreshWidgets()})),this.seriesGroup.addItem(seriesSelect),this.activePanels.push(seriesSelect)},SeriesPanel.prototype.initTooltips=function(){var _this=this,seriesTooltipsToggle=this.createBean(new agGridCommunity.AgToggleButton);seriesTooltipsToggle.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange((function(newValue){return _this.setSeriesOption("tooltip.enabled",newValue)})),this.addWidget(seriesTooltipsToggle)},SeriesPanel.prototype.initStrokeWidth=function(){var _this=this,currentValue=this.getSeriesOption("strokeWidth"),seriesStrokeWidthSlider=this.createBean(new agGridCommunity.AgSlider);seriesStrokeWidthSlider.setLabel(this.translate("strokeWidth")).setMaxValue(getMaxValue(currentValue,10)).setTextFieldWidth(45).setValue(""+currentValue).onValueChange((function(newValue){return _this.setSeriesOption("strokeWidth",newValue)})),this.addWidget(seriesStrokeWidthSlider)},SeriesPanel.prototype.initLineWidth=function(){var _this=this,currentValue=this.getSeriesOption("strokeWidth"),seriesLineWidthSlider=this.createBean(new agGridCommunity.AgSlider);seriesLineWidthSlider.setLabel(this.translate("lineWidth")).setMaxValue(getMaxValue(currentValue,10)).setTextFieldWidth(45).setValue(""+currentValue).onValueChange((function(newValue){return _this.setSeriesOption("strokeWidth",newValue)})),this.addWidget(seriesLineWidthSlider)},SeriesPanel.prototype.initLineDash=function(){var _this=this,lineDash=this.getSeriesOption("lineDash"),currentValue=lineDash?lineDash[0]:0,seriesLineDashSlider=this.createBean(new agGridCommunity.AgSlider);seriesLineDashSlider.setLabel(this.translate("lineDash")).setMaxValue(getMaxValue(currentValue,30)).setTextFieldWidth(45).setValue(""+currentValue).onValueChange((function(newValue){return _this.setSeriesOption("lineDash",[newValue])})),this.addWidget(seriesLineDashSlider)},SeriesPanel.prototype.initLineOpacity=function(){var _this=this,currentValue=this.getSeriesOption("strokeOpacity"),seriesLineOpacitySlider=this.createBean(new agGridCommunity.AgSlider);seriesLineOpacitySlider.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(getMaxValue(currentValue,1)).setTextFieldWidth(45).setValue(""+currentValue).onValueChange((function(newValue){return _this.setSeriesOption("strokeOpacity",newValue)})),this.addWidget(seriesLineOpacitySlider)},SeriesPanel.prototype.initFillOpacity=function(){var _this=this,currentValue=this.getSeriesOption("fillOpacity"),seriesFillOpacitySlider=this.createBean(new agGridCommunity.AgSlider);seriesFillOpacitySlider.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(getMaxValue(currentValue,1)).setTextFieldWidth(45).setValue(""+currentValue).onValueChange((function(newValue){return _this.setSeriesOption("fillOpacity",newValue)})),this.addWidget(seriesFillOpacitySlider)},SeriesPanel.prototype.initLabels=function(){var _this=this,params=function initFontPanelParams(chartTranslationService,chartOptionsService,getSelectedSeries){var initialFont={family:chartOptionsService.getSeriesOption("label.fontFamily",getSelectedSeries()),style:chartOptionsService.getSeriesOption("label.fontStyle",getSelectedSeries()),weight:chartOptionsService.getSeriesOption("label.fontWeight",getSelectedSeries()),size:chartOptionsService.getSeriesOption("label.fontSize",getSelectedSeries()),color:chartOptionsService.getSeriesOption("label.color",getSelectedSeries())},params={name:chartTranslationService.translate("labels"),enabled:chartOptionsService.getSeriesOption("label.enabled",getSelectedSeries())||!1,setEnabled:function(enabled){return chartOptionsService.setSeriesOption("label.enabled",enabled,getSelectedSeries())},suppressEnabledCheckbox:!1,initialFont,setFont:function(font){font.family&&chartOptionsService.setSeriesOption("label.fontFamily",font.family,getSelectedSeries()),font.weight&&chartOptionsService.setSeriesOption("label.fontWeight",font.weight,getSelectedSeries()),font.style&&chartOptionsService.setSeriesOption("label.fontStyle",font.style,getSelectedSeries()),font.size&&chartOptionsService.setSeriesOption("label.fontSize",font.size,getSelectedSeries()),font.color&&chartOptionsService.setSeriesOption("label.color",font.color,getSelectedSeries())}};return params}(this.chartTranslationService,this.chartOptionsService,(function(){return _this.seriesType})),labelPanelComp=this.createBean(new FontPanel(params));if("pie"===this.seriesType){var calloutPanelComp=this.createBean(new CalloutPanel(this.chartOptionsService,(function(){return _this.seriesType})));labelPanelComp.addCompToPanel(calloutPanelComp),this.activePanels.push(calloutPanelComp)}this.addWidget(labelPanelComp)},SeriesPanel.prototype.initShadow=function(){var _this=this,shadowPanelComp=this.createBean(new ShadowPanel(this.chartOptionsService,(function(){return _this.seriesType})));this.addWidget(shadowPanelComp)},SeriesPanel.prototype.initMarkers=function(){var _this=this,markersPanelComp=this.createBean(new MarkersPanel(this.chartOptionsService,(function(){return _this.seriesType})));this.addWidget(markersPanelComp)},SeriesPanel.prototype.initBins=function(){var _this=this,currentValue=this.getSeriesOption("binCount"),seriesBinCountSlider=this.createBean(new agGridCommunity.AgSlider);seriesBinCountSlider.setLabel(this.translate("histogramBinCount")).setMinValue(4).setMaxValue(getMaxValue(currentValue,100)).setTextFieldWidth(45).setValue(""+currentValue).onValueChange((function(newValue){return _this.setSeriesOption("binCount",newValue)})),this.addWidget(seriesBinCountSlider)},SeriesPanel.prototype.addWidget=function(widget){this.seriesGroup.addItem(widget),this.activePanels.push(widget)},SeriesPanel.prototype.getSeriesOption=function(expression){return this.chartOptionsService.getSeriesOption(expression,this.seriesType)},SeriesPanel.prototype.setSeriesOption=function(expression,newValue){this.chartOptionsService.setSeriesOption(expression,newValue,this.seriesType)},SeriesPanel.prototype.getChartSeriesType=function(){var ct=this.chartController.getSeriesChartTypes()[0].chartType;return"columnLineCombo"===ct?"column":"areaColumnCombo"===ct?"area":getSeriesType(ct)},SeriesPanel.prototype.getSeriesSelectOptions=function(){var _this=this;this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]]));var seriesSelectOptions=new Set;return this.chartController.getActiveSeriesChartTypes().forEach((function(s){var chartType=getSeriesType(s.chartType);seriesSelectOptions.add(_this.seriesSelectOptions.get(chartType))})),Array.from(seriesSelectOptions)},SeriesPanel.prototype.updateSeriesType=function(){var activeChartTypes=this.chartController.getActiveSeriesChartTypes().map((function(s){return getSeriesType(s.chartType)}));!activeChartTypes.includes(this.seriesType)&&activeChartTypes.length>0&&(this.seriesType=activeChartTypes[0])},SeriesPanel.prototype.translate=function(key,defaultText){return this.chartTranslationService.translate(key,defaultText)},SeriesPanel.prototype.destroyActivePanels=function(){var _this=this;this.activePanels.forEach((function(panel){agGridCommunity._.removeFromParent(panel.getGui()),_this.destroyBean(panel)}))},SeriesPanel.prototype.destroy=function(){this.destroyActivePanels(),_super.prototype.destroy.call(this)},SeriesPanel.TEMPLATE='<div>\n            <ag-group-component ref="seriesGroup">                \n            </ag-group-component>\n        </div>',__decorate$1a([agGridCommunity.RefSelector("seriesGroup")],SeriesPanel.prototype,"seriesGroup",void 0),__decorate$1a([agGridCommunity.Autowired("chartTranslationService")],SeriesPanel.prototype,"chartTranslationService",void 0),__decorate$1a([agGridCommunity.PostConstruct],SeriesPanel.prototype,"init",null),SeriesPanel}(agGridCommunity.Component),__extends$2k=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1b=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};function getMaxValue(currentValue,defaultMaxValue){return Math.max(currentValue,defaultMaxValue)}var FormatPanel=function(_super){function FormatPanel(chartController,chartOptionsService){var _this=_super.call(this,FormatPanel.TEMPLATE)||this;return _this.chartController=chartController,_this.chartOptionsService=chartOptionsService,_this.panels=[],_this}return __extends$2k(FormatPanel,_super),FormatPanel.prototype.init=function(){this.createPanels(),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_UPDATED,this.createPanels.bind(this))},FormatPanel.prototype.createPanels=function(){var chartType=this.chartController.getChartType(),isGrouping=this.chartController.isGrouping();if(chartType!==this.chartType||isGrouping!==this.isGrouping){switch(this.destroyPanels(),this.addComponent(new ChartPanel(this.chartOptionsService)),this.addComponent(new LegendPanel(this.chartOptionsService)),chartType){case"groupedColumn":case"stackedColumn":case"normalizedColumn":this.addComponent(new AxisPanel(this.chartController,this.chartOptionsService)),this.addComponent(new SeriesPanel(this.chartController,this.chartOptionsService,"column")),this.addComponent(new NavigatorPanel(this.chartOptionsService));break;case"groupedBar":case"stackedBar":case"normalizedBar":this.addComponent(new AxisPanel(this.chartController,this.chartOptionsService)),this.addComponent(new SeriesPanel(this.chartController,this.chartOptionsService,"bar")),this.addComponent(new NavigatorPanel(this.chartOptionsService));break;case"pie":case"doughnut":this.addComponent(new SeriesPanel(this.chartController,this.chartOptionsService,"pie"));break;case"line":this.addComponent(new AxisPanel(this.chartController,this.chartOptionsService)),this.addComponent(new SeriesPanel(this.chartController,this.chartOptionsService,"line")),this.addComponent(new NavigatorPanel(this.chartOptionsService));break;case"scatter":case"bubble":this.addComponent(new AxisPanel(this.chartController,this.chartOptionsService)),this.addComponent(new SeriesPanel(this.chartController,this.chartOptionsService,"scatter")),this.addComponent(new NavigatorPanel(this.chartOptionsService));break;case"area":case"stackedArea":case"normalizedArea":this.addComponent(new AxisPanel(this.chartController,this.chartOptionsService)),this.addComponent(new SeriesPanel(this.chartController,this.chartOptionsService,"area")),this.addComponent(new NavigatorPanel(this.chartOptionsService));break;case"histogram":this.addComponent(new AxisPanel(this.chartController,this.chartOptionsService)),this.addComponent(new SeriesPanel(this.chartController,this.chartOptionsService,"histogram")),this.addComponent(new NavigatorPanel(this.chartOptionsService));break;case"columnLineCombo":case"areaColumnCombo":case"customCombo":this.addComponent(new AxisPanel(this.chartController,this.chartOptionsService)),this.addComponent(new SeriesPanel(this.chartController,this.chartOptionsService)),this.addComponent(new NavigatorPanel(this.chartOptionsService));break;default:console.warn("AG Grid: ChartFormattingPanel - unexpected chart type index: "+chartType+" supplied")}this.chartType=chartType,this.isGrouping=isGrouping}},FormatPanel.prototype.addComponent=function(component){this.createBean(component),this.panels.push(component),component.addCssClass("ag-chart-format-section"),this.getGui().appendChild(component.getGui())},FormatPanel.prototype.destroyPanels=function(){var _this=this;this.panels.forEach((function(panel){agGridCommunity._.removeFromParent(panel.getGui()),_this.destroyBean(panel)}))},FormatPanel.prototype.destroy=function(){this.destroyPanels(),_super.prototype.destroy.call(this)},FormatPanel.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',__decorate$1b([agGridCommunity.PostConstruct],FormatPanel.prototype,"init",null),FormatPanel}(agGridCommunity.Component),__extends$2l=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1c=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MiniChart=function(_super){function MiniChart(container,tooltipName){var _this=_super.call(this)||this;_this.size=58,_this.padding=5,_this.root=new Group$1;var scene=new Scene$1(window.document,_this.size,_this.size);return scene.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),scene.root=_this.root,scene.container=container,_this.scene=scene,_this.tooltipName=tooltipName,_this}return __extends$2l(MiniChart,_super),MiniChart.prototype.init=function(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName)},__decorate$1c([agGridCommunity.Autowired("chartTranslationService")],MiniChart.prototype,"chartTranslationService",void 0),__decorate$1c([agGridCommunity.PostConstruct],MiniChart.prototype,"init",null),MiniChart}(agGridCommunity.Component),__extends$2m=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1d=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MiniChartWithAxes=function(_super){function MiniChartWithAxes(container,tooltipName){var _this=_super.call(this,container,tooltipName)||this;return _this.stroke="gray",_this.axisOvershoot=3,_this}return __extends$2m(MiniChartWithAxes,_super),MiniChartWithAxes.prototype.addAxes=function(){var size=this.size,padding=this.padding,leftAxis=new Line$1;leftAxis.x1=padding,leftAxis.y1=padding,leftAxis.x2=padding,leftAxis.y2=size-padding+this.axisOvershoot,leftAxis.stroke=this.stroke;var bottomAxis=new Line$1;bottomAxis.x1=padding-this.axisOvershoot+1,bottomAxis.y1=size-padding,bottomAxis.x2=size-padding+1,bottomAxis.y2=size-padding,bottomAxis.stroke=this.stroke;var root=this.root;root.append(leftAxis),root.append(bottomAxis)},__decorate$1d([agGridCommunity.PostConstruct],MiniChartWithAxes.prototype,"addAxes",null),MiniChartWithAxes}(MiniChart);function createColumnRects(params){var stacked=params.stacked,size=params.size,padding=params.padding,xScalePadding=params.xScalePadding,xScaleDomain=params.xScaleDomain,yScaleDomain=params.yScaleDomain,xScale=new BandScale$1;xScale.domain=xScaleDomain,xScale.range=[padding,size-padding],xScale.paddingInner=xScalePadding,xScale.paddingOuter=xScalePadding;var yScale=new LinearScale$1;yScale.domain=yScaleDomain,yScale.range=[size-padding,padding];var createBars=function(series,xScale,yScale){return series.map((function(datum,i){var top=yScale.convert(datum),rect=new Rect;return rect.x=xScale.convert(i),rect.y=top,rect.width=xScale.bandwidth,rect.height=yScale.convert(0)-top,rect.strokeWidth=1,rect.crisp=!0,rect}))};return stacked?params.data.map((function(d){return createBars(d,xScale,yScale)})):createBars(params.data,xScale,yScale)}function createLinePaths(root,data,size,padding){var xScale=new LinearScale$1;xScale.domain=[0,4],xScale.range=[padding,size-padding];var yScale=new LinearScale$1;yScale.domain=[0,10],yScale.range=[size-padding,padding];var lines=data.map((function(series){var line=new Path$1;return line.strokeWidth=3,line.lineCap="round",line.fill=void 0,series.forEach((function(datum,i){line.path[i>0?"lineTo":"moveTo"](xScale.convert(i),yScale.convert(datum))})),line})),clipRect=new ClipRect;return clipRect.x=clipRect.y=padding,clipRect.width=clipRect.height=size-2*padding,clipRect.append(lines),root.append(clipRect),lines}var __extends$2n=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniColumn=function(_super){function MiniColumn(container,fills,strokes){var _this=_super.call(this,container,"groupedColumnTooltip")||this;_this.columnData=[2,3,4];var _a=_this,root=_a.root,columnData=_a.columnData,size=_a.size,padding=_a.padding;return _this.columns=createColumnRects({stacked:!1,root,data:columnData,size,padding,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),root.append(_this.columns),_this.updateColors(fills,strokes),_this}return __extends$2n(MiniColumn,_super),MiniColumn.prototype.updateColors=function(fills,strokes){this.columns.forEach((function(column,i){column.fill=fills[i],column.stroke=strokes[i]}))},MiniColumn.chartType="groupedColumn",MiniColumn}(MiniChartWithAxes),__extends$2o=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniStackedColumn=function(_super){function MiniStackedColumn(container,fills,strokes,data,yScaleDomain,tooltipName){void 0===data&&(data=MiniStackedColumn.data),void 0===yScaleDomain&&(yScaleDomain=[0,16]),void 0===tooltipName&&(tooltipName="stackedColumnTooltip");var _this=_super.call(this,container,tooltipName)||this,_a=_this,root=_a.root,size=_a.size,padding=_a.padding;return _this.stackedColumns=createColumnRects({stacked:!0,root,data,size,padding,xScaleDomain:[0,1,2],yScaleDomain,xScalePadding:.3}),root.append([].concat.apply([],_this.stackedColumns)),_this.updateColors(fills,strokes),_this}return __extends$2o(MiniStackedColumn,_super),MiniStackedColumn.prototype.updateColors=function(fills,strokes){this.stackedColumns.forEach((function(series,i){return series.forEach((function(column){column.fill=fills[i],column.stroke=strokes[i]}))}))},MiniStackedColumn.chartType="stackedColumn",MiniStackedColumn.data=[[8,12,16],[6,9,12],[2,3,4]],MiniStackedColumn}(MiniChartWithAxes),__extends$2p=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniNormalizedColumn=function(_super){function MiniNormalizedColumn(container,fills,strokes){return _super.call(this,container,fills,strokes,MiniNormalizedColumn.data,[0,10],"normalizedColumnTooltip")||this}return __extends$2p(MiniNormalizedColumn,_super),MiniNormalizedColumn.chartType="normalizedColumn",MiniNormalizedColumn.data=[[10,10,10],[6,7,8],[2,4,6]],MiniNormalizedColumn}(MiniStackedColumn),__extends$2q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniBar=function(_super){function MiniBar(container,fills,strokes){var _this=_super.call(this,container,"groupedBarTooltip")||this,padding=_this.padding,size=_this.size,yScale=new BandScale$1;yScale.domain=[0,1,2],yScale.range=[padding,size-padding],yScale.paddingInner=.3,yScale.paddingOuter=.3;var xScale=new LinearScale$1;xScale.domain=[0,4],xScale.range=[size-padding,padding];var bottom=xScale.convert(0),height=yScale.bandwidth;return _this.bars=[2,3,4].map((function(datum,i){var rect=new Rect;return rect.x=padding,rect.y=yScale.convert(i),rect.width=bottom-xScale.convert(datum),rect.height=height,rect.strokeWidth=1,rect.crisp=!0,rect})),_this.updateColors(fills,strokes),_this.root.append(_this.bars),_this}return __extends$2q(MiniBar,_super),MiniBar.prototype.updateColors=function(fills,strokes){this.bars.forEach((function(bar,i){bar.fill=fills[i],bar.stroke=strokes[i]}))},MiniBar.chartType="groupedBar",MiniBar}(MiniChartWithAxes),__extends$2r=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniStackedBar=function(_super){function MiniStackedBar(container,fills,strokes,data,xScaleDomain,tooltipName){void 0===data&&(data=MiniStackedBar.data),void 0===xScaleDomain&&(xScaleDomain=[0,16]),void 0===tooltipName&&(tooltipName="stackedBarTooltip");var _this=_super.call(this,container,tooltipName)||this,size=_this.size,padding=_this.padding,yScale=new BandScale$1;yScale.domain=[0,1,2],yScale.range=[padding,size-padding],yScale.paddingInner=.3,yScale.paddingOuter=.3;var xScale=new LinearScale$1;xScale.domain=xScaleDomain,xScale.range=[size-padding,padding];var bottom=xScale.convert(0),height=yScale.bandwidth;return _this.bars=data.map((function(series){return series.map((function(datum,i){var rect=new Rect;return rect.x=padding,rect.y=yScale.convert(i),rect.width=bottom-xScale.convert(datum),rect.height=height,rect.strokeWidth=1,rect.crisp=!0,rect}))})),_this.updateColors(fills,strokes),_this.root.append([].concat.apply([],_this.bars)),_this}return __extends$2r(MiniStackedBar,_super),MiniStackedBar.prototype.updateColors=function(fills,strokes){this.bars.forEach((function(series,i){return series.forEach((function(bar){bar.fill=fills[i],bar.stroke=strokes[i]}))}))},MiniStackedBar.chartType="stackedBar",MiniStackedBar.data=[[8,12,16],[6,9,12],[2,3,4]],MiniStackedBar}(MiniChartWithAxes),__extends$2s=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniNormalizedBar=function(_super){function MiniNormalizedBar(container,fills,strokes){return _super.call(this,container,fills,strokes,MiniNormalizedBar.data,[0,10],"normalizedBarTooltip")||this}return __extends$2s(MiniNormalizedBar,_super),MiniNormalizedBar.chartType="normalizedBar",MiniNormalizedBar.data=[[10,10,10],[6,7,8],[2,4,6]],MiniNormalizedBar}(MiniStackedBar),__extends$2t=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$H=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},MiniDoughnut=function(_super){function MiniDoughnut(container,fills,strokes,centerRadiusScaler,tooltipName){void 0===centerRadiusScaler&&(centerRadiusScaler=.6),void 0===tooltipName&&(tooltipName="doughnutTooltip");var _this=_super.call(this,container,tooltipName)||this,radius=(_this.size-2*_this.padding)/2,center=radius+_this.padding,angles=[[toRadians(-90),toRadians(30)],[toRadians(30),toRadians(120)],[toRadians(120),toRadians(180)],[toRadians(180),toRadians(210)],[toRadians(210),toRadians(240)],[toRadians(240),toRadians(270)]];return _this.sectors=angles.map((function(_a){var _b=__read$H(_a,2),startAngle=_b[0],endAngle=_b[1],sector=new Sector;return sector.centerX=center,sector.centerY=center,sector.innerRadius=radius*centerRadiusScaler,sector.outerRadius=radius,sector.startAngle=startAngle,sector.endAngle=endAngle,sector.stroke=void 0,sector.strokeWidth=1,sector})),_this.updateColors(fills,strokes),_this.root.append(_this.sectors),_this}return __extends$2t(MiniDoughnut,_super),MiniDoughnut.prototype.updateColors=function(fills,strokes){this.sectors.forEach((function(sector,i){sector.fill=fills[i%fills.length],sector.stroke=strokes[i%strokes.length]}))},MiniDoughnut.chartType="doughnut",MiniDoughnut}(MiniChart),__extends$2u=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniPie=function(_super){function MiniPie(container,fills,strokes){return _super.call(this,container,fills,strokes,0,"pieTooltip")||this}return __extends$2u(MiniPie,_super),MiniPie.chartType="pie",MiniPie}(MiniDoughnut),__extends$2v=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniLine=function(_super){function MiniLine(container,fills,strokes){var _this=_super.call(this,container,"lineTooltip")||this;return _this.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],_this.lines=createLinePaths(_this.root,_this.data,_this.size,_this.padding),_this.updateColors(fills,strokes),_this}return __extends$2v(MiniLine,_super),MiniLine.prototype.updateColors=function(fills,strokes){this.lines.forEach((function(line,i){line.stroke=fills[i]}))},MiniLine.chartType="line",MiniLine}(MiniChartWithAxes),__extends$2w=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$I=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},MiniScatter=function(_super){function MiniScatter(container,fills,strokes){var _this=_super.call(this,container,"scatterTooltip")||this,size=_this.size,padding=_this.padding,xScale=new LinearScale$1;xScale.domain=[-.5,4],xScale.range=[2*padding,size-padding];var yScale=new LinearScale$1;yScale.domain=[-.5,3.5],yScale.range=[size-padding,padding];var points=[];[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]].forEach((function(series){series.forEach((function(_a){var _b=__read$I(_a,2),x=_b[0],y=_b[1],arc=new Arc;arc.strokeWidth=1,arc.centerX=xScale.convert(x),arc.centerY=yScale.convert(y),arc.radiusX=arc.radiusY=2.5,points.push(arc)}))})),_this.points=points,_this.updateColors(fills,strokes);var clipRect=new ClipRect;return clipRect.x=clipRect.y=padding,clipRect.width=clipRect.height=size-2*padding,clipRect.append(_this.points),_this.root.append(clipRect),_this}return __extends$2w(MiniScatter,_super),MiniScatter.prototype.updateColors=function(fills,strokes){this.points.forEach((function(line,i){line.stroke=strokes[i%strokes.length],line.fill=fills[i%fills.length]}))},MiniScatter.chartType="scatter",MiniScatter}(MiniChartWithAxes),__extends$2x=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$J=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},MiniBubble=function(_super){function MiniBubble(container,fills,strokes){var _this=_super.call(this,container,"bubbleTooltip")||this,size=_this.size,padding=_this.padding,xScale=new LinearScale$1;xScale.domain=[0,1],xScale.range=[2*padding,size-padding];var yScale=new LinearScale$1;yScale.domain=[0,1],yScale.range=[size-padding,padding];var points=[];[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]].forEach((function(series){series.forEach((function(_a){var _b=__read$J(_a,3),x=_b[0],y=_b[1],radius=_b[2],arc=new Arc;arc.strokeWidth=1,arc.centerX=xScale.convert(x),arc.centerY=yScale.convert(y),arc.radiusX=arc.radiusY=radius,arc.fillOpacity=.7,points.push(arc)}))})),_this.points=points,_this.updateColors(fills,strokes);var clipRect=new ClipRect;return clipRect.x=padding,clipRect.y=padding,clipRect.width=size-2*padding,clipRect.height=size-2*padding,clipRect.append(_this.points),_this.root.append(clipRect),_this}return __extends$2x(MiniBubble,_super),MiniBubble.prototype.updateColors=function(fills,strokes){this.points.forEach((function(line,i){line.stroke=strokes[i%strokes.length],line.fill=fills[i%fills.length]}))},MiniBubble.chartType="bubble",MiniBubble}(MiniChartWithAxes),__extends$2y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniArea=function(_super){function MiniArea(container,fills,strokes,data){void 0===data&&(data=MiniArea.data);var _this=_super.call(this,container,"groupedAreaTooltip")||this,size=_this.size,padding=_this.padding,xScale=new BandScale$1;xScale.domain=[0,1,2],xScale.paddingInner=1,xScale.paddingOuter=0,xScale.range=[padding+.5,size-padding-.5];var yScale=new LinearScale$1;yScale.domain=[0,6],yScale.range=[size-padding+.5,padding];var last=2*data.length-1,pathData=[],bottomY=yScale.convert(0);return data.forEach((function(datum,i){var x=xScale.convert(i);datum.forEach((function(yDatum,j){var y=yScale.convert(yDatum),points=pathData[j]||(pathData[j]=[]);points[i]={x,y},points[last-i]={x,y:bottomY}}))})),_this.areas=pathData.reverse().map((function(points){var area=new Path$1;area.strokeWidth=1,area.fillOpacity=.7;var path=area.path;return path.clear(),points.forEach((function(point,i){return path[i>0?"lineTo":"moveTo"](point.x,point.y)})),path.closePath(),area})),_this.updateColors(fills,strokes),_this.root.append(_this.areas),_this}return __extends$2y(MiniArea,_super),MiniArea.prototype.updateColors=function(fills,strokes){this.areas.forEach((function(area,i){area.fill=fills[i],area.stroke=strokes[i]}))},MiniArea.chartType="area",MiniArea.data=[[1,3,5],[2,6,4],[5,3,1]],MiniArea}(MiniChartWithAxes),__extends$2z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniStackedArea=function(_super){function MiniStackedArea(container,fills,strokes,data,tooltipName){void 0===data&&(data=MiniStackedArea.data),void 0===tooltipName&&(tooltipName="stackedAreaTooltip");var _this=_super.call(this,container,tooltipName)||this,size=_this.size,padding=_this.padding,xScale=new BandScale$1;xScale.domain=[0,1,2],xScale.paddingInner=1,xScale.paddingOuter=0,xScale.range=[padding+.5,size-padding-.5];var yScale=new LinearScale$1;yScale.domain=[0,16],yScale.range=[size-padding+.5,padding+.5];var last=2*data.length-1,pathData=[];return data.forEach((function(datum,i){var x=xScale.convert(i),total=0;datum.forEach((function(yDatum,j){var y=yScale.convert(total+yDatum),points=pathData[j]||(pathData[j]=[]);points[i]={x,y},points[last-i]={x,y:yScale.convert(total)},total+=yDatum}))})),_this.areas=pathData.map((function(points){var area=new Path$1;area.strokeWidth=1;var path=area.path;return path.clear(),points.forEach((function(point,i){return path[i>0?"lineTo":"moveTo"](point.x,point.y)})),path.closePath(),area})),_this.updateColors(fills,strokes),_this.root.append(_this.areas),_this}return __extends$2z(MiniStackedArea,_super),MiniStackedArea.prototype.updateColors=function(fills,strokes){this.areas.forEach((function(area,i){area.fill=fills[i],area.stroke=strokes[i]}))},MiniStackedArea.chartType="stackedArea",MiniStackedArea.data=[[2,3,2],[3,6,5],[6,2,2]],MiniStackedArea}(MiniChartWithAxes),__extends$2A=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniNormalizedArea=function(_super){function MiniNormalizedArea(container,fills,strokes,data){return void 0===data&&(data=MiniNormalizedArea.data),_super.call(this,container,fills,strokes,data,"normalizedAreaTooltip")||this}return __extends$2A(MiniNormalizedArea,_super),MiniNormalizedArea.chartType="normalizedArea",MiniNormalizedArea.data=MiniStackedArea.data.map((function(stack){var sum=stack.reduce((function(p,c){return p+c}),0);return stack.map((function(v){return v/sum*16}))})),MiniNormalizedArea}(MiniStackedArea),__extends$2B=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$K=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},MiniHistogram=function(_super){function MiniHistogram(container,fills,strokes){var _this=_super.call(this,container,"histogramTooltip")||this,padding=_this.padding,size=_this.size,data=[2,5,11,13,10,6,1],xScale=new LinearScale$1;xScale.domain=[0,data.length],xScale.range=[padding,size-padding];var yScale=new LinearScale$1;yScale.domain=[0,data.reduce((function(a,b){return Math.max(a,b)}),0)],yScale.range=[size-padding,padding];var bottom=yScale.convert(0);return _this.bars=data.map((function(datum,i){var top=yScale.convert(datum),left=xScale.convert(i),right=xScale.convert(i+1),rect=new Rect;return rect.x=left,rect.y=top,rect.width=right-left,rect.height=bottom-top,rect.strokeWidth=1,rect.crisp=!0,rect})),_this.updateColors(fills,strokes),_this.root.append(_this.bars),_this}return __extends$2B(MiniHistogram,_super),MiniHistogram.prototype.updateColors=function(_a,_b){var fill=__read$K(_a,1)[0],stroke=__read$K(_b,1)[0];this.bars.forEach((function(bar){bar.fill=fill,bar.stroke=stroke}))},MiniHistogram.chartType="histogram",MiniHistogram}(MiniChartWithAxes),__extends$2C=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniColumnLineCombo=function(_super){function MiniColumnLineCombo(container,fills,strokes){var _this=_super.call(this,container,"columnLineComboTooltip")||this;_this.columnData=[3,4],_this.lineData=[[5,4,6,5,4]];var _a=_this,root=_a.root,columnData=_a.columnData,lineData=_a.lineData,size=_a.size,padding=_a.padding;return _this.columns=createColumnRects({stacked:!1,root,data:columnData,size,padding,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),root.append(_this.columns),_this.lines=createLinePaths(root,lineData,size,padding),_this.updateColors(fills,strokes),_this}return __extends$2C(MiniColumnLineCombo,_super),MiniColumnLineCombo.prototype.updateColors=function(fills,strokes){this.columns.forEach((function(bar,i){bar.fill=fills[i],bar.stroke=strokes[i]})),this.lines.forEach((function(line,i){line.stroke=fills[i+2]}))},MiniColumnLineCombo.chartType="columnLineCombo",MiniColumnLineCombo}(MiniChartWithAxes),__extends$2D=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniAreaColumnCombo=function(_super){function MiniAreaColumnCombo(container,fills,strokes){var _this=_super.call(this,container,"areaColumnComboTooltip")||this;_this.columnData=[3,4.5],_this.areaData=[[5,4,6,5,4]];var _a=_this,root=_a.root,columnData=_a.columnData,areaData=_a.areaData,size=_a.size,padding=_a.padding;_this.columns=createColumnRects({stacked:!1,root,data:columnData,size,padding,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});var xScale=new BandScale$1;xScale.range=[padding,size-padding],xScale.domain=[0,1,2,3,4],xScale.paddingInner=1,xScale.paddingOuter=0;var yScale=new LinearScale$1;yScale.range=[size-padding,padding],yScale.domain=[0,6];var pathData=[],yZero=yScale.convert(0),firstX=xScale.convert(0);return areaData.forEach((function(series,i){var points=pathData[i]||(pathData[i]=[]);series.forEach((function(data,j){var yDatum=data,xDatum=j,x=xScale.convert(xDatum),y=yScale.convert(yDatum);points[j]={x,y}}));var lastX=xScale.convert(series.length-1);pathData[i].push({x:lastX,y:yZero},{x:firstX,y:yZero})})),_this.areas=pathData.map((function(points){var area=new Path$1;area.strokeWidth=1,area.fillOpacity=.8;var path=area.path;return points.forEach((function(point,i){return path[i>0?"lineTo":"moveTo"](point.x,point.y)})),area})),root.append(_this.areas),root.append([].concat.apply([],_this.columns)),_this.updateColors(fills,strokes),_this}return __extends$2D(MiniAreaColumnCombo,_super),MiniAreaColumnCombo.prototype.updateColors=function(fills,strokes){this.areas.forEach((function(area,i){area.fill=fills[i],area.stroke=strokes[i]})),this.columns.forEach((function(bar,i){bar.fill=fills[i+1],bar.stroke=strokes[i+1]}))},MiniAreaColumnCombo.chartType="areaColumnCombo",MiniAreaColumnCombo}(MiniChartWithAxes),__extends$2E=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MiniCustomCombo=function(_super){function MiniCustomCombo(container,fills,strokes){var _this=_super.call(this,container,"customComboTooltip")||this;_this.columnData=[3,4],_this.lineData=[[5,4,6,5,4]];var _a=_this,root=_a.root,columnData=_a.columnData,lineData=_a.lineData,size=_a.size,padding=_a.padding;_this.columns=createColumnRects({stacked:!1,root,data:columnData,size,padding,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),root.append(_this.columns),_this.lines=createLinePaths(root,lineData,size,padding);var leftAxis=new Line$1;leftAxis.x1=padding,leftAxis.y1=padding,leftAxis.x2=padding,leftAxis.y2=size-padding+3,leftAxis.stroke="grey";var bottomAxis=new Line$1;bottomAxis.x1=padding-3+1,bottomAxis.y1=size-padding,bottomAxis.x2=size-padding+1,bottomAxis.y2=size-padding,bottomAxis.stroke="grey";var penIcon=new Path$1;return penIcon.svgPath="M25.76,43.46l5.51,5.07M49.86,22a3.26,3.26,0,0,0-3-.59,6.78,6.78,0,0,0-3.35,2.14l-18,20.25-.08.09-2.42,8-.18.57,8.19-3.6,18-20.34a6.83,6.83,0,0,0,1.73-3.59A3.29,3.29,0,0,0,49.86,22Zm-8.1,3.5,5.58,5m-6.6-3.85,5.51,5.06",penIcon.fill="whitesmoke",penIcon.stroke="darkslategrey",penIcon.strokeWidth=1,root.append([bottomAxis,leftAxis,penIcon]),_this.updateColors(fills,strokes),_this}return __extends$2E(MiniCustomCombo,_super),MiniCustomCombo.prototype.updateColors=function(fills,strokes){this.columns.forEach((function(bar,i){bar.fill=fills[i],bar.stroke=strokes[i]})),this.lines.forEach((function(line,i){line.stroke=fills[i+2]}))},MiniCustomCombo.chartType="customCombo",MiniCustomCombo}(MiniChart),__extends$2F=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1e=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MiniChartsContainer=function(_super){function MiniChartsContainer(chartController,fills,strokes){var _this=_super.call(this,MiniChartsContainer.TEMPLATE)||this;return _this.wrappers={},_this.chartGroups={columnGroup:[MiniColumn,MiniStackedColumn,MiniNormalizedColumn],barGroup:[MiniBar,MiniStackedBar,MiniNormalizedBar],pieGroup:[MiniPie,MiniDoughnut],lineGroup:[MiniLine],scatterGroup:[MiniScatter,MiniBubble],areaGroup:[MiniArea,MiniStackedArea,MiniNormalizedArea],histogramGroup:[MiniHistogram],combinationGroup:[MiniColumnLineCombo,MiniAreaColumnCombo,MiniCustomCombo]},_this.chartController=chartController,_this.fills=fills,_this.strokes=strokes,_this}return __extends$2F(MiniChartsContainer,_super),MiniChartsContainer.prototype.init=function(){var _this=this;this.chartController.customComboExists()||(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter((function(miniChart){return miniChart!==MiniCustomCombo})));var eGui=this.getGui();Object.keys(this.chartGroups).forEach((function(group){var chartGroup=_this.chartGroups[group],groupComponent=_this.createBean(new agGridCommunity.AgGroupComponent({title:_this.chartTranslationService.translate(group),suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));chartGroup.forEach((function(MiniClass){var miniWrapper=document.createElement("div");miniWrapper.classList.add("ag-chart-mini-thumbnail"),_this.addManagedListener(miniWrapper,"click",(function(){_this.chartController.setChartType(MiniClass.chartType),_this.updateSelectedMiniChart()})),_this.wrappers[MiniClass.chartType]=miniWrapper,_this.createBean(new MiniClass(miniWrapper,_this.fills,_this.strokes)),groupComponent.addItem(miniWrapper)})),eGui.appendChild(groupComponent.getGui())})),this.updateSelectedMiniChart()},MiniChartsContainer.prototype.updateSelectedMiniChart=function(){var selectedChartType=this.chartController.getChartType();for(var miniChartType in this.wrappers){var selected=miniChartType===selectedChartType;this.wrappers[miniChartType].classList.toggle("ag-selected",selected)}},MiniChartsContainer.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',__decorate$1e([agGridCommunity.Autowired("chartTranslationService")],MiniChartsContainer.prototype,"chartTranslationService",void 0),__decorate$1e([agGridCommunity.PostConstruct],MiniChartsContainer.prototype,"init",null),MiniChartsContainer}(agGridCommunity.Component),__extends$2G=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1f=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ChartSettingsPanel=function(_super){function ChartSettingsPanel(chartController){var _this=_super.call(this,ChartSettingsPanel.TEMPLATE)||this;return _this.miniCharts=[],_this.cardItems=[],_this.activePaletteIndex=0,_this.palettes=[],_this.themes=[],_this.chartController=chartController,_this}return __extends$2G(ChartSettingsPanel,_super),ChartSettingsPanel.prototype.postConstruct=function(){var _this=this;this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",agGridCommunity._.createIconNoSpan("previous",this.gridOptionsWrapper)),this.eNextBtn.insertAdjacentElement("afterbegin",agGridCommunity._.createIconNoSpan("next",this.gridOptionsWrapper)),this.addManagedListener(this.ePrevBtn,"click",(function(){return _this.setActivePalette(_this.getPrev(),"left")})),this.addManagedListener(this.eNextBtn,"click",(function(){return _this.setActivePalette(_this.getNext(),"right")})),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_TYPE_CHANGED,(function(){return _this.resetPalettes(!0)})),this.scrollSelectedIntoView()},ChartSettingsPanel.prototype.scrollSelectedIntoView=function(){var _this=this;setTimeout((function(){var currentChart=_this.miniCharts.find((function(pallet){return!pallet.getGui().classList.contains("ag-hidden")})).getGui().querySelector(".ag-selected");currentChart&&currentChart.scrollIntoView({block:"nearest"})}),250)},ChartSettingsPanel.prototype.resetPalettes=function(forceReset){var _this=this,palettes=this.chartController.getPalettes();agGridCommunity._.shallowCompare(palettes,this.palettes)&&!forceReset||this.isAnimating||(this.palettes=palettes,this.themes=this.chartController.getThemes(),this.activePaletteIndex=this.themes.findIndex((function(name){return name===_this.chartController.getChartThemeName()})),this.cardItems=[],agGridCommunity._.clearElement(this.eCardSelector),this.destroyMiniCharts(),this.palettes.forEach((function(palette,index){var isActivePalette=_this.activePaletteIndex===index,fills=palette.fills,strokes=palette.strokes,miniChartsContainer=_this.createBean(new MiniChartsContainer(_this.chartController,fills,strokes));_this.miniCharts.push(miniChartsContainer),_this.eMiniChartsContainer.appendChild(miniChartsContainer.getGui()),_this.addCardLink(index),isActivePalette?miniChartsContainer.updateSelectedMiniChart():miniChartsContainer.addCssClass("ag-hidden")})),this.eNavBar.classList.toggle("ag-hidden",this.palettes.length<=1),agGridCommunity._.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected"))},ChartSettingsPanel.prototype.addCardLink=function(index){var _this=this,link=document.createElement("div");link.classList.add("ag-chart-settings-card-item"),this.addManagedListener(link,"click",(function(){_this.setActivePalette(index,index<_this.activePaletteIndex?"left":"right")})),this.eCardSelector.appendChild(link),this.cardItems.push(link)},ChartSettingsPanel.prototype.getPrev=function(){var prev=this.activePaletteIndex-1;return prev<0&&(prev=this.palettes.length-1),prev},ChartSettingsPanel.prototype.getNext=function(){var next=this.activePaletteIndex+1;return next>=this.palettes.length&&(next=0),next},ChartSettingsPanel.prototype.setActivePalette=function(index,animationDirection){var _this=this;if(!this.isAnimating&&this.activePaletteIndex!==index){agGridCommunity._.radioCssClass(this.cardItems[index],"ag-selected","ag-not-selected");var currentPalette=this.miniCharts[this.activePaletteIndex],currentGui=currentPalette.getGui(),futurePalette=this.miniCharts[index],nextGui=futurePalette.getGui();currentPalette.updateSelectedMiniChart(),futurePalette.updateSelectedMiniChart();var multiplier="left"===animationDirection?-1:1,final=nextGui.style.left=agGridCommunity._.getAbsoluteWidth(this.getGui())*multiplier+"px";this.activePaletteIndex=index,this.isAnimating=!0;futurePalette.removeCssClass("ag-hidden"),currentPalette.addCssClass("ag-animating"),futurePalette.addCssClass("ag-animating"),this.chartController.setChartThemeName(this.themes[index]),window.setTimeout((function(){currentGui.style.left=-parseFloat(final)+"px",nextGui.style.left="0px"}),0),window.setTimeout((function(){_this.isAnimating=!1,currentPalette.removeCssClass("ag-animating"),futurePalette.removeCssClass("ag-animating"),currentPalette.addCssClass("ag-hidden")}),300)}},ChartSettingsPanel.prototype.destroyMiniCharts=function(){agGridCommunity._.clearElement(this.eMiniChartsContainer),this.miniCharts=this.destroyBeans(this.miniCharts)},ChartSettingsPanel.prototype.destroy=function(){this.destroyMiniCharts(),_super.prototype.destroy.call(this)},ChartSettingsPanel.TEMPLATE='<div class="ag-chart-settings-wrapper">\n            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-chart-settings-prev-button"></button>\n                </div>\n                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>',__decorate$1f([agGridCommunity.Autowired("resizeObserverService")],ChartSettingsPanel.prototype,"resizeObserverService",void 0),__decorate$1f([agGridCommunity.RefSelector("eMiniChartsContainer")],ChartSettingsPanel.prototype,"eMiniChartsContainer",void 0),__decorate$1f([agGridCommunity.RefSelector("eNavBar")],ChartSettingsPanel.prototype,"eNavBar",void 0),__decorate$1f([agGridCommunity.RefSelector("eCardSelector")],ChartSettingsPanel.prototype,"eCardSelector",void 0),__decorate$1f([agGridCommunity.RefSelector("ePrevBtn")],ChartSettingsPanel.prototype,"ePrevBtn",void 0),__decorate$1f([agGridCommunity.RefSelector("eNextBtn")],ChartSettingsPanel.prototype,"eNextBtn",void 0),__decorate$1f([agGridCommunity.PostConstruct],ChartSettingsPanel.prototype,"postConstruct",null),ChartSettingsPanel}(agGridCommunity.Component),__extends$2H=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1g=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TabbedChartMenu=function(_super){function TabbedChartMenu(params){var _this=_super.call(this)||this;_this.tabs=[];var controller=params.controller,panels=params.panels,chartOptionsService=params.chartOptionsService;return _this.chartController=controller,_this.chartOptionsService=chartOptionsService,_this.panels=panels,_this}return __extends$2H(TabbedChartMenu,_super),TabbedChartMenu.prototype.init=function(){var _this=this;this.panels.forEach((function(panel){var panelType=panel.replace("chart","").toLowerCase(),_a=_this.createTab(panel,panelType,_this.getPanelClass(panelType)),comp=_a.comp,tab=_a.tab;_this.tabs.push(tab),_this.addDestroyFunc((function(){return _this.destroyBean(comp)}))})),this.tabbedLayout=new agGridCommunity.TabbedLayout({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)},TabbedChartMenu.prototype.createTab=function(name,title,TabPanelClass){var eWrapperDiv=document.createElement("div");eWrapperDiv.classList.add("ag-chart-tab","ag-chart-"+title);var comp=new TabPanelClass(this.chartController,this.chartOptionsService);this.getContext().createBean(comp),eWrapperDiv.appendChild(comp.getGui());var titleEl=document.createElement("div"),translatedTitle=this.chartTranslationService.translate(title);return titleEl.innerText=translatedTitle,{comp,tab:{title:titleEl,titleLabel:translatedTitle,bodyPromise:agGridCommunity.AgPromise.resolve(eWrapperDiv),getScrollableContainer:function(){return eWrapperDiv.querySelector(".ag-scrollable-container")||eWrapperDiv},name}}},TabbedChartMenu.prototype.showTab=function(tab){var tabItem=this.tabs[tab];this.tabbedLayout.showItem(tabItem)},TabbedChartMenu.prototype.getGui=function(){return this.tabbedLayout&&this.tabbedLayout.getGui()},TabbedChartMenu.prototype.destroy=function(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),_super.prototype.destroy.call(this)},TabbedChartMenu.prototype.getPanelClass=function(panelType){switch(panelType){case TabbedChartMenu.TAB_DATA:return ChartDataPanel;case TabbedChartMenu.TAB_FORMAT:return FormatPanel;default:return ChartSettingsPanel}},TabbedChartMenu.TAB_DATA="data",TabbedChartMenu.TAB_FORMAT="format",__decorate$1g([agGridCommunity.Autowired("chartTranslationService")],TabbedChartMenu.prototype,"chartTranslationService",void 0),__decorate$1g([agGridCommunity.PostConstruct],TabbedChartMenu.prototype,"init",null),TabbedChartMenu}(agGridCommunity.Component),__extends$2I=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1h=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$L=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},ChartMenu=function(_super){function ChartMenu(eChartContainer,eMenuPanelContainer,chartController,chartOptionsService){var _this=_super.call(this,ChartMenu.TEMPLATE)||this;return _this.eChartContainer=eChartContainer,_this.eMenuPanelContainer=eMenuPanelContainer,_this.chartController=chartController,_this.chartOptionsService=chartOptionsService,_this.buttons={chartSettings:["menu",function(){return _this.showMenu("chartSettings")}],chartData:["menu",function(){return _this.showMenu("chartData")}],chartFormat:["menu",function(){return _this.showMenu("chartFormat")}],chartLink:["linked",function(e){return _this.toggleDetached(e)}],chartUnlink:["unlinked",function(e){return _this.toggleDetached(e)}],chartDownload:["save",function(){return _this.saveChart()}]},_this.tabs=[],_this.menuVisible=!1,_this}return __extends$2I(ChartMenu,_super),ChartMenu.prototype.postConstruct=function(){this.createButtons(),this.refreshMenuClasses()},ChartMenu.prototype.isVisible=function(){return this.menuVisible},ChartMenu.prototype.getToolbarOptions=function(){var _this=this,tabOptions=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],toolbarItemsFunc=this.gridOptionsWrapper.getChartToolbarItemsFunc();toolbarItemsFunc&&(tabOptions=toolbarItemsFunc({defaultItems:tabOptions}).filter((function(option){return!!_this.buttons[option]||(console.warn("AG Grid: '"+option+" is not a valid Chart Toolbar Option"),!1)})));this.chartController.isPivotChart()&&(tabOptions=tabOptions.filter((function(option){return"chartData"!==option})));var ignoreOptions=["chartUnlink","chartLink","chartDownload"];return this.tabs=tabOptions.filter((function(option){return-1===ignoreOptions.indexOf(option)})),tabOptions.filter((function(value){return-1!==ignoreOptions.indexOf(value)||_this.tabs.length&&value===_this.tabs[0]}))},ChartMenu.prototype.toggleDetached=function(e){var target=e.target,active=target.classList.contains("ag-icon-linked");target.classList.toggle("ag-icon-linked",!active),target.classList.toggle("ag-icon-unlinked",active);var tooltipKey=active?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip",tooltipTitle=this.chartTranslationService.translate(tooltipKey);tooltipTitle&&(target.title=tooltipTitle),this.chartController.detachChartRange()},ChartMenu.prototype.createButtons=function(){var _this=this,chartToolbarOptions=this.getToolbarOptions(),gui=this.getGui();chartToolbarOptions.forEach((function(button){var buttonConfig=_this.buttons[button],_a=__read$L(buttonConfig,2),iconName=_a[0],callback=_a[1],buttonEl=agGridCommunity._.createIconNoSpan(iconName,_this.gridOptionsWrapper,void 0,!0);buttonEl.classList.add("ag-chart-menu-icon");var tooltipTitle=_this.chartTranslationService.translate(button+"ToolbarTooltip");tooltipTitle&&(buttonEl.title=tooltipTitle),_this.addManagedListener(buttonEl,"click",callback),gui.appendChild(buttonEl)}))},ChartMenu.prototype.saveChart=function(){var event={type:ChartMenu.EVENT_DOWNLOAD_CHART};this.dispatchEvent(event)},ChartMenu.prototype.createMenuPanel=function(defaultTab){var _this=this,width=this.gridOptionsWrapper.chartMenuPanelWidth(),menuPanel=this.menuPanel=this.createBean(new agGridCommunity.AgPanel({minWidth:width,width,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return menuPanel.setParentComponent(this),this.eMenuPanelContainer.appendChild(menuPanel.getGui()),this.tabbedMenu=this.createBean(new TabbedChartMenu({controller:this.chartController,type:this.chartController.getChartType(),panels:this.tabs,chartOptionsService:this.chartOptionsService})),this.addManagedListener(menuPanel,agGridCommunity.Component.EVENT_DESTROYED,(function(){return _this.destroyBean(_this.tabbedMenu)})),new agGridCommunity.AgPromise((function(res){window.setTimeout((function(){menuPanel.setBodyComponent(_this.tabbedMenu),_this.tabbedMenu.showTab(defaultTab),_this.addManagedListener(_this.eChartContainer,"click",(function(event){_this.getGui().contains(event.target)||_this.menuVisible&&_this.hideMenu()})),res(menuPanel)}),100)}))},ChartMenu.prototype.showContainer=function(){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())},ChartMenu.prototype.showMenu=function(tabName){var tab=this.tabs.indexOf(tabName);this.menuPanel?this.showContainer():this.createMenuPanel(tab).then(this.showContainer.bind(this))},ChartMenu.prototype.hideMenu=function(){var _this=this;this.hideParent(),window.setTimeout((function(){_this.menuVisible=!1,_this.refreshMenuClasses()}),500)},ChartMenu.prototype.refreshMenuClasses=function(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible)},ChartMenu.prototype.showParent=function(width){this.eMenuPanelContainer.style.minWidth=width+"px"},ChartMenu.prototype.hideParent=function(){this.eMenuPanelContainer.style.minWidth="0"},ChartMenu.prototype.destroy=function(){_super.prototype.destroy.call(this),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel)},ChartMenu.EVENT_DOWNLOAD_CHART="downloadChart",ChartMenu.TEMPLATE='<div class="ag-chart-menu"></div>',__decorate$1h([agGridCommunity.Autowired("chartTranslationService")],ChartMenu.prototype,"chartTranslationService",void 0),__decorate$1h([agGridCommunity.PostConstruct],ChartMenu.prototype,"postConstruct",null),ChartMenu}(agGridCommunity.Component),__extends$2J=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$h=function(){return __assign$h=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$h.apply(this,arguments)},__decorate$1i=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TitleEdit=function(_super){function TitleEdit(chartMenu){var _this=_super.call(this,TitleEdit.TEMPLATE)||this;return _this.chartMenu=chartMenu,_this}return __extends$2J(TitleEdit,_super),TitleEdit.prototype.init=function(){var _this=this;this.addManagedListener(this.getGui(),"keypress",(function(e){"Enter"===e.key&&_this.endEditing()})),this.addManagedListener(this.getGui(),"blur",this.endEditing.bind(this))},TitleEdit.prototype.refreshTitle=function(chartController,chartOptionsService){var _this=this;this.chartController=chartController,this.chartOptionsService=chartOptionsService;var chartProxy=this.chartController.getChartProxy();if(chartProxy){for(var i=0;i++;i<this.destroyableChartListeners.length)this.destroyableChartListeners[i]();this.destroyableChartListeners=[]}var chart=chartProxy.getChart(),canvas=chart.scene.canvas.element,destroyDbleClickListener=this.addManagedListener(canvas,"dblclick",(function(event){var title=chart.title;if(title&&title.node.containsPoint(event.offsetX,event.offsetY)){var bbox=title.node.computeBBox(),xy=title.node.inverseTransformPoint(bbox.x,bbox.y);_this.startEditing(__assign$h(__assign$h({},bbox),xy))}})),wasInTitle=!1,destroyMouseMoveListener=this.addManagedListener(canvas,"mousemove",(function(event){var title=chart.title,inTitle=!!(title&&title.enabled&&title.node.containsPoint(event.offsetX,event.offsetY));wasInTitle!==inTitle&&(canvas.style.cursor=inTitle?"pointer":""),wasInTitle=inTitle}));this.destroyableChartListeners=[destroyDbleClickListener,destroyMouseMoveListener]},TitleEdit.prototype.startEditing=function(titleBBox){if(!this.chartMenu||!this.chartMenu.isVisible()){var maximumInputWidth=this.chartController.getChartProxy().getChart().width,inputWidth=Math.max(Math.min(titleBBox.width+20,maximumInputWidth),300),inputElement=this.getGui();inputElement.classList.add("currently-editing");var inputStyle=inputElement.style;inputStyle.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),inputStyle.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),inputStyle.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),inputStyle.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",inputStyle.color=this.chartOptionsService.getChartOption("title.color");var oldTitle=this.chartOptionsService.getChartOption("title.text"),inputValue=oldTitle===this.chartTranslationService.translate("titlePlaceholder")?"":oldTitle;inputElement.value=inputValue;var inputRect=inputElement.getBoundingClientRect();inputStyle.left=Math.round(titleBBox.x+titleBBox.width/2-inputWidth/2)+"px",inputStyle.top=Math.round(titleBBox.y+titleBBox.height/2-inputRect.height/2)+"px",inputStyle.width=Math.round(inputWidth)+"px",inputElement.focus()}},TitleEdit.prototype.endEditing=function(){var value=this.getGui().value;this.chartOptionsService.setChartOption("title.text",value),this.eventService.dispatchEvent({type:"chartTitleEdit"}),this.removeCssClass("currently-editing")},TitleEdit.TEMPLATE='<input\n            class="ag-chart-title-edit"\n            style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center;" />\n        ',__decorate$1i([agGridCommunity.Autowired("chartTranslationService")],TitleEdit.prototype,"chartTranslationService",void 0),__decorate$1i([agGridCommunity.PostConstruct],TitleEdit.prototype,"init",null),TitleEdit}(agGridCommunity.Component);function cloneUnlessOtherwiseSpecified$1(value,options){return!1!==options.clone&&options.isMergeableObject(value)?deepMerge$1(function emptyTarget$1(value){return Array.isArray(value)?[]:{}}(value),value,options):value}function defaultArrayMerge$1(target,source,options){return target.concat(source).map((function(element){return cloneUnlessOtherwiseSpecified$1(element,options)}))}function getKeys$1(target){return Object.keys(target).concat(function getEnumerableOwnPropertySymbols$1(target){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(target).filter((function(symbol){return target.propertyIsEnumerable(symbol)})):[]}(target))}function propertyIsOnObject$1(object,property){try{return property in object}catch(_){return!1}}function mergeObject$1(target,source,options){var destination={};return options.isMergeableObject(target)&&getKeys$1(target).forEach((function(key){destination[key]=cloneUnlessOtherwiseSpecified$1(target[key],options)})),getKeys$1(source).forEach((function(key){(function propertyIsUnsafe$1(target,key){return propertyIsOnObject$1(target,key)&&!(Object.hasOwnProperty.call(target,key)&&Object.propertyIsEnumerable.call(target,key))})(target,key)||(propertyIsOnObject$1(target,key)&&options.isMergeableObject(source[key])?destination[key]=function getMergeFunction$1(key,options){if(!options.customMerge)return deepMerge$1;var customMerge=options.customMerge(key);return"function"==typeof customMerge?customMerge:deepMerge$1}(key,options)(target[key],source[key],options):destination[key]=cloneUnlessOtherwiseSpecified$1(source[key],options))})),destination}function defaultIsMergeableObject$1(value){return function isNonNullObject$1(value){return!!value&&"object"==typeof value}(value)&&!function isSpecial$1(value){var stringValue=Object.prototype.toString.call(value);return"[object RegExp]"===stringValue||"[object Date]"===stringValue}(value)}function deepMerge$1(target,source,options){(options=options||{}).arrayMerge=options.arrayMerge||defaultArrayMerge$1,options.isMergeableObject=options.isMergeableObject||defaultIsMergeableObject$1,options.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified$1;var sourceIsArray=Array.isArray(source);return sourceIsArray===Array.isArray(target)?sourceIsArray?options.arrayMerge(target,source,options):mergeObject$1(target,source,options):cloneUnlessOtherwiseSpecified$1(source,options)}var __assign$i=function(){return __assign$i=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$i.apply(this,arguments)},ChartProxy=function(){function ChartProxy(chartProxyParams){if(this.chartProxyParams=chartProxyParams,this.chartType=chartProxyParams.chartType,this.crossFiltering=chartProxyParams.crossFiltering,this.crossFilterCallback=chartProxyParams.crossFilterCallback,this.standaloneChartType=getSeriesType(this.chartType),this.chartProxyParams.chartOptionsToRestore){this.chartOptions=this.chartProxyParams.chartOptionsToRestore,this.chartPalette=this.chartProxyParams.chartPaletteToRestore;var themeOverrides={overrides:this.chartOptions,palette:this.chartPalette};this.chartTheme=getChartTheme(__assign$i({baseTheme:this.getSelectedTheme()},themeOverrides))}else this.chartTheme=this.createChartTheme(),this.chartOptions=this.convertConfigToOverrides(this.chartTheme.config),this.chartPalette=this.chartTheme.palette}return ChartProxy.prototype.recreateChart=function(){var _this=this;if(this.chart&&this.destroyChart(),this.chart=this.createChart(),this.crossFiltering){this.chart.addEventListener("click",(function(e){return _this.crossFilterCallback(e,true)}))}},ChartProxy.prototype.getChart=function(){return this.chart},ChartProxy.prototype.createChartTheme=function(){var _this=this,themeName=this.getSelectedTheme(),stockTheme=this.isStockTheme(themeName),gridOptionsThemeOverrides=this.chartProxyParams.getGridOptionsChartThemeOverrides(),apiThemeOverrides=this.chartProxyParams.apiChartThemeOverrides;if(gridOptionsThemeOverrides||apiThemeOverrides){var themeOverrides_1={overrides:ChartProxy.mergeThemeOverrides(gridOptionsThemeOverrides,apiThemeOverrides)};return getChartTheme(stockTheme?__assign$i({baseTheme:themeName},themeOverrides_1):deepMerge$1(_this.lookupCustomChartTheme(themeName),themeOverrides_1))}return getChartTheme(stockTheme?themeName:this.lookupCustomChartTheme(themeName))},ChartProxy.prototype.isStockTheme=function(themeName){return agGridCommunity._.includes(Object.keys(themes),themeName)},ChartProxy.prototype.getSelectedTheme=function(){var chartThemeName=this.chartProxyParams.getChartThemeName(),availableThemes=this.chartProxyParams.getChartThemes();return agGridCommunity._.includes(availableThemes,chartThemeName)||(chartThemeName=availableThemes[0]),chartThemeName},ChartProxy.prototype.lookupCustomChartTheme=function(name){var customChartThemes=this.chartProxyParams.customChartThemes,customChartTheme=customChartThemes&&customChartThemes[name];return customChartTheme||console.warn("AG Grid: no stock theme exists with the name '"+name+"' and no custom chart theme with that name was supplied to 'customChartThemes'"),customChartTheme},ChartProxy.mergeThemeOverrides=function(gridOptionsThemeOverrides,apiThemeOverrides){return gridOptionsThemeOverrides?apiThemeOverrides?deepMerge$1(gridOptionsThemeOverrides,apiThemeOverrides):gridOptionsThemeOverrides:apiThemeOverrides},ChartProxy.prototype.downloadChart=function(){var chart=this.chart,fileName=chart.title?chart.title.text:"chart";chart.scene.download(fileName)},ChartProxy.prototype.getChartImageDataURL=function(type){return this.chart.scene.getDataURL(type)},ChartProxy.prototype.getChartOptions=function(){return this.chartOptions},ChartProxy.prototype.getChartPalette=function(){return this.chartPalette},ChartProxy.prototype.transformData=function(data,categoryKey){return this.chartProxyParams.grouping||this.chart.axes.filter((function(a){return a instanceof CategoryAxis})).length<1?data:data.map((function(d,index){var value=d[categoryKey],valueString=value&&value.toString?value.toString():"",datum=__assign$i({},d);return datum[categoryKey]={id:index,value,toString:function(){return valueString}},datum}))},ChartProxy.prototype.convertConfigToOverrides=function(config){var overrideObjs=["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)?["line","area","column","cartesian"]:[this.standaloneChartType],overrides={};return overrideObjs.forEach((function(overrideObj){var chartOverrides=deepMerge$1({},config[overrideObj]);chartOverrides.series=chartOverrides.series[overrideObj],"scatter"===overrideObj&&(chartOverrides.paired=!0),overrides[overrideObj]=chartOverrides})),overrides},ChartProxy.prototype.destroy=function(){this.destroyChart()},ChartProxy.prototype.destroyChart=function(){this.chart&&(this.chart.destroy(),this.chart=void 0)},ChartProxy}(),__extends$2K=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CartesianChartProxy=function(_super){function CartesianChartProxy(params){var _this=_super.call(this,params)||this;return _this.axisTypeToClassMap={number:NumberAxis,category:CategoryAxis,groupedCategory:GroupedCategoryAxis,time:TimeAxis},_this}return __extends$2K(CartesianChartProxy,_super),CartesianChartProxy.prototype.updateAxes=function(params){if(params.grouping)this.axisTypeToClassMap[this.xAxisType]!==GroupedCategoryAxis&&(this.xAxisType="groupedCategory",this.recreateChart());else{var newXAxisType=CartesianChartProxy.isTimeAxis(params)?"time":"category";newXAxisType!==this.xAxisType&&(this.xAxisType=newXAxisType,this.recreateChart())}},CartesianChartProxy.prototype.getAxesOptions=function(chartSeriesType){return void 0===chartSeriesType&&(chartSeriesType=this.standaloneChartType),this.chartOptions[chartSeriesType].axes},CartesianChartProxy.prototype.processDataForCrossFiltering=function(data,colId,params){var yKey=colId,atLeastOneSelectedPoint=!1;this.crossFiltering&&(data.forEach((function(d){d[colId+"-total"]=d[colId]+d[colId+"-filtered-out"],d[colId+"-filtered-out"]>0&&(atLeastOneSelectedPoint=!0)})),params.getCrossFilteringContext().lastSelectedChartId===params.chartId&&(yKey=colId+"-total"));return{yKey,atLeastOneSelectedPoint}},CartesianChartProxy.prototype.updateSeriesForCrossFiltering=function(series,colId,chart,params,atLeastOneSelectedPoint){if(this.crossFiltering){series.marker.enabled=!0,series.marker.formatter=function(p){return{fill:p.highlighted?"yellow":p.fill,size:p.highlighted?12:p.datum[colId]>0?8:0}},chart.tooltip.delay=500;var deselectedPoints=params.getCrossFilteringContext().lastSelectedChartId===params.chartId&&atLeastOneSelectedPoint;series instanceof AreaSeries&&(series.fillOpacity=deselectedPoints?.3:1),series instanceof LineSeries&&(series.strokeOpacity=deselectedPoints?.3:1),series.addEventListener("nodeClick",this.crossFilterCallback)}},CartesianChartProxy.isTimeAxis=function(params){if(params.category&&params.category.chartDataType)return"time"===params.category.chartDataType;var testDatum=params.data[0];return(testDatum&&testDatum[params.category.id])instanceof Date},CartesianChartProxy}(ChartProxy);function hexToRGBA(hex,alpha){var r=parseInt(hex.slice(1,3),16),g=parseInt(hex.slice(3,5),16),b=parseInt(hex.slice(5,7),16);return alpha?"rgba("+r+", "+g+", "+b+", "+alpha+")":"rgba("+r+", "+g+", "+b+")"}function changeOpacity(fills,alpha){return fills.map((function(fill){var c=agGridCommunity.Color.fromString(fill);return new agGridCommunity.Color(c.r,c.g,c.b,alpha).toHexString()}))}var __extends$2L=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$j=function(){return __assign$j=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$j.apply(this,arguments)},__read$M=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},BarChartProxy=function(_super){function BarChartProxy(params){var _this=_super.call(this,params)||this;return _this.xAxisType=params.grouping?"groupedCategory":"category",_this.yAxisType="number",_this.recreateChart(),_this}return __extends$2L(BarChartProxy,_super),BarChartProxy.prototype.createChart=function(){var _a=__read$M(["bar"===this.standaloneChartType,this.isNormalised()],2),isBar=_a[0],isNormalised=_a[1];return AgChart.create({container:this.chartProxyParams.parentElement,theme:this.chartTheme,axes:this.getAxes(isBar,isNormalised),series:this.getSeries(isNormalised)})},BarChartProxy.prototype.update=function(params){this.updateAxes(params);var barSeries=this.chart.series[0];this.crossFiltering?this.updateCrossFilteringSeries(barSeries,params):(barSeries.fills=this.chartTheme.palette.fills,barSeries.strokes=this.chartTheme.palette.strokes),barSeries.data=this.transformData(params.data,params.category.id),barSeries.xKey=params.category.id,barSeries.xName=params.category.name,barSeries.yKeys=params.fields.map((function(f){return f.colId})),barSeries.yNames=params.fields.map((function(f){return f.displayName}))},BarChartProxy.prototype.updateCrossFilteringSeries=function(barSeries,params){var fields=params.fields;fields.forEach((function(field){var crossFilteringField=__assign$j({},field);crossFilteringField.colId=field.colId+"-filtered-out",fields.push(crossFilteringField)}));var palette=this.chartTheme.palette,fills=[];palette.fills.forEach((function(fill){fills.push(fill),fills.push(hexToRGBA(fill,"0.3"))})),barSeries.fills=fills;palette.strokes.forEach((function(stroke){fills.push(stroke),fills.push(hexToRGBA(stroke,"0.3"))})),barSeries.strokes=[],barSeries.highlightStyle.fill=void 0;var colIds=params.fields.map((function(f){return f.colId}));barSeries.hideInLegend=colIds.filter((function(colId){return-1!==colId.indexOf("-filtered-out")})),this.chart.legend.addEventListener("click",(function(event){barSeries.toggleSeriesItem(event.itemId+"-filtered-out",event.enabled)})),this.chart.tooltip.delay=500,barSeries.addEventListener("nodeClick",this.crossFilterCallback)},BarChartProxy.prototype.getAxes=function(isBar,normalised){var axisOptions=this.getAxesOptions(),axes=[__assign$j(__assign$j({},deepMerge$1(axisOptions[this.xAxisType],axisOptions[this.xAxisType].bottom)),{type:this.xAxisType,position:isBar?ChartAxisPosition.Left:ChartAxisPosition.Bottom}),__assign$j(__assign$j({},deepMerge$1(axisOptions[this.yAxisType],axisOptions[this.yAxisType].left)),{type:this.yAxisType,position:isBar?ChartAxisPosition.Bottom:ChartAxisPosition.Left})];if(normalised){var numberAxis=axes[1];numberAxis.label=__assign$j(__assign$j({},numberAxis.label),{formatter:function(params){return Math.round(params.value)+"%"}})}return axes},BarChartProxy.prototype.getSeries=function(normalised){var isGrouped=!this.crossFiltering&&agGridCommunity._.includes(["groupedColumn","groupedBar"],this.chartType);return[__assign$j(__assign$j({},this.chartOptions[this.standaloneChartType].series),{type:this.standaloneChartType,grouped:isGrouped,normalizedTo:normalised?100:void 0})]},BarChartProxy.prototype.isNormalised=function(){return!this.crossFiltering&&agGridCommunity._.includes(["normalizedColumn","normalizedBar"],this.chartType)},BarChartProxy}(CartesianChartProxy),__extends$2M=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$k=function(){return __assign$k=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$k.apply(this,arguments)},AreaChartProxy=function(_super){function AreaChartProxy(params){var _this=_super.call(this,params)||this;return _this.xAxisType=params.grouping?"groupedCategory":"category",_this.yAxisType="number",_this.recreateChart(),_this}return __extends$2M(AreaChartProxy,_super),AreaChartProxy.prototype.createChart=function(){return AgChart.create({type:"area",container:this.chartProxyParams.parentElement,theme:this.chartTheme,axes:this.getAxes()})},AreaChartProxy.prototype.update=function(params){if(this.updateAxes(params),"area"===this.chartType)this.updateAreaChart(params);else{var areaSeries=this.chart.series[0];if(!areaSeries){var seriesDefaults=__assign$k(__assign$k({},this.chartOptions[this.standaloneChartType].series),{type:"area",normalizedTo:"normalizedArea"===this.chartType?100:void 0});if(!(areaSeries=AgChart.createComponent(__assign$k({},seriesDefaults),"area.series")))return;this.chart.addSeries(areaSeries)}areaSeries.data=this.transformData(params.data,params.category.id),areaSeries.xKey=params.category.id,areaSeries.xName=params.category.name,areaSeries.yKeys=params.fields.map((function(f){return f.colId})),areaSeries.yNames=params.fields.map((function(f){return f.displayName})),areaSeries.fills=this.chartTheme.palette.fills,areaSeries.strokes=this.chartTheme.palette.strokes}},AreaChartProxy.prototype.updateAreaChart=function(params){var _this=this,chart=this.chart;if(0!==params.fields.length){var previousSeries,fieldIds=params.fields.map((function(f){return f.colId})),existingSeriesById=chart.series.reduceRight((function(map,series,i){var id=series.yKeys[0];return fieldIds.indexOf(id)===i?map.set(id,series):chart.removeSeries(series),map}),new Map),data=this.transformData(params.data,params.category.id),_a=this.chartTheme.palette,fills=_a.fills,strokes=_a.strokes;params.fields.forEach((function(f,index){var _a=_this.processDataForCrossFiltering(data,f.colId,params),yKey=_a.yKey,atLeastOneSelectedPoint=_a.atLeastOneSelectedPoint,areaSeries=existingSeriesById.get(f.colId),fill=fills[index%fills.length],stroke=strokes[index%strokes.length];if(areaSeries)areaSeries.data=data,areaSeries.xKey=params.category.id,areaSeries.xName=params.category.name,areaSeries.yKeys=[yKey],areaSeries.yNames=[f.displayName],areaSeries.fills=[fill],areaSeries.strokes=[stroke];else{var seriesOverrides=_this.chartOptions[_this.standaloneChartType].series,seriesDefaults=__assign$k(__assign$k({},seriesOverrides),{type:"area",normalizedTo:"normalizedArea"===_this.chartType?100:void 0}),options=__assign$k(__assign$k({},seriesDefaults),{data,xKey:params.category.id,xName:params.category.name,yKeys:[yKey],yNames:[f.displayName],fills:[fill],strokes:[stroke],marker:__assign$k(__assign$k({},seriesDefaults.marker),{fill,stroke})});areaSeries=AgChart.createComponent(options,"area.series"),chart.addSeriesAfter(areaSeries,previousSeries)}_this.updateSeriesForCrossFiltering(areaSeries,f.colId,chart,params,atLeastOneSelectedPoint),previousSeries=areaSeries}))}else chart.removeAllSeries()},AreaChartProxy.prototype.getAxes=function(){var axisOptions=this.getAxesOptions(),options=[__assign$k(__assign$k({},deepMerge$1(axisOptions[this.xAxisType],axisOptions[this.xAxisType].bottom)),{type:this.xAxisType,position:ChartAxisPosition.Bottom,paddingInner:1,paddingOuter:0}),__assign$k(__assign$k({},deepMerge$1(axisOptions[this.yAxisType],axisOptions[this.yAxisType].left)),{type:this.yAxisType,position:ChartAxisPosition.Left})];return"time"===this.xAxisType&&(delete options[0].paddingInner,delete options[0].paddingOuter),options},AreaChartProxy}(CartesianChartProxy),__extends$2N=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$l=function(){return __assign$l=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$l.apply(this,arguments)},LineChartProxy=function(_super){function LineChartProxy(params){var _this=_super.call(this,params)||this;return _this.xAxisType=params.grouping?"groupedCategory":"category",_this.yAxisType="number",_this.recreateChart(),_this}return __extends$2N(LineChartProxy,_super),LineChartProxy.prototype.createChart=function(){return AgChart.create({type:"line",container:this.chartProxyParams.parentElement,theme:this.chartTheme,axes:this.getAxes()})},LineChartProxy.prototype.update=function(params){var _this=this;if(0!==params.fields.length){this.updateAxes(params);var previousSeries,chart=this.chart,fields=params.fields,fieldIds=fields.map((function(f){return f.colId})),data=this.transformData(params.data,params.category.id),existingSeriesById=chart.series.reduceRight((function(map,series,i){var id=series.yKey;return fieldIds.indexOf(id)===i?map.set(id,series):chart.removeSeries(series),map}),new Map),_a=this.chartTheme.palette,fills=_a.fills,strokes=_a.strokes;fields.forEach((function(f,index){var _a=_this.processDataForCrossFiltering(data,f.colId,params),yKey=_a.yKey,atLeastOneSelectedPoint=_a.atLeastOneSelectedPoint,lineSeries=existingSeriesById.get(f.colId),fill=fills[index%fills.length],stroke=strokes[index%strokes.length];if(lineSeries)lineSeries.title=f.displayName,lineSeries.data=data,lineSeries.xKey=params.category.id,lineSeries.xName=params.category.name,lineSeries.yKey=yKey,lineSeries.yName=f.displayName,lineSeries.marker.fill=fill,lineSeries.marker.stroke=stroke,lineSeries.stroke=fill;else{var seriesOverrides=_this.chartOptions[_this.standaloneChartType].series,seriesOptions=__assign$l(__assign$l({},seriesOverrides),{type:"line",title:f.displayName,data,xKey:params.category.id,xName:params.category.name,yKey,yName:f.displayName,stroke:fill,marker:__assign$l(__assign$l({},seriesOverrides.marker),{fill,stroke})});lineSeries=AgChart.createComponent(seriesOptions,"line.series"),chart.addSeriesAfter(lineSeries,previousSeries)}_this.updateSeriesForCrossFiltering(lineSeries,f.colId,chart,params,atLeastOneSelectedPoint),previousSeries=lineSeries}))}else this.chart.removeAllSeries()},LineChartProxy.prototype.getAxes=function(){var axisOptions=this.getAxesOptions();return[__assign$l(__assign$l({},deepMerge$1(axisOptions[this.xAxisType],axisOptions[this.xAxisType].bottom)),{type:this.xAxisType,position:ChartAxisPosition.Bottom}),__assign$l(__assign$l({},deepMerge$1(axisOptions[this.yAxisType],axisOptions[this.yAxisType].left)),{type:this.yAxisType,position:ChartAxisPosition.Left})]},LineChartProxy}(CartesianChartProxy),__extends$2O=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),PolarChartProxy=function(_super){function PolarChartProxy(params){return _super.call(this,params)||this}return __extends$2O(PolarChartProxy,_super),PolarChartProxy.prototype.addCrossFilteringTooltipRenderer=function(pieSeries){pieSeries.tooltip.renderer=function(params){var label=params.datum[params.labelKey],ratio=params.datum[params.radiusKey];return{content:label+": "+params.angleValue*ratio}}},PolarChartProxy}(ChartProxy),__extends$2P=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$m=function(){return __assign$m=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$m.apply(this,arguments)},PieChartProxy=function(_super){function PieChartProxy(params){var _this=_super.call(this,params)||this;return _this.recreateChart(),_this}return __extends$2P(PieChartProxy,_super),PieChartProxy.prototype.createChart=function(){return AgChart.create({type:"pie",container:this.chartProxyParams.parentElement,theme:this.chartTheme})},PieChartProxy.prototype.update=function(params){var chart=this.chart;if(0!==params.fields.length){var field=params.fields[0],angleField=field;if(this.crossFiltering){var fields_1=params.fields;fields_1.forEach((function(field){var crossFilteringField=__assign$m({},field);crossFilteringField.colId=field.colId+"-filtered-out",fields_1.push(crossFilteringField)}));var filteredOutField_1=fields_1[1];params.data.forEach((function(d){d[field.colId+"-total"]=d[field.colId]+d[filteredOutField_1.colId],d[field.colId]=d[field.colId]/d[field.colId+"-total"],d[filteredOutField_1.colId]=1}));var opaqueSeries=chart.series[1],radiusField=filteredOutField_1;opaqueSeries=this.updateSeries(chart,opaqueSeries,angleField,radiusField,params,void 0),radiusField=angleField;var filteredSeries=chart.series[0];this.updateSeries(chart,filteredSeries,angleField,radiusField,params,opaqueSeries)}else{var series=chart.series[0];this.updateSeries(chart,series,angleField,angleField,params,void 0)}}else chart.removeAllSeries()},PieChartProxy.prototype.updateSeries=function(chart,series,angleField,field,params,opaqueSeries){var existingSeriesId=series&&series.angleKey,seriesOverrides=this.chartOptions[this.standaloneChartType].series,pieSeries=series;if(existingSeriesId!==field.colId){chart.removeSeries(series);var options=__assign$m(__assign$m({},seriesOverrides),{type:"pie",angleKey:this.crossFiltering?angleField.colId+"-total":angleField.colId,radiusKey:this.crossFiltering?field.colId:void 0});(pieSeries=AgChart.createComponent(options,"pie.series")).fills=this.chartTheme.palette.fills,pieSeries.strokes=this.chartTheme.palette.strokes,pieSeries.callout.colors=this.chartTheme.palette.strokes,this.crossFiltering&&pieSeries&&!pieSeries.tooltip.renderer&&this.addCrossFilteringTooltipRenderer(pieSeries)}(pieSeries.angleName=field.displayName,pieSeries.labelKey=params.category.id,pieSeries.labelName=params.category.name,pieSeries.data=params.data,this.crossFiltering)&&(pieSeries.radiusMin=0,pieSeries.radiusMax=1,!opaqueSeries?(pieSeries.fills=changeOpacity(pieSeries.fills,.3),pieSeries.strokes=changeOpacity(pieSeries.strokes,.3),pieSeries.callout.colors=changeOpacity(pieSeries.strokes,.3),pieSeries.showInLegend=!1):chart.legend.addEventListener("click",(function(event){opaqueSeries&&opaqueSeries.toggleSeriesItem(event.itemId,event.enabled)})),chart.tooltip.delay=500,pieSeries.highlightStyle.fill=void 0,pieSeries.addEventListener("nodeClick",this.crossFilterCallback));return chart.addSeries(pieSeries),pieSeries},PieChartProxy}(PolarChartProxy),__extends$2Q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$n=function(){return __assign$n=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$n.apply(this,arguments)},DoughnutChartProxy=function(_super){function DoughnutChartProxy(params){var _this=_super.call(this,params)||this;return _this.recreateChart(),_this}return __extends$2Q(DoughnutChartProxy,_super),DoughnutChartProxy.prototype.createChart=function(){return AgChart.create({type:"pie",container:this.chartProxyParams.parentElement,theme:this.chartTheme})},DoughnutChartProxy.prototype.update=function(params){var _this=this;if(0!==params.fields.length){var doughnutChart=this.chart,fieldIds=params.fields.map((function(f){return f.colId})),seriesMap={};doughnutChart.series.forEach((function(series){var pieSeries=series,id=pieSeries.angleKey;agGridCommunity._.includes(fieldIds,id)&&(seriesMap[id]=pieSeries)}));var fills=this.chartTheme.palette.fills,strokes=this.chartTheme.palette.strokes,seriesOverrides=this.chartOptions[this.standaloneChartType].series,numFields=params.fields.length,offset=0;this.crossFiltering?params.fields.forEach((function(field,index){var filteredOutField=__assign$n({},field);filteredOutField.colId=field.colId+"-filtered-out",params.data.forEach((function(d){d[field.colId+"-total"]=d[field.colId]+d[filteredOutField.colId],d[field.colId]=d[field.colId]/d[field.colId+"-total"],d[filteredOutField.colId]=1}));var _a=_this.updateSeries({seriesMap,angleField:field,field:filteredOutField,seriesDefaults:seriesOverrides,index,params,fills,strokes,doughnutChart,offset,numFields,opaqueSeries:void 0}),updatedOffset=_a.updatedOffset,pieSeries=_a.pieSeries;_this.updateSeries({seriesMap,angleField:field,field,seriesDefaults:seriesOverrides,index,params,fills,strokes,doughnutChart,offset,numFields,opaqueSeries:pieSeries}),offset=updatedOffset})):params.fields.forEach((function(f,index){var updatedOffset=_this.updateSeries({seriesMap,angleField:f,field:f,seriesDefaults:seriesOverrides,index,params,fills,strokes,doughnutChart,offset,numFields,opaqueSeries:void 0}).updatedOffset;offset=updatedOffset})),doughnutChart.series=agGridCommunity._.values(seriesMap)}else this.chart.removeAllSeries()},DoughnutChartProxy.prototype.updateSeries=function(updateParams){var existingSeries=updateParams.seriesMap[updateParams.field.colId],seriesOptions=__assign$n(__assign$n({},updateParams.seriesDefaults),{type:"pie",angleKey:this.crossFiltering?updateParams.angleField.colId+"-total":updateParams.angleField.colId,radiusKey:this.crossFiltering?updateParams.field.colId:void 0,title:__assign$n(__assign$n({},updateParams.seriesDefaults.title),{text:updateParams.seriesDefaults.title.text||updateParams.field.displayName})}),pieSeries=existingSeries||AgChart.createComponent(seriesOptions,"pie.series");(pieSeries.title&&(pieSeries.title.showInLegend=updateParams.numFields>1),existingSeries||this.crossFiltering&&!pieSeries.tooltip.renderer&&this.addCrossFilteringTooltipRenderer(pieSeries),pieSeries.angleName=updateParams.field.displayName,pieSeries.labelKey=updateParams.params.category.id,pieSeries.labelName=updateParams.params.category.name,pieSeries.data=updateParams.params.data,this.crossFiltering)?(pieSeries.radiusMin=0,pieSeries.radiusMax=1,!updateParams.opaqueSeries?(pieSeries.fills=updateParams.fills.map((function(fill){return hexToRGBA(fill,"0.3")})),pieSeries.strokes=updateParams.strokes.map((function(stroke){return hexToRGBA(stroke,"0.3")})),pieSeries.showInLegend=!1):(updateParams.doughnutChart.legend.addEventListener("click",(function(event){updateParams.opaqueSeries&&updateParams.opaqueSeries.toggleSeriesItem(event.itemId,event.enabled)})),pieSeries.fills=updateParams.fills,pieSeries.strokes=updateParams.strokes,pieSeries.callout.colors=updateParams.strokes),pieSeries.highlightStyle.fill=void 0,pieSeries.addEventListener("nodeClick",this.crossFilterCallback),updateParams.doughnutChart.tooltip.delay=500):(pieSeries.fills=updateParams.fills,pieSeries.strokes=updateParams.strokes,pieSeries.callout.colors=updateParams.strokes);var offsetAmount=updateParams.numFields>1?20:40;return pieSeries.outerRadiusOffset=updateParams.offset,updateParams.offset-=offsetAmount,pieSeries.innerRadiusOffset=updateParams.offset,updateParams.offset-=offsetAmount,existingSeries||(updateParams.seriesMap[updateParams.field.colId]=pieSeries),{updatedOffset:updateParams.offset,pieSeries}},DoughnutChartProxy}(PolarChartProxy),__extends$2R=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$o=function(){return __assign$o=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$o.apply(this,arguments)},__read$N=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$l=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$N(arguments[i]));return ar},ScatterChartProxy=function(_super){function ScatterChartProxy(params){var _this=_super.call(this,params)||this;return _this.xAxisType="number",_this.yAxisType="number",_this.recreateChart(),_this}return __extends$2R(ScatterChartProxy,_super),ScatterChartProxy.prototype.createChart=function(){return AgChart.create({type:"scatter",container:this.chartProxyParams.parentElement,theme:this.chartTheme,axes:this.getAxes()})},ScatterChartProxy.prototype.update=function(params){var _this=this;if(params.fields.length<2)this.chart.removeAllSeries();else{var fields=params.fields;this.crossFiltering&&fields.forEach((function(field){var crossFilteringField=__assign$o({},field);crossFilteringField.colId=field.colId+"-filtered-out",fields.push(crossFilteringField)}));var dataDomain,paired=this.chartOptions[this.standaloneChartType].paired,seriesDefinitions=this.getSeriesDefinitions(fields,paired);this.crossFiltering&&(dataDomain=this.getCrossFilteringDataDomain(seriesDefinitions,params));var chart=this.chart,existingSeriesById=chart.series.reduceRight((function(map,series,i){return seriesDefinitions.findIndex((function(s){return s.xField.colId===series.xKey&&s.yField.colId===series.yKey&&(!s.sizeField&&!series.sizeKey||s.sizeField&&s.sizeField.colId===series.sizeKey)}))===i?map.set(series.yKey,series):chart.removeSeries(series),map}),new Map),_a=this.chartTheme.palette,fills=_a.fills,strokes=_a.strokes;if(this.crossFiltering){var fillsMod_1=[];fills.forEach((function(fill){fillsMod_1.push(fill),fillsMod_1.push(hexToRGBA(fill,"0.3"))})),fills=fillsMod_1;var strokesMod_1=[];strokes.forEach((function(stroke){strokesMod_1.push(stroke),strokesMod_1.push(hexToRGBA(stroke,"0.3"))})),strokes=strokesMod_1}var previousSeries,labelFieldDefinition=params.category.id===ChartDataModel.DEFAULT_CATEGORY?void 0:params.category,seriesOverrides=this.chartOptions[this.standaloneChartType].series;seriesDefinitions.forEach((function(seriesDefinition,index){var existingSeries=existingSeriesById.get(seriesDefinition.yField.colId),series=existingSeries||AgChart.createComponent(__assign$o(__assign$o({},seriesOverrides),{type:"scatter"}),"scatter.series");if(series){var _a=seriesDefinition,xFieldDefinition=_a.xField,yFieldDefinition=_a.yField,sizeFieldDefinition=_a.sizeField;series.title=yFieldDefinition.displayName+" vs "+xFieldDefinition.displayName,series.xKey=xFieldDefinition.colId,series.xName=xFieldDefinition.displayName,series.yKey=yFieldDefinition.colId,series.yName=yFieldDefinition.displayName,series.data=params.data,series.fill=fills[index%fills.length],series.stroke=strokes[index%strokes.length],sizeFieldDefinition?(series.sizeKey=sizeFieldDefinition.colId,series.sizeName=sizeFieldDefinition.displayName):series.sizeKey=void 0,labelFieldDefinition?(series.labelKey=labelFieldDefinition.id,series.labelName=labelFieldDefinition.name):series.labelKey=series.yKey;var isFilteredOutYKey=yFieldDefinition.colId.indexOf("-filtered-out")>-1;_this.crossFiltering&&(isFilteredOutYKey||chart.legend.addEventListener("click",(function(event){series.toggleSeriesItem(event.itemId+"-filtered-out",event.enabled)})),dataDomain&&(series.marker.domain=dataDomain),chart.tooltip.delay=500,isFilteredOutYKey&&(series.showInLegend=!1),series.addEventListener("nodeClick",_this.crossFilterCallback)),existingSeries||chart.addSeriesAfter(series,previousSeries),previousSeries=series}}))}},ScatterChartProxy.prototype.getSeriesDefinitions=function(fields,paired){if(fields.length<2)return[];var isBubbleChart="bubble"===this.chartType;if(paired)return isBubbleChart?fields.map((function(currentXField,i){return i%3==0?{xField:currentXField,yField:fields[i+1],sizeField:fields[i+2]}:null})).filter((function(x){return x&&x.yField&&x.sizeField})):fields.map((function(currentXField,i){return i%2==0?{xField:currentXField,yField:fields[i+1]}:null})).filter((function(x){return x&&x.yField}));var xField=fields[0];return isBubbleChart?fields.map((function(yField,i){return i%2==1?{xField,yField,sizeField:fields[i+1]}:null})).filter((function(x){return x&&x.sizeField})):fields.filter((function(value,i){return i>0})).map((function(yField){return{xField,yField}}))},ScatterChartProxy.prototype.getCrossFilteringDataDomain=function(seriesDefinitions,params){var domain;if(seriesDefinitions[0]&&seriesDefinitions[0].sizeField){var sizeColId_1=seriesDefinitions[0].sizeField.colId,allSizePoints_1=[];params.data.forEach((function(d){void 0!==d[sizeColId_1]&&allSizePoints_1.push(d[sizeColId_1]),void 0!==d[sizeColId_1+"-filtered-out"]&&allSizePoints_1.push(d[sizeColId_1+"-filtered-out"])})),allSizePoints_1.length>0&&(domain=[Math.min.apply(Math,__spread$l(allSizePoints_1)),Math.max.apply(Math,__spread$l(allSizePoints_1))])}return domain},ScatterChartProxy.prototype.getAxes=function(){var axisOptions=this.getAxesOptions();return[__assign$o(__assign$o({},deepMerge$1(axisOptions[this.xAxisType],axisOptions[this.xAxisType].bottom)),{type:this.xAxisType,position:ChartAxisPosition.Bottom}),__assign$o(__assign$o({},deepMerge$1(axisOptions[this.yAxisType],axisOptions[this.yAxisType].left)),{type:this.yAxisType,position:ChartAxisPosition.Left})]},ScatterChartProxy}(CartesianChartProxy),__extends$2S=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$p=function(){return __assign$p=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$p.apply(this,arguments)},__read$O=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},HistogramChartProxy=function(_super){function HistogramChartProxy(params){var _this=_super.call(this,params)||this;return _this.xAxisType="number",_this.yAxisType="number",_this.recreateChart(),_this}return __extends$2S(HistogramChartProxy,_super),HistogramChartProxy.prototype.createChart=function(){return AgChart.create({container:this.chartProxyParams.parentElement,theme:this.chartTheme,axes:this.getAxes(),series:[__assign$p(__assign$p({},this.chartOptions[this.standaloneChartType].series),{type:"histogram"})]})},HistogramChartProxy.prototype.update=function(params){var xField=__read$O(params.fields,1)[0],series=this.chart.series[0];series.data=params.data,series.xKey=xField.colId,series.xName=xField.displayName,series.areaPlot=!1,series.fill=this.chartTheme.palette.fills[0],series.stroke=this.chartTheme.palette.strokes[0]},HistogramChartProxy.prototype.getAxes=function(){var axisOptions=this.getAxesOptions();return[__assign$p(__assign$p({},deepMerge$1(axisOptions[this.xAxisType],axisOptions[this.xAxisType].bottom)),{type:this.xAxisType,position:ChartAxisPosition.Bottom}),__assign$p(__assign$p({},deepMerge$1(axisOptions[this.yAxisType],axisOptions[this.yAxisType].left)),{type:this.yAxisType,position:ChartAxisPosition.Left})]},HistogramChartProxy}(CartesianChartProxy),__extends$2T=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1j=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ChartOptionsService=function(_super){function ChartOptionsService(chartController){var _this=_super.call(this)||this;return _this.chartController=chartController,_this}return __extends$2T(ChartOptionsService,_super),ChartOptionsService.prototype.getChartType=function(){return this.chartController.getChartType()},ChartOptionsService.prototype.getChartOption=function(expression){return agGridCommunity._.get(this.getChart(),expression,void 0)},ChartOptionsService.prototype.setChartOption=function(expression,value){var _this=this;this.chartController.getChartSeriesTypes().forEach((function(optionsType){var options=agGridCommunity._.get(_this.getChartOptions(),""+optionsType,void 0);agGridCommunity._.set(options,expression,value)})),agGridCommunity._.set(this.getChart(),expression,value),this.raiseChartOptionsChangedEvent()},ChartOptionsService.prototype.getAxisProperty=function(expression){return agGridCommunity._.get(this.getChart().axes[0],expression,void 0)},ChartOptionsService.prototype.setAxisProperty=function(expression,value){var _this=this,chart=this.getChart();chart.axes.forEach((function(axis){_this.updateAxisOptions(axis,expression,value),agGridCommunity._.set(axis,expression,value)})),chart.layoutPending=!0,this.raiseChartOptionsChangedEvent()},ChartOptionsService.prototype.getLabelRotation=function(axisType){var axis=this.getAxis(axisType);return agGridCommunity._.get(axis,"label.rotation",void 0)},ChartOptionsService.prototype.setLabelRotation=function(axisType,value){var chartAxis=this.getAxis(axisType);agGridCommunity._.set(chartAxis,"label.rotation",value),this.getChart().layoutPending=!0,chartAxis&&!this.chartController.isDefaultCategorySelected()&&(this.updateAxisOptions(chartAxis,"label.rotation",value),this.raiseChartOptionsChangedEvent())},ChartOptionsService.prototype.getSeriesOption=function(expression,seriesType){var series=this.getChart().series.find((function(s){return ChartOptionsService.isMatchingSeries(seriesType,s)}));return agGridCommunity._.get(series,expression,void 0)},ChartOptionsService.prototype.setSeriesOption=function(expression,value,seriesType){var options=this.getChartOptions();options[seriesType]||(options[seriesType]={}),agGridCommunity._.set(options[seriesType].series,expression,value),this.getChart().series.forEach((function(s){ChartOptionsService.isMatchingSeries(seriesType,s)&&agGridCommunity._.set(s,expression,value)})),this.raiseChartOptionsChangedEvent()},ChartOptionsService.prototype.getPairedMode=function(){var optionsType=getSeriesType(this.getChartType());return agGridCommunity._.get(this.getChartOptions(),optionsType+".paired",void 0)},ChartOptionsService.prototype.setPairedMode=function(paired){var optionsType=getSeriesType(this.getChartType()),options=agGridCommunity._.get(this.getChartOptions(),""+optionsType,void 0);agGridCommunity._.set(options,"paired",paired)},ChartOptionsService.prototype.getChart=function(){return this.chartController.getChartProxy().getChart()},ChartOptionsService.prototype.getChartOptions=function(){return this.chartController.getChartProxy().getChartOptions()},ChartOptionsService.prototype.getAxis=function(axisType){var chart=this.getChart();if(chart.axes&&!(chart.axes.length<1))return"xAxis"===axisType?chart.axes&&"x"===chart.axes[0].direction?chart.axes[0]:chart.axes[1]:chart.axes&&"y"===chart.axes[1].direction?chart.axes[1]:chart.axes[0]},ChartOptionsService.prototype.updateAxisOptions=function(chartAxis,expression,value){var optionsType=getSeriesType(this.getChartType()),axisOptions=this.getChartOptions()[optionsType].axes;chartAxis instanceof NumberAxis?agGridCommunity._.set(axisOptions.number,expression,value):chartAxis instanceof CategoryAxis?agGridCommunity._.set(axisOptions.category,expression,value):chartAxis instanceof TimeAxis?agGridCommunity._.set(axisOptions.time,expression,value):chartAxis instanceof GroupedCategoryAxis&&agGridCommunity._.set(axisOptions.groupedCategory,expression,value)},ChartOptionsService.prototype.raiseChartOptionsChangedEvent=function(){var chartModel=this.chartController.getChartModel(),event=Object.freeze({type:agGridCommunity.Events.EVENT_CHART_OPTIONS_CHANGED,chartId:chartModel.chartId,chartType:chartModel.chartType,chartThemeName:chartModel.chartThemeName,chartOptions:chartModel.chartOptions,api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(event)},ChartOptionsService.isMatchingSeries=function(seriesType,series){return"area"===seriesType&&series instanceof AreaSeries||("bar"===seriesType&&series instanceof BarSeries||("column"===seriesType&&series instanceof BarSeries||("histogram"===seriesType&&series instanceof HistogramSeries||("line"===seriesType&&series instanceof LineSeries||("pie"===seriesType&&series instanceof PieSeries||"scatter"===seriesType&&series instanceof ScatterSeries)))))},ChartOptionsService.prototype.destroy=function(){_super.prototype.destroy.call(this)},__decorate$1j([agGridCommunity.Autowired("gridApi")],ChartOptionsService.prototype,"gridApi",void 0),__decorate$1j([agGridCommunity.Autowired("columnApi")],ChartOptionsService.prototype,"columnApi",void 0),ChartOptionsService}(agGridCommunity.BeanStub),__extends$2U=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$q=function(){return __assign$q=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$q.apply(this,arguments)},ComboChartProxy=function(_super){function ComboChartProxy(params){var _this=_super.call(this,params)||this;return _this.xAxisType=params.grouping?"groupedCategory":"category",_this.yAxisType="number",_this.recreateChart(),_this}return __extends$2U(ComboChartProxy,_super),ComboChartProxy.prototype.createChart=function(){return AgChart.create({container:this.chartProxyParams.parentElement,theme:this.chartTheme})},ComboChartProxy.prototype.update=function(params){var category=params.category,data=params.data,options={data:this.transformData(data,category.id)};this.seriesChanged(params)&&(options.series=this.getSeriesOptions(params),options.axes=this.getAxes(params)),AgChart.update(this.chart,options)},ComboChartProxy.prototype.seriesChanged=function(params){var seriesChartTypes=params.seriesChartTypes,seriesChartTypesChanged=!agGridCommunity._.areEqual(this.prevSeriesChartTypes,seriesChartTypes,(function(s1,s2){return s1.colId===s2.colId&&s1.chartType===s2.chartType&&s1.secondaryAxis===s2.secondaryAxis}));this.prevSeriesChartTypes=seriesChartTypes.map((function(s){return __assign$q({},s)}));var fields=params.fields.map((function(f){return f.colId})).join(),fieldsChanged=this.prevFields!==fields;this.prevFields=fields;var categoryId=params.category.id,categoryChanged=this.prevCategoryId!==categoryId;return this.prevCategoryId=categoryId,seriesChartTypesChanged||fieldsChanged||categoryChanged},ComboChartProxy.prototype.getSeriesOptions=function(params){var _this=this,fields=params.fields,category=params.category,seriesChartTypes=params.seriesChartTypes;return fields.map((function(field){var seriesChartType=seriesChartTypes.find((function(s){return s.colId===field.colId}));if(seriesChartType){var chartType=seriesChartType.chartType;return __assign$q(__assign$q({},_this.extractSeriesOverrides(seriesChartType)),{type:getSeriesType(chartType),xKey:category.id,yKey:field.colId,yName:field.displayName,grouped:["groupedColumn","groupedBar","groupedArea"].includes(chartType),stacked:["stackedArea","stackedColumn"].includes(chartType)})}}))},ComboChartProxy.prototype.getAxes=function(updateParams){var _this=this;this.xAxisType=updateParams.grouping?"groupedCategory":"category";var fields=updateParams?updateParams.fields:[],fieldsMap=new Map(fields.map((function(f){return[f.colId,f]}))),_a=this.getYKeys(fields,updateParams.seriesChartTypes),primaryYKeys=_a.primaryYKeys,secondaryYKeys=_a.secondaryYKeys,_b=this.getAxisOptions(),bottomOptions=_b.bottomOptions,leftOptions=_b.leftOptions,rightOptions=_b.rightOptions,axes=[__assign$q(__assign$q({},bottomOptions),{type:this.xAxisType,position:ChartAxisPosition.Bottom,gridStyle:[{strokeWidth:0}]})];return primaryYKeys.length>0&&axes.push(__assign$q(__assign$q({},leftOptions),{type:this.yAxisType,keys:primaryYKeys,position:ChartAxisPosition.Left,title:__assign$q({},deepMerge$1(leftOptions.title,{enabled:!0,text:primaryYKeys.map((function(key){var field=fieldsMap.get(key);return field?field.displayName:key})).join(" / ")}))})),secondaryYKeys.length>0&&secondaryYKeys.forEach((function(secondaryYKey,i){var field=fieldsMap.get(secondaryYKey);if(field&&field.colId===secondaryYKey){var secondaryAxisOptions=__assign$q(__assign$q({},rightOptions),{type:_this.yAxisType,keys:[secondaryYKey],position:ChartAxisPosition.Right,title:__assign$q({},deepMerge$1(rightOptions.title,{enabled:!0,text:field?field.displayName:secondaryYKey}))}),primaryYAxis=primaryYKeys.some((function(primaryYKey){return!!fieldsMap.get(primaryYKey)})),lastSecondaryAxis=i===secondaryYKeys.length-1;!primaryYAxis&&lastSecondaryAxis||(secondaryAxisOptions.gridStyle=[{strokeWidth:0}]),axes.push(secondaryAxisOptions)}})),axes},ComboChartProxy.prototype.getAxisOptions=function(){var axisOptions=this.getAxesOptions("cartesian");return{bottomOptions:deepMerge$1(axisOptions[this.xAxisType],axisOptions[this.xAxisType].bottom),leftOptions:deepMerge$1(axisOptions[this.yAxisType],axisOptions[this.yAxisType].left),rightOptions:deepMerge$1(axisOptions[this.yAxisType],axisOptions[this.yAxisType].right)}},ComboChartProxy.prototype.getYKeys=function(fields,seriesChartTypes){var primaryYKeys=[],secondaryYKeys=[];return fields.forEach((function(field){var colId=field.colId,seriesChartType=seriesChartTypes.find((function(s){return s.colId===colId}));seriesChartType&&(seriesChartType.secondaryAxis?secondaryYKeys.push(colId):primaryYKeys.push(colId))})),{primaryYKeys,secondaryYKeys}},ComboChartProxy.prototype.extractSeriesOverrides=function(seriesChartType){var seriesOverrides=this.chartOptions[getSeriesType(seriesChartType.chartType)].series;return delete seriesOverrides.yKeys,delete seriesOverrides.yNames,seriesOverrides},ComboChartProxy}(CartesianChartProxy),__extends$2V=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1k=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridChartComp=function(_super){function GridChartComp(params){var _this=_super.call(this,GridChartComp.TEMPLATE)||this;return _this.params=params,_this}return __extends$2V(GridChartComp,_super),GridChartComp.prototype.init=function(){var availableChartThemes=this.gridOptionsWrapper.getChartThemes();if(availableChartThemes.length<1)throw new Error("Cannot create chart: no chart themes are available to be used.");var chartThemeName=this.params.chartThemeName;agGridCommunity._.includes(availableChartThemes,chartThemeName)||(chartThemeName=availableChartThemes[0]);var modelParams={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},isRtl=this.gridOptionsWrapper.isEnableRtl();this.addCssClass(isRtl?"ag-rtl":"ag-ltr");var model=this.createBean(new ChartDataModel(modelParams));this.chartController=this.createManagedBean(new ChartController(model)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_UPDATED,this.refresh.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,ChartMenu.EVENT_DOWNLOAD_CHART,this.downloadChart.bind(this)),this.refresh(),this.raiseChartCreatedEvent()},GridChartComp.prototype.validateCustomThemes=function(){var suppliedThemes=this.gridOptionsWrapper.getChartThemes(),customChartThemes=this.gridOptionsWrapper.getCustomChartThemes();customChartThemes&&agGridCommunity._.getAllKeysInObjects([customChartThemes]).forEach((function(customThemeName){agGridCommunity._.includes(suppliedThemes,customThemeName)||console.warn("AG Grid: a custom chart theme with the name '"+customThemeName+"' has been supplied but not added to the 'chartThemes' list")}))},GridChartComp.prototype.createChart=function(){var _this=this;this.chartProxy&&this.chartProxy.destroy();var chartType=this.chartController.getChartType(),chartProxyParams={chartType,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsWrapper.getCustomChartThemes(),getGridOptionsChartThemeOverrides:this.getGridOptionsChartThemeOverrides.bind(this),apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:function(event,reset){_this.params.crossFilteringContext.lastSelectedChartId=reset?"":_this.chartController.getChartId(),_this.crossFilterService.filter(event,reset)},parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes()};if(this.params.chartOptionsToRestore=void 0,this.chartType=chartType,this.chartThemeName=this.chartController.getChartThemeName(),this.chartProxy=GridChartComp.createChartProxy(chartProxyParams),this.chartProxy){var canvas=this.eChart.querySelector("canvas");canvas&&canvas.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new ChartOptionsService(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}else console.warn("AG Grid: invalid chart type supplied: ",chartProxyParams.chartType)},GridChartComp.prototype.getChartThemeName=function(){return this.chartController.getChartThemeName()},GridChartComp.prototype.getChartThemes=function(){return this.chartController.getThemes()},GridChartComp.prototype.getGridOptionsChartThemeOverrides=function(){return this.gridOptionsWrapper.getChartThemeOverrides()},GridChartComp.createChartProxy=function(chartProxyParams){switch(chartProxyParams.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new BarChartProxy(chartProxyParams);case"pie":return new PieChartProxy(chartProxyParams);case"doughnut":return new DoughnutChartProxy(chartProxyParams);case"area":case"stackedArea":case"normalizedArea":return new AreaChartProxy(chartProxyParams);case"line":return new LineChartProxy(chartProxyParams);case"scatter":case"bubble":return new ScatterChartProxy(chartProxyParams);case"histogram":return new HistogramChartProxy(chartProxyParams);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new ComboChartProxy(chartProxyParams);default:throw"AG Grid: Unable to create chart as an invalid chartType = '"+chartProxyParams.chartType+"' was supplied."}},GridChartComp.prototype.addDialog=function(){var _this=this,title=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),_a=this.getBestDialogSize(),width=_a.width,height=_a.height;this.chartDialog=new agGridCommunity.AgDialog({resizable:!0,movable:!0,maximizable:!0,title,width,height,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(agGridCommunity.AgDialog.EVENT_DESTROYED,(function(){return _this.destroy()}))},GridChartComp.prototype.getBestDialogSize=function(){var popupParent=this.popupService.getPopupParent(),maxWidth=.75*agGridCommunity._.getAbsoluteWidth(popupParent),maxHeight=.75*agGridCommunity._.getAbsoluteHeight(popupParent),chart=this.chartProxy.getChart(),width=this.params.insideDialog?850:chart.width,height=this.params.insideDialog?470:chart.height;return(width>maxWidth||height>maxHeight)&&(width=Math.min(width,maxWidth),(height=Math.round(.553*width))>maxHeight&&(height=maxHeight,width=Math.min(width,Math.round(height/.553)))),{width,height}},GridChartComp.prototype.addMenu=function(){this.params.crossFiltering||(this.chartMenu=this.createBean(new ChartMenu(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))},GridChartComp.prototype.addTitleEditComp=function(){this.titleEdit=this.createBean(new TitleEdit(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)},GridChartComp.prototype.refresh=function(){this.shouldRecreateChart()&&this.createChart(),this.updateChart()},GridChartComp.prototype.shouldRecreateChart=function(){return this.chartType!==this.chartController.getChartType()||this.chartThemeName!==this.chartController.getChartThemeName()},GridChartComp.prototype.getCurrentChartType=function(){return this.chartType},GridChartComp.prototype.getChartModel=function(){return this.chartController.getChartModel()},GridChartComp.prototype.getChartImageDataURL=function(fileFormat){return this.chartProxy.getChartImageDataURL(fileFormat)},GridChartComp.prototype.updateChart=function(){var _this=this,chartProxy=this.chartProxy,fields=this.chartController.getSelectedValueColState().map((function(c){return{colId:c.colId,displayName:c.displayName}})),data=this.chartController.getChartData();if(!this.handleEmptyChart(data,fields)){var selectedDimension=this.chartController.getSelectedDimension(),chartUpdateParams={data,grouping:this.chartController.isGrouping(),category:{id:selectedDimension.colId,name:selectedDimension.displayName,chartDataType:this.getChartDataType(selectedDimension.colId)},fields,chartId:this.chartController.getChartId(),getCrossFilteringContext:function(){return _this.params.crossFilteringContext},seriesChartTypes:this.chartController.getSeriesChartTypes()};chartProxy.update(chartUpdateParams),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}},GridChartComp.prototype.getChartDataType=function(colId){var column=this.columnModel.getPrimaryColumn(colId);return column?column.getColDef().chartDataType:void 0},GridChartComp.prototype.handleEmptyChart=function(data,fields){var container=this.chartProxy.getChart().container,pivotModeDisabled=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),minFieldsRequired=1;this.chartController.isActiveXYChart()&&(minFieldsRequired="bubble"===this.chartController.getChartType()?3:2);var isEmptyChart=fields.length<minFieldsRequired||0===data.length;if(container){var isEmpty=pivotModeDisabled||isEmptyChart;agGridCommunity._.setDisplayed(this.eChart,!isEmpty),agGridCommunity._.setDisplayed(this.eEmpty,isEmpty)}return pivotModeDisabled?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):!!isEmptyChart&&(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0)},GridChartComp.prototype.downloadChart=function(){this.chartProxy.downloadChart()},GridChartComp.prototype.getChartId=function(){return this.chartController.getChartId()},GridChartComp.prototype.getUnderlyingChart=function(){return this.chartProxy.getChart()},GridChartComp.prototype.refreshCanvasSize=function(){if(this.params.insideDialog){var eChart=this.eChart;if(this.chartMenu.isVisible()){var chart=this.chartProxy.getChart();chart.height=agGridCommunity._.getInnerHeight(eChart),chart.width=agGridCommunity._.getInnerWidth(eChart)}}},GridChartComp.prototype.setActiveChartCellRange=function(focusEvent){this.getGui().contains(focusEvent.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())},GridChartComp.prototype.raiseChartCreatedEvent=function(){var event=Object.freeze({type:agGridCommunity.Events.EVENT_CHART_CREATED,chartId:this.chartController.getChartId(),api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(event)},GridChartComp.prototype.raiseChartDestroyedEvent=function(){var event=Object.freeze({type:agGridCommunity.Events.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId(),api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(event)},GridChartComp.prototype.destroy=function(){_super.prototype.destroy.call(this),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog);var eGui=this.getGui();agGridCommunity._.clearElement(eGui),agGridCommunity._.removeFromParent(eGui),this.raiseChartDestroyedEvent()},GridChartComp.TEMPLATE='<div class="ag-chart" tabindex="-1">\n            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">\n                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n            </div>\n            <div ref="eTitleEditContainer"></div>\n            <div ref="eMenuContainer" class="ag-chart-docked-container"></div>\n        </div>',__decorate$1k([agGridCommunity.RefSelector("eChart")],GridChartComp.prototype,"eChart",void 0),__decorate$1k([agGridCommunity.RefSelector("eChartContainer")],GridChartComp.prototype,"eChartContainer",void 0),__decorate$1k([agGridCommunity.RefSelector("eMenuContainer")],GridChartComp.prototype,"eMenuContainer",void 0),__decorate$1k([agGridCommunity.RefSelector("eEmpty")],GridChartComp.prototype,"eEmpty",void 0),__decorate$1k([agGridCommunity.RefSelector("eTitleEditContainer")],GridChartComp.prototype,"eTitleEditContainer",void 0),__decorate$1k([agGridCommunity.Autowired("environment")],GridChartComp.prototype,"environment",void 0),__decorate$1k([agGridCommunity.Autowired("columnModel")],GridChartComp.prototype,"columnModel",void 0),__decorate$1k([agGridCommunity.Autowired("chartCrossFilterService")],GridChartComp.prototype,"crossFilterService",void 0),__decorate$1k([agGridCommunity.Autowired("chartTranslationService")],GridChartComp.prototype,"chartTranslationService",void 0),__decorate$1k([agGridCommunity.Autowired("gridApi")],GridChartComp.prototype,"gridApi",void 0),__decorate$1k([agGridCommunity.Autowired("columnApi")],GridChartComp.prototype,"columnApi",void 0),__decorate$1k([agGridCommunity.Autowired("popupService")],GridChartComp.prototype,"popupService",void 0),__decorate$1k([agGridCommunity.PostConstruct],GridChartComp.prototype,"init",null),GridChartComp}(agGridCommunity.Component);function upgradeChartModel(model){null==model.version&&(model.version="27.1.0");(function versionParts(version){var split="string"==typeof version?version.split(".").map((function(v){return Number(v)})):[];if(3!==split.length||split.some((function(v){return isNaN(v)})))throw new Error("AG Grid - Illegal version string: "+version);return{major:split[0],minor:split[1],patch:split[2]}})(model.version);return model}var FindResult,__extends$2W=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$r=function(){return __assign$r=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$r.apply(this,arguments)},__decorate$1l=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ChartService=function(_super){function ChartService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.activeCharts=new Set,_this.activeChartComps=new Set,_this.crossFilteringContext={lastSelectedChartId:""},_this}return __extends$2W(ChartService,_super),ChartService.prototype.getChartModels=function(){var models=[];return this.activeChartComps.forEach((function(c){return models.push(function(c){return __assign$r(__assign$r({},c),{version:"27.3.0"})}(c.getChartModel()))})),models},ChartService.prototype.getChartRef=function(chartId){var chartRef;return this.activeCharts.forEach((function(cr){cr.chartId===chartId&&(chartRef=cr)})),chartRef},ChartService.prototype.getChartImageDataURL=function(params){var url;return this.activeChartComps.forEach((function(c){c.getChartId()===params.chartId&&(url=c.getChartImageDataURL(params.fileFormat))})),url},ChartService.prototype.createChartFromCurrentRange=function(chartType){void 0===chartType&&(chartType="groupedColumn");var selectedRange=this.getSelectedRange();return this.createChart(selectedRange,chartType)},ChartService.prototype.restoreChart=function(model,chartContainer){var _this=this;if(model){"27.3.0"!==model.version&&(model=upgradeChartModel(model));var params={cellRange:model.cellRange,chartType:model.chartType,chartThemeName:model.chartThemeName,chartContainer,suppressChartRanges:model.suppressChartRanges,aggFunc:model.aggFunc,unlinkChart:model.unlinkChart,seriesChartTypes:model.seriesChartTypes},getCellRange=function(cellRangeParams){return _this.rangeService?_this.rangeService.createCellRangeFromCellRangeParams(cellRangeParams):void 0};if("pivot"===model.modelType){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var cellRange_1=getCellRange({rowStartIndex:null,rowEndIndex:null,columns:this.columnModel.getAllDisplayedColumns().map((function(col){return col.getColId()}))});return cellRange_1?this.createChart(cellRange_1,params.chartType,params.chartThemeName,!0,!0,params.chartContainer,void 0,void 0,params.unlinkChart,!1,model.chartOptions):void console.warn("AG Grid - unable to create chart as there are no columns in the grid.")}var cellRange=getCellRange(params.cellRange);if(cellRange)return this.createChart(cellRange,params.chartType,params.chartThemeName,!1,params.suppressChartRanges,params.chartContainer,params.aggFunc,void 0,params.unlinkChart,!1,model.chartOptions,model.chartPalette,params.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")}else console.warn("AG Grid - unable to restore chart as no chart model is provided")},ChartService.prototype.createRangeChart=function(params){var cellRange=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(params.cellRange):void 0;if(cellRange)return this.createChart(cellRange,params.chartType,params.chartThemeName,!1,params.suppressChartRanges,params.chartContainer,params.aggFunc,params.chartThemeOverrides,params.unlinkChart,void 0,void 0,void 0,params.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")},ChartService.prototype.createPivotChart=function(params){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var chartAllRangeParams={rowStartIndex:null,rowEndIndex:null,columns:this.columnModel.getAllDisplayedColumns().map((function(col){return col.getColId()}))},cellRange=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(chartAllRangeParams):void 0;if(cellRange)return this.createChart(cellRange,params.chartType,params.chartThemeName,!0,!0,params.chartContainer,void 0,params.chartThemeOverrides,params.unlinkChart);console.warn("AG Grid - unable to create chart as there are no columns in the grid.")},ChartService.prototype.createCrossFilterChart=function(params){var cellRange=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(params.cellRange):void 0;if(cellRange){var suppressChartRanges=!(void 0!==params.suppressChartRanges&&null!==params.suppressChartRanges)||params.suppressChartRanges;return this.createChart(cellRange,params.chartType,params.chartThemeName,!1,suppressChartRanges,params.chartContainer,params.aggFunc,params.chartThemeOverrides,params.unlinkChart,!0)}console.warn("AG Grid - unable to create chart as no range is selected")},ChartService.prototype.createChart=function(cellRange,chartType,chartThemeName,pivotChart,suppressChartRanges,container,aggFunc,chartThemeOverrides,unlinkChart,crossFiltering,chartOptionsToRestore,chartPaletteToRestore,seriesChartTypes){var _this=this;void 0===pivotChart&&(pivotChart=!1),void 0===suppressChartRanges&&(suppressChartRanges=!1),void 0===unlinkChart&&(unlinkChart=!1),void 0===crossFiltering&&(crossFiltering=!1);var createChartContainerFunc=this.gridOptionsWrapper.getCreateChartContainerFunc(),params={chartId:this.generateId(),pivotChart,cellRange,chartType,chartThemeName,insideDialog:!(container||createChartContainerFunc),suppressChartRanges,aggFunc,chartThemeOverrides,unlinkChart,crossFiltering,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore,chartPaletteToRestore,seriesChartTypes},chartComp=new GridChartComp(params);this.context.createBean(chartComp);var chartRef=this.createChartRef(chartComp);if(container){container.appendChild(chartComp.getGui());var theme=this.environment.getTheme();theme.el&&!theme.el.contains(container)&&container.classList.add(theme.theme)}else createChartContainerFunc?createChartContainerFunc(chartRef):chartComp.addEventListener(GridChartComp.EVENT_DESTROYED,(function(){_this.activeChartComps.delete(chartComp),_this.activeCharts.delete(chartRef)}));return chartRef},ChartService.prototype.createChartRef=function(chartComp){var _this=this,chartRef={destroyChart:function(){_this.activeCharts.has(chartRef)&&(_this.context.destroyBean(chartComp),_this.activeChartComps.delete(chartComp),_this.activeCharts.delete(chartRef))},chartElement:chartComp.getGui(),chart:chartComp.getUnderlyingChart(),chartId:chartComp.getChartModel().chartId};return this.activeCharts.add(chartRef),this.activeChartComps.add(chartComp),chartRef},ChartService.prototype.getSelectedRange=function(){var ranges=this.rangeService.getCellRanges();return ranges.length>0?ranges[0]:{}},ChartService.prototype.generateId=function(){return"id-"+Math.random().toString(36).substr(2,16)},ChartService.prototype.destroyAllActiveCharts=function(){this.activeCharts.forEach((function(chart){return chart.destroyChart()}))},__decorate$1l([agGridCommunity.Optional("rangeService")],ChartService.prototype,"rangeService",void 0),__decorate$1l([agGridCommunity.Autowired("columnModel")],ChartService.prototype,"columnModel",void 0),__decorate$1l([agGridCommunity.Autowired("environment")],ChartService.prototype,"environment",void 0),__decorate$1l([agGridCommunity.PreDestroy],ChartService.prototype,"destroyAllActiveCharts",null),ChartService=__decorate$1l([agGridCommunity.Bean("chartService")],ChartService)}(agGridCommunity.BeanStub),__extends$2X=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1m=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ChartTranslationService=function(_super){function ChartTranslationService(){return null!==_super&&_super.apply(this,arguments)||this}var ChartTranslationService_1;return __extends$2X(ChartTranslationService,_super),ChartTranslationService_1=ChartTranslationService,ChartTranslationService.prototype.translate=function(toTranslate,defaultText){return this.gridOptionsWrapper.getLocaleTextFunc()(toTranslate,ChartTranslationService_1.DEFAULT_TRANSLATIONS[toTranslate]||defaultText)},ChartTranslationService.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"},ChartTranslationService=ChartTranslationService_1=__decorate$1m([agGridCommunity.Bean("chartTranslationService")],ChartTranslationService)}(agGridCommunity.BeanStub),__extends$2Y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1n=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ChartCrossFilterService=function(_super){function ChartCrossFilterService(){return null!==_super&&_super.apply(this,arguments)||this}var ChartCrossFilterService_1;return __extends$2Y(ChartCrossFilterService,_super),ChartCrossFilterService_1=ChartCrossFilterService,ChartCrossFilterService.prototype.filter=function(event,reset){void 0===reset&&(reset=!1);var filterModel=this.gridApi.getFilterModel();if(reset)this.resetFilters(filterModel);else{var colId=ChartCrossFilterService_1.extractFilterColId(event);this.isValidColumnFilter(colId)?this.updateFilters(filterModel,event,colId):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+colId+"'")}},ChartCrossFilterService.prototype.resetFilters=function(filterModel){Object.keys(filterModel).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())},ChartCrossFilterService.prototype.updateFilters=function(filterModel,event,colId){var _a,dataKey=ChartCrossFilterService_1.extractFilterColId(event),rawValue=event.datum[dataKey];if(void 0!==rawValue){var selectedValue=rawValue.toString();if(event.event.metaKey||event.event.ctrlKey){var existingGridValues=this.getCurrentGridValuesForCategory(colId),updatedValues=void 0;agGridCommunity._.includes(existingGridValues,selectedValue)?updatedValues=existingGridValues.filter((function(v){return v!==selectedValue})):(updatedValues=existingGridValues).push(selectedValue),filterModel[colId]=this.getUpdatedFilterModel(colId,updatedValues)}else{updatedValues=[selectedValue];(_a={})[colId]=this.getUpdatedFilterModel(colId,updatedValues),filterModel=_a}this.gridApi.setFilterModel(filterModel)}},ChartCrossFilterService.prototype.getUpdatedFilterModel=function(colId,updatedValues){return"agMultiColumnFilter"===this.getColumnFilterType(colId)?{filterType:"multi",filterModels:[null,{filterType:"set",values:updatedValues}]}:{filterType:"set",values:updatedValues}},ChartCrossFilterService.prototype.getCurrentGridValuesForCategory=function(colId){var _this=this,filteredValues=[],column=this.getColumnById(colId);return this.gridApi.forEachNodeAfterFilter((function(rowNode){if(column&&!rowNode.group){var value=_this.valueService.getValue(column,rowNode)+"";filteredValues.includes(value)||filteredValues.push(value)}})),filteredValues},ChartCrossFilterService.extractFilterColId=function(event){return event.xKey?event.xKey:event.labelKey},ChartCrossFilterService.prototype.isValidColumnFilter=function(colId){colId.indexOf("-filtered-out")&&(colId=colId.replace("-filtered-out",""));var filterType=this.getColumnFilterType(colId);return"boolean"==typeof filterType?filterType:agGridCommunity._.includes(["agSetColumnFilter","agMultiColumnFilter"],filterType)},ChartCrossFilterService.prototype.getColumnFilterType=function(colId){var gridColumn=this.getColumnById(colId);if(gridColumn){var colDef=gridColumn.getColDef();return null!=colDef.filter?colDef.filter:colDef.filterFramework}},ChartCrossFilterService.prototype.getColumnById=function(colId){return this.columnModel.getGridColumn(colId)},__decorate$1n([agGridCommunity.Autowired("gridApi")],ChartCrossFilterService.prototype,"gridApi",void 0),__decorate$1n([agGridCommunity.Autowired("columnModel")],ChartCrossFilterService.prototype,"columnModel",void 0),__decorate$1n([agGridCommunity.Autowired("valueService")],ChartCrossFilterService.prototype,"valueService",void 0),ChartCrossFilterService=ChartCrossFilterService_1=__decorate$1n([agGridCommunity.Bean("chartCrossFilterService")],ChartCrossFilterService)}(agGridCommunity.BeanStub),__extends$2Z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1o=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$P=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$m=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$P(arguments[i]));return ar},__values$f=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},RangeService=function(_super){function RangeService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.cellRanges=[],_this.bodyScrollListener=_this.onBodyScroll.bind(_this),_this.dragging=!1,_this}return __extends$2Z(RangeService,_super),RangeService.prototype.init=function(){var _this=this;this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,(function(){return _this.onColumnsChanged()})),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){return _this.removeAllCellRanges()})),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return _this.removeAllCellRanges()})),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGED,(function(){return _this.removeAllCellRanges()})),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady((function(){var gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl();_this.autoScrollService=new agGridCommunity.AutoScrollService({scrollContainer:gridBodyCtrl.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:function(){return gridBodyCtrl.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(position){return gridBodyCtrl.getScrollFeature().setVerticalScrollPosition(position)},getHorizontalPosition:function(){return gridBodyCtrl.getScrollFeature().getHScrollPosition().left},setHorizontalPosition:function(position){return gridBodyCtrl.getScrollFeature().setHorizontalScrollPosition(position)},shouldSkipVerticalScroll:function(){return _this.gridOptionsWrapper.getDomLayout()!==agGridCommunity.Constants.DOM_LAYOUT_NORMAL},shouldSkipHorizontalScroll:function(){return gridBodyCtrl.getScrollFeature().isHorizontalScrollShowing()}})}))},RangeService.prototype.onColumnsChanged=function(){var _this=this;this.refreshLastRangeStart();var allColumns=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach((function(cellRange){var beforeCols=cellRange.columns;cellRange.columns=cellRange.columns.filter((function(col){return col.isVisible()&&-1!==allColumns.indexOf(col)})),!agGridCommunity._.areEqual(beforeCols,cellRange.columns)&&_this.dispatchChangedEvent(!1,!0,cellRange.id)}));var countBefore=this.cellRanges.length;this.cellRanges=this.cellRanges.filter((function(range){return range.columns.length>0})),countBefore>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)},RangeService.prototype.refreshLastRangeStart=function(){var lastRange=agGridCommunity._.last(this.cellRanges);lastRange&&this.refreshRangeStart(lastRange)},RangeService.prototype.isContiguousRange=function(cellRange){var rangeColumns=cellRange.columns;if(!rangeColumns.length)return!1;var allColumns=this.columnModel.getAllDisplayedColumns(),allPositions=rangeColumns.map((function(c){return allColumns.indexOf(c)})).sort((function(a,b){return a-b}));return agGridCommunity._.last(allPositions)-allPositions[0]+1===rangeColumns.length},RangeService.prototype.getRangeStartRow=function(cellRange){return cellRange.startRow&&cellRange.endRow?this.rowPositionUtils.before(cellRange.startRow,cellRange.endRow)?cellRange.startRow:cellRange.endRow:{rowIndex:0,rowPinned:this.pinnedRowModel.getPinnedTopRowCount()>0?agGridCommunity.Constants.PINNED_TOP:null}},RangeService.prototype.getRangeEndRow=function(cellRange){if(cellRange.startRow&&cellRange.endRow)return this.rowPositionUtils.before(cellRange.startRow,cellRange.endRow)?cellRange.endRow:cellRange.startRow;var pinnedBottomRowCount=this.pinnedRowModel.getPinnedBottomRowCount();return pinnedBottomRowCount>0?{rowIndex:pinnedBottomRowCount-1,rowPinned:agGridCommunity.Constants.PINNED_BOTTOM}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}},RangeService.prototype.setRangeToCell=function(cell,appendRange){if(void 0===appendRange&&(appendRange=!1),this.gridOptionsWrapper.isEnableRangeSelection()){var columns=this.calculateColumnsBetween(cell.column,cell.column);if(columns){(this.gridOptionsWrapper.isSuppressMultiRangeSelection()||!appendRange||agGridCommunity._.missing(this.cellRanges))&&this.removeAllCellRanges(!0);for(var cellRange,rowForCell={rowIndex:cell.rowIndex,rowPinned:cell.rowPinned},i=0;i<this.cellRanges.length;i++){var range=this.cellRanges[i];if(range.columns&&1===range.columns.length&&range.columns[0]===cell.column&&this.rowPositionUtils.sameRow(rowForCell,range.startRow)&&this.rowPositionUtils.sameRow(rowForCell,range.endRow)){cellRange=range;break}}cellRange?agGridCommunity._.last(this.cellRanges)!==cellRange&&(agGridCommunity._.removeFromArray(this.cellRanges,cellRange),this.cellRanges.push(cellRange)):(cellRange={startRow:rowForCell,endRow:rowForCell,columns,startColumn:cell.column},this.cellRanges.push(cellRange)),this.setNewestRangeStartCell(cell),this.onDragStop(),this.dispatchChangedEvent(!0,!0,cellRange.id)}}},RangeService.prototype.extendLatestRangeToCell=function(cellPosition){if(!this.isEmpty()&&this.newestRangeStartCell){var cellRange=agGridCommunity._.last(this.cellRanges);this.updateRangeEnd(cellRange,cellPosition)}},RangeService.prototype.updateRangeEnd=function(cellRange,cellPosition,silent){void 0===silent&&(silent=!1);var endColumn=cellPosition.column,colsToAdd=this.calculateColumnsBetween(cellRange.startColumn,endColumn);colsToAdd&&!this.isLastCellOfRange(cellRange,cellPosition)&&(cellRange.columns=colsToAdd,cellRange.endRow={rowIndex:cellPosition.rowIndex,rowPinned:cellPosition.rowPinned},silent||this.dispatchChangedEvent(!0,!0,cellRange.id))},RangeService.prototype.refreshRangeStart=function(cellRange){var startColumn=cellRange.startColumn,columns=cellRange.columns,moveColInCellRange=function(colToMove,moveToFront){var otherCols=cellRange.columns.filter((function(col){return col!==colToMove}));colToMove?(cellRange.startColumn=colToMove,cellRange.columns=moveToFront?__spread$m([colToMove],otherCols):__spread$m(otherCols,[colToMove])):cellRange.columns=otherCols},_a=this.getRangeEdgeColumns(cellRange),left=_a.left,right=_a.right;startColumn===columns[0]&&startColumn!==left?moveColInCellRange(left,!0):startColumn===agGridCommunity._.last(columns)&&startColumn===right&&moveColInCellRange(right,!1)},RangeService.prototype.getRangeEdgeColumns=function(cellRange){var allColumns=this.columnModel.getAllDisplayedColumns(),allIndices=cellRange.columns.map((function(c){return allColumns.indexOf(c)})).filter((function(i){return i>-1})).sort((function(a,b){return a-b}));return{left:allColumns[allIndices[0]],right:allColumns[agGridCommunity._.last(allIndices)]}},RangeService.prototype.extendLatestRangeInDirection=function(event){if(!this.isEmpty()&&this.newestRangeStartCell){var key=event.key,ctrlKey=event.ctrlKey||event.metaKey,lastRange=agGridCommunity._.last(this.cellRanges),startCell=this.newestRangeStartCell,firstCol=lastRange.columns[0],lastCol=agGridCommunity._.last(lastRange.columns),endCellIndex=lastRange.endRow.rowIndex,endCellFloating=lastRange.endRow.rowPinned,endCell={column:startCell.column===firstCol?lastCol:firstCol,rowIndex:endCellIndex,rowPinned:endCellFloating},newEndCell=this.cellNavigationService.getNextCellToFocus(key,endCell,ctrlKey);if(newEndCell)return this.setCellRange({rowStartIndex:startCell.rowIndex,rowStartPinned:startCell.rowPinned,rowEndIndex:newEndCell.rowIndex,rowEndPinned:newEndCell.rowPinned,columnStart:startCell.column,columnEnd:newEndCell.column}),newEndCell}},RangeService.prototype.setCellRange=function(params){this.gridOptionsWrapper.isEnableRangeSelection()&&(this.removeAllCellRanges(!0),this.addCellRange(params))},RangeService.prototype.setCellRanges=function(cellRanges){var _this=this;agGridCommunity._.shallowCompare(this.cellRanges,cellRanges)||(this.removeAllCellRanges(!0),cellRanges.forEach((function(newRange){newRange.columns&&newRange.startRow&&_this.setNewestRangeStartCell({rowIndex:newRange.startRow.rowIndex,rowPinned:newRange.startRow.rowPinned,column:newRange.columns[0]}),_this.cellRanges.push(newRange)})),this.dispatchChangedEvent(!1,!0))},RangeService.prototype.setNewestRangeStartCell=function(position){this.newestRangeStartCell=position},RangeService.prototype.createCellRangeFromCellRangeParams=function(params){var columns,_this=this,startsOnTheRight=!1;if(params.columns)columns=params.columns.map((function(c){return _this.columnModel.getColumnWithValidation(c)})).filter((function(c){return c}));else{var columnStart=this.columnModel.getColumnWithValidation(params.columnStart),columnEnd=this.columnModel.getColumnWithValidation(params.columnEnd);if(!columnStart||!columnEnd)return;(columns=this.calculateColumnsBetween(columnStart,columnEnd))&&columns.length&&(startsOnTheRight=columns[0]!==columnStart)}if(columns)return{startRow:null!=params.rowStartIndex?{rowIndex:params.rowStartIndex,rowPinned:params.rowStartPinned||null}:void 0,endRow:null!=params.rowEndIndex?{rowIndex:params.rowEndIndex,rowPinned:params.rowEndPinned||null}:void 0,columns,startColumn:startsOnTheRight?agGridCommunity._.last(columns):columns[0]}},RangeService.prototype.addCellRange=function(params){if(this.gridOptionsWrapper.isEnableRangeSelection()){var newRange=this.createCellRangeFromCellRangeParams(params);newRange&&(newRange.startRow&&this.setNewestRangeStartCell({rowIndex:newRange.startRow.rowIndex,rowPinned:newRange.startRow.rowPinned,column:newRange.startColumn}),this.cellRanges.push(newRange),this.dispatchChangedEvent(!1,!0,newRange.id))}},RangeService.prototype.getCellRanges=function(){return this.cellRanges},RangeService.prototype.isEmpty=function(){return 0===this.cellRanges.length},RangeService.prototype.isMoreThanOneCell=function(){var len=this.cellRanges.length;if(0===len)return!1;if(len>1)return!0;var range=this.cellRanges[0],startRow=this.getRangeStartRow(range),endRow=this.getRangeEndRow(range);return startRow.rowPinned!==endRow.rowPinned||startRow.rowIndex!==endRow.rowIndex||1!==range.columns.length},RangeService.prototype.areAllRangesAbleToMerge=function(){var e_1,_a,columnsString,_this=this,rowToColumnMap=new Map;if(this.cellRanges.length<=1)return!0;this.cellRanges.forEach((function(range){for(var topRow=_this.getRangeStartRow(range),bottomRow=_this.getRangeEndRow(range),currentRow=topRow,_loop_1=function(){var rowName=(currentRow.rowPinned||"normal")+"_"+currentRow.rowIndex,columns=rowToColumnMap.get(rowName),currentRangeColIds=range.columns.map((function(col){return col.getId()}));if(columns){var filteredColumns=currentRangeColIds.filter((function(col){return-1===columns.indexOf(col)}));columns.push.apply(columns,__spread$m(filteredColumns))}else rowToColumnMap.set(rowName,currentRangeColIds);if(_this.rowPositionUtils.sameRow(currentRow,bottomRow))return"break";currentRow=_this.cellNavigationService.getRowBelow(currentRow)};currentRow;){if("break"===_loop_1())break}}));try{for(var _b=__values$f(rowToColumnMap.values()),_c=_b.next();!_c.done;_c=_b.next()){var currentValString=_c.value.sort().join();if(void 0!==columnsString){if(columnsString!==currentValString)return!1}else columnsString=currentValString}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return!0},RangeService.prototype.removeAllCellRanges=function(silent){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,silent||this.dispatchChangedEvent(!1,!0))},RangeService.prototype.onBodyScroll=function(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)},RangeService.prototype.isCellInAnyRange=function(cell){return this.getCellRangeCount(cell)>0},RangeService.prototype.isCellInSpecificRange=function(cell,range){var columnInRange=null!==range.columns&&agGridCommunity._.includes(range.columns,cell.column),rowInRange=this.isRowInRange(cell.rowIndex,cell.rowPinned,range);return columnInRange&&rowInRange},RangeService.prototype.isLastCellOfRange=function(cellRange,cell){var startRow=cellRange.startRow,endRow=cellRange.endRow,lastRow=this.rowPositionUtils.before(startRow,endRow)?endRow:startRow,isLastRow=cell.rowIndex===lastRow.rowIndex&&cell.rowPinned===lastRow.rowPinned,rangeFirstIndexColumn=cellRange.columns[0],rangeLastIndexColumn=agGridCommunity._.last(cellRange.columns),lastRangeColumn=cellRange.startColumn===rangeFirstIndexColumn?rangeLastIndexColumn:rangeFirstIndexColumn;return cell.column===lastRangeColumn&&isLastRow},RangeService.prototype.isBottomRightCell=function(cellRange,cell){var allColumns=this.columnModel.getAllDisplayedColumns(),allPositions=cellRange.columns.map((function(c){return allColumns.indexOf(c)})).sort((function(a,b){return a-b})),startRow=cellRange.startRow,endRow=cellRange.endRow,lastRow=this.rowPositionUtils.before(startRow,endRow)?endRow:startRow,isRightColumn=allColumns.indexOf(cell.column)===agGridCommunity._.last(allPositions),isLastRow=cell.rowIndex===lastRow.rowIndex&&agGridCommunity._.makeNull(cell.rowPinned)===agGridCommunity._.makeNull(lastRow.rowPinned);return isRightColumn&&isLastRow},RangeService.prototype.getCellRangeCount=function(cell){var _this=this;return this.isEmpty()?0:this.cellRanges.filter((function(cellRange){return _this.isCellInSpecificRange(cell,cellRange)})).length},RangeService.prototype.isRowInRange=function(rowIndex,floating,cellRange){var firstRow=this.getRangeStartRow(cellRange),lastRow=this.getRangeEndRow(cellRange),thisRow={rowIndex,rowPinned:floating||null},equalsFirstRow=thisRow.rowIndex===firstRow.rowIndex&&thisRow.rowPinned==firstRow.rowPinned,equalsLastRow=thisRow.rowIndex===lastRow.rowIndex&&thisRow.rowPinned==lastRow.rowPinned;if(equalsFirstRow||equalsLastRow)return!0;var afterFirstRow=!this.rowPositionUtils.before(thisRow,firstRow),beforeLastRow=this.rowPositionUtils.before(thisRow,lastRow);return afterFirstRow&&beforeLastRow},RangeService.prototype.getDraggingRange=function(){return this.draggingRange},RangeService.prototype.onDragStart=function(mouseEvent){if(this.gridOptionsWrapper.isEnableRangeSelection()){var ctrlKey=mouseEvent.ctrlKey,metaKey=mouseEvent.metaKey,shiftKey=mouseEvent.shiftKey,multiKeyPressed=ctrlKey||metaKey,multiSelectKeyPressed=!!!this.gridOptionsWrapper.isSuppressMultiRangeSelection()&&multiKeyPressed,extendRange=shiftKey&&agGridCommunity._.existsAndNotEmpty(this.cellRanges);if(multiSelectKeyPressed||extendRange&&!agGridCommunity._.exists(agGridCommunity._.last(this.cellRanges).type)||this.removeAllCellRanges(!0),this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),this.updateValuesOnMove(mouseEvent),this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=mouseEvent,extendRange||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=agGridCommunity._.last(this.cellRanges);else{var mouseRowPosition={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:mouseRowPosition,endRow:mouseRowPosition,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}},RangeService.prototype.updateValuesOnMove=function(mouseEvent){var cell=this.mouseEventService.getCellPositionForEvent(mouseEvent);this.cellHasChanged=!1,!cell||this.lastCellHovered&&this.cellPositionUtils.equals(cell,this.lastCellHovered)||(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=cell)},RangeService.prototype.onDragging=function(mouseEvent){var _this=this;if(this.dragging&&mouseEvent){this.lastMouseEvent=mouseEvent;var cellPosition=this.lastCellHovered,isMouseAndStartInPinned=function(position){return cellPosition&&cellPosition.rowPinned===position&&_this.newestRangeStartCell.rowPinned===position},skipVerticalScroll=isMouseAndStartInPinned("top")||isMouseAndStartInPinned("bottom");if(this.autoScrollService.check(mouseEvent,skipVerticalScroll),this.cellHasChanged){var columns=this.calculateColumnsBetween(this.newestRangeStartCell.column,cellPosition.column);columns&&(this.draggingRange.endRow={rowIndex:cellPosition.rowIndex,rowPinned:cellPosition.rowPinned},this.draggingRange.columns=columns,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}}},RangeService.prototype.onDragStop=function(){if(this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0),this.dragging){var id=this.draggingRange.id;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.dispatchChangedEvent(!1,!0,id)}},RangeService.prototype.dispatchChangedEvent=function(started,finished,id){var event=Object.freeze({type:agGridCommunity.Events.EVENT_RANGE_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi,started,finished,id});this.eventService.dispatchEvent(event)},RangeService.prototype.calculateColumnsBetween=function(columnFrom,columnTo){var allColumns=this.columnModel.getAllDisplayedColumns(),isSameColumn=columnFrom===columnTo,fromIndex=allColumns.indexOf(columnFrom);if(fromIndex<0)console.warn("AG Grid: column "+columnFrom.getId()+" is not visible");else{var toIndex=isSameColumn?fromIndex:allColumns.indexOf(columnTo);if(!(toIndex<0)){if(isSameColumn)return[columnFrom];for(var firstIndex=Math.min(fromIndex,toIndex),lastIndex=firstIndex===fromIndex?toIndex:fromIndex,columns=[],i=firstIndex;i<=lastIndex;i++)columns.push(allColumns[i]);return columns}console.warn("AG Grid: column "+columnTo.getId()+" is not visible")}},__decorate$1o([agGridCommunity.Autowired("rowModel")],RangeService.prototype,"rowModel",void 0),__decorate$1o([agGridCommunity.Autowired("columnModel")],RangeService.prototype,"columnModel",void 0),__decorate$1o([agGridCommunity.Autowired("mouseEventService")],RangeService.prototype,"mouseEventService",void 0),__decorate$1o([agGridCommunity.Autowired("columnApi")],RangeService.prototype,"columnApi",void 0),__decorate$1o([agGridCommunity.Autowired("gridApi")],RangeService.prototype,"gridApi",void 0),__decorate$1o([agGridCommunity.Autowired("cellNavigationService")],RangeService.prototype,"cellNavigationService",void 0),__decorate$1o([agGridCommunity.Autowired("pinnedRowModel")],RangeService.prototype,"pinnedRowModel",void 0),__decorate$1o([agGridCommunity.Autowired("rowPositionUtils")],RangeService.prototype,"rowPositionUtils",void 0),__decorate$1o([agGridCommunity.Autowired("cellPositionUtils")],RangeService.prototype,"cellPositionUtils",void 0),__decorate$1o([agGridCommunity.Autowired("ctrlsService")],RangeService.prototype,"ctrlsService",void 0),__decorate$1o([agGridCommunity.PostConstruct],RangeService.prototype,"init",null),RangeService=__decorate$1o([agGridCommunity.Bean("rangeService")],RangeService)}(agGridCommunity.BeanStub),__extends$2_=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1p=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AbstractSelectionHandle=function(_super){function AbstractSelectionHandle(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.changedCalculatedValues=!1,_this.dragging=!1,_this.shouldDestroyOnEndDragging=!1,_this}return __extends$2_(AbstractSelectionHandle,_super),AbstractSelectionHandle.prototype.init=function(){var _this=this;this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:function(e){_this.dragging=!0,_this.rangeService.autoScrollService.check(e),_this.changedCalculatedValues&&(_this.onDrag(e),_this.changedCalculatedValues=!1)},onDragStop:function(e){_this.dragging=!1,_this.onDragEnd(e),_this.clearValues(),_this.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(_this.getDraggingCssClass()),_this.shouldDestroyOnEndDragging&&_this.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))},AbstractSelectionHandle.prototype.isDragging=function(){return this.dragging},AbstractSelectionHandle.prototype.getCellCtrl=function(){return this.cellCtrl},AbstractSelectionHandle.prototype.setCellCtrl=function(cellComp){this.cellCtrl=cellComp},AbstractSelectionHandle.prototype.getCellRange=function(){return this.cellRange},AbstractSelectionHandle.prototype.setCellRange=function(range){this.cellRange=range},AbstractSelectionHandle.prototype.getRangeStartRow=function(){return this.rangeStartRow},AbstractSelectionHandle.prototype.setRangeStartRow=function(row){this.rangeStartRow=row},AbstractSelectionHandle.prototype.getRangeEndRow=function(){return this.rangeEndRow},AbstractSelectionHandle.prototype.setRangeEndRow=function(row){this.rangeEndRow=row},AbstractSelectionHandle.prototype.getLastCellHovered=function(){return this.lastCellHovered},AbstractSelectionHandle.prototype.preventRangeExtension=function(e){e.preventDefault(),e.stopPropagation()},AbstractSelectionHandle.prototype.onDragStart=function(e){this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())},AbstractSelectionHandle.prototype.getDraggingCssClass=function(){return"ag-dragging-"+(this.type===agGridCommunity.SelectionHandleType.FILL?"fill":"range")+"-handle"},AbstractSelectionHandle.prototype.updateValuesOnMove=function(e){var cell=this.mouseEventService.getCellPositionForEvent(e);!cell||this.lastCellHovered&&this.cellPositionUtils.equals(cell,this.lastCellHovered)||(this.lastCellHovered=cell,this.changedCalculatedValues=!0)},AbstractSelectionHandle.prototype.getType=function(){return this.type},AbstractSelectionHandle.prototype.refresh=function(cellCtrl){var oldCellComp=this.getCellCtrl(),eGui=this.getGui(),cellRange=agGridCommunity._.last(this.rangeService.getCellRanges()),start=cellRange.startRow,end=cellRange.endRow;start&&end&&(this.rowPositionUtils.before(end,start)?(this.setRangeStartRow(end),this.setRangeEndRow(start)):(this.setRangeStartRow(start),this.setRangeEndRow(end)));if(oldCellComp!==cellCtrl||!agGridCommunity._.isVisible(eGui)){this.setCellCtrl(cellCtrl);var eParentOfValue=cellCtrl.getComp().getParentOfValue();eParentOfValue&&eParentOfValue.appendChild(eGui)}this.setCellRange(cellRange)},AbstractSelectionHandle.prototype.clearValues=function(){this.lastCellHovered=void 0,this.removeListeners()},AbstractSelectionHandle.prototype.removeListeners=function(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)},AbstractSelectionHandle.prototype.destroy=function(){if(!this.shouldDestroyOnEndDragging&&this.isDragging())return agGridCommunity._.setDisplayed(this.getGui(),!1),void(this.shouldDestroyOnEndDragging=!0);this.shouldDestroyOnEndDragging=!1,_super.prototype.destroy.call(this),this.removeListeners();var eGui=this.getGui();eGui.parentElement&&eGui.parentElement.removeChild(eGui)},__decorate$1p([agGridCommunity.Autowired("rowRenderer")],AbstractSelectionHandle.prototype,"rowRenderer",void 0),__decorate$1p([agGridCommunity.Autowired("dragService")],AbstractSelectionHandle.prototype,"dragService",void 0),__decorate$1p([agGridCommunity.Autowired("rangeService")],AbstractSelectionHandle.prototype,"rangeService",void 0),__decorate$1p([agGridCommunity.Autowired("mouseEventService")],AbstractSelectionHandle.prototype,"mouseEventService",void 0),__decorate$1p([agGridCommunity.Autowired("columnModel")],AbstractSelectionHandle.prototype,"columnModel",void 0),__decorate$1p([agGridCommunity.Autowired("cellNavigationService")],AbstractSelectionHandle.prototype,"cellNavigationService",void 0),__decorate$1p([agGridCommunity.Autowired("navigationService")],AbstractSelectionHandle.prototype,"navigationService",void 0),__decorate$1p([agGridCommunity.Autowired("rowPositionUtils")],AbstractSelectionHandle.prototype,"rowPositionUtils",void 0),__decorate$1p([agGridCommunity.Autowired("cellPositionUtils")],AbstractSelectionHandle.prototype,"cellPositionUtils",void 0),__decorate$1p([agGridCommunity.Autowired("ctrlsService")],AbstractSelectionHandle.prototype,"ctrlsService",void 0),__decorate$1p([agGridCommunity.PostConstruct],AbstractSelectionHandle.prototype,"init",null),AbstractSelectionHandle}(agGridCommunity.Component),__extends$2$=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$s=function(){return __assign$s=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$s.apply(this,arguments)},__decorate$1q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$Q=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$n=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$Q(arguments[i]));return ar},FillHandle=function(_super){function FillHandle(){var _this=_super.call(this,FillHandle.TEMPLATE)||this;return _this.markedCells=[],_this.cellValues=[],_this.isUp=!1,_this.isLeft=!1,_this.isReduce=!1,_this.type=agGridCommunity.SelectionHandleType.FILL,_this}return __extends$2$(FillHandle,_super),FillHandle.prototype.updateValuesOnMove=function(e){_super.prototype.updateValuesOnMove.call(this,e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));var direction,_a=this.initialXY,x=_a.x,y=_a.y,_b=this.mouseEventService.getNormalisedPosition(e),newX=_b.x,newY=_b.y,diffX=Math.abs(x-newX),diffY=Math.abs(y-newY),allowedDirection=this.gridOptionsWrapper.getFillHandleDirection();(direction="xy"===allowedDirection?diffX>diffY?"x":"y":allowedDirection)!==this.dragAxis&&(this.dragAxis=direction,this.changedCalculatedValues=!0)},FillHandle.prototype.onDrag=function(e){if(!this.initialPosition){var cellCtrl=this.getCellCtrl();if(!cellCtrl)return;this.initialPosition=cellCtrl.getCellPosition()}var lastCellHovered=this.getLastCellHovered();lastCellHovered&&this.markPathFrom(this.initialPosition,lastCellHovered)},FillHandle.prototype.onDragEnd=function(e){if(this.initialXY=null,this.markedCells.length){var finalRange,isX="x"===this.dragAxis,initialRange=this.getCellRange(),colLen=initialRange.columns.length,rangeStartRow=this.getRangeStartRow(),rangeEndRow=this.getRangeEndRow();if(this.isUp||this.isLeft){var startRow=isX?rangeStartRow:this.lastCellMarked;finalRange=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:startRow.rowIndex,rowStartPinned:startRow.rowPinned,columnStart:isX?this.lastCellMarked.column:initialRange.columns[0],rowEndIndex:rangeEndRow.rowIndex,rowEndPinned:rangeEndRow.rowPinned,columnEnd:initialRange.columns[colLen-1]})}else finalRange=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:rangeStartRow.rowIndex,rowStartPinned:rangeStartRow.rowPinned,columnStart:initialRange.columns[0],rowEndIndex:isX?rangeEndRow.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:isX?rangeEndRow.rowPinned:this.lastCellMarked.rowPinned,columnEnd:isX?this.lastCellMarked.column:initialRange.columns[colLen-1]});finalRange&&(this.raiseFillStartEvent(),this.handleValueChanged(initialRange,finalRange,e),this.rangeService.setCellRanges([finalRange]),this.raiseFillEndEvent(initialRange,finalRange))}},FillHandle.prototype.raiseFillStartEvent=function(){var fillStartEvent={type:agGridCommunity.Events.EVENT_FILL_START,columnApi:this.gridOptionsWrapper.getColumnApi(),api:this.gridOptionsWrapper.getApi()};this.eventService.dispatchEvent(fillStartEvent)},FillHandle.prototype.raiseFillEndEvent=function(initialRange,finalRange){var fillEndEvent={type:agGridCommunity.Events.EVENT_FILL_END,columnApi:this.gridOptionsWrapper.getColumnApi(),api:this.gridOptionsWrapper.getApi(),initialRange,finalRange};this.eventService.dispatchEvent(fillEndEvent)},FillHandle.prototype.handleValueChanged=function(initialRange,finalRange,e){var _this=this,initialRangeEndRow=this.rangeService.getRangeEndRow(initialRange),initialRangeStartRow=this.rangeService.getRangeStartRow(initialRange),finalRangeEndRow=this.rangeService.getRangeEndRow(finalRange),finalRangeStartRow=this.rangeService.getRangeStartRow(finalRange),isVertical="y"===this.dragAxis;if(!this.isReduce||this.gridOptionsWrapper.isSuppressClearOnFillReduction()){var withinInitialRange=!0,values=[],initialValues=[],idx=0,resetValues=function(){values.length=0,initialValues.length=0,idx=0},iterateAcrossCells=function(column,columns){var currentRow=_this.isUp?initialRangeEndRow:initialRangeStartRow,finished=!1;isVertical&&(withinInitialRange=!0,resetValues());for(var _loop_1=function(){var rowNode=_this.rowPositionUtils.getRowNode(currentRow);if(!rowNode)return"break";isVertical&&column?fillValues(values,column,rowNode,(function(){return!_this.rowPositionUtils.sameRow(currentRow,_this.isUp?initialRangeStartRow:initialRangeEndRow)})):columns&&(withinInitialRange=!0,resetValues(),columns.forEach((function(col){return fillValues(values,col,rowNode,(function(){return col!==(_this.isLeft?initialRange.columns[0]:agGridCommunity._.last(initialRange.columns))}))}))),finished=_this.rowPositionUtils.sameRow(currentRow,_this.isUp?finalRangeStartRow:finalRangeEndRow),currentRow=_this.isUp?_this.cellNavigationService.getRowAbove(currentRow):_this.cellNavigationService.getRowBelow(currentRow)};!finished&&currentRow;){if("break"===_loop_1())break}},fillValues=function(currentValues,col,rowNode,updateInitialSet){var currentValue,skipValue=!1;if(withinInitialRange)currentValue=_this.valueService.getValue(col,rowNode),initialValues.push(currentValue),withinInitialRange=updateInitialSet();else{var _a=_this.processValues(e,currentValues,initialValues,col,rowNode,idx++),value=_a.value,fromUserFunction=_a.fromUserFunction;if(currentValue=value,col.isCellEditable(rowNode)){var cellValue=_this.valueService.getValue(col,rowNode);fromUserFunction&&cellValue===currentValue?skipValue=!0:rowNode.setDataValue(col,currentValue)}}skipValue||currentValues.push(currentValue)};if(isVertical)initialRange.columns.forEach((function(col){iterateAcrossCells(col)}));else{columns=this.isLeft?__spread$n(finalRange.columns).reverse():finalRange.columns;iterateAcrossCells(void 0,columns)}}else{var columns=isVertical?initialRange.columns:initialRange.columns.filter((function(col){return finalRange.columns.indexOf(col)<0})),startRow=isVertical?this.cellNavigationService.getRowBelow(finalRangeEndRow):finalRangeStartRow;startRow&&this.clearCellsInRange(startRow,initialRangeEndRow,columns)}},FillHandle.prototype.clearCellsInRange=function(startRow,endRow,columns){for(var currentRow=startRow,finished=!1,_loop_2=function(){var rowNode=this_1.rowPositionUtils.getRowNode(currentRow);if(!rowNode)return"break";columns.forEach((function(col){col.isCellEditable(rowNode)&&rowNode.setDataValue(col,null)})),finished=this_1.rowPositionUtils.sameRow(currentRow,endRow),currentRow=this_1.cellNavigationService.getRowBelow(currentRow)},this_1=this;!finished&&currentRow;){if("break"===_loop_2())break}},FillHandle.prototype.processValues=function(event,values,initialValues,col,rowNode,idx){var direction,userFillOperation=this.gridOptionsWrapper.getFillOperation();if(direction="y"===this.dragAxis?this.isUp?"up":"down":this.isLeft?"left":"right",userFillOperation){var userResult=userFillOperation({event,values,initialValues,currentIndex:idx,currentCellValue:this.valueService.getValue(col,rowNode),direction,column:col,rowNode});if(!1!==userResult)return{value:userResult,fromUserFunction:!0}}var allNumbers=!values.some((function(val){var asFloat=parseFloat(val);return isNaN(asFloat)||asFloat.toString()!==val.toString()}));if(event.altKey||!allNumbers){if(allNumbers&&1===initialValues.length){var multiplier=this.isUp||this.isLeft?-1:1;return{value:parseFloat(agGridCommunity._.last(values))+1*multiplier,fromUserFunction:!1}}return{value:values[idx%values.length],fromUserFunction:!1}}return{value:agGridCommunity._.last(agGridCommunity._.findLineByLeastSquares(values.map(Number))),fromUserFunction:!1}},FillHandle.prototype.clearValues=function(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,_super.prototype.clearValues.call(this)},FillHandle.prototype.clearMarkedPath=function(){this.markedCells.forEach((function(cell){var comp=cell.getComp();comp.addOrRemoveCssClass("ag-selection-fill-top",!1),comp.addOrRemoveCssClass("ag-selection-fill-right",!1),comp.addOrRemoveCssClass("ag-selection-fill-bottom",!1),comp.addOrRemoveCssClass("ag-selection-fill-left",!1)})),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1},FillHandle.prototype.clearCellValues=function(){this.cellValues.length=0},FillHandle.prototype.markPathFrom=function(initialPosition,currentPosition){if(this.clearMarkedPath(),this.clearCellValues(),"y"===this.dragAxis){if(this.rowPositionUtils.sameRow(currentPosition,initialPosition))return;var isBefore=this.rowPositionUtils.before(currentPosition,initialPosition),rangeStartRow=this.getRangeStartRow(),rangeEndRow=this.getRangeEndRow();isBefore&&(currentPosition.rowPinned==rangeStartRow.rowPinned&&currentPosition.rowIndex>=rangeStartRow.rowIndex||rangeStartRow.rowPinned!=rangeEndRow.rowPinned&&currentPosition.rowPinned==rangeEndRow.rowPinned&&currentPosition.rowIndex<=rangeEndRow.rowIndex)?(this.reduceVertical(initialPosition,currentPosition),this.isReduce=!0):(this.extendVertical(initialPosition,currentPosition,isBefore),this.isReduce=!1)}else{var initialColumn=initialPosition.column,currentColumn=currentPosition.column;if(initialColumn===currentColumn)return;var displayedColumns=this.columnModel.getAllDisplayedColumns(),initialIndex=displayedColumns.indexOf(initialColumn),currentIndex=displayedColumns.indexOf(currentColumn);currentIndex<=initialIndex&&currentIndex>=displayedColumns.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(initialPosition,currentPosition),this.isReduce=!0):(this.extendHorizontal(initialPosition,currentPosition,currentIndex<initialIndex),this.isReduce=!1)}this.lastCellMarked=currentPosition},FillHandle.prototype.extendVertical=function(initialPosition,endPosition,isMovingUp){var navigationService=this.navigationService,rangeService=this.rangeService,row=initialPosition;do{for(var cellRange=this.getCellRange(),colLen=cellRange.columns.length,i=0;i<colLen;i++){var column=cellRange.columns[i],rowPos={rowIndex:row.rowIndex,rowPinned:row.rowPinned},cellPos=__assign$s(__assign$s({},rowPos),{column}),cellInRange=rangeService.isCellInSpecificRange(cellPos,cellRange),isInitialRow=this.rowPositionUtils.sameRow(row,initialPosition);if(isMovingUp&&(this.isUp=!0),!isInitialRow){var cell=navigationService.getCellByPosition(cellPos);if(cell){this.markedCells.push(cell);var cellCtrl=cell.getComp();cellInRange||(cellCtrl.addOrRemoveCssClass("ag-selection-fill-left",0===i),cellCtrl.addOrRemoveCssClass("ag-selection-fill-right",i===colLen-1)),cellCtrl.addOrRemoveCssClass(isMovingUp?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(row,endPosition))}}}if(this.rowPositionUtils.sameRow(row,endPosition))break}while(row=isMovingUp?this.cellNavigationService.getRowAbove(row):this.cellNavigationService.getRowBelow(row))},FillHandle.prototype.reduceVertical=function(initialPosition,endPosition){var row=initialPosition;do{for(var cellRange=this.getCellRange(),colLen=cellRange.columns.length,isLastRow=this.rowPositionUtils.sameRow(row,endPosition),i=0;i<colLen;i++){var rowPos={rowIndex:row.rowIndex,rowPinned:row.rowPinned},celPos=__assign$s(__assign$s({},rowPos),{column:cellRange.columns[i]}),cell=this.navigationService.getCellByPosition(celPos);if(cell)this.markedCells.push(cell),cell.getComp().addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(row,endPosition))}if(isLastRow)break}while(row=this.cellNavigationService.getRowAbove(row))},FillHandle.prototype.extendHorizontal=function(initialPosition,endPosition,isMovingLeft){var _this=this,allCols=this.columnModel.getAllDisplayedColumns(),startCol=allCols.indexOf(isMovingLeft?endPosition.column:initialPosition.column),endCol=allCols.indexOf(isMovingLeft?this.getCellRange().columns[0]:endPosition.column),offset=isMovingLeft?0:1,colsToMark=allCols.slice(startCol+offset,endCol+offset),rangeStartRow=this.getRangeStartRow(),rangeEndRow=this.getRangeEndRow();colsToMark.forEach((function(column){var row=rangeStartRow,isLastRow=!1;do{isLastRow=_this.rowPositionUtils.sameRow(row,rangeEndRow);var cell=_this.navigationService.getCellByPosition({rowIndex:row.rowIndex,rowPinned:row.rowPinned,column});if(cell){_this.markedCells.push(cell);var cellComp=cell.getComp();cellComp.addOrRemoveCssClass("ag-selection-fill-top",_this.rowPositionUtils.sameRow(row,rangeStartRow)),cellComp.addOrRemoveCssClass("ag-selection-fill-bottom",_this.rowPositionUtils.sameRow(row,rangeEndRow)),isMovingLeft?(_this.isLeft=!0,cellComp.addOrRemoveCssClass("ag-selection-fill-left",column===colsToMark[0])):cellComp.addOrRemoveCssClass("ag-selection-fill-right",column===agGridCommunity._.last(colsToMark))}row=_this.cellNavigationService.getRowBelow(row)}while(!isLastRow)}))},FillHandle.prototype.reduceHorizontal=function(initialPosition,endPosition){var _this=this,allCols=this.columnModel.getAllDisplayedColumns(),startCol=allCols.indexOf(endPosition.column),endCol=allCols.indexOf(initialPosition.column),colsToMark=allCols.slice(startCol,endCol),rangeStartRow=this.getRangeStartRow(),rangeEndRow=this.getRangeEndRow();colsToMark.forEach((function(column){var row=rangeStartRow,isLastRow=!1;do{isLastRow=_this.rowPositionUtils.sameRow(row,rangeEndRow);var cell=_this.navigationService.getCellByPosition({rowIndex:row.rowIndex,rowPinned:row.rowPinned,column});if(cell)_this.markedCells.push(cell),cell.getComp().addOrRemoveCssClass("ag-selection-fill-right",column===colsToMark[0]);row=_this.cellNavigationService.getRowBelow(row)}while(!isLastRow)}))},FillHandle.prototype.refresh=function(cellCtrl){var cellRange=this.rangeService.getCellRanges()[0];cellRange.startRow&&cellRange.endRow?_super.prototype.refresh.call(this,cellCtrl):this.destroy()},FillHandle.TEMPLATE='<div class="ag-fill-handle"></div>',__decorate$1q([agGridCommunity.Autowired("valueService")],FillHandle.prototype,"valueService",void 0),FillHandle}(AbstractSelectionHandle),__extends$30=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$t=function(){return __assign$t=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$t.apply(this,arguments)},RangeHandle$1=function(_super){function RangeHandle(){var _this=_super.call(this,RangeHandle.TEMPLATE)||this;return _this.type=agGridCommunity.SelectionHandleType.RANGE,_this.rangeFixed=!1,_this}return __extends$30(RangeHandle,_super),RangeHandle.prototype.onDrag=function(e){var lastCellHovered=this.getLastCellHovered();if(lastCellHovered){var cellRanges=this.rangeService.getCellRanges(),lastRange=agGridCommunity._.last(cellRanges);if(this.rangeFixed||(this.fixRangeStartEnd(lastRange),this.rangeFixed=!0),this.endPosition={rowIndex:lastCellHovered.rowIndex,rowPinned:lastCellHovered.rowPinned,column:lastCellHovered.column},2===cellRanges.length&&cellRanges[0].type===agGridCommunity.CellRangeType.DIMENSION&&lastRange.type===agGridCommunity.CellRangeType.VALUE)!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(lastRange))&&this.rangeService.updateRangeEnd(cellRanges[0],__assign$t(__assign$t({},this.endPosition),{column:cellRanges[0].columns[0]}),!0);this.rangeService.extendLatestRangeToCell(this.endPosition)}},RangeHandle.prototype.onDragEnd=function(e){var cellRange=agGridCommunity._.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(cellRange),this.rangeFixed=!1},RangeHandle.prototype.fixRangeStartEnd=function(cellRange){var startRow=this.rangeService.getRangeStartRow(cellRange),endRow=this.rangeService.getRangeEndRow(cellRange),column=cellRange.columns[0];cellRange.startRow=startRow,cellRange.endRow=endRow,cellRange.startColumn=column},RangeHandle.TEMPLATE='<div class="ag-range-handle"></div>',RangeHandle}(AbstractSelectionHandle),__extends$31=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1r=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectionHandleFactory=function(_super){function SelectionHandleFactory(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$31(SelectionHandleFactory,_super),SelectionHandleFactory.prototype.createSelectionHandle=function(type){return this.createBean(type===agGridCommunity.SelectionHandleType.RANGE?new RangeHandle$1:new FillHandle)},SelectionHandleFactory=__decorate$1r([agGridCommunity.Bean("selectionHandleFactory")],SelectionHandleFactory)}(agGridCommunity.BeanStub),RangeSelectionModule={moduleName:agGridCommunity.ModuleNames.RangeSelectionModule,beans:[RangeService,SelectionHandleFactory],agStackComponents:[{componentName:"AgFillHandle",componentClass:FillHandle},{componentName:"AgRangeHandle",componentClass:RangeHandle$1}],dependantModules:[EnterpriseCoreModule]},GridChartsModule={moduleName:agGridCommunity.ModuleNames.GridChartsModule,beans:[ChartService,ChartTranslationService,ChartCrossFilterService],dependantModules:[RangeSelectionModule,EnterpriseCoreModule]},__extends$32=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$u=function(){return __assign$u=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$u.apply(this,arguments)},__decorate$1s=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DetailCellRendererCtrl=function(_super){function DetailCellRendererCtrl(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.loadRowDataVersion=0,_this.needRefresh=!1,_this}return __extends$32(DetailCellRendererCtrl,_super),DetailCellRendererCtrl.prototype.init=function(comp,params){var _this=this;this.params=params,this.comp=comp,null!=params.pinned||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(params.node.parent,agGridCommunity.RowNode.EVENT_DATA_CHANGED,(function(){_this.needRefresh=!0})),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))},DetailCellRendererCtrl.prototype.onFullWidthRowFocused=function(e){var params=this.params,row={rowIndex:params.node.rowIndex,rowPinned:params.node.rowPinned},eventRow={rowIndex:e.rowIndex,rowPinned:e.rowPinned};this.rowPositionUtils.sameRow(row,eventRow)&&this.focusService.focusInto(this.comp.getGui(),e.fromBelow)},DetailCellRendererCtrl.prototype.setAutoHeightClasses=function(){var autoHeight=this.gridOptionsWrapper.isDetailRowAutoHeight(),parentClass=autoHeight?"ag-details-row-auto-height":"ag-details-row-fixed-height",detailClass=autoHeight?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(parentClass,!0),this.comp.addOrRemoveDetailGridCssClass(detailClass,!0)},DetailCellRendererCtrl.prototype.setupRefreshStrategy=function(){if(this.params.suppressRefresh)return console.warn("AG Grid: as of v23.2.0, cellRendererParams.suppressRefresh for Detail Cell Renderer is no longer used. Please set cellRendererParams.refreshStrategy = 'nothing' instead."),void(this.refreshStrategy="nothing");var providedStrategy=this.params.refreshStrategy;"everything"==providedStrategy||"nothing"==providedStrategy||"rows"==providedStrategy?this.refreshStrategy=providedStrategy:(null!=providedStrategy&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+providedStrategy+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows")},DetailCellRendererCtrl.prototype.addThemeToDetailGrid=function(){var theme=this.environment.getTheme().theme;theme&&this.comp.addOrRemoveDetailGridCssClass(theme,!0)},DetailCellRendererCtrl.prototype.createDetailGrid=function(){if(agGridCommunity._.missing(this.params.detailGridOptions))console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");else{var autoHeight=this.gridOptionsWrapper.isDetailRowAutoHeight(),gridOptions=__assign$u({},this.params.detailGridOptions);autoHeight&&(gridOptions.domLayout="autoHeight"),this.comp.setDetailGrid(gridOptions)}},DetailCellRendererCtrl.prototype.registerDetailWithMaster=function(api,columnApi){var rowId=this.params.node.id,masterGridApi=this.params.api,gridInfo={id:rowId,api,columnApi},rowNode=this.params.node;masterGridApi.addDetailGridInfo(rowId,gridInfo),rowNode.detailGridInfo=gridInfo,this.addDestroyFunc((function(){rowNode.detailGridInfo===gridInfo&&(masterGridApi.removeDetailGridInfo(rowId),rowNode.detailGridInfo=null)}))},DetailCellRendererCtrl.prototype.loadRowData=function(){var _this=this;this.loadRowDataVersion++;var versionThisCall=this.loadRowDataVersion,userFunc=this.params.getDetailRowData;if(userFunc){userFunc({node:this.params.node,data:this.params.node.data,successCallback:function(rowData){_this.loadRowDataVersion===versionThisCall&&_this.comp.setRowData(rowData)},context:this.gridOptionsWrapper.getContext()})}else console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData")},DetailCellRendererCtrl.prototype.refresh=function(){return!this.needRefresh||"nothing"===this.refreshStrategy||(this.needRefresh=!1,"everything"!==this.refreshStrategy&&(this.loadRowData(),true))},__decorate$1s([agGridCommunity.Autowired("environment")],DetailCellRendererCtrl.prototype,"environment",void 0),__decorate$1s([agGridCommunity.Autowired("rowPositionUtils")],DetailCellRendererCtrl.prototype,"rowPositionUtils",void 0),__decorate$1s([agGridCommunity.Autowired("focusService")],DetailCellRendererCtrl.prototype,"focusService",void 0),DetailCellRendererCtrl}(agGridCommunity.BeanStub),__extends$33=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1t=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DetailCellRenderer=function(_super){function DetailCellRenderer(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$33(DetailCellRenderer,_super),DetailCellRenderer.prototype.init=function(params){var _this=this;this.params=params,this.selectAndSetTemplate();var compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},addOrRemoveDetailGridCssClass:function(cssClassName,on){return _this.eDetailGrid.classList.toggle(cssClassName,on)},setDetailGrid:function(gridOptions){return _this.setDetailGrid(gridOptions)},setRowData:function(rowData){return _this.setRowData(rowData)},getGui:function(){return _this.eDetailGrid}};this.ctrl=this.createManagedBean(new DetailCellRendererCtrl),this.ctrl.init(compProxy,params)},DetailCellRenderer.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()},DetailCellRenderer.prototype.destroy=function(){_super.prototype.destroy.call(this)},DetailCellRenderer.prototype.selectAndSetTemplate=function(){var _this=this;if(this.params.pinned)this.setTemplate('<div class="ag-details-row"></div>');else{var setDefaultTemplate=function(){_this.setTemplate(DetailCellRenderer.TEMPLATE)};if(agGridCommunity._.missing(this.params.template))setDefaultTemplate();else if("string"==typeof this.params.template)this.setTemplate(this.params.template);else if("function"==typeof this.params.template){var template=(0,this.params.template)(this.params);this.setTemplate(template)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),setDefaultTemplate();null==this.eDetailGrid&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}},DetailCellRenderer.prototype.setDetailGrid=function(gridOptions){if(this.eDetailGrid){var agGridReact=this.context.getBean("agGridReact"),agGridReactCloned=agGridReact?agGridCommunity._.cloneObject(agGridReact):void 0,frameworkComponentWrapper=this.context.getBean("frameworkComponentWrapper"),frameworkOverrides=this.getFrameworkOverrides();new agGridCommunity.Grid(this.eDetailGrid,gridOptions,{frameworkOverrides,providedBeanInstances:{agGridReact:agGridReactCloned,frameworkComponentWrapper}}),this.detailApi=gridOptions.api,this.ctrl.registerDetailWithMaster(gridOptions.api,gridOptions.columnApi),this.addDestroyFunc((function(){gridOptions.api&&gridOptions.api.destroy()}))}},DetailCellRenderer.prototype.setRowData=function(rowData){this.detailApi&&this.detailApi.setRowData(rowData)},DetailCellRenderer.TEMPLATE='<div class="ag-details-row">\n            <div ref="eDetailGrid" class="ag-details-grid"></div>\n        </div>',__decorate$1t([agGridCommunity.RefSelector("eDetailGrid")],DetailCellRenderer.prototype,"eDetailGrid",void 0),DetailCellRenderer}(agGridCommunity.Component),MasterDetailModule={moduleName:agGridCommunity.ModuleNames.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:DetailCellRenderer}],controllers:[{controllerName:"detailCellRenderer",controllerClass:DetailCellRendererCtrl}],dependantModules:[EnterpriseCoreModule]},__extends$34=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1u=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},EnterpriseMenuFactory=function(_super){function EnterpriseMenuFactory(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$34(EnterpriseMenuFactory,_super),EnterpriseMenuFactory.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},EnterpriseMenuFactory.prototype.showMenuAfterMouseEvent=function(column,mouseEvent,defaultTab){var _this=this;this.showMenu(column,(function(menu){var ePopup=menu.getGui();_this.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column,mouseEvent,ePopup}),defaultTab&&menu.showTab(defaultTab)}),"columnMenu",defaultTab,void 0,mouseEvent.target)},EnterpriseMenuFactory.prototype.showMenuAfterButtonClick=function(column,eventSource,containerType,defaultTab,restrictToTabs){var _this=this,multiplier=-1,alignSide="left";this.gridOptionsWrapper.isEnableRtl()&&(multiplier=1,alignSide="right"),this.showMenu(column,(function(menu){var ePopup=menu.getGui();_this.popupService.positionPopupUnderComponent({type:containerType,column,eventSource,ePopup,alignSide,nudgeX:9*multiplier,nudgeY:-23,keepWithinBounds:!0}),defaultTab&&menu.showTab(defaultTab)}),containerType,defaultTab,restrictToTabs,eventSource)},EnterpriseMenuFactory.prototype.showMenu=function(column,positionCallback,containerType,defaultTab,restrictToTabs,eventSource){var _this=this,menu=this.createBean(new EnterpriseMenu(column,this.lastSelectedTab,restrictToTabs)),eMenuGui=menu.getGui(),anchorToElement=eventSource||this.ctrlsService.getGridBodyCtrl().getGui(),closedFuncs=[];closedFuncs.push((function(e){if(_this.destroyBean(menu),column.setMenuVisible(!1,"contextMenu"),e instanceof KeyboardEvent&&eventSource&&agGridCommunity._.isVisible(eventSource)){var focusableEl=_this.focusService.findTabbableParent(eventSource);focusableEl&&focusableEl.focus()}}));var translate=this.gridOptionsWrapper.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal:!0,eChild:eMenuGui,closeOnEsc:!0,closedCallback:function(e){closedFuncs.forEach((function(f){return f(e)}))},afterGuiAttached:function(params){return menu.afterGuiAttached(Object.assign({},{container:containerType},params))},positionCallback:function(){return positionCallback(menu)},anchorToElement,ariaLabel:translate("ariaLabelColumnMenu","Column Menu")});if(addPopupRes){var stopAnchoringPromise=addPopupRes.stopAnchoringPromise;stopAnchoringPromise&&stopAnchoringPromise.then((function(stopAnchoringFunc){column.addEventListener(agGridCommunity.Column.EVENT_LEFT_CHANGED,stopAnchoringFunc),column.addEventListener(agGridCommunity.Column.EVENT_VISIBLE_CHANGED,stopAnchoringFunc),closedFuncs.push((function(){column.removeEventListener(agGridCommunity.Column.EVENT_LEFT_CHANGED,stopAnchoringFunc),column.removeEventListener(agGridCommunity.Column.EVENT_VISIBLE_CHANGED,stopAnchoringFunc)}))}))}defaultTab||(menu.showTabBasedOnPreviousSelection(),positionCallback(menu)),menu.addEventListener(EnterpriseMenu.EVENT_TAB_SELECTED,(function(event){_this.lastSelectedTab=event.key})),column.setMenuVisible(!0,"contextMenu"),this.activeMenu=menu,menu.addEventListener(agGridCommunity.BeanStub.EVENT_DESTROYED,(function(){_this.activeMenu===menu&&(_this.activeMenu=null)}))},EnterpriseMenuFactory.prototype.isMenuEnabled=function(column){return column.getMenuTabs(EnterpriseMenu.TABS_DEFAULT).length>0},__decorate$1u([agGridCommunity.Autowired("popupService")],EnterpriseMenuFactory.prototype,"popupService",void 0),__decorate$1u([agGridCommunity.Autowired("focusService")],EnterpriseMenuFactory.prototype,"focusService",void 0),__decorate$1u([agGridCommunity.Autowired("ctrlsService")],EnterpriseMenuFactory.prototype,"ctrlsService",void 0),EnterpriseMenuFactory=__decorate$1u([agGridCommunity.Bean("menuFactory")],EnterpriseMenuFactory)}(agGridCommunity.BeanStub),EnterpriseMenu=function(_super){function EnterpriseMenu(column,initialSelection,restrictTo){var _this=_super.call(this)||this;return _this.tabFactories={},_this.includeChecks={},_this.column=column,_this.initialSelection=initialSelection,_this.tabFactories[EnterpriseMenu.TAB_GENERAL]=_this.createMainPanel.bind(_this),_this.tabFactories[EnterpriseMenu.TAB_FILTER]=_this.createFilterPanel.bind(_this),_this.tabFactories[EnterpriseMenu.TAB_COLUMNS]=_this.createColumnsPanel.bind(_this),_this.includeChecks[EnterpriseMenu.TAB_GENERAL]=function(){return!0},_this.includeChecks[EnterpriseMenu.TAB_FILTER]=function(){return column.isFilterAllowed()},_this.includeChecks[EnterpriseMenu.TAB_COLUMNS]=function(){return!0},_this.restrictTo=restrictTo,_this}return __extends$34(EnterpriseMenu,_super),EnterpriseMenu.prototype.init=function(){var _this=this,tabs=this.getTabsToCreate().map((function(name){return _this.createTab(name)}));this.tabbedLayout=new agGridCommunity.TabbedLayout({items:tabs,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout)},EnterpriseMenu.prototype.getTabsToCreate=function(){var _this=this;return this.restrictTo?this.restrictTo:this.column.getMenuTabs(EnterpriseMenu.TABS_DEFAULT).filter((function(tabName){return _this.isValidMenuTabItem(tabName)})).filter((function(tabName){return _this.isNotSuppressed(tabName)})).filter((function(tabName){return _this.isModuleLoaded(tabName)}))},EnterpriseMenu.prototype.isModuleLoaded=function(menuTabName){return menuTabName!==EnterpriseMenu.TAB_COLUMNS||agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.ColumnToolPanelModule)},EnterpriseMenu.prototype.isValidMenuTabItem=function(menuTabName){var isValid=!0,itemsToConsider=EnterpriseMenu.TABS_DEFAULT;return null!=this.restrictTo&&(isValid=this.restrictTo.indexOf(menuTabName)>-1,itemsToConsider=this.restrictTo),(isValid=isValid&&EnterpriseMenu.TABS_DEFAULT.indexOf(menuTabName)>-1)||console.warn("AG Grid: Trying to render an invalid menu item '"+menuTabName+"'. Check that your 'menuTabs' contains one of ["+itemsToConsider+"]"),isValid},EnterpriseMenu.prototype.isNotSuppressed=function(menuTabName){return this.includeChecks[menuTabName]()},EnterpriseMenu.prototype.createTab=function(name){return this.tabFactories[name]()},EnterpriseMenu.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)},EnterpriseMenu.prototype.showTab=function(toShow){this.tabItemColumns&&toShow===EnterpriseMenu.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&toShow===EnterpriseMenu.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&toShow===EnterpriseMenu.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()},EnterpriseMenu.prototype.onTabItemClicked=function(event){var key=null;switch(event.item){case this.tabItemColumns:key=EnterpriseMenu.TAB_COLUMNS;break;case this.tabItemFilter:key=EnterpriseMenu.TAB_FILTER;break;case this.tabItemGeneral:key=EnterpriseMenu.TAB_GENERAL}key&&this.activateTab(key)},EnterpriseMenu.prototype.activateTab=function(tab){var ev={type:EnterpriseMenu.EVENT_TAB_SELECTED,key:tab};this.dispatchEvent(ev)},EnterpriseMenu.prototype.getMenuItems=function(){var result,defaultMenuOptions=this.getDefaultMenuOptions(),userFunc=this.gridOptionsWrapper.getMainMenuItemsFunc();return result=userFunc?userFunc({column:this.column,defaultItems:defaultMenuOptions}):defaultMenuOptions,agGridCommunity._.removeRepeatsFromArray(result,EnterpriseMenu.MENU_ITEM_SEPARATOR),result},EnterpriseMenu.prototype.getDefaultMenuOptions=function(){var result=[],allowPinning=!this.column.getColDef().lockPinned,rowGroupCount=this.columnModel.getRowGroupColumns().length,doingGrouping=rowGroupCount>0,groupedByThisColumn=this.columnModel.getRowGroupColumns().indexOf(this.column)>=0,allowValue=this.column.isAllowValue(),allowRowGroup=this.column.isAllowRowGroup(),isPrimary=this.column.isPrimary(),pivotModeOn=this.columnModel.isPivotMode(),isInMemoryRowModel=this.rowModel.getType()===agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE,usingTreeData=this.gridOptionsWrapper.isTreeData(),allowValueAgg=isPrimary&&doingGrouping&&allowValue||!isPrimary;return allowPinning&&result.push("pinSubMenu"),allowValueAgg&&result.push("valueAggSubMenu"),(allowPinning||allowValueAgg)&&result.push(EnterpriseMenu.MENU_ITEM_SEPARATOR),result.push("autoSizeThis"),result.push("autoSizeAll"),result.push(EnterpriseMenu.MENU_ITEM_SEPARATOR),allowRowGroup&&this.column.isPrimary()&&(groupedByThisColumn?result.push("rowUnGroup"):result.push("rowGroup")),result.push(EnterpriseMenu.MENU_ITEM_SEPARATOR),result.push("resetColumns"),isInMemoryRowModel&&(usingTreeData||rowGroupCount>(pivotModeOn?1:0))&&(result.push("expandAll"),result.push("contractAll")),result},EnterpriseMenu.prototype.createMainPanel=function(){this.mainMenuList=this.createManagedBean(new agGridCommunity.AgMenuList);var menuItems=this.getMenuItems(),menuItemsMapped=this.menuItemMapper.mapWithStockItems(menuItems,this.column);return this.mainMenuList.addMenuItems(menuItemsMapped),this.mainMenuList.addEventListener(agGridCommunity.AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:agGridCommunity._.createIconNoSpan("menu",this.gridOptionsWrapper,this.column),titleLabel:EnterpriseMenu.TAB_GENERAL.replace("MenuTab",""),bodyPromise:agGridCommunity.AgPromise.resolve(this.mainMenuList.getGui()),name:EnterpriseMenu.TAB_GENERAL},this.tabItemGeneral},EnterpriseMenu.prototype.onHidePopup=function(event){var keyboardEvent;event&&event.event&&event.event instanceof KeyboardEvent&&(keyboardEvent=event.event),this.hidePopupFunc(keyboardEvent&&{keyboardEvent});var focusedCell=this.focusService.getFocusedCell(),eDocument=this.gridOptionsWrapper.getDocument();if(eDocument.activeElement===eDocument.body&&focusedCell){var rowIndex=focusedCell.rowIndex,rowPinned=focusedCell.rowPinned,column=focusedCell.column;this.focusService.setFocusedCell(rowIndex,column,rowPinned,!0)}},EnterpriseMenu.prototype.createFilterPanel=function(){var _a,filterWrapper=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!filterWrapper)throw new Error("AG Grid - Unable to instantiate filter");return this.tabItemFilter={title:agGridCommunity._.createIconNoSpan("filter",this.gridOptionsWrapper,this.column),titleLabel:EnterpriseMenu.TAB_FILTER.replace("MenuTab",""),bodyPromise:null===(_a=filterWrapper)||void 0===_a?void 0:_a.guiPromise,afterAttachedCallback:function(params){var _a;(null===(_a=filterWrapper)||void 0===_a?void 0:_a.filterPromise)&&filterWrapper.filterPromise.then((function(filter){filter&&filter.afterGuiAttached&&filter.afterGuiAttached(params)}))},name:EnterpriseMenu.TAB_FILTER},this.tabItemFilter},EnterpriseMenu.prototype.createColumnsPanel=function(){var eWrapperDiv=document.createElement("div");eWrapperDiv.classList.add("ag-menu-column-select-wrapper"),this.columnSelectPanel=this.createManagedBean(new PrimaryColsPanel);var columnsMenuParams=this.column.getColDef().columnsMenuParams;columnsMenuParams||(columnsMenuParams={}),this.columnSelectPanel.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!columnsMenuParams.contractColumnSelection,suppressColumnExpandAll:!!columnsMenuParams.suppressColumnExpandAll,suppressColumnFilter:!!columnsMenuParams.suppressColumnFilter,suppressColumnSelectAll:!!columnsMenuParams.suppressColumnSelectAll,suppressSyncLayoutWithGrid:!!columnsMenuParams.suppressSyncLayoutWithGrid,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()},"columnMenu");var columnSelectPanelGui=this.columnSelectPanel.getGui();return columnSelectPanelGui.classList.add("ag-menu-column-select"),eWrapperDiv.appendChild(columnSelectPanelGui),this.tabItemColumns={title:agGridCommunity._.createIconNoSpan("columns",this.gridOptionsWrapper,this.column),titleLabel:EnterpriseMenu.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:agGridCommunity.AgPromise.resolve(eWrapperDiv),name:EnterpriseMenu.TAB_COLUMNS},this.tabItemColumns},EnterpriseMenu.prototype.afterGuiAttached=function(params){var container=params.container,hidePopup=params.hidePopup;this.tabbedLayout.setAfterAttachedParams({container,hidePopup}),hidePopup&&(this.hidePopupFunc=hidePopup,this.addDestroyFunc(hidePopup))},EnterpriseMenu.prototype.getGui=function(){return this.tabbedLayout.getGui()},EnterpriseMenu.EVENT_TAB_SELECTED="tabSelected",EnterpriseMenu.TAB_FILTER="filterMenuTab",EnterpriseMenu.TAB_GENERAL="generalMenuTab",EnterpriseMenu.TAB_COLUMNS="columnsMenuTab",EnterpriseMenu.TABS_DEFAULT=[EnterpriseMenu.TAB_GENERAL,EnterpriseMenu.TAB_FILTER,EnterpriseMenu.TAB_COLUMNS],EnterpriseMenu.MENU_ITEM_SEPARATOR="separator",__decorate$1u([agGridCommunity.Autowired("columnModel")],EnterpriseMenu.prototype,"columnModel",void 0),__decorate$1u([agGridCommunity.Autowired("filterManager")],EnterpriseMenu.prototype,"filterManager",void 0),__decorate$1u([agGridCommunity.Autowired("gridApi")],EnterpriseMenu.prototype,"gridApi",void 0),__decorate$1u([agGridCommunity.Autowired("columnApi")],EnterpriseMenu.prototype,"columnApi",void 0),__decorate$1u([agGridCommunity.Autowired("menuItemMapper")],EnterpriseMenu.prototype,"menuItemMapper",void 0),__decorate$1u([agGridCommunity.Autowired("rowModel")],EnterpriseMenu.prototype,"rowModel",void 0),__decorate$1u([agGridCommunity.Autowired("focusService")],EnterpriseMenu.prototype,"focusService",void 0),__decorate$1u([agGridCommunity.PostConstruct],EnterpriseMenu.prototype,"init",null),EnterpriseMenu}(agGridCommunity.BeanStub),__extends$35=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1v=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ContextMenuFactory=function(_super){function ContextMenuFactory(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$35(ContextMenuFactory,_super),ContextMenuFactory.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},ContextMenuFactory.prototype.getMenuItems=function(node,column,value){var defaultMenuOptions=[];if(agGridCommunity._.exists(node)&&agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.ClipboardModule)&&column&&defaultMenuOptions.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator"),this.gridOptionsWrapper.isEnableCharts()&&agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.RangeSelectionModule)&&agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.GridChartsModule)&&(this.columnModel.isPivotMode()&&defaultMenuOptions.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&defaultMenuOptions.push("chartRange")),agGridCommunity._.exists(node)){var csvModuleMissing=!agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.CsvExportModule),excelModuleMissing=!agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.ExcelExportModule),suppressExcel=this.gridOptionsWrapper.isSuppressExcelExport()||excelModuleMissing,suppressCsv=this.gridOptionsWrapper.isSuppressCsvExport()||csvModuleMissing;!(agGridCommunity._.isIOSUserAgent()||suppressExcel&&suppressCsv)&&defaultMenuOptions.push("export")}if(this.gridOptionsWrapper.getContextMenuItemsFunc()){var userFunc=this.gridOptionsWrapper.getContextMenuItemsFunc(),params={node,column,value,defaultItems:defaultMenuOptions.length?defaultMenuOptions:void 0};return userFunc?userFunc(params):void 0}return defaultMenuOptions},ContextMenuFactory.prototype.onContextMenu=function(mouseEvent,touchEvent,rowNode,column,value,anchorToElement){if((this.gridOptionsWrapper.isAllowContextMenuWithControlKey()||!mouseEvent||!mouseEvent.ctrlKey&&!mouseEvent.metaKey)&&(mouseEvent&&this.blockMiddleClickScrollsIfNeeded(mouseEvent),!this.gridOptionsWrapper.isSuppressContextMenu())){var eventOrTouch=mouseEvent||touchEvent.touches[0];if(this.showMenu(rowNode,column,value,eventOrTouch,anchorToElement))(mouseEvent||touchEvent).preventDefault()}},ContextMenuFactory.prototype.blockMiddleClickScrollsIfNeeded=function(mouseEvent){var gridOptionsWrapper=this.gridOptionsWrapper,which=mouseEvent.which;gridOptionsWrapper.isSuppressMiddleClickScrolls()&&2===which&&mouseEvent.preventDefault()},ContextMenuFactory.prototype.showMenu=function(node,column,value,mouseEvent,anchorToElement){var _this=this,menuItems=this.getMenuItems(node,column,value),eGridBodyGui=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===menuItems||agGridCommunity._.missingOrEmpty(menuItems))return!1;var menu=new ContextMenu(menuItems);this.createBean(menu);var eMenuGui=menu.getGui(),positionParams={column,rowNode:node,type:"contextMenu",mouseEvent,ePopup:eMenuGui,nudgeY:1},translate=this.gridOptionsWrapper.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal:!0,eChild:eMenuGui,closeOnEsc:!0,closedCallback:function(){eGridBodyGui.classList.remove("ag-context-menu-open"),_this.destroyBean(menu)},click:mouseEvent,positionCallback:function(){_this.popupService.positionPopupUnderMouseEvent(Object.assign({},{nudgeX:_this.gridOptionsWrapper.isEnableRtl()?-1*(eMenuGui.offsetWidth+1):1},positionParams))},anchorToElement,ariaLabel:translate("ariaLabelContextMenu","Context Menu")});return addPopupRes&&(eGridBodyGui.classList.add("ag-context-menu-open"),menu.afterGuiAttached({container:"contextMenu",hidePopup:addPopupRes.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=menu,menu.addEventListener(agGridCommunity.BeanStub.EVENT_DESTROYED,(function(){_this.activeMenu===menu&&(_this.activeMenu=null)})),addPopupRes&&menu.addEventListener(agGridCommunity.AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,addPopupRes.hideFunc),!0},__decorate$1v([agGridCommunity.Autowired("popupService")],ContextMenuFactory.prototype,"popupService",void 0),__decorate$1v([agGridCommunity.Optional("rangeService")],ContextMenuFactory.prototype,"rangeService",void 0),__decorate$1v([agGridCommunity.Autowired("ctrlsService")],ContextMenuFactory.prototype,"ctrlsService",void 0),__decorate$1v([agGridCommunity.Autowired("columnModel")],ContextMenuFactory.prototype,"columnModel",void 0),ContextMenuFactory=__decorate$1v([agGridCommunity.Bean("contextMenuFactory")],ContextMenuFactory)}(agGridCommunity.BeanStub),ContextMenu=function(_super){function ContextMenu(menuItems){var _this=_super.call(this,'<div class="ag-menu" role="presentation"></div>')||this;return _this.menuList=null,_this.focusedCell=null,_this.menuItems=menuItems,_this}return __extends$35(ContextMenu,_super),ContextMenu.prototype.addMenuItems=function(){var _this=this,menuList=this.createBean(new agGridCommunity.AgMenuList),menuItemsMapped=this.menuItemMapper.mapWithStockItems(this.menuItems,null);menuList.addMenuItems(menuItemsMapped),this.appendChild(menuList),this.menuList=menuList,menuList.addEventListener(agGridCommunity.AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,(function(e){return _this.dispatchEvent(e)}))},ContextMenu.prototype.afterGuiAttached=function(params){params.hidePopup&&this.addDestroyFunc(params.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())},ContextMenu.prototype.restoreFocusedCell=function(){var currentFocusedCell=this.focusService.getFocusedCell();if(currentFocusedCell&&this.focusedCell&&this.cellPositionUtils.equals(currentFocusedCell,this.focusedCell)){var _a=this.focusedCell,rowIndex=_a.rowIndex,rowPinned=_a.rowPinned,column=_a.column,doc=this.gridOptionsWrapper.getDocument();doc.activeElement===doc.body&&this.focusService.setFocusedCell(rowIndex,column,rowPinned,!0)}},ContextMenu.prototype.destroy=function(){this.restoreFocusedCell(),_super.prototype.destroy.call(this)},__decorate$1v([agGridCommunity.Autowired("menuItemMapper")],ContextMenu.prototype,"menuItemMapper",void 0),__decorate$1v([agGridCommunity.Autowired("focusService")],ContextMenu.prototype,"focusService",void 0),__decorate$1v([agGridCommunity.Autowired("cellPositionUtils")],ContextMenu.prototype,"cellPositionUtils",void 0),__decorate$1v([agGridCommunity.PostConstruct],ContextMenu.prototype,"addMenuItems",null),ContextMenu}(agGridCommunity.Component),__extends$36=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1w=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MenuItemMapper=function(_super){function MenuItemMapper(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$36(MenuItemMapper,_super),MenuItemMapper.prototype.mapWithStockItems=function(originalList,column){var _this=this;if(!originalList)return[];var resultList=[];return originalList.forEach((function(menuItemOrString){var result;if(result="string"==typeof menuItemOrString?_this.getStockMenuItem(menuItemOrString,column):menuItemOrString){var resultDef=result,subMenu=resultDef.subMenu;subMenu&&subMenu instanceof Array&&(resultDef.subMenu=_this.mapWithStockItems(resultDef.subMenu,column)),null!=result&&resultList.push(result)}})),resultList},MenuItemMapper.prototype.getStockMenuItem=function(key,column){var _this=this,localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),skipHeaderOnAutoSize=this.gridOptionsWrapper.isSkipHeaderOnAutoSize();switch(key){case"pinSubMenu":return{name:localeTextFunc("pinColumn","Pin Column"),icon:agGridCommunity._.createIconNoSpan("menuPin",this.gridOptionsWrapper,null),subMenu:["pinLeft","pinRight","clearPinned"]};case"pinLeft":return{name:localeTextFunc("pinLeft","Pin Left"),action:function(){return _this.columnModel.setColumnPinned(column,agGridCommunity.Constants.PINNED_LEFT,"contextMenu")},checked:!!column&&column.isPinnedLeft()};case"pinRight":return{name:localeTextFunc("pinRight","Pin Right"),action:function(){return _this.columnModel.setColumnPinned(column,agGridCommunity.Constants.PINNED_RIGHT,"contextMenu")},checked:!!column&&column.isPinnedRight()};case"clearPinned":return{name:localeTextFunc("noPin","No Pin"),action:function(){return _this.columnModel.setColumnPinned(column,null,"contextMenu")},checked:!!column&&!column.isPinned()};case"valueAggSubMenu":return agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.RowGroupingModule,"Aggregation from Menu")?{name:localeTextFunc("valueAggregation","Value Aggregation"),icon:agGridCommunity._.createIconNoSpan("menuValue",this.gridOptionsWrapper,null),subMenu:this.createAggregationSubMenu(column)}:null;case"autoSizeThis":return{name:localeTextFunc("autosizeThiscolumn","Autosize This Column"),action:function(){return _this.columnModel.autoSizeColumn(column,skipHeaderOnAutoSize,"contextMenu")}};case"autoSizeAll":return{name:localeTextFunc("autosizeAllColumns","Autosize All Columns"),action:function(){return _this.columnModel.autoSizeAllColumns(skipHeaderOnAutoSize,"contextMenu")}};case"rowGroup":return{name:localeTextFunc("groupBy","Group by")+" "+agGridCommunity._.escapeString(this.columnModel.getDisplayNameForColumn(column,"header")),action:function(){return _this.columnModel.addRowGroupColumn(column,"contextMenu")},icon:agGridCommunity._.createIconNoSpan("menuAddRowGroup",this.gridOptionsWrapper,null)};case"rowUnGroup":return{name:localeTextFunc("ungroupBy","Un-Group by")+" "+agGridCommunity._.escapeString(this.columnModel.getDisplayNameForColumn(column,"header")),action:function(){return _this.columnModel.removeRowGroupColumn(column,"contextMenu")},icon:agGridCommunity._.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsWrapper,null)};case"resetColumns":return{name:localeTextFunc("resetColumns","Reset Columns"),action:function(){return _this.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:localeTextFunc("expandAll","Expand All"),action:function(){return _this.gridApi.expandAll()}};case"contractAll":return{name:localeTextFunc("collapseAll","Collapse All"),action:function(){return _this.gridApi.collapseAll()}};case"copy":return agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ClipboardModule,"Copy from Menu")?{name:localeTextFunc("copy","Copy"),shortcut:localeTextFunc("ctrlC","Ctrl+C"),icon:agGridCommunity._.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return _this.clipboardService.copyToClipboard()}}:null;case"copyWithHeaders":return agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ClipboardModule,"Copy with Headers from Menu")?{name:localeTextFunc("copyWithHeaders","Copy with Headers"),icon:agGridCommunity._.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return _this.clipboardService.copyToClipboard({includeHeaders:!0})}}:null;case"copyWithGroupHeaders":return agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ClipboardModule,"Copy with Group Headers from Menu")?{name:localeTextFunc("copyWithGroupHeaders","Copy with Group Headers"),icon:agGridCommunity._.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return _this.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}}:null;case"paste":return agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ClipboardModule,"Paste from Clipboard")?{name:localeTextFunc("paste","Paste"),shortcut:localeTextFunc("ctrlV","Ctrl+V"),disabled:!0,icon:agGridCommunity._.createIconNoSpan("clipboardPaste",this.gridOptionsWrapper,null),action:function(){return _this.clipboardService.pasteFromClipboard()}}:null;case"export":var exportSubMenuItems=[],csvModuleLoaded=agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.CsvExportModule),excelModuleLoaded=agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.ExcelExportModule);return!this.gridOptionsWrapper.isSuppressCsvExport()&&csvModuleLoaded&&exportSubMenuItems.push("csvExport"),!this.gridOptionsWrapper.isSuppressExcelExport()&&excelModuleLoaded&&exportSubMenuItems.push("excelExport"),{name:localeTextFunc("export","Export"),subMenu:exportSubMenuItems,icon:agGridCommunity._.createIconNoSpan("save",this.gridOptionsWrapper,null)};case"csvExport":return{name:localeTextFunc("csvExport","CSV Export"),icon:agGridCommunity._.createIconNoSpan("csvExport",this.gridOptionsWrapper,null),action:function(){return _this.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:localeTextFunc("excelExport","Excel Export"),icon:agGridCommunity._.createIconNoSpan("excelExport",this.gridOptionsWrapper,null),action:function(){return _this.gridApi.exportDataAsExcel()}};case"separator":return"separator";default:var chartMenuItem=this.getChartItems(key);return chartMenuItem||(console.warn("AG Grid: unknown menu item type "+key),null)}},MenuItemMapper.prototype.getChartItems=function(key){var _this=this,localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),pivotChartMenuItem=function(localeKey,defaultText,chartType){return{name:localeTextFunc(localeKey,defaultText),action:function(){return _this.chartService.createPivotChart({chartType})}}},rangeChartMenuItem=function(localeKey,defaultText,chartType){return{name:localeTextFunc(localeKey,defaultText),action:function(){return _this.chartService.createChartFromCurrentRange(chartType)}}};switch(key){case"pivotChart":return{name:localeTextFunc("pivotChart","Pivot Chart"),subMenu:["pivotColumnChart","pivotBarChart","pivotPieChart","pivotLineChart","pivotXYChart","pivotAreaChart"],icon:agGridCommunity._.createIconNoSpan("chart",this.gridOptionsWrapper,null)};case"chartRange":return{name:localeTextFunc("chartRange","Chart Range"),subMenu:["rangeColumnChart","rangeBarChart","rangePieChart","rangeLineChart","rangeXYChart","rangeAreaChart","rangeHistogramChart","rangeCombinationChart"],icon:agGridCommunity._.createIconNoSpan("chart",this.gridOptionsWrapper,null)};case"pivotColumnChart":return{name:localeTextFunc("columnChart","Column"),subMenu:["pivotGroupedColumn","pivotStackedColumn","pivotNormalizedColumn"]};case"pivotGroupedColumn":return pivotChartMenuItem("groupedColumn","Grouped&lrm;","groupedColumn");case"pivotStackedColumn":return pivotChartMenuItem("stackedColumn","Stacked&lrm;","stackedColumn");case"pivotNormalizedColumn":return pivotChartMenuItem("normalizedColumn","100% Stacked&lrm;","normalizedColumn");case"rangeColumnChart":return{name:localeTextFunc("columnChart","Column"),subMenu:["rangeGroupedColumn","rangeStackedColumn","rangeNormalizedColumn"]};case"rangeGroupedColumn":return rangeChartMenuItem("groupedColumn","Grouped&lrm;","groupedColumn");case"rangeStackedColumn":return rangeChartMenuItem("stackedColumn","Stacked&lrm;","stackedColumn");case"rangeNormalizedColumn":return rangeChartMenuItem("normalizedColumn","100% Stacked&lrm;","normalizedColumn");case"pivotBarChart":return{name:localeTextFunc("barChart","Bar"),subMenu:["pivotGroupedBar","pivotStackedBar","pivotNormalizedBar"]};case"pivotGroupedBar":return pivotChartMenuItem("groupedBar","Grouped&lrm;","groupedBar");case"pivotStackedBar":return pivotChartMenuItem("stackedBar","Stacked&lrm;","stackedBar");case"pivotNormalizedBar":return pivotChartMenuItem("normalizedBar","100% Stacked&lrm;","normalizedBar");case"rangeBarChart":return{name:localeTextFunc("barChart","Bar"),subMenu:["rangeGroupedBar","rangeStackedBar","rangeNormalizedBar"]};case"rangeGroupedBar":return rangeChartMenuItem("groupedBar","Grouped&lrm;","groupedBar");case"rangeStackedBar":return rangeChartMenuItem("stackedBar","Stacked&lrm;","stackedBar");case"rangeNormalizedBar":return rangeChartMenuItem("normalizedBar","100% Stacked&lrm;","normalizedBar");case"pivotPieChart":return{name:localeTextFunc("pieChart","Pie"),subMenu:["pivotPie","pivotDoughnut"]};case"pivotPie":return pivotChartMenuItem("pie","Pie&lrm;","pie");case"pivotDoughnut":return pivotChartMenuItem("doughnut","Doughnut&lrm;","doughnut");case"rangePieChart":return{name:localeTextFunc("pieChart","Pie"),subMenu:["rangePie","rangeDoughnut"]};case"rangePie":return rangeChartMenuItem("pie","Pie&lrm;","pie");case"rangeDoughnut":return rangeChartMenuItem("doughnut","Doughnut&lrm;","doughnut");case"pivotLineChart":return pivotChartMenuItem("line","Line&lrm;","line");case"rangeLineChart":return rangeChartMenuItem("line","Line&lrm;","line");case"pivotXYChart":return{name:localeTextFunc("xyChart","X Y (Scatter)"),subMenu:["pivotScatter","pivotBubble"]};case"pivotScatter":return pivotChartMenuItem("scatter","Scatter&lrm;","scatter");case"pivotBubble":return pivotChartMenuItem("bubble","Bubble&lrm;","bubble");case"rangeXYChart":return{name:localeTextFunc("xyChart","X Y (Scatter)"),subMenu:["rangeScatter","rangeBubble"]};case"rangeScatter":return rangeChartMenuItem("scatter","Scatter&lrm;","scatter");case"rangeBubble":return rangeChartMenuItem("bubble","Bubble&lrm;","bubble");case"pivotAreaChart":return{name:localeTextFunc("areaChart","Area"),subMenu:["pivotArea","pivotStackedArea","pivotNormalizedArea"]};case"pivotArea":return pivotChartMenuItem("area","Area&lrm;","area");case"pivotStackedArea":return pivotChartMenuItem("stackedArea","Stacked&lrm;","stackedArea");case"pivotNormalizedArea":return pivotChartMenuItem("normalizedArea","100% Stacked&lrm;","normalizedArea");case"rangeAreaChart":return{name:localeTextFunc("areaChart","Area"),subMenu:["rangeArea","rangeStackedArea","rangeNormalizedArea"]};case"rangeArea":return rangeChartMenuItem("area","Area&lrm;","area");case"rangeStackedArea":return rangeChartMenuItem("stackedArea","Stacked&lrm;","stackedArea");case"rangeNormalizedArea":return rangeChartMenuItem("normalizedArea","100% Stacked&lrm;","normalizedArea");case"rangeHistogramChart":return rangeChartMenuItem("histogramChart","Histogram&lrm;","histogram");case"rangeColumnLineCombo":return rangeChartMenuItem("columnLineCombo","Column & Line&lrm;","columnLineCombo");case"rangeAreaColumnCombo":return rangeChartMenuItem("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo");case"rangeCombinationChart":return{name:localeTextFunc("combinationChart","Combination"),subMenu:["rangeColumnLineCombo","rangeAreaColumnCombo"]};default:return null}},MenuItemMapper.prototype.createAggregationSubMenu=function(column){var columnToUse,_this=this,localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),columnIsAlreadyAggValue=column.isValueActive(),funcNames=this.aggFuncService.getFuncNames(column);if(column.isPrimary())columnToUse=column;else{var pivotValueColumn=column.getColDef().pivotValueColumn;columnToUse=agGridCommunity._.exists(pivotValueColumn)?pivotValueColumn:void 0}var result=[];return funcNames.forEach((function(funcName){result.push({name:localeTextFunc(funcName,funcName),action:function(){_this.columnModel.setColumnAggFunc(columnToUse,funcName,"contextMenu"),_this.columnModel.addValueColumn(columnToUse,"contextMenu")},checked:columnIsAlreadyAggValue&&columnToUse.getAggFunc()===funcName})})),result},__decorate$1w([agGridCommunity.Autowired("columnModel")],MenuItemMapper.prototype,"columnModel",void 0),__decorate$1w([agGridCommunity.Autowired("gridApi")],MenuItemMapper.prototype,"gridApi",void 0),__decorate$1w([agGridCommunity.Optional("clipboardService")],MenuItemMapper.prototype,"clipboardService",void 0),__decorate$1w([agGridCommunity.Optional("aggFuncService")],MenuItemMapper.prototype,"aggFuncService",void 0),__decorate$1w([agGridCommunity.Optional("chartService")],MenuItemMapper.prototype,"chartService",void 0),MenuItemMapper=__decorate$1w([agGridCommunity.Bean("menuItemMapper")],MenuItemMapper)}(agGridCommunity.BeanStub),MenuModule={moduleName:agGridCommunity.ModuleNames.MenuModule,beans:[EnterpriseMenuFactory,ContextMenuFactory,MenuItemMapper],dependantModules:[EnterpriseCoreModule]},__extends$37=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$v=function(){return __assign$v=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$v.apply(this,arguments)},__decorate$1x=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MultiFilter=function(_super){function MultiFilter(){var _this=_super.call(this,'<div class="ag-multi-filter ag-menu-list-compact"></div>')||this;return _this.filterDefs=[],_this.filters=[],_this.guiDestroyFuncs=[],_this.activeFilterIndices=[],_this.lastActivatedMenuItem=null,_this.afterFiltersReadyFuncs=[],_this}return __extends$37(MultiFilter,_super),MultiFilter.prototype.postConstruct=function(){var _this=this;this.initialiseTabGuard({onFocusIn:function(e){return _this.onFocusIn(e)}})},MultiFilter.getFilterDefs=function(params){var filters=params.filters;return filters&&filters.length>0?filters:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]},MultiFilter.prototype.init=function(params){var _this=this;this.params=params,this.filterDefs=MultiFilter.getFilterDefs(params);var column=params.column,filterChangedCallback=params.filterChangedCallback;this.column=column,this.filterChangedCallback=filterChangedCallback;var filterPromises=[];return this.filterDefs.forEach((function(filterDef,index){var filterPromise=_this.createFilter(filterDef,index);null!=filterPromise&&filterPromises.push(filterPromise)})),agGridCommunity.AgPromise.all(filterPromises).then((function(filters){_this.filters=filters,_this.refreshGui("columnMenu"),_this.afterFiltersReadyFuncs.forEach((function(f){return f()})),_this.afterFiltersReadyFuncs.length=0}))},MultiFilter.prototype.refreshGui=function(container){var _this=this;container!==this.lastOpenedInContainer&&(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),this.filters.forEach((function(filter,index){index>0&&_this.appendChild(agGridCommunity._.loadTemplate('<div class="ag-filter-separator"></div>'));var filterGui,filterDef=_this.filterDefs[index],filterTitle=_this.getFilterTitle(filter,filterDef);if("subMenu"===filterDef.display&&"toolPanel"!==container)filterGui=_this.insertFilterMenu(filter,filterTitle).getGui();else if("subMenu"===filterDef.display||"accordion"===filterDef.display){filterGui=_this.insertFilterGroup(filter,filterTitle).getGui()}else filterGui=filter.getGui();_this.appendChild(filterGui)})),this.lastOpenedInContainer=container)},MultiFilter.prototype.getFilterTitle=function(filter,filterDef){if(null!=filterDef.title)return filterDef.title;var filterWithoutType=filter;return"function"==typeof filterWithoutType.getFilterTitle?filterWithoutType.getFilterTitle():"Filter"},MultiFilter.prototype.destroyChildren=function(){this.guiDestroyFuncs.forEach((function(func){return func()})),this.guiDestroyFuncs.length=0},MultiFilter.prototype.insertFilterMenu=function(filter,name){var _this=this,menuItem=this.createBean(new agGridCommunity.AgMenuItemComponent({name,subMenu:filter,cssClasses:["ag-multi-filter-menu-item"],isCompact:!0,isAnotherSubMenuOpen:function(){return!1}}));return menuItem.setParentComponent(this),this.guiDestroyFuncs.push((function(){return _this.destroyBean(menuItem)})),this.addManagedListener(menuItem,agGridCommunity.AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED,(function(event){_this.lastActivatedMenuItem&&_this.lastActivatedMenuItem!==event.menuItem&&_this.lastActivatedMenuItem.deactivate(),_this.lastActivatedMenuItem=event.menuItem})),menuItem.addGuiEventListener("focusin",(function(){return menuItem.activate()})),menuItem.addGuiEventListener("focusout",(function(){menuItem.isSubMenuOpen()||menuItem.deactivate()})),menuItem},MultiFilter.prototype.insertFilterGroup=function(filter,title){var _this=this,group=this.createBean(new agGridCommunity.AgGroupComponent({title,cssIdentifier:"multi-filter"}));if(this.guiDestroyFuncs.push((function(){return _this.destroyBean(group)})),group.addItem(filter.getGui()),group.toggleGroupExpand(!1),filter.afterGuiAttached){var params_1={container:this.lastOpenedInContainer,suppressFocus:!0};group.addManagedListener(group,agGridCommunity.AgGroupComponent.EVENT_EXPANDED,(function(){return filter.afterGuiAttached(params_1)}))}return group},MultiFilter.prototype.isFilterActive=function(){return this.filters.some((function(filter){return filter.isFilterActive()}))},MultiFilter.prototype.getLastActiveFilterIndex=function(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null},MultiFilter.prototype.doesFilterPass=function(params,filterToSkip){var rowPasses=!0;return this.filters.forEach((function(filter){rowPasses&&filter!==filterToSkip&&filter.isFilterActive()&&(rowPasses=filter.doesFilterPass(params))})),rowPasses},MultiFilter.prototype.getFilterType=function(){return"multi"},MultiFilter.prototype.getModelFromUi=function(){return{filterType:this.getFilterType(),filterModels:this.filters.map((function(filter){var providedFilter=filter;return"function"==typeof providedFilter.getModelFromUi?providedFilter.getModelFromUi():null}))}},MultiFilter.prototype.getModel=function(){return this.isFilterActive()?{filterType:this.getFilterType(),filterModels:this.filters.map((function(filter){return filter.isFilterActive()?filter.getModel():null}))}:null},MultiFilter.prototype.setModel=function(model){var _this=this,setFilterModel=function(filter,filterModel){return new agGridCommunity.AgPromise((function(resolve){var promise=filter.setModel(filterModel);promise?promise.then((function(){return resolve()})):resolve()}))},promises=[];return null==model?promises=this.filters.map((function(filter,index){var res=setFilterModel(filter,null);return _this.updateActiveList(index),res})):this.filters.forEach((function(filter,index){var filterModel=model.filterModels.length>index?model.filterModels[index]:null,res=setFilterModel(filter,filterModel);promises.push(res),_this.updateActiveList(index)})),agGridCommunity.AgPromise.all(promises).then((function(){}))},MultiFilter.prototype.applyModel=function(){var result=!1;return this.filters.forEach((function(filter){filter instanceof agGridCommunity.ProvidedFilter&&(result=filter.applyModel()||result)})),result},MultiFilter.prototype.getChildFilterInstance=function(index){return this.filters[index]},MultiFilter.prototype.afterGuiAttached=function(params){params&&this.refreshGui(params.container);var filters=this.params.filters,suppressFocus=filters&&filters.some((function(filter){return filter.display&&"inline"!==filter.display}));this.executeFunctionIfExists("afterGuiAttached",__assign$v(__assign$v({},params||{}),{suppressFocus}));var eDocument=this.gridOptionsWrapper.getDocument(),activeEl=eDocument.activeElement;suppressFocus&&(activeEl===eDocument.body||this.getGui().contains(activeEl))&&this.forceFocusOutOfContainer(!0)},MultiFilter.prototype.onAnyFilterChanged=function(){this.executeFunctionIfExists("onAnyFilterChanged")},MultiFilter.prototype.onNewRowsLoaded=function(){this.executeFunctionIfExists("onNewRowsLoaded")},MultiFilter.prototype.destroy=function(){var _this=this;this.filters.forEach((function(filter){filter.setModel(null),_this.destroyBean(filter)})),this.filters.length=0,this.destroyChildren(),_super.prototype.destroy.call(this)},MultiFilter.prototype.executeFunctionIfExists=function(name){for(var params=[],_i=1;_i<arguments.length;_i++)params[_i-1]=arguments[_i];agGridCommunity._.forEachReverse(this.filters,(function(filter){var func=filter[name];"function"==typeof func&&func.apply(filter,params)}))},MultiFilter.prototype.createFilter=function(filterDef,index){var filterInstance,_this=this,_a=this.params,filterModifiedCallback=_a.filterModifiedCallback,doesRowPassOtherFilter=_a.doesRowPassOtherFilter,filterParams=__assign$v(__assign$v({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback,filterChangedCallback:function(additionalEventAttributes){_this.executeWhenAllFiltersReady((function(){return _this.filterChanged(index,additionalEventAttributes)}))},doesRowPassOtherFilter:function(node){return doesRowPassOtherFilter(node)&&_this.doesFilterPass({node,data:node.data},filterInstance)}}),compDetails=this.userComponentFactory.getFilterDetails(filterDef,filterParams,"agTextColumnFilter");if(!compDetails)return null;var filterPromise=compDetails.newAgStackInstance();return filterPromise&&filterPromise.then((function(filter){return filterInstance=filter})),filterPromise},MultiFilter.prototype.executeWhenAllFiltersReady=function(action){this.filters&&this.filters.length>0?action():this.afterFiltersReadyFuncs.push(action)},MultiFilter.prototype.updateActiveList=function(index){var changedFilter=this.filters[index];agGridCommunity._.removeFromArray(this.activeFilterIndices,index),changedFilter.isFilterActive()&&this.activeFilterIndices.push(index)},MultiFilter.prototype.filterChanged=function(index,additionalEventAttributes){this.updateActiveList(index),this.filterChangedCallback(additionalEventAttributes);var changedFilter=this.filters[index];this.filters.forEach((function(filter){filter!==changedFilter&&"function"==typeof filter.onAnyFilterChanged&&filter.onAnyFilterChanged()}))},MultiFilter.prototype.onFocusIn=function(e){return null==this.lastActivatedMenuItem||this.lastActivatedMenuItem.getGui().contains(e.target)||(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null),!0},__decorate$1x([agGridCommunity.Autowired("filterManager")],MultiFilter.prototype,"filterManager",void 0),__decorate$1x([agGridCommunity.Autowired("userComponentFactory")],MultiFilter.prototype,"userComponentFactory",void 0),__decorate$1x([agGridCommunity.PostConstruct],MultiFilter.prototype,"postConstruct",null),MultiFilter}(agGridCommunity.TabGuardComp),__extends$38=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$w=function(){return __assign$w=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$w.apply(this,arguments)},__decorate$1y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MultiFloatingFilterComp=function(_super){function MultiFloatingFilterComp(){var _this=_super.call(this,'<div class="ag-multi-floating-filter ag-floating-filter-input"></div>')||this;return _this.floatingFilters=[],_this}return __extends$38(MultiFloatingFilterComp,_super),MultiFloatingFilterComp.prototype.init=function(params){var _this=this;this.params=params;var filterParams=params.filterParams,floatingFilterPromises=[];return MultiFilter.getFilterDefs(filterParams).forEach((function(filterDef,index){var floatingFilterParams=__assign$w(__assign$w({},params),{parentFilterInstance:function(callback){_this.parentMultiFilterInstance((function(parent){var child=parent.getChildFilterInstance(index);null!=child&&callback(child)}))}}),floatingFilterPromise=_this.createFloatingFilter(filterDef,floatingFilterParams);null!=floatingFilterPromise&&floatingFilterPromises.push(floatingFilterPromise)})),agGridCommunity.AgPromise.all(floatingFilterPromises).then((function(floatingFilters){floatingFilters.forEach((function(floatingFilter,index){_this.floatingFilters.push(floatingFilter);var gui=floatingFilter.getGui();_this.appendChild(gui),index>0&&agGridCommunity._.setDisplayed(gui,!1)}))}))},MultiFloatingFilterComp.prototype.onParentModelChanged=function(model,event){var _this=this;event&&event.afterFloatingFilter||this.parentMultiFilterInstance((function(parent){if(null==model)_this.floatingFilters.forEach((function(filter,i){filter.onParentModelChanged(null,event),agGridCommunity._.setDisplayed(filter.getGui(),0===i)}));else{var lastActiveFloatingFilterIndex_1=parent.getLastActiveFilterIndex();_this.floatingFilters.forEach((function(filter,i){var filterModel=model.filterModels.length>i?model.filterModels[i]:null;filter.onParentModelChanged(filterModel,event);var shouldShow=null==lastActiveFloatingFilterIndex_1?0===i:i===lastActiveFloatingFilterIndex_1;agGridCommunity._.setDisplayed(filter.getGui(),shouldShow)}))}}))},MultiFloatingFilterComp.prototype.destroy=function(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,_super.prototype.destroy.call(this)},MultiFloatingFilterComp.prototype.createFloatingFilter=function(filterDef,params){var defaultComponentName=this.userComponentFactory.getDefaultFloatingFilterType(filterDef)||"agTextColumnFloatingFilter",compDetails=this.userComponentFactory.getFloatingFilterCompDetails(filterDef,params,defaultComponentName);return compDetails?compDetails.newAgStackInstance():null},MultiFloatingFilterComp.prototype.parentMultiFilterInstance=function(cb){this.params.parentFilterInstance((function(parent){if(!(parent instanceof MultiFilter))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as it's parent");cb(parent)}))},__decorate$1y([agGridCommunity.Autowired("userComponentFactory")],MultiFloatingFilterComp.prototype,"userComponentFactory",void 0),MultiFloatingFilterComp}(agGridCommunity.Component),MultiFilterModule={moduleName:agGridCommunity.ModuleNames.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:MultiFilter},{componentName:"agMultiColumnFloatingFilter",componentClass:MultiFloatingFilterComp}],dependantModules:[EnterpriseCoreModule]},__extends$39=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RichSelectRow=function(_super){function RichSelectRow(params){var _this=_super.call(this,'<div class="ag-rich-select-row"></div>')||this;return _this.params=params,_this}return __extends$39(RichSelectRow,_super),RichSelectRow.prototype.setState=function(value,valueFormatted,selected){this.populateWithRenderer(value,valueFormatted)||this.populateWithoutRenderer(value,valueFormatted),this.addOrRemoveCssClass("ag-rich-select-row-selected",selected)},RichSelectRow.prototype.populateWithoutRenderer=function(value,valueFormatted){var valueToRender=null!=valueFormatted?valueFormatted:value;agGridCommunity._.exists(valueToRender)&&""!==valueToRender?this.getGui().textContent=valueToRender.toString():this.getGui().innerHTML="&nbsp;"},RichSelectRow.prototype.populateWithRenderer=function(value,valueFormatted){var _this=this,params={value,valueFormatted,api:this.gridOptionsWrapper.getApi()},compDetails=this.userComponentFactory.getCellRendererDetails(this.params,params),cellRendererPromise=compDetails?compDetails.newAgStackInstance():void 0;return null!=cellRendererPromise?agGridCommunity._.bindCellRendererToHtmlElement(cellRendererPromise,this.getGui()):this.getGui().innerText=null!=params.valueFormatted?params.valueFormatted:params.value,!!cellRendererPromise&&(cellRendererPromise.then((function(childComponent){_this.addDestroyFunc((function(){_this.getContext().destroyBean(childComponent)}))})),!0)},__decorate$1z([agGridCommunity.Autowired("userComponentFactory")],RichSelectRow.prototype,"userComponentFactory",void 0),RichSelectRow}(agGridCommunity.Component),__extends$3a=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1A=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RichSelectCellEditor=function(_super){function RichSelectCellEditor(){var _this=_super.call(this,RichSelectCellEditor.TEMPLATE)||this;return _this.selectionConfirmed=!1,_this.searchString="",_this}return __extends$3a(RichSelectCellEditor,_super),RichSelectCellEditor.prototype.init=function(params){this.params=params,this.selectedValue=params.value,this.originalSelectedValue=params.value,this.focusAfterAttached=params.cellStartedEdit;var icon=agGridCommunity._.createIconNoSpan("smallDown",this.gridOptionsWrapper);if(icon.classList.add("ag-rich-select-value-icon"),this.eValue.appendChild(icon),this.virtualList=this.getContext().createBean(new agGridCommunity.VirtualList("rich-select")),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),agGridCommunity._.exists(this.params.cellHeight)&&this.virtualList.setRowHeight(this.params.cellHeight),this.renderSelectedValue(),agGridCommunity._.missing(params.values))console.warn("AG Grid: richSelectCellEditor requires values for it to work");else{var values=params.values;this.virtualList.setModel({getRowCount:function(){return values.length},getRow:function(index){return values[index]}}),this.addGuiEventListener("keydown",this.onKeyDown.bind(this));var virtualListGui=this.virtualList.getGui();this.addManagedListener(virtualListGui,"click",this.onClick.bind(this)),this.addManagedListener(virtualListGui,"mousemove",this.onMouseMove.bind(this));var debounceDelay=agGridCommunity._.exists(params.searchDebounceDelay)?params.searchDebounceDelay:300;this.clearSearchString=agGridCommunity._.debounce(this.clearSearchString,debounceDelay),agGridCommunity._.exists(params.charPress)&&this.searchText(params.charPress)}},RichSelectCellEditor.prototype.onKeyDown=function(event){var key=event.key;switch(event.preventDefault(),key){case agGridCommunity.KeyCode.ENTER:this.onEnterKeyDown();break;case agGridCommunity.KeyCode.TAB:this.confirmSelection();break;case agGridCommunity.KeyCode.DOWN:case agGridCommunity.KeyCode.UP:this.onNavigationKeyPressed(event,key);break;default:this.searchText(event)}},RichSelectCellEditor.prototype.confirmSelection=function(){this.selectionConfirmed=!0},RichSelectCellEditor.prototype.onEnterKeyDown=function(){this.confirmSelection(),this.params.stopEditing()},RichSelectCellEditor.prototype.onNavigationKeyPressed=function(event,key){event.preventDefault();var oldIndex=this.params.values.indexOf(this.selectedValue),newIndex=key===agGridCommunity.KeyCode.UP?oldIndex-1:oldIndex+1;if(newIndex>=0&&newIndex<this.params.values.length){var valueToSelect=this.params.values[newIndex];this.setSelectedValue(valueToSelect)}},RichSelectCellEditor.prototype.searchText=function(key){if("string"==typeof key)this.searchString+=key,this.runSearch(),this.clearSearchString();else{var keyString=key.key;if(keyString===agGridCommunity.KeyCode.BACKSPACE)this.searchString=this.searchString.slice(0,-1),keyString="";else if(!agGridCommunity._.isEventFromPrintableCharacter(key))return;this.searchText(keyString)}},RichSelectCellEditor.prototype.runSearch=function(){var searchStrings,_this=this,values=this.params.values;if("number"!=typeof values[0]&&"string"!=typeof values[0]||(searchStrings=values.map(String)),"object"==typeof values[0]&&this.params.colDef.keyCreator&&(searchStrings=values.map((function(value){var keyParams={value,colDef:_this.params.colDef,column:_this.params.column,node:_this.params.node,data:_this.params.data,api:_this.gridOptionsWrapper.getApi(),columnApi:_this.gridOptionsWrapper.getColumnApi(),context:_this.gridOptionsWrapper.getContext()};return _this.params.colDef.keyCreator(keyParams)}))),searchStrings){var topSuggestion=agGridCommunity._.fuzzySuggestions(this.searchString,searchStrings,!0,!0)[0];if(topSuggestion){var topValue=values[searchStrings.indexOf(topSuggestion)];this.setSelectedValue(topValue)}}},RichSelectCellEditor.prototype.clearSearchString=function(){this.searchString=""},RichSelectCellEditor.prototype.renderSelectedValue=function(){var _this=this,valueFormatted=this.params.formatValue(this.selectedValue),eValue=this.eValue,params={value:this.selectedValue,valueFormatted,api:this.gridOptionsWrapper.getApi()},compDetails=this.userComponentFactory.getCellRendererDetails(this.params,params),promise=compDetails?compDetails.newAgStackInstance():void 0;promise?(agGridCommunity._.bindCellRendererToHtmlElement(promise,eValue),promise.then((function(renderer){_this.addDestroyFunc((function(){return _this.getContext().destroyBean(renderer)}))}))):agGridCommunity._.exists(this.selectedValue)?eValue.innerHTML=valueFormatted:agGridCommunity._.clearElement(eValue)},RichSelectCellEditor.prototype.setSelectedValue=function(value){if(this.selectedValue!==value){var index=this.params.values.indexOf(value);-1!==index&&(this.selectedValue=value,this.virtualList.ensureIndexVisible(index),this.virtualList.refresh())}},RichSelectCellEditor.prototype.createRowComponent=function(value){var valueFormatted=this.params.formatValue(value),row=new RichSelectRow(this.params);return this.getContext().createBean(row),row.setState(value,valueFormatted,value===this.selectedValue),row},RichSelectCellEditor.prototype.onMouseMove=function(mouseEvent){var rect=this.virtualList.getGui().getBoundingClientRect(),scrollTop=this.virtualList.getScrollTop(),mouseY=mouseEvent.clientY-rect.top+scrollTop,row=Math.floor(mouseY/this.virtualList.getRowHeight()),value=this.params.values[row];void 0!==value&&this.setSelectedValue(value)},RichSelectCellEditor.prototype.onClick=function(){this.confirmSelection(),this.params.stopEditing()},RichSelectCellEditor.prototype.afterGuiAttached=function(){var selectedIndex=this.params.values.indexOf(this.selectedValue);this.virtualList.refresh(),selectedIndex>=0&&this.virtualList.ensureIndexVisible(selectedIndex),this.virtualList.refresh(),this.focusAfterAttached&&this.getGui().focus()},RichSelectCellEditor.prototype.getValue=function(){return this.selectionConfirmed?this.selectedValue:this.originalSelectedValue},RichSelectCellEditor.TEMPLATE='<div class="ag-rich-select" tabindex="-1">\n            <div ref="eValue" class="ag-rich-select-value"></div>\n            <div ref="eList" class="ag-rich-select-list"></div>\n        </div>',__decorate$1A([agGridCommunity.Autowired("userComponentFactory")],RichSelectCellEditor.prototype,"userComponentFactory",void 0),__decorate$1A([agGridCommunity.RefSelector("eValue")],RichSelectCellEditor.prototype,"eValue",void 0),__decorate$1A([agGridCommunity.RefSelector("eList")],RichSelectCellEditor.prototype,"eList",void 0),RichSelectCellEditor}(agGridCommunity.PopupComponent),RichSelectModule={moduleName:agGridCommunity.ModuleNames.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:RichSelectCellEditor},{componentName:"agRichSelectCellEditor",componentClass:RichSelectCellEditor}],dependantModules:[EnterpriseCoreModule]},__extends$3b=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1B=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ServerSideRowModel=function(_super){function ServerSideRowModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.pauseStoreUpdateListening=!1,_this.started=!1,_this}return __extends$3b(ServerSideRowModel,_super),ServerSideRowModel.prototype.ensureRowHeightsValid=function(){return!1},ServerSideRowModel.prototype.start=function(){this.started=!0;var datasource=this.gridOptionsWrapper.getServerSideDatasource();datasource&&this.setDatasource(datasource)},ServerSideRowModel.prototype.destroyDatasource=function(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)},ServerSideRowModel.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));var resetListener=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGED,resetListener),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGED,resetListener),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,resetListener),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,resetListener),this.verifyProps()},ServerSideRowModel.prototype.verifyProps=function(){if(null!=this.gridOptionsWrapper.getInitialGroupOrderComparator()){agGridCommunity._.doOnce((function(){return console.warn("AG Grid: initialGroupOrderComparator cannot be used with Server Side Row Model. If using Full Store, then provide the rows to the grid in the desired sort order. If using Partial Store, then sorting is done on the server side, nothing to do with the client.")}),"SSRM.InitialGroupOrderComparator")}if(this.gridOptionsWrapper.isRowSelection()&&null==this.gridOptionsWrapper.getRowIdFunc()){agGridCommunity._.doOnce((function(){return console.warn("AG Grid: getRowId callback must be provided for Server Side Row Model selection to work correctly.")}),"SSRM.SelectionNeedsRowNodeIdFunc")}},ServerSideRowModel.prototype.setDatasource=function(datasource){this.started&&(this.destroyDatasource(),this.datasource=datasource,this.resetRootStore())},ServerSideRowModel.prototype.isLastRowIndexKnown=function(){var cache=this.getRootStore();return!!cache&&cache.isLastRowIndexKnown()},ServerSideRowModel.prototype.onColumnEverything=function(){if(!this.gridOptionsWrapper.isSuppressEnterpriseResetOnNewColumns())if(this.storeParams){var rowGroupColumnVos=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),valueColumnVos=this.columnsToValueObjects(this.columnModel.getValueColumns()),pivotColumnVos=this.columnsToValueObjects(this.columnModel.getPivotColumns()),sortModelDifferent=!agGridCommunity._.jsonEquals(this.storeParams.sortModel,this.sortController.getSortModel()),rowGroupDifferent=!agGridCommunity._.jsonEquals(this.storeParams.rowGroupCols,rowGroupColumnVos),pivotDifferent=!agGridCommunity._.jsonEquals(this.storeParams.pivotCols,pivotColumnVos),valuesDifferent=!agGridCommunity._.jsonEquals(this.storeParams.valueCols,valueColumnVos);(sortModelDifferent||rowGroupDifferent||pivotDifferent||valuesDifferent)&&this.resetRootStore()}else this.resetRootStore()},ServerSideRowModel.prototype.destroyRootStore=function(){this.rootNode&&this.rootNode.childStore&&(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())},ServerSideRowModel.prototype.refreshAfterSort=function(newSortModel,params){this.storeParams&&(this.storeParams.sortModel=newSortModel);var rootStore=this.getRootStore();rootStore&&(rootStore.refreshAfterSort(params),this.onStoreUpdated())},ServerSideRowModel.prototype.resetRootStore=function(){this.destroyRootStore(),this.rootNode=new agGridCommunity.RowNode(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds());var rowDataChangedEvent={type:agGridCommunity.Events.EVENT_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(rowDataChangedEvent),this.dispatchModelUpdated(!0)},ServerSideRowModel.prototype.columnsToValueObjects=function(columns){var _this=this;return columns.map((function(col){return{id:col.getId(),aggFunc:col.getAggFunc(),displayName:_this.columnModel.getDisplayNameForColumn(col,"model"),field:col.getColDef().field}}))},ServerSideRowModel.prototype.createStoreParams=function(){var rowGroupColumnVos=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),valueColumnVos=this.columnsToValueObjects(this.columnModel.getValueColumns()),pivotColumnVos=this.columnsToValueObjects(this.columnModel.getPivotColumns()),dynamicRowHeight=this.gridOptionsWrapper.isDynamicRowHeight();return{valueCols:valueColumnVos,rowGroupCols:rowGroupColumnVos,pivotCols:pivotColumnVos,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.getFilterModel(),sortModel:this.sortListener.extractSortModel(),datasource:this.datasource,lastAccessedSequence:new agGridCommunity.NumberSequence,dynamicRowHeight}},ServerSideRowModel.prototype.getParams=function(){return this.storeParams},ServerSideRowModel.prototype.dispatchModelUpdated=function(reset){void 0===reset&&(reset=!1);var modelUpdatedEvent={type:agGridCommunity.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:!reset,keepRenderedRows:!reset,newPage:!1,newData:!1};this.eventService.dispatchEvent(modelUpdatedEvent)},ServerSideRowModel.prototype.onStoreUpdated=function(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())},ServerSideRowModel.prototype.onRowHeightChanged=function(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()},ServerSideRowModel.prototype.updateRowIndexesAndBounds=function(){var rootStore=this.getRootStore();rootStore&&rootStore.setDisplayIndexes(new agGridCommunity.NumberSequence,{value:0})},ServerSideRowModel.prototype.retryLoads=function(){var rootStore=this.getRootStore();rootStore&&(rootStore.retryLoads(),this.onStoreUpdated())},ServerSideRowModel.prototype.getRow=function(index){var rootStore=this.getRootStore();if(rootStore)return rootStore.getRowUsingDisplayIndex(index)},ServerSideRowModel.prototype.expandAll=function(value){this.pauseStoreUpdateListening=!0,this.forEachNode((function(node){node.group&&node.setExpanded(value)})),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()},ServerSideRowModel.prototype.refreshAfterFilter=function(newFilterModel,params){this.storeParams&&(this.storeParams.filterModel=newFilterModel);var rootStore=this.getRootStore();rootStore&&(rootStore.refreshAfterFilter(params),this.onStoreUpdated())},ServerSideRowModel.prototype.getRootStore=function(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore},ServerSideRowModel.prototype.getRowCount=function(){var rootStore=this.getRootStore();return rootStore?rootStore.getDisplayIndexEnd():0},ServerSideRowModel.prototype.getTopLevelRowCount=function(){var rootStore=this.getRootStore();return rootStore?rootStore.getRowCount():1},ServerSideRowModel.prototype.getTopLevelRowDisplayedIndex=function(topLevelIndex){var rootStore=this.getRootStore();return rootStore?rootStore.getTopLevelRowDisplayedIndex(topLevelIndex):topLevelIndex},ServerSideRowModel.prototype.getRowBounds=function(index){var rootStore=this.getRootStore();return rootStore?rootStore.getRowBounds(index):{rowTop:0,rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber()}},ServerSideRowModel.prototype.getRowIndexAtPixel=function(pixel){var rootStore=this.getRootStore();return pixel<=0||!rootStore?0:rootStore.getRowIndexAtPixel(pixel)},ServerSideRowModel.prototype.isEmpty=function(){return!1},ServerSideRowModel.prototype.isRowsToRender=function(){return null!=this.getRootStore()&&this.getRowCount()>0},ServerSideRowModel.prototype.getType=function(){return agGridCommunity.Constants.ROW_MODEL_TYPE_SERVER_SIDE},ServerSideRowModel.prototype.forEachNode=function(callback){var rootStore=this.getRootStore();rootStore&&rootStore.forEachNodeDeep(callback)},ServerSideRowModel.prototype.forEachNodeAfterFilterAndSort=function(callback){var rootStore=this.getRootStore();rootStore&&rootStore.forEachNodeDeepAfterFilterAndSort(callback)},ServerSideRowModel.prototype.executeOnStore=function(route,callback){var rootStore=this.getRootStore();if(rootStore){var storeToExecuteOn=rootStore.getChildStore(route);storeToExecuteOn&&callback(storeToExecuteOn)}},ServerSideRowModel.prototype.refreshStore=function(params){void 0===params&&(params={});var route=params.route?params.route:[];this.executeOnStore(route,(function(store){return store.refreshStore(1==params.purge)}))},ServerSideRowModel.prototype.getStoreState=function(){var res=[],rootStore=this.getRootStore();return rootStore&&rootStore.addStoreStates(res),res},ServerSideRowModel.prototype.getNodesInRangeForSelection=function(firstInRange,lastInRange){return agGridCommunity._.exists(lastInRange)&&firstInRange.parent!==lastInRange.parent?[]:firstInRange.parent.childStore.getRowNodesInRange(lastInRange,firstInRange)},ServerSideRowModel.prototype.getRowNode=function(id){var result;return this.forEachNode((function(rowNode){rowNode.id===id&&(result=rowNode),rowNode.detailNode&&rowNode.detailNode.id===id&&(result=rowNode.detailNode)})),result},ServerSideRowModel.prototype.isRowPresent=function(rowNode){return!!this.getRowNode(rowNode.id)},__decorate$1B([agGridCommunity.Autowired("columnModel")],ServerSideRowModel.prototype,"columnModel",void 0),__decorate$1B([agGridCommunity.Autowired("filterManager")],ServerSideRowModel.prototype,"filterManager",void 0),__decorate$1B([agGridCommunity.Autowired("sortController")],ServerSideRowModel.prototype,"sortController",void 0),__decorate$1B([agGridCommunity.Autowired("gridApi")],ServerSideRowModel.prototype,"gridApi",void 0),__decorate$1B([agGridCommunity.Autowired("columnApi")],ServerSideRowModel.prototype,"columnApi",void 0),__decorate$1B([agGridCommunity.Autowired("rowRenderer")],ServerSideRowModel.prototype,"rowRenderer",void 0),__decorate$1B([agGridCommunity.Autowired("ssrmSortService")],ServerSideRowModel.prototype,"sortListener",void 0),__decorate$1B([agGridCommunity.Autowired("ssrmNodeManager")],ServerSideRowModel.prototype,"nodeManager",void 0),__decorate$1B([agGridCommunity.Autowired("ssrmStoreFactory")],ServerSideRowModel.prototype,"storeFactory",void 0),__decorate$1B([agGridCommunity.Autowired("beans")],ServerSideRowModel.prototype,"beans",void 0),__decorate$1B([agGridCommunity.PreDestroy],ServerSideRowModel.prototype,"destroyDatasource",null),__decorate$1B([agGridCommunity.PostConstruct],ServerSideRowModel.prototype,"addEventListeners",null),__decorate$1B([agGridCommunity.PreDestroy],ServerSideRowModel.prototype,"destroyRootStore",null),ServerSideRowModel=__decorate$1B([agGridCommunity.Bean("rowModel")],ServerSideRowModel)}(agGridCommunity.BeanStub),__extends$3c=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1C=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},StoreUtils=function(_super){function StoreUtils(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$3c(StoreUtils,_super),StoreUtils.prototype.loadFromDatasource=function(p){var storeParams=p.storeParams,parentBlock=p.parentBlock,groupKeys=p.parentNode.getGroupKeys();if(storeParams.datasource){var request={startRow:p.startRow,endRow:p.endRow,rowGroupCols:storeParams.rowGroupCols,valueCols:storeParams.valueCols,pivotCols:storeParams.pivotCols,pivotMode:storeParams.pivotMode,groupKeys,filterModel:storeParams.filterModel,sortModel:storeParams.sortModel},getRowsParams={successCallback:p.successCallback,success:p.success,failCallback:p.failCallback,fail:p.fail,request,parentNode:p.parentNode,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};window.setTimeout((function(){storeParams.datasource&&parentBlock.isAlive()?storeParams.datasource.getRows(getRowsParams):p.failCallback()}),0)}},StoreUtils.prototype.getChildStore=function(keys,currentCache,findNodeFunc){if(agGridCommunity._.missingOrEmpty(keys))return currentCache;var nextNode=findNodeFunc(keys[0]);if(nextNode){var keyListForNextLevel=keys.slice(1,keys.length),nextStore=nextNode.childStore;return nextStore?nextStore.getChildStore(keyListForNextLevel):null}return null},StoreUtils.prototype.isServerRefreshNeeded=function(parentRowNode,rowGroupCols,params){if(params.alwaysReset||params.valueColChanged||params.secondaryColChanged)return!0;var level=parentRowNode.level+1;if(!(level<rowGroupCols.length))return!0;var colIdThisGroup=rowGroupCols[level].id;return!!(params.changedColumns.indexOf(colIdThisGroup)>-1)},__decorate$1C([agGridCommunity.Autowired("columnApi")],StoreUtils.prototype,"columnApi",void 0),__decorate$1C([agGridCommunity.Autowired("gridApi")],StoreUtils.prototype,"gridApi",void 0),StoreUtils=__decorate$1C([agGridCommunity.Bean("ssrmStoreUtils")],StoreUtils)}(agGridCommunity.BeanStub),__extends$3d=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1D=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},BlockUtils=function(_super){function BlockUtils(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$3d(BlockUtils,_super),BlockUtils.prototype.postConstruct=function(){this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.usingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},BlockUtils.prototype.createRowNode=function(params){var rowNode=new agGridCommunity.RowNode(this.beans),rowHeight=null!=params.rowHeight?params.rowHeight:this.rowHeight;return rowNode.setRowHeight(rowHeight),rowNode.group=params.group,rowNode.leafGroup=params.leafGroup,rowNode.level=params.level,rowNode.uiLevel=params.level,rowNode.parent=params.parent,rowNode.stub=!0,rowNode.group&&(rowNode.expanded=!1,rowNode.field=params.field,rowNode.rowGroupColumn=params.rowGroupColumn),rowNode},BlockUtils.prototype.destroyRowNodes=function(rowNodes){rowNodes&&rowNodes.forEach(this.destroyRowNode.bind(this))},BlockUtils.prototype.destroyRowNode=function(rowNode){rowNode.childStore&&(this.destroyBean(rowNode.childStore),rowNode.childStore=null),rowNode.clearRowTopAndRowIndex(),null!=rowNode.id&&this.nodeManager.removeNode(rowNode)},BlockUtils.prototype.setTreeGroupInfo=function(rowNode){var isGroupFunc=this.gridOptionsWrapper.getIsServerSideGroupFunc(),getKeyFunc=this.gridOptionsWrapper.getServerSideGroupKeyFunc();null!=isGroupFunc&&(rowNode.setGroup(isGroupFunc(rowNode.data)),rowNode.group&&null!=getKeyFunc&&(rowNode.key=getKeyFunc(rowNode.data))),rowNode.group||null==rowNode.childStore||(this.destroyBean(rowNode.childStore),rowNode.childStore=null)},BlockUtils.prototype.setRowGroupInfo=function(rowNode){rowNode.key=this.valueService.getValue(rowNode.rowGroupColumn,rowNode),null!==rowNode.key&&void 0!==rowNode.key||agGridCommunity._.doOnce((function(){console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),rowNode.rowGroupColumn&&console.warn("column = "+rowNode.rowGroupColumn.getId()),console.warn("data is ",rowNode.data)}),"ServerSideBlock-CannotHaveNullOrUndefinedForKey")},BlockUtils.prototype.setMasterDetailInfo=function(rowNode){var isMasterFunc=this.gridOptionsWrapper.getIsRowMasterFunc();rowNode.master=null==isMasterFunc||isMasterFunc(rowNode.data)},BlockUtils.prototype.updateDataIntoRowNode=function(rowNode,data){rowNode.updateData(data),this.usingTreeData?this.setTreeGroupInfo(rowNode):rowNode.group||this.usingMasterDetail},BlockUtils.prototype.setDataIntoRowNode=function(rowNode,data,defaultId,cachedRowHeight){rowNode.stub=!1,agGridCommunity._.exists(data)?(rowNode.setDataAndId(data,defaultId),this.usingTreeData?this.setTreeGroupInfo(rowNode):rowNode.group?this.setRowGroupInfo(rowNode):this.usingMasterDetail&&this.setMasterDetailInfo(rowNode)):(rowNode.setDataAndId(void 0,void 0),rowNode.key=null),(this.usingTreeData||rowNode.group)&&(this.setGroupDataIntoRowNode(rowNode),this.setChildCountIntoRowNode(rowNode)),agGridCommunity._.exists(data)&&rowNode.setRowHeight(this.gridOptionsWrapper.getRowHeightForNode(rowNode,!1,cachedRowHeight).height)},BlockUtils.prototype.setChildCountIntoRowNode=function(rowNode){var getChildCount=this.gridOptionsWrapper.getChildCountFunc();getChildCount&&(rowNode.allChildrenCount=getChildCount(rowNode.data))},BlockUtils.prototype.setGroupDataIntoRowNode=function(rowNode){var _this=this,groupDisplayCols=this.columnModel.getGroupDisplayColumns(),usingTreeData=this.gridOptionsWrapper.isTreeData();groupDisplayCols.forEach((function(col){if(null==rowNode.groupData&&(rowNode.groupData={}),usingTreeData)rowNode.groupData[col.getColId()]=rowNode.key;else if(col.isRowGroupDisplayed(rowNode.rowGroupColumn.getId())){var groupValue=_this.valueService.getValue(rowNode.rowGroupColumn,rowNode);rowNode.groupData[col.getColId()]=groupValue}}))},BlockUtils.prototype.clearDisplayIndex=function(rowNode){(rowNode.clearRowTopAndRowIndex(),rowNode.group&&agGridCommunity._.exists(rowNode.childStore))&&rowNode.childStore.clearDisplayIndexes();rowNode.master&&rowNode.detailNode&&rowNode.detailNode.clearRowTopAndRowIndex()},BlockUtils.prototype.setDisplayIndex=function(rowNode,displayIndexSeq,nextRowTop){if(rowNode.setRowIndex(displayIndexSeq.next()),rowNode.setRowTop(nextRowTop.value),nextRowTop.value+=rowNode.rowHeight,rowNode.master&&(rowNode.expanded&&rowNode.detailNode?(rowNode.detailNode.setRowIndex(displayIndexSeq.next()),rowNode.detailNode.setRowTop(nextRowTop.value),nextRowTop.value+=rowNode.detailNode.rowHeight):rowNode.detailNode&&rowNode.detailNode.clearRowTopAndRowIndex()),rowNode.group&&agGridCommunity._.exists(rowNode.childStore)){var childStore=rowNode.childStore;rowNode.expanded?childStore.setDisplayIndexes(displayIndexSeq,nextRowTop):childStore.clearDisplayIndexes()}},BlockUtils.prototype.binarySearchForDisplayIndex=function(displayRowIndex,rowNodes){var bottomPointer=0,topPointer=rowNodes.length-1;if(agGridCommunity._.missing(topPointer)||agGridCommunity._.missing(bottomPointer))console.warn("AG Grid: error: topPointer = "+topPointer+", bottomPointer = "+bottomPointer);else for(;;){var midPointer=Math.floor((bottomPointer+topPointer)/2),currentRowNode=rowNodes[midPointer];if(currentRowNode.rowIndex===displayRowIndex)return currentRowNode;var expandedMasterRow=currentRowNode.master&&currentRowNode.expanded,detailNode=currentRowNode.detailNode;if(expandedMasterRow&&detailNode&&detailNode.rowIndex===displayRowIndex)return currentRowNode.detailNode;var childStore=currentRowNode.childStore;if(currentRowNode.expanded&&childStore&&childStore.isDisplayIndexInStore(displayRowIndex))return childStore.getRowUsingDisplayIndex(displayRowIndex);if(currentRowNode.rowIndex<displayRowIndex)bottomPointer=midPointer+1;else{if(!(currentRowNode.rowIndex>displayRowIndex))return void console.warn("AG Grid: error: unable to locate rowIndex = "+displayRowIndex+" in cache");topPointer=midPointer-1}}},BlockUtils.prototype.extractRowBounds=function(rowNode,index){var extractRowBounds=function(currentRowNode){return{rowHeight:currentRowNode.rowHeight,rowTop:currentRowNode.rowTop}};if(rowNode.rowIndex===index)return extractRowBounds(rowNode);if(rowNode.group&&rowNode.expanded&&agGridCommunity._.exists(rowNode.childStore)){var childStore=rowNode.childStore;if(childStore.isDisplayIndexInStore(index))return childStore.getRowBounds(index)}else if(rowNode.master&&rowNode.expanded&&agGridCommunity._.exists(rowNode.detailNode)&&rowNode.detailNode.rowIndex===index)return extractRowBounds(rowNode.detailNode)},BlockUtils.prototype.getIndexAtPixel=function(rowNode,pixel){if(rowNode.isPixelInRange(pixel))return rowNode.rowIndex;var expandedMasterRow=rowNode.master&&rowNode.expanded,detailNode=rowNode.detailNode;if(expandedMasterRow&&detailNode&&detailNode.isPixelInRange(pixel))return rowNode.detailNode.rowIndex;if(rowNode.group&&rowNode.expanded&&agGridCommunity._.exists(rowNode.childStore)){var childStore=rowNode.childStore;if(childStore.isPixelInRange(pixel))return childStore.getRowIndexAtPixel(pixel)}return null},BlockUtils.prototype.createNodeIdPrefix=function(parentRowNode){for(var parts=[],rowNode=parentRowNode;rowNode&&rowNode.level>=0;)parts.push(rowNode.key),rowNode=rowNode.parent;if(parts.length>0)return parts.reverse().join("-")},BlockUtils.prototype.checkOpenByDefault=function(rowNode){if(rowNode.isExpandable()){var userFunc=this.gridOptionsWrapper.getIsServerSideGroupOpenByDefaultFunc();if(userFunc)userFunc({data:rowNode.data,rowNode})&&window.setTimeout((function(){return rowNode.setExpanded(!0)}),0)}},__decorate$1D([agGridCommunity.Autowired("valueService")],BlockUtils.prototype,"valueService",void 0),__decorate$1D([agGridCommunity.Autowired("columnModel")],BlockUtils.prototype,"columnModel",void 0),__decorate$1D([agGridCommunity.Autowired("ssrmNodeManager")],BlockUtils.prototype,"nodeManager",void 0),__decorate$1D([agGridCommunity.Autowired("beans")],BlockUtils.prototype,"beans",void 0),__decorate$1D([agGridCommunity.PostConstruct],BlockUtils.prototype,"postConstruct",null),BlockUtils=__decorate$1D([agGridCommunity.Bean("ssrmBlockUtils")],BlockUtils)}(agGridCommunity.BeanStub),__decorate$1E=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},NodeManager=function(){function NodeManager(){this.rowNodes={}}return NodeManager.prototype.addRowNode=function(rowNode){var id=rowNode.id;this.rowNodes[id]&&(console.warn("AG Grid: Duplicate node id "+rowNode.id+". Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values."),console.warn("first instance",this.rowNodes[id].data),console.warn("second instance",rowNode.data)),this.rowNodes[id]=rowNode},NodeManager.prototype.removeNode=function(rowNode){var id=rowNode.id;this.rowNodes[id]&&(this.rowNodes[id]=void 0)},NodeManager.prototype.clear=function(){this.rowNodes={}},__decorate$1E([agGridCommunity.PreDestroy],NodeManager.prototype,"clear",null),NodeManager=__decorate$1E([agGridCommunity.Bean("ssrmNodeManager")],NodeManager)}(),__extends$3e=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1F=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TransactionManager=function(_super){function TransactionManager(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.asyncTransactions=[],_this}return __extends$3e(TransactionManager,_super),TransactionManager.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()},TransactionManager.prototype.applyTransactionAsync=function(transaction,callback){null==this.asyncTransactionsTimeout&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction,callback})},TransactionManager.prototype.scheduleExecuteAsync=function(){var _this=this,waitMillis=this.gridOptionsWrapper.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout((function(){_this.executeAsyncTransactions()}),waitMillis)},TransactionManager.prototype.executeAsyncTransactions=function(){var _this=this;if(this.asyncTransactions){var resultFuncs=[],resultsForEvent=[],transactionsToRetry=[],atLeastOneTransactionApplied=!1;if(this.asyncTransactions.forEach((function(txWrapper){var result;_this.serverSideRowModel.executeOnStore(txWrapper.transaction.route,(function(cache){result=cache.applyTransaction(txWrapper.transaction)})),null==result&&(result={status:agGridCommunity.ServerSideTransactionResultStatus.StoreNotFound}),resultsForEvent.push(result),result.status==agGridCommunity.ServerSideTransactionResultStatus.StoreLoading?transactionsToRetry.push(txWrapper):(txWrapper.callback&&resultFuncs.push((function(){return txWrapper.callback(result)})),result.status===agGridCommunity.ServerSideTransactionResultStatus.Applied&&(atLeastOneTransactionApplied=!0))})),resultFuncs.length>0&&window.setTimeout((function(){resultFuncs.forEach((function(func){return func()}))}),0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=transactionsToRetry,atLeastOneTransactionApplied&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:agGridCommunity.Events.EVENT_STORE_UPDATED})),resultsForEvent.length>0){var event_1={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),type:agGridCommunity.Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:resultsForEvent};this.eventService.dispatchEvent(event_1)}}},TransactionManager.prototype.flushAsyncTransactions=function(){null!=this.asyncTransactionsTimeout&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()},TransactionManager.prototype.applyTransaction=function(transaction){var res;return this.serverSideRowModel.executeOnStore(transaction.route,(function(store){res=store.applyTransaction(transaction)})),res?(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:agGridCommunity.Events.EVENT_STORE_UPDATED}),res):{status:agGridCommunity.ServerSideTransactionResultStatus.StoreNotFound}},__decorate$1F([agGridCommunity.Autowired("rowNodeBlockLoader")],TransactionManager.prototype,"rowNodeBlockLoader",void 0),__decorate$1F([agGridCommunity.Autowired("valueCache")],TransactionManager.prototype,"valueCache",void 0),__decorate$1F([agGridCommunity.Autowired("rowModel")],TransactionManager.prototype,"serverSideRowModel",void 0),__decorate$1F([agGridCommunity.PostConstruct],TransactionManager.prototype,"postConstruct",null),TransactionManager=__decorate$1F([agGridCommunity.Bean("ssrmTransactionManager")],TransactionManager)}(agGridCommunity.BeanStub),__extends$3f=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1G=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ExpandListener=function(_super){function ExpandListener(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$3f(ExpandListener,_super),ExpandListener.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()&&this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))},ExpandListener.prototype.onRowGroupOpened=function(event){var rowNode=event.node;if(rowNode.expanded){if(rowNode.master)this.createDetailNode(rowNode);else if(agGridCommunity._.missing(rowNode.childStore)){var storeParams=this.serverSideRowModel.getParams();rowNode.childStore=this.createBean(this.storeFactory.createStore(storeParams,rowNode))}}else this.gridOptionsWrapper.isPurgeClosedRowNodes()&&agGridCommunity._.exists(rowNode.childStore)&&(rowNode.childStore=this.destroyBean(rowNode.childStore));var storeUpdatedEvent={type:agGridCommunity.Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(storeUpdatedEvent)},ExpandListener.prototype.createDetailNode=function(masterNode){if(agGridCommunity._.exists(masterNode.detailNode))return masterNode.detailNode;var detailNode=new agGridCommunity.RowNode(this.beans);detailNode.detail=!0,detailNode.selectable=!1,detailNode.parent=masterNode,agGridCommunity._.exists(masterNode.id)&&(detailNode.id="detail_"+masterNode.id),detailNode.data=masterNode.data,detailNode.level=masterNode.level+1;var rowHeight=this.gridOptionsWrapper.getRowHeightForNode(detailNode).height;return detailNode.rowHeight=rowHeight||200,masterNode.detailNode=detailNode,detailNode},__decorate$1G([agGridCommunity.Autowired("rowModel")],ExpandListener.prototype,"serverSideRowModel",void 0),__decorate$1G([agGridCommunity.Autowired("ssrmStoreFactory")],ExpandListener.prototype,"storeFactory",void 0),__decorate$1G([agGridCommunity.Autowired("beans")],ExpandListener.prototype,"beans",void 0),__decorate$1G([agGridCommunity.PostConstruct],ExpandListener.prototype,"postConstruct",null),ExpandListener=__decorate$1G([agGridCommunity.Bean("ssrmExpandListener")],ExpandListener)}(agGridCommunity.BeanStub),__extends$3g=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1H=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SortListener=function(_super){function SortListener(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$3g(SortListener,_super),SortListener.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()&&this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))},SortListener.prototype.extractSortModel=function(){var sortModel=this.sortController.getSortModel();return this.gridOptionsWrapper.isTreeData()||(this.replaceAutoGroupColumnWithActualRowGroupColumns(sortModel),this.removeMultiColumnPrefixOnColumnIds(sortModel)),sortModel},SortListener.prototype.removeMultiColumnPrefixOnColumnIds=function(sortModel){if(this.gridOptionsWrapper.isGroupMultiAutoColumn())for(var multiColumnPrefix=agGridCommunity.Constants.GROUP_AUTO_COLUMN_ID+"-",i=0;i<sortModel.length;++i)sortModel[i].colId.indexOf(multiColumnPrefix)>-1&&(sortModel[i].colId=sortModel[i].colId.substr(multiColumnPrefix.length))},SortListener.prototype.replaceAutoGroupColumnWithActualRowGroupColumns=function(sortModel){var autoGroupSortModel=sortModel.find((function(sm){return sm.colId==agGridCommunity.Constants.GROUP_AUTO_COLUMN_ID}));if(autoGroupSortModel){var autoGroupIndex=sortModel.indexOf(autoGroupSortModel);agGridCommunity._.removeFromArray(sortModel,autoGroupSortModel);var newModels=this.columnModel.getRowGroupColumns().filter((function(col){return 0==sortModel.filter((function(sm){return sm.colId===col.getColId()})).length})).map((function(col){return{colId:col.getId(),sort:autoGroupSortModel.sort}}));agGridCommunity._.insertArrayIntoArray(sortModel,newModels,autoGroupIndex)}},SortListener.prototype.onSortChanged=function(){var storeParams=this.serverSideRowModel.getParams();if(storeParams){var newSortModel=this.extractSortModel(),oldSortModel=storeParams.sortModel,changedColumns=this.findChangedColumnsInSort(newSortModel,oldSortModel),params={valueColChanged:this.listenerUtils.isSortingWithValueColumn(changedColumns),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(changedColumns),alwaysReset:this.gridOptionsWrapper.isServerSideSortingAlwaysResets(),changedColumns};this.serverSideRowModel.refreshAfterSort(newSortModel,params)}},SortListener.prototype.findChangedColumnsInSort=function(newSortModel,oldSortModel){var allColsInBothSorts=[];[newSortModel,oldSortModel].forEach((function(sortModel){if(sortModel){var ids=sortModel.map((function(sm){return sm.colId}));allColsInBothSorts=allColsInBothSorts.concat(ids)}}));return allColsInBothSorts.filter((function(colId){var oldSortItem=oldSortModel.find((function(sm){return sm.colId===colId})),newSortItem=newSortModel.find((function(sm){return sm.colId===colId}));return function(oldSortItem,newSortItem){return(oldSortItem?oldSortItem.sort:null)!==(newSortItem?newSortItem.sort:null)}(oldSortItem,newSortItem)||function(oldSortItem,newSortItem){return(oldSortItem?oldSortModel.indexOf(oldSortItem):-1)!==(newSortItem?newSortModel.indexOf(newSortItem):-1)}(oldSortItem,newSortItem)}))},__decorate$1H([agGridCommunity.Autowired("sortController")],SortListener.prototype,"sortController",void 0),__decorate$1H([agGridCommunity.Autowired("columnModel")],SortListener.prototype,"columnModel",void 0),__decorate$1H([agGridCommunity.Autowired("rowModel")],SortListener.prototype,"serverSideRowModel",void 0),__decorate$1H([agGridCommunity.Autowired("ssrmListenerUtils")],SortListener.prototype,"listenerUtils",void 0),__decorate$1H([agGridCommunity.PostConstruct],SortListener.prototype,"postConstruct",null),SortListener=__decorate$1H([agGridCommunity.Bean("ssrmSortService")],SortListener)}(agGridCommunity.BeanStub),__extends$3h=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1I=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FilterListener=function(_super){function FilterListener(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$3h(FilterListener,_super),FilterListener.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()&&this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))},FilterListener.prototype.onFilterChanged=function(){var storeParams=this.serverSideRowModel.getParams();if(storeParams){var newModel=this.filterManager.getFilterModel(),oldModel=storeParams?storeParams.filterModel:{},changedColumns=this.findChangedColumns(newModel,oldModel),params={valueColChanged:this.listenerUtils.isSortingWithValueColumn(changedColumns),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(changedColumns),alwaysReset:this.gridOptionsWrapper.isServerSideFilteringAlwaysResets(),changedColumns};this.serverSideRowModel.refreshAfterFilter(newModel,params)}},FilterListener.prototype.findChangedColumns=function(oldModel,newModel){var allColKeysMap={};Object.keys(oldModel).forEach((function(key){return allColKeysMap[key]=!0})),Object.keys(newModel).forEach((function(key){return allColKeysMap[key]=!0}));var res=[];return Object.keys(allColKeysMap).forEach((function(key){JSON.stringify(oldModel[key])!=JSON.stringify(newModel[key])&&res.push(key)})),res},__decorate$1I([agGridCommunity.Autowired("rowModel")],FilterListener.prototype,"serverSideRowModel",void 0),__decorate$1I([agGridCommunity.Autowired("filterManager")],FilterListener.prototype,"filterManager",void 0),__decorate$1I([agGridCommunity.Autowired("ssrmListenerUtils")],FilterListener.prototype,"listenerUtils",void 0),__decorate$1I([agGridCommunity.PostConstruct],FilterListener.prototype,"postConstruct",null),FilterListener=__decorate$1I([agGridCommunity.Bean("ssrmFilterListener")],FilterListener)}(agGridCommunity.BeanStub),__extends$3i=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1J=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__values$g=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},PartialStoreBlock=function(_super){function PartialStoreBlock(blockNumber,parentRowNode,ssrmParams,storeParams,parentStore){var _this=_super.call(this,blockNumber)||this;return _this.ssrmParams=ssrmParams,_this.storeParams=storeParams,_this.parentRowNode=parentRowNode,_this.startRow=blockNumber*storeParams.cacheBlockSize,_this.parentStore=parentStore,_this.level=parentRowNode.level+1,_this.groupLevel=ssrmParams.rowGroupCols?_this.level<ssrmParams.rowGroupCols.length:void 0,_this.leafGroup=!!ssrmParams.rowGroupCols&&_this.level===ssrmParams.rowGroupCols.length-1,_this}return __extends$3i(PartialStoreBlock,_super),PartialStoreBlock.prototype.postConstruct=function(){if(this.usingTreeData=this.gridOptionsWrapper.isTreeData(),!this.usingTreeData&&this.groupLevel){var groupColVo=this.ssrmParams.rowGroupCols[this.level];this.groupField=groupColVo.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),this.setData([])},PartialStoreBlock.prototype.isDisplayIndexInBlock=function(displayIndex){return displayIndex>=this.displayIndexStart&&displayIndex<this.displayIndexEnd},PartialStoreBlock.prototype.isBlockBefore=function(displayIndex){return displayIndex>=this.displayIndexEnd},PartialStoreBlock.prototype.getDisplayIndexStart=function(){return this.displayIndexStart},PartialStoreBlock.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},PartialStoreBlock.prototype.getBlockHeightPx=function(){return this.blockHeightPx},PartialStoreBlock.prototype.getBlockTopPx=function(){return this.blockTopPx},PartialStoreBlock.prototype.isGroupLevel=function(){return this.groupLevel},PartialStoreBlock.prototype.getGroupField=function(){return this.groupField},PartialStoreBlock.prototype.prefixId=function(id){return null!=this.nodeIdPrefix?this.nodeIdPrefix+"-"+id:id.toString()},PartialStoreBlock.prototype.getBlockStateJson=function(){return{id:this.prefixId(this.getId()),state:{blockNumber:this.getId(),startRow:this.startRow,endRow:this.startRow+this.storeParams.cacheBlockSize,pageStatus:this.getState()}}},PartialStoreBlock.prototype.isAnyNodeOpen=function(){return this.rowNodes.filter((function(node){return node.expanded})).length>0},PartialStoreBlock.prototype.forEachNode=function(callback,sequence,includeChildren,filterAndSort){void 0===sequence&&(sequence=new agGridCommunity.NumberSequence),this.rowNodes.forEach((function(rowNode){if(callback(rowNode,sequence.next()),includeChildren&&rowNode.childStore){var childStore=rowNode.childStore;filterAndSort?childStore.forEachNodeDeepAfterFilterAndSort(callback,sequence):childStore.forEachNodeDeep(callback,sequence)}}))},PartialStoreBlock.prototype.forEachNodeDeep=function(callback,sequence){this.forEachNode(callback,sequence,!0,!1)},PartialStoreBlock.prototype.forEachNodeAfterFilterAndSort=function(callback,sequence){this.forEachNode(callback,sequence,!0,!0)},PartialStoreBlock.prototype.forEachNodeShallow=function(callback,sequence){this.forEachNode(callback,sequence,!1,!1)},PartialStoreBlock.prototype.getLastAccessed=function(){return this.lastAccessed},PartialStoreBlock.prototype.getRowUsingLocalIndex=function(rowIndex){return this.rowNodes[rowIndex-this.startRow]},PartialStoreBlock.prototype.touchLastAccessed=function(){this.lastAccessed=this.ssrmParams.lastAccessedSequence.next()},PartialStoreBlock.prototype.processServerFail=function(){this.parentStore.onBlockLoadFailed(this)},PartialStoreBlock.prototype.retryLoads=function(){this.getState()===agGridCommunity.RowNodeBlock.STATE_FAILED&&(this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad(),this.setData()),this.forEachNodeShallow((function(node){node.childStore&&node.childStore.retryLoads()}))},PartialStoreBlock.prototype.processServerResult=function(params){this.parentStore.onBlockLoaded(this,params)},PartialStoreBlock.prototype.setData=function(rows,failedLoad){void 0===rows&&(rows=[]),void 0===failedLoad&&(failedLoad=!1),this.destroyRowNodes();for(var storeRowCount=this.parentStore.getRowCount(),startRow=this.getId()*this.storeParams.cacheBlockSize,rowsToCreate=Math.min(startRow+this.storeParams.cacheBlockSize,storeRowCount)-startRow,cachedBlockHeight=this.columnModel.getAllDisplayedAutoHeightCols().length>0?this.parentStore.getCachedBlockHeight(this.getId()):void 0,cachedRowHeight=cachedBlockHeight?Math.round(cachedBlockHeight/rowsToCreate):void 0,i=0;i<rowsToCreate;i++){var rowNode=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn,rowHeight:cachedRowHeight});if(i<rows.length){var data=rows[i],defaultId=this.prefixId(this.startRow+i);this.blockUtils.setDataIntoRowNode(rowNode,data,defaultId,cachedRowHeight);var newId=rowNode.id;this.parentStore.removeDuplicateNode(newId),this.nodeManager.addRowNode(rowNode),this.allNodesMap[rowNode.id]=rowNode,this.blockUtils.checkOpenByDefault(rowNode)}this.rowNodes.push(rowNode),failedLoad&&(rowNode.failedLoad=!0)}},PartialStoreBlock.prototype.removeDuplicateNode=function(id){if(this.getState()!=agGridCommunity.RowNodeBlock.STATE_LOADED){var rowNode=this.allNodesMap[id];if(rowNode){this.blockUtils.destroyRowNode(rowNode);var index=this.rowNodes.indexOf(rowNode),stubRowNode=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});this.rowNodes[index]=stubRowNode}}},PartialStoreBlock.prototype.refresh=function(){this.getState()!==agGridCommunity.RowNodeBlock.STATE_WAITING_TO_LOAD&&this.setStateWaitingToLoad()},PartialStoreBlock.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.rowNodes),this.rowNodes=[],this.allNodesMap={}},PartialStoreBlock.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("ServerSideBlock")},PartialStoreBlock.prototype.getRowUsingDisplayIndex=function(displayRowIndex){return this.touchLastAccessed(),this.blockUtils.binarySearchForDisplayIndex(displayRowIndex,this.rowNodes)},PartialStoreBlock.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:this.startRow,endRow:this.startRow+this.storeParams.cacheBlockSize,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},PartialStoreBlock.prototype.isPixelInRange=function(pixel){return pixel>=this.blockTopPx&&pixel<this.blockTopPx+this.blockHeightPx},PartialStoreBlock.prototype.getRowBounds=function(index){var e_1,_a,res;this.touchLastAccessed();try{for(var _b=__values$g(this.rowNodes),_c=_b.next();!_c.done;_c=_b.next()){var rowNode=_c.value;if(null!=(res=this.blockUtils.extractRowBounds(rowNode,index)))break}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return res},PartialStoreBlock.prototype.getRowIndexAtPixel=function(pixel){var e_2,_a;this.touchLastAccessed();var res=null;try{for(var _b=__values$g(this.rowNodes),_c=_b.next();!_c.done;_c=_b.next()){var rowNode=_c.value;if(null!=(res=this.blockUtils.getIndexAtPixel(rowNode,pixel)))break}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_2)throw e_2.error}}return res},PartialStoreBlock.prototype.clearDisplayIndexes=function(){var _this=this;this.displayIndexEnd=void 0,this.displayIndexStart=void 0,this.rowNodes.forEach((function(rowNode){return _this.blockUtils.clearDisplayIndex(rowNode)}))},PartialStoreBlock.prototype.setDisplayIndexes=function(displayIndexSeq,nextRowTop){var _this=this;this.displayIndexStart=displayIndexSeq.peek(),this.blockTopPx=nextRowTop.value,this.rowNodes.forEach((function(rowNode){return _this.blockUtils.setDisplayIndex(rowNode,displayIndexSeq,nextRowTop)})),this.displayIndexEnd=displayIndexSeq.peek(),this.blockHeightPx=nextRowTop.value-this.blockTopPx},__decorate$1J([agGridCommunity.Autowired("columnModel")],PartialStoreBlock.prototype,"columnModel",void 0),__decorate$1J([agGridCommunity.Autowired("ssrmStoreUtils")],PartialStoreBlock.prototype,"storeUtils",void 0),__decorate$1J([agGridCommunity.Autowired("ssrmBlockUtils")],PartialStoreBlock.prototype,"blockUtils",void 0),__decorate$1J([agGridCommunity.Autowired("ssrmNodeManager")],PartialStoreBlock.prototype,"nodeManager",void 0),__decorate$1J([agGridCommunity.Autowired("rowNodeBlockLoader")],PartialStoreBlock.prototype,"rowNodeBlockLoader",void 0),__decorate$1J([agGridCommunity.PostConstruct],PartialStoreBlock.prototype,"postConstruct",null),__decorate$1J([agGridCommunity.PreDestroy],PartialStoreBlock.prototype,"destroyRowNodes",null),__decorate$1J([__param(0,agGridCommunity.Qualifier("loggerFactory"))],PartialStoreBlock.prototype,"setBeans",null),PartialStoreBlock}(agGridCommunity.RowNodeBlock),__extends$3j=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1K=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$1=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};!function(FindResult){FindResult[FindResult.FOUND=0]="FOUND",FindResult[FindResult.CONTINUE_FIND=1]="CONTINUE_FIND",FindResult[FindResult.BREAK_FIND=2]="BREAK_FIND"}(FindResult||(FindResult={}));var SetFilterModelValuesType,PartialStore=function(_super){function PartialStore(ssrmParams,storeParams,parentRowNode){var _this=_super.call(this)||this;return _this.blocks={},_this.blockHeights={},_this.lastRowIndexKnown=!1,_this.displayIndexStart=0,_this.displayIndexEnd=0,_this.cacheTopPixel=0,_this.info={},_this.ssrmParams=ssrmParams,_this.storeParams=storeParams,_this.parentRowNode=parentRowNode,_this.rowCount=PartialStore.INITIAL_ROW_COUNT,_this}return __extends$3j(PartialStore,_super),PartialStore.prototype.postConstruct=function(){this.defaultRowHeight=this.gridOptionsWrapper.getRowHeightAsNumber()},PartialStore.prototype.destroyAllBlocks=function(){var _this=this;this.getBlocksInOrder().forEach((function(block){return _this.destroyBlock(block)}))},PartialStore.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("ServerSideCache")},PartialStore.prototype.getRowCount=function(){return this.rowCount},PartialStore.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},PartialStore.prototype.retryLoads=function(){this.getBlocksInOrder().forEach((function(block){return block.retryLoads()}))},PartialStore.prototype.onBlockLoadFailed=function(block){block.setData([],!0),this.fireCacheUpdatedEvent()},PartialStore.prototype.onBlockLoaded=function(block,params){if(this.logger.log("onPageLoaded: page = "+block.getId()+", lastRow = "+params.rowCount),params.storeInfo&&Object.assign(this.info,params.storeInfo),!params.rowData){agGridCommunity._.doOnce((function(){return console.warn('AG Grid: "params.rowData" is missing from Server-Side Row Model success() callback. Please use the "rowData" attribute. If no data is returned, set an empty list.',params)}),"InfiniteStore.noData")}var finalRowCount=null!=params.rowCount&&params.rowCount>=0?params.rowCount:void 0;this.isAlive()&&(this.checkRowCount(block,finalRowCount),block.setData(params.rowData),this.destroyAllBlocksPastVirtualRowCount(),this.fireCacheUpdatedEvent())},PartialStore.prototype.purgeBlocksIfNeeded=function(blockToExclude){var _this=this,blocksForPurging=this.getBlocksInOrder().filter((function(b){return b!=blockToExclude}));blocksForPurging.sort((function(a,b){return b.getLastAccessed()-a.getLastAccessed()}));var maxBlocksProvided=this.storeParams.maxBlocksInCache>0,blocksToKeep=maxBlocksProvided?this.storeParams.maxBlocksInCache-1:null,emptyBlocksToKeep=PartialStore.MAX_EMPTY_BLOCKS_TO_KEEP-1;blocksForPurging.forEach((function(block,index){if(block.getState()===PartialStoreBlock.STATE_WAITING_TO_LOAD&&index>=emptyBlocksToKeep||!!maxBlocksProvided&&index>=blocksToKeep){if(block.isAnyNodeOpen())return;if(_this.isBlockCurrentlyDisplayed(block))return;if(_this.isBlockFocused(block))return;_this.destroyBlock(block)}}))},PartialStore.prototype.isBlockFocused=function(block){var focusedCell=this.focusService.getFocusCellToUseAfterRefresh();if(!focusedCell)return!1;if(null!=focusedCell.rowPinned)return!1;var blockIndexStart=block.getDisplayIndexStart(),blockIndexEnd=block.getDisplayIndexEnd();return null!=blockIndexEnd&&null!=blockIndexStart&&(focusedCell.rowIndex>=blockIndexStart&&focusedCell.rowIndex<blockIndexEnd)},PartialStore.prototype.isBlockCurrentlyDisplayed=function(block){var startIndex=block.getDisplayIndexStart(),endIndex=block.getDisplayIndexEnd()-1;return this.rowRenderer.isRangeInRenderedViewport(startIndex,endIndex)},PartialStore.prototype.removeDuplicateNode=function(id){this.getBlocksInOrder().forEach((function(block){return block.removeDuplicateNode(id)}))},PartialStore.prototype.checkRowCount=function(block,lastRow){if("number"==typeof lastRow&&lastRow>=0)this.rowCount=lastRow,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var lastRowIndexPlusOverflow=(block.getId()+1)*this.storeParams.cacheBlockSize+PartialStore.OVERFLOW_SIZE;this.rowCount<lastRowIndexPlusOverflow&&(this.rowCount=lastRowIndexPlusOverflow)}},PartialStore.prototype.forEachNodeDeep=function(callback,sequence){void 0===sequence&&(sequence=new agGridCommunity.NumberSequence),this.getBlocksInOrder().forEach((function(block){return block.forEachNodeDeep(callback,sequence)}))},PartialStore.prototype.forEachNodeDeepAfterFilterAndSort=function(callback,sequence){void 0===sequence&&(sequence=new agGridCommunity.NumberSequence),this.getBlocksInOrder().forEach((function(block){return block.forEachNodeAfterFilterAndSort(callback,sequence)}))},PartialStore.prototype.getBlocksInOrder=function(){return agGridCommunity._.getAllValuesInObject(this.blocks).sort((function(a,b){return a.getId()-b.getId()}))},PartialStore.prototype.destroyBlock=function(block){delete this.blocks[block.getId()],this.destroyBean(block),this.rowNodeBlockLoader.removeBlock(block)},PartialStore.prototype.fireCacheUpdatedEvent=function(){var event={type:agGridCommunity.Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(event)},PartialStore.prototype.destroyAllBlocksPastVirtualRowCount=function(){var _this=this,blocksToDestroy=[];this.getBlocksInOrder().forEach((function(block){block.getId()*_this.storeParams.cacheBlockSize>=_this.rowCount&&blocksToDestroy.push(block)})),blocksToDestroy.length>0&&blocksToDestroy.forEach((function(block){return _this.destroyBlock(block)}))},PartialStore.prototype.refreshStore=function(purge){0==this.getRowCount()||purge?this.resetStore():this.refreshBlocks(),this.fireCacheUpdatedEvent()},PartialStore.prototype.refreshBlocks=function(){this.getBlocksInOrder().forEach((function(block){block.refresh()})),this.lastRowIndexKnown=!1,this.rowNodeBlockLoader.checkBlockToLoad()},PartialStore.prototype.resetStore=function(){this.destroyAllBlocks(),this.lastRowIndexKnown=!1,(this.columnModel.isAutoRowHeightActive||0===this.rowCount)&&(this.rowCount=PartialStore.INITIAL_ROW_COUNT)},PartialStore.prototype.getRowNodesInRange=function(firstInRange,lastInRange){var result=[],lastBlockId=-1,inActiveRange=!1;agGridCommunity._.missing(firstInRange)&&(inActiveRange=!0);var foundGapInSelection=!1;return this.getBlocksInOrder().forEach((function(block){foundGapInSelection||(inActiveRange&&lastBlockId+1!==block.getId()?foundGapInSelection=!0:(lastBlockId=block.getId(),block.forEachNodeShallow((function(rowNode){var hitFirstOrLast=rowNode===firstInRange||rowNode===lastInRange;(inActiveRange||hitFirstOrLast)&&result.push(rowNode),hitFirstOrLast&&(inActiveRange=!inActiveRange)}))))})),foundGapInSelection||inActiveRange?[]:result},PartialStore.prototype.findBlockAndExecute=function(matchBlockFunc,blockFoundFunc,blockNotFoundFunc){var res,blockFound=!1,breakSearch=!1,lastBlock=null;return this.getBlocksInOrder().forEach((function(block){if(!blockFound&&!breakSearch){var comparatorResult=matchBlockFunc(block);comparatorResult==FindResult.FOUND?(res=blockFoundFunc(block),blockFound=!0):comparatorResult==FindResult.CONTINUE_FIND?lastBlock=block:comparatorResult==FindResult.BREAK_FIND&&(breakSearch=!0)}})),blockFound||(res=blockNotFoundFunc(lastBlock)),res},PartialStore.prototype.getRowBounds=function(index){var _this=this;return this.findBlockAndExecute((function(block){return block.isDisplayIndexInBlock(index)?FindResult.FOUND:block.isBlockBefore(index)?FindResult.CONTINUE_FIND:FindResult.BREAK_FIND}),(function(foundBlock){return foundBlock.getRowBounds(index)}),(function(previousBlock){var nextRowTop,nextRowIndex;null!==previousBlock?(nextRowTop=previousBlock.getBlockTopPx()+previousBlock.getBlockHeightPx(),nextRowIndex=previousBlock.getDisplayIndexEnd()):(nextRowTop=_this.cacheTopPixel,nextRowIndex=_this.displayIndexStart);var rowsBetween=index-nextRowIndex;return{rowHeight:_this.defaultRowHeight,rowTop:nextRowTop+rowsBetween*_this.defaultRowHeight}}))},PartialStore.prototype.getRowIndexAtPixel=function(pixel){var _this=this,result=this.findBlockAndExecute((function(block){return block.isPixelInRange(pixel)?FindResult.FOUND:block.getBlockTopPx()<pixel?FindResult.CONTINUE_FIND:FindResult.BREAK_FIND}),(function(foundBlock){return foundBlock.getRowIndexAtPixel(pixel)}),(function(previousBlock){var nextRowTop,nextRowIndex;previousBlock?(nextRowTop=previousBlock.getBlockTopPx()+previousBlock.getBlockHeightPx(),nextRowIndex=previousBlock.getDisplayIndexEnd()):(nextRowTop=_this.cacheTopPixel,nextRowIndex=_this.displayIndexStart);for(var blockSize=_this.storeParams.cacheBlockSize,defaultBlockHeight=_this.defaultRowHeight*blockSize,nextBlockId=previousBlock?previousBlock.getId()+1:0,getBlockDetails=function(id){var cachedBlockHeight=_this.getCachedBlockHeight(id),blockHeight=null!=cachedBlockHeight?cachedBlockHeight:defaultBlockHeight;return{height:blockHeight,pixelInBlock:pixel<=blockHeight+nextRowTop}},blockDetails=getBlockDetails(nextBlockId);!blockDetails.pixelInBlock;)nextRowTop+=blockDetails.height,nextRowIndex+=blockSize,blockDetails=getBlockDetails(++nextBlockId);var pixelsBetween=pixel-nextRowTop,rowHeight=blockDetails.height/blockSize;return nextRowIndex+(0|Math.floor(pixelsBetween/rowHeight))})),lastAllowedIndex=this.getDisplayIndexEnd()-1;return result=Math.min(result,lastAllowedIndex)},PartialStore.prototype.clearDisplayIndexes=function(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.getBlocksInOrder().forEach((function(block){return block.clearDisplayIndexes()}))},PartialStore.prototype.setDisplayIndexes=function(displayIndexSeq,nextRowTop){var _this=this;this.displayIndexStart=displayIndexSeq.peek(),this.cacheTopPixel=nextRowTop.value;var lastBlockId=-1,blockSize=this.storeParams.cacheBlockSize;this.getBlocksInOrder().forEach((function(currentBlock){var blockId=currentBlock.getId(),blocksSkippedCount=blockId-lastBlockId-1,rowsSkippedCount=blocksSkippedCount*blockSize;rowsSkippedCount>0&&displayIndexSeq.skip(rowsSkippedCount);for(var i=1;i<=blocksSkippedCount;i++){var blockToAddId=blockId-i;agGridCommunity._.exists(_this.blockHeights[blockToAddId])?nextRowTop.value+=_this.blockHeights[blockToAddId]:nextRowTop.value+=blockSize*_this.defaultRowHeight}lastBlockId=blockId,currentBlock.setDisplayIndexes(displayIndexSeq,nextRowTop),_this.blockHeights[blockId]=currentBlock.getBlockHeightPx()}));var lastVisitedRow=(lastBlockId+1)*blockSize-1,rowsNotAccountedFor=this.getRowCount()-lastVisitedRow-1;rowsNotAccountedFor>0&&(displayIndexSeq.skip(rowsNotAccountedFor),nextRowTop.value+=rowsNotAccountedFor*this.defaultRowHeight),this.displayIndexEnd=displayIndexSeq.peek(),this.cacheHeightPixels=nextRowTop.value-this.cacheTopPixel},PartialStore.prototype.getRowUsingDisplayIndex=function(displayRowIndex,dontCreateBlock){var _this=this;if(void 0===dontCreateBlock&&(dontCreateBlock=!1),this.isDisplayIndexInStore(displayRowIndex)){return this.findBlockAndExecute((function(block){return block.isDisplayIndexInBlock(displayRowIndex)?FindResult.FOUND:block.isBlockBefore(displayRowIndex)?FindResult.CONTINUE_FIND:FindResult.BREAK_FIND}),(function(foundBlock){return foundBlock.getRowUsingDisplayIndex(displayRowIndex)}),(function(previousBlock){if(!dontCreateBlock){var blockNumber,displayIndexStart,nextRowTop,blockSize=_this.storeParams.cacheBlockSize;if(previousBlock){blockNumber=previousBlock.getId()+1,displayIndexStart=previousBlock.getDisplayIndexEnd(),nextRowTop=previousBlock.getBlockHeightPx()+previousBlock.getBlockTopPx();for(;!(displayRowIndex>=displayIndexStart&&displayRowIndex<displayIndexStart+blockSize);){displayIndexStart+=blockSize;var cachedBlockHeight=_this.blockHeights[blockNumber];agGridCommunity._.exists(cachedBlockHeight)?nextRowTop+=cachedBlockHeight:nextRowTop+=_this.defaultRowHeight*blockSize,blockNumber++}}else{var localIndex=displayRowIndex-_this.displayIndexStart;blockNumber=Math.floor(localIndex/blockSize),displayIndexStart=_this.displayIndexStart+blockNumber*blockSize,nextRowTop=_this.cacheTopPixel+blockNumber*blockSize*_this.defaultRowHeight}return _this.logger.log("block missing, rowIndex = "+displayRowIndex+", creating #"+blockNumber+", displayIndexStart = "+displayIndexStart),_this.createBlock(blockNumber,displayIndexStart,{value:nextRowTop}).getRowUsingDisplayIndex(displayRowIndex)}}))}},PartialStore.prototype.getTopLevelRowDisplayedIndex=function(topLevelIndex){var blockSize=this.storeParams.cacheBlockSize,blockId=Math.floor(topLevelIndex/blockSize);return this.findBlockAndExecute((function(block){return block.getId()===blockId?FindResult.FOUND:block.getId()<blockId?FindResult.CONTINUE_FIND:FindResult.BREAK_FIND}),(function(foundBlock){return foundBlock.getRowUsingLocalIndex(topLevelIndex).rowIndex}),(function(previousBlock){if(!previousBlock)return topLevelIndex;var lastDisplayedNodeIndexInBlockBefore,lastRowTopLevelIndex=blockSize*(previousBlock.getId()+1)-1,lastRowNode=previousBlock.getRowUsingLocalIndex(lastRowTopLevelIndex);lastRowNode.expanded&&lastRowNode.childStore?lastDisplayedNodeIndexInBlockBefore=lastRowNode.childStore.getDisplayIndexEnd()-1:lastDisplayedNodeIndexInBlockBefore=lastRowNode.expanded&&lastRowNode.detailNode?lastRowNode.detailNode.rowIndex:lastRowNode.rowIndex;return lastDisplayedNodeIndexInBlockBefore+(topLevelIndex-lastRowTopLevelIndex)}))},PartialStore.prototype.addStoreStates=function(result){result.push({type:"partial",route:this.parentRowNode.getGroupKeys(),rowCount:this.rowCount,lastRowIndexKnown:this.lastRowIndexKnown,info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow((function(childStore){return childStore.addStoreStates(result)}))},PartialStore.prototype.getCachedBlockHeight=function(blockNumber){return this.blockHeights[blockNumber]},PartialStore.prototype.createBlock=function(blockNumber,displayIndex,nextRowTop){var block=this.createBean(new PartialStoreBlock(blockNumber,this.parentRowNode,this.ssrmParams,this.storeParams,this));return block.setDisplayIndexes(new agGridCommunity.NumberSequence(displayIndex),nextRowTop),this.blocks[block.getId()]=block,this.purgeBlocksIfNeeded(block),this.rowNodeBlockLoader.addBlock(block),block},PartialStore.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},PartialStore.prototype.isDisplayIndexInStore=function(displayIndex){return 0!==this.getRowCount()&&(displayIndex>=this.displayIndexStart&&displayIndex<this.displayIndexEnd)},PartialStore.prototype.applyTransaction=function(transaction){return{status:agGridCommunity.ServerSideTransactionResultStatus.StoreWrongType}},PartialStore.prototype.getChildStore=function(keys){var _this=this;return this.storeUtils.getChildStore(keys,this,(function(key){var nextNode=null;return _this.getBlocksInOrder().forEach((function(block){block.forEachNodeShallow((function(rowNode){rowNode.key===key&&(nextNode=rowNode)}),new agGridCommunity.NumberSequence)})),nextNode}))},PartialStore.prototype.isPixelInRange=function(pixel){return 0!==this.getRowCount()&&(pixel>=this.cacheTopPixel&&pixel<this.cacheTopPixel+this.cacheHeightPixels)},PartialStore.prototype.refreshAfterFilter=function(params){this.resetStore()},PartialStore.prototype.refreshAfterSort=function(params){this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,params)?this.resetStore():this.forEachChildStoreShallow((function(store){return store.refreshAfterSort(params)}))},PartialStore.prototype.forEachChildStoreShallow=function(callback){this.getBlocksInOrder().forEach((function(block){if(block.isGroupLevel()){block.forEachNodeShallow((function(rowNode){var nextCache=rowNode.childStore;nextCache&&callback(nextCache)}),new agGridCommunity.NumberSequence)}}))},PartialStore.MAX_EMPTY_BLOCKS_TO_KEEP=2,PartialStore.INITIAL_ROW_COUNT=1,PartialStore.OVERFLOW_SIZE=1,__decorate$1K([agGridCommunity.Autowired("rowRenderer")],PartialStore.prototype,"rowRenderer",void 0),__decorate$1K([agGridCommunity.Autowired("rowNodeBlockLoader")],PartialStore.prototype,"rowNodeBlockLoader",void 0),__decorate$1K([agGridCommunity.Autowired("ssrmStoreUtils")],PartialStore.prototype,"storeUtils",void 0),__decorate$1K([agGridCommunity.Autowired("focusService")],PartialStore.prototype,"focusService",void 0),__decorate$1K([agGridCommunity.Autowired("columnModel")],PartialStore.prototype,"columnModel",void 0),__decorate$1K([agGridCommunity.PostConstruct],PartialStore.prototype,"postConstruct",null),__decorate$1K([agGridCommunity.PreDestroy],PartialStore.prototype,"destroyAllBlocks",null),__decorate$1K([__param$1(0,agGridCommunity.Qualifier("loggerFactory"))],PartialStore.prototype,"setBeans",null),PartialStore}(agGridCommunity.BeanStub),__extends$3k=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1L=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FullStore=function(_super){function FullStore(ssrmParams,storeParams,parentRowNode){var _this=_super.call(this,0)||this;return _this.nodeIdSequence=new agGridCommunity.NumberSequence,_this.info={},_this.ssrmParams=ssrmParams,_this.parentRowNode=parentRowNode,_this.level=parentRowNode.level+1,_this.groupLevel=ssrmParams.rowGroupCols?_this.level<ssrmParams.rowGroupCols.length:void 0,_this.leafGroup=!!ssrmParams.rowGroupCols&&_this.level===ssrmParams.rowGroupCols.length-1,_this}return __extends$3k(FullStore,_super),FullStore.prototype.postConstruct=function(){var _this=this;if(this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel){var groupColVo=this.ssrmParams.rowGroupCols[this.level];this.groupField=groupColVo.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}this.initialiseRowNodes(),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc((function(){return _this.rowNodeBlockLoader.removeBlock(_this)}))},FullStore.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}},FullStore.prototype.initialiseRowNodes=function(loadingRowsCount,failedLoad){void 0===loadingRowsCount&&(loadingRowsCount=1),void 0===failedLoad&&(failedLoad=!1),this.destroyRowNodes();for(var i=0;i<loadingRowsCount;i++){var loadingRowNode=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});failedLoad&&(loadingRowNode.failedLoad=!0),this.allRowNodes.push(loadingRowNode),this.nodesAfterFilter.push(loadingRowNode),this.nodesAfterSort.push(loadingRowNode)}},FullStore.prototype.getBlockStateJson=function(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}},FullStore.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},FullStore.prototype.getStartRow=function(){return 0},FullStore.prototype.getEndRow=function(){return this.nodesAfterSort.length},FullStore.prototype.createDataNode=function(data,index){var rowNode=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});null!=index?agGridCommunity._.insertIntoArray(this.allRowNodes,rowNode,index):this.allRowNodes.push(rowNode);var defaultId=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(rowNode,data,defaultId,void 0),this.nodeManager.addRowNode(rowNode),this.blockUtils.checkOpenByDefault(rowNode),this.allNodesMap[rowNode.id]=rowNode,rowNode},FullStore.prototype.prefixId=function(id){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+id:id.toString()},FullStore.prototype.processServerFail=function(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()},FullStore.prototype.processServerResult=function(params){if(this.isAlive()){params.storeInfo&&Object.assign(this.info,params.storeInfo);var nodesToRecycle=this.allRowNodes.length>0?this.allNodesMap:void 0;if(this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},!params.rowData){agGridCommunity._.doOnce((function(){return console.warn('AG Grid: "params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.',params)}),"FullStore.noData")}this.createOrRecycleNodes(nodesToRecycle,params.rowData),nodesToRecycle&&this.blockUtils.destroyRowNodes(agGridCommunity._.getAllValuesInObject(nodesToRecycle)),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}},FullStore.prototype.createOrRecycleNodes=function(nodesToRecycle,rowData){var _this=this;if(rowData){rowData.forEach((function(dataItem){var nodeToRecycle=function(data){if(nodesToRecycle){var getRowIdFunc=_this.gridOptionsWrapper.getRowIdFunc();if(getRowIdFunc){var parentKeys=_this.parentRowNode.getGroupKeys(),level=_this.level,id=getRowIdFunc({data,parentKeys:parentKeys.length>0?parentKeys:void 0,level}),foundNode=nodesToRecycle[id];if(foundNode)return delete nodesToRecycle[id],foundNode}}}(dataItem);nodeToRecycle?function(rowNode,dataItem){_this.allNodesMap[rowNode.id]=rowNode,_this.blockUtils.updateDataIntoRowNode(rowNode,dataItem),_this.allRowNodes.push(rowNode)}(nodeToRecycle,dataItem):_this.createDataNode(dataItem)}))}},FullStore.prototype.flushAsyncTransactions=function(){var _this=this;window.setTimeout((function(){return _this.transactionManager.flushAsyncTransactions()}),0)},FullStore.prototype.filterAndSortNodes=function(){this.filterRowNodes(),this.sortRowNodes()},FullStore.prototype.sortRowNodes=function(){var sortOptions=this.sortController.getSortOptions(),noSortApplied=!sortOptions||0==sortOptions.length,sortDoneOnServer=this.gridOptionsWrapper.isServerSideSortingAlwaysResets();this.nodesAfterSort=noSortApplied||sortDoneOnServer?this.nodesAfterFilter:this.rowNodeSorter.doFullSort(this.nodesAfterFilter,sortOptions)},FullStore.prototype.filterRowNodes=function(){var _this=this,filterDoneOnServer=this.gridOptionsWrapper.isServerSideFilteringAlwaysResets(),groupLevel=this.groupLevel;this.nodesAfterFilter=filterDoneOnServer||groupLevel?this.allRowNodes:this.allRowNodes.filter((function(rowNode){return _this.filterManager.doesRowPassFilter({rowNode})}))},FullStore.prototype.clearDisplayIndexes=function(){var _this=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach((function(rowNode){return _this.blockUtils.clearDisplayIndex(rowNode)}))},FullStore.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},FullStore.prototype.isDisplayIndexInStore=function(displayIndex){return 0!==this.getRowCount()&&(displayIndex>=this.displayIndexStart&&displayIndex<this.displayIndexEnd)},FullStore.prototype.setDisplayIndexes=function(displayIndexSeq,nextRowTop){var _this=this;this.displayIndexStart=displayIndexSeq.peek(),this.topPx=nextRowTop.value;var visibleNodeIds={};this.nodesAfterSort.forEach((function(rowNode){_this.blockUtils.setDisplayIndex(rowNode,displayIndexSeq,nextRowTop),visibleNodeIds[rowNode.id]=!0})),this.allRowNodes.forEach((function(rowNode){visibleNodeIds[rowNode.id]||_this.blockUtils.clearDisplayIndex(rowNode)})),this.displayIndexEnd=displayIndexSeq.peek(),this.heightPx=nextRowTop.value-this.topPx},FullStore.prototype.forEachNodeDeep=function(callback,sequence){void 0===sequence&&(sequence=new agGridCommunity.NumberSequence),this.allRowNodes.forEach((function(rowNode){callback(rowNode,sequence.next());var childCache=rowNode.childStore;childCache&&childCache.forEachNodeDeep(callback,sequence)}))},FullStore.prototype.forEachNodeDeepAfterFilterAndSort=function(callback,sequence){void 0===sequence&&(sequence=new agGridCommunity.NumberSequence),this.nodesAfterSort.forEach((function(rowNode){callback(rowNode,sequence.next());var childCache=rowNode.childStore;childCache&&childCache.forEachNodeDeepAfterFilterAndSort(callback,sequence)}))},FullStore.prototype.getRowUsingDisplayIndex=function(displayRowIndex){if(this.isDisplayIndexInStore(displayRowIndex))return this.blockUtils.binarySearchForDisplayIndex(displayRowIndex,this.nodesAfterSort)},FullStore.prototype.getRowBounds=function(index){for(var i=0;i<this.nodesAfterSort.length;i++){var rowNode=this.nodesAfterSort[i],res=this.blockUtils.extractRowBounds(rowNode,index);if(res)return res}return null},FullStore.prototype.isPixelInRange=function(pixel){return pixel>=this.topPx&&pixel<this.topPx+this.heightPx},FullStore.prototype.getRowIndexAtPixel=function(pixel){var _this=this;if(pixel<=this.topPx)return this.nodesAfterSort[0].rowIndex;if(pixel>=this.topPx+this.heightPx){var lastRowNode=this.nodesAfterSort[this.nodesAfterSort.length-1],lastRowNodeBottomPx=lastRowNode.rowTop+lastRowNode.rowHeight;if(pixel>=lastRowNodeBottomPx&&lastRowNode.expanded){if(lastRowNode.childStore&&lastRowNode.childStore.getRowCount()>0)return lastRowNode.childStore.getRowIndexAtPixel(pixel);if(lastRowNode.detailNode)return lastRowNode.detailNode.rowIndex}return lastRowNode.rowIndex}var res=null;return this.nodesAfterSort.forEach((function(rowNode){var res2=_this.blockUtils.getIndexAtPixel(rowNode,pixel);null!=res2&&(res=res2)})),null==res?this.displayIndexEnd-1:res},FullStore.prototype.getChildStore=function(keys){var _this=this;return this.storeUtils.getChildStore(keys,this,(function(key){return _this.allRowNodes.find((function(currentRowNode){return currentRowNode.key==key}))}))},FullStore.prototype.forEachChildStoreShallow=function(callback){this.allRowNodes.forEach((function(rowNode){var childStore=rowNode.childStore;childStore&&callback(childStore)}))},FullStore.prototype.refreshAfterFilter=function(params){params.alwaysReset||this.gridOptionsWrapper.isTreeData()?this.refreshStore(!0):(this.filterAndSortNodes(),this.forEachChildStoreShallow((function(store){return store.refreshAfterFilter(params)})))},FullStore.prototype.refreshAfterSort=function(params){params.alwaysReset?this.refreshStore(!0):(this.sortRowNodes(),this.forEachChildStoreShallow((function(store){return store.refreshAfterSort(params)})))},FullStore.prototype.applyTransaction=function(transaction){switch(this.getState()){case agGridCommunity.RowNodeBlock.STATE_FAILED:return{status:agGridCommunity.ServerSideTransactionResultStatus.StoreLoadingFailed};case agGridCommunity.RowNodeBlock.STATE_LOADING:return{status:agGridCommunity.ServerSideTransactionResultStatus.StoreLoading};case agGridCommunity.RowNodeBlock.STATE_WAITING_TO_LOAD:return{status:agGridCommunity.ServerSideTransactionResultStatus.StoreWaitingToLoad}}var applyCallback=this.gridOptionsWrapper.getIsApplyServerSideTransactionFunc();if(applyCallback&&!applyCallback({transaction,parentNode:this.parentRowNode,storeInfo:this.info}))return{status:agGridCommunity.ServerSideTransactionResultStatus.Cancelled};var res={status:agGridCommunity.ServerSideTransactionResultStatus.Applied,remove:[],update:[],add:[]},nodesToUnselect=[];return this.executeAdd(transaction,res),this.executeRemove(transaction,res,nodesToUnselect),this.executeUpdate(transaction,res,nodesToUnselect),this.filterAndSortNodes(),this.updateSelection(nodesToUnselect),res},FullStore.prototype.updateSelection=function(nodesToUnselect){if(nodesToUnselect.length>0){nodesToUnselect.forEach((function(rowNode){rowNode.setSelected(!1,!1,!0)}));var event_1={type:agGridCommunity.Events.EVENT_SELECTION_CHANGED,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};this.eventService.dispatchEvent(event_1)}},FullStore.prototype.executeAdd=function(rowDataTran,rowNodeTransaction){var _this=this,add=rowDataTran.add,addIndex=rowDataTran.addIndex;agGridCommunity._.missingOrEmpty(add)||("number"==typeof addIndex&&addIndex>=0?add.reverse().forEach((function(item){var newRowNode=_this.createDataNode(item,addIndex);rowNodeTransaction.add.push(newRowNode)})):add.forEach((function(item){var newRowNode=_this.createDataNode(item);rowNodeTransaction.add.push(newRowNode)})))},FullStore.prototype.executeRemove=function(rowDataTran,rowNodeTransaction,nodesToUnselect){var _this=this,remove=rowDataTran.remove;if(null!=remove){var rowIdsRemoved={};remove.forEach((function(item){var rowNode=_this.lookupRowNode(item);rowNode&&(rowNode.isSelected()&&nodesToUnselect.push(rowNode),rowNode.clearRowTopAndRowIndex(),rowIdsRemoved[rowNode.id]=!0,delete _this.allNodesMap[rowNode.id],rowNodeTransaction.remove.push(rowNode),_this.nodeManager.removeNode(rowNode))})),this.allRowNodes=this.allRowNodes.filter((function(rowNode){return!rowIdsRemoved[rowNode.id]}))}},FullStore.prototype.executeUpdate=function(rowDataTran,rowNodeTransaction,nodesToUnselect){var _this=this,update=rowDataTran.update;null!=update&&update.forEach((function(item){var rowNode=_this.lookupRowNode(item);rowNode&&(rowNode.updateData(item),!rowNode.selectable&&rowNode.isSelected()&&nodesToUnselect.push(rowNode),rowNodeTransaction.update.push(rowNode))}))},FullStore.prototype.lookupRowNode=function(data){var rowNode,getRowIdFunc=this.gridOptionsWrapper.getRowIdFunc();if(null!=getRowIdFunc){var level=this.level,parentKeys=this.parentRowNode.getGroupKeys(),id=getRowIdFunc({data,parentKeys:parentKeys.length>0?parentKeys:void 0,level});if(!(rowNode=this.allNodesMap[id]))return console.error("AG Grid: could not find row id="+id+", data item was not found for this id"),null}else if(!(rowNode=this.allRowNodes.find((function(currentRowNode){return currentRowNode.data===data}))))return console.error("AG Grid: could not find data item as object was not found",data),null;return rowNode},FullStore.prototype.addStoreStates=function(result){result.push({type:"full",route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow((function(childStore){return childStore.addStoreStates(result)}))},FullStore.prototype.refreshStore=function(purge){if(purge){var loadingRowsToShow=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(loadingRowsToShow)}this.scheduleLoad(),this.fireStoreUpdatedEvent()},FullStore.prototype.retryLoads=function(){this.getState()===agGridCommunity.RowNodeBlock.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow((function(store){return store.retryLoads()}))},FullStore.prototype.scheduleLoad=function(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()},FullStore.prototype.fireStoreUpdatedEvent=function(){var event={type:agGridCommunity.Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(event)},FullStore.prototype.getRowCount=function(){return this.nodesAfterSort.length},FullStore.prototype.getTopLevelRowDisplayedIndex=function(topLevelIndex){return this.nodesAfterSort[topLevelIndex].rowIndex},FullStore.prototype.isLastRowIndexKnown=function(){return this.getState()==agGridCommunity.RowNodeBlock.STATE_LOADED},FullStore.prototype.getRowNodesInRange=function(firstInRange,lastInRange){var result=[],inActiveRange=!1;return agGridCommunity._.missing(firstInRange)&&(inActiveRange=!0),this.nodesAfterSort.forEach((function(rowNode){var hitFirstOrLast=rowNode===firstInRange||rowNode===lastInRange;(inActiveRange||hitFirstOrLast)&&result.push(rowNode),hitFirstOrLast&&(inActiveRange=!inActiveRange)})),inActiveRange?[]:result},__decorate$1L([agGridCommunity.Autowired("ssrmStoreUtils")],FullStore.prototype,"storeUtils",void 0),__decorate$1L([agGridCommunity.Autowired("ssrmBlockUtils")],FullStore.prototype,"blockUtils",void 0),__decorate$1L([agGridCommunity.Autowired("columnModel")],FullStore.prototype,"columnModel",void 0),__decorate$1L([agGridCommunity.Autowired("rowNodeBlockLoader")],FullStore.prototype,"rowNodeBlockLoader",void 0),__decorate$1L([agGridCommunity.Autowired("rowNodeSorter")],FullStore.prototype,"rowNodeSorter",void 0),__decorate$1L([agGridCommunity.Autowired("sortController")],FullStore.prototype,"sortController",void 0),__decorate$1L([agGridCommunity.Autowired("ssrmNodeManager")],FullStore.prototype,"nodeManager",void 0),__decorate$1L([agGridCommunity.Autowired("filterManager")],FullStore.prototype,"filterManager",void 0),__decorate$1L([agGridCommunity.Autowired("ssrmTransactionManager")],FullStore.prototype,"transactionManager",void 0),__decorate$1L([agGridCommunity.Autowired("columnApi")],FullStore.prototype,"columnApi",void 0),__decorate$1L([agGridCommunity.Autowired("gridApi")],FullStore.prototype,"gridApi",void 0),__decorate$1L([agGridCommunity.PostConstruct],FullStore.prototype,"postConstruct",null),__decorate$1L([agGridCommunity.PreDestroy],FullStore.prototype,"destroyRowNodes",null),FullStore}(agGridCommunity.RowNodeBlock),__decorate$1M=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},StoreFactory=function(){function StoreFactory(){}return StoreFactory.prototype.createStore=function(ssrmParams,parentNode){var storeParams=this.getStoreParams(ssrmParams,parentNode);return new("partial"===storeParams.storeType?PartialStore:FullStore)(ssrmParams,storeParams,parentNode)},StoreFactory.prototype.getStoreParams=function(ssrmParams,parentNode){var userStoreParams=this.getLevelSpecificParams(parentNode),storeType=this.getStoreType(userStoreParams);return{storeType,cacheBlockSize:this.getBlockSize(storeType,userStoreParams),maxBlocksInCache:this.getMaxBlocksInCache(storeType,ssrmParams,userStoreParams)}},StoreFactory.prototype.getMaxBlocksInCache=function(storeType,ssrmParams,userStoreParams){if("full"!=storeType){var maxBlocksInCache=userStoreParams&&null!=userStoreParams.maxBlocksInCache?userStoreParams.maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache();if(null!=maxBlocksInCache&&maxBlocksInCache>=0)if(ssrmParams.dynamicRowHeight){agGridCommunity._.doOnce((function(){return console.warn("AG Grid: Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.")}),"storeFactory.maxBlocksInCache.dynamicRowHeight")}else{if(!this.columnModel.isAutoRowHeightActive())return maxBlocksInCache;agGridCommunity._.doOnce((function(){return console.warn("AG Grid: Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.")}),"storeFactory.maxBlocksInCache.autoRowHeightActive")}}},StoreFactory.prototype.getBlockSize=function(storeType,userStoreParams){if("full"!=storeType){var blockSize=userStoreParams&&null!=userStoreParams.cacheBlockSize?userStoreParams.cacheBlockSize:this.gridOptionsWrapper.getCacheBlockSize();return null!=blockSize&&blockSize>0?blockSize:100}},StoreFactory.prototype.getLevelSpecificParams=function(parentNode){var callback=this.gridOptionsWrapper.getServerSideStoreParamsFunc();if(callback)return callback({level:parentNode.level+1,parentRowNode:parentNode.level>=0?parentNode:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()})},StoreFactory.prototype.getStoreType=function(storeParams){var storeType=storeParams&&null!=storeParams.storeType?storeParams.storeType:this.gridOptionsWrapper.getServerSideStoreType();switch(storeType){case"partial":case"full":return storeType;case null:case void 0:return"full";default:var types=["full","partial"].join(", ");return console.warn("AG Grid: invalid Server Side Store Type "+storeType+", valid types are ["+types+"]"),"partial"}},__decorate$1M([agGridCommunity.Autowired("gridOptionsWrapper")],StoreFactory.prototype,"gridOptionsWrapper",void 0),__decorate$1M([agGridCommunity.Autowired("columnModel")],StoreFactory.prototype,"columnModel",void 0),StoreFactory=__decorate$1M([agGridCommunity.Bean("ssrmStoreFactory")],StoreFactory)}(),__decorate$1N=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ListenerUtils=function(){function ListenerUtils(){}return ListenerUtils.prototype.isSortingWithValueColumn=function(changedColumnsInSort){for(var valueColIds=this.columnModel.getValueColumns().map((function(col){return col.getColId()})),i=0;i<changedColumnsInSort.length;i++)if(valueColIds.indexOf(changedColumnsInSort[i])>-1)return!0;return!1},ListenerUtils.prototype.isSortingWithSecondaryColumn=function(changedColumnsInSort){if(!this.columnModel.getSecondaryColumns())return!1;for(var secondaryColIds=this.columnModel.getSecondaryColumns().map((function(col){return col.getColId()})),i=0;i<changedColumnsInSort.length;i++)if(secondaryColIds.indexOf(changedColumnsInSort[i])>-1)return!0;return!1},__decorate$1N([agGridCommunity.Autowired("columnModel")],ListenerUtils.prototype,"columnModel",void 0),ListenerUtils=__decorate$1N([agGridCommunity.Bean("ssrmListenerUtils")],ListenerUtils)}(),ServerSideRowModelModule={moduleName:agGridCommunity.ModuleNames.ServerSideRowModelModule,rowModels:{serverSide:ServerSideRowModel},beans:[ExpandListener,SortListener,StoreUtils,BlockUtils,NodeManager,TransactionManager,FilterListener,StoreFactory,ListenerUtils],dependantModules:[EnterpriseCoreModule]},ClientSideValuesExtractor=function(){function ClientSideValuesExtractor(rowModel,filterParams,caseFormat){this.rowModel=rowModel,this.filterParams=filterParams,this.caseFormat=caseFormat}return ClientSideValuesExtractor.prototype.extractUniqueValues=function(predicate){var _this=this,values={},keyCreator=this.filterParams.colDef.keyCreator,addValue=function(value){var valueKey=null!=value?_this.caseFormat(value):"__<ag-grid-pseudo-null>__";valueKey&&null==values[valueKey]&&(values[valueKey]=value)};return this.rowModel.forEachLeafNode((function(node){if(node.data&&predicate(node)){var _a=_this.filterParams,api=_a.api,colDef=_a.colDef,column=_a.column,columnApi=_a.columnApi,context=_a.context,value=_this.filterParams.valueGetter({api,colDef,column,columnApi,context,data:node.data,getValue:function(field){return node.data[field]},node});if(keyCreator){var params={value,colDef:_this.filterParams.colDef,column:_this.filterParams.column,node,data:node.data,api:_this.filterParams.api,columnApi:_this.filterParams.columnApi,context:_this.filterParams.context};value=keyCreator(params)}null!=(value=agGridCommunity._.makeNull(value))&&Array.isArray(value)?value.forEach((function(x){var formatted=agGridCommunity._.toStringOrNull(agGridCommunity._.makeNull(x));addValue(formatted)})):addValue(agGridCommunity._.toStringOrNull(value))}})),agGridCommunity._.values(values)},ClientSideValuesExtractor}();!function(SetFilterModelValuesType){SetFilterModelValuesType[SetFilterModelValuesType.PROVIDED_LIST=0]="PROVIDED_LIST",SetFilterModelValuesType[SetFilterModelValuesType.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",SetFilterModelValuesType[SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES"}(SetFilterModelValuesType||(SetFilterModelValuesType={}));var SetValueModel=function(){function SetValueModel(filterParams,setIsLoading,valueFormatterService,translate,caseFormat){var _this=this;this.filterParams=filterParams,this.setIsLoading=setIsLoading,this.valueFormatterService=valueFormatterService,this.translate=translate,this.caseFormat=caseFormat,this.localEventService=new agGridCommunity.EventService,this.miniFilterText=null,this.providedValues=null,this.allValues=[],this.availableValues=new Set,this.displayedValues=[],this.selectedValues=new Set,this.initialised=!1;var column=filterParams.column,colDef=filterParams.colDef,textFormatter=filterParams.textFormatter,doesRowPassOtherFilter=filterParams.doesRowPassOtherFilter,suppressSorting=filterParams.suppressSorting,comparator=filterParams.comparator,rowModel=filterParams.rowModel,values=filterParams.values;filterParams.caseSensitive;this.column=column,this.formatter=textFormatter||agGridCommunity.TextFilter.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=doesRowPassOtherFilter,this.suppressSorting=suppressSorting||!1,this.comparator=comparator||colDef.comparator||agGridCommunity._.defaultComparator,rowModel.getType()===agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideValuesExtractor=new ClientSideValuesExtractor(rowModel,this.filterParams,this.caseFormat)),null==values?this.valuesType=SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(values)?SetFilterModelValuesType.PROVIDED_LIST:SetFilterModelValuesType.PROVIDED_CALLBACK,this.providedValues=values),this.updateAllValues().then((function(updatedValues){return _this.resetSelectionState(updatedValues||[])}))}return SetValueModel.prototype.addEventListener=function(eventType,listener,async){this.localEventService.addEventListener(eventType,listener,async)},SetValueModel.prototype.removeEventListener=function(eventType,listener,async){this.localEventService.removeEventListener(eventType,listener,async)},SetValueModel.prototype.refreshValues=function(){var currentModel=this.getModel();return this.updateAllValues(),this.setModel(currentModel)},SetValueModel.prototype.overrideValues=function(valuesToUse){var _this=this;return new agGridCommunity.AgPromise((function(resolve){_this.allValuesPromise.then((function(){_this.valuesType=SetFilterModelValuesType.PROVIDED_LIST,_this.providedValues=valuesToUse,_this.refreshValues().then((function(){return resolve()}))}))}))},SetValueModel.prototype.refreshAfterAnyFilterChanged=function(){var _this=this;return this.showAvailableOnly()?this.allValuesPromise.then((function(values){return _this.updateAvailableValues(values||[])})):agGridCommunity.AgPromise.resolve()},SetValueModel.prototype.isInitialised=function(){return this.initialised},SetValueModel.prototype.updateAllValues=function(){var _this=this;return this.allValuesPromise=new agGridCommunity.AgPromise((function(resolve){switch(_this.valuesType){case SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES:case SetFilterModelValuesType.PROVIDED_LIST:var values=_this.valuesType===SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES?_this.getValuesFromRows(!1):agGridCommunity._.values(_this.uniqueValues(agGridCommunity._.toStrings(_this.providedValues)||[])),sortedValues=_this.sortValues(values||[]);_this.allValues=sortedValues,resolve(sortedValues);break;case SetFilterModelValuesType.PROVIDED_CALLBACK:_this.setIsLoading(!0);var callback_1=_this.providedValues,_a=_this.filterParams,columnApi=_a.columnApi,api=_a.api,context=_a.context,column=_a.column,params_1={success:function(values){var processedValues=agGridCommunity._.values(_this.uniqueValues(agGridCommunity._.toStrings(values)||[]));_this.setIsLoading(!1);var sortedValues=_this.sortValues(processedValues||[]);_this.allValues=sortedValues,resolve(sortedValues)},colDef:_a.colDef,column,columnApi,api,context};window.setTimeout((function(){return callback_1(params_1)}),0);break;default:throw new Error("Unrecognised valuesType")}})),this.allValuesPromise.then((function(values){return _this.updateAvailableValues(values||[])})).then((function(){return _this.initialised=!0})),this.allValuesPromise},SetValueModel.prototype.setValuesType=function(value){this.valuesType=value},SetValueModel.prototype.getValuesType=function(){return this.valuesType},SetValueModel.prototype.isValueAvailable=function(value){return this.availableValues.has(value)},SetValueModel.prototype.showAvailableOnly=function(){return this.valuesType===SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES},SetValueModel.prototype.updateAvailableValues=function(allValues){var availableValues=this.showAvailableOnly()?this.sortValues(this.getValuesFromRows(!0)):allValues;this.availableValues=agGridCommunity._.convertToSet(availableValues),this.localEventService.dispatchEvent({type:SetValueModel.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues()},SetValueModel.prototype.sortValues=function(values){return this.suppressSorting?values:!this.filterParams.excelMode||values.indexOf(null)<0?values.sort(this.comparator):values.filter((function(v){return null!=v})).sort(this.comparator).concat(null)},SetValueModel.prototype.getValuesFromRows=function(removeUnavailableValues){var _this=this;if(void 0===removeUnavailableValues&&(removeUnavailableValues=!1),!this.clientSideValuesExtractor)return console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values"),[];return this.clientSideValuesExtractor.extractUniqueValues((function(node){return!removeUnavailableValues||_this.doesRowPassOtherFilters(node)}))},SetValueModel.prototype.setMiniFilter=function(value){return value=agGridCommunity._.makeNull(value),this.miniFilterText!==value&&(this.miniFilterText=value,this.updateDisplayedValues(),!0)},SetValueModel.prototype.getMiniFilter=function(){return this.miniFilterText},SetValueModel.prototype.updateDisplayedValues=function(){var _this=this;if(null!=this.miniFilterText){this.displayedValues=[];var formattedFilterText=this.caseFormat(this.formatter(this.miniFilterText)||""),matchesFilter=function(valueToCheck){return null!=valueToCheck&&_this.caseFormat(valueToCheck).indexOf(formattedFilterText)>=0};this.availableValues.forEach((function(value){if(null==value)_this.filterParams.excelMode&&matchesFilter(_this.translate("blanks"))&&_this.displayedValues.push(value);else{var textFormatterValue=_this.formatter(value),valueFormatterValue=_this.valueFormatterService.formatValue(_this.column,null,textFormatterValue,_this.filterParams.valueFormatter,!1);(matchesFilter(textFormatterValue)||matchesFilter(valueFormatterValue))&&_this.displayedValues.push(value)}}))}else this.displayedValues=agGridCommunity._.values(this.availableValues)},SetValueModel.prototype.getDisplayedValueCount=function(){return this.displayedValues.length},SetValueModel.prototype.getDisplayedValue=function(index){return this.displayedValues[index]},SetValueModel.prototype.hasSelections=function(){return this.filterParams.defaultToNothingSelected?this.selectedValues.size>0:this.allValues.length!==this.selectedValues.size},SetValueModel.prototype.getValues=function(){return this.allValues.slice()},SetValueModel.prototype.selectAllMatchingMiniFilter=function(clearExistingSelection){var _this=this;void 0===clearExistingSelection&&(clearExistingSelection=!1),null==this.miniFilterText?this.selectedValues=agGridCommunity._.convertToSet(this.allValues):(clearExistingSelection&&this.selectedValues.clear(),this.displayedValues.forEach((function(value){return _this.selectedValues.add(value)})))},SetValueModel.prototype.deselectAllMatchingMiniFilter=function(){var _this=this;null==this.miniFilterText?this.selectedValues.clear():this.displayedValues.forEach((function(value){return _this.selectedValues.delete(value)}))},SetValueModel.prototype.selectValue=function(value){this.selectedValues.add(value)},SetValueModel.prototype.deselectValue=function(value){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayedValues),this.selectedValues.delete(value)},SetValueModel.prototype.isValueSelected=function(value){return this.selectedValues.has(value)},SetValueModel.prototype.isEverythingVisibleSelected=function(){var _this=this;return this.displayedValues.filter((function(it){return _this.isValueSelected(it)})).length===this.displayedValues.length},SetValueModel.prototype.isNothingVisibleSelected=function(){var _this=this;return 0===this.displayedValues.filter((function(it){return _this.isValueSelected(it)})).length},SetValueModel.prototype.getModel=function(){return this.hasSelections()?agGridCommunity._.values(this.selectedValues):null},SetValueModel.prototype.setModel=function(model){var _this=this;return this.allValuesPromise.then((function(values){if(null==model)_this.resetSelectionState(values||[]);else{_this.selectedValues.clear();var allValues_1=_this.uniqueValues(values||[]);model.forEach((function(value){var allValue=allValues_1[_this.uniqueKey(value)];void 0!==allValue&&_this.selectedValues.add(allValue)}))}}))},SetValueModel.prototype.uniqueValues=function(values){var _this=this,uniqueValues={};return(values||[]).forEach((function(rawValue){var value=agGridCommunity._.makeNull(rawValue),key=_this.uniqueKey(value);void 0===uniqueValues[key]&&(uniqueValues[key]=value)})),uniqueValues},SetValueModel.prototype.uniqueKey=function(v){return null==v?"__<ag-grid-pseudo-null>__":this.caseFormat(v)},SetValueModel.prototype.resetSelectionState=function(values){this.filterParams.defaultToNothingSelected?this.selectedValues.clear():this.selectedValues=agGridCommunity._.convertToSet(values||[])},SetValueModel.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",SetValueModel}(),__extends$3l=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1O=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetFilterListItem=function(_super){function SetFilterListItem(value,params,translate,isSelected){var _this=_super.call(this,SetFilterListItem.TEMPLATE)||this;return _this.value=value,_this.params=params,_this.translate=translate,_this.isSelected=isSelected,_this}return __extends$3l(SetFilterListItem,_super),SetFilterListItem.prototype.init=function(){var _this=this;this.render(),this.eCheckbox.setValue(this.isSelected,!0),this.eCheckbox.setDisabled(!!this.params.readOnly),this.params.readOnly||this.eCheckbox.onValueChange((function(value){var parsedValue=value||!1;_this.isSelected=parsedValue;var event={type:SetFilterListItem.EVENT_SELECTION_CHANGED,isSelected:parsedValue};_this.dispatchEvent(event)}))},SetFilterListItem.prototype.toggleSelected=function(){this.params.readOnly||(this.isSelected=!this.isSelected,this.eCheckbox.setValue(this.isSelected))},SetFilterListItem.prototype.render=function(){var column=this.params.column,value=this.value,formattedValue=null;if("function"==typeof value?value=value():formattedValue=this.getFormattedValue(this.params,column,value),this.params.showTooltips){var tooltipValue=null!=formattedValue?formattedValue:value;this.setTooltip(tooltipValue)}var params={value,valueFormatted:formattedValue,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),colDef:this.params.colDef,column:this.params.column};this.renderCell(params)},SetFilterListItem.prototype.getTooltipParams=function(){var res=_super.prototype.getTooltipParams.call(this);return res.location="setFilterValue",res.colDef=this.getComponentHolder(),res},SetFilterListItem.prototype.getFormattedValue=function(filterParams,column,value){var formatter=filterParams&&filterParams.valueFormatter;return this.valueFormatterService.formatValue(column,null,value,formatter,!1)},SetFilterListItem.prototype.renderCell=function(params){var _this=this,compDetails=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,params),cellRendererPromise=compDetails?compDetails.newAgStackInstance():void 0;if(null!=cellRendererPromise)cellRendererPromise.then((function(component){component&&(_this.eCheckbox.setLabel(component.getGui()),_this.addDestroyFunc((function(){return _this.destroyBean(component)})))}));else{var valueToRender=null==params.valueFormatted?params.value:params.valueFormatted;this.eCheckbox.setLabel(null==valueToRender?this.translate("blanks"):valueToRender)}},SetFilterListItem.prototype.getComponentHolder=function(){return this.params.column.getColDef()},SetFilterListItem.EVENT_SELECTION_CHANGED="selectionChanged",SetFilterListItem.TEMPLATE='\n        <div class="ag-set-filter-item">\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',__decorate$1O([agGridCommunity.Autowired("valueFormatterService")],SetFilterListItem.prototype,"valueFormatterService",void 0),__decorate$1O([agGridCommunity.Autowired("userComponentFactory")],SetFilterListItem.prototype,"userComponentFactory",void 0),__decorate$1O([agGridCommunity.RefSelector("eCheckbox")],SetFilterListItem.prototype,"eCheckbox",void 0),__decorate$1O([agGridCommunity.PostConstruct],SetFilterListItem.prototype,"init",null),SetFilterListItem}(agGridCommunity.Component),DEFAULT_LOCALE_TEXT={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",noMatches:"No matches."},__extends$3m=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1P=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetFilter=function(_super){function SetFilter(){var _this=_super.call(this,"setFilter")||this;return _this.valueModel=null,_this.setFilterParams=null,_this.virtualList=null,_this.caseSensitive=!1,_this.appliedModelValues=null,_this}return __extends$3m(SetFilter,_super),SetFilter.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.positionableFeature=new agGridCommunity.PositionableFeature(this.eSetFilterList,{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},SetFilter.prototype.updateUiVisibility=function(){},SetFilter.prototype.createBodyTemplate=function(){return'\n            <div class="ag-set-filter">\n                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">'+this.translateForSetFilter("loadingOoo")+'</div>\n                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>\n                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">'+this.translateForSetFilter("noMatches")+'</div>\n                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>\n            </div>'},SetFilter.prototype.handleKeyDown=function(e){if(_super.prototype.handleKeyDown.call(this,e),!e.defaultPrevented)switch(e.key){case agGridCommunity.KeyCode.SPACE:this.handleKeySpace(e);break;case agGridCommunity.KeyCode.ENTER:this.handleKeyEnter(e)}},SetFilter.prototype.handleKeySpace=function(e){var eDocument=this.gridOptionsWrapper.getDocument();if(this.eSetFilterList.contains(eDocument.activeElement)&&this.virtualList){var currentItem=this.virtualList.getLastFocusedRow();if(null!=currentItem){var component=this.virtualList.getComponentAt(currentItem);if(null!=component)e.preventDefault(),(this.setFilterParams||{}).readOnly||component.toggleSelected()}}},SetFilter.prototype.handleKeyEnter=function(e){if(this.setFilterParams){var _a=this.setFilterParams||{},excelMode=_a.excelMode,readOnly=_a.readOnly;excelMode&&!readOnly&&(e.preventDefault(),this.onBtApply(!1,!1,e),"mac"===this.setFilterParams.excelMode&&this.eMiniFilter.getInputElement().select())}},SetFilter.prototype.getCssIdentifier=function(){return"set-filter"},SetFilter.prototype.setModelAndRefresh=function(values){var _this=this;return this.valueModel?this.valueModel.setModel(values).then((function(){return _this.refresh()})):agGridCommunity.AgPromise.resolve()},SetFilter.prototype.resetUiToDefaults=function(){return this.setMiniFilter(null),this.setModelAndRefresh(null)},SetFilter.prototype.setModelIntoUi=function(model){this.setMiniFilter(null);var values=null==model?null:model.values;return this.setModelAndRefresh(values)},SetFilter.prototype.getModelFromUi=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var values=this.valueModel.getModel();return values?{values,filterType:this.getFilterType()}:null},SetFilter.prototype.getFilterType=function(){return"set"},SetFilter.prototype.getValueModel=function(){return this.valueModel},SetFilter.prototype.areModelsEqual=function(a,b){return null==a&&null==b||null!=a&&null!=b&&agGridCommunity._.areEqual(a.values,b.values)},SetFilter.prototype.setParams=function(params){var _this=this;this.applyExcelModeOptions(params),_super.prototype.setParams.call(this,params),this.setFilterParams=params,this.caseSensitive=params.caseSensitive||!1,this.valueModel=new SetValueModel(params,(function(loading){return _this.showOrHideLoadingScreen(loading)}),this.valueFormatterService,(function(key){return _this.translateForSetFilter(key)}),(function(v){return _this.caseFormat(v)})),this.initialiseFilterBodyUi(),params.rowModel.getType()!==agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE||params.values||this.addEventListenersForDataChanges()},SetFilter.prototype.applyExcelModeOptions=function(params){"windows"===params.excelMode?(params.buttons||(params.buttons=["apply","cancel"]),null==params.closeOnApply&&(params.closeOnApply=!0)):"mac"===params.excelMode&&(params.buttons||(params.buttons=["reset"]),null==params.applyMiniFilterWhileTyping&&(params.applyMiniFilterWhileTyping=!0),null==params.debounceMs&&(params.debounceMs=500))},SetFilter.prototype.addEventListenersForDataChanges=function(){var _this=this;this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_ROW_DATA_UPDATED,(function(){return _this.syncAfterDataChange()})),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_CELL_VALUE_CHANGED,(function(event){_this.setFilterParams&&event.column===_this.setFilterParams.column&&_this.syncAfterDataChange()}))},SetFilter.prototype.syncAfterDataChange=function(refreshValues){var _this=this;if(void 0===refreshValues&&(refreshValues=!0),!this.valueModel)throw new Error("Value model has not been created.");var promise=agGridCommunity.AgPromise.resolve();return refreshValues&&(promise=this.valueModel.refreshValues()),promise.then((function(){_this.refresh(),_this.onBtApply(!1,!0)}))},SetFilter.prototype.showOrHideLoadingScreen=function(isLoading){agGridCommunity._.setDisplayed(this.eFilterLoading,isLoading)},SetFilter.prototype.initialiseFilterBodyUi=function(){this.initVirtualList(),this.initMiniFilter()},SetFilter.prototype.initVirtualList=function(){var _this=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var filterListName=this.gridOptionsWrapper.getLocaleTextFunc()("ariaFilterList","Filter List"),virtualList=this.virtualList=this.createBean(new agGridCommunity.VirtualList("filter","listbox",filterListName)),eSetFilterList=this.getRefElement("eSetFilterList");eSetFilterList&&eSetFilterList.appendChild(virtualList.getGui());var model,cellHeight=this.setFilterParams.cellHeight;null!=cellHeight&&virtualList.setRowHeight(cellHeight),virtualList.setComponentCreator((function(value){return _this.createSetListItem(value)})),model=this.setFilterParams.suppressSelectAll?new ModelWrapper(this.valueModel):new ModelWrapperWithSelectAll(this.valueModel,(function(){return _this.isSelectAllSelected()})),virtualList.setModel(model)},SetFilter.prototype.getSelectAllLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var key=null!=this.valueModel.getMiniFilter()&&this.setFilterParams.excelMode?"selectAllSearchResults":"selectAll";return this.translateForSetFilter(key)},SetFilter.prototype.createSetListItem=function(value){var listItem,_this=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return value===SetFilter.SELECT_ALL_VALUE?((listItem=this.createBean(new SetFilterListItem((function(){return _this.getSelectAllLabel()}),this.setFilterParams,(function(key){return _this.translateForSetFilter(key)}),this.isSelectAllSelected()))).addEventListener(SetFilterListItem.EVENT_SELECTION_CHANGED,(function(e){return _this.onSelectAll(e.isSelected)})),listItem):((listItem=this.createBean(new SetFilterListItem(value,this.setFilterParams,(function(key){return _this.translateForSetFilter(key)}),this.valueModel.isValueSelected(value)))).addEventListener(SetFilterListItem.EVENT_SELECTION_CHANGED,(function(e){return _this.onItemSelected(value,e.isSelected)})),listItem)},SetFilter.prototype.initMiniFilter=function(){var _this=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var eMiniFilter=this.eMiniFilter,translate=this.gridOptionsWrapper.getLocaleTextFunc();eMiniFilter.setDisplayed(!this.setFilterParams.suppressMiniFilter),eMiniFilter.setValue(this.valueModel.getMiniFilter()),eMiniFilter.onValueChange((function(){return _this.onMiniFilterInput()})),eMiniFilter.setInputAriaLabel(translate("ariaSearchFilterValues","Search filter values")),this.addManagedListener(eMiniFilter.getInputElement(),"keypress",(function(e){return _this.onMiniFilterKeyPress(e)}))},SetFilter.prototype.afterGuiAttached=function(params){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");_super.prototype.afterGuiAttached.call(this,params),this.setFilterParams.excelMode&&(this.resetUiToActiveModel(),this.showOrHideResults()),this.refreshVirtualList();var eMiniFilter=this.eMiniFilter;eMiniFilter.setInputPlaceholder(this.translateForSetFilter("searchOoo")),params&&params.suppressFocus||eMiniFilter.getFocusableElement().focus();var resizableObject,resizable=!(!params||"floatingFilter"!==params.container);resizableObject=this.gridOptionsWrapper.isEnableRtl()?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0},resizable?(this.positionableFeature.restoreLastSize(),this.positionableFeature.setResizable(resizableObject)):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1))},SetFilter.prototype.applyModel=function(){var _this=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();var result=_super.prototype.applyModel.call(this),appliedModel=this.getModel();return this.appliedModelValues=appliedModel?appliedModel.values.reduce((function(values,value){return values[_this.caseFormat(String(value))]=!0,values}),{}):null,result},SetFilter.prototype.isModelValid=function(model){return!this.setFilterParams||!this.setFilterParams.excelMode||(null==model||model.values.length>0)},SetFilter.prototype.doesFilterPass=function(params){var _this=this;if(!this.setFilterParams||!this.valueModel||!this.appliedModelValues)return!0;var node=params.node,data=params.data,_a=this.setFilterParams,valueGetter=_a.valueGetter,keyCreator=_a.colDef.keyCreator,api=_a.api,colDef=_a.colDef,column=_a.column,columnApi=_a.columnApi,context=_a.context,value=valueGetter({api,colDef,column,columnApi,context,data,getValue:function(field){return data[field]},node});keyCreator&&(value=keyCreator({value,colDef,column,node,data,api,columnApi,context}));return value=agGridCommunity._.makeNull(value),Array.isArray(value)?value.some((function(v){return!0===_this.appliedModelValues[_this.caseFormat(String(agGridCommunity._.makeNull(v)))]})):!0===this.appliedModelValues[this.caseFormat(String(value))]},SetFilter.prototype.onNewRowsLoaded=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var valuesType=this.valueModel.getValuesType();this.syncAfterDataChange(valuesType===SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES)},SetFilter.prototype.setFilterValues=function(options){var _this=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(options).then((function(){_this.refresh(),_this.onUiChanged()}))},SetFilter.prototype.resetFilterValues=function(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange(!0)},SetFilter.prototype.refreshFilterValues=function(){var _this=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then((function(){_this.refresh(),_this.onUiChanged()}))},SetFilter.prototype.onAnyFilterChanged=function(){var _this=this;setTimeout((function(){if(_this.isAlive()){if(!_this.valueModel)throw new Error("Value model has not been created.");_this.valueModel.refreshAfterAnyFilterChanged().then((function(){return _this.refresh()}))}}),0)},SetFilter.prototype.onMiniFilterInput=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(this.valueModel.setMiniFilter(this.eMiniFilter.getValue())){var _a=this.setFilterParams||{},applyMiniFilterWhileTyping=_a.applyMiniFilterWhileTyping;!_a.readOnly&&applyMiniFilterWhileTyping?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}},SetFilter.prototype.updateUiAfterMiniFilterChange=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var _a=this.setFilterParams||{},excelMode=_a.excelMode,readOnly=_a.readOnly;null==excelMode||readOnly?this.refresh():null==this.valueModel.getMiniFilter()?this.resetUiToActiveModel():(this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged()),this.showOrHideResults()},SetFilter.prototype.showOrHideResults=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var hideResults=null!=this.valueModel.getMiniFilter()&&this.valueModel.getDisplayedValueCount()<1;agGridCommunity._.setDisplayed(this.eNoMatches,hideResults),agGridCommunity._.setDisplayed(this.eSetFilterList,!hideResults)},SetFilter.prototype.resetUiToActiveModel=function(){var _this=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.eMiniFilter.setValue(null,!0),this.valueModel.setMiniFilter(null),this.setModelIntoUi(this.getModel()).then((function(){return _this.onUiChanged(!1,"prevent")}))},SetFilter.prototype.onMiniFilterKeyPress=function(e){var _a=this.setFilterParams||{},excelMode=_a.excelMode,readOnly=_a.readOnly;e.key!==agGridCommunity.KeyCode.ENTER||excelMode||readOnly||this.filterOnAllVisibleValues()},SetFilter.prototype.filterOnAllVisibleValues=function(applyImmediately){void 0===applyImmediately&&(applyImmediately=!0);var readOnly=(this.setFilterParams||{}).readOnly;if(!this.valueModel)throw new Error("Value model has not been created.");if(readOnly)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged(!1,applyImmediately?"immediately":"debounce"),this.showOrHideResults()},SetFilter.prototype.focusRowIfAlive=function(rowIndex){var _this=this;null!=rowIndex&&window.setTimeout((function(){if(!_this.virtualList)throw new Error("Virtual list has not been created.");_this.isAlive()&&_this.virtualList.focusRow(rowIndex)}),0)},SetFilter.prototype.onSelectAll=function(isSelected){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");isSelected?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter();var focusedRow=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(focusedRow)},SetFilter.prototype.onItemSelected=function(value,isSelected){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");isSelected?this.valueModel.selectValue(value):this.valueModel.deselectValue(value);var focusedRow=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(focusedRow)},SetFilter.prototype.setMiniFilter=function(newMiniFilter){this.eMiniFilter.setValue(newMiniFilter),this.onMiniFilterInput()},SetFilter.prototype.getMiniFilter=function(){return this.valueModel?this.valueModel.getMiniFilter():null},SetFilter.prototype.refresh=function(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh()},SetFilter.prototype.getValues=function(){return this.valueModel?this.valueModel.getValues():[]},SetFilter.prototype.refreshVirtualList=function(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.refresh()},SetFilter.prototype.translateForSetFilter=function(key){return this.gridOptionsWrapper.getLocaleTextFunc()(key,DEFAULT_LOCALE_TEXT[key])},SetFilter.prototype.isSelectAllSelected=function(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}},SetFilter.prototype.destroy=function(){null!=this.virtualList&&(this.virtualList.destroy(),this.virtualList=null),_super.prototype.destroy.call(this)},SetFilter.prototype.caseFormat=function(valueToFormat){return null==valueToFormat||"string"!=typeof valueToFormat||this.caseSensitive?valueToFormat:valueToFormat.toUpperCase()},SetFilter.SELECT_ALL_VALUE="__AG_SELECT_ALL__",__decorate$1P([agGridCommunity.RefSelector("eMiniFilter")],SetFilter.prototype,"eMiniFilter",void 0),__decorate$1P([agGridCommunity.RefSelector("eFilterLoading")],SetFilter.prototype,"eFilterLoading",void 0),__decorate$1P([agGridCommunity.RefSelector("eSetFilterList")],SetFilter.prototype,"eSetFilterList",void 0),__decorate$1P([agGridCommunity.RefSelector("eFilterNoMatches")],SetFilter.prototype,"eNoMatches",void 0),__decorate$1P([agGridCommunity.Autowired("valueFormatterService")],SetFilter.prototype,"valueFormatterService",void 0),SetFilter}(agGridCommunity.ProvidedFilter),ModelWrapper=function(){function ModelWrapper(model){this.model=model}return ModelWrapper.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()},ModelWrapper.prototype.getRow=function(index){return this.model.getDisplayedValue(index)},ModelWrapper.prototype.isRowSelected=function(index){return this.model.isValueSelected(this.getRow(index))},ModelWrapper}(),ModelWrapperWithSelectAll=function(){function ModelWrapperWithSelectAll(model,isSelectAllSelected){this.model=model,this.isSelectAllSelected=isSelectAllSelected}return ModelWrapperWithSelectAll.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()+1},ModelWrapperWithSelectAll.prototype.getRow=function(index){return 0===index?SetFilter.SELECT_ALL_VALUE:this.model.getDisplayedValue(index-1)},ModelWrapperWithSelectAll.prototype.isRowSelected=function(index){return 0===index?this.isSelectAllSelected():this.model.isValueSelected(this.getRow(index))},ModelWrapperWithSelectAll}(),__extends$3n=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1Q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetFloatingFilterComp=function(_super){function SetFloatingFilterComp(){var _this=_super.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this;return _this.availableValuesListenerAdded=!1,_this}return __extends$3n(SetFloatingFilterComp,_super),SetFloatingFilterComp.prototype.destroy=function(){_super.prototype.destroy.call(this)},SetFloatingFilterComp.prototype.init=function(params){var displayName=this.columnModel.getDisplayNameForColumn(params.column,"header",!0),translate=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(displayName+" "+translate("ariaFilterInput","Filter Input")).addGuiEventListener("click",(function(){return params.showParentFilter()})),this.params=params},SetFloatingFilterComp.prototype.onParentModelChanged=function(parentModel){this.updateFloatingFilterText(parentModel)},SetFloatingFilterComp.prototype.parentSetFilterInstance=function(cb){this.params.parentFilterInstance((function(filter){if(!(filter instanceof SetFilter))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as it's parent");cb(filter)}))},SetFloatingFilterComp.prototype.addAvailableValuesListener=function(){var _this=this;this.parentSetFilterInstance((function(setFilter){var setValueModel=setFilter.getValueModel();setValueModel&&_this.addManagedListener(setValueModel,SetValueModel.EVENT_AVAILABLE_VALUES_CHANGED,(function(){return _this.updateFloatingFilterText()}))})),this.availableValuesListenerAdded=!0},SetFloatingFilterComp.prototype.updateFloatingFilterText=function(parentModel){var _this=this;this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance((function(setFilter){var values=(parentModel||setFilter.getModel()||{}).values,valueModel=setFilter.getValueModel();if(null!=values&&null!=valueModel){var localeTextFunc=_this.gridOptionsWrapper.getLocaleTextFunc(),formattedValues=values.filter((function(v){return valueModel.isValueAvailable(v)})).map((function(value){var _a=_this.params,column=_a.column,filterParams=_a.filterParams,formattedValue=_this.valueFormatterService.formatValue(column,null,value,filterParams.valueFormatter,!1),valueToRender=null!=formattedValue?formattedValue:value;return null==valueToRender?localeTextFunc("blanks",DEFAULT_LOCALE_TEXT.blanks):valueToRender})),arrayToDisplay=formattedValues.length>10?formattedValues.slice(0,10).concat("..."):formattedValues,valuesString="("+formattedValues.length+") "+arrayToDisplay.join(",");_this.eFloatingFilterText.setValue(valuesString)}else _this.eFloatingFilterText.setValue("")}))},__decorate$1Q([agGridCommunity.RefSelector("eFloatingFilterText")],SetFloatingFilterComp.prototype,"eFloatingFilterText",void 0),__decorate$1Q([agGridCommunity.Autowired("valueFormatterService")],SetFloatingFilterComp.prototype,"valueFormatterService",void 0),__decorate$1Q([agGridCommunity.Autowired("columnModel")],SetFloatingFilterComp.prototype,"columnModel",void 0),SetFloatingFilterComp}(agGridCommunity.Component),SetFilterModule={moduleName:agGridCommunity.ModuleNames.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:SetFilter},{componentName:"agSetColumnFloatingFilter",componentClass:SetFloatingFilterComp}],dependantModules:[EnterpriseCoreModule]},__extends$3o=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1R=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},StatusBarService=function(_super){function StatusBarService(){var _this=_super.call(this)||this;return _this.allComponents={},_this}return __extends$3o(StatusBarService,_super),StatusBarService.prototype.registerStatusPanel=function(key,component){this.allComponents[key]=component},StatusBarService.prototype.getStatusPanel=function(key){return this.allComponents[key]},StatusBarService=__decorate$1R([agGridCommunity.Bean("statusBarService")],StatusBarService)}(agGridCommunity.BeanStub),__extends$3p=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1S=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},StatusBar=function(_super){function StatusBar(){return _super.call(this,StatusBar.TEMPLATE)||this}return __extends$3p(StatusBar,_super),StatusBar.prototype.postConstruct=function(){if(this.gridOptions.statusBar&&this.gridOptions.statusBar.statusPanels){var leftStatusPanelComponents=this.gridOptions.statusBar.statusPanels.filter((function(componentConfig){return"left"===componentConfig.align}));this.createAndRenderComponents(leftStatusPanelComponents,this.eStatusBarLeft);var centerStatusPanelComponents=this.gridOptions.statusBar.statusPanels.filter((function(componentConfig){return"center"===componentConfig.align}));this.createAndRenderComponents(centerStatusPanelComponents,this.eStatusBarCenter);var rightStatusPanelComponents=this.gridOptions.statusBar.statusPanels.filter((function(componentConfig){return!componentConfig.align||"right"===componentConfig.align}));this.createAndRenderComponents(rightStatusPanelComponents,this.eStatusBarRight)}else this.setDisplayed(!1)},StatusBar.prototype.createAndRenderComponents=function(statusBarComponents,ePanelComponent){var _this=this,componentDetails=[];statusBarComponents.forEach((function(componentConfig){var promise=_this.userComponentFactory.getStatusPanelCompDetails(componentConfig,{}).newAgStackInstance();promise&&componentDetails.push({key:componentConfig.key||componentConfig.statusPanel,promise})})),agGridCommunity.AgPromise.all(componentDetails.map((function(details){return details.promise}))).then((function(){componentDetails.forEach((function(componentDetail){componentDetail.promise.then((function(component){var destroyFunc=function(){_this.getContext().destroyBean(component)};_this.isAlive()?(_this.statusBarService.registerStatusPanel(componentDetail.key,component),ePanelComponent.appendChild(component.getGui()),_this.addDestroyFunc(destroyFunc)):destroyFunc()}))}))}))},StatusBar.TEMPLATE='<div class="ag-status-bar">\n            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>\n            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>\n            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>\n        </div>',__decorate$1S([agGridCommunity.Autowired("gridOptions")],StatusBar.prototype,"gridOptions",void 0),__decorate$1S([agGridCommunity.Autowired("userComponentFactory")],StatusBar.prototype,"userComponentFactory",void 0),__decorate$1S([agGridCommunity.Autowired("statusBarService")],StatusBar.prototype,"statusBarService",void 0),__decorate$1S([agGridCommunity.RefSelector("eStatusBarLeft")],StatusBar.prototype,"eStatusBarLeft",void 0),__decorate$1S([agGridCommunity.RefSelector("eStatusBarCenter")],StatusBar.prototype,"eStatusBarCenter",void 0),__decorate$1S([agGridCommunity.RefSelector("eStatusBarRight")],StatusBar.prototype,"eStatusBarRight",void 0),__decorate$1S([agGridCommunity.PostConstruct],StatusBar.prototype,"postConstruct",null),StatusBar}(agGridCommunity.Component),__extends$3q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1T=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},NameValueComp=function(_super){function NameValueComp(){return _super.call(this,NameValueComp.TEMPLATE)||this}return __extends$3q(NameValueComp,_super),NameValueComp.prototype.setLabel=function(key,defaultValue){this.setDisplayed(!1);var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc();this.eLabel.innerHTML=localeTextFunc(key,defaultValue)},NameValueComp.prototype.setValue=function(value){this.eValue.innerHTML=value},NameValueComp.TEMPLATE='<div class="ag-status-name-value">\n            <span ref="eLabel"></span>:&nbsp;\n            <span ref="eValue" class="ag-status-name-value-value"></span>\n        </div>',__decorate$1T([agGridCommunity.RefSelector("eLabel")],NameValueComp.prototype,"eLabel",void 0),__decorate$1T([agGridCommunity.RefSelector("eValue")],NameValueComp.prototype,"eValue",void 0),NameValueComp}(agGridCommunity.Component),__extends$3r=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1U=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TotalAndFilteredRowsComp=function(_super){function TotalAndFilteredRowsComp(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$3r(TotalAndFilteredRowsComp,_super),TotalAndFilteredRowsComp.prototype.postConstruct=function(){"clientSide"===this.gridApi.getModel().getType()?(this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.")},TotalAndFilteredRowsComp.prototype.onDataChanged=function(){var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),thousandSeparator=localeTextFunc("thousandSeparator",","),decimalSeparator=localeTextFunc("decimalSeparator","."),rowCount=agGridCommunity._.formatNumberCommas(this.getFilteredRowCountValue(),thousandSeparator,decimalSeparator),totalRowCount=agGridCommunity._.formatNumberCommas(this.getTotalRowCount(),thousandSeparator,decimalSeparator);if(rowCount===totalRowCount)this.setValue(rowCount);else{var localeTextFunc_1=this.gridOptionsWrapper.getLocaleTextFunc();this.setValue(rowCount+" "+localeTextFunc_1("of","of")+" "+totalRowCount)}},TotalAndFilteredRowsComp.prototype.getFilteredRowCountValue=function(){var filteredRowCount=0;return this.gridApi.forEachNodeAfterFilter((function(node){node.group||filteredRowCount++})),filteredRowCount},TotalAndFilteredRowsComp.prototype.getTotalRowCount=function(){var totalRowCount=0;return this.gridApi.forEachNode((function(node){node.group||totalRowCount++})),totalRowCount},TotalAndFilteredRowsComp.prototype.init=function(){},TotalAndFilteredRowsComp.prototype.destroy=function(){_super.prototype.destroy.call(this)},__decorate$1U([agGridCommunity.Autowired("gridApi")],TotalAndFilteredRowsComp.prototype,"gridApi",void 0),__decorate$1U([agGridCommunity.PostConstruct],TotalAndFilteredRowsComp.prototype,"postConstruct",null),TotalAndFilteredRowsComp}(NameValueComp),__extends$3s=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1V=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FilteredRowsComp=function(_super){function FilteredRowsComp(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$3s(FilteredRowsComp,_super),FilteredRowsComp.prototype.postConstruct=function(){if(this.setLabel("filteredRows","Filtered"),"clientSide"===this.gridApi.getModel().getType()){this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);var listener=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_MODEL_UPDATED,listener),listener()}else console.warn("AG Grid: agFilteredRowCountComponent should only be used with the client side row model.")},FilteredRowsComp.prototype.onDataChanged=function(){var totalRowCountValue=this.getTotalRowCountValue(),filteredRowCountValue=this.getFilteredRowCountValue(),localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),thousandSeparator=localeTextFunc("thousandSeparator",","),decimalSeparator=localeTextFunc("decimalSeparator",".");this.setValue(agGridCommunity._.formatNumberCommas(filteredRowCountValue,thousandSeparator,decimalSeparator)),this.setDisplayed(totalRowCountValue!==filteredRowCountValue)},FilteredRowsComp.prototype.getTotalRowCountValue=function(){var totalRowCount=0;return this.gridApi.forEachNode((function(node){return totalRowCount+=1})),totalRowCount},FilteredRowsComp.prototype.getFilteredRowCountValue=function(){var filteredRowCount=0;return this.gridApi.forEachNodeAfterFilter((function(node){node.group||(filteredRowCount+=1)})),filteredRowCount},FilteredRowsComp.prototype.init=function(){},FilteredRowsComp.prototype.destroy=function(){_super.prototype.destroy.call(this)},__decorate$1V([agGridCommunity.Autowired("gridApi")],FilteredRowsComp.prototype,"gridApi",void 0),__decorate$1V([agGridCommunity.PostConstruct],FilteredRowsComp.prototype,"postConstruct",null),FilteredRowsComp}(NameValueComp),__extends$3t=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1W=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TotalRowsComp=function(_super){function TotalRowsComp(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$3t(TotalRowsComp,_super),TotalRowsComp.prototype.postConstruct=function(){this.setLabel("totalRows","Total Rows"),"clientSide"===this.gridApi.getModel().getType()?(this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalRowCountComponent should only be used with the client side row model.")},TotalRowsComp.prototype.onDataChanged=function(){var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),thousandSeparator=localeTextFunc("thousandSeparator",","),decimalSeparator=localeTextFunc("decimalSeparator",".");this.setValue(agGridCommunity._.formatNumberCommas(this.getRowCountValue(),thousandSeparator,decimalSeparator))},TotalRowsComp.prototype.getRowCountValue=function(){var totalRowCount=0;return this.gridApi.forEachLeafNode((function(node){return totalRowCount+=1})),totalRowCount},TotalRowsComp.prototype.init=function(){},TotalRowsComp.prototype.destroy=function(){_super.prototype.destroy.call(this)},__decorate$1W([agGridCommunity.Autowired("gridApi")],TotalRowsComp.prototype,"gridApi",void 0),__decorate$1W([agGridCommunity.PostConstruct],TotalRowsComp.prototype,"postConstruct",null),TotalRowsComp}(NameValueComp),__extends$3u=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1X=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectedRowsComp=function(_super){function SelectedRowsComp(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$3u(SelectedRowsComp,_super),SelectedRowsComp.prototype.postConstruct=function(){if(this.isValidRowModel()){this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count");var selectedRowCount=this.gridApi.getSelectedRows().length,localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),thousandSeparator=localeTextFunc("thousandSeparator",","),decimalSeparator=localeTextFunc("decimalSeparator",".");this.setValue(agGridCommunity._.formatNumberCommas(selectedRowCount,thousandSeparator,decimalSeparator)),this.setDisplayed(selectedRowCount>0);var eventListener=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_MODEL_UPDATED,eventListener),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_SELECTION_CHANGED,eventListener)}else console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.")},SelectedRowsComp.prototype.isValidRowModel=function(){var rowModelType=this.gridApi.getModel().getType();return"clientSide"===rowModelType||"serverSide"===rowModelType},SelectedRowsComp.prototype.onRowSelectionChanged=function(){var selectedRowCount=this.gridApi.getSelectedRows().length,localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),thousandSeparator=localeTextFunc("thousandSeparator",","),decimalSeparator=localeTextFunc("decimalSeparator",".");this.setValue(agGridCommunity._.formatNumberCommas(selectedRowCount,thousandSeparator,decimalSeparator)),this.setDisplayed(selectedRowCount>0)},SelectedRowsComp.prototype.init=function(){},SelectedRowsComp.prototype.destroy=function(){_super.prototype.destroy.call(this)},__decorate$1X([agGridCommunity.Autowired("gridApi")],SelectedRowsComp.prototype,"gridApi",void 0),__decorate$1X([agGridCommunity.PostConstruct],SelectedRowsComp.prototype,"postConstruct",null),SelectedRowsComp}(NameValueComp),__extends$3v=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1Y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AggregationComp=function(_super){function AggregationComp(){return _super.call(this,AggregationComp.TEMPLATE)||this}return __extends$3v(AggregationComp,_super),AggregationComp.prototype.destroy=function(){_super.prototype.destroy.call(this)},AggregationComp.prototype.postConstruct=function(){this.isValidRowModel()?(this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))):console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.")},AggregationComp.prototype.isValidRowModel=function(){var rowModelType=this.gridApi.getModel().getType();return"clientSide"===rowModelType||"serverSide"===rowModelType},AggregationComp.prototype.init=function(){},AggregationComp.prototype.setAggregationComponentValue=function(aggFuncName,value,visible){var statusBarValueComponent=this.getAggregationValueComponent(aggFuncName);if(agGridCommunity._.exists(statusBarValueComponent)&&statusBarValueComponent){var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc(),thousandSeparator=localeTextFunc("thousandSeparator",","),decimalSeparator=localeTextFunc("decimalSeparator",".");statusBarValueComponent.setValue(agGridCommunity._.formatNumberTwoDecimalPlacesAndCommas(value,thousandSeparator,decimalSeparator)),statusBarValueComponent.setDisplayed(visible)}},AggregationComp.prototype.getAggregationValueComponent=function(aggFuncName){var refComponentName=aggFuncName+"AggregationComp",statusBarValueComponent=null,aggregationPanelConfig=agGridCommunity._.exists(this.gridOptions.statusBar)&&this.gridOptions.statusBar?this.gridOptions.statusBar.statusPanels.find((function(panel){return"agAggregationComponent"===panel.statusPanel})):null;return agGridCommunity._.exists(aggregationPanelConfig)&&aggregationPanelConfig?(!agGridCommunity._.exists(aggregationPanelConfig.statusPanelParams)||agGridCommunity._.exists(aggregationPanelConfig.statusPanelParams)&&agGridCommunity._.exists(aggregationPanelConfig.statusPanelParams.aggFuncs)&&agGridCommunity._.exists(aggregationPanelConfig.statusPanelParams.aggFuncs.find((function(func){return func===aggFuncName}))))&&(statusBarValueComponent=this[refComponentName]):statusBarValueComponent=this[refComponentName],statusBarValueComponent},AggregationComp.prototype.onRangeSelectionChanged=function(){var _this=this,cellRanges=this.rangeService?this.rangeService.getCellRanges():void 0,sum=0,count=0,numberCount=0,min=null,max=null,cellsSoFar={};cellRanges&&!agGridCommunity._.missingOrEmpty(cellRanges)&&cellRanges.forEach((function(cellRange){for(var currentRow=_this.rangeService.getRangeStartRow(cellRange),lastRow=_this.rangeService.getRangeEndRow(cellRange);;){if(agGridCommunity._.missing(currentRow)||!currentRow||_this.rowPositionUtils.before(lastRow,currentRow)||!currentRow||!cellRange.columns)break;cellRange.columns.forEach((function(col){if(null!==currentRow){var cellId=_this.cellPositionUtils.createId({rowPinned:currentRow.rowPinned,column:col,rowIndex:currentRow.rowIndex});if(!cellsSoFar[cellId]){cellsSoFar[cellId]=!0;var rowNode=_this.rowRenderer.getRowNode(currentRow);if(!agGridCommunity._.missing(rowNode)){var value=_this.valueService.getValue(col,rowNode);agGridCommunity._.missing(value)||""===value||(value.value&&(value=value.value),"string"==typeof value&&(value=Number(value)),"number"!=typeof value||isNaN(value)||(sum+=value,(null===max||value>max)&&(max=value),(null===min||value<min)&&(min=value),numberCount++),count++)}}}})),currentRow=_this.cellNavigationService.getRowBelow(currentRow)}}));var gotResult=count>1,gotNumberResult=numberCount>1;this.setAggregationComponentValue("count",count,gotResult),this.setAggregationComponentValue("sum",sum,gotNumberResult),this.setAggregationComponentValue("min",min,gotNumberResult),this.setAggregationComponentValue("max",max,gotNumberResult),this.setAggregationComponentValue("avg",sum/numberCount,gotNumberResult)},AggregationComp.TEMPLATE='<div class="ag-status-panel ag-status-panel-aggregations">\n            <ag-name-value ref="avgAggregationComp"></ag-name-value>\n            <ag-name-value ref="countAggregationComp"></ag-name-value>\n            <ag-name-value ref="minAggregationComp"></ag-name-value>\n            <ag-name-value ref="maxAggregationComp"></ag-name-value>\n            <ag-name-value ref="sumAggregationComp"></ag-name-value>\n        </div>',__decorate$1Y([agGridCommunity.Optional("rangeService")],AggregationComp.prototype,"rangeService",void 0),__decorate$1Y([agGridCommunity.Autowired("valueService")],AggregationComp.prototype,"valueService",void 0),__decorate$1Y([agGridCommunity.Autowired("cellNavigationService")],AggregationComp.prototype,"cellNavigationService",void 0),__decorate$1Y([agGridCommunity.Autowired("rowRenderer")],AggregationComp.prototype,"rowRenderer",void 0),__decorate$1Y([agGridCommunity.Autowired("gridOptions")],AggregationComp.prototype,"gridOptions",void 0),__decorate$1Y([agGridCommunity.Autowired("gridApi")],AggregationComp.prototype,"gridApi",void 0),__decorate$1Y([agGridCommunity.Autowired("cellPositionUtils")],AggregationComp.prototype,"cellPositionUtils",void 0),__decorate$1Y([agGridCommunity.Autowired("rowPositionUtils")],AggregationComp.prototype,"rowPositionUtils",void 0),__decorate$1Y([agGridCommunity.RefSelector("sumAggregationComp")],AggregationComp.prototype,"sumAggregationComp",void 0),__decorate$1Y([agGridCommunity.RefSelector("countAggregationComp")],AggregationComp.prototype,"countAggregationComp",void 0),__decorate$1Y([agGridCommunity.RefSelector("minAggregationComp")],AggregationComp.prototype,"minAggregationComp",void 0),__decorate$1Y([agGridCommunity.RefSelector("maxAggregationComp")],AggregationComp.prototype,"maxAggregationComp",void 0),__decorate$1Y([agGridCommunity.RefSelector("avgAggregationComp")],AggregationComp.prototype,"avgAggregationComp",void 0),__decorate$1Y([agGridCommunity.PostConstruct],AggregationComp.prototype,"postConstruct",null),AggregationComp}(agGridCommunity.Component),StatusBarModule={moduleName:agGridCommunity.ModuleNames.StatusBarModule,beans:[StatusBarService],agStackComponents:[{componentName:"AgStatusBar",componentClass:StatusBar},{componentName:"AgNameValue",componentClass:NameValueComp}],userComponents:[{componentName:"agAggregationComponent",componentClass:AggregationComp},{componentName:"agSelectedRowCountComponent",componentClass:SelectedRowsComp},{componentName:"agTotalRowCountComponent",componentClass:TotalRowsComp},{componentName:"agFilteredRowCountComponent",componentClass:FilteredRowsComp},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:TotalAndFilteredRowsComp}],dependantModules:[EnterpriseCoreModule]},__extends$3w=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1Z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ViewportRowModel=function(_super){function ViewportRowModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.firstRow=-1,_this.lastRow=-1,_this.rowCount=-1,_this.rowNodesByIndex={},_this}return __extends$3w(ViewportRowModel,_super),ViewportRowModel.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){return!1},ViewportRowModel.prototype.init=function(){this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.addManagedListener(this.eventService,agGridCommunity.Events.EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this))},ViewportRowModel.prototype.start=function(){this.gridOptionsWrapper.getViewportDatasource()&&this.setViewportDatasource(this.gridOptionsWrapper.getViewportDatasource())},ViewportRowModel.prototype.isLastRowIndexKnown=function(){return!0},ViewportRowModel.prototype.destroyDatasource=function(){this.viewportDatasource&&(this.viewportDatasource.destroy&&this.viewportDatasource.destroy(),this.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)},ViewportRowModel.prototype.calculateFirstRow=function(firstRenderedRow){var bufferSize=this.gridOptionsWrapper.getViewportRowModelBufferSize(),pageSize=this.gridOptionsWrapper.getViewportRowModelPageSize(),afterBuffer=firstRenderedRow-bufferSize;return afterBuffer<0?0:Math.floor(afterBuffer/pageSize)*pageSize},ViewportRowModel.prototype.calculateLastRow=function(lastRenderedRow){if(-1===lastRenderedRow)return lastRenderedRow;var bufferSize=this.gridOptionsWrapper.getViewportRowModelBufferSize(),pageSize=this.gridOptionsWrapper.getViewportRowModelPageSize(),afterBuffer=lastRenderedRow+bufferSize,result=Math.ceil(afterBuffer/pageSize)*pageSize,lastRowIndex=this.rowCount-1;return Math.min(result,lastRowIndex)},ViewportRowModel.prototype.onViewportChanged=function(event){var newFirst=this.calculateFirstRow(event.firstRow),newLast=this.calculateLastRow(event.lastRow);this.firstRow===newFirst&&this.lastRow===newLast||(this.firstRow=newFirst,this.lastRow=newLast,this.purgeRowsNotInViewport(),this.viewportDatasource&&this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow))},ViewportRowModel.prototype.purgeRowsNotInViewport=function(){var _this=this;Object.keys(this.rowNodesByIndex).forEach((function(indexStr){var index=parseInt(indexStr,10);(index<_this.firstRow||index>_this.lastRow)&&delete _this.rowNodesByIndex[index]}))},ViewportRowModel.prototype.setViewportDatasource=function(viewportDatasource){this.destroyDatasource(),this.viewportDatasource=viewportDatasource,this.rowCount=0,viewportDatasource.init?viewportDatasource.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):console.warn("AG Grid: viewport is missing init method.")},ViewportRowModel.prototype.getType=function(){return agGridCommunity.Constants.ROW_MODEL_TYPE_VIEWPORT},ViewportRowModel.prototype.getRow=function(rowIndex){return this.rowNodesByIndex[rowIndex]||(this.rowNodesByIndex[rowIndex]=this.createBlankRowNode(rowIndex)),this.rowNodesByIndex[rowIndex]},ViewportRowModel.prototype.getRowNode=function(id){var result;return this.forEachNode((function(rowNode){rowNode.id===id&&(result=rowNode)})),result},ViewportRowModel.prototype.getRowCount=function(){return this.rowCount},ViewportRowModel.prototype.getRowIndexAtPixel=function(pixel){return 0!==this.rowHeight?Math.floor(pixel/this.rowHeight):0},ViewportRowModel.prototype.getRowBounds=function(index){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*index}},ViewportRowModel.prototype.getTopLevelRowCount=function(){return this.getRowCount()},ViewportRowModel.prototype.getTopLevelRowDisplayedIndex=function(topLevelIndex){return topLevelIndex},ViewportRowModel.prototype.isEmpty=function(){return this.rowCount>0},ViewportRowModel.prototype.isRowsToRender=function(){return this.rowCount>0},ViewportRowModel.prototype.getNodesInRangeForSelection=function(firstInRange,lastInRange){var firstIndex=agGridCommunity._.missing(firstInRange)?0:firstInRange.rowIndex,lastIndex=lastInRange.rowIndex,firstNodeOutOfRange=firstIndex<this.firstRow||firstIndex>this.lastRow,lastNodeOutOfRange=lastIndex<this.firstRow||lastIndex>this.lastRow;if(firstNodeOutOfRange||lastNodeOutOfRange)return[];for(var result=[],endIndex=firstIndex<=lastIndex?lastIndex:firstIndex,i=firstIndex<=lastIndex?firstIndex:lastIndex;i<=endIndex;i++)result.push(this.rowNodesByIndex[i]);return result},ViewportRowModel.prototype.forEachNode=function(callback){var _this=this,callbackCount=0;Object.keys(this.rowNodesByIndex).forEach((function(indexStr){var index=parseInt(indexStr,10),rowNode=_this.rowNodesByIndex[index];callback(rowNode,callbackCount),callbackCount++}))},ViewportRowModel.prototype.setRowData=function(rowData){var _this=this;agGridCommunity._.iterateObject(rowData,(function(indexStr,dataItem){var index=parseInt(indexStr,10);if(index>=_this.firstRow&&index<=_this.lastRow){var rowNode=_this.rowNodesByIndex[index];agGridCommunity._.missing(rowNode)&&(rowNode=_this.createBlankRowNode(index),_this.rowNodesByIndex[index]=rowNode),rowNode.setDataAndId(dataItem,index.toString())}}))},ViewportRowModel.prototype.createBlankRowNode=function(rowIndex){var rowNode=new agGridCommunity.RowNode(this.beans);return rowNode.setRowHeight(this.rowHeight),rowNode.setRowTop(this.rowHeight*rowIndex),rowNode.setRowIndex(rowIndex),rowNode},ViewportRowModel.prototype.setRowCount=function(rowCount,keepRenderedRows){if(void 0===keepRenderedRows&&(keepRenderedRows=!1),rowCount!==this.rowCount){this.rowCount=rowCount;var event={type:agGridCommunity.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,newData:!1,newPage:!1,keepRenderedRows,animate:!1};this.eventService.dispatchEvent(event)}},ViewportRowModel.prototype.isRowPresent=function(rowNode){return!1},__decorate$1Z([agGridCommunity.Autowired("gridApi")],ViewportRowModel.prototype,"gridApi",void 0),__decorate$1Z([agGridCommunity.Autowired("columnApi")],ViewportRowModel.prototype,"columnApi",void 0),__decorate$1Z([agGridCommunity.Autowired("rowRenderer")],ViewportRowModel.prototype,"rowRenderer",void 0),__decorate$1Z([agGridCommunity.Autowired("beans")],ViewportRowModel.prototype,"beans",void 0),__decorate$1Z([agGridCommunity.PostConstruct],ViewportRowModel.prototype,"init",null),__decorate$1Z([agGridCommunity.PreDestroy],ViewportRowModel.prototype,"destroyDatasource",null),ViewportRowModel=__decorate$1Z([agGridCommunity.Bean("rowModel")],ViewportRowModel)}(agGridCommunity.BeanStub),ViewportRowModelModule={moduleName:agGridCommunity.ModuleNames.ViewportRowModelModule,rowModels:{viewport:ViewportRowModel},dependantModules:[EnterpriseCoreModule]},__extends$3x=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1_=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$R=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$o=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$R(arguments[i]));return ar},ClipboardService=function(_super){function ClipboardService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.navigatorApiFailed=!1,_this}return __extends$3x(ClipboardService,_super),ClipboardService.prototype.init=function(){var _this=this;this.logger=this.loggerFactory.create("ClipboardService"),this.rowModel.getType()===agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady((function(p){_this.gridCtrl=p.gridCtrl}))},ClipboardService.prototype.pasteFromClipboard=function(){var _this=this;this.logger.log("pasteFromClipboard"),!this.gridOptionsWrapper.isSuppressClipboardApi()&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch((function(e){agGridCommunity._.doOnce((function(){console.warn(e),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.readText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API")}),"clipboardApiError"),_this.navigatorApiFailed=!0,_this.pasteFromClipboardLegacy()})):this.pasteFromClipboardLegacy()},ClipboardService.prototype.pasteFromClipboardLegacy=function(){var _this=this;this.executeOnTempElement((function(textArea){return textArea.focus({preventScroll:!0})}),(function(element){var data=element.value;_this.processClipboardData(data)}))},ClipboardService.prototype.processClipboardData=function(data){var _this=this;if(null!=data){var parsedData=agGridCommunity._.stringToArray(data,this.gridOptionsWrapper.getClipboardDelimiter()),userFunc=this.gridOptionsWrapper.getProcessDataFromClipboardFunc();if(userFunc&&(parsedData=userFunc({data:parsedData})),null!=parsedData){this.gridOptionsWrapper.isSuppressLastEmptyLineOnPaste()&&this.removeLastLineIfBlank(parsedData);this.doPasteOperation((function(cellsToFlash,updatedRowNodes,focusedCell,changedPath){_this.rangeService&&_this.rangeService.isMoreThanOneCell()&&!_this.hasOnlyOneValueToPaste(parsedData)?_this.pasteIntoActiveRange(parsedData,cellsToFlash,updatedRowNodes,changedPath):_this.pasteStartingFromFocusedCell(parsedData,cellsToFlash,updatedRowNodes,focusedCell,changedPath)}))}}},ClipboardService.prototype.doPasteOperation=function(pasteOperationFunc){var changedPath,api=this.gridOptionsWrapper.getApi(),columnApi=this.gridOptionsWrapper.getColumnApi();if(this.eventService.dispatchEvent({type:agGridCommunity.Events.EVENT_PASTE_START,api,columnApi,source:"clipboard"}),this.clientSideRowModel){var onlyChangedColumns=this.gridOptionsWrapper.isAggregateOnlyChangedColumns();changedPath=new agGridCommunity.ChangedPath(onlyChangedColumns,this.clientSideRowModel.getRootNode())}var cellsToFlash={},updatedRowNodes=[],focusedCell=this.focusService.getFocusedCell();pasteOperationFunc(cellsToFlash,updatedRowNodes,focusedCell,changedPath),changedPath&&this.clientSideRowModel.doAggregate(changedPath),this.rowRenderer.refreshCells(),this.dispatchFlashCells(cellsToFlash),this.fireRowChanged(updatedRowNodes),focusedCell&&this.focusService.setFocusedCell(focusedCell.rowIndex,focusedCell.column,focusedCell.rowPinned,!0),this.eventService.dispatchEvent({type:agGridCommunity.Events.EVENT_PASTE_END,api,columnApi,source:"clipboard"})},ClipboardService.prototype.pasteIntoActiveRange=function(clipboardData,cellsToFlash,updatedRowNodes,changedPath){var _this=this,abortRepeatingPasteIntoRows=this.getRangeSize()%clipboardData.length!=0,indexOffset=0,dataRowIndex=0;this.iterateActiveRanges(!1,(function(currentRow,rowNode,columns,index){if(index-indexOffset>=clipboardData.length){if(abortRepeatingPasteIntoRows)return;indexOffset+=dataRowIndex,dataRowIndex=0}var currentRowData=clipboardData[index-indexOffset];updatedRowNodes.push(rowNode);var processCellFromClipboardFunc=_this.gridOptionsWrapper.getProcessCellFromClipboardFunc();columns.forEach((function(column,idx){if(column.isCellEditable(rowNode)&&!column.isSuppressPaste(rowNode)){idx>=currentRowData.length&&(idx%=currentRowData.length);var newValue=_this.processCell(rowNode,column,currentRowData[idx],agGridCommunity.Constants.EXPORT_TYPE_DRAG_COPY,processCellFromClipboardFunc);rowNode.setDataValue(column,newValue,agGridCommunity.Constants.SOURCE_PASTE),changedPath&&changedPath.addParentNode(rowNode.parent,[column]);var cellId=_this.cellPositionUtils.createIdFromValues(currentRow.rowIndex,column,currentRow.rowPinned);cellsToFlash[cellId]=!0}})),dataRowIndex++}))},ClipboardService.prototype.pasteStartingFromFocusedCell=function(parsedData,cellsToFlash,updatedRowNodes,focusedCell,changedPath){if(focusedCell){var currentRow={rowIndex:focusedCell.rowIndex,rowPinned:focusedCell.rowPinned},columnsToPasteInto=this.columnModel.getDisplayedColumnsStartingAt(focusedCell.column);this.isPasteSingleValueIntoRange(parsedData)?this.pasteSingleValueIntoRange(parsedData,updatedRowNodes,cellsToFlash,changedPath):this.pasteMultipleValues(parsedData,currentRow,updatedRowNodes,columnsToPasteInto,cellsToFlash,agGridCommunity.Constants.EXPORT_TYPE_CLIPBOARD,changedPath)}},ClipboardService.prototype.isPasteSingleValueIntoRange=function(parsedData){return this.hasOnlyOneValueToPaste(parsedData)&&null!=this.rangeService&&!this.rangeService.isEmpty()},ClipboardService.prototype.pasteSingleValueIntoRange=function(parsedData,updatedRowNodes,cellsToFlash,changedPath){var _this=this,value=parsedData[0][0];this.iterateActiveRanges(!1,(function(currentRow,rowNode,columns){updatedRowNodes.push(rowNode),columns.forEach((function(column){return _this.updateCellValue(rowNode,column,value,cellsToFlash,agGridCommunity.Constants.EXPORT_TYPE_CLIPBOARD,changedPath)}))}))},ClipboardService.prototype.hasOnlyOneValueToPaste=function(parsedData){return 1===parsedData.length&&1===parsedData[0].length},ClipboardService.prototype.copyRangeDown=function(){var _this=this;if(this.rangeService&&!this.rangeService.isEmpty()){var firstRowValues=[];this.doPasteOperation((function(cellsToFlash,updatedRowNodes,focusedCell,changedPath){var processCellForClipboardFunc=_this.gridOptionsWrapper.getProcessCellForClipboardFunc(),processCellFromClipboardFunc=_this.gridOptionsWrapper.getProcessCellFromClipboardFunc();_this.iterateActiveRanges(!0,(function(currentRow,rowNode,columns){firstRowValues.length?(updatedRowNodes.push(rowNode),columns.forEach((function(column,index){if(column.isCellEditable(rowNode)&&!column.isSuppressPaste(rowNode)){var firstRowValue=_this.processCell(rowNode,column,firstRowValues[index],agGridCommunity.Constants.EXPORT_TYPE_DRAG_COPY,processCellFromClipboardFunc);rowNode.setDataValue(column,firstRowValue,agGridCommunity.Constants.SOURCE_PASTE),changedPath&&changedPath.addParentNode(rowNode.parent,[column]);var cellId=_this.cellPositionUtils.createIdFromValues(currentRow.rowIndex,column,currentRow.rowPinned);cellsToFlash[cellId]=!0}}))):columns.forEach((function(column){var value=_this.processCell(rowNode,column,_this.valueService.getValue(column,rowNode),agGridCommunity.Constants.EXPORT_TYPE_DRAG_COPY,processCellForClipboardFunc);firstRowValues.push(value)}))}))}))}},ClipboardService.prototype.removeLastLineIfBlank=function(parsedData){var lastLine=agGridCommunity._.last(parsedData);lastLine&&1===lastLine.length&&""===lastLine[0]&&agGridCommunity._.removeFromArray(parsedData,lastLine)},ClipboardService.prototype.fireRowChanged=function(rowNodes){var _this=this;this.gridOptionsWrapper.isFullRowEdit()&&rowNodes.forEach((function(rowNode){var event={type:agGridCommunity.Events.EVENT_ROW_VALUE_CHANGED,node:rowNode,data:rowNode.data,rowIndex:rowNode.rowIndex,rowPinned:rowNode.rowPinned,context:_this.gridOptionsWrapper.getContext(),api:_this.gridOptionsWrapper.getApi(),columnApi:_this.gridOptionsWrapper.getColumnApi()};_this.eventService.dispatchEvent(event)}))},ClipboardService.prototype.pasteMultipleValues=function(clipboardGridData,currentRow,updatedRowNodes,columnsToPasteInto,cellsToFlash,type,changedPath){var _this=this,rowPointer=currentRow,skipGroupRows=null!=this.clientSideRowModel&&!this.gridOptionsWrapper.isTreeData();clipboardGridData.forEach((function(clipboardRowData){var rowNode=function(){for(;;){if(!rowPointer)return null;var res=_this.rowPositionUtils.getRowNode(rowPointer);if(rowPointer=_this.cellNavigationService.getRowBelow({rowPinned:rowPointer.rowPinned,rowIndex:rowPointer.rowIndex}),null==res)return null;if(!(res.detail||res.footer||skipGroupRows&&res.group))return res}}();rowNode&&(clipboardRowData.forEach((function(value,index){return _this.updateCellValue(rowNode,columnsToPasteInto[index],value,cellsToFlash,type,changedPath)})),updatedRowNodes.push(rowNode))}))},ClipboardService.prototype.updateCellValue=function(rowNode,column,value,cellsToFlash,type,changedPath){if(rowNode&&column&&column.isCellEditable(rowNode)&&!column.isSuppressPaste(rowNode)){var processedValue=this.processCell(rowNode,column,value,type,this.gridOptionsWrapper.getProcessCellFromClipboardFunc());rowNode.setDataValue(column,processedValue,agGridCommunity.Constants.SOURCE_PASTE),cellsToFlash[this.cellPositionUtils.createIdFromValues(rowNode.rowIndex,column,rowNode.rowPinned)]=!0,changedPath&&changedPath.addParentNode(rowNode.parent,[column])}},ClipboardService.prototype.copyToClipboard=function(params){void 0===params&&(params={});var includeHeaders=params.includeHeaders,includeGroupHeaders=params.includeGroupHeaders;this.logger.log("copyToClipboard: includeHeaders = "+includeHeaders),null==includeHeaders&&(includeHeaders=this.gridOptionsWrapper.isCopyHeadersToClipboard()),null==includeGroupHeaders&&(includeGroupHeaders=this.gridOptionsWrapper.isCopyGroupHeadersToClipboard());var copyParams={includeHeaders,includeGroupHeaders},shouldCopyRows=!this.gridOptionsWrapper.isSuppressCopyRowsToClipboard();!this.rangeService||this.rangeService.isEmpty()||this.shouldSkipSingleCellRange()?shouldCopyRows&&!this.selectionService.isEmpty()?this.copySelectedRowsToClipboard(copyParams):this.focusService.isAnyCellFocused()&&this.copyFocusedCellToClipboard(copyParams):this.copySelectedRangeToClipboard(copyParams)},ClipboardService.prototype.shouldSkipSingleCellRange=function(){return this.gridOptionsWrapper.isSuppressCopySingleCellRanges()&&!this.rangeService.isMoreThanOneCell()},ClipboardService.prototype.iterateActiveRanges=function(onlyFirst,rowCallback,columnCallback){var _this=this;if(this.rangeService&&!this.rangeService.isEmpty()){var cellRanges=this.rangeService.getCellRanges();onlyFirst?this.iterateActiveRange(cellRanges[0],rowCallback,columnCallback,!0):cellRanges.forEach((function(range,idx){return _this.iterateActiveRange(range,rowCallback,columnCallback,idx===cellRanges.length-1)}))}},ClipboardService.prototype.iterateActiveRange=function(range,rowCallback,columnCallback,isLastRange){if(this.rangeService){var currentRow=this.rangeService.getRangeStartRow(range),lastRow=this.rangeService.getRangeEndRow(range);columnCallback&&range.columns&&columnCallback(range.columns);for(var rangeIndex=0,isLastRow=!1;!isLastRow&&null!=currentRow;){var rowNode=this.rowPositionUtils.getRowNode(currentRow);isLastRow=this.rowPositionUtils.sameRow(currentRow,lastRow),rowCallback(currentRow,rowNode,range.columns,rangeIndex++,isLastRow&&isLastRange),currentRow=this.cellNavigationService.getRowBelow(currentRow)}}},ClipboardService.prototype.copySelectedRangeToClipboard=function(params){if(void 0===params&&(params={}),this.rangeService&&!this.rangeService.isEmpty()){var _a=this.rangeService.areAllRangesAbleToMerge()?this.buildDataFromMergedRanges(params):this.buildDataFromRanges(params),data=_a.data,cellsToFlash=_a.cellsToFlash;this.copyDataToClipboard(data),this.dispatchFlashCells(cellsToFlash)}},ClipboardService.prototype.buildDataFromMergedRanges=function(params){var _this=this,columnsSet=new Set,ranges=this.rangeService.getCellRanges(),allRowPositions=[],allCellsToFlash={};ranges.forEach((function(range){range.columns.forEach((function(col){return columnsSet.add(col)}));var _a=_this.getRangeRowPositionsAndCellsToFlash(range),rowPositions=_a.rowPositions,cellsToFlash=_a.cellsToFlash;allRowPositions.push.apply(allRowPositions,__spread$o(rowPositions)),Object.assign(allCellsToFlash,cellsToFlash)}));var allColumns=this.columnModel.getAllDisplayedColumns(),exportedColumns=Array.from(columnsSet);return exportedColumns.sort((function(a,b){return allColumns.indexOf(a)-allColumns.indexOf(b)})),{data:this.buildExportParams({columns:exportedColumns,rowPositions:allRowPositions,includeHeaders:params.includeHeaders,includeGroupHeaders:params.includeGroupHeaders}),cellsToFlash:allCellsToFlash}},ClipboardService.prototype.buildDataFromRanges=function(params){var _this=this,ranges=this.rangeService.getCellRanges(),data=[],allCellsToFlash={};return ranges.forEach((function(range){var _a=_this.getRangeRowPositionsAndCellsToFlash(range),rowPositions=_a.rowPositions,cellsToFlash=_a.cellsToFlash;Object.assign(allCellsToFlash,cellsToFlash),data.push(_this.buildExportParams({columns:range.columns,rowPositions,includeHeaders:params.includeHeaders,includeGroupHeaders:params.includeGroupHeaders}))})),{data:data.join("\n"),cellsToFlash:allCellsToFlash}},ClipboardService.prototype.getRangeRowPositionsAndCellsToFlash=function(range){for(var _this=this,rowPositions=[],cellsToFlash={},startRow=this.rangeService.getRangeStartRow(range),lastRow=this.rangeService.getRangeEndRow(range),node=startRow;node&&(rowPositions.push(node),range.columns.forEach((function(column){var cellId=_this.cellPositionUtils.createIdFromValues(node.rowIndex,column,node.rowPinned);cellsToFlash[cellId]=!0})),!this.rowPositionUtils.sameRow(node,lastRow));)node=this.cellNavigationService.getRowBelow(node);return{rowPositions,cellsToFlash}},ClipboardService.prototype.copyFocusedCellToClipboard=function(params){var _a;void 0===params&&(params={});var focusedCell=this.focusService.getFocusedCell();if(null!=focusedCell){var cellId=this.cellPositionUtils.createId(focusedCell),currentRow={rowPinned:focusedCell.rowPinned,rowIndex:focusedCell.rowIndex},column=focusedCell.column,data=this.buildExportParams({columns:[column],rowPositions:[currentRow],includeHeaders:params.includeHeaders,includeGroupHeaders:params.includeGroupHeaders});this.copyDataToClipboard(data),this.dispatchFlashCells(((_a={})[cellId]=!0,_a))}},ClipboardService.prototype.copySelectedRowsToClipboard=function(params){void 0===params&&(params={});var columnKeys=params.columnKeys,includeHeaders=params.includeHeaders,includeGroupHeaders=params.includeGroupHeaders,data=this.buildExportParams({columns:columnKeys,includeHeaders,includeGroupHeaders});this.copyDataToClipboard(data)},ClipboardService.prototype.buildExportParams=function(params){var columns=params.columns,rowPositions=params.rowPositions,_a=params.includeHeaders,includeHeaders=void 0!==_a&&_a,_b=params.includeGroupHeaders,exportParams={columnKeys:columns,rowNodes:rowPositions,skipColumnHeaders:!includeHeaders,skipColumnGroupHeaders:!(void 0!==_b&&_b),suppressQuotes:!0,columnSeparator:this.gridOptionsWrapper.getClipboardDelimiter(),onlySelected:!rowPositions,processCellCallback:this.gridOptionsWrapper.getProcessCellForClipboardFunc(),processRowGroupCallback:function(params){return params.node.key},processHeaderCallback:this.gridOptionsWrapper.getProcessHeaderForClipboardFunc(),processGroupHeaderCallback:this.gridOptionsWrapper.getProcessGroupHeaderForClipboardFunc()};return this.csvCreator.getDataAsCsv(exportParams)},ClipboardService.prototype.dispatchFlashCells=function(cellsToFlash){var _this=this;window.setTimeout((function(){var event={type:agGridCommunity.Events.EVENT_FLASH_CELLS,cells:cellsToFlash,api:_this.gridApi,columnApi:_this.columnApi};_this.eventService.dispatchEvent(event)}),0)},ClipboardService.prototype.processCell=function(rowNode,column,value,type,func){return func?func({column,node:rowNode,value,type}):value},ClipboardService.prototype.copyDataToClipboard=function(data){var _this=this,userProvidedFunc=this.gridOptionsWrapper.getSendToClipboardFunc();userProvidedFunc?userProvidedFunc({data}):!this.gridOptionsWrapper.isSuppressClipboardApi()&&navigator.clipboard?navigator.clipboard.writeText(data).catch((function(e){agGridCommunity._.doOnce((function(){console.warn(e),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.writeText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.")}),"clipboardApiError"),_this.copyDataToClipboardLegacy(data)})):this.copyDataToClipboardLegacy(data)},ClipboardService.prototype.copyDataToClipboardLegacy=function(data){var _this=this;this.executeOnTempElement((function(element){var eDocument=_this.gridOptionsWrapper.getDocument(),focusedElementBefore=eDocument.activeElement;element.value=data||" ",element.select(),element.focus({preventScroll:!0}),eDocument.execCommand("copy")||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),null!=focusedElementBefore&&null!=focusedElementBefore.focus&&focusedElementBefore.focus({preventScroll:!0})}))},ClipboardService.prototype.executeOnTempElement=function(callbackNow,callbackAfter){var eDoc=this.gridOptionsWrapper.getDocument(),eTempInput=eDoc.createElement("textarea");eTempInput.style.width="1px",eTempInput.style.height="1px",eTempInput.style.top=eDoc.documentElement.scrollTop+"px",eTempInput.style.left=eDoc.documentElement.scrollLeft+"px",eTempInput.style.position="absolute",eTempInput.style.opacity="0";var guiRoot=this.gridCtrl.getGui();guiRoot.appendChild(eTempInput);try{callbackNow(eTempInput)}catch(err){console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}callbackAfter?window.setTimeout((function(){callbackAfter(eTempInput),guiRoot.removeChild(eTempInput)}),100):guiRoot.removeChild(eTempInput)},ClipboardService.prototype.getRangeSize=function(){var ranges=this.rangeService.getCellRanges(),startRangeIndex=0,endRangeIndex=0;return ranges.length>0&&(startRangeIndex=this.rangeService.getRangeStartRow(ranges[0]).rowIndex,endRangeIndex=this.rangeService.getRangeEndRow(ranges[0]).rowIndex),startRangeIndex-endRangeIndex+1},__decorate$1_([agGridCommunity.Autowired("csvCreator")],ClipboardService.prototype,"csvCreator",void 0),__decorate$1_([agGridCommunity.Autowired("loggerFactory")],ClipboardService.prototype,"loggerFactory",void 0),__decorate$1_([agGridCommunity.Autowired("selectionService")],ClipboardService.prototype,"selectionService",void 0),__decorate$1_([agGridCommunity.Optional("rangeService")],ClipboardService.prototype,"rangeService",void 0),__decorate$1_([agGridCommunity.Autowired("rowModel")],ClipboardService.prototype,"rowModel",void 0),__decorate$1_([agGridCommunity.Autowired("ctrlsService")],ClipboardService.prototype,"ctrlsService",void 0),__decorate$1_([agGridCommunity.Autowired("valueService")],ClipboardService.prototype,"valueService",void 0),__decorate$1_([agGridCommunity.Autowired("focusService")],ClipboardService.prototype,"focusService",void 0),__decorate$1_([agGridCommunity.Autowired("rowRenderer")],ClipboardService.prototype,"rowRenderer",void 0),__decorate$1_([agGridCommunity.Autowired("columnModel")],ClipboardService.prototype,"columnModel",void 0),__decorate$1_([agGridCommunity.Autowired("cellNavigationService")],ClipboardService.prototype,"cellNavigationService",void 0),__decorate$1_([agGridCommunity.Autowired("columnApi")],ClipboardService.prototype,"columnApi",void 0),__decorate$1_([agGridCommunity.Autowired("gridApi")],ClipboardService.prototype,"gridApi",void 0),__decorate$1_([agGridCommunity.Autowired("cellPositionUtils")],ClipboardService.prototype,"cellPositionUtils",void 0),__decorate$1_([agGridCommunity.Autowired("rowPositionUtils")],ClipboardService.prototype,"rowPositionUtils",void 0),__decorate$1_([agGridCommunity.PostConstruct],ClipboardService.prototype,"init",null),ClipboardService=__decorate$1_([agGridCommunity.Bean("clipboardService")],ClipboardService)}(agGridCommunity.BeanStub),ClipboardModule={moduleName:agGridCommunity.ModuleNames.ClipboardModule,beans:[ClipboardService],dependantModules:[EnterpriseCoreModule,CsvExportModule]};agGridCommunity.ModuleRegistry.register(ColumnsToolPanelModule,!1),agGridCommunity.ModuleRegistry.register(ExcelExportModule,!1),agGridCommunity.ModuleRegistry.register(FiltersToolPanelModule,!1),agGridCommunity.ModuleRegistry.register(SparklinesModule,!1),agGridCommunity.ModuleRegistry.register(GridChartsModule,!1),agGridCommunity.ModuleRegistry.register(MasterDetailModule,!1),agGridCommunity.ModuleRegistry.register(MenuModule,!1),agGridCommunity.ModuleRegistry.register(MultiFilterModule,!1),agGridCommunity.ModuleRegistry.register(RangeSelectionModule,!1),agGridCommunity.ModuleRegistry.register(RichSelectModule,!1),agGridCommunity.ModuleRegistry.register(RowGroupingModule,!1),agGridCommunity.ModuleRegistry.register(ServerSideRowModelModule,!1),agGridCommunity.ModuleRegistry.register(SetFilterModule,!1),agGridCommunity.ModuleRegistry.register(SideBarModule,!1),agGridCommunity.ModuleRegistry.register(StatusBarModule,!1),agGridCommunity.ModuleRegistry.register(ViewportRowModelModule,!1),agGridCommunity.ModuleRegistry.register(ClipboardModule,!1),exports.hFV=LicenseManager}}]);